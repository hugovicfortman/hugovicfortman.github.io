var Ob=Math.pow;(self.webpackChunkvictor_fortman=self.webpackChunkvictor_fortman||[]).push([[179],{946:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{E:()=>Ae});var S=Q(655),a=Q(2340),qe=Q(2096),ke=Q(520);const pe=a.N.configUrl;let Ae=(()=>{class Ie{constructor(Ce){this.http=Ce}loadConfig(){return new Promise((Ce,ae)=>{window.caches&&window.caches.match(pe).then(_e=>(0,S.mG)(this,void 0,void 0,function*(){_e?(console.log("config loaded from cache"),Ce(_e)):((yield window.caches.open("vf-local")).add(pe),this.http.get(pe).toPromise().then(Ne=>{this.config=Ne,console.log("config loaded from server"),Ce(Ne)}))})).catch(_e=>console.log(_e))}).then(Ce=>{this.config=Ce})}}return Ie.\u0275fac=function(Ce){return new(Ce||Ie)(qe.LFG(ke.eN))},Ie.\u0275prov=qe.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},652:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{y:()=>Ae});var S=Q(8929),a=Q(5877),qe=Q(2096),ke=Q(6719),pe=Q(8766);let Ae=(()=>{class Ie{constructor(Ce,ae){this.locale=Ce,this.util=ae,this.preference=a.bb,this.preferenceChangedSource=new S.xQ,this.preferenceChanged$=this.preferenceChangedSource.asObservable(),Ce.setDefaultLang(this.preference.Language),Ce.use(this.preference.Language)}getPreference(){return this.preference}setPreference(Ce,ae){return void 0!==this.preference[Ce]?(this.preference[Ce]=ae,void this.preferenceChangedSource.next(this.preference)):void console.warn("Unidentified preference settings. Not persisted")}toggleLightMode(){const Ce=a.DZ.indexOf(a.DZ.find(_e=>_e.name===this.preference.LightMode))+1;this.setLightMode(a.DZ[Ce>=a.DZ.length?0:Ce].name)}setLightMode(Ce){const ae=a.DZ.find(_e=>_e.name===Ce);this.util.isNullOrUndefined(ae)||(this.preference.LightMode=ae.name,a.DZ.forEach(_e=>document.body.classList.remove(_e.longCode)),document.body.classList.add(ae.longCode),this.preferenceChangedSource.next(this.preference))}toggleLanguages(){const Ce=a.a2.indexOf(a.a2.find(_e=>_e.code===this.preference.Language))+1;this.setLanguage(a.a2[Ce>=a.a2.length?0:Ce].code)}setLanguage(Ce){const ae=a.a2.find(_e=>_e.code===Ce);this.util.isNullOrUndefined(ae)||(this.preference.Language=ae.code,document.documentElement.lang=ae.code,this.locale.use(Ce),this.preferenceChangedSource.next(this.preference))}toggleBackdropMode(){const Ce=a.E2.indexOf(a.E2.find(_e=>_e.name===this.preference.BackdropMode))+1;this.setBackdropMode(a.E2[Ce>=a.E2.length?0:Ce].name)}setBackdropMode(Ce){const ae=a.E2.find(_e=>_e.name===Ce);this.util.isNullOrUndefined(ae)||(this.preference.BackdropMode=ae.name,this.util.globalFunction("switchBackdropMode",ae.code),this.preferenceChangedSource.next(this.preference))}setMenuMode(Ce){const ae=a.HW.find(_e=>_e.name===Ce);this.util.isNullOrUndefined(ae)||(this.preference.MenuMode=ae.name,this.preferenceChangedSource.next(this.preference))}removeDarkMode(){this.util.globalFunction("removeDarkMode")}}return Ie.\u0275fac=function(Ce){return new(Ce||Ie)(qe.LFG(ke.sK),qe.LFG(pe.t))},Ie.\u0275prov=qe.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},8766:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{t:()=>a});var S=Q(2096);let a=(()=>{class qe{constructor(){}click(pe){pe instanceof HTMLElement&&pe.click()}range(pe){const Ae=new Array(pe);for(let Ie=0;Ie<pe;Ie++)Ae[Ie]=Ie+1;return Ae}stringContainsAny(pe,Ae){for(const Ie of Ae)if(-1!==pe.indexOf(Ie.toString()))return!0;return!1}stringIndexOfAny(pe,Ae){for(const Ie of Ae)if(-1!==pe.indexOf(Ie.toString()))return pe.indexOf(Ie.toString());return-1}arrayIndexOfMatchedString(pe,Ae){for(let Ie=0;Ie<pe.length;Ie++)if(-1!==Ae.indexOf(pe[Ie]))return Ie;return-1}arrayMatchedString(pe,Ae){for(let Ie=0;Ie<pe.length;Ie++)if(-1!==Ae.indexOf(pe[Ie]))return pe[Ie];return null}set_var(pe,Ae){document.body.setAttribute(pe,Ae)}get_var(pe){return document.body.getAttribute(pe)}isNullOrUndefined(pe){return null==pe||void 0===pe}globalFunction(pe,...Ae){return window[pe](Ae)}}return qe.\u0275fac=function(pe){return new(pe||qe)},qe.\u0275prov=S.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})()},4466:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{m:()=>qe});var S=Q(9808),a=Q(2096);let qe=(()=>{class ke{}return ke.\u0275fac=function(Ae){return new(Ae||ke)},ke.\u0275mod=a.oAB({type:ke}),ke.\u0275inj=a.cJS({imports:[[S.ez]]}),ke})()},2340:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{N:()=>S});const S={production:!0,configUrl:"https://victorfortman.com/assets/config/"}},4649:(Jt,Qe,Q)=>{"use strict";var S=Q(9808),a=Q(2096);class qe extends S.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends qe{static makeCurrent(){(0,S.HT)(new ke)}onAndCancel(R,g,T){return R.addEventListener(g,T,!1),()=>{R.removeEventListener(g,T,!1)}}dispatchEvent(R,g){R.dispatchEvent(g)}remove(R){R.parentNode&&R.parentNode.removeChild(R)}createElement(R,g){return(g=g||this.getDefaultDocument()).createElement(R)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(R){return R.nodeType===Node.ELEMENT_NODE}isShadowRoot(R){return R instanceof DocumentFragment}getGlobalEventTarget(R,g){return"window"===g?window:"document"===g?R:"body"===g?R.body:null}getBaseHref(R){const g=function Ae(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==g?null:function Ue(x){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",x);const R=Ie.pathname;return"/"===R.charAt(0)?R:`/${R}`}(g)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(R){return(0,S.Mx)(document.cookie,R)}}let Ie,pe=null;const Ce=new a.OlP("TRANSITION_ID"),_e=[{provide:a.ip1,useFactory:function ae(x,R,g){return()=>{g.get(a.CZH).donePromise.then(()=>{const T=(0,S.q)(),W=R.querySelectorAll(`style[ng-transition="${x}"]`);for(let oe=0;oe<W.length;oe++)T.remove(W[oe])})}},deps:[Ce,S.K0,a.zs3],multi:!0}];class Re{static init(){(0,a.VLi)(new Re)}addToWindow(R){a.dqk.getAngularTestability=(T,W=!0)=>{const oe=R.findTestabilityInTree(T,W);if(null==oe)throw new Error("Could not find testability for element.");return oe},a.dqk.getAllAngularTestabilities=()=>R.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>R.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(T=>{const W=a.dqk.getAllAngularTestabilities();let oe=W.length,it=!1;const hn=function(Ln){it=it||Ln,oe--,0==oe&&T(it)};W.forEach(function(Ln){Ln.whenStable(hn)})})}findTestabilityInTree(R,g,T){if(null==g)return null;const W=R.getTestability(g);return null!=W?W:T?(0,S.q)().isShadowRoot(g)?this.findTestabilityInTree(R,g.host,!0):this.findTestabilityInTree(R,g.parentElement,!0):null}}let Ne=(()=>{class x{build(){return new XMLHttpRequest}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();function an(x,R){"undefined"!=typeof COMPILED&&COMPILED||((a.dqk.ng=a.dqk.ng||{})[x]=R)}const Pt=(()=>({ApplicationRef:a.z2F,NgZone:a.R0b}))();function fn(x){return(0,a.Tjo)(x)}const St=[{provide:a.ip1,useFactory:function mt(x){return an("probe",fn),an("coreTokens",Object.assign(Object.assign({},Pt),function $e(x){return x.reduce((R,g)=>(R[g.name]=g.token,R),{})}(x||[]))),()=>fn},deps:[[a.PXZ,new a.FiY]],multi:!0}],ut=new a.OlP("EventManagerPlugins");let Ct=(()=>{class x{constructor(g,T){this._zone=T,this._eventNameToPlugin=new Map,g.forEach(W=>W.manager=this),this._plugins=g.slice().reverse()}addEventListener(g,T,W){return this._findPluginFor(T).addEventListener(g,T,W)}addGlobalEventListener(g,T,W){return this._findPluginFor(T).addGlobalEventListener(g,T,W)}getZone(){return this._zone}_findPluginFor(g){const T=this._eventNameToPlugin.get(g);if(T)return T;const W=this._plugins;for(let oe=0;oe<W.length;oe++){const it=W[oe];if(it.supports(g))return this._eventNameToPlugin.set(g,it),it}throw new Error(`No event manager plugin found for event ${g}`)}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(ut),a.LFG(a.R0b))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();class kt{constructor(R){this._doc=R}addGlobalEventListener(R,g,T){const W=(0,S.q)().getGlobalEventTarget(this._doc,R);if(!W)throw new Error(`Unsupported event target ${W} for event ${g}`);return this.addEventListener(W,g,T)}}let Ut=(()=>{class x{constructor(){this._stylesSet=new Set}addStyles(g){const T=new Set;g.forEach(W=>{this._stylesSet.has(W)||(this._stylesSet.add(W),T.add(W))}),this.onStylesAdded(T)}onStylesAdded(g){}getAllStyles(){return Array.from(this._stylesSet)}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})(),dn=(()=>{class x extends Ut{constructor(g){super(),this._doc=g,this._hostNodes=new Map,this._hostNodes.set(g.head,[])}_addStylesToHost(g,T,W){g.forEach(oe=>{const it=this._doc.createElement("style");it.textContent=oe,W.push(T.appendChild(it))})}addHost(g){const T=[];this._addStylesToHost(this._stylesSet,g,T),this._hostNodes.set(g,T)}removeHost(g){const T=this._hostNodes.get(g);T&&T.forEach(Pi),this._hostNodes.delete(g)}onStylesAdded(g){this._hostNodes.forEach((T,W)=>{this._addStylesToHost(g,W,T)})}ngOnDestroy(){this._hostNodes.forEach(g=>g.forEach(Pi))}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.K0))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();function Pi(x){(0,S.q)().remove(x)}const hi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xi=/%COMP%/g;function vi(x,R,g){for(let T=0;T<R.length;T++){let W=R[T];Array.isArray(W)?vi(x,W,g):(W=W.replace(xi,x),g.push(W))}return g}function jt(x){return R=>{if("__ngUnwrap__"===R)return x;!1===x(R)&&(R.preventDefault(),R.returnValue=!1)}}let Kn=(()=>{class x{constructor(g,T,W){this.eventManager=g,this.sharedStylesHost=T,this.appId=W,this.rendererByCompId=new Map,this.defaultRenderer=new ti(g)}createRenderer(g,T){if(!g||!T)return this.defaultRenderer;switch(T.encapsulation){case a.ifc.Emulated:{let W=this.rendererByCompId.get(T.id);return W||(W=new pr(this.eventManager,this.sharedStylesHost,T,this.appId),this.rendererByCompId.set(T.id,W)),W.applyToHost(g),W}case 1:case a.ifc.ShadowDom:return new Xi(this.eventManager,this.sharedStylesHost,g,T);default:if(!this.rendererByCompId.has(T.id)){const W=vi(T.id,T.styles,[]);this.sharedStylesHost.addStyles(W),this.rendererByCompId.set(T.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(Ct),a.LFG(dn),a.LFG(a.AFp))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();class ti{constructor(R){this.eventManager=R,this.data=Object.create(null)}destroy(){}createElement(R,g){return g?document.createElementNS(hi[g]||g,R):document.createElement(R)}createComment(R){return document.createComment(R)}createText(R){return document.createTextNode(R)}appendChild(R,g){R.appendChild(g)}insertBefore(R,g,T){R&&R.insertBefore(g,T)}removeChild(R,g){R&&R.removeChild(g)}selectRootElement(R,g){let T="string"==typeof R?document.querySelector(R):R;if(!T)throw new Error(`The selector "${R}" did not match any elements`);return g||(T.textContent=""),T}parentNode(R){return R.parentNode}nextSibling(R){return R.nextSibling}setAttribute(R,g,T,W){if(W){g=W+":"+g;const oe=hi[W];oe?R.setAttributeNS(oe,g,T):R.setAttribute(g,T)}else R.setAttribute(g,T)}removeAttribute(R,g,T){if(T){const W=hi[T];W?R.removeAttributeNS(W,g):R.removeAttribute(`${T}:${g}`)}else R.removeAttribute(g)}addClass(R,g){R.classList.add(g)}removeClass(R,g){R.classList.remove(g)}setStyle(R,g,T,W){W&(a.JOm.DashCase|a.JOm.Important)?R.style.setProperty(g,T,W&a.JOm.Important?"important":""):R.style[g]=T}removeStyle(R,g,T){T&a.JOm.DashCase?R.style.removeProperty(g):R.style[g]=""}setProperty(R,g,T){R[g]=T}setValue(R,g){R.nodeValue=g}listen(R,g,T){return"string"==typeof R?this.eventManager.addGlobalEventListener(R,g,jt(T)):this.eventManager.addEventListener(R,g,jt(T))}}class pr extends ti{constructor(R,g,T,W){super(R),this.component=T;const oe=vi(W+"-"+T.id,T.styles,[]);g.addStyles(oe),this.contentAttr=function pi(x){return"_ngcontent-%COMP%".replace(xi,x)}(W+"-"+T.id),this.hostAttr=function yr(x){return"_nghost-%COMP%".replace(xi,x)}(W+"-"+T.id)}applyToHost(R){super.setAttribute(R,this.hostAttr,"")}createElement(R,g){const T=super.createElement(R,g);return super.setAttribute(T,this.contentAttr,""),T}}class Xi extends ti{constructor(R,g,T,W){super(R),this.sharedStylesHost=g,this.hostEl=T,this.shadowRoot=T.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const oe=vi(W.id,W.styles,[]);for(let it=0;it<oe.length;it++){const hn=document.createElement("style");hn.textContent=oe[it],this.shadowRoot.appendChild(hn)}}nodeOrShadowRoot(R){return R===this.hostEl?this.shadowRoot:R}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(R,g){return super.appendChild(this.nodeOrShadowRoot(R),g)}insertBefore(R,g,T){return super.insertBefore(this.nodeOrShadowRoot(R),g,T)}removeChild(R,g){return super.removeChild(this.nodeOrShadowRoot(R),g)}parentNode(R){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(R)))}}let xr=(()=>{class x extends kt{constructor(g){super(g)}supports(g){return!0}addEventListener(g,T,W){return g.addEventListener(T,W,!1),()=>this.removeEventListener(g,T,W)}removeEventListener(g,T,W){return g.removeEventListener(T,W)}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.K0))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();const Yr={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Gi=new a.OlP("HammerGestureConfig"),lr=new a.OlP("HammerLoader");let os=(()=>{class x{constructor(){this.events=[],this.overrides={}}buildHammer(g){const T=new Hammer(g,this.options);T.get("pinch").set({enable:!0}),T.get("rotate").set({enable:!0});for(const W in this.overrides)T.get(W).set(this.overrides[W]);return T}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})();const Te=[{provide:ut,useClass:(()=>{class x extends kt{constructor(g,T,W,oe){super(g),this._config=T,this.console=W,this.loader=oe,this._loaderPromise=null}supports(g){return!(!Yr.hasOwnProperty(g.toLowerCase())&&!this.isCustomEvent(g)||!window.Hammer&&!this.loader)}addEventListener(g,T,W){const oe=this.manager.getZone();if(T=T.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let it=!1,hn=()=>{it=!0};return this._loaderPromise.then(()=>{window.Hammer?it||(hn=this.addEventListener(g,T,W)):hn=()=>{}}).catch(()=>{hn=()=>{}}),()=>{hn()}}return oe.runOutsideAngular(()=>{const it=this._config.buildHammer(g),hn=function(Ln){oe.runGuarded(function(){W(Ln)})};return it.on(T,hn),()=>{it.off(T,hn),"function"==typeof it.destroy&&it.destroy()}})}isCustomEvent(g){return this._config.events.indexOf(g)>-1}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.K0),a.LFG(Gi),a.LFG(a.c2e),a.LFG(lr,8))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})(),multi:!0,deps:[S.K0,Gi,a.c2e,[new a.FiY,lr]]},{provide:Gi,useClass:os,deps:[]}],he=Te;let ve=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({providers:Te}),x})();const ee=["alt","control","meta","shift"],Se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},on={alt:x=>x.altKey,control:x=>x.ctrlKey,meta:x=>x.metaKey,shift:x=>x.shiftKey};let yn=(()=>{class x extends kt{constructor(g){super(g)}supports(g){return null!=x.parseEventName(g)}addEventListener(g,T,W){const oe=x.parseEventName(T),it=x.eventCallback(oe.fullKey,W,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,S.q)().onAndCancel(g,oe.domEventName,it))}static parseEventName(g){const T=g.toLowerCase().split("."),W=T.shift();if(0===T.length||"keydown"!==W&&"keyup"!==W)return null;const oe=x._normalizeKey(T.pop());let it="";if(ee.forEach(Ln=>{const gs=T.indexOf(Ln);gs>-1&&(T.splice(gs,1),it+=Ln+".")}),it+=oe,0!=T.length||0===oe.length)return null;const hn={};return hn.domEventName=W,hn.fullKey=it,hn}static getEventFullKey(g){let T="",W=function xn(x){let R=x.key;if(null==R){if(R=x.keyIdentifier,null==R)return"Unidentified";R.startsWith("U+")&&(R=String.fromCharCode(parseInt(R.substring(2),16)),3===x.location&&nt.hasOwnProperty(R)&&(R=nt[R]))}return Se[R]||R}(g);return W=W.toLowerCase()," "===W?W="space":"."===W&&(W="dot"),ee.forEach(oe=>{oe!=W&&on[oe](g)&&(T+=oe+".")}),T+=W,T}static eventCallback(g,T,W){return oe=>{x.getEventFullKey(oe)===g&&W.runGuarded(()=>T(oe))}}static _normalizeKey(g){return"esc"===g?"escape":g}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.K0))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac}),x})(),Hn=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275prov=(0,a.Yz7)({factory:function(){return(0,a.LFG)(Nn)},token:x,providedIn:"root"}),x})(),Nn=(()=>{class x extends Hn{constructor(g){super(),this._doc=g}sanitize(g,T){if(null==T)return null;switch(g){case a.q3G.NONE:return T;case a.q3G.HTML:return(0,a.qzn)(T,"HTML")?(0,a.z3N)(T):(0,a.EiD)(this._doc,String(T)).toString();case a.q3G.STYLE:return(0,a.qzn)(T,"Style")?(0,a.z3N)(T):T;case a.q3G.SCRIPT:if((0,a.qzn)(T,"Script"))return(0,a.z3N)(T);throw new Error("unsafe value used in a script context");case a.q3G.URL:return(0,a.yhl)(T),(0,a.qzn)(T,"URL")?(0,a.z3N)(T):(0,a.mCW)(String(T));case a.q3G.RESOURCE_URL:if((0,a.qzn)(T,"ResourceURL"))return(0,a.z3N)(T);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${g} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(g){return(0,a.JVY)(g)}bypassSecurityTrustStyle(g){return(0,a.L6k)(g)}bypassSecurityTrustScript(g){return(0,a.eBb)(g)}bypassSecurityTrustUrl(g){return(0,a.LAX)(g)}bypassSecurityTrustResourceUrl(g){return(0,a.pB0)(g)}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.K0))},x.\u0275prov=(0,a.Yz7)({factory:function(){return function Ki(x){return new Nn(x.get(S.K0))}((0,a.LFG)(a.gxx))},token:x,providedIn:"root"}),x})();const as=[{provide:a.Tiy,useExisting:Hn},{provide:Hn,useClass:Nn,deps:[S.K0]}],ur=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:S.bD},{provide:a.g9A,useValue:function wo(){ke.makeCurrent(),Re.init()},multi:!0},{provide:S.K0,useFactory:function cr(){return(0,a.RDi)(document),document},deps:[]}]),Ds=[as,{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function li(){return new a.qLn},deps:[]},{provide:ut,useClass:xr,multi:!0,deps:[S.K0,a.R0b,a.Lbi]},{provide:ut,useClass:yn,multi:!0,deps:[S.K0]},he,{provide:Kn,useClass:Kn,deps:[Ct,dn,a.AFp]},{provide:a.FYo,useExisting:Kn},{provide:Ut,useExisting:dn},{provide:dn,useClass:dn,deps:[S.K0]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Ct,useClass:Ct,deps:[ut,a.R0b]},{provide:S.JF,useClass:Ne,deps:[]},St];let Zo=(()=>{class x{constructor(g){if(g)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(g){return{ngModule:x,providers:[{provide:a.AFp,useValue:g.appId},{provide:Ce,useExisting:a.AFp},_e]}}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(x,12))},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({providers:Ds,imports:[S.ez,a.hGG]}),x})();"undefined"!=typeof window&&window;var zn=Q(3075),At=Q(520),Xt=Q(6719);class ei{constructor(R,g="/assets/i18n/",T=".json"){this.http=R,this.prefix=g,this.suffix=T}getTranslation(R){return this.http.get(`${this.prefix}${R}${this.suffix}`)}}var Qi=Q(4466),_i=Q(652),Fn=Q(8766),ki=Q(4406),Ti=Q(655),hr=Q(2916),er=Q(6688),un=Q(7043),sr=Q(4850);function Wi(x,R,g,T){return(0,un.m)(g)&&(T=g,g=void 0),T?Wi(x,R,g).pipe((0,sr.U)(W=>(0,er.k)(W)?T(...W):T(W))):new hr.y(W=>{Sr(x,R,function oe(it){W.next(arguments.length>1?Array.prototype.slice.call(arguments):it)},W,g)})}function Sr(x,R,g,T,W){let oe;if(function Js(x){return x&&"function"==typeof x.addEventListener&&"function"==typeof x.removeEventListener}(x)){const it=x;x.addEventListener(R,g,W),oe=()=>it.removeEventListener(R,g,W)}else if(function br(x){return x&&"function"==typeof x.on&&"function"==typeof x.off}(x)){const it=x;x.on(R,g),oe=()=>it.off(R,g)}else if(function bi(x){return x&&"function"==typeof x.addListener&&"function"==typeof x.removeListener}(x)){const it=x;x.addListener(R,g),oe=()=>it.removeListener(R,g)}else{if(!x||!x.length)throw new TypeError("Invalid event target");for(let it=0,hn=x.length;it<hn;it++)Sr(x[it],R,g,T,W)}T.add(oe)}let Zi=(()=>{class x{constructor(g,T){this.viewportScroller=g,this.util=T}getScroll(g=document){const T=this.getCurrentScroll(g),W=this.getMaxScroll(g);let oe=T/Math.max(W,1);return oe=Math.max(oe,0),oe=Math.min(oe,1),100*oe}getScrollAsStream(g=document){let T;return T=g instanceof Document?Wi(window,"scroll").pipe((0,sr.U)(W=>this.getScroll(g))):Wi(g,"scroll").pipe((0,sr.U)(W=>this.getScroll(g))),T}getScrollBoundaries(g){const T=document.querySelector("#"+g),W=new ci(0,0);return T instanceof HTMLElement&&(W.Top=T.offsetTop/document.body.offsetHeight*100,W.Bottom=(T.offsetTop+T.getBoundingClientRect().height)/document.body.offsetHeight*100),W}scrollTo(g){return(0,Ti.mG)(this,void 0,void 0,function*(){return this.util.set_var("autoScrolling",!0),new Promise((T,W)=>{this.viewportScroller.scrollToAnchor(g),setTimeout(()=>{this.util.set_var("autoScrolling",!1),T(this.getScroll(document))},1e3)})})}getRelativePosition(g){return g.offsetTop/document.body.offsetHeight*100}getCurrentScroll(g){return g instanceof Document?window.pageYOffset:g.scrollTop}getMaxScroll(g){return g instanceof Document?Math.max(g.body.scrollHeight,g.body.offsetHeight,g.body.clientHeight,g.documentElement.scrollHeight,g.documentElement.offsetHeight,g.documentElement.clientHeight)-g.documentElement.clientHeight:g.scrollHeight-g.clientHeight}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(S.EM),a.LFG(Fn.t))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();class ci{constructor(R,g){this.Top=R,this.Bottom=g}}let Ms=(()=>{class x{constructor(g,T,W,oe){this.elementScrollService=g,this.router=T,this.util=W,this.preferenceService=oe,this.togglingNav=null,this.pageScroll=0}ngOnInit(){this.defaultRouteNames=this.getDefaultRouteNames(),this.elementScrollService.getScrollAsStream().subscribe(g=>{this.pageScroll=g,this.monitorDefaultRouteSections(g),this.lastSection=this.thisSection}),this.router.events.subscribe(g=>{g instanceof ki.m2&&(this.IsInvalidRoute="/404"===g.url,setTimeout(()=>{this.preferenceService.setMenuMode(this.isDefaultRoute?"available":"retracted")},500)),this.folded=!0}),this.scrollToCurrentRouteSection(),this.folded=!0}toggleNavFolding(){null===this.togglingNav&&(this.togglingNav=setTimeout(()=>{this.folded=!this.folded,this.togglingNav=null},0))}scrollTo(g){this.elementScrollService.scrollTo(g).then(T=>{})}clickTarget(g){g.preventDefault(),this.util.click(g.target)}getAllRoutes(){return this.router.config.filter(g=>!["**","404"].includes(g.path))}getDefaultRouteNames(){return this.getAllRoutes().find(g=>""===g.path).children.filter(g=>![""].includes(g.path)).map(g=>g.path)}get isDefaultRoute(){return this.util.stringContainsAny(this.router.url,this.defaultRouteNames)}monitorDefaultRouteSections(g){if(this.util.stringContainsAny(this.router.url,this.defaultRouteNames))for(let T=0;T<this.defaultRouteNames.length;T++){const W=this.defaultRouteNames[T],oe=this.elementScrollService.getScrollBoundaries(W);g>oe.Top+1&&g<oe.Bottom&&-1===this.router.url.indexOf(W)&&(this.thisSection=W,this.scrollingWithin||"true"===this.util.get_var("autoScrolling")||this.router.navigateByUrl("/"+W))}this.scrollingWithin=this.thisSection===this.lastSection}scrollToCurrentRouteSection(){if(this.util.stringContainsAny(window.location.href,this.defaultRouteNames)){if(this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)===this.defaultRouteNames[0])return;window.addEventListener("load",this.handleWindowLoad),this.util.set_var("defaultSection",this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)),this.util.set_var("autoScrolling",!0)}}handleWindowLoad(){window.removeEventListener("load",this.handleWindowLoad);const g=document.body.getAttribute("defaultSection");if(void 0!==g){const T=document.querySelector('[data-details="'+g+'"]');null!=T&&T.click()}}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Zi),a.Y36(ki.F0),a.Y36(Fn.t),a.Y36(_i.y))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-main-nav"]],inputs:{mode:"mode"},decls:27,vars:26,consts:[[1,"top"],[1,"nav","text-white","text-always-white"],["data-details","home","routerLink","/home","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","profile","routerLink","/profile","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","projects","routerLink","/projects","routerLinkActive","active",1,"nav-item",3,"click","tap"],[1,"nav-extender",3,"click","tap"],["data-details","contact","routerLink","/contact","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","skills","routerLink","/skills","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","resume","routerLink","/resume","routerLinkActive","active",1,"nav-item",3,"click","tap"],[3,"click","tap"],[1,"fa","fa-chevron-up"]],template:function(g,T){1&g&&(a.TgZ(0,"aside",0),a.TgZ(1,"ul",1),a.TgZ(2,"li",2),a.NdJ("click",function(){return T.scrollTo("home")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"li",3),a.NdJ("click",function(){return T.scrollTo("profile")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.TgZ(8,"li",4),a.NdJ("click",function(){return T.scrollTo("projects")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.TgZ(11,"li",5),a.NdJ("click",function(){return T.toggleNavFolding()})("tap",function(oe){return T.clickTarget(oe)}),a.TgZ(12,"span"),a._uU(13,"\u23f7"),a.qZA(),a.TgZ(14,"span"),a._uU(15,"\u23f6"),a.qZA(),a.qZA(),a.TgZ(16,"li",6),a.NdJ("click",function(){return T.scrollTo("contact")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(17),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"li",7),a.NdJ("click",function(){return T.scrollTo("skills")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.TgZ(22,"li",8),a.NdJ("click",function(){return T.scrollTo("resume")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(23),a.ALo(24,"translate"),a.qZA(),a.qZA(),a.TgZ(25,"div",9),a.NdJ("click",function(){return T.scrollTo("wrapper")})("tap",function(oe){return T.clickTarget(oe)}),a._UZ(26,"i",10),a.qZA(),a.qZA()),2&g&&(a.xp6(1),a.ekj("collapsed",!T.folded),a.xp6(2),a.hij(" ",a.lcZ(4,14,"MENU.HOME")," "),a.xp6(3),a.hij(" ",a.lcZ(7,16,"MENU.PROFILE")," "),a.xp6(3),a.hij(" ",a.lcZ(10,18,"MENU.PROJECTS")," "),a.xp6(3),a.ekj("d-none",!T.folded),a.xp6(2),a.ekj("d-none",T.folded),a.xp6(3),a.hij(" ",a.lcZ(18,20,"MENU.CONTACT")," "),a.xp6(3),a.hij(" ",a.lcZ(21,22,"MENU.SKILLS")," "),a.xp6(3),a.hij(" ",a.lcZ(24,24,"MENU.RESUME")," "),a.xp6(2),a.Tol("top-scroller"+(T.pageScroll>20?"":" hide")))},directives:[ki.rH,ki.Od],pipes:[Xt.X$],styles:[".nav[_ngcontent-%COMP%]{list-style-type:none;text-align:center;margin:0;padding:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#c8c8e14d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%], .top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{color:#fafafe!important;background-color:#575a7080;border:1px dashed #575a7080}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#9696af4d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0;-webkit-user-select:none;user-select:none;font-weight:700;font-size:smaller;display:flex;height:58px;justify-content:space-around;overflow:hidden}.top[_ngcontent-%COMP%]   .nav.collapsed[_ngcontent-%COMP%]{height:120px;border:1px dashed #777;border-top:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:block;cursor:pointer;list-style-type:none;line-height:58px;min-width:70px;max-width:calc(80px + 2vw);padding:0 2px;text-align:center}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-extender[_ngcontent-%COMP%]{width:18px;line-height:58px;padding:1px;border:1px dashed #777;cursor:pointer}.top-scroller[_ngcontent-%COMP%]{background-color:#77777750;position:fixed;bottom:10px;right:24px;height:58px;width:58px;border:1px dashed #99999950;z-index:1;font-size:30px;text-align:center;vertical-align:middle;line-height:45px;color:#777;cursor:pointer}"]}),x})();var us=Q(5877);function Tr(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"span",23),a.NdJ("click",function(){return a.CHM(g),a.oxw().toggleFullscreenMode()})("tap",function(W){return a.CHM(g),a.oxw().clickTarget(W)}),a._UZ(1,"span",24),a.qZA()}if(2&x){const g=a.oxw();a.ekj("active",g.IsFullScreen)}}function j(x,R){if(1&x&&(a.TgZ(0,"span",25),a.ALo(1,"translate"),a._UZ(2,"i"),a.qZA()),2&x){const g=R.$implicit,T=a.oxw();a.Udp("display",T.preference.Language!=g.code?"none":""),a.s9C("title",a.lcZ(1,6,"LANGUAGES."+g.name)),a.xp6(2),a.Gre("flag ",g.ico,"")}}function ne(x,R){if(1&x&&(a.TgZ(0,"span",26),a.ALo(1,"translate"),a._UZ(2,"i"),a.qZA()),2&x){const g=R.$implicit,T=a.oxw();a.Udp("display",T.preference.LightMode!=g.name?"none":""),a.s9C("title",a.lcZ(1,6,"MENU."+g.desc)),a.xp6(2),a.Gre("fa ",g.ico,"")}}function ge(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"li",27),a.NdJ("click",function(){const oe=a.CHM(g).$implicit;return a.oxw().setLanguage(oe.code)})("tap",function(){const oe=a.CHM(g).$implicit;return a.oxw().setLanguage(oe.code)}),a.ALo(1,"translate"),a._uU(2),a.ALo(3,"translate"),a.TgZ(4,"span",28),a._UZ(5,"i"),a.qZA(),a.qZA()}if(2&x){const g=R.$implicit,T=a.oxw();a.ekj("active",T.preference.Language==g.code),a.s9C("title",a.lcZ(1,7,"LANGUAGES."+g.name)),a.xp6(2),a.hij("",a.lcZ(3,9,"LANGUAGES."+g.name)," "),a.xp6(3),a.Gre("flag ",g.ico,"")}}function Fe(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"li",27),a.NdJ("click",function(){const oe=a.CHM(g).$implicit;return a.oxw().setLightMode(oe.name)})("tap",function(){const oe=a.CHM(g).$implicit;return a.oxw().setLightMode(oe.name)}),a.ALo(1,"translate"),a._uU(2),a.ALo(3,"translate"),a.TgZ(4,"span",29),a._UZ(5,"i"),a.qZA(),a.qZA()}if(2&x){const g=R.$implicit,T=a.oxw();a.ekj("active",T.preference.LightMode==g.name),a.s9C("title",a.lcZ(1,7,"MENU."+g.desc)),a.xp6(2),a.hij(" ",a.lcZ(3,9,"MENU."+g.code)," "),a.xp6(3),a.Gre("fa ",g.ico,"")}}function dt(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"li",27),a.NdJ("click",function(){const oe=a.CHM(g).$implicit;return a.oxw().setBackdropMode(oe.name)})("tap",function(){const oe=a.CHM(g).$implicit;return a.oxw().setBackdropMode(oe.name)}),a.ALo(1,"translate"),a._uU(2),a.ALo(3,"translate"),a.TgZ(4,"span",29),a._UZ(5,"i"),a.qZA(),a.qZA()}if(2&x){const g=R.$implicit,T=a.oxw();a.ekj("active",T.preference.BackdropMode==g.name),a.s9C("title",a.lcZ(1,7,"MENU."+g.desc)),a.xp6(2),a.hij(" ",a.lcZ(3,9,"MENU."+g.code)," "),a.xp6(3),a.Gre("fa ",g.ico,"")}}function Bt(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"button",30),a.NdJ("click",function(){return a.CHM(g),a.oxw().toggleBackdropMode()}),a._uU(1,"BackdropMode!"),a.qZA()}}let Un=(()=>{class x{constructor(g,T){this.preferenceService=g,this.util=T,this.IsDrawn=!1,this.IsFullScreen=!1,this.backdropModes=us.E2,this.languages=us.a2,this.lightModes=us.DZ}ngOnInit(){this.preference=this.preferenceService.getPreference()}toggleDrawer(){!0===this.IsDrawn?this.drawerPull():this.drawerPush()}toggleFullscreenMode(){const g=window.document,T=g.documentElement;var W=T.requestFullscreen;g.fullscreenElement?(g.exitFullscreen.call(g).then().catch(it=>console.log(it)),this.IsFullScreen=!1):(W.call(T).then().catch(it=>console.log(it)),this.IsFullScreen=!0)}drawerPull(){this.IsDrawn=!0}drawerPush(){this.IsDrawn=!1}setLightMode(g){this.preferenceService.setLightMode(g)}toggleLightMode(){this.preferenceService.toggleLightMode()}setLanguage(g){this.preferenceService.setLanguage(g)}toggleLanguages(){this.preferenceService.toggleLanguages()}setBackdropMode(g){this.preferenceService.setBackdropMode(g)}toggleBackdropMode(){this.preferenceService.toggleBackdropMode()}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(_i.y),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-preference-menu"]],decls:41,vars:23,consts:[[1,"menu-drawer","top",3,"panRight"],[1,"drawer-backdrop","show-drawn",3,"click","tap"],[1,"text-center","text-white","text-always-white","drawer-header"],[1,"drawer-header-inner"],["class","toggle-fullscreen hide-drawn",3,"active","click","tap",4,"ngIf"],[1,"d-none","d-sm-block","drawer-opener","hide-drawn",3,"click","tap"],[1,"d-flex","justify-content-around","drawer-toggle-inner","hide-drawn"],["class","hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["class","text-glow hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["title","Preference",1,"hide-drawn"],[1,"fa","fa-bars"],["title","close menu",1,"show-drawn","drawer-closer",3,"click","tap"],[1,"fa","fa-close"],[1,"d-sm-none","drawer-handle","text-glow",3,"panLeft"],[1,"fa","fa-chevron-left"],[1,"menu","py-2","list-block","text-white","text-always-white"],[1,"menu-item","list-item","my-1","py-2"],[1,"list-inline","py-2"],[3,"title","active","click","tap",4,"ngFor","ngForOf"],["title","Toggle Fullscreen",1,"text-center",3,"click","tap"],[1,"text-glow","mx-2",2,"height","30px","font-size","2em"],[1,"fa"],["style","width:150px;height:30px;background-color:orange;position:fixed;top:100px;left:100px;",3,"click",4,"ngIf"],[1,"toggle-fullscreen","hide-drawn",3,"click","tap"],[1,"fa","fa-compress"],[1,"hide-drawn",3,"title"],[1,"text-glow","hide-drawn",3,"title"],[3,"title","click","tap"],[1,"float-right","mx-2"],[1,"float-right","text-glow","mx-2"],[2,"width","150px","height","30px","background-color","orange","position","fixed","top","100px","left","100px",3,"click"]],template:function(g,T){1&g&&(a.TgZ(0,"aside",0),a.NdJ("panRight",function(){return T.drawerPush()}),a.TgZ(1,"div",1),a.NdJ("click",function(){return T.drawerPush()})("tap",function(){return T.drawerPush()}),a.qZA(),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.YNc(4,Tr,2,2,"span",4),a.TgZ(5,"div",5),a.NdJ("click",function(){return T.drawerPull()})("tap",function(){return T.drawerPull()}),a.TgZ(6,"div",6),a.YNc(7,j,3,8,"span",7),a.YNc(8,ne,3,8,"span",8),a.TgZ(9,"span",9),a._UZ(10,"i",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"span",11),a.NdJ("click",function(){return T.drawerPush()})("tap",function(){return T.drawerPush()}),a._UZ(12,"i",12),a.qZA(),a.TgZ(13,"div",13),a.NdJ("panLeft",function(){return T.drawerPull()}),a._UZ(14,"i",14),a.qZA(),a.qZA(),a.TgZ(15,"h3"),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.qZA(),a.TgZ(18,"ul",15),a.TgZ(19,"li",16),a._uU(20),a.ALo(21,"translate"),a.TgZ(22,"ul",17),a.YNc(23,ge,6,11,"li",18),a.qZA(),a.qZA(),a.TgZ(24,"li",16),a._uU(25),a.ALo(26,"translate"),a.TgZ(27,"ul",17),a.YNc(28,Fe,6,11,"li",18),a.qZA(),a.qZA(),a.TgZ(29,"li",16),a._uU(30),a.ALo(31,"translate"),a.TgZ(32,"ul",17),a.YNc(33,dt,6,11,"li",18),a.qZA(),a.qZA(),a.TgZ(34,"li",16),a._uU(35," Toggle Fullscreen "),a.TgZ(36,"ul",17),a.TgZ(37,"li",19),a.NdJ("click",function(){return T.toggleFullscreenMode()})("tap",function(oe){return T.clickTarget(oe)}),a.TgZ(38,"span",20),a._UZ(39,"i",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(40,Bt,2,0,"button",22),a.qZA()),2&g&&(a.uIk("drawn",T.IsDrawn)("light-mode",T.preference.LightMode),a.xp6(4),a.Q6J("ngIf",T.IsFullScreen),a.xp6(3),a.Q6J("ngForOf",T.languages),a.xp6(1),a.Q6J("ngForOf",T.lightModes),a.xp6(8),a.Oqu(a.lcZ(17,15,"MENU.PREFERENCE")),a.xp6(4),a.hij(" ",a.lcZ(21,17,"MENU.LANGUAGE")," "),a.xp6(3),a.Q6J("ngForOf",T.languages),a.xp6(2),a.hij(" ",a.lcZ(26,19,"MENU.LIGHTINGMODE")," "),a.xp6(3),a.Q6J("ngForOf",T.lightModes),a.xp6(2),a.hij(" ",a.lcZ(31,21,"MENU.BACKDROPMODE")," "),a.xp6(3),a.Q6J("ngForOf",T.backdropModes),a.xp6(6),a.Tol(T.IsFullScreen?"fa-compress":"fa-expand"),a.xp6(1),a.Q6J("ngIf",!1))},directives:[S.O5,S.sg],pipes:[Xt.X$],styles:['.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:4px 4px 4px 10px;transition:all .2s ease}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#448}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#3f355f8e}.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:before{content:" ";display:inline-block;width:4px;height:4px}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#1a1a1a}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#272770}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:hover{background-color:#3a335a}.menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{content:" ";display:inline-block;width:10px;height:10px;background-color:#afc8fff2;border-radius:50%;margin-right:10px;box-shadow:1px 1px 2px #777}.menu[_ngcontent-%COMP%]{list-style-type:none;padding-left:10px}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:not(:first){border-top:1px dashed #77777780}.menu-drawer[_ngcontent-%COMP%]{width:320px;height:100vh;padding:8px;margin-right:-320px;transition:margin .2s ease}[light-mode=dark].menu-drawer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].menu-drawer[_ngcontent-%COMP%]{background-color:#203070}[drawn=true].menu-drawer[_ngcontent-%COMP%]{margin-right:0}.drawer-handle[_ngcontent-%COMP%]{position:absolute;left:-25px;top:75px;width:15px;border-top-left-radius:4px;border-bottom-left-radius:4px}[light-mode=dark][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#202020}[light-mode=bright][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#203070}.drawer-opener[_ngcontent-%COMP%]{position:absolute;left:-150px;width:125px;transition:background-color .2s ease;cursor:pointer}[drawn=true][_ngcontent-%COMP%]   .drawer-closer[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:10px;width:40px;height:40px;line-height:40px;background-color:#80808066}[drawn=true][_ngcontent-%COMP%]   .hide-drawn[_ngcontent-%COMP%], .show-drawn[_ngcontent-%COMP%]{display:none}[drawn=true][_ngcontent-%COMP%]   .show-drawn[_ngcontent-%COMP%]{display:initial}[light-mode=dark][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f2f2f}[light-mode=bright][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f3f7f}.drawer-toggle-inner[_ngcontent-%COMP%]{width:100%}.drawer-header[_ngcontent-%COMP%]{line-height:50px;padding:5px;border:1px dashed #777777;z-index:100}.drawer-header-inner[_ngcontent-%COMP%]{position:relative}[drawn=true][_ngcontent-%COMP%]   .drawer-backdrop[_ngcontent-%COMP%]{background-color:#0000004d;position:fixed;top:0px;left:0px;width:100%;height:100vh;z-index:-1}.toggle-fullscreen[_ngcontent-%COMP%]{position:absolute;right:450px;padding:0 15px;cursor:pointer}.toggle-fullscreen.active[_ngcontent-%COMP%]{animation:highlight 1s ease;animation-iteration-count:5}.toggle-fullscreen[_ngcontent-%COMP%]:hover{background-color:#99772231}@keyframes highlight{0%{background-color:#99772231}50%{background-color:#bb9a22a6}to{background-color:#99772231}}']}),x})();function Ai(x,R){if(1&x&&a._UZ(0,"app-main-nav",9),2&x){const g=a.oxw();a.Tol(g.preference.LightMode+"-mode"),a.Q6J("mode","top")}}let gi=(()=>{class x{constructor(g,T){this.preferenceService=g,this.util=T,this.title="Victor Fortman",this.fullCard=!0,this.doorsClosed=!0,this.foreground=document.querySelector("#foreground"),this.toggleCard=function(){this.fullCard=!this.fullCard},this.toggleForeground=function(W){this.doorsClosed=!this.doorsClosed,this.foreground.className=this.doorsClosed||W?"door-opened":"door-closed"},this.init=function(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(W=>{this.preference=W})}}ngOnInit(){this.init()}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(_i.y),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-root"]],decls:12,vars:4,consts:[["id","wrapper",1,"pt-5"],["role","header","aria-roledescription","header"],[1,"header-content"],["role","icon",1,"d-sm-inline-block"],["src","../assets/ico/VF_ICO128.ico","alt","Victor Fortman"],[1,"top-nav"],[3,"class","mode",4,"ngIf"],["role","preference-menu"],["role","body"],[3,"mode"]],template:function(g,T){1&g&&(a.TgZ(0,"div"),a.TgZ(1,"div",0),a.TgZ(2,"header",1),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a._UZ(5,"img",4),a.qZA(),a.TgZ(6,"nav",5),a.YNc(7,Ai,1,3,"app-main-nav",6),a.qZA(),a.qZA(),a.TgZ(8,"div",7),a._UZ(9,"app-preference-menu"),a.qZA(),a.qZA(),a.TgZ(10,"div",8),a._UZ(11,"router-outlet"),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.xp6(1),a.uIk("backdrop-mode",T.preference.BackdropMode)("menu-mode",T.preference.MenuMode),a.xp6(1),a.uIk("light-mode",T.preference.LightMode),a.xp6(5),a.Q6J("ngIf",!0))},directives:[S.O5,Ms,Un,ki.lC],styles:["[role=header][_ngcontent-%COMP%]{position:fixed;top:0px;left:0px;height:75px;width:100%;padding:8px;z-index:900;transition:all 1s ease}[role=header][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=header][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}[role=header][_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{border:1px dashed #777777;height:60px}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]{height:58px;width:58px;text-align:center;line-height:58px;vertical-align:middle}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block}.top-nav[_ngcontent-%COMP%]{max-width:320px;display:inline-block}[role=preference-menu][_ngcontent-%COMP%]{position:fixed;right:0px;top:0px}[menu-mode=retracted][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%], [backdrop-mode=interactive][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%]{margin-top:-80px}[backdrop-mode=interactive][_ngcontent-%COMP%]   [role=body][_ngcontent-%COMP%]{display:none}"]}),x})();Q(8929);var Mo=Q(1086),jo=Q(6686),Ya=Q(2268);new class Ja extends Ya.v{flush(R){this.active=!0,this.scheduled=void 0;const{actions:g}=this;let T,W=-1,oe=g.length;R=R||g.shift();do{if(T=R.execute(R.state,R.delay))break}while(++W<oe&&(R=g.shift()));if(this.active=!1,T){for(;++W<oe&&(R=g.shift());)R.unsubscribe();throw T}}}(class $a extends jo.o{constructor(R,g){super(R,g),this.scheduler=R,this.work=g}requestAsyncId(R,g,T=0){return null!==T&&T>0?super.requestAsyncId(R,g,T):(R.actions.push(this),R.scheduled||(R.scheduled=requestAnimationFrame(()=>R.flush(null))))}recycleAsyncId(R,g,T=0){if(null!==T&&T>0||null===T&&this.delay>0)return super.recycleAsyncId(R,g,T);0===R.actions.length&&(cancelAnimationFrame(g),R.scheduled=void 0)}});let Ca=1;const qo=Promise.resolve(),Xa={};function sa(x){return x in Xa&&(delete Xa[x],!0)}const Hs={setImmediate(x){const R=Ca++;return Xa[R]=!0,qo.then(()=>sa(R)&&x()),R},clearImmediate(x){sa(x)}};new class Xs extends Ya.v{flush(R){this.active=!0,this.scheduled=void 0;const{actions:g}=this;let T,W=-1,oe=g.length;R=R||g.shift();do{if(T=R.execute(R.state,R.delay))break}while(++W<oe&&(R=g.shift()));if(this.active=!1,T){for(;++W<oe&&(R=g.shift());)R.unsubscribe();throw T}}}(class Gr extends jo.o{constructor(R,g){super(R,g),this.scheduler=R,this.work=g}requestAsyncId(R,g,T=0){return null!==T&&T>0?super.requestAsyncId(R,g,T):(R.actions.push(this),R.scheduled||(R.scheduled=Hs.setImmediate(R.flush.bind(R,null))))}recycleAsyncId(R,g,T=0){if(null!==T&&T>0||null===T&&this.delay>0)return super.recycleAsyncId(R,g,T);0===R.actions.length&&(Hs.clearImmediate(g),R.scheduled=void 0)}});let Tt;Q(2654),new Ya.v(jo.o),Q(826),Q(9054),Q(2866),Q(2198),Q(1059);try{Tt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(x){Tt=!1}let Vi=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({}),x})(),$o=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({}),x})(),re=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({}),x})(),Ws=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({imports:[[$o,Vi,re],$o,re]}),x})();Q(6053),Q(1221),Q(2986),Q(3489);let Da=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({}),x})();Q(5254),Q(591);var ps=Q(2994);Q(1709);let No=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({imports:[[Ws]]}),x})(),tl=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({imports:[[S.ez,Ws,Da,$o,No],No]}),x})(),yi=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-home"]],inputs:{LightMode:"LightMode"},decls:8,vars:7,consts:[[1,"container-fluid","d-flex","justify-content-center","text-center","introduction"],[1,"text-white","text-always-white","introduction-text","text-on-glass"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h1"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"h2"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(3),a.Oqu(a.lcZ(4,3,"GREETINGS.HI")),a.xp6(3),a.Oqu(a.lcZ(7,5,"INTRO.WHOAMI")))},pipes:[Xt.X$],styles:[".introduction[_ngcontent-%COMP%]{padding-top:75px;height:calc(100vh - 125px)}.introduction-text[_ngcontent-%COMP%]{margin-top:calc(25vh - 50px)}.introduction-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:calc(1vw + 60px);font-weight:700}.introduction-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:calc(1vw + 36px);font-weight:600}"]}),x})();const qs=[{linkID:1,mediaName:"LinkedIn",mediaURI:"https://linkedin.com",profileName:"Victor Fortman",profileURI:"https://linkedin.com/in/hugovicfortman",fontAwesomeIcon:"fa-linkedin-square"},{linkID:2,mediaName:"Github",mediaURI:"https://github.com",profileName:"Victor Fortman",profileURI:"https://github.com/hugovicfortman",fontAwesomeIcon:"fa-github-square"},{linkID:3,mediaName:"Stack Overflow",mediaURI:"https://stackoverflow.com",profileName:"Victor Fortman",profileURI:"https://stackoverflow.com/story/hugovicfortman",fontAwesomeIcon:"fa-stack-overflow"}];let ko=(()=>{class x{constructor(){}getAllLinks(){return qs}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function A(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"span",2),a.TgZ(1,"a",3),a.NdJ("tap",function(W){return a.CHM(g),a.oxw().clickTarget(W)}),a._UZ(2,"i"),a.qZA(),a.qZA()}if(2&x){const g=R.$implicit;a.xp6(1),a.s9C("href",g.profileURI,a.LSH),a.s9C("title",g.mediaName),a.xp6(1),a.Gre("fa ",g.fontAwesomeIcon,"")}}let b=(()=>{class x{constructor(g,T){this.socialLinksService=g,this.util=T}ngOnInit(){this.getAllSocialLinks()}getAllSocialLinks(){this.socialLinks=this.socialLinksService.getAllLinks()}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(ko),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-social-links"]],decls:2,vars:1,consts:[[1,"social-bridge"],["class","social-links",4,"ngFor","ngForOf"],[1,"social-links"],["rel","noreferrer noopener","target","_blank",3,"href","title","tap"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.YNc(1,A,3,5,"span",1),a.qZA()),2&g&&(a.xp6(1),a.Q6J("ngForOf",T.socialLinks))},directives:[S.sg],styles:[".social-bridge[_ngcontent-%COMP%]{width:100%;margin:0 -15px;height:3em;line-height:3em}.social-links[_ngcontent-%COMP%]{display:inline-block;margin:15px;font-size:1.5em;animation:float 11s ease infinite}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border-radius:4px;padding:0 2.5px;cursor:pointer;color:#bbb;transition:color .3s ease font-size .3 ease}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#777;font-weight:700}"]}),x})(),y=(()=>{class x{constructor(g,T){this.elementScrollService=g,this.util=T}ngOnInit(){}scrollTo(g){this.elementScrollService.scrollTo(g)}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Zi),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-about"]],inputs:{LightMode:"LightMode"},decls:50,vars:31,consts:[[1,"container-fluid","text-white","pt-2","px-2","paper-section-wrap-outer","paper-top"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"col-lg-4","text-justify"],[1,"mb-2","d-flex","align-items-center","justify-content-center",2,"height","200px"],[1,"profile-image"],[1,"profile-image-inner"],[1,"small"],[1,"fa","fa-globe"],[1,"col-lg-7","text-justify","pt-5"],[1,"text-center","pt-4"],["type","button","routerLink","/resume",1,"btn","btn-default","mx-2",3,"click","tap"],["type","button","routerLink","/contact",1,"btn","btn-primary","mx-2",3,"click","tap"],[1,"col-lg-1","text-center","lh-200"],[1,"text-center"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"blockquote"),a._uU(8),a.ALo(9,"translate"),a._UZ(10,"br"),a.TgZ(11,"small"),a._uU(12),a.ALo(13,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",2),a.TgZ(15,"div",4),a.TgZ(16,"div",5),a.TgZ(17,"div",2),a.TgZ(18,"div",6),a.TgZ(19,"div",7),a.TgZ(20,"div",8),a._UZ(21,"div",9),a.qZA(),a.qZA(),a.TgZ(22,"dl"),a.TgZ(23,"dt",10),a._uU(24),a.ALo(25,"translate"),a.qZA(),a.TgZ(26,"dd"),a._uU(27),a.ALo(28,"translate"),a.qZA(),a.TgZ(29,"dt",10),a._uU(30),a.ALo(31,"translate"),a.qZA(),a.TgZ(32,"dd"),a._uU(33),a.ALo(34,"translate"),a._UZ(35,"i",11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"div",12),a.TgZ(37,"p"),a._uU(38),a.ALo(39,"translate"),a.qZA(),a.TgZ(40,"div",13),a.TgZ(41,"button",14),a.NdJ("click",function(){return T.scrollTo("resume")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(42),a.ALo(43,"translate"),a.qZA(),a.TgZ(44,"button",15),a.NdJ("click",function(){return T.scrollTo("contact")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(45),a.ALo(46,"translate"),a.qZA(),a.qZA(),a.qZA(),a._UZ(47,"div",16),a.qZA(),a.TgZ(48,"div",17),a._UZ(49,"app-social-links"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(5),a.Oqu(a.lcZ(6,11,"PAGES.PROFILE.HEADER")),a.xp6(3),a.hij(' "',a.lcZ(9,13,"PAGES.PROFILE.QUOTE.TEXT"),'" '),a.xp6(4),a.hij("- ",a.lcZ(13,15,"PAGES.PROFILE.QUOTE.AUTHOR"),""),a.xp6(12),a.hij("",a.lcZ(25,17,"PAGES.PROFILE.SPECS.CONTENT.NAMEKEY"),":"),a.xp6(3),a.Oqu(a.lcZ(28,19,"PAGES.PROFILE.SPECS.CONTENT.NAMEVALUE")),a.xp6(3),a.hij("",a.lcZ(31,21,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONKEY"),":"),a.xp6(3),a.hij("",a.lcZ(34,23,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONVALUE")," "),a.xp6(5),a.Oqu(a.lcZ(39,25,"PAGES.PROFILE.ABOUT.CONTENT")),a.xp6(4),a.Oqu(a.lcZ(43,27,"PAGES.PROFILE.ACTIONS.VIEWRESUME")),a.xp6(3),a.Oqu(a.lcZ(46,29,"PAGES.PROFILE.ACTIONS.CONTACTME")))},directives:[ki.rH,b],pipes:[Xt.X$],styles:[".lh-200[_ngcontent-%COMP%]{line-height:200px}.profile-image[_ngcontent-%COMP%]{padding:10px;background-color:#7d7d7d80;width:180px;height:180px;overflow:hidden;border-radius:50%;display:inline-block;vertical-align:middle}.profile-image-inner[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:50%;background-image:url(red_hoodie.c377c6db48866e10.svg);background-size:contain}[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#ddd}"]}),x})();function F(x,R){if(1&x&&(a.TgZ(0,"a",17),a.ALo(1,"translate"),a._uU(2),a.ALo(3,"translate"),a.qZA()),2&x){const g=a.oxw().$implicit;a.s9C("href",a.lcZ(1,2,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".LIVE"),a.LSH),a.xp6(2),a.Oqu(a.lcZ(3,4,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWLIVE"))}}function z(x,R){if(1&x&&(a.TgZ(0,"div",10),a._UZ(1,"img",11),a.ALo(2,"translate"),a.TgZ(3,"div",12),a.TgZ(4,"aside"),a.TgZ(5,"h3"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"div",13),a.TgZ(9,"article"),a.TgZ(10,"h3"),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"p"),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.TgZ(16,"div",14),a.YNc(17,F,4,6,"a",15),a.ALo(18,"translate"),a.TgZ(19,"a",16),a.ALo(20,"translate"),a._uU(21),a.ALo(22,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&x){const g=R.$implicit;a.xp6(1),a.s9C("src",a.lcZ(2,7,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".IMAGE"),a.LSH),a.xp6(5),a.Oqu(a.lcZ(7,9,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".TITLE")),a.xp6(5),a.Oqu(a.lcZ(12,11,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".TITLE")),a.xp6(3),a.hij(" ",a.lcZ(15,13,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".DESCRIPTION")," "),a.xp6(3),a.Q6J("ngIf",1==a.lcZ(18,15,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".ISLIVE")),a.xp6(2),a.s9C("href",a.lcZ(20,17,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".SOURCE"),a.LSH),a.xp6(2),a.Oqu(a.lcZ(22,19,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWSOURCE"))}}function J(x,R){if(1&x&&(a.TgZ(0,"div",2),a.TgZ(1,"div",18),a.TgZ(2,"h3"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"div",2),a.TgZ(6,"div",19),a.TgZ(7,"p"),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"div",20),a._UZ(11,"img",21),a.ALo(12,"translate"),a._UZ(13,"br"),a.TgZ(14,"p",22),a.TgZ(15,"a",23),a.ALo(16,"translate"),a._uU(17,"Google Developer Profile"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&x){const g=R.$implicit;a.xp6(3),a.Oqu(a.lcZ(4,4,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".TITLE")),a.xp6(5),a.Oqu(a.lcZ(9,6,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".DESCRIPTION")),a.xp6(3),a.s9C("src",a.lcZ(12,8,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".IMAGE"),a.LSH),a.xp6(4),a.s9C("href",a.lcZ(16,10,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".GDP"),a.LSH)}}const de=function(){return[0,1,2,3]},we=function(){return[0]};let Ve=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-featured-projects"]],inputs:{LightMode:"LightMode"},decls:21,vars:14,consts:[[1,"container-fluid","text-always-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"text-on-glass"],[1,"foldable"],[1,"col-lg-12","py-3","d-flex","project-card-holder"],["class","mb-2 project-card",4,"ngFor","ngForOf"],[1,"text-center","mt-2"],["class","row",4,"ngFor","ngForOf"],[1,"mb-2","project-card"],[1,"img","project-img",3,"src"],[1,"project-nametag"],[1,"project-description"],[1,"text-center","mt-1","px-3"],["target","_blank","referrerpolicy","no-referrer","class","btn btn-default btn-block",3,"href",4,"ngIf"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-primary","btn-block",3,"href"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-default","btn-block",3,"href"],[1,"col-md-6","text-center","my-4"],[1,"col-md-8","offset-md-2","d-flex","align-items-center"],[1,"col-md-6","text-center","my-5","py-5"],["height","128","width","128",3,"src"],[1,"mt-3"],[3,"href"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2",4),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",5),a.TgZ(8,"div",2),a.TgZ(9,"div",6),a.YNc(10,z,23,21,"div",7),a.qZA(),a.qZA(),a.TgZ(11,"div",8),a.TgZ(12,"small",4),a._uU(13),a.ALo(14,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",2),a.TgZ(16,"div",3),a.TgZ(17,"h2",4),a._uU(18),a.ALo(19,"translate"),a.qZA(),a.qZA(),a.qZA(),a.YNc(20,J,18,12,"div",9),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(5),a.Oqu(a.lcZ(6,6,"PAGES.FEATUREDPROJECTS.HEADER")),a.xp6(5),a.Q6J("ngForOf",a.DdM(12,de)),a.xp6(3),a.Oqu(a.lcZ(14,8,"PAGES.FEATUREDPROJECTS.CONTENT.THISWEBSITE")),a.xp6(5),a.Oqu(a.lcZ(19,10,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING")),a.xp6(2),a.Q6J("ngForOf",a.DdM(13,we)))},directives:[S.sg,S.O5],pipes:[Xt.X$],styles:['[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%], [light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#14141433}.paper-section-wrap-outer[_ngcontent-%COMP%]:before{content:" ";display:block;height:500%;position:absolute;left:0px;right:0px;z-index:-1;background-image:url(hdSky.e179e771ecc3628e.webp);background-attachment:fixed}.project-card-holder[_ngcontent-%COMP%]{justify-content:space-around;flex-wrap:wrap}.project-card[_ngcontent-%COMP%]{background-color:#2d3d77;height:235px;width:235px;box-shadow:2px 2px 4px #222;margin:auto;position:relative}.project-card[_ngcontent-%COMP%]:hover{box-shadow:4px 1px 16px #000}.project-card[_ngcontent-%COMP%]:not(:hover)   .project-description[_ngcontent-%COMP%], .project-card[_ngcontent-%COMP%]:hover   .project-nametag[_ngcontent-%COMP%]{opacity:0}.project-img[_ngcontent-%COMP%]{height:235px;width:235px}.project-description[_ngcontent-%COMP%], .project-nametag[_ngcontent-%COMP%]{position:absolute;top:0%;height:100%;width:100%;transition:opacity .3s ease}.project-nametag[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{height:100%;width:100%;padding:15px;display:flex;justify-content:center;align-items:center;background:radial-gradient(circle,rgba(0,0,0,0) 0%,rgba(0,0,0,.75) 100%)}.project-description[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#141414e6;padding:15px}']}),x})();var qt=Q(946),En=Q(7221);let rn=(()=>{class x{constructor(g,T){this.http=T,this.contactsUrl=`${g.config.url.api}contacts/?btoken=${g.config.btoken}`}saveContact(g){return this.http.post(this.contactsUrl,{firstname:g.firstname,lastname:g.lastname,company:g.company,email:g.email,contacttype:g.contacttype,message:g.message}).pipe((0,ps.b)(T=>console.log("Contact saved")),(0,En.K)(this.handleError("saveContact",g)))}handleError(g="operation",T){return W=>(console.error(W),console.log(`${g} failed: ${W.message}`),(0,Mo.of)(T))}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(qt.E),a.LFG(At.eN))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function bn(x,R){1&x&&a._UZ(0,"div",31)}function Ei(x,R){1&x&&(a.TgZ(0,"div",32),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&x&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"PAGES.CONTACT.ERROR")," "))}function ui(x,R){1&x&&(a.TgZ(0,"div",33),a.TgZ(1,"span"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()),2&x&&(a.xp6(2),a.Oqu(a.lcZ(3,1,"PAGES.CONTACT.CONTENT.VALIDEMAILREQUIRED")))}function Ns(x,R){if(1&x&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&x){const g=a.oxw(3);a.xp6(1),a.hij("",g.model.message.length,"/")}}function Uo(x,R){if(1&x&&(a.TgZ(0,"span",34),a._uU(1," ("),a.YNc(2,Ns,2,1,"span",35),a._uU(3,"4000)"),a.qZA()),2&x){const g=a.oxw(2);a.ekj("text-warning",g.model.message.length>3500),a.xp6(2),a.Q6J("ngIf",g.model.message.length<4e3)}}function Bo(x,R){1&x&&(a.TgZ(0,"div",36),a.TgZ(1,"span",37),a._UZ(2,"i",38),a.qZA(),a._UZ(3,"p",39),a.ALo(4,"translate"),a.qZA()),2&x&&(a.xp6(3),a.Q6J("innerHTML",a.lcZ(4,1,"PAGES.CONTACT.CANADAPITCH"),a.oJD))}function nl(x,R){if(1&x){const g=a.EpF();a.TgZ(0,"div",4),a.YNc(1,bn,1,0,"div",5),a.TgZ(2,"h3"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.YNc(5,Ei,3,3,"div",6),a.TgZ(6,"div",7),a.TgZ(7,"label",8),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"input",9,10),a.NdJ("ngModelChange",function(W){return a.CHM(g),a.oxw().model.firstname=W})("click",function(W){return a.CHM(g),a.oxw().focus(W.target)})("tap",function(W){return a.CHM(g),a.oxw().focus(W.target)}),a.qZA(),a.TgZ(12,"div",11),a.TgZ(13,"span"),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",7),a.TgZ(17,"label",12),a._uU(18),a.ALo(19,"translate"),a.qZA(),a.TgZ(20,"input",13,14),a.NdJ("ngModelChange",function(W){return a.CHM(g),a.oxw().model.lastname=W})("click",function(W){return a.CHM(g),a.oxw().focus(W.target)})("tap",function(W){return a.CHM(g),a.oxw().focus(W.target)}),a.qZA(),a.qZA(),a.TgZ(22,"div",7),a.TgZ(23,"label",15),a._uU(24),a.ALo(25,"translate"),a.qZA(),a.TgZ(26,"input",16,17),a.NdJ("ngModelChange",function(W){return a.CHM(g),a.oxw().model.company=W})("click",function(W){return a.CHM(g),a.oxw().focus(W.target)})("tap",function(W){return a.CHM(g),a.oxw().focus(W.target)}),a.qZA(),a.qZA(),a.TgZ(28,"div",7),a.TgZ(29,"label",18),a._uU(30),a.ALo(31,"translate"),a.qZA(),a.TgZ(32,"input",19,20),a.NdJ("ngModelChange",function(W){return a.CHM(g),a.oxw().model.email=W})("click",function(W){return a.CHM(g),a.oxw().focus(W.target)})("tap",function(W){return a.CHM(g),a.oxw().focus(W.target)}),a.qZA(),a.TgZ(34,"div",11),a.TgZ(35,"span"),a._uU(36),a.ALo(37,"translate"),a.qZA(),a.qZA(),a.YNc(38,ui,4,3,"div",21),a.TgZ(39,"div",22),a.TgZ(40,"p",23),a._uU(41),a.ALo(42,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(43,"div",7),a.TgZ(44,"label",24),a._uU(45),a.ALo(46,"translate"),a.TgZ(47,"small"),a._uU(48,"(Optional)"),a.qZA(),a.YNc(49,Uo,4,3,"span",25),a.qZA(),a.TgZ(50,"textarea",26,27),a.NdJ("ngModelChange",function(W){return a.CHM(g),a.oxw().model.message=W})("click",function(W){return a.CHM(g),a.oxw().focus(W.target)})("tap",function(W){return a.CHM(g),a.oxw().focus(W.target)}),a.qZA(),a.qZA(),a.TgZ(52,"div",7),a.TgZ(53,"button",28),a._uU(54),a.ALo(55,"translate"),a._UZ(56,"span",29),a.qZA(),a.qZA(),a.YNc(57,Bo,5,3,"div",30),a.qZA()}if(2&x){const g=a.MAs(11),T=a.MAs(33),W=a.oxw(),oe=a.MAs(1);a.xp6(1),a.Q6J("ngIf",W.State===W.States.busy),a.xp6(2),a.Oqu(a.lcZ(4,23,"PAGES.CONTACT.REACHOUT")),a.xp6(2),a.Q6J("ngIf",W.State===W.States.error),a.xp6(3),a.hij("",a.lcZ(9,25,"PAGES.CONTACT.CONTENT.FIRSTNAME"),"*"),a.xp6(2),a.Q6J("ngModel",W.model.firstname),a.xp6(2),a.Q6J("hidden",g.valid||g.pristine),a.xp6(2),a.Oqu(a.lcZ(15,27,"PAGES.CONTACT.CONTENT.FIRSTNAMEREQUIRED")),a.xp6(4),a.Oqu(a.lcZ(19,29,"PAGES.CONTACT.CONTENT.LASTNAME")),a.xp6(2),a.Q6J("ngModel",W.model.lastname),a.xp6(4),a.Oqu(a.lcZ(25,31,"PAGES.CONTACT.CONTENT.COMPANYNAME")),a.xp6(2),a.Q6J("ngModel",W.model.company),a.xp6(4),a.hij("",a.lcZ(31,33,"PAGES.CONTACT.CONTENT.EMAIL"),"*"),a.xp6(2),a.Q6J("ngModel",W.model.email),a.xp6(2),a.Q6J("hidden",""!=T.value||T.pristine),a.xp6(2),a.Oqu(a.lcZ(37,35,"PAGES.CONTACT.CONTENT.EMAILREQUIRED")),a.xp6(2),a.Q6J("ngIf",!T.valid&&!T.pristine),a.xp6(3),a.hij(" ",a.lcZ(42,37,"PAGES.CONTACT.EMAILCAVEAT")," "),a.xp6(4),a.hij("",a.lcZ(46,39,"PAGES.CONTACT.CONTENT.MESSAGE")," "),a.xp6(4),a.Q6J("ngIf",W.model.message.length>3e3),a.xp6(1),a.Q6J("ngModel",W.model.message),a.xp6(3),a.Q6J("disabled",!oe.form.valid),a.xp6(1),a.hij("",a.lcZ(55,41,"PAGES.CONTACT.SEND")," "),a.xp6(3),a.Q6J("ngIf",!1)}}function is(x,R){1&x&&(a.TgZ(0,"div",40),a.TgZ(1,"h2",41),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",37),a.TgZ(5,"span",42),a._UZ(6,"i",29),a.qZA(),a.qZA(),a.TgZ(7,"div",34),a.TgZ(8,"p"),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA()),2&x&&(a.xp6(2),a.hij("",a.lcZ(3,2,"PAGES.CONTACT.DONE")," !!!"),a.xp6(7),a.Oqu(a.lcZ(10,4,"PAGES.CONTACT.CONTENT.MESSAGESENT")))}var Ss=(()=>{return(x=Ss||(Ss={}))[x.error=-1]="error",x[x.new=0]="new",x[x.busy=1]="busy",x[x.submitted=2]="submitted",Ss;var x})();let il=(()=>{class x{constructor(g){this.contactService=g,this.States=Ss}ngOnInit(){this.State=Ss.new,this.model={id:0,firstname:"",lastname:"",company:"",email:"",contacttype:"7dd8927b3f",message:""}}onSubmit(){this.State=Ss.busy,this.contactService.saveContact(this.model).subscribe(g=>{this.State=0!==g.id?Ss.submitted:Ss.error})}focus(g){g.focus()}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(rn))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-contact-form"]],decls:4,vars:2,consts:[[3,"ngSubmit"],["contactForm","ngForm"],["class","form p-3 form-dark","role","form","aria-roledescription","Contact Form",4,"ngIf"],["class","p-3 form-dark text-center",4,"ngIf"],["role","form","aria-roledescription","Contact Form",1,"form","p-3","form-dark"],["class","busy-strip",4,"ngIf"],["class","alert alert-amber",4,"ngIf"],[1,"form-group","py-2"],["for","firstname",1,"m-0"],["name","firstname","id","firstname","type","text","role","textbox","required","","aria-required","true",1,"form-control","w-100","py-1","px-2",3,"ngModel","ngModelChange","click","tap"],["firstname","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","lastname",1,"m-0"],["name","lastname","id","lastname","type","text","role","textbox",1,"form-control","w-100","py-1","px-2",3,"ngModel","ngModelChange","click","tap"],["lastname","ngModel"],["for","company",1,"m-0"],["name","company","id","company","type","text","role","textbox",1,"form-control","w-100","py-1","px-2",3,"ngModel","ngModelChange","click","tap"],["company","ngModel"],["for","email",1,"m-0"],["name","email","id","email","type","email","role","textbox","email","","required","","aria-required","true",1,"form-control","w-100","py-1","px-2",3,"ngModel","ngModelChange","click","tap"],["email","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"info","small","p-1"],[1,"m-0"],["for","message",1,"m-0"],["class","small",3,"text-warning",4,"ngIf"],["id","message","name","message","role","textbox","maxlength","4000",1,"form-control","w-100","py-1","px-2","mb-0",3,"ngModel","ngModelChange","click","tap"],["message","ngModel"],["type","submit","role","button",1,"btn","btn-primary",3,"disabled"],[1,"fa","fa-send"],["class","small d-flex justify-content-stretch",4,"ngIf"],[1,"busy-strip"],[1,"alert","alert-amber"],[1,"alert","alert-danger"],[1,"small"],[4,"ngIf"],[1,"small","d-flex","justify-content-stretch"],[1,"p-2"],[1,"flag","flag-ca"],[3,"innerHTML"],[1,"p-3","form-dark","text-center"],[1,"p-2","h2-large"],[1,"ico-sent"]],template:function(g,T){1&g&&(a.TgZ(0,"form",0,1),a.NdJ("ngSubmit",function(){return T.onSubmit()}),a.YNc(2,nl,58,43,"div",2),a.YNc(3,is,11,6,"div",3),a.qZA()),2&g&&(a.xp6(2),a.Q6J("ngIf",T.State!==T.States.submitted),a.xp6(1),a.Q6J("ngIf",T.State===T.States.submitted))},directives:[zn._Y,zn.JL,zn.F,S.O5,zn.Fj,zn.Q7,zn.JJ,zn.On,zn.on,zn.nD],pipes:[Xt.X$],styles:[".form-dark[_ngcontent-%COMP%]{background-color:#1e1e1eb3;border-radius:4px;color:#cfcfcf}.alert.alert-danger[_ngcontent-%COMP%]{padding:5px;color:#c44;font-size:smaller;margin:0}.alert.alert-amber[_ngcontent-%COMP%]{padding:5px;background-color:#fda;color:#d84;font-size:smaller;margin:0}.busy-strip[_ngcontent-%COMP%]{margin-top:-15px}.h2-large[_ngcontent-%COMP%]{font-weight:bolder;font-size:xx-large}.ico-sent[_ngcontent-%COMP%]{font-weight:bolder;font-size:48px;border-radius:50%;background-color:#e2e2e2;color:#777;height:100px;width:100px;display:inline-block;line-height:100px}"]}),x})(),Nc=(()=>{class x{constructor(g){this.util=g}ngOnInit(){}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-contact"]],inputs:{LightMode:"LightMode"},decls:41,vars:7,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"row","py-3"],[1,"col-md-6","text-left"],[1,"p-3"],[1,"list-unstyled"],[1,"my-3"],["href","https://www.linkedin.com/in/hugovicfortman","rel","noreferrer noopener","target","_blank","title","LinkedIn",3,"tap"],[1,"text-left","media-banner","d-inline-block","mr-3"],[1,"fa","fa-linkedin","float-right"],[1,"media-username","d-inline-block"],["href","https://twitter.com/hugovicfortman","rel","noreferrer noopener","target","_blank","title","Twitter",3,"tap"],[1,"fa","fa-twitter","float-right"],[1,"fa","fa-skype","float-right"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",4),a.TgZ(8,"div",2),a.TgZ(9,"div",5),a.TgZ(10,"div",6),a.TgZ(11,"div",7),a.TgZ(12,"div",8),a.TgZ(13,"div",9),a.TgZ(14,"h3"),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"ul",10),a.TgZ(19,"li",11),a.TgZ(20,"a",12),a.NdJ("tap",function(oe){return T.clickTarget(oe)}),a.TgZ(21,"span",13),a._uU(22,"LinkedIn"),a._UZ(23,"i",14),a.qZA(),a.qZA(),a.TgZ(24,"span",15),a._uU(25," hugovicfortman"),a.qZA(),a.qZA(),a.TgZ(26,"li",11),a.TgZ(27,"a",16),a.NdJ("tap",function(oe){return T.clickTarget(oe)}),a.TgZ(28,"span",13),a._uU(29,"Twitter"),a._UZ(30,"i",17),a.qZA(),a.qZA(),a.TgZ(31,"span",15),a._uU(32,"@hugovicfortman"),a.qZA(),a.qZA(),a.TgZ(33,"li",11),a.TgZ(34,"span",13),a._uU(35,"Skype"),a._UZ(36,"i",18),a.qZA(),a.TgZ(37,"span",15),a._uU(38," hugovicfortman"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(39,"div",8),a._UZ(40,"app-contact-form"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(5),a.Oqu(a.lcZ(6,3,"PAGES.CONTACT.HEADER")),a.xp6(10),a.Oqu(a.lcZ(16,5,"PAGES.CONTACT.GETCONNECTED")))},directives:[il],pipes:[Xt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}.media-banner[_ngcontent-%COMP%]{width:100px;background-color:#2d3d77;vertical-align:center;line-height:20px;padding:5px 10px;color:#cfcfcf}.media-username[_ngcontent-%COMP%]{width:200px;padding:5px}"]}),x})();function tn(x,R){if(1&x&&(a.TgZ(0,"span",2),a._UZ(1,"i"),a.qZA()),2&x){const g=R.$implicit,T=a.oxw();a.xp6(1),a.Tol(T.myClass+(g>T.score?" "+T.offClass:""))}}let Tl=(()=>{class x{constructor(g){this.util=g,this.IconClasses={star:"star"},this.DefaultMax=5,this.DefaultScore=0,this.myClass="fa fa-@type",this.offClass="text-dark"}ngOnInit(){this.myClass=this.myClass.replace("@type",()=>((null==this.type||void 0===this.type)&&(this.type="star"),void 0!==this.IconClasses[this.type]?this.IconClasses[this.type]:this.IconClasses.star)),this.setRating()}setRating(){(null==this.max||void 0===this.max)&&(this.max=this.DefaultMax),(null==this.score||void 0===this.score)&&(this.score=this.DefaultScore),this.score>this.max?this.score=this.max:this.score<0&&(this.score=0),this.Hits=this.util.range(this.max)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-rating"]],inputs:{type:"type",mode:"mode",max:"max",score:"score"},decls:2,vars:1,consts:[[1,"float-right","d-flex","justify-content-around","app-rating"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"]],template:function(g,T){1&g&&(a.TgZ(0,"em",0),a.YNc(1,tn,2,2,"span",1),a.qZA()),2&g&&(a.xp6(1),a.Q6J("ngForOf",T.Hits))},directives:[S.sg],styles:[".app-rating[_ngcontent-%COMP%]{min-width:100px}"]}),x})(),rl=(()=>{class x{constructor(){this.skills=[{name:"HTML(5)",max:5,score:5},{name:"CSS(3)",max:5,score:5},{name:"JavaScript",max:5,score:5},{name:"C#",max:5,score:5},{name:"VB",max:5,score:5},{name:"Python",max:5,score:4},{name:"Angular",max:5,score:5},{name:"SCSS",max:5,score:4},{name:"Dart",max:5,score:4},{name:"C++",max:5,score:3},{name:"React",max:5,score:2},{name:"Rust",max:5,score:1}]}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-skills"]],inputs:{LightMode:"LightMode"},decls:139,vars:38,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-md-6"],[1,"skills-deck"],[1,"skills-stack"],[1,"language-stack","stack"],[1,"stack-item"],[1,"framework-stack","stack"],[1,"tool-stack","stack"],[1,"col-md-5"],[3,"type","max","score","mode"],[1,"d-block"],[1,"col-md-5","offset-md-1"],["aria-hidden","true",1,"fa","fa-institution"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",2),a.TgZ(8,"div",4),a.TgZ(9,"h3",5),a._uU(10),a.ALo(11,"translate"),a.qZA(),a.TgZ(12,"div",6),a.TgZ(13,"div",7),a.TgZ(14,"div",8),a.TgZ(15,"div",9),a.TgZ(16,"ul"),a.TgZ(17,"li"),a._uU(18,"Business Intelligence"),a.qZA(),a.TgZ(19,"li"),a._uU(20,"Full Stack Web Development "),a.TgZ(21,"ul"),a.TgZ(22,"li"),a._uU(23,"Front End Development"),a.qZA(),a.TgZ(24,"li"),a._uU(25,"API Development"),a.qZA(),a.TgZ(26,"li"),a._uU(27,"Back End Development"),a.qZA(),a.TgZ(28,"li"),a._uU(29,"Database Development"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(30,"li"),a._uU(31,"UI and Graphics Design"),a.qZA(),a.TgZ(32,"li"),a._uU(33,"Mobile Development"),a.qZA(),a.TgZ(34,"li"),a._uU(35,"RPA Development"),a.qZA(),a.TgZ(36,"li"),a._uU(37,"Version Control"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"div",8),a.TgZ(39,"div",10),a.TgZ(40,"div",11),a.TgZ(41,"span",12),a._uU(42,"C#"),a.qZA(),a.TgZ(43,"span",12),a._uU(44,"CSS3"),a.qZA(),a.TgZ(45,"span",12),a._uU(46,"Dart"),a.qZA(),a.TgZ(47,"span",12),a._uU(48,"HTML5"),a.qZA(),a.TgZ(49,"span",12),a._uU(50,"JavaScript"),a.qZA(),a.TgZ(51,"span",12),a._uU(52,"Php"),a.qZA(),a.TgZ(53,"span",12),a._uU(54,"Python"),a.qZA(),a.TgZ(55,"span",12),a._uU(56,"SQL"),a.qZA(),a.TgZ(57,"span",12),a._uU(58,"TypeScript"),a.qZA(),a.TgZ(59,"span",12),a._uU(60,"VB"),a.qZA(),a.qZA(),a.TgZ(61,"div",13),a.TgZ(62,"span",12),a._uU(63,".netcore"),a.qZA(),a.TgZ(64,"span",12),a._uU(65,"Angular 2+"),a.qZA(),a.TgZ(66,"span",12),a._uU(67,"aspnetmvc"),a.qZA(),a.TgZ(68,"span",12),a._uU(69,"Django"),a.qZA(),a.TgZ(70,"span",12),a._uU(71,"Flask"),a.qZA(),a.TgZ(72,"span",12),a._uU(73,"Flutter"),a.qZA(),a.TgZ(74,"span",12),a._uU(75,"WordPress"),a.qZA(),a.qZA(),a.TgZ(76,"div",14),a.TgZ(77,"span",12),a._uU(78,"Android Studio"),a.qZA(),a.TgZ(79,"span",12),a._uU(80,"Blender"),a.qZA(),a.TgZ(81,"span",12),a._uU(82,"Excel"),a.qZA(),a.TgZ(83,"span",12),a._uU(84,"Git"),a.qZA(),a.TgZ(85,"span",12),a._uU(86,"GitHub"),a.qZA(),a.TgZ(87,"span",12),a._uU(88,"Illustrator"),a.qZA(),a.TgZ(89,"span",12),a._uU(90,"MSSQL"),a.qZA(),a.TgZ(91,"span",12),a._uU(92,"MySql"),a.qZA(),a.TgZ(93,"span",12),a._uU(94,"Photoshop"),a.qZA(),a.TgZ(95,"span",12),a._uU(96,"Power BI"),a.qZA(),a.TgZ(97,"span",12),a._uU(98,"UiPath Studio"),a.qZA(),a.TgZ(99,"span",12),a._uU(100,"TFS"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(101,"div",2),a.TgZ(102,"div",4),a.TgZ(103,"h3",5),a._uU(104),a.ALo(105,"translate"),a.qZA(),a.TgZ(106,"div",6),a.TgZ(107,"div",7),a.TgZ(108,"div",15),a.TgZ(109,"div"),a.TgZ(110,"strong"),a._uU(111),a.ALo(112,"translate"),a.qZA(),a._UZ(113,"app-rating",16),a.TgZ(114,"small",17),a._uU(115,"Mother Tongue"),a.qZA(),a.qZA(),a.TgZ(116,"div"),a.TgZ(117,"strong"),a._uU(118),a.ALo(119,"translate"),a.qZA(),a._UZ(120,"app-rating",16),a.TgZ(121,"small",17),a._uU(122,"National Language"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(123,"div",18),a.TgZ(124,"div"),a.TgZ(125,"strong"),a._uU(126),a.ALo(127,"translate"),a.qZA(),a._UZ(128,"app-rating",16),a.TgZ(129,"small",17),a._uU(130,"Professional - DELF B2 Certified \xa0"),a._UZ(131,"i",19),a.qZA(),a.qZA(),a.TgZ(132,"div"),a.TgZ(133,"strong"),a._uU(134),a.ALo(135,"translate"),a.qZA(),a._UZ(136,"app-rating",16),a.TgZ(137,"small",17),a._uU(138,"Sehr Klein"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(5),a.Oqu(a.lcZ(6,24,"PAGES.SKILLS.HEADER")),a.xp6(5),a.Oqu(a.lcZ(11,26,"PAGES.SKILLS.TECHNICAL")),a.xp6(94),a.Oqu(a.lcZ(105,28,"PAGES.SKILLS.LANGUAGES")),a.xp6(7),a.Oqu(a.lcZ(112,30,"LANGUAGES.IGBO")),a.xp6(2),a.Q6J("type","star")("max",5)("score",5)("mode","static"),a.xp6(5),a.Oqu(a.lcZ(119,32,"LANGUAGES.ENGLISH")),a.xp6(2),a.Q6J("type","star")("max",5)("score",5)("mode","static"),a.xp6(6),a.Oqu(a.lcZ(127,34,"LANGUAGES.FRENCH")),a.xp6(2),a.Q6J("type","star")("max",5)("score",4)("mode","static"),a.xp6(6),a.Oqu(a.lcZ(135,36,"LANGUAGES.GERMAN")),a.xp6(2),a.Q6J("type","star")("max",5)("score",2)("mode","static"))},directives:[Tl],pipes:[Xt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#373738}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#ccc}.stack-item[_ngcontent-%COMP%]{background-color:#575a704d;padding:5px;margin:2px;display:inline-block}.skills-stack[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:100%}.stack[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap}"]}),x})(),lc=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-tools"]],inputs:{LightMode:"LightMode"},decls:2,vars:0,template:function(g,T){1&g&&(a.TgZ(0,"p"),a._uU(1,"tools works!"),a.qZA())},styles:[""]}),x})(),Vo=(()=>{class x{constructor(g,T){this.http=g,this.configService=T}downloadFile(g){return this.http.get(`${this.configService.config.url.cors}${this.configService.config.url.github}CV/raw/main/public/${g}/Victor_Okafor.pdf&btoken=${this.configService.config.btoken}`,{responseType:"blob"})}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(At.eN),a.LFG(qt.E))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();var _o=Q(9441);function cc(x,R){if(1&x&&(a.TgZ(0,"div",12),a.TgZ(1,"div",13),a.TgZ(2,"strong",14),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"em"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"div",15),a.TgZ(9,"strong",14),a._uU(10),a.ALo(11,"translate"),a.qZA(),a._UZ(12,"p",16),a.ALo(13,"translate"),a.qZA(),a.qZA()),2&x){const g=R.$implicit;a.xp6(3),a.Oqu(a.lcZ(4,4,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".COMPANY")),a.xp6(3),a.Oqu(a.lcZ(7,6,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".ACTIVEYEAR")),a.xp6(4),a.Oqu(a.lcZ(11,8,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".ROLE")),a.xp6(2),a.Q6J("innerHTML",a.lcZ(13,10,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".DESCRIPTION"),a.oJD)}}function ri(x,R){if(1&x&&(a.TgZ(0,"div",12),a.TgZ(1,"div",13),a.TgZ(2,"strong",14),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"em"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"div",15),a.TgZ(9,"strong",14),a._uU(10),a.ALo(11,"translate"),a.qZA(),a._UZ(12,"p",16),a.ALo(13,"translate"),a.qZA(),a.qZA()),2&x){const g=R.$implicit;a.xp6(3),a.Oqu(a.lcZ(4,4,"PAGES.RESUME.EDUCATION.CONTENT."+g+".SCHOOLNAME")),a.xp6(3),a.Oqu(a.lcZ(7,6,"PAGES.RESUME.EDUCATION.CONTENT."+g+".ACTIVEYEAR")),a.xp6(4),a.Oqu(a.lcZ(11,8,"PAGES.RESUME.EDUCATION.CONTENT."+g+".DEGREE")),a.xp6(2),a.Q6J("innerHTML",a.lcZ(13,10,"PAGES.RESUME.EDUCATION.CONTENT."+g+".DESCRIPTION"),a.oJD)}}const Rn=function(){return[0,1,2,4,5,6]},Uh=function(){return[0,1]};let Al=(()=>{class x{constructor(g,T,W){this.fileService=g,this.preferenceService=T,this.util=W,this.IsDownloading=!1}ngOnInit(){}downloadCV(){if(this.IsDownloading)return;this.IsDownloading=!0;const g=this.preferenceService.getPreference().Language;this.fileService.downloadFile(g).subscribe(T=>{const W=new Blob([T],{type:"application/pdf; charset=utf-8"});_o.saveAs(W,"VictorFortman.pdf"),this.IsDownloading=!1},T=>{console.log("Error downloading the file"),this.IsDownloading=!1},()=>{})}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Vo),a.Y36(_i.y),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-cv"]],inputs:{LightMode:"LightMode"},decls:28,vars:17,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],["class","row py-3",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","my-3"],[1,"btn","btn-primary",3,"click","tap"],[1,"fa","fa-download"],[1,"row","py-3"],[1,"col-lg-4","text-left"],[1,"d-block","py-2"],[1,"col-lg-8","text-left"],[1,"small",3,"innerHTML"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",4),a.TgZ(8,"div",2),a.TgZ(9,"div",5),a.TgZ(10,"h3",6),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"div",7),a.YNc(14,cc,14,12,"div",8),a.qZA(),a.qZA(),a.qZA(),a.TgZ(15,"div",2),a.TgZ(16,"div",5),a.TgZ(17,"h3",6),a._uU(18),a.ALo(19,"translate"),a.qZA(),a.TgZ(20,"div",7),a.YNc(21,ri,14,12,"div",8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"div",2),a.TgZ(23,"div",9),a.TgZ(24,"button",10),a.NdJ("click",function(){return T.downloadCV()})("tap",function(oe){return T.clickTarget(oe)}),a._uU(25),a.ALo(26,"translate"),a._UZ(27,"i",11),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(5),a.Oqu(a.lcZ(6,7,"PAGES.RESUME.HEADER")),a.xp6(6),a.Oqu(a.lcZ(12,9,"PAGES.RESUME.EXPERIENCE.HEADER")),a.xp6(3),a.Q6J("ngForOf",a.DdM(15,Rn)),a.xp6(4),a.Oqu(a.lcZ(19,11,"PAGES.RESUME.EDUCATION.HEADER")),a.xp6(3),a.Q6J("ngForOf",a.DdM(16,Uh)),a.xp6(4),a.hij(" ",a.lcZ(26,13,"PAGES.RESUME.DOWNLOADSUMMARY")," "))},directives:[S.sg],pipes:[Xt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}"]}),x})(),Ed=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-awards"]],inputs:{LightMode:"LightMode"},decls:24,vars:1,consts:[[1,"container-fluid","text-white","px-2",2,"background-color","#373738","margin-top","-10px"],[1,"px-3","py-5",2,"border","1px dashed #777777","border-top","none","border-bottom","none"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-lg-6","text-left"],[1,"d-block","py-2"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"h2"),a._uU(5,"Skills"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",2),a.TgZ(7,"div",4),a.TgZ(8,"h3",5),a._uU(9,"Technical"),a.qZA(),a.TgZ(10,"div",6),a.TgZ(11,"div",7),a.TgZ(12,"div",8),a.TgZ(13,"strong",9),a._uU(14,"FUTO"),a.qZA(),a.TgZ(15,"em"),a._uU(16,"Sep 2010 - Dec 2015"),a.qZA(),a.qZA(),a._UZ(17,"div",8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",2),a.TgZ(19,"div",4),a.TgZ(20,"h3",5),a._uU(21,"Languages"),a.qZA(),a.TgZ(22,"div",6),a._UZ(23,"div",7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&a.uIk("light-mode",T.LightMode)},styles:[""]}),x})(),sl=(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-progress"]],decls:7,vars:0,consts:[["id","loader",1,"loader"],[1,"loader-inner"],[1,"loader-dot"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"span",2),a._UZ(3,"span",2),a._UZ(4,"span",2),a._UZ(5,"span",2),a._UZ(6,"span",2),a.qZA(),a.qZA())},styles:[".loader[_ngcontent-%COMP%]{background-color:#fff;padding:5px;width:350px;overflow-x:hidden;justify-content:stretch;white-space:nowrap;-webkit-user-select:none;user-select:none}.loader-dot[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;margin:2px;background-color:#249;display:inline-block;position:relative;transition:all ease 2s;animation:accordion 4s ease infinite}.loader-inner[_ngcontent-%COMP%]{animation:marquee ease-in-out infinite 4s}@keyframes marquee{0%{margin-left:-50%}50%{margin-left:40%}to{margin-left:200%}}@keyframes accordion{0%{margin-left:3%}20%{margin-left:2%}40%{margin-left:0%}60%{margin-left:0%}80%{margin-left:100%}to{margin-left:100%}}"]}),x})();function ol(x,R){1&x&&(a.TgZ(0,"div",2),a.TgZ(1,"div",13),a._UZ(2,"app-progress"),a.qZA(),a.qZA())}let al=(()=>{class x{constructor(g,T){this.elementScrollService=g,this.util=T}ngOnInit(){}scrollTo(g){this.elementScrollService.scrollTo(g)}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(Zi),a.Y36(Fn.t))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-footer"]],inputs:{LightMode:"LightMode"},decls:51,vars:2,consts:[[1,"container-fluid","text-white","text-always-white","pb-2","px-2","paper-section-wrap-outer","paper-bottom"],[1,"p-3","paper-section-wrap-inner"],[1,"row"],[1,"col-md-8","offset-md-2","text-center","mt-5","mb-3"],[1,"col-md-8"],[1,"text-left","d-flex"],[1,"list-unstyled"],["routerLink","/home",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/profile",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/projects",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/contact",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/skills",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/resume",1,"nav-link","text-always-white",3,"click","tap"],[1,"col-md-4"],[1,"text-justify","small"],["class","row",4,"ngIf"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",2),a.TgZ(5,"div",4),a.TgZ(6,"h2"),a._uU(7,"Victor Fortman"),a.qZA(),a.TgZ(8,"nav",5),a.TgZ(9,"ul",6),a.TgZ(10,"li"),a.TgZ(11,"a",7),a.NdJ("click",function(){return T.scrollTo("home")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(12,"Home"),a.qZA(),a.qZA(),a.TgZ(13,"li"),a.TgZ(14,"a",8),a.NdJ("click",function(){return T.scrollTo("profile")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(15,"Profile"),a.qZA(),a.qZA(),a.TgZ(16,"li"),a.TgZ(17,"a",9),a.NdJ("click",function(){return T.scrollTo("projects")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(18,"Projects"),a.qZA(),a.qZA(),a.TgZ(19,"li"),a.TgZ(20,"a",10),a.NdJ("click",function(){return T.scrollTo("contact")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(21,"Contact"),a.qZA(),a.qZA(),a.TgZ(22,"li"),a.TgZ(23,"a",11),a.NdJ("click",function(){return T.scrollTo("skills")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(24,"Skills"),a.qZA(),a.qZA(),a.TgZ(25,"li"),a.TgZ(26,"a",12),a.NdJ("click",function(){return T.scrollTo("resume")})("tap",function(oe){return T.clickTarget(oe)}),a._uU(27,"Resume"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(28,"div",13),a.TgZ(29,"h5"),a._uU(30,"Resources"),a.qZA(),a.TgZ(31,"dl",14),a.TgZ(32,"dt"),a._uU(33,"Flag Sprites"),a.qZA(),a.TgZ(34,"dd"),a._uU(35,"https://flag-sprites.com/"),a.qZA(),a.qZA(),a.TgZ(36,"dl",14),a.TgZ(37,"dt"),a._uU(38,"Avatar"),a.qZA(),a.TgZ(39,"dd"),a._uU(40,"https://www.cartoonify.de/"),a.qZA(),a.qZA(),a.TgZ(41,"dl",14),a.TgZ(42,"dt"),a._uU(43,"Backdrop Image"),a.qZA(),a.TgZ(44,"dd"),a._uU(45,"Andrew Neel "),a.TgZ(46,"small"),a._uU(47,"on Pexels"),a.qZA(),a.qZA(),a.TgZ(48,"dd"),a._uU(49,"https://www.pexels.com/@andrew"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(50,ol,3,0,"div",15),a.qZA(),a.qZA()),2&g&&(a.uIk("light-mode",T.LightMode),a.xp6(50),a.Q6J("ngIf",!1))},directives:[ki.yS,S.O5,sl],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#2d3d77}"]}),x})();function ll(x,R){if(1&x&&a._UZ(0,"app-about",12),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Cd(x,R){if(1&x&&a._UZ(0,"app-featured-projects",13),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Rr(x,R){if(1&x&&a._UZ(0,"app-contact",14),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Dl(x,R){if(1&x&&a._UZ(0,"app-skills",15),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Pa(x,R){if(1&x&&a._UZ(0,"app-tools",16),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Mu(x,R){if(1&x&&a._UZ(0,"app-cv",17),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Fc(x,R){if(1&x&&a._UZ(0,"app-awards",16),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}function Fs(x,R){if(1&x&&a._UZ(0,"app-footer",16),2&x){const g=a.oxw();a.Q6J("LightMode",g.preference.LightMode)}}const Sd=[{path:"",component:(()=>{class x{constructor(g,T,W){this.preferenceService=g,this.util=T,this.elementScrollService=W}ngOnInit(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(g=>{this.preference=g})}scrollTo(g){this.elementScrollService.scrollTo(g).then(T=>{})}clickTarget(g){this.util.click(g.target)}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(_i.y),a.Y36(Fn.t),a.Y36(Zi))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-main"]],decls:15,vars:10,consts:[["id","home",1,"doc-section",3,"LightMode"],["routerLink","/profile",1,"d-flex","justify-content-end","align-content-center","jacket-sleeve",3,"click","tap"],[1,"p-2","d-inline-block","mx-3","jacket-sleeve-outer"],[1,"jacket-sleeve-inner","d-inline-block","p-2"],[1,"fa","fa-chevron-down"],[1,"jacket"],["id","profile","class","doc-section",3,"LightMode",4,"ngIf"],["id","projects","class","doc-section",3,"LightMode",4,"ngIf"],["id","contact","class","doc-section",3,"LightMode",4,"ngIf"],["id","skills","class","doc-section",3,"LightMode",4,"ngIf"],["class","doc-section",3,"LightMode",4,"ngIf"],["id","resume","class","doc-section",3,"LightMode",4,"ngIf"],["id","profile",1,"doc-section",3,"LightMode"],["id","projects",1,"doc-section",3,"LightMode"],["id","contact",1,"doc-section",3,"LightMode"],["id","skills",1,"doc-section",3,"LightMode"],[1,"doc-section",3,"LightMode"],["id","resume",1,"doc-section",3,"LightMode"]],template:function(g,T){1&g&&(a.TgZ(0,"main"),a._UZ(1,"app-home",0),a.TgZ(2,"div",1),a.NdJ("click",function(){return T.scrollTo("profile")})("tap",function(oe){return T.clickTarget(oe)}),a.TgZ(3,"span",2),a.TgZ(4,"span",3),a._UZ(5,"i",4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"article",5),a.YNc(7,ll,1,1,"app-about",6),a.YNc(8,Cd,1,1,"app-featured-projects",7),a.YNc(9,Rr,1,1,"app-contact",8),a.YNc(10,Dl,1,1,"app-skills",9),a.YNc(11,Pa,1,1,"app-tools",10),a.YNc(12,Mu,1,1,"app-cv",11),a.YNc(13,Fc,1,1,"app-awards",10),a.YNc(14,Fs,1,1,"app-footer",10),a.qZA(),a.qZA()),2&g&&(a.xp6(1),a.Q6J("LightMode",T.preference.LightMode),a.xp6(1),a.uIk("light-mode",T.preference.LightMode),a.xp6(5),a.Q6J("ngIf",!0),a.xp6(1),a.Q6J("ngIf",!0),a.xp6(1),a.Q6J("ngIf",!0),a.xp6(1),a.Q6J("ngIf",!0),a.xp6(1),a.Q6J("ngIf",!1),a.xp6(1),a.Q6J("ngIf",!0),a.xp6(1),a.Q6J("ngIf",!1),a.xp6(1),a.Q6J("ngIf",!0))},directives:[yi,ki.rH,S.O5,y,Ve,Nc,rl,lc,Al,Ed,al],styles:[".jacket[_ngcontent-%COMP%]{box-shadow:0 -4px 4px #1e1e1e80}.jacket-sleeve[_ngcontent-%COMP%]{height:75px;animation:radiate 4s ease infinite;cursor:pointer;z-index:1000}[light-mode=dark][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#2d3d77}.jacket-sleeve-outer[_ngcontent-%COMP%]{width:75px;height:75px}.jacket-sleeve-inner[_ngcontent-%COMP%]{font-size:30px;text-align:center;vertical-align:middle;height:60px;width:60px;line-height:45px;border:1px dashed #777777;color:#777}"]}),x})(),children:[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:yi},{path:"profile",component:y},{path:"projects",component:Ve},{path:"contact",component:Nc},{path:"resume",component:Al},{path:"skills",component:rl}]},{path:"apps",component:(()=>{class x{constructor(){}ngOnInit(){}}return x.\u0275fac=function(g){return new(g||x)},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-apps"]],decls:1,vars:0,template:function(g,T){1&g&&a._UZ(0,"router-outlet")},directives:[ki.lC],styles:[""]}),x})(),children:[{path:"calendar",loadChildren:()=>Q.e(781).then(Q.bind(Q,2781)).then(x=>x.CalendarModule)}],canActivate:[(()=>{class x{constructor(g){this.router=g}canActivate(g,T){return new Promise((W,oe)=>{this.router.navigateByUrl("/404"),W(!1)})}}return x.\u0275fac=function(g){return new(g||x)(a.LFG(ki.F0))},x.\u0275prov=a.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()]},{path:"404",component:(()=>{class x{constructor(g,T){this.preferenceService=g,this.router=T,this.preference=this.preferenceService.getPreference()}ngOnInit(){}navigateBack(){window.history.back()}navigateHome(){this.preferenceService.setBackdropMode("background"),this.router.navigateByUrl("/home")}}return x.\u0275fac=function(g){return new(g||x)(a.Y36(_i.y),a.Y36(ki.F0))},x.\u0275cmp=a.Xpm({type:x,selectors:[["app-not-found"]],decls:11,vars:1,consts:[["role","sign-404",1,"sign-404"],[1,"msg-404","text-center","text-white","text-always-white"],[1,"banner-404"],[1,"btn","btn-link",3,"click","tap"]],template:function(g,T){1&g&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"h1",2),a._uU(3,"Sorry"),a.qZA(),a.TgZ(4,"p"),a._uU(5,"The resource you are looking for is not found."),a.qZA(),a.TgZ(6,"div"),a.TgZ(7,"a",3),a.NdJ("click",function(){return T.navigateHome()})("tap",function(){return T.navigateHome()}),a._uU(8,"Go to Homepage"),a.qZA(),a.TgZ(9,"a",3),a.NdJ("click",function(){return T.navigateBack()})("tap",function(){return T.navigateBack()}),a._uU(10,"Navigate Back"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&g&&a.uIk("light-mode",T.preference.LightMode)},styles:["[role=sign-404][_ngcontent-%COMP%]{padding:7px}[role=sign-404][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=sign-404][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}.msg-404[_ngcontent-%COMP%]{min-height:100px;width:calc(300px + 10vw);padding:15px;border:1px dashed #777777}.banner-404[_ngcontent-%COMP%]{font-weight:bolder;font-size:xx-large;display:inline-block}.sign-404[_ngcontent-%COMP%]{position:fixed;top:0px;left:calc(50% - 150px - 5vw);margin-top:calc(50vh - 75px)}"]}),x})()},{path:"**",redirectTo:"/404"}];let kc=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x}),x.\u0275inj=a.cJS({imports:[[S.ez,ki.Bz.forRoot(Sd,{anchorScrolling:"enabled",relativeLinkResolution:"legacy"})],ki.Bz]}),x})();const Ia=x=>new ei(x),uc=x=>()=>x.loadConfig();let ks=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=a.oAB({type:x,bootstrap:[gi]}),x.\u0275inj=a.cJS({providers:[{provide:a.ip1,useFactory:uc,deps:[qt.E],multi:!0}],imports:[[Qi.m,Zo,zn.u5,tl,ve,kc,At.JF,Xt.aw.forRoot({loader:{provide:Xt.Zw,useFactory:Ia,deps:[At.eN]}})]]}),x})();var Td=Q(2340),ro=Q(2329),Uc={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var x=document.createElement("canvas");return!(!window.WebGLRenderingContext||!x.getContext("webgl")&&!x.getContext("experimental-webgl"))}catch(R){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var x=document.createElement("div");return x.id="webgl-error-message",x.style.fontFamily="monospace",x.style.fontSize="13px",x.style.fontWeight="normal",x.style.textAlign="center",x.style.background="#fff",x.style.color="#000",x.style.padding="1.5em",x.style.width="400px",x.style.margin="5em auto 0",this.webgl||(x.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),x},addGetWebGLMessage:function(x){var R=void 0!==(x=x||{}).parent?x.parent:document.body,g=void 0!==x.id?x.id:"oldie",T=Uc.getWebGLErrorMessage();T.id=g,R.appendChild(T)}};const $s=Uc,Zr=function(){function x(){this.arenaCache=[],this.preloadStyleContent="canvas.preload{position:fixed;top:0;left:0;z-index:-1}",this.setArena=function(R){return console.log(R)},this.getArenaIndex=function(){return[]}}return x.prototype.init=function(R){this.container=R,this.initialize()},x.prototype.initialize=function(){var R=this;if($s.webgl){var g=document.createElement("style");g.innerHTML=this.preloadStyleContent,document.body.appendChild(g),ro.tEQ.onProgress=function(W,oe,it){console.log("loading manager progress triggered"),R.incomingArena.loaded=oe===it},this.currentArena=void 0}else{var T=$s.getWebGLErrorMessage();this.container.appendChild(T)}},x.prototype.setup=function(){var R=this;return new Promise(function(g,T){Q.e(819).then(Q.bind(Q,5819)).then(function(W){var oe=0;R.loadArena(oe,W.getArena(oe,R.container)),R.transition();var it=Array.from(Array(W.getArenaCount()).keys());R.setArena=function(hn){hn in it&&hn!=oe&&(R.loadArena(hn,W.getArena(hn,R.container)),R.transition(),oe=hn)},R.getArenaIndex=function(){return W.getArenaIndex()}}).then(function(){return g()}).catch(function(){return T()})})},x.prototype.finishLoading=function(R){return new Promise(function(g,T){if(R.needsLoading)var W=0,it=setInterval(function(){R.loaded?(clearInterval(it),g()):(W+=500)>=R.loadingTimeout&&(clearInterval(it),T())},500);else g()})},x.prototype.loadArena=function(R,g){null==this.arenaCache[R]?(this.incomingArena=g,this.arenaCache[R]=g):(this.incomingArena=this.arenaCache[R],console.log("retrieval"))},x.prototype.transition=function(){var R=this;void 0!==this.incomingArena&&(void 0!==this.currentArena&&(this.outgoingArena=this.currentArena),this.currentArena=this.incomingArena,this.currentArena.init(),console.log(this.currentArena),this.currentArena.canvas().classList.add("preload"),this.finishLoading(this.incomingArena).then(function(){void 0!==R.outgoingArena&&R.outgoingArena.packup(),R.fadeOutArena(R.outgoingArena,1).then(function(g){g&&R.outgoingArena.destroy(),R.currentArena.canvas().classList.remove("preload")})}).catch(function(g){return console.log(g)}))},x.prototype.fadeOutArena=function(R,g){return console.log("fadeout called on outgoing Arena"),null!=R?this.fadeOut(R.canvas(),g):(console.log("no outgoing Arena"),new Promise(function(T){return T(!1)}))},x.prototype.fadeOut=function(R,g){var T=Number(R.style.opacity)||1;return new Promise(function(W){var oe=T,it=setInterval(function(){oe>0?R.style.opacity="".concat(oe-=T/60):(clearInterval(it),R.style.opacity="0",console.log("outgoing Arena faded out"),W(!0))},g/60)})},x}();Q(5386),Td.N.production&&(0,a.G48)();const Pl=document.querySelector("#scenery"),hc=new Zr;hc.init(Pl),window.setScenery(hc),hc.setup().then(()=>window.removeDarkMode()),ur().bootstrapModule(ks).catch(x=>console.log(x))},5877:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{E2:()=>a,HW:()=>qe,DZ:()=>ke,a2:()=>pe,bb:()=>Ae});const a=[{name:"background",code:"BACKGROUND",longCode:"background-mode",desc:"BACKGROUNDMODE",ico:"fa-briefcase"},{name:"interactive",code:"INTERACTIVE",longCode:"interactive-mode",desc:"INTERACTIVEMODE",ico:"fa-binoculars"}],qe=[{name:"retracted",code:"RETRACTED"},{name:"available",code:"AVAILABLE"}],ke=[{name:"bright",code:"DAY",longCode:"bright-mode",desc:"DAYMODE",ico:"fa-sun-o"},{name:"dark",code:"NIGHT",longCode:"dark-mode",desc:"NIGHTMODE",ico:"fa-moon-o"}],pe=[{name:"GERMAN",code:"de",ico:"flag-de"},{name:"ENGLISH",code:"en",ico:"flag-gb"},{name:"FRENCH",code:"fr",ico:"flag-fr"}],Ae={MenuMode:"retracted",LightMode:"dark",Language:((Ie="en")=>{for(const Ue of navigator.languages){const Ce=Ue.split("-")[0],ae=pe.find(_e=>_e.code===Ce);if(null!=ae)return ae.code}return Ie})("en"),BackdropMode:"background",Calendar:{Timezone:"Africa/Onicha",AvailableDays:"weekdays",AvailableHours:[8,16]}}},6719:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{Zw:()=>hi,aw:()=>Te,X$:()=>Xe,sK:()=>lr});var S=Q(2096),a=Q(2916);function qe(he){return!!he&&(he instanceof a.y||"function"==typeof he.lift&&"function"==typeof he.subscribe)}var ke=Q(1086),pe=Q(567),Ae=Q(1221),Ie=Q(8514),Ue=Q(8929),Ce=Q(6686),_e=Q(2268);const Ne=new class Re extends _e.v{}(class ae extends Ce.o{constructor(ve,ee){super(ve,ee),this.scheduler=ve,this.work=ee}schedule(ve,ee=0){return ee>0?super.schedule(ve,ee):(this.delay=ee,this.state=ve,this.scheduler.flush(this),this)}execute(ve,ee){return ee>0||this.closed?super.execute(ve,ee):this._execute(ve,ee)}requestAsyncId(ve,ee,fe=0){return null!==fe&&fe>0||null===fe&&this.delay>0?super.requestAsyncId(ve,ee,fe):ve.flush(this)}});var et=Q(2654),rt=Q(3489),Ge=Q(8896);function an({error:he,subscriber:ve}){ve.error(he)}class Pt{constructor(ve,ee,fe){this.kind=ve,this.value=ee,this.error=fe,this.hasValue="N"===ve}observe(ve){switch(this.kind){case"N":return ve.next&&ve.next(this.value);case"E":return ve.error&&ve.error(this.error);case"C":return ve.complete&&ve.complete()}}do(ve,ee,fe){switch(this.kind){case"N":return ve&&ve(this.value);case"E":return ee&&ee(this.error);case"C":return fe&&fe()}}accept(ve,ee,fe){return ve&&"function"==typeof ve.next?this.observe(ve):this.do(ve,ee,fe)}toObservable(){switch(this.kind){case"N":return(0,ke.of)(this.value);case"E":return function Ft(he,ve){return new a.y(ve?ee=>ve.schedule(an,0,{error:he,subscriber:ee}):ee=>ee.error(he))}(this.error);case"C":return(0,Ge.c)()}throw new Error("unexpected notification kind value")}static createNext(ve){return void 0!==ve?new Pt("N",ve):Pt.undefinedValueNotification}static createError(ve){return new Pt("E",void 0,ve)}static createComplete(){return Pt.completeNotification}}Pt.completeNotification=new Pt("C"),Pt.undefinedValueNotification=new Pt("N",void 0);class fn extends rt.L{constructor(ve,ee,fe=0){super(ve),this.scheduler=ee,this.delay=fe}static dispatch(ve){const{notification:ee,destination:fe}=ve;ee.observe(fe),this.unsubscribe()}scheduleMessage(ve){this.destination.add(this.scheduler.schedule(fn.dispatch,this.delay,new mt(ve,this.destination)))}_next(ve){this.scheduleMessage(Pt.createNext(ve))}_error(ve){this.scheduleMessage(Pt.createError(ve)),this.unsubscribe()}_complete(){this.scheduleMessage(Pt.createComplete()),this.unsubscribe()}}class mt{constructor(ve,ee){this.notification=ve,this.destination=ee}}var $e=Q(5279),tt=Q(5283);class Rt extends Ue.xQ{constructor(ve=Number.POSITIVE_INFINITY,ee=Number.POSITIVE_INFINITY,fe){super(),this.scheduler=fe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ve<1?1:ve,this._windowTime=ee<1?1:ee,ee===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ve){const ee=this._events;ee.push(ve),ee.length>this._bufferSize&&ee.shift(),super.next(ve)}nextTimeWindow(ve){this._events.push(new St(this._getNow(),ve)),this._trimBufferThenGetEvents(),super.next(ve)}_subscribe(ve){const ee=this._infiniteTimeWindow,fe=ee?this._events:this._trimBufferThenGetEvents(),Se=this.scheduler,nt=fe.length;let ft;if(this.closed)throw new $e.N;if(this.isStopped||this.hasError?ft=et.w.EMPTY:(this.observers.push(ve),ft=new tt.W(this,ve)),Se&&ve.add(ve=new fn(ve,Se)),ee)for(let Lt=0;Lt<nt&&!ve.closed;Lt++)ve.next(fe[Lt]);else for(let Lt=0;Lt<nt&&!ve.closed;Lt++)ve.next(fe[Lt].value);return this.hasError?ve.error(this.thrownError):this.isStopped&&ve.complete(),ft}_getNow(){return(this.scheduler||Ne).now()}_trimBufferThenGetEvents(){const ve=this._getNow(),ee=this._bufferSize,fe=this._windowTime,Se=this._events,nt=Se.length;let ft=0;for(;ft<nt&&!(ve-Se[ft].time<fe);)ft++;return nt>ee&&(ft=Math.max(ft,nt-ee)),ft>0&&Se.splice(0,ft),Se}}class St{constructor(ve,ee){this.time=ve,this.value=ee}}function ut(he,ve,ee){let fe;return fe=he&&"object"==typeof he?he:{bufferSize:he,windowTime:ve,refCount:!1,scheduler:ee},Se=>Se.lift(function Ct({bufferSize:he=Number.POSITIVE_INFINITY,windowTime:ve=Number.POSITIVE_INFINITY,refCount:ee,scheduler:fe}){let Se,ft,nt=0,Lt=!1,Qn=!1;return function(on){nt++,(!Se||Lt)&&(Lt=!1,Se=new Rt(he,ve,fe),ft=on.subscribe({next(xn){Se.next(xn)},error(xn){Lt=!0,Se.error(xn)},complete(){Qn=!0,ft=void 0,Se.complete()}}));const yn=Se.subscribe(this);this.add(()=>{nt--,yn.unsubscribe(),ft&&!Qn&&ee&&0===nt&&(ft.unsubscribe(),ft=void 0,Se=void 0)})}}(fe))}var kt=Q(2986),Ut=Q(4850),dn=Q(1406),Pi=Q(7545);class hi{}let xi=(()=>{class he extends hi{getTranslation(ee){return(0,ke.of)({})}}return he.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=S.n5z(he)))(fe||he)}}(),he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})();class Yn{}let ir=(()=>{class he{handle(ee){return ee.key}}return he.\u0275fac=function(ee){return new(ee||he)},he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})();function xs(he,ve){if(he===ve)return!0;if(null===he||null===ve)return!1;if(he!=he&&ve!=ve)return!0;let Se,nt,ft,ee=typeof he;if(ee==typeof ve&&"object"==ee){if(!Array.isArray(he)){if(Array.isArray(ve))return!1;for(nt in ft=Object.create(null),he){if(!xs(he[nt],ve[nt]))return!1;ft[nt]=!0}for(nt in ve)if(!(nt in ft)&&void 0!==ve[nt])return!1;return!0}if(!Array.isArray(ve))return!1;if((Se=he.length)==ve.length){for(nt=0;nt<Se;nt++)if(!xs(he[nt],ve[nt]))return!1;return!0}}return!1}function pi(he){return null!=he}function yr(he){return he&&"object"==typeof he&&!Array.isArray(he)}function vi(he,ve){let ee=Object.assign({},he);return yr(he)&&yr(ve)&&Object.keys(ve).forEach(fe=>{yr(ve[fe])?fe in he?ee[fe]=vi(he[fe],ve[fe]):Object.assign(ee,{[fe]:ve[fe]}):Object.assign(ee,{[fe]:ve[fe]})}),ee}class jt{}let kn=(()=>{class he extends jt{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(ee,fe){let Se;return Se="string"==typeof ee?this.interpolateString(ee,fe):"function"==typeof ee?this.interpolateFunction(ee,fe):ee,Se}getValue(ee,fe){let Se="string"==typeof fe?fe.split("."):[fe];fe="";do{fe+=Se.shift(),!pi(ee)||!pi(ee[fe])||"object"!=typeof ee[fe]&&Se.length?Se.length?fe+=".":ee=void 0:(ee=ee[fe],fe="")}while(Se.length);return ee}interpolateFunction(ee,fe){return ee(fe)}interpolateString(ee,fe){return fe?ee.replace(this.templateMatcher,(Se,nt)=>{let ft=this.getValue(fe,nt);return pi(ft)?ft:Se}):ee}}return he.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=S.n5z(he)))(fe||he)}}(),he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})();class Kn{}let ti=(()=>{class he extends Kn{compile(ee,fe){return ee}compileTranslations(ee,fe){return ee}}return he.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=S.n5z(he)))(fe||he)}}(),he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})();class Oi{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new S.vpe,this.onLangChange=new S.vpe,this.onDefaultLangChange=new S.vpe}}const Tn=new S.OlP("USE_STORE"),$i=new S.OlP("USE_DEFAULT_LANG"),pr=new S.OlP("DEFAULT_LANGUAGE"),Xi=new S.OlP("USE_EXTEND");let lr=(()=>{class he{constructor(ee,fe,Se,nt,ft,Lt=!0,Qn=!1,si=!1,on){this.store=ee,this.currentLoader=fe,this.compiler=Se,this.parser=nt,this.missingTranslationHandler=ft,this.useDefaultLang=Lt,this.isolate=Qn,this.extend=si,this.pending=!1,this._onTranslationChange=new S.vpe,this._onLangChange=new S.vpe,this._onDefaultLangChange=new S.vpe,this._langs=[],this._translations={},this._translationRequests={},on&&this.setDefaultLang(on)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(ee){this.isolate?this._defaultLang=ee:this.store.defaultLang=ee}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(ee){this.isolate?this._currentLang=ee:this.store.currentLang=ee}get langs(){return this.isolate?this._langs:this.store.langs}set langs(ee){this.isolate?this._langs=ee:this.store.langs=ee}get translations(){return this.isolate?this._translations:this.store.translations}set translations(ee){this.isolate?this._translations=ee:this.store.translations=ee}setDefaultLang(ee){if(ee===this.defaultLang)return;let fe=this.retrieveTranslations(ee);void 0!==fe?(null==this.defaultLang&&(this.defaultLang=ee),fe.pipe((0,kt.q)(1)).subscribe(Se=>{this.changeDefaultLang(ee)})):this.changeDefaultLang(ee)}getDefaultLang(){return this.defaultLang}use(ee){if(ee===this.currentLang)return(0,ke.of)(this.translations[ee]);let fe=this.retrieveTranslations(ee);return void 0!==fe?(this.currentLang||(this.currentLang=ee),fe.pipe((0,kt.q)(1)).subscribe(Se=>{this.changeLang(ee)}),fe):(this.changeLang(ee),(0,ke.of)(this.translations[ee]))}retrieveTranslations(ee){let fe;return(void 0===this.translations[ee]||this.extend)&&(this._translationRequests[ee]=this._translationRequests[ee]||this.getTranslation(ee),fe=this._translationRequests[ee]),fe}getTranslation(ee){this.pending=!0;const fe=this.currentLoader.getTranslation(ee).pipe(ut(1),(0,kt.q)(1));return this.loadingTranslations=fe.pipe((0,Ut.U)(Se=>this.compiler.compileTranslations(Se,ee)),ut(1),(0,kt.q)(1)),this.loadingTranslations.subscribe({next:Se=>{this.translations[ee]=this.extend&&this.translations[ee]?Object.assign(Object.assign({},Se),this.translations[ee]):Se,this.updateLangs(),this.pending=!1},error:Se=>{this.pending=!1}}),fe}setTranslation(ee,fe,Se=!1){fe=this.compiler.compileTranslations(fe,ee),this.translations[ee]=(Se||this.extend)&&this.translations[ee]?vi(this.translations[ee],fe):fe,this.updateLangs(),this.onTranslationChange.emit({lang:ee,translations:this.translations[ee]})}getLangs(){return this.langs}addLangs(ee){ee.forEach(fe=>{-1===this.langs.indexOf(fe)&&this.langs.push(fe)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(ee,fe,Se){let nt;if(fe instanceof Array){let ft={},Lt=!1;for(let Qn of fe)ft[Qn]=this.getParsedResult(ee,Qn,Se),qe(ft[Qn])&&(Lt=!0);if(Lt){const Qn=fe.map(si=>qe(ft[si])?ft[si]:(0,ke.of)(ft[si]));return(0,pe.D)(Qn).pipe((0,Ut.U)(si=>{let on={};return si.forEach((yn,xn)=>{on[fe[xn]]=yn}),on}))}return ft}if(ee&&(nt=this.parser.interpolate(this.parser.getValue(ee,fe),Se)),void 0===nt&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(nt=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],fe),Se)),void 0===nt){let ft={key:fe,translateService:this};void 0!==Se&&(ft.interpolateParams=Se),nt=this.missingTranslationHandler.handle(ft)}return void 0!==nt?nt:fe}get(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,dn.b)(Se=>qe(Se=this.getParsedResult(Se,ee,fe))?Se:(0,ke.of)(Se)));{let Se=this.getParsedResult(this.translations[this.currentLang],ee,fe);return qe(Se)?Se:(0,ke.of)(Se)}}getStreamOnTranslationChange(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,Ie.P)(()=>this.get(ee,fe)),this.onTranslationChange.pipe((0,Pi.w)(Se=>{const nt=this.getParsedResult(Se.translations,ee,fe);return"function"==typeof nt.subscribe?nt:(0,ke.of)(nt)})))}stream(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,Ie.P)(()=>this.get(ee,fe)),this.onLangChange.pipe((0,Pi.w)(Se=>{const nt=this.getParsedResult(Se.translations,ee,fe);return qe(nt)?nt:(0,ke.of)(nt)})))}instant(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');let Se=this.getParsedResult(this.translations[this.currentLang],ee,fe);if(qe(Se)){if(ee instanceof Array){let nt={};return ee.forEach((ft,Lt)=>{nt[ee[Lt]]=ee[Lt]}),nt}return ee}return Se}set(ee,fe,Se=this.currentLang){this.translations[Se][ee]=this.compiler.compile(fe,Se),this.updateLangs(),this.onTranslationChange.emit({lang:Se,translations:this.translations[Se]})}changeLang(ee){this.currentLang=ee,this.onLangChange.emit({lang:ee,translations:this.translations[ee]}),null==this.defaultLang&&this.changeDefaultLang(ee)}changeDefaultLang(ee){this.defaultLang=ee,this.onDefaultLangChange.emit({lang:ee,translations:this.translations[ee]})}reloadLang(ee){return this.resetLang(ee),this.getTranslation(ee)}resetLang(ee){this._translationRequests[ee]=void 0,this.translations[ee]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let ee=window.navigator.languages?window.navigator.languages[0]:null;return ee=ee||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==ee?(-1!==ee.indexOf("-")&&(ee=ee.split("-")[0]),-1!==ee.indexOf("_")&&(ee=ee.split("_")[0]),ee):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let ee=window.navigator.languages?window.navigator.languages[0]:null;return ee=ee||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,ee}}return he.\u0275fac=function(ee){return new(ee||he)(S.LFG(Oi),S.LFG(hi),S.LFG(Kn),S.LFG(jt),S.LFG(Yn),S.LFG($i),S.LFG(Tn),S.LFG(Xi),S.LFG(pr))},he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})(),Xe=(()=>{class he{constructor(ee,fe){this.translate=ee,this._ref=fe,this.value=""}updateValue(ee,fe,Se){let nt=ft=>{this.value=void 0!==ft?ft:ee,this.lastKey=ee,this._ref.markForCheck()};if(Se){let ft=this.translate.getParsedResult(Se,ee,fe);qe(ft.subscribe)?ft.subscribe(nt):nt(ft)}this.translate.get(ee,fe).subscribe(nt)}transform(ee,...fe){if(!ee||!ee.length)return ee;if(xs(ee,this.lastKey)&&xs(fe,this.lastParams))return this.value;let Se;if(pi(fe[0])&&fe.length)if("string"==typeof fe[0]&&fe[0].length){let nt=fe[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Se=JSON.parse(nt)}catch(ft){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${fe[0]}`)}}else"object"==typeof fe[0]&&!Array.isArray(fe[0])&&(Se=fe[0]);return this.lastKey=ee,this.lastParams=fe,this.updateValue(ee,Se),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(nt=>{this.lastKey&&nt.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(ee,Se,nt.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(nt=>{this.lastKey&&(this.lastKey=null,this.updateValue(ee,Se,nt.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(ee,Se))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return he.\u0275fac=function(ee){return new(ee||he)(S.Y36(lr,16),S.Y36(S.sBO,16))},he.\u0275pipe=S.Yjl({name:"translate",type:he,pure:!1}),he.\u0275prov=S.Yz7({token:he,factory:he.\u0275fac}),he})(),Te=(()=>{class he{static forRoot(ee={}){return{ngModule:he,providers:[ee.loader||{provide:hi,useClass:xi},ee.compiler||{provide:Kn,useClass:ti},ee.parser||{provide:jt,useClass:kn},ee.missingTranslationHandler||{provide:Yn,useClass:ir},Oi,{provide:Tn,useValue:ee.isolate},{provide:$i,useValue:ee.useDefaultLang},{provide:Xi,useValue:ee.extend},{provide:pr,useValue:ee.defaultLanguage},lr]}}static forChild(ee={}){return{ngModule:he,providers:[ee.loader||{provide:hi,useClass:xi},ee.compiler||{provide:Kn,useClass:ti},ee.parser||{provide:jt,useClass:kn},ee.missingTranslationHandler||{provide:Yn,useClass:ir},{provide:Tn,useValue:ee.isolate},{provide:$i,useValue:ee.useDefaultLang},{provide:Xi,useValue:ee.extend},{provide:pr,useValue:ee.defaultLanguage},lr]}}}return he.\u0275fac=function(ee){return new(ee||he)},he.\u0275mod=S.oAB({type:he}),he.\u0275inj=S.cJS({}),he})()},9441:function(Jt,Qe){var a;void 0!==(a=function(){"use strict";function ke(Ce,ae,_e){var Re=new XMLHttpRequest;Re.open("GET",Ce),Re.responseType="blob",Re.onload=function(){Ue(Re.response,ae,_e)},Re.onerror=function(){console.error("could not download file")},Re.send()}function pe(Ce){var ae=new XMLHttpRequest;ae.open("HEAD",Ce,!1);try{ae.send()}catch(_e){}return 200<=ae.status&&299>=ae.status}function Ae(Ce){try{Ce.dispatchEvent(new MouseEvent("click"))}catch(_e){var ae=document.createEvent("MouseEvents");ae.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Ce.dispatchEvent(ae)}}var Ie="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Ue=Ie.saveAs||("object"!=typeof window||window!==Ie?function(){}:"download"in HTMLAnchorElement.prototype?function(Ce,ae,_e){var Re=Ie.URL||Ie.webkitURL,Ne=document.createElement("a");Ne.download=ae=ae||Ce.name||"download",Ne.rel="noopener","string"==typeof Ce?(Ne.href=Ce,Ne.origin===location.origin?Ae(Ne):pe(Ne.href)?ke(Ce,ae,_e):Ae(Ne,Ne.target="_blank")):(Ne.href=Re.createObjectURL(Ce),setTimeout(function(){Re.revokeObjectURL(Ne.href)},4e4),setTimeout(function(){Ae(Ne)},0))}:"msSaveOrOpenBlob"in navigator?function(Ce,ae,_e){if(ae=ae||Ce.name||"download","string"!=typeof Ce)navigator.msSaveOrOpenBlob(function qe(Ce,ae){return void 0===ae?ae={autoBom:!1}:"object"!=typeof ae&&(console.warn("Deprecated: Expected third argument to be a object"),ae={autoBom:!ae}),ae.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ce.type)?new Blob(["\ufeff",Ce],{type:Ce.type}):Ce}(Ce,_e),ae);else if(pe(Ce))ke(Ce,ae,_e);else{var Re=document.createElement("a");Re.href=Ce,Re.target="_blank",setTimeout(function(){Ae(Re)})}}:function(Ce,ae,_e,Re){if((Re=Re||open("","_blank"))&&(Re.document.title=Re.document.body.innerText="downloading..."),"string"==typeof Ce)return ke(Ce,ae,_e);var Ne="application/octet-stream"===Ce.type,et=/constructor/i.test(Ie.HTMLElement)||Ie.safari,rt=/CriOS\/[\d]+/.test(navigator.userAgent);if((rt||Ne&&et)&&"object"==typeof FileReader){var Ge=new FileReader;Ge.onloadend=function(){var Ot=Ge.result;Ot=rt?Ot:Ot.replace(/^data:[^;]*;/,"data:attachment/file;"),Re?Re.location.href=Ot:location=Ot,Re=null},Ge.readAsDataURL(Ce)}else{var Ft=Ie.URL||Ie.webkitURL,an=Ft.createObjectURL(Ce);Re?Re.location=an:location.href=an,Re=null,setTimeout(function(){Ft.revokeObjectURL(an)},4e4)}});Ie.saveAs=Ue.saveAs=Ue,Jt.exports=Ue}.apply(Qe,[]))&&(Jt.exports=a)},5386:(Jt,Qe,Q)=>{var S;!function(a,qe,ke,pe){"use strict";var Ge,Ae=["","webkit","Moz","MS","ms","o"],Ie=qe.createElement("div"),Ce=Math.round,ae=Math.abs,_e=Date.now;function Re(j,ne,ge){return setTimeout(Pt(j,ge),ne)}function Ne(j,ne,ge){return!!Array.isArray(j)&&(et(j,ge[ne],ge),!0)}function et(j,ne,ge){var Fe;if(j)if(j.forEach)j.forEach(ne,ge);else if(j.length!==pe)for(Fe=0;Fe<j.length;)ne.call(ge,j[Fe],Fe,j),Fe++;else for(Fe in j)j.hasOwnProperty(Fe)&&ne.call(ge,j[Fe],Fe,j)}function rt(j,ne,ge){var Fe="DEPRECATED METHOD: "+ne+"\n"+ge+" AT \n";return function(){var dt=new Error("get-stack-trace"),Bt=dt&&dt.stack?dt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Un=a.console&&(a.console.warn||a.console.log);return Un&&Un.call(a.console,Fe,Bt),j.apply(this,arguments)}}Ge="function"!=typeof Object.assign?function(ne){if(ne===pe||null===ne)throw new TypeError("Cannot convert undefined or null to object");for(var ge=Object(ne),Fe=1;Fe<arguments.length;Fe++){var dt=arguments[Fe];if(dt!==pe&&null!==dt)for(var Bt in dt)dt.hasOwnProperty(Bt)&&(ge[Bt]=dt[Bt])}return ge}:Object.assign;var Ft=rt(function(ne,ge,Fe){for(var dt=Object.keys(ge),Bt=0;Bt<dt.length;)(!Fe||Fe&&ne[dt[Bt]]===pe)&&(ne[dt[Bt]]=ge[dt[Bt]]),Bt++;return ne},"extend","Use `assign`."),an=rt(function(ne,ge){return Ft(ne,ge,!0)},"merge","Use `assign`.");function Ot(j,ne,ge){var dt,Fe=ne.prototype;(dt=j.prototype=Object.create(Fe)).constructor=j,dt._super=Fe,ge&&Ge(dt,ge)}function Pt(j,ne){return function(){return j.apply(ne,arguments)}}function Bi(j,ne){return"function"==typeof j?j.apply(ne&&ne[0]||pe,ne):j}function Cr(j,ne){return j===pe?ne:j}function fn(j,ne,ge){et(Rt(ne),function(Fe){j.addEventListener(Fe,ge,!1)})}function mt(j,ne,ge){et(Rt(ne),function(Fe){j.removeEventListener(Fe,ge,!1)})}function $e(j,ne){for(;j;){if(j==ne)return!0;j=j.parentNode}return!1}function tt(j,ne){return j.indexOf(ne)>-1}function Rt(j){return j.trim().split(/\s+/g)}function St(j,ne,ge){if(j.indexOf&&!ge)return j.indexOf(ne);for(var Fe=0;Fe<j.length;){if(ge&&j[Fe][ge]==ne||!ge&&j[Fe]===ne)return Fe;Fe++}return-1}function ut(j){return Array.prototype.slice.call(j,0)}function Ct(j,ne,ge){for(var Fe=[],dt=[],Bt=0;Bt<j.length;){var Un=ne?j[Bt][ne]:j[Bt];St(dt,Un)<0&&Fe.push(j[Bt]),dt[Bt]=Un,Bt++}return ge&&(Fe=ne?Fe.sort(function(gi,In){return gi[ne]>In[ne]}):Fe.sort()),Fe}function kt(j,ne){for(var ge,Fe,dt=ne[0].toUpperCase()+ne.slice(1),Bt=0;Bt<Ae.length;){if((Fe=(ge=Ae[Bt])?ge+dt:ne)in j)return Fe;Bt++}return pe}var Ut=1;function Pi(j){var ne=j.ownerDocument||j;return ne.defaultView||ne.parentWindow||a}var xi="ontouchstart"in a,Lr=kt(a,"PointerEvent")!==pe,Yn=xi&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ir="touch",pi="mouse",lr=["x","y"],os=["clientX","clientY"];function Xe(j,ne){var ge=this;this.manager=j,this.callback=ne,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(Fe){Bi(j.options.enable,[j])&&ge.handler(Fe)},this.init()}function Te(j,ne,ge){var Fe=ge.pointers.length,dt=ge.changedPointers.length,Bt=1&ne&&Fe-dt==0,Un=12&ne&&Fe-dt==0;ge.isFirst=!!Bt,ge.isFinal=!!Un,Bt&&(j.session={}),ge.eventType=ne,function he(j,ne){var ge=j.session,Fe=ne.pointers,dt=Fe.length;ge.firstInput||(ge.firstInput=fe(ne)),dt>1&&!ge.firstMultiple?ge.firstMultiple=fe(ne):1===dt&&(ge.firstMultiple=!1);var Bt=ge.firstInput,Un=ge.firstMultiple,Ai=Un?Un.center:Bt.center,gi=ne.center=Se(Fe);ne.timeStamp=_e(),ne.deltaTime=ne.timeStamp-Bt.timeStamp,ne.angle=Qn(Ai,gi),ne.distance=Lt(Ai,gi),function ve(j,ne){var ge=ne.center,Fe=j.offsetDelta||{},dt=j.prevDelta||{},Bt=j.prevInput||{};(1===ne.eventType||4===Bt.eventType)&&(dt=j.prevDelta={x:Bt.deltaX||0,y:Bt.deltaY||0},Fe=j.offsetDelta={x:ge.x,y:ge.y}),ne.deltaX=dt.x+(ge.x-Fe.x),ne.deltaY=dt.y+(ge.y-Fe.y)}(ge,ne),ne.offsetDirection=ft(ne.deltaX,ne.deltaY);var In=nt(ne.deltaTime,ne.deltaX,ne.deltaY);ne.overallVelocityX=In.x,ne.overallVelocityY=In.y,ne.overallVelocity=ae(In.x)>ae(In.y)?In.x:In.y,ne.scale=Un?function on(j,ne){return Lt(ne[0],ne[1],os)/Lt(j[0],j[1],os)}(Un.pointers,Fe):1,ne.rotation=Un?function si(j,ne){return Qn(ne[1],ne[0],os)+Qn(j[1],j[0],os)}(Un.pointers,Fe):0,ne.maxPointers=ge.prevInput?ne.pointers.length>ge.prevInput.maxPointers?ne.pointers.length:ge.prevInput.maxPointers:ne.pointers.length,function ee(j,ne){var dt,Bt,Un,Ai,ge=j.lastInterval||ne,Fe=ne.timeStamp-ge.timeStamp;if(8!=ne.eventType&&(Fe>25||ge.velocity===pe)){var gi=ne.deltaX-ge.deltaX,In=ne.deltaY-ge.deltaY,ds=nt(Fe,gi,In);Bt=ds.x,Un=ds.y,dt=ae(ds.x)>ae(ds.y)?ds.x:ds.y,Ai=ft(gi,In),j.lastInterval=ne}else dt=ge.velocity,Bt=ge.velocityX,Un=ge.velocityY,Ai=ge.direction;ne.velocity=dt,ne.velocityX=Bt,ne.velocityY=Un,ne.direction=Ai}(ge,ne);var ds=j.element;$e(ne.srcEvent.target,ds)&&(ds=ne.srcEvent.target),ne.target=ds}(j,ge),j.emit("hammer.input",ge),j.recognize(ge),j.session.prevInput=ge}function fe(j){for(var ne=[],ge=0;ge<j.pointers.length;)ne[ge]={clientX:Ce(j.pointers[ge].clientX),clientY:Ce(j.pointers[ge].clientY)},ge++;return{timeStamp:_e(),pointers:ne,center:Se(ne),deltaX:j.deltaX,deltaY:j.deltaY}}function Se(j){var ne=j.length;if(1===ne)return{x:Ce(j[0].clientX),y:Ce(j[0].clientY)};for(var ge=0,Fe=0,dt=0;dt<ne;)ge+=j[dt].clientX,Fe+=j[dt].clientY,dt++;return{x:Ce(ge/ne),y:Ce(Fe/ne)}}function nt(j,ne,ge){return{x:ne/j||0,y:ge/j||0}}function ft(j,ne){return j===ne?1:ae(j)>=ae(ne)?j<0?2:4:ne<0?8:16}function Lt(j,ne,ge){ge||(ge=lr);var Fe=ne[ge[0]]-j[ge[0]],dt=ne[ge[1]]-j[ge[1]];return Math.sqrt(Fe*Fe+dt*dt)}function Qn(j,ne,ge){return ge||(ge=lr),180*Math.atan2(ne[ge[1]]-j[ge[1]],ne[ge[0]]-j[ge[0]])/Math.PI}Xe.prototype={handler:function(){},init:function(){this.evEl&&fn(this.element,this.evEl,this.domHandler),this.evTarget&&fn(this.target,this.evTarget,this.domHandler),this.evWin&&fn(Pi(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&mt(this.element,this.evEl,this.domHandler),this.evTarget&&mt(this.target,this.evTarget,this.domHandler),this.evWin&&mt(Pi(this.element),this.evWin,this.domHandler)}};var yn={mousedown:1,mousemove:2,mouseup:4},xn="mousedown",Hn="mousemove mouseup";function Ki(){this.evEl=xn,this.evWin=Hn,this.pressed=!1,Xe.apply(this,arguments)}Ot(Ki,Xe,{handler:function(ne){var ge=yn[ne.type];1&ge&&0===ne.button&&(this.pressed=!0),2&ge&&1!==ne.which&&(ge=4),this.pressed&&(4&ge&&(this.pressed=!1),this.callback(this.manager,ge,{pointers:[ne],changedPointers:[ne],pointerType:pi,srcEvent:ne}))}});var Nn={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},wo={2:ir,3:"pen",4:pi,5:"kinect"},li="pointerdown",cr="pointermove pointerup pointercancel";function ni(){this.evEl=li,this.evWin=cr,Xe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(li="MSPointerDown",cr="MSPointerMove MSPointerUp MSPointerCancel"),Ot(ni,Xe,{handler:function(ne){var ge=this.store,Fe=!1,dt=ne.type.toLowerCase().replace("ms",""),Bt=Nn[dt],Un=wo[ne.pointerType]||ne.pointerType,Ai=Un==ir,gi=St(ge,ne.pointerId,"pointerId");1&Bt&&(0===ne.button||Ai)?gi<0&&(ge.push(ne),gi=ge.length-1):12&Bt&&(Fe=!0),!(gi<0)&&(ge[gi]=ne,this.callback(this.manager,Bt,{pointers:ge,changedPointers:[ne],pointerType:Un,srcEvent:ne}),Fe&&ge.splice(gi,1))}});var Jr={touchstart:1,touchmove:2,touchend:4,touchcancel:8},bs="touchstart",ws="touchstart touchmove touchend touchcancel";function as(){this.evTarget=bs,this.evWin=ws,this.started=!1,Xe.apply(this,arguments)}function ur(j,ne){var ge=ut(j.touches),Fe=ut(j.changedTouches);return 12&ne&&(ge=Ct(ge.concat(Fe),"identifier",!0)),[ge,Fe]}Ot(as,Xe,{handler:function(ne){var ge=Jr[ne.type];if(1===ge&&(this.started=!0),this.started){var Fe=ur.call(this,ne,ge);12&ge&&Fe[0].length-Fe[1].length==0&&(this.started=!1),this.callback(this.manager,ge,{pointers:Fe[0],changedPointers:Fe[1],pointerType:ir,srcEvent:ne})}}});var Ds={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Zo="touchstart touchmove touchend touchcancel";function Or(){this.evTarget=Zo,this.targetIds={},Xe.apply(this,arguments)}function Bs(j,ne){var ge=ut(j.touches),Fe=this.targetIds;if(3&ne&&1===ge.length)return Fe[ge[0].identifier]=!0,[ge,ge];var dt,Bt,Un=ut(j.changedTouches),Ai=[],gi=this.target;if(Bt=ge.filter(function(In){return $e(In.target,gi)}),1===ne)for(dt=0;dt<Bt.length;)Fe[Bt[dt].identifier]=!0,dt++;for(dt=0;dt<Un.length;)Fe[Un[dt].identifier]&&Ai.push(Un[dt]),12&ne&&delete Fe[Un[dt].identifier],dt++;return Ai.length?[Ct(Bt.concat(Ai),"identifier",!0),Ai]:void 0}function Hr(){Xe.apply(this,arguments);var j=Pt(this.handler,this);this.touch=new Or(this.manager,j),this.mouse=new Ki(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}function rr(j,ne){1&j?(this.primaryTouch=ne.changedPointers[0].identifier,Ni.call(this,ne)):12&j&&Ni.call(this,ne)}function Ni(j){var ne=j.changedPointers[0];if(ne.identifier===this.primaryTouch){var ge={x:ne.clientX,y:ne.clientY};this.lastTouches.push(ge);var Fe=this.lastTouches;setTimeout(function(){var Bt=Fe.indexOf(ge);Bt>-1&&Fe.splice(Bt,1)},2500)}}function Nr(j){for(var ne=j.srcEvent.clientX,ge=j.srcEvent.clientY,Fe=0;Fe<this.lastTouches.length;Fe++){var dt=this.lastTouches[Fe],Bt=Math.abs(ne-dt.x),Un=Math.abs(ge-dt.y);if(Bt<=25&&Un<=25)return!0}return!1}Ot(Or,Xe,{handler:function(ne){var ge=Ds[ne.type],Fe=Bs.call(this,ne,ge);!Fe||this.callback(this.manager,ge,{pointers:Fe[0],changedPointers:Fe[1],pointerType:ir,srcEvent:ne})}}),Ot(Hr,Xe,{handler:function(ne,ge,Fe){var Bt=Fe.pointerType==pi;if(!(Bt&&Fe.sourceCapabilities&&Fe.sourceCapabilities.firesTouchEvents)){if(Fe.pointerType==ir)rr.call(this,ge,Fe);else if(Bt&&Nr.call(this,Fe))return;this.callback(ne,ge,Fe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Kr=kt(Ie.style,"touchAction"),Rs=Kr!==pe,Yi="compute",dr="manipulation",Fi="none",gr="pan-x",Qr="pan-y",mr=function Ji(){if(!Rs)return!1;var j={},ne=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ge){j[ge]=!ne||a.CSS.supports("touch-action",ge)}),j}();function ls(j,ne){this.manager=j,this.set(ne)}function Fn(j){this.options=Ge({},this.defaults,j||{}),this.id=function dn(){return Ut++}(),this.manager=null,this.options.enable=Cr(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ki(j){return 16&j?"cancel":8&j?"end":4&j?"move":2&j?"start":""}function Ti(j){return 16==j?"down":8==j?"up":2==j?"left":4==j?"right":""}function hr(j,ne){var ge=ne.manager;return ge?ge.get(j):j}function er(){Fn.apply(this,arguments)}function un(){er.apply(this,arguments),this.pX=null,this.pY=null}function sr(){er.apply(this,arguments)}function zr(){Fn.apply(this,arguments),this._timer=null,this._input=null}function Wi(){er.apply(this,arguments)}function Sr(){er.apply(this,arguments)}function bi(){Fn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function br(j,ne){return(ne=ne||{}).recognizers=Cr(ne.recognizers,br.defaults.preset),new ci(j,ne)}function ci(j,ne){this.options=Ge({},br.defaults,ne||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=function Ee(j){return new(j.options.inputClass||(Lr?ni:Yn?Or:xi?Hr:Ki))(j,Te)}(this),this.touchAction=new ls(this,this.options.touchAction),Ms(this,!0),et(this.options.recognizers,function(ge){var Fe=this.add(new ge[0](ge[1]));ge[2]&&Fe.recognizeWith(ge[2]),ge[3]&&Fe.requireFailure(ge[3])},this)}function Ms(j,ne){var Fe,ge=j.element;ge.style&&(et(j.options.cssProps,function(dt,Bt){Fe=kt(ge.style,Bt),ne?(j.oldCssProps[Fe]=ge.style[Fe],ge.style[Fe]=dt):ge.style[Fe]=j.oldCssProps[Fe]||""}),ne||(j.oldCssProps={}))}ls.prototype={set:function(j){j==Yi&&(j=this.compute()),Rs&&this.manager.element.style&&mr[j]&&(this.manager.element.style[Kr]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return et(this.manager.recognizers,function(ne){Bi(ne.options.enable,[ne])&&(j=j.concat(ne.getTouchAction()))}),function cs(j){if(tt(j,Fi))return Fi;var ne=tt(j,gr),ge=tt(j,Qr);return ne&&ge?Fi:ne||ge?ne?gr:Qr:tt(j,dr)?dr:"auto"}(j.join(" "))},preventDefaults:function(j){var ne=j.srcEvent,ge=j.offsetDirection;if(!this.manager.session.prevented){var Fe=this.actions,dt=tt(Fe,Fi)&&!mr[Fi],Bt=tt(Fe,Qr)&&!mr[Qr],Un=tt(Fe,gr)&&!mr[gr];if(dt&&1===j.pointers.length&&j.distance<2&&j.deltaTime<250)return;return Un&&Bt||!(dt||Bt&&6&ge||Un&&24&ge)?void 0:this.preventSrc(ne)}ne.preventDefault()},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}},Fn.prototype={defaults:{},set:function(j){return Ge(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(Ne(j,"recognizeWith",this))return this;var ne=this.simultaneous;return ne[(j=hr(j,this)).id]||(ne[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return Ne(j,"dropRecognizeWith",this)||(j=hr(j,this),delete this.simultaneous[j.id]),this},requireFailure:function(j){if(Ne(j,"requireFailure",this))return this;var ne=this.requireFail;return-1===St(ne,j=hr(j,this))&&(ne.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(Ne(j,"dropRequireFailure",this))return this;j=hr(j,this);var ne=St(this.requireFail,j);return ne>-1&&this.requireFail.splice(ne,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){var ne=this,ge=this.state;function Fe(dt){ne.manager.emit(dt,j)}ge<8&&Fe(ne.options.event+ki(ge)),Fe(ne.options.event),j.additionalEvent&&Fe(j.additionalEvent),ge>=8&&Fe(ne.options.event+ki(ge))},tryEmit:function(j){if(this.canEmit())return this.emit(j);this.state=32},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(33&this.requireFail[j].state))return!1;j++}return!0},recognize:function(j){var ne=Ge({},j);if(!Bi(this.options.enable,[this,ne]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(ne),30&this.state&&this.tryEmit(ne)},process:function(j){},getTouchAction:function(){},reset:function(){}},Ot(er,Fn,{defaults:{pointers:1},attrTest:function(j){var ne=this.options.pointers;return 0===ne||j.pointers.length===ne},process:function(j){var ne=this.state,ge=j.eventType,Fe=6&ne,dt=this.attrTest(j);return Fe&&(8&ge||!dt)?16|ne:Fe||dt?4&ge?8|ne:2&ne?4|ne:2:32}}),Ot(un,er,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var j=this.options.direction,ne=[];return 6&j&&ne.push(Qr),24&j&&ne.push(gr),ne},directionTest:function(j){var ne=this.options,ge=!0,Fe=j.distance,dt=j.direction,Bt=j.deltaX,Un=j.deltaY;return dt&ne.direction||(6&ne.direction?(dt=0===Bt?1:Bt<0?2:4,ge=Bt!=this.pX,Fe=Math.abs(j.deltaX)):(dt=0===Un?1:Un<0?8:16,ge=Un!=this.pY,Fe=Math.abs(j.deltaY))),j.direction=dt,ge&&Fe>ne.threshold&&dt&ne.direction},attrTest:function(j){return er.prototype.attrTest.call(this,j)&&(2&this.state||!(2&this.state)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var ne=Ti(j.direction);ne&&(j.additionalEvent=this.options.event+ne),this._super.emit.call(this,j)}}),Ot(sr,er,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Fi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||2&this.state)},emit:function(j){1!==j.scale&&(j.additionalEvent=this.options.event+(j.scale<1?"in":"out")),this._super.emit.call(this,j)}}),Ot(zr,Fn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(j){var ne=this.options,ge=j.pointers.length===ne.pointers,Fe=j.distance<ne.threshold,dt=j.deltaTime>ne.time;if(this._input=j,!Fe||!ge||12&j.eventType&&!dt)this.reset();else if(1&j.eventType)this.reset(),this._timer=Re(function(){this.state=8,this.tryEmit()},ne.time,this);else if(4&j.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(j){8===this.state&&(j&&4&j.eventType?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=_e(),this.manager.emit(this.options.event,this._input)))}}),Ot(Wi,er,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Fi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||2&this.state)}}),Ot(Sr,er,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return un.prototype.getTouchAction.call(this)},attrTest:function(j){var ge,ne=this.options.direction;return 30&ne?ge=j.overallVelocity:6&ne?ge=j.overallVelocityX:24&ne&&(ge=j.overallVelocityY),this._super.attrTest.call(this,j)&&ne&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&ae(ge)>this.options.velocity&&4&j.eventType},emit:function(j){var ne=Ti(j.offsetDirection);ne&&this.manager.emit(this.options.event+ne,j),this.manager.emit(this.options.event,j)}}),Ot(bi,Fn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[dr]},process:function(j){var ne=this.options,ge=j.pointers.length===ne.pointers,Fe=j.distance<ne.threshold,dt=j.deltaTime<ne.time;if(this.reset(),1&j.eventType&&0===this.count)return this.failTimeout();if(Fe&&dt&&ge){if(4!=j.eventType)return this.failTimeout();var Bt=!this.pTime||j.timeStamp-this.pTime<ne.interval,Un=!this.pCenter||Lt(this.pCenter,j.center)<ne.posThreshold;if(this.pTime=j.timeStamp,this.pCenter=j.center,Un&&Bt?this.count+=1:this.count=1,this._input=j,0==this.count%ne.taps)return this.hasRequireFailures()?(this._timer=Re(function(){this.state=8,this.tryEmit()},ne.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Re(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),br.VERSION="2.0.7",br.defaults={domEvents:!1,touchAction:Yi,enable:!0,inputTarget:null,inputClass:null,preset:[[Wi,{enable:!1}],[sr,{enable:!1},["rotate"]],[Sr,{direction:6}],[un,{direction:6},["swipe"]],[bi],[bi,{event:"doubletap",taps:2},["tap"]],[zr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ci.prototype={set:function(j){return Ge(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?2:1},recognize:function(j){var ne=this.session;if(!ne.stopped){this.touchAction.preventDefaults(j);var ge,Fe=this.recognizers,dt=ne.curRecognizer;(!dt||dt&&8&dt.state)&&(dt=ne.curRecognizer=null);for(var Bt=0;Bt<Fe.length;)ge=Fe[Bt],2===ne.stopped||dt&&ge!=dt&&!ge.canRecognizeWith(dt)?ge.reset():ge.recognize(j),!dt&&14&ge.state&&(dt=ne.curRecognizer=ge),Bt++}},get:function(j){if(j instanceof Fn)return j;for(var ne=this.recognizers,ge=0;ge<ne.length;ge++)if(ne[ge].options.event==j)return ne[ge];return null},add:function(j){if(Ne(j,"add",this))return this;var ne=this.get(j.options.event);return ne&&this.remove(ne),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(Ne(j,"remove",this))return this;if(j=this.get(j)){var ne=this.recognizers,ge=St(ne,j);-1!==ge&&(ne.splice(ge,1),this.touchAction.update())}return this},on:function(j,ne){if(j!==pe&&ne!==pe){var ge=this.handlers;return et(Rt(j),function(Fe){ge[Fe]=ge[Fe]||[],ge[Fe].push(ne)}),this}},off:function(j,ne){if(j!==pe){var ge=this.handlers;return et(Rt(j),function(Fe){ne?ge[Fe]&&ge[Fe].splice(St(ge[Fe],ne),1):delete ge[Fe]}),this}},emit:function(j,ne){this.options.domEvents&&function us(j,ne){var ge=qe.createEvent("Event");ge.initEvent(j,!0,!0),ge.gesture=ne,ne.target.dispatchEvent(ge)}(j,ne);var ge=this.handlers[j]&&this.handlers[j].slice();if(ge&&ge.length){ne.type=j,ne.preventDefault=function(){ne.srcEvent.preventDefault()};for(var Fe=0;Fe<ge.length;)ge[Fe](ne),Fe++}},destroy:function(){this.element&&Ms(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ge(br,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:ci,Input:Xe,TouchAction:ls,TouchInput:Or,MouseInput:Ki,PointerEventInput:ni,TouchMouseInput:Hr,SingleTouchInput:as,Recognizer:Fn,AttrRecognizer:er,Tap:bi,Pan:un,Swipe:Sr,Pinch:sr,Rotate:Wi,Press:zr,on:fn,off:mt,each:et,merge:an,extend:Ft,assign:Ge,inherit:Ot,bindFn:Pt,prefixed:kt}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=br,(S=function(){return br}.call(Qe,Q,Qe,Jt))!==pe&&(Jt.exports=S)}(window,document)},591:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{X:()=>qe});var S=Q(8929),a=Q(5279);class qe extends S.xQ{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const Ae=super._subscribe(pe);return Ae&&!Ae.closed&&pe.next(this._value),Ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.N;return this._value}next(pe){super.next(this._value=pe)}}},1869:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{d:()=>a});var S=Q(3489);class a extends S.L{constructor(ke,pe,Ae){super(),this.parent=ke,this.outerValue=pe,this.outerIndex=Ae,this.index=0}_next(ke){this.parent.notifyNext(this.outerValue,ke,this.outerIndex,this.index++,this)}_error(ke){this.parent.notifyError(ke,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},2916:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{y:()=>_e});var S=Q(3489),qe=Q(7668),ke=Q(3292),Ae=Q(3821),Ie=Q(7876);var ae=Q(2830);let _e=(()=>{class Ne{constructor(rt){this._isScalar=!1,rt&&(this._subscribe=rt)}lift(rt){const Ge=new Ne;return Ge.source=this,Ge.operator=rt,Ge}subscribe(rt,Ge,Ft){const{operator:an}=this,Ot=function pe(Ne,et,rt){if(Ne){if(Ne instanceof S.L)return Ne;if(Ne[qe.b])return Ne[qe.b]()}return Ne||et||rt?new S.L(Ne,et,rt):new S.L(ke.c)}(rt,Ge,Ft);if(Ot.add(an?an.call(Ot,this.source):this.source||ae.v.useDeprecatedSynchronousErrorHandling&&!Ot.syncErrorThrowable?this._subscribe(Ot):this._trySubscribe(Ot)),ae.v.useDeprecatedSynchronousErrorHandling&&Ot.syncErrorThrowable&&(Ot.syncErrorThrowable=!1,Ot.syncErrorThrown))throw Ot.syncErrorValue;return Ot}_trySubscribe(rt){try{return this._subscribe(rt)}catch(Ge){ae.v.useDeprecatedSynchronousErrorHandling&&(rt.syncErrorThrown=!0,rt.syncErrorValue=Ge),function a(Ne){for(;Ne;){const{closed:et,destination:rt,isStopped:Ge}=Ne;if(et||Ge)return!1;Ne=rt&&rt instanceof S.L?rt:null}return!0}(rt)?rt.error(Ge):console.warn(Ge)}}forEach(rt,Ge){return new(Ge=Re(Ge))((Ft,an)=>{let Ot;Ot=this.subscribe(Pt=>{try{rt(Pt)}catch(Bi){an(Bi),Ot&&Ot.unsubscribe()}},an,Ft)})}_subscribe(rt){const{source:Ge}=this;return Ge&&Ge.subscribe(rt)}[Ae.L](){return this}pipe(...rt){return 0===rt.length?this:function Ce(Ne){return Ne?1===Ne.length?Ne[0]:function(rt){return Ne.reduce((Ge,Ft)=>Ft(Ge),rt)}:Ie.Z}(rt)(this)}toPromise(rt){return new(rt=Re(rt))((Ge,Ft)=>{let an;this.subscribe(Ot=>an=Ot,Ot=>Ft(Ot),()=>Ge(an))})}}return Ne.create=et=>new Ne(et),Ne})();function Re(Ne){if(Ne||(Ne=ae.v.Promise||Promise),!Ne)throw new Error("no Promise impl found");return Ne}},3292:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{c:()=>qe});var S=Q(2830),a=Q(2782);const qe={closed:!0,next(ke){},error(ke){if(S.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,a.z)(ke)},complete(){}}},826:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{L:()=>a});var S=Q(3489);class a extends S.L{notifyNext(ke,pe,Ae,Ie,Ue){this.destination.next(pe)}notifyError(ke,pe){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},8929:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{Yc:()=>Ie,xQ:()=>Ue});var S=Q(2916),a=Q(3489),qe=Q(2654),ke=Q(5279),pe=Q(5283),Ae=Q(7668);class Ie extends a.L{constructor(_e){super(_e),this.destination=_e}}let Ue=(()=>{class ae extends S.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ae.b](){return new Ie(this)}lift(Re){const Ne=new Ce(this,this);return Ne.operator=Re,Ne}next(Re){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:Ne}=this,et=Ne.length,rt=Ne.slice();for(let Ge=0;Ge<et;Ge++)rt[Ge].next(Re)}}error(Re){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=Re,this.isStopped=!0;const{observers:Ne}=this,et=Ne.length,rt=Ne.slice();for(let Ge=0;Ge<et;Ge++)rt[Ge].error(Re);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:Re}=this,Ne=Re.length,et=Re.slice();for(let rt=0;rt<Ne;rt++)et[rt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Re){if(this.closed)throw new ke.N;return super._trySubscribe(Re)}_subscribe(Re){if(this.closed)throw new ke.N;return this.hasError?(Re.error(this.thrownError),qe.w.EMPTY):this.isStopped?(Re.complete(),qe.w.EMPTY):(this.observers.push(Re),new pe.W(this,Re))}asObservable(){const Re=new S.y;return Re.source=this,Re}}return ae.create=(_e,Re)=>new Ce(_e,Re),ae})();class Ce extends Ue{constructor(_e,Re){super(),this.destination=_e,this.source=Re}next(_e){const{destination:Re}=this;Re&&Re.next&&Re.next(_e)}error(_e){const{destination:Re}=this;Re&&Re.error&&this.destination.error(_e)}complete(){const{destination:_e}=this;_e&&_e.complete&&this.destination.complete()}_subscribe(_e){const{source:Re}=this;return Re?this.source.subscribe(_e):qe.w.EMPTY}}},5283:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{W:()=>a});var S=Q(2654);class a extends S.w{constructor(ke,pe){super(),this.subject=ke,this.subscriber=pe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,pe=ke.observers;if(this.subject=null,!pe||0===pe.length||ke.isStopped||ke.closed)return;const Ae=pe.indexOf(this.subscriber);-1!==Ae&&pe.splice(Ae,1)}}},3489:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{L:()=>Ie});var S=Q(7043),a=Q(3292),qe=Q(2654),ke=Q(7668),pe=Q(2830),Ae=Q(2782);class Ie extends qe.w{constructor(ae,_e,Re){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.c;break;case 1:if(!ae){this.destination=a.c;break}if("object"==typeof ae){ae instanceof Ie?(this.syncErrorThrowable=ae.syncErrorThrowable,this.destination=ae,ae.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ue(this,ae));break}default:this.syncErrorThrowable=!0,this.destination=new Ue(this,ae,_e,Re)}}[ke.b](){return this}static create(ae,_e,Re){const Ne=new Ie(ae,_e,Re);return Ne.syncErrorThrowable=!1,Ne}next(ae){this.isStopped||this._next(ae)}error(ae){this.isStopped||(this.isStopped=!0,this._error(ae))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ae){this.destination.next(ae)}_error(ae){this.destination.error(ae),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ae}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ae,this}}class Ue extends Ie{constructor(ae,_e,Re,Ne){super(),this._parentSubscriber=ae;let et,rt=this;(0,S.m)(_e)?et=_e:_e&&(et=_e.next,Re=_e.error,Ne=_e.complete,_e!==a.c&&(rt=Object.create(_e),(0,S.m)(rt.unsubscribe)&&this.add(rt.unsubscribe.bind(rt)),rt.unsubscribe=this.unsubscribe.bind(this))),this._context=rt,this._next=et,this._error=Re,this._complete=Ne}next(ae){if(!this.isStopped&&this._next){const{_parentSubscriber:_e}=this;pe.v.useDeprecatedSynchronousErrorHandling&&_e.syncErrorThrowable?this.__tryOrSetError(_e,this._next,ae)&&this.unsubscribe():this.__tryOrUnsub(this._next,ae)}}error(ae){if(!this.isStopped){const{_parentSubscriber:_e}=this,{useDeprecatedSynchronousErrorHandling:Re}=pe.v;if(this._error)Re&&_e.syncErrorThrowable?(this.__tryOrSetError(_e,this._error,ae),this.unsubscribe()):(this.__tryOrUnsub(this._error,ae),this.unsubscribe());else if(_e.syncErrorThrowable)Re?(_e.syncErrorValue=ae,_e.syncErrorThrown=!0):(0,Ae.z)(ae),this.unsubscribe();else{if(this.unsubscribe(),Re)throw ae;(0,Ae.z)(ae)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ae}=this;if(this._complete){const _e=()=>this._complete.call(this._context);pe.v.useDeprecatedSynchronousErrorHandling&&ae.syncErrorThrowable?(this.__tryOrSetError(ae,_e),this.unsubscribe()):(this.__tryOrUnsub(_e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ae,_e){try{ae.call(this._context,_e)}catch(Re){if(this.unsubscribe(),pe.v.useDeprecatedSynchronousErrorHandling)throw Re;(0,Ae.z)(Re)}}__tryOrSetError(ae,_e,Re){if(!pe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{_e.call(this._context,Re)}catch(Ne){return pe.v.useDeprecatedSynchronousErrorHandling?(ae.syncErrorValue=Ne,ae.syncErrorThrown=!0,!0):((0,Ae.z)(Ne),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ae}=this;this._context=null,this._parentSubscriber=null,ae.unsubscribe()}}},2654:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{w:()=>Ae});var S=Q(6688),a=Q(7830),qe=Q(7043);const pe=(()=>{function Ue(Ce){return Error.call(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((ae,_e)=>`${_e+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce,this}return Ue.prototype=Object.create(Error.prototype),Ue})();class Ae{constructor(Ce){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Ce&&(this._unsubscribe=Ce)}unsubscribe(){let Ce;if(this.closed)return;let{_parentOrParents:ae,_unsubscribe:_e,_subscriptions:Re}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ae instanceof Ae)ae.remove(this);else if(null!==ae)for(let Ne=0;Ne<ae.length;++Ne)ae[Ne].remove(this);if((0,qe.m)(_e))try{_e.call(this)}catch(Ne){Ce=Ne instanceof pe?Ie(Ne.errors):[Ne]}if((0,S.k)(Re)){let Ne=-1,et=Re.length;for(;++Ne<et;){const rt=Re[Ne];if((0,a.K)(rt))try{rt.unsubscribe()}catch(Ge){Ce=Ce||[],Ge instanceof pe?Ce=Ce.concat(Ie(Ge.errors)):Ce.push(Ge)}}}if(Ce)throw new pe(Ce)}add(Ce){let ae=Ce;if(!Ce)return Ae.EMPTY;switch(typeof Ce){case"function":ae=new Ae(Ce);case"object":if(ae===this||ae.closed||"function"!=typeof ae.unsubscribe)return ae;if(this.closed)return ae.unsubscribe(),ae;if(!(ae instanceof Ae)){const Ne=ae;ae=new Ae,ae._subscriptions=[Ne]}break;default:throw new Error("unrecognized teardown "+Ce+" added to Subscription.")}let{_parentOrParents:_e}=ae;if(null===_e)ae._parentOrParents=this;else if(_e instanceof Ae){if(_e===this)return ae;ae._parentOrParents=[_e,this]}else{if(-1!==_e.indexOf(this))return ae;_e.push(this)}const Re=this._subscriptions;return null===Re?this._subscriptions=[ae]:Re.push(ae),ae}remove(Ce){const ae=this._subscriptions;if(ae){const _e=ae.indexOf(Ce);-1!==_e&&ae.splice(_e,1)}}}var Ue;function Ie(Ue){return Ue.reduce((Ce,ae)=>Ce.concat(ae instanceof pe?ae.errors:ae),[])}Ae.EMPTY=((Ue=new Ae).closed=!0,Ue)},2830:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{v:()=>a});let S=!1;const a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(qe){if(qe){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else S&&console.log("RxJS: Back to a better error behavior. Thank you. <3");S=qe},get useDeprecatedSynchronousErrorHandling(){return S}}},1762:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{c:()=>pe,N:()=>Ae});var S=Q(8929),a=Q(2916),qe=Q(2654),ke=Q(4327);class pe extends a.y{constructor(_e,Re){super(),this.source=_e,this.subjectFactory=Re,this._refCount=0,this._isComplete=!1}_subscribe(_e){return this.getSubject().subscribe(_e)}getSubject(){const _e=this._subject;return(!_e||_e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let _e=this._connection;return _e||(this._isComplete=!1,_e=this._connection=new qe.w,_e.add(this.source.subscribe(new Ie(this.getSubject(),this))),_e.closed&&(this._connection=null,_e=qe.w.EMPTY)),_e}refCount(){return(0,ke.x)()(this)}}const Ae=(()=>{const ae=pe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ae._subscribe},_isComplete:{value:ae._isComplete,writable:!0},getSubject:{value:ae.getSubject},connect:{value:ae.connect},refCount:{value:ae.refCount}}})();class Ie extends S.Yc{constructor(_e,Re){super(_e),this.connectable=Re}_error(_e){this._unsubscribe(),super._error(_e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const _e=this.connectable;if(_e){this.connectable=null;const Re=_e._connection;_e._refCount=0,_e._subject=null,_e._connection=null,Re&&Re.unsubscribe()}}}},6053:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{aj:()=>Ie});var S=Q(2866),a=Q(6688),qe=Q(826),ke=Q(9054),pe=Q(3009);const Ae={};function Ie(...ae){let _e=null,Re=null;return(0,S.K)(ae[ae.length-1])&&(Re=ae.pop()),"function"==typeof ae[ae.length-1]&&(_e=ae.pop()),1===ae.length&&(0,a.k)(ae[0])&&(ae=ae[0]),(0,pe.n)(ae,Re).lift(new Ue(_e))}class Ue{constructor(_e){this.resultSelector=_e}call(_e,Re){return Re.subscribe(new Ce(_e,this.resultSelector))}}class Ce extends qe.L{constructor(_e,Re){super(_e),this.resultSelector=Re,this.active=0,this.values=[],this.observables=[]}_next(_e){this.values.push(Ae),this.observables.push(_e)}_complete(){const _e=this.observables,Re=_e.length;if(0===Re)this.destination.complete();else{this.active=Re,this.toRespond=Re;for(let Ne=0;Ne<Re;Ne++){const et=_e[Ne];this.add((0,ke.D)(this,et,et,Ne))}}}notifyComplete(_e){0==(this.active-=1)&&this.destination.complete()}notifyNext(_e,Re,Ne,et,rt){const Ge=this.values,an=this.toRespond?Ge[Ne]===Ae?--this.toRespond:this.toRespond:0;Ge[Ne]=Re,0===an&&(this.resultSelector?this._tryResultSelector(Ge):this.destination.next(Ge.slice()))}_tryResultSelector(_e){let Re;try{Re=this.resultSelector.apply(this,_e)}catch(Ne){return void this.destination.error(Ne)}this.destination.next(Re)}}},1221:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{z:()=>ke});var S=Q(1086),a=Q(9146);function ke(...pe){return function qe(){return(0,a.J)(1)}()((0,S.of)(...pe))}},8514:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{P:()=>ke});var S=Q(2916),a=Q(5254),qe=Q(8896);function ke(pe){return new S.y(Ae=>{let Ie;try{Ie=pe()}catch(Ce){return void Ae.error(Ce)}return(Ie?(0,a.D)(Ie):(0,qe.c)()).subscribe(Ae)})}},8896:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{E:()=>a,c:()=>qe});var S=Q(2916);const a=new S.y(pe=>pe.complete());function qe(pe){return pe?function ke(pe){return new S.y(Ae=>pe.schedule(()=>Ae.complete()))}(pe):a}},567:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{D:()=>Ae});var S=Q(2916),a=Q(6688),qe=Q(4850),ke=Q(7830),pe=Q(5254);function Ae(...Ue){if(1===Ue.length){const Ce=Ue[0];if((0,a.k)(Ce))return Ie(Ce,null);if((0,ke.K)(Ce)&&Object.getPrototypeOf(Ce)===Object.prototype){const ae=Object.keys(Ce);return Ie(ae.map(_e=>Ce[_e]),ae)}}if("function"==typeof Ue[Ue.length-1]){const Ce=Ue.pop();return Ie(Ue=1===Ue.length&&(0,a.k)(Ue[0])?Ue[0]:Ue,null).pipe((0,qe.U)(ae=>Ce(...ae)))}return Ie(Ue,null)}function Ie(Ue,Ce){return new S.y(ae=>{const _e=Ue.length;if(0===_e)return void ae.complete();const Re=new Array(_e);let Ne=0,et=0;for(let rt=0;rt<_e;rt++){const Ge=(0,pe.D)(Ue[rt]);let Ft=!1;ae.add(Ge.subscribe({next:an=>{Ft||(Ft=!0,et++),Re[rt]=an},error:an=>ae.error(an),complete:()=>{Ne++,(Ne===_e||!Ft)&&(et===_e&&ae.next(Ce?Ce.reduce((an,Ot,Pt)=>(an[Ot]=Re[Pt],an),{}):Re),ae.complete())}}))}})}},5254:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{D:()=>rt});var S=Q(2916),a=Q(9249),qe=Q(2654),ke=Q(3821),Ie=Q(6454),Ue=Q(5430),_e=Q(8955),Re=Q(8515);function rt(Ge,Ft){return Ft?function et(Ge,Ft){if(null!=Ge){if(function ae(Ge){return Ge&&"function"==typeof Ge[ke.L]}(Ge))return function pe(Ge,Ft){return new S.y(an=>{const Ot=new qe.w;return Ot.add(Ft.schedule(()=>{const Pt=Ge[ke.L]();Ot.add(Pt.subscribe({next(Bi){Ot.add(Ft.schedule(()=>an.next(Bi)))},error(Bi){Ot.add(Ft.schedule(()=>an.error(Bi)))},complete(){Ot.add(Ft.schedule(()=>an.complete()))}}))})),Ot})}(Ge,Ft);if((0,_e.t)(Ge))return function Ae(Ge,Ft){return new S.y(an=>{const Ot=new qe.w;return Ot.add(Ft.schedule(()=>Ge.then(Pt=>{Ot.add(Ft.schedule(()=>{an.next(Pt),Ot.add(Ft.schedule(()=>an.complete()))}))},Pt=>{Ot.add(Ft.schedule(()=>an.error(Pt)))}))),Ot})}(Ge,Ft);if((0,Re.z)(Ge))return(0,Ie.r)(Ge,Ft);if(function Ne(Ge){return Ge&&"function"==typeof Ge[Ue.hZ]}(Ge)||"string"==typeof Ge)return function Ce(Ge,Ft){if(!Ge)throw new Error("Iterable cannot be null");return new S.y(an=>{const Ot=new qe.w;let Pt;return Ot.add(()=>{Pt&&"function"==typeof Pt.return&&Pt.return()}),Ot.add(Ft.schedule(()=>{Pt=Ge[Ue.hZ](),Ot.add(Ft.schedule(function(){if(an.closed)return;let Bi,Cr;try{const fn=Pt.next();Bi=fn.value,Cr=fn.done}catch(fn){return void an.error(fn)}Cr?an.complete():(an.next(Bi),this.schedule())}))})),Ot})}(Ge,Ft)}throw new TypeError((null!==Ge&&typeof Ge||Ge)+" is not observable")}(Ge,Ft):Ge instanceof S.y?Ge:new S.y((0,a.s)(Ge))}},3009:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{n:()=>ke});var S=Q(2916),a=Q(3650),qe=Q(6454);function ke(pe,Ae){return Ae?(0,qe.r)(pe,Ae):new S.y((0,a.V)(pe))}},1086:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{of:()=>ke});var S=Q(2866),a=Q(3009),qe=Q(6454);function ke(...pe){let Ae=pe[pe.length-1];return(0,S.K)(Ae)?(pe.pop(),(0,qe.r)(pe,Ae)):(0,a.n)(pe)}},7221:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{K:()=>ke});var S=Q(826),a=Q(1869),qe=Q(9054);function ke(Ie){return function(Ce){const ae=new pe(Ie),_e=Ce.lift(ae);return ae.caught=_e}}class pe{constructor(Ue){this.selector=Ue}call(Ue,Ce){return Ce.subscribe(new Ae(Ue,this.selector,this.caught))}}class Ae extends S.L{constructor(Ue,Ce,ae){super(Ue),this.selector=Ce,this.caught=ae}error(Ue){if(!this.isStopped){let Ce;try{Ce=this.selector(Ue,this.caught)}catch(Re){return void super.error(Re)}this._unsubscribeAndRecycle();const ae=new a.d(this,void 0,void 0);this.add(ae);const _e=(0,qe.D)(this,Ce,void 0,void 0,ae);_e!==ae&&this.add(_e)}}}},1406:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{b:()=>a});var S=Q(1709);function a(qe,ke){return(0,S.zg)(qe,ke,1)}},2198:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{h:()=>a});var S=Q(3489);function a(pe,Ae){return function(Ue){return Ue.lift(new qe(pe,Ae))}}class qe{constructor(Ae,Ie){this.predicate=Ae,this.thisArg=Ie}call(Ae,Ie){return Ie.subscribe(new ke(Ae,this.predicate,this.thisArg))}}class ke extends S.L{constructor(Ae,Ie,Ue){super(Ae),this.predicate=Ie,this.thisArg=Ue,this.count=0}_next(Ae){let Ie;try{Ie=this.predicate.call(this.thisArg,Ae,this.count++)}catch(Ue){return void this.destination.error(Ue)}Ie&&this.destination.next(Ae)}}},4850:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{U:()=>a});var S=Q(3489);function a(pe,Ae){return function(Ue){if("function"!=typeof pe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ue.lift(new qe(pe,Ae))}}class qe{constructor(Ae,Ie){this.project=Ae,this.thisArg=Ie}call(Ae,Ie){return Ie.subscribe(new ke(Ae,this.project,this.thisArg))}}class ke extends S.L{constructor(Ae,Ie,Ue){super(Ae),this.project=Ie,this.count=0,this.thisArg=Ue||this}_next(Ae){let Ie;try{Ie=this.project.call(this.thisArg,Ae,this.count++)}catch(Ue){return void this.destination.error(Ue)}this.destination.next(Ie)}}},9146:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{J:()=>qe});var S=Q(1709),a=Q(5379);function qe(ke=Number.POSITIVE_INFINITY){return(0,S.zg)(a.y,ke)}},1709:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{zg:()=>Ae});var S=Q(9054),a=Q(826),qe=Q(1869),ke=Q(4850),pe=Q(5254);function Ae(Ce,ae,_e=Number.POSITIVE_INFINITY){return"function"==typeof ae?Re=>Re.pipe(Ae((Ne,et)=>(0,pe.D)(Ce(Ne,et)).pipe((0,ke.U)((rt,Ge)=>ae(Ne,rt,et,Ge))),_e)):("number"==typeof ae&&(_e=ae),Re=>Re.lift(new Ie(Ce,_e)))}class Ie{constructor(ae,_e=Number.POSITIVE_INFINITY){this.project=ae,this.concurrent=_e}call(ae,_e){return _e.subscribe(new Ue(ae,this.project,this.concurrent))}}class Ue extends a.L{constructor(ae,_e,Re=Number.POSITIVE_INFINITY){super(ae),this.project=_e,this.concurrent=Re,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ae){this.active<this.concurrent?this._tryNext(ae):this.buffer.push(ae)}_tryNext(ae){let _e;const Re=this.index++;try{_e=this.project(ae,Re)}catch(Ne){return void this.destination.error(Ne)}this.active++,this._innerSub(_e,ae,Re)}_innerSub(ae,_e,Re){const Ne=new qe.d(this,_e,Re),et=this.destination;et.add(Ne);const rt=(0,S.D)(this,ae,void 0,void 0,Ne);rt!==Ne&&et.add(rt)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ae,_e,Re,Ne,et){this.destination.next(_e)}notifyComplete(ae){const _e=this.buffer;this.remove(ae),this.active--,_e.length>0?this._next(_e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},4327:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{x:()=>a});var S=Q(3489);function a(){return function(Ae){return Ae.lift(new qe(Ae))}}class qe{constructor(Ae){this.connectable=Ae}call(Ae,Ie){const{connectable:Ue}=this;Ue._refCount++;const Ce=new ke(Ae,Ue),ae=Ie.subscribe(Ce);return Ce.closed||(Ce.connection=Ue.connect()),ae}}class ke extends S.L{constructor(Ae,Ie){super(Ae),this.connectable=Ie}_unsubscribe(){const{connectable:Ae}=this;if(!Ae)return void(this.connection=null);this.connectable=null;const Ie=Ae._refCount;if(Ie<=0)return void(this.connection=null);if(Ae._refCount=Ie-1,Ie>1)return void(this.connection=null);const{connection:Ue}=this,Ce=Ae._connection;this.connection=null,Ce&&(!Ue||Ce===Ue)&&Ce.unsubscribe()}}},1059:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{O:()=>qe});var S=Q(1221),a=Q(2866);function qe(...ke){const pe=ke[ke.length-1];return(0,a.K)(pe)?(ke.pop(),Ae=>(0,S.z)(ke,Ae,pe)):Ae=>(0,S.z)(ke,Ae)}},7545:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{w:()=>Ae});var S=Q(826),a=Q(1869),qe=Q(9054),ke=Q(4850),pe=Q(5254);function Ae(Ce,ae){return"function"==typeof ae?_e=>_e.pipe(Ae((Re,Ne)=>(0,pe.D)(Ce(Re,Ne)).pipe((0,ke.U)((et,rt)=>ae(Re,et,Ne,rt))))):_e=>_e.lift(new Ie(Ce))}class Ie{constructor(ae){this.project=ae}call(ae,_e){return _e.subscribe(new Ue(ae,this.project))}}class Ue extends S.L{constructor(ae,_e){super(ae),this.project=_e,this.index=0}_next(ae){let _e;const Re=this.index++;try{_e=this.project(ae,Re)}catch(Ne){return void this.destination.error(Ne)}this._innerSub(_e,ae,Re)}_innerSub(ae,_e,Re){const Ne=this.innerSubscription;Ne&&Ne.unsubscribe();const et=new a.d(this,_e,Re),rt=this.destination;rt.add(et),this.innerSubscription=(0,qe.D)(this,ae,void 0,void 0,et),this.innerSubscription!==et&&rt.add(this.innerSubscription)}_complete(){const{innerSubscription:ae}=this;(!ae||ae.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(ae){this.destination.remove(ae),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(ae,_e,Re,Ne,et){this.destination.next(_e)}}},2986:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{q:()=>ke});var S=Q(3489),a=Q(4231),qe=Q(8896);function ke(Ie){return Ue=>0===Ie?(0,qe.c)():Ue.lift(new pe(Ie))}class pe{constructor(Ue){if(this.total=Ue,this.total<0)throw new a.W}call(Ue,Ce){return Ce.subscribe(new Ae(Ue,this.total))}}class Ae extends S.L{constructor(Ue,Ce){super(Ue),this.total=Ce,this.count=0}_next(Ue){const Ce=this.total,ae=++this.count;ae<=Ce&&(this.destination.next(Ue),ae===Ce&&(this.destination.complete(),this.unsubscribe()))}}},2994:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{b:()=>ke});var S=Q(3489),a=Q(7876),qe=Q(7043);function ke(Ie,Ue,Ce){return function(_e){return _e.lift(new pe(Ie,Ue,Ce))}}class pe{constructor(Ue,Ce,ae){this.nextOrObserver=Ue,this.error=Ce,this.complete=ae}call(Ue,Ce){return Ce.subscribe(new Ae(Ue,this.nextOrObserver,this.error,this.complete))}}class Ae extends S.L{constructor(Ue,Ce,ae,_e){super(Ue),this._tapNext=a.Z,this._tapError=a.Z,this._tapComplete=a.Z,this._tapError=ae||a.Z,this._tapComplete=_e||a.Z,(0,qe.m)(Ce)?(this._context=this,this._tapNext=Ce):Ce&&(this._context=Ce,this._tapNext=Ce.next||a.Z,this._tapError=Ce.error||a.Z,this._tapComplete=Ce.complete||a.Z)}_next(Ue){try{this._tapNext.call(this._context,Ue)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(Ue)}_error(Ue){try{this._tapError.call(this._context,Ue)}catch(Ce){return void this.destination.error(Ce)}this.destination.error(Ue)}_complete(){try{this._tapComplete.call(this._context)}catch(Ue){return void this.destination.error(Ue)}return this.destination.complete()}}},6454:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{r:()=>qe});var S=Q(2916),a=Q(2654);function qe(ke,pe){return new S.y(Ae=>{const Ie=new a.w;let Ue=0;return Ie.add(pe.schedule(function(){Ue!==ke.length?(Ae.next(ke[Ue++]),Ae.closed||Ie.add(this.schedule())):Ae.complete()})),Ie})}},6686:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{o:()=>qe});var S=Q(2654);class a extends S.w{constructor(pe,Ae){super()}schedule(pe,Ae=0){return this}}class qe extends a{constructor(pe,Ae){super(pe,Ae),this.scheduler=pe,this.work=Ae,this.pending=!1}schedule(pe,Ae=0){if(this.closed)return this;this.state=pe;const Ie=this.id,Ue=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Ue,Ie,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(Ue,this.id,Ae),this}requestAsyncId(pe,Ae,Ie=0){return setInterval(pe.flush.bind(pe,this),Ie)}recycleAsyncId(pe,Ae,Ie=0){if(null!==Ie&&this.delay===Ie&&!1===this.pending)return Ae;clearInterval(Ae)}execute(pe,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(pe,Ae);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Ae){let Ue,Ie=!1;try{this.work(pe)}catch(Ce){Ie=!0,Ue=!!Ce&&Ce||new Error(Ce)}if(Ie)return this.unsubscribe(),Ue}_unsubscribe(){const pe=this.id,Ae=this.scheduler,Ie=Ae.actions,Ue=Ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Ue&&Ie.splice(Ue,1),null!=pe&&(this.id=this.recycleAsyncId(Ae,pe,null)),this.delay=null}}},2268:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{v:()=>a});let S=(()=>{class qe{constructor(pe,Ae=qe.now){this.SchedulerAction=pe,this.now=Ae}schedule(pe,Ae=0,Ie){return new this.SchedulerAction(this,pe).schedule(Ie,Ae)}}return qe.now=()=>Date.now(),qe})();class a extends S{constructor(ke,pe=S.now){super(ke,()=>a.delegate&&a.delegate!==this?a.delegate.now():pe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,pe=0,Ae){return a.delegate&&a.delegate!==this?a.delegate.schedule(ke,pe,Ae):super.schedule(ke,pe,Ae)}flush(ke){const{actions:pe}=this;if(this.active)return void pe.push(ke);let Ae;this.active=!0;do{if(Ae=ke.execute(ke.state,ke.delay))break}while(ke=pe.shift());if(this.active=!1,Ae){for(;ke=pe.shift();)ke.unsubscribe();throw Ae}}}},5430:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{hZ:()=>a});const a=function S(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{L:()=>S});const S="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{b:()=>S});const S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{W:()=>a});const a=(()=>{function qe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return qe.prototype=Object.create(Error.prototype),qe})()},5279:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{N:()=>a});const a=(()=>{function qe(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return qe.prototype=Object.create(Error.prototype),qe})()},2782:(Jt,Qe,Q)=>{"use strict";function S(a){setTimeout(()=>{throw a},0)}Q.d(Qe,{z:()=>S})},5379:(Jt,Qe,Q)=>{"use strict";function S(a){return a}Q.d(Qe,{y:()=>S})},6688:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{k:()=>S});const S=Array.isArray||(a=>a&&"number"==typeof a.length)},8515:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{z:()=>S});const S=a=>a&&"number"==typeof a.length&&"function"!=typeof a},7043:(Jt,Qe,Q)=>{"use strict";function S(a){return"function"==typeof a}Q.d(Qe,{m:()=>S})},7830:(Jt,Qe,Q)=>{"use strict";function S(a){return null!==a&&"object"==typeof a}Q.d(Qe,{K:()=>S})},8955:(Jt,Qe,Q)=>{"use strict";function S(a){return!!a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}Q.d(Qe,{t:()=>S})},2866:(Jt,Qe,Q)=>{"use strict";function S(a){return a&&"function"==typeof a.schedule}Q.d(Qe,{K:()=>S})},7876:(Jt,Qe,Q)=>{"use strict";function S(){}Q.d(Qe,{Z:()=>S})},9249:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{s:()=>_e});var S=Q(3650),a=Q(2782),ke=Q(5430),Ae=Q(3821),Ue=Q(8515),Ce=Q(8955),ae=Q(7830);const _e=Re=>{if(Re&&"function"==typeof Re[Ae.L])return(Re=>Ne=>{const et=Re[Ae.L]();if("function"!=typeof et.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return et.subscribe(Ne)})(Re);if((0,Ue.z)(Re))return(0,S.V)(Re);if((0,Ce.t)(Re))return(Re=>Ne=>(Re.then(et=>{Ne.closed||(Ne.next(et),Ne.complete())},et=>Ne.error(et)).then(null,a.z),Ne))(Re);if(Re&&"function"==typeof Re[ke.hZ])return(Re=>Ne=>{const et=Re[ke.hZ]();for(;;){const rt=et.next();if(rt.done){Ne.complete();break}if(Ne.next(rt.value),Ne.closed)break}return"function"==typeof et.return&&Ne.add(()=>{et.return&&et.return()}),Ne})(Re);{const et=`You provided ${(0,ae.K)(Re)?"an invalid object":`'${Re}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(et)}}},3650:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{V:()=>S});const S=a=>qe=>{for(let ke=0,pe=a.length;ke<pe&&!qe.closed;ke++)qe.next(a[ke]);qe.complete()}},9054:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{D:()=>ke});var S=Q(1869),a=Q(9249),qe=Q(2916);function ke(pe,Ae,Ie,Ue,Ce=new S.d(pe,Ie,Ue)){if(!Ce.closed)return Ae instanceof qe.y?Ae.subscribe(Ce):(0,a.s)(Ae)(Ce)}},655:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{ZT:()=>a,mG:()=>Ue});var S=function(mt,$e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,Rt){tt.__proto__=Rt}||function(tt,Rt){for(var St in Rt)Rt.hasOwnProperty(St)&&(tt[St]=Rt[St])})(mt,$e)};function a(mt,$e){function tt(){this.constructor=mt}S(mt,$e),mt.prototype=null===$e?Object.create($e):(tt.prototype=$e.prototype,new tt)}function Ue(mt,$e,tt,Rt){return new(tt||(tt=Promise))(function(ut,Ct){function kt(Pi){try{dn(Rt.next(Pi))}catch(hi){Ct(hi)}}function Ut(Pi){try{dn(Rt.throw(Pi))}catch(hi){Ct(hi)}}function dn(Pi){Pi.done?ut(Pi.value):function St(ut){return ut instanceof tt?ut:new tt(function(Ct){Ct(ut)})}(Pi.value).then(kt,Ut)}dn((Rt=Rt.apply(mt,$e||[])).next())})}},9808:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{mr:()=>Ot,Ov:()=>Bt,ez:()=>sa,K0:()=>Ie,Do:()=>Bi,V_:()=>ae,Ye:()=>Cr,S$:()=>Ft,sg:()=>Ti,O5:()=>un,PC:()=>Ms,b0:()=>Pt,lw:()=>Ue,rS:()=>gi,EM:()=>aa,JF:()=>Ao,NF:()=>Ks,w_:()=>Ae,bD:()=>Hs,q:()=>qe,Mx:()=>Qi,HT:()=>pe});var S=Q(2096);let a=null;function qe(){return a}function pe(k){a||(a=k)}class Ae{}const Ie=new S.OlP("DocumentToken");let Ue=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=S.Yz7({token:k,factory:function(){return function Ce(){return(0,S.LFG)(_e)}()},providedIn:"platform"}),k})();const ae=new S.OlP("Location Initialized");let _e=(()=>{class k extends Ue{constructor(B){super(),this._doc=B,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qe().getBaseHref(this._doc)}onPopState(B){const Y=qe().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",B,!1),()=>Y.removeEventListener("popstate",B)}onHashChange(B){const Y=qe().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",B,!1),()=>Y.removeEventListener("hashchange",B)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(B){this.location.pathname=B}pushState(B,Y,xe){Re()?this._history.pushState(B,Y,xe):this.location.hash=xe}replaceState(B,Y,xe){Re()?this._history.replaceState(B,Y,xe):this.location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return k.\u0275fac=function(B){return new(B||k)(S.LFG(Ie))},k.\u0275prov=S.Yz7({token:k,factory:function(){return function Ne(){return new _e((0,S.LFG)(Ie))}()},providedIn:"platform"}),k})();function Re(){return!!window.history.pushState}function et(k,q){if(0==k.length)return q;if(0==q.length)return k;let B=0;return k.endsWith("/")&&B++,q.startsWith("/")&&B++,2==B?k+q.substring(1):1==B?k+q:k+"/"+q}function rt(k){const q=k.match(/#|\?|$/),B=q&&q.index||k.length;return k.slice(0,B-("/"===k[B-1]?1:0))+k.slice(B)}function Ge(k){return k&&"?"!==k[0]?"?"+k:k}let Ft=(()=>{class k{historyGo(B){throw new Error("Not implemented")}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275prov=S.Yz7({token:k,factory:function(){return function an(k){const q=(0,S.LFG)(Ie).location;return new Pt((0,S.LFG)(Ue),q&&q.origin||"")}()},providedIn:"root"}),k})();const Ot=new S.OlP("appBaseHref");let Pt=(()=>{class k extends Ft{constructor(B,Y){if(super(),this._platformLocation=B,this._removeListenerFns=[],null==Y&&(Y=this._platformLocation.getBaseHrefFromDOM()),null==Y)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Y}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return et(this._baseHref,B)}path(B=!1){const Y=this._platformLocation.pathname+Ge(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&B?`${Y}${xe}`:Y}pushState(B,Y,xe,ze){const at=this.prepareExternalUrl(xe+Ge(ze));this._platformLocation.pushState(B,Y,at)}replaceState(B,Y,xe,ze){const at=this.prepareExternalUrl(xe+Ge(ze));this._platformLocation.replaceState(B,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var Y,xe;null===(xe=(Y=this._platformLocation).historyGo)||void 0===xe||xe.call(Y,B)}}return k.\u0275fac=function(B){return new(B||k)(S.LFG(Ue),S.LFG(Ot,8))},k.\u0275prov=S.Yz7({token:k,factory:k.\u0275fac}),k})(),Bi=(()=>{class k extends Ft{constructor(B,Y){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(B){const Y=et(this._baseHref,B);return Y.length>0?"#"+Y:Y}pushState(B,Y,xe,ze){let at=this.prepareExternalUrl(xe+Ge(ze));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.pushState(B,Y,at)}replaceState(B,Y,xe,ze){let at=this.prepareExternalUrl(xe+Ge(ze));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.replaceState(B,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(B=0){var Y,xe;null===(xe=(Y=this._platformLocation).historyGo)||void 0===xe||xe.call(Y,B)}}return k.\u0275fac=function(B){return new(B||k)(S.LFG(Ue),S.LFG(Ot,8))},k.\u0275prov=S.Yz7({token:k,factory:k.\u0275fac}),k})(),Cr=(()=>{class k{constructor(B,Y){this._subject=new S.vpe,this._urlChangeListeners=[],this._platformStrategy=B;const xe=this._platformStrategy.getBaseHref();this._platformLocation=Y,this._baseHref=rt($e(xe)),this._platformStrategy.onPopState(ze=>{this._subject.emit({url:this.path(!0),pop:!0,state:ze.state,type:ze.type})})}path(B=!1){return this.normalize(this._platformStrategy.path(B))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(B,Y=""){return this.path()==this.normalize(B+Ge(Y))}normalize(B){return k.stripTrailingSlash(function mt(k,q){return k&&q.startsWith(k)?q.substring(k.length):q}(this._baseHref,$e(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._platformStrategy.prepareExternalUrl(B)}go(B,Y="",xe=null){this._platformStrategy.pushState(xe,"",B,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ge(Y)),xe)}replaceState(B,Y="",xe=null){this._platformStrategy.replaceState(xe,"",B,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+Ge(Y)),xe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(B=0){var Y,xe;null===(xe=(Y=this._platformStrategy).historyGo)||void 0===xe||xe.call(Y,B)}onUrlChange(B){this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)}))}_notifyUrlChangeListeners(B="",Y){this._urlChangeListeners.forEach(xe=>xe(B,Y))}subscribe(B,Y,xe){return this._subject.subscribe({next:B,error:Y,complete:xe})}}return k.normalizeQueryParams=Ge,k.joinWithSlash=et,k.stripTrailingSlash=rt,k.\u0275fac=function(B){return new(B||k)(S.LFG(Ft),S.LFG(Ue))},k.\u0275prov=S.Yz7({token:k,factory:function(){return function fn(){return new Cr((0,S.LFG)(Ft),(0,S.LFG)(Ue))}()},providedIn:"root"}),k})();function $e(k){return k.replace(/\/index.html$/,"")}var St=(()=>((St=St||{})[St.Zero=0]="Zero",St[St.One=1]="One",St[St.Two=2]="Two",St[St.Few=3]="Few",St[St.Many=4]="Many",St[St.Other=5]="Other",St))();const $i=S.kL8;class zn{}let Xt=(()=>{class k extends zn{constructor(B){super(),this.locale=B}getPluralCategory(B,Y){switch($i(Y||this.locale)(B)){case St.Zero:return"zero";case St.One:return"one";case St.Two:return"two";case St.Few:return"few";case St.Many:return"many";default:return"other"}}}return k.\u0275fac=function(B){return new(B||k)(S.LFG(S.soG))},k.\u0275prov=S.Yz7({token:k,factory:k.\u0275fac}),k})();function Qi(k,q){q=encodeURIComponent(q);for(const B of k.split(";")){const Y=B.indexOf("="),[xe,ze]=-1==Y?[B,""]:[B.slice(0,Y),B.slice(Y+1)];if(xe.trim()===q)return decodeURIComponent(ze)}return null}class ki{constructor(q,B,Y,xe){this.$implicit=q,this.ngForOf=B,this.index=Y,this.count=xe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ti=(()=>{class k{constructor(B,Y,xe){this._viewContainer=B,this._template=Y,this._differs=xe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(B){this._ngForOf=B,this._ngForOfDirty=!0}set ngForTrackBy(B){this._trackByFn=B}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(B){B&&(this._template=B)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const B=this._ngForOf;!this._differ&&B&&(this._differ=this._differs.find(B).create(this.ngForTrackBy))}if(this._differ){const B=this._differ.diff(this._ngForOf);B&&this._applyChanges(B)}}_applyChanges(B){const Y=this._viewContainer;B.forEachOperation((xe,ze,at)=>{if(null==xe.previousIndex)Y.createEmbeddedView(this._template,new ki(xe.item,this._ngForOf,-1,-1),null===at?void 0:at);else if(null==at)Y.remove(null===ze?void 0:ze);else if(null!==ze){const Tt=Y.get(ze);Y.move(Tt,at),hr(Tt,xe)}});for(let xe=0,ze=Y.length;xe<ze;xe++){const Tt=Y.get(xe).context;Tt.index=xe,Tt.count=ze,Tt.ngForOf=this._ngForOf}B.forEachIdentityChange(xe=>{hr(Y.get(xe.currentIndex),xe)})}static ngTemplateContextGuard(B,Y){return!0}}return k.\u0275fac=function(B){return new(B||k)(S.Y36(S.s_b),S.Y36(S.Rgc),S.Y36(S.ZZ4))},k.\u0275dir=S.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),k})();function hr(k,q){k.context.$implicit=q.item}let un=(()=>{class k{constructor(B,Y){this._viewContainer=B,this._context=new sr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(B){this._context.$implicit=this._context.ngIf=B,this._updateView()}set ngIfThen(B){zr("ngIfThen",B),this._thenTemplateRef=B,this._thenViewRef=null,this._updateView()}set ngIfElse(B){zr("ngIfElse",B),this._elseTemplateRef=B,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(B,Y){return!0}}return k.\u0275fac=function(B){return new(B||k)(S.Y36(S.s_b),S.Y36(S.Rgc))},k.\u0275dir=S.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class sr{constructor(){this.$implicit=null,this.ngIf=null}}function zr(k,q){if(q&&!q.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,S.AaK)(q)}'.`)}let Ms=(()=>{class k{constructor(B,Y,xe){this._ngEl=B,this._differs=Y,this._renderer=xe,this._ngStyle=null,this._differ=null}set ngStyle(B){this._ngStyle=B,!this._differ&&B&&(this._differ=this._differs.find(B).create())}ngDoCheck(){if(this._differ){const B=this._differ.diff(this._ngStyle);B&&this._applyChanges(B)}}_setStyle(B,Y){const[xe,ze]=B.split(".");null!=(Y=null!=Y&&ze?`${Y}${ze}`:Y)?this._renderer.setStyle(this._ngEl.nativeElement,xe,Y):this._renderer.removeStyle(this._ngEl.nativeElement,xe)}_applyChanges(B){B.forEachRemovedItem(Y=>this._setStyle(Y.key,null)),B.forEachAddedItem(Y=>this._setStyle(Y.key,Y.currentValue)),B.forEachChangedItem(Y=>this._setStyle(Y.key,Y.currentValue))}}return k.\u0275fac=function(B){return new(B||k)(S.Y36(S.SBq),S.Y36(S.aQg),S.Y36(S.Qsj))},k.\u0275dir=S.lG2({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),k})();function j(k,q){return new S.vHH(2100,"")}class ne{createSubscription(q,B){return q.subscribe({next:B,error:Y=>{throw Y}})}dispose(q){q.unsubscribe()}onDestroy(q){q.unsubscribe()}}class ge{createSubscription(q,B){return q.then(B,Y=>{throw Y})}dispose(q){}onDestroy(q){}}const Fe=new ge,dt=new ne;let Bt=(()=>{class k{constructor(B){this._ref=B,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(B){return this._obj?B!==this._obj?(this._dispose(),this.transform(B)):this._latestValue:(B&&this._subscribe(B),this._latestValue)}_subscribe(B){this._obj=B,this._strategy=this._selectStrategy(B),this._subscription=this._strategy.createSubscription(B,Y=>this._updateLatestValue(B,Y))}_selectStrategy(B){if((0,S.QGY)(B))return Fe;if((0,S.F4k)(B))return dt;throw j()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(B,Y){B===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return k.\u0275fac=function(B){return new(B||k)(S.Y36(S.sBO,16))},k.\u0275pipe=S.Yjl({name:"async",type:k,pure:!1}),k})();const Ai=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let gi=(()=>{class k{transform(B){if(null==B)return null;if("string"!=typeof B)throw j();return B.replace(Ai,Y=>Y[0].toUpperCase()+Y.substr(1).toLowerCase())}}return k.\u0275fac=function(B){return new(B||k)},k.\u0275pipe=S.Yjl({name:"titlecase",type:k,pure:!0}),k})(),sa=(()=>{class k{}return k.\u0275fac=function(B){return new(B||k)},k.\u0275mod=S.oAB({type:k}),k.\u0275inj=S.cJS({providers:[{provide:zn,useClass:Xt}]}),k})();const Hs="browser";function Ks(k){return k===Hs}let aa=(()=>{class k{}return k.\u0275prov=(0,S.Yz7)({token:k,providedIn:"root",factory:()=>new Qs((0,S.LFG)(Ie),window)}),k})();class Qs{constructor(q,B){this.document=q,this.window=B,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const B=function kr(k,q){const B=k.getElementById(q)||k.getElementsByName(q)[0];if(B)return B;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const Y=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let xe=Y.currentNode;for(;xe;){const ze=xe.shadowRoot;if(ze){const at=ze.getElementById(q)||ze.querySelector(`[name="${q}"]`);if(at)return at}xe=Y.nextNode()}}return null}(this.document,q);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=q)}}scrollToElement(q){const B=q.getBoundingClientRect(),Y=B.left+this.window.pageXOffset,xe=B.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(Y-ze[0],xe-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=la(this.window.history)||la(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function la(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Ao{}},520:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{eN:()=>Ut,JF:()=>Gi});var S=Q(9808),a=Q(2096),qe=Q(1086),ke=Q(2916),pe=Q(1406),Ae=Q(2198),Ie=Q(4850);class Ue{}class Ce{}class ae{constructor(Ee){this.normalizedNames=new Map,this.lazyUpdate=null,Ee?this.lazyInit="string"==typeof Ee?()=>{this.headers=new Map,Ee.split("\n").forEach(Te=>{const he=Te.indexOf(":");if(he>0){const ve=Te.slice(0,he),ee=ve.toLowerCase(),fe=Te.slice(he+1).trim();this.maybeSetNormalizedName(ve,ee),this.headers.has(ee)?this.headers.get(ee).push(fe):this.headers.set(ee,[fe])}})}:()=>{this.headers=new Map,Object.keys(Ee).forEach(Te=>{let he=Ee[Te];const ve=Te.toLowerCase();"string"==typeof he&&(he=[he]),he.length>0&&(this.headers.set(ve,he),this.maybeSetNormalizedName(Te,ve))})}:this.headers=new Map}has(Ee){return this.init(),this.headers.has(Ee.toLowerCase())}get(Ee){this.init();const Te=this.headers.get(Ee.toLowerCase());return Te&&Te.length>0?Te[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ee){return this.init(),this.headers.get(Ee.toLowerCase())||null}append(Ee,Te){return this.clone({name:Ee,value:Te,op:"a"})}set(Ee,Te){return this.clone({name:Ee,value:Te,op:"s"})}delete(Ee,Te){return this.clone({name:Ee,value:Te,op:"d"})}maybeSetNormalizedName(Ee,Te){this.normalizedNames.has(Te)||this.normalizedNames.set(Te,Ee)}init(){this.lazyInit&&(this.lazyInit instanceof ae?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ee=>this.applyUpdate(Ee)),this.lazyUpdate=null))}copyFrom(Ee){Ee.init(),Array.from(Ee.headers.keys()).forEach(Te=>{this.headers.set(Te,Ee.headers.get(Te)),this.normalizedNames.set(Te,Ee.normalizedNames.get(Te))})}clone(Ee){const Te=new ae;return Te.lazyInit=this.lazyInit&&this.lazyInit instanceof ae?this.lazyInit:this,Te.lazyUpdate=(this.lazyUpdate||[]).concat([Ee]),Te}applyUpdate(Ee){const Te=Ee.name.toLowerCase();switch(Ee.op){case"a":case"s":let he=Ee.value;if("string"==typeof he&&(he=[he]),0===he.length)return;this.maybeSetNormalizedName(Ee.name,Te);const ve=("a"===Ee.op?this.headers.get(Te):void 0)||[];ve.push(...he),this.headers.set(Te,ve);break;case"d":const ee=Ee.value;if(ee){let fe=this.headers.get(Te);if(!fe)return;fe=fe.filter(Se=>-1===ee.indexOf(Se)),0===fe.length?(this.headers.delete(Te),this.normalizedNames.delete(Te)):this.headers.set(Te,fe)}else this.headers.delete(Te),this.normalizedNames.delete(Te)}}forEach(Ee){this.init(),Array.from(this.normalizedNames.keys()).forEach(Te=>Ee(this.normalizedNames.get(Te),this.headers.get(Te)))}}class _e{encodeKey(Ee){return rt(Ee)}encodeValue(Ee){return rt(Ee)}decodeKey(Ee){return decodeURIComponent(Ee)}decodeValue(Ee){return decodeURIComponent(Ee)}}const Ne=/%(\d[a-f0-9])/gi,et={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rt(Xe){return encodeURIComponent(Xe).replace(Ne,(Ee,Te)=>{var he;return null!==(he=et[Te])&&void 0!==he?he:Ee})}function Ge(Xe){return`${Xe}`}class Ft{constructor(Ee={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ee.encoder||new _e,Ee.fromString){if(Ee.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(Xe,Ee){const Te=new Map;return Xe.length>0&&Xe.replace(/^\?/,"").split("&").forEach(ve=>{const ee=ve.indexOf("="),[fe,Se]=-1==ee?[Ee.decodeKey(ve),""]:[Ee.decodeKey(ve.slice(0,ee)),Ee.decodeValue(ve.slice(ee+1))],nt=Te.get(fe)||[];nt.push(Se),Te.set(fe,nt)}),Te}(Ee.fromString,this.encoder)}else Ee.fromObject?(this.map=new Map,Object.keys(Ee.fromObject).forEach(Te=>{const he=Ee.fromObject[Te];this.map.set(Te,Array.isArray(he)?he:[he])})):this.map=null}has(Ee){return this.init(),this.map.has(Ee)}get(Ee){this.init();const Te=this.map.get(Ee);return Te?Te[0]:null}getAll(Ee){return this.init(),this.map.get(Ee)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ee,Te){return this.clone({param:Ee,value:Te,op:"a"})}appendAll(Ee){const Te=[];return Object.keys(Ee).forEach(he=>{const ve=Ee[he];Array.isArray(ve)?ve.forEach(ee=>{Te.push({param:he,value:ee,op:"a"})}):Te.push({param:he,value:ve,op:"a"})}),this.clone(Te)}set(Ee,Te){return this.clone({param:Ee,value:Te,op:"s"})}delete(Ee,Te){return this.clone({param:Ee,value:Te,op:"d"})}toString(){return this.init(),this.keys().map(Ee=>{const Te=this.encoder.encodeKey(Ee);return this.map.get(Ee).map(he=>Te+"="+this.encoder.encodeValue(he)).join("&")}).filter(Ee=>""!==Ee).join("&")}clone(Ee){const Te=new Ft({encoder:this.encoder});return Te.cloneFrom=this.cloneFrom||this,Te.updates=(this.updates||[]).concat(Ee),Te}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ee=>this.map.set(Ee,this.cloneFrom.map.get(Ee))),this.updates.forEach(Ee=>{switch(Ee.op){case"a":case"s":const Te=("a"===Ee.op?this.map.get(Ee.param):void 0)||[];Te.push(Ge(Ee.value)),this.map.set(Ee.param,Te);break;case"d":if(void 0===Ee.value){this.map.delete(Ee.param);break}{let he=this.map.get(Ee.param)||[];const ve=he.indexOf(Ge(Ee.value));-1!==ve&&he.splice(ve,1),he.length>0?this.map.set(Ee.param,he):this.map.delete(Ee.param)}}}),this.cloneFrom=this.updates=null)}}class Ot{constructor(){this.map=new Map}set(Ee,Te){return this.map.set(Ee,Te),this}get(Ee){return this.map.has(Ee)||this.map.set(Ee,Ee.defaultValue()),this.map.get(Ee)}delete(Ee){return this.map.delete(Ee),this}has(Ee){return this.map.has(Ee)}keys(){return this.map.keys()}}function Bi(Xe){return"undefined"!=typeof ArrayBuffer&&Xe instanceof ArrayBuffer}function Cr(Xe){return"undefined"!=typeof Blob&&Xe instanceof Blob}function fn(Xe){return"undefined"!=typeof FormData&&Xe instanceof FormData}class $e{constructor(Ee,Te,he,ve){let ee;if(this.url=Te,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ee.toUpperCase(),function Pt(Xe){switch(Xe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ve?(this.body=void 0!==he?he:null,ee=ve):ee=he,ee&&(this.reportProgress=!!ee.reportProgress,this.withCredentials=!!ee.withCredentials,ee.responseType&&(this.responseType=ee.responseType),ee.headers&&(this.headers=ee.headers),ee.context&&(this.context=ee.context),ee.params&&(this.params=ee.params)),this.headers||(this.headers=new ae),this.context||(this.context=new Ot),this.params){const fe=this.params.toString();if(0===fe.length)this.urlWithParams=Te;else{const Se=Te.indexOf("?");this.urlWithParams=Te+(-1===Se?"?":Se<Te.length-1?"&":"")+fe}}else this.params=new Ft,this.urlWithParams=Te}serializeBody(){return null===this.body?null:Bi(this.body)||Cr(this.body)||fn(this.body)||function mt(Xe){return"undefined"!=typeof URLSearchParams&&Xe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ft?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fn(this.body)?null:Cr(this.body)?this.body.type||null:Bi(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ft?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ee={}){var Te;const he=Ee.method||this.method,ve=Ee.url||this.url,ee=Ee.responseType||this.responseType,fe=void 0!==Ee.body?Ee.body:this.body,Se=void 0!==Ee.withCredentials?Ee.withCredentials:this.withCredentials,nt=void 0!==Ee.reportProgress?Ee.reportProgress:this.reportProgress;let ft=Ee.headers||this.headers,Lt=Ee.params||this.params;const Qn=null!==(Te=Ee.context)&&void 0!==Te?Te:this.context;return void 0!==Ee.setHeaders&&(ft=Object.keys(Ee.setHeaders).reduce((si,on)=>si.set(on,Ee.setHeaders[on]),ft)),Ee.setParams&&(Lt=Object.keys(Ee.setParams).reduce((si,on)=>si.set(on,Ee.setParams[on]),Lt)),new $e(he,ve,fe,{params:Lt,headers:ft,context:Qn,reportProgress:nt,responseType:ee,withCredentials:Se})}}var tt=(()=>((tt=tt||{})[tt.Sent=0]="Sent",tt[tt.UploadProgress=1]="UploadProgress",tt[tt.ResponseHeader=2]="ResponseHeader",tt[tt.DownloadProgress=3]="DownloadProgress",tt[tt.Response=4]="Response",tt[tt.User=5]="User",tt))();class Rt{constructor(Ee,Te=200,he="OK"){this.headers=Ee.headers||new ae,this.status=void 0!==Ee.status?Ee.status:Te,this.statusText=Ee.statusText||he,this.url=Ee.url||null,this.ok=this.status>=200&&this.status<300}}class St extends Rt{constructor(Ee={}){super(Ee),this.type=tt.ResponseHeader}clone(Ee={}){return new St({headers:Ee.headers||this.headers,status:void 0!==Ee.status?Ee.status:this.status,statusText:Ee.statusText||this.statusText,url:Ee.url||this.url||void 0})}}class ut extends Rt{constructor(Ee={}){super(Ee),this.type=tt.Response,this.body=void 0!==Ee.body?Ee.body:null}clone(Ee={}){return new ut({body:void 0!==Ee.body?Ee.body:this.body,headers:Ee.headers||this.headers,status:void 0!==Ee.status?Ee.status:this.status,statusText:Ee.statusText||this.statusText,url:Ee.url||this.url||void 0})}}class Ct extends Rt{constructor(Ee){super(Ee,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ee.url||"(unknown url)"}`:`Http failure response for ${Ee.url||"(unknown url)"}: ${Ee.status} ${Ee.statusText}`,this.error=Ee.error||null}}function kt(Xe,Ee){return{body:Ee,headers:Xe.headers,context:Xe.context,observe:Xe.observe,params:Xe.params,reportProgress:Xe.reportProgress,responseType:Xe.responseType,withCredentials:Xe.withCredentials}}let Ut=(()=>{class Xe{constructor(Te){this.handler=Te}request(Te,he,ve={}){let ee;if(Te instanceof $e)ee=Te;else{let nt,ft;nt=ve.headers instanceof ae?ve.headers:new ae(ve.headers),ve.params&&(ft=ve.params instanceof Ft?ve.params:new Ft({fromObject:ve.params})),ee=new $e(Te,he,void 0!==ve.body?ve.body:null,{headers:nt,context:ve.context,params:ft,reportProgress:ve.reportProgress,responseType:ve.responseType||"json",withCredentials:ve.withCredentials})}const fe=(0,qe.of)(ee).pipe((0,pe.b)(nt=>this.handler.handle(nt)));if(Te instanceof $e||"events"===ve.observe)return fe;const Se=fe.pipe((0,Ae.h)(nt=>nt instanceof ut));switch(ve.observe||"body"){case"body":switch(ee.responseType){case"arraybuffer":return Se.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return nt.body}));case"blob":return Se.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof Blob))throw new Error("Response is not a Blob.");return nt.body}));case"text":return Se.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&"string"!=typeof nt.body)throw new Error("Response is not a string.");return nt.body}));default:return Se.pipe((0,Ie.U)(nt=>nt.body))}case"response":return Se;default:throw new Error(`Unreachable: unhandled observe type ${ve.observe}}`)}}delete(Te,he={}){return this.request("DELETE",Te,he)}get(Te,he={}){return this.request("GET",Te,he)}head(Te,he={}){return this.request("HEAD",Te,he)}jsonp(Te,he){return this.request("JSONP",Te,{params:(new Ft).append(he,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Te,he={}){return this.request("OPTIONS",Te,he)}patch(Te,he,ve={}){return this.request("PATCH",Te,kt(ve,he))}post(Te,he,ve={}){return this.request("POST",Te,kt(ve,he))}put(Te,he,ve={}){return this.request("PUT",Te,kt(ve,he))}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(a.LFG(Ue))},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class dn{constructor(Ee,Te){this.next=Ee,this.interceptor=Te}handle(Ee){return this.interceptor.intercept(Ee,this.next)}}const Pi=new a.OlP("HTTP_INTERCEPTORS");let hi=(()=>{class Xe{intercept(Te,he){return he.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const vi=/^\)\]\}',?\n/;let kn=(()=>{class Xe{constructor(Te){this.xhrFactory=Te}handle(Te){if("JSONP"===Te.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ke.y(he=>{const ve=this.xhrFactory.build();if(ve.open(Te.method,Te.urlWithParams),Te.withCredentials&&(ve.withCredentials=!0),Te.headers.forEach((on,yn)=>ve.setRequestHeader(on,yn.join(","))),Te.headers.has("Accept")||ve.setRequestHeader("Accept","application/json, text/plain, */*"),!Te.headers.has("Content-Type")){const on=Te.detectContentTypeHeader();null!==on&&ve.setRequestHeader("Content-Type",on)}if(Te.responseType){const on=Te.responseType.toLowerCase();ve.responseType="json"!==on?on:"text"}const ee=Te.serializeBody();let fe=null;const Se=()=>{if(null!==fe)return fe;const on=ve.statusText||"OK",yn=new ae(ve.getAllResponseHeaders()),xn=function jt(Xe){return"responseURL"in Xe&&Xe.responseURL?Xe.responseURL:/^X-Request-URL:/m.test(Xe.getAllResponseHeaders())?Xe.getResponseHeader("X-Request-URL"):null}(ve)||Te.url;return fe=new St({headers:yn,status:ve.status,statusText:on,url:xn}),fe},nt=()=>{let{headers:on,status:yn,statusText:xn,url:Hn}=Se(),Ki=null;204!==yn&&(Ki=void 0===ve.response?ve.responseText:ve.response),0===yn&&(yn=Ki?200:0);let Nn=yn>=200&&yn<300;if("json"===Te.responseType&&"string"==typeof Ki){const wo=Ki;Ki=Ki.replace(vi,"");try{Ki=""!==Ki?JSON.parse(Ki):null}catch(li){Ki=wo,Nn&&(Nn=!1,Ki={error:li,text:Ki})}}Nn?(he.next(new ut({body:Ki,headers:on,status:yn,statusText:xn,url:Hn||void 0})),he.complete()):he.error(new Ct({error:Ki,headers:on,status:yn,statusText:xn,url:Hn||void 0}))},ft=on=>{const{url:yn}=Se(),xn=new Ct({error:on,status:ve.status||0,statusText:ve.statusText||"Unknown Error",url:yn||void 0});he.error(xn)};let Lt=!1;const Qn=on=>{Lt||(he.next(Se()),Lt=!0);let yn={type:tt.DownloadProgress,loaded:on.loaded};on.lengthComputable&&(yn.total=on.total),"text"===Te.responseType&&!!ve.responseText&&(yn.partialText=ve.responseText),he.next(yn)},si=on=>{let yn={type:tt.UploadProgress,loaded:on.loaded};on.lengthComputable&&(yn.total=on.total),he.next(yn)};return ve.addEventListener("load",nt),ve.addEventListener("error",ft),ve.addEventListener("timeout",ft),ve.addEventListener("abort",ft),Te.reportProgress&&(ve.addEventListener("progress",Qn),null!==ee&&ve.upload&&ve.upload.addEventListener("progress",si)),ve.send(ee),he.next({type:tt.Sent}),()=>{ve.removeEventListener("error",ft),ve.removeEventListener("abort",ft),ve.removeEventListener("load",nt),ve.removeEventListener("timeout",ft),Te.reportProgress&&(ve.removeEventListener("progress",Qn),null!==ee&&ve.upload&&ve.upload.removeEventListener("progress",si)),ve.readyState!==ve.DONE&&ve.abort()}})}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(a.LFG(S.JF))},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const Kn=new a.OlP("XSRF_COOKIE_NAME"),ti=new a.OlP("XSRF_HEADER_NAME");class Oi{}let Tn=(()=>{class Xe{constructor(Te,he,ve){this.doc=Te,this.platform=he,this.cookieName=ve,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Te=this.doc.cookie||"";return Te!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,S.Mx)(Te,this.cookieName),this.lastCookieString=Te),this.lastToken}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(a.LFG(S.K0),a.LFG(a.Lbi),a.LFG(Kn))},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),$i=(()=>{class Xe{constructor(Te,he){this.tokenService=Te,this.headerName=he}intercept(Te,he){const ve=Te.url.toLowerCase();if("GET"===Te.method||"HEAD"===Te.method||ve.startsWith("http://")||ve.startsWith("https://"))return he.handle(Te);const ee=this.tokenService.getToken();return null!==ee&&!Te.headers.has(this.headerName)&&(Te=Te.clone({headers:Te.headers.set(this.headerName,ee)})),he.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(a.LFG(Oi),a.LFG(ti))},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),pr=(()=>{class Xe{constructor(Te,he){this.backend=Te,this.injector=he,this.chain=null}handle(Te){if(null===this.chain){const he=this.injector.get(Pi,[]);this.chain=he.reduceRight((ve,ee)=>new dn(ve,ee),this.backend)}return this.chain.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(a.LFG(Ce),a.LFG(a.zs3))},Xe.\u0275prov=a.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),Yr=(()=>{class Xe{static disable(){return{ngModule:Xe,providers:[{provide:$i,useClass:hi}]}}static withOptions(Te={}){return{ngModule:Xe,providers:[Te.cookieName?{provide:Kn,useValue:Te.cookieName}:[],Te.headerName?{provide:ti,useValue:Te.headerName}:[]]}}}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275mod=a.oAB({type:Xe}),Xe.\u0275inj=a.cJS({providers:[$i,{provide:Pi,useExisting:$i,multi:!0},{provide:Oi,useClass:Tn},{provide:Kn,useValue:"XSRF-TOKEN"},{provide:ti,useValue:"X-XSRF-TOKEN"}]}),Xe})(),Gi=(()=>{class Xe{}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275mod=a.oAB({type:Xe}),Xe.\u0275inj=a.cJS({providers:[Ut,{provide:Ue,useClass:pr},kn,{provide:Ce,useExisting:kn}],imports:[[Yr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Xe})()},2096:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{deG:()=>Rn,tb:()=>ub,AFp:()=>ab,ip1:()=>Hy,CZH:()=>kh,hGG:()=>EM,z2F:()=>Cp,sBO:()=>Qw,Sil:()=>Gy,_Vd:()=>xd,EJc:()=>hb,SBq:()=>Be,qLn:()=>Od,vpe:()=>Xl,gxx:()=>nu,tBr:()=>Au,XFs:()=>he,OlP:()=>ri,zs3:()=>oo,ZZ4:()=>Vm,aQg:()=>Hm,soG:()=>km,YKP:()=>xx,h0i:()=>Oh,PXZ:()=>jw,R0b:()=>wa,FiY:()=>fc,Lbi:()=>cb,g9A:()=>lb,Qsj:()=>$n,FYo:()=>Mt,JOm:()=>ms,Tiy:()=>ai,q3G:()=>jr,tp0:()=>Vc,Rgc:()=>Mp,dDg:()=>gb,GfV:()=>qi,s_b:()=>Lm,ifc:()=>on,eFA:()=>_b,G48:()=>Kw,Gpc:()=>Ot,f3M:()=>Wm,_c5:()=>vM,VLi:()=>Gw,c2e:()=>db,zSh:()=>iu,wAp:()=>On,vHH:()=>fn,EiD:()=>Wp,mCW:()=>Ru,qzn:()=>Gc,JVY:()=>cv,pB0:()=>fv,eBb:()=>dv,L6k:()=>uv,LAX:()=>hv,cg1:()=>Pm,Tjo:()=>oM,kL8:()=>my,yhl:()=>Fp,dqk:()=>Nn,sIi:()=>Va,CqO:()=>dd,QGY:()=>bh,F4k:()=>Qf,RDi:()=>xe,AaK:()=>Ge,z3N:()=>cl,qOj:()=>Vf,TTD:()=>Xs,_Bn:()=>_a,xp6:()=>gg,uIk:()=>fh,Tol:()=>ar,Gre:()=>gp,ekj:()=>up,Suo:()=>Vx,Xpm:()=>Or,lG2:()=>Kr,Yz7:()=>Tn,cJS:()=>pr,oAB:()=>rr,Yjl:()=>Rs,Y36:()=>pu,_UZ:()=>gu,qZA:()=>yh,TgZ:()=>ud,EpF:()=>Kf,n5z:()=>Ss,LFG:()=>Ts,$8M:()=>Nc,$Z:()=>Yf,NdJ:()=>ep,CRH:()=>Hx,oxw:()=>np,ALo:()=>Px,lcZ:()=>Ix,Hsn:()=>fd,F$t:()=>ip,Q6J:()=>_h,s9C:()=>wh,DdM:()=>Ex,WLB:()=>Cx,iGM:()=>Ux,MAs:()=>zf,CHM:()=>Yo,oJD:()=>Zp,LSH:()=>$h,kYT:()=>Ni,Udp:()=>cp,YNc:()=>sd,_uU:()=>md,Oqu:()=>vd,hij:()=>Ch,AsE:()=>Sh,Gf:()=>Bx});var S=Q(2916),a=Q(2866),qe=Q(9146),ke=Q(3009),Ae=Q(8929),Ie=Q(2654),Ue=Q(1762);class ae{constructor(i,s){this.subjectFactory=i,this.selector=s}call(i,s){const{selector:l}=this,u=this.subjectFactory(),p=l(u).subscribe(i);return p.add(s.subscribe(u)),p}}var _e=Q(4327);function Re(){return new Ae.xQ}function et(n){for(let i in n)if(n[i]===et)return i;throw Error("Could not find renamed property on target object.")}function rt(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ft(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const an=et({__forward_ref__:et});function Ot(n){return n.__forward_ref__=Ot,n.toString=function(){return Ge(this())},n}function Pt(n){return Bi(n)?n():n}function Bi(n){return"function"==typeof n&&n.hasOwnProperty(an)&&n.__forward_ref__===Ot}class fn extends Error{constructor(i,s){super(function mt(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,s)),this.code=i}}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function tt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}function Ct(n,i){const s=i?` in ${i}`:"";throw new fn(-201,`No provider for ${tt(n)} found${s}`)}function jt(n,i){null==n&&function kn(n,i,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${i} <=Actual]`))}(i,n,null,"!=")}function Tn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xi(n){return xr(n,os)||xr(n,Ee)}function xr(n,i){return n.hasOwnProperty(i)?n[i]:null}function lr(n){return n&&(n.hasOwnProperty(Xe)||n.hasOwnProperty(Te))?n[Xe]:null}const os=et({\u0275prov:et}),Xe=et({\u0275inj:et}),Ee=et({ngInjectableDef:et}),Te=et({ngInjectorDef:et});var he=(()=>((he=he||{})[he.Default=0]="Default",he[he.Host=1]="Host",he[he.Self=2]="Self",he[he.SkipSelf=4]="SkipSelf",he[he.Optional=8]="Optional",he))();let ve;function fe(n){const i=ve;return ve=n,i}function Se(n,i,s){const l=Xi(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&he.Optional?null:void 0!==i?i:void Ct(Ge(n),"Injector")}function ft(n){return{toString:n}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const yn="undefined"!=typeof globalThis&&globalThis,xn="undefined"!=typeof window&&window,Hn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nn=yn||"undefined"!=typeof global&&global||xn||Hn,cr={},ni=[],Jr=et({\u0275cmp:et}),bs=et({\u0275dir:et}),ws=et({\u0275pipe:et}),as=et({\u0275mod:et}),ur=et({\u0275fac:et}),Ds=et({__NG_ELEMENT_ID__:et});let Zo=0;function Or(n){return ft(()=>{const s={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ni,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c",styles:n.styles||ni,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,p=n.features,_=n.pipes;return l.id+=Zo++,l.inputs=Nr(n.inputs,s),l.outputs=Nr(n.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=u?()=>("function"==typeof u?u():u).map(Xr):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(pn):null,l})}function Xr(n){return Yi(n)||function Fr(n){return n[bs]||null}(n)}function pn(n){return function dr(n){return n[ws]||null}(n)}const Hr={};function rr(n){return ft(()=>{const i={type:n.type,bootstrap:n.bootstrap||ni,declarations:n.declarations||ni,imports:n.imports||ni,exports:n.exports||ni,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Hr[n.id]=n.type),i})}function Ni(n,i){return ft(()=>{const s=Fi(n,!0);s.declarations=i.declarations||ni,s.imports=i.imports||ni,s.exports=i.exports||ni})}function Nr(n,i){if(null==n)return cr;const s={};for(const l in n)if(n.hasOwnProperty(l)){let u=n[l],p=u;Array.isArray(u)&&(p=u[1],u=u[0]),s[u]=l,i&&(i[u]=p)}return s}const Kr=Or;function Rs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yi(n){return n[Jr]||null}function Fi(n,i){const s=n[as]||null;if(!s&&!0===i)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return s}function Tr(n){return Array.isArray(n)&&"object"==typeof n[1]}function j(n){return Array.isArray(n)&&!0===n[1]}function ne(n){return 0!=(8&n.flags)}function ge(n){return 2==(2&n.flags)}function Fe(n){return 1==(1&n.flags)}function dt(n){return null!==n.template}function Bt(n){return 0!=(512&n[2])}function co(n,i){return n.hasOwnProperty(ur)?n[ur]:null}class Gr{constructor(i,s,l){this.previousValue=i,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xs(){return Ks}function Ks(n){return n.type.prototype.ngOnChanges&&(n.setInput=oa),Sa}function Sa(){const n=So(this),i=null==n?void 0:n.current;if(i){const s=n.previous;if(s===cr)n.previous=i;else for(let l in i)s[l]=i[l];n.current=null,this.ngOnChanges(i)}}function oa(n,i,s,l){const u=So(n)||function aa(n,i){return n[Co]=i}(n,{previous:cr,current:null}),p=u.current||(u.current={}),_=u.previous,E=this.declaredInputs[s],I=_[E];p[E]=new Gr(I&&I.currentValue,i,_===cr),n[l]=i}Xs.ngInherit=!0;const Co="__ngSimpleChanges__";function So(n){return n[Co]||null}const k="math";let Y;function xe(n){Y=n}function ze(){return void 0!==Y?Y:"undefined"!=typeof document?document:void 0}function Tt(n){return!!n.listen}const wi={createRenderer:(n,i)=>ze()};function vn(n){for(;Array.isArray(n);)n=n[0];return n}function V(n,i){return vn(i[n])}function O(n,i){return vn(i[n.index])}function X(n,i){return n.data[i]}function We(n,i){return n[i]}function Nt(n,i){const s=i[n];return Tr(s)?s:s[0]}function Hi(n){return 4==(4&n[2])}function Ur(n){return 128==(128&n[2])}function zs(n,i){return null==i?null:n[i]}function Pc(n){n[18]=0}function Ml(n,i){n[5]+=i;let s=n,l=n[3];for(;null!==l&&(1===i&&1===s[5]||-1===i&&0===s[5]);)l[5]+=i,s=l,l=l[3]}const Bn={lFrame:Xo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gs(){return Bn.bindingsEnabled}function ht(){return Bn.lFrame.lView}function ii(){return Bn.lFrame.tView}function Yo(n){return Bn.lFrame.contextLView=n,n[8]}function or(){let n=Ql();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ql(){return Bn.lFrame.currentTNode}function hs(n,i){const s=Bn.lFrame;s.currentTNode=n,s.isParent=i}function uo(){return Bn.lFrame.isParent}function Ta(){Bn.lFrame.isParent=!1}function Mi(){return Bn.isInCheckNoChangesMode}function es(n){Bn.isInCheckNoChangesMode=n}function fs(){const n=Bn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function re(){return Bn.lFrame.bindingIndex++}function Ws(n){const i=Bn.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}function fo(n,i){const s=Bn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Aa(i)}function Aa(n){Bn.lFrame.currentDirectiveIndex=n}function ca(){return Bn.lFrame.currentQueryIndex}function Ro(n){Bn.lFrame.currentQueryIndex=n}function Jo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function Po(n,i,s){if(s&he.SkipSelf){let u=i,p=n;for(;!(u=u.parent,null!==u||s&he.Host||(u=Jo(p),null===u||(p=p[15],10&u.type))););if(null===u)return!1;i=u,n=p}const l=Bn.lFrame=Da();return l.currentTNode=i,l.lView=n,!0}function to(n){const i=Da(),s=n[1];Bn.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function Da(){const n=Bn.lFrame,i=null===n?null:n.child;return null===i?Xo(n):i}function Xo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function go(){const n=Bn.lFrame;return Bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ko=go;function Ra(){const n=go();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Dr(){return Bn.lFrame.selectedIndex}function no(n){Bn.lFrame.selectedIndex=n}function Ii(){const n=Bn.lFrame;return X(n.tView,n.selectedIndex)}function io(n,i){for(let s=i.directiveStart,l=i.directiveEnd;s<l;s++){const p=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:G,ngOnDestroy:Z}=p;_&&(n.contentHooks||(n.contentHooks=[])).push(-s,_),E&&((n.contentHooks||(n.contentHooks=[])).push(s,E),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,E)),I&&(n.viewHooks||(n.viewHooks=[])).push(-s,I),G&&((n.viewHooks||(n.viewHooks=[])).push(s,G),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,G)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function Ls(n,i,s){ns(n,i,3,s)}function Qt(n,i,s,l){(3&n[2])===s&&ns(n,i,s,l)}function Os(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function ns(n,i,s,l){const p=null!=l?l:-1,_=i.length-1;let E=0;for(let I=void 0!==l?65535&n[18]:0;I<_;I++)if("number"==typeof i[I+1]){if(E=i[I],null!=l&&E>=l)break}else i[I]<0&&(n[18]+=65536),(E<p||-1==p)&&(bu(n,s,i,I),n[18]=(4294901760&n[18])+I+2),I++}function bu(n,i,s,l){const u=s[l]<0,p=s[l+1],E=n[u?-s[l]:s[l]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Zs{constructor(i,s,l){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Lo(n,i,s){const l=Tt(n);let u=0;for(;u<s.length;){const p=s[u];if("number"==typeof p){if(0!==p)break;u++;const _=s[u++],E=s[u++],I=s[u++];l?n.setAttribute(i,E,I,_):i.setAttributeNS(_,E,I)}else{const _=p,E=s[++u];el(_)?l&&n.setProperty(i,_,E):l?n.setAttribute(i,_,E):i.setAttribute(_,E),u++}}return u}function Oo(n){return 3===n||4===n||6===n}function el(n){return 64===n.charCodeAt(0)}function No(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let l=0;l<i.length;l++){const u=i[l];"number"==typeof u?s=u:0===s||sc(n,s,u,null,-1===s||2===s?i[++l]:null)}}return n}function sc(n,i,s,l,u){let p=0,_=n.length;if(-1===i)_=-1;else for(;p<n.length;){const E=n[p++];if("number"==typeof E){if(E===i){_=-1;break}if(E>i){_=p-1;break}}}for(;p<n.length;){const E=n[p];if("number"==typeof E)break;if(E===s){if(null===l)return void(null!==u&&(n[p+1]=u));if(l===n[p+1])return void(n[p+2]=u)}p++,null!==l&&p++,null!==u&&p++}-1!==_&&(n.splice(_,0,i),p=_+1),n.splice(p++,0,s),null!==l&&n.splice(p++,0,l),null!==u&&n.splice(p++,0,u)}function Oc(n){return-1!==n}function ea(n){return 32767&n}function Fo(n,i){let s=function oc(n){return n>>16}(n),l=i;for(;s>0;)l=l[15],s--;return l}let ac=!0;function tl(n){const i=ac;return ac=n,i}let A=0;function y(n,i){const s=z(n,i);if(-1!==s)return s;const l=i[1];l.firstCreatePass&&(n.injectorIndex=i.length,F(l.data,n),F(i,null),F(l.blueprint,null));const u=J(n,i),p=n.injectorIndex;if(Oc(u)){const _=ea(u),E=Fo(u,i),I=E[1].data;for(let G=0;G<8;G++)i[p+G]=E[_+G]|I[_+G]}return i[p+8]=u,p}function F(n,i){n.push(0,0,0,0,0,0,0,0,i)}function z(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function J(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,u=i;for(;null!==u;){const p=u[1],_=p.type;if(l=2===_?p.declTNode:1===_?u[6]:null,null===l)return-1;if(s++,u=u[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function de(n,i,s){!function b(n,i,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(Ds)&&(l=s[Ds]),null==l&&(l=s[Ds]=A++);const u=255&l;i.data[n+(u>>5)]|=1<<u}(n,i,s)}function Ve(n,i,s){if(s&he.Optional)return n;Ct(i,"NodeInjector")}function qt(n,i,s,l){if(s&he.Optional&&void 0===l&&(l=null),0==(s&(he.Self|he.Host))){const u=n[9],p=fe(void 0);try{return u?u.get(i,l,s&he.Optional):Se(i,l,s&he.Optional)}finally{fe(p)}}return Ve(l,i,s)}function En(n,i,s,l=he.Default,u){if(null!==n){const p=function Uo(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ds)?n[Ds]:void 0;return"number"==typeof i?i>=0?255&i:bn:i}(s);if("function"==typeof p){if(!Po(i,n,l))return l&he.Host?Ve(u,s,l):qt(i,s,l,u);try{const _=p(l);if(null!=_||l&he.Optional)return _;Ct(s)}finally{Ko()}}else if("number"==typeof p){let _=null,E=z(n,i),I=-1,G=l&he.Host?i[16][6]:null;for((-1===E||l&he.SkipSelf)&&(I=-1===E?J(n,i):i[E+8],-1!==I&&nl(l,!1)?(_=i[1],E=ea(I),i=Fo(I,i)):E=-1);-1!==E;){const Z=i[1];if(Bo(p,E,Z.data)){const se=Ei(E,i,s,_,l,G);if(se!==rn)return se}I=i[E+8],-1!==I&&nl(l,i[1].data[E+8]===G)&&Bo(p,E,i)?(_=Z,E=ea(I),i=Fo(I,i)):E=-1}}}return qt(i,s,l,u)}const rn={};function bn(){return new is(or(),ht())}function Ei(n,i,s,l,u,p){const _=i[1],E=_.data[n+8],Z=ui(E,_,s,null==l?ge(E)&&ac:l!=_&&0!=(3&E.type),u&he.Host&&p===E);return null!==Z?Ns(i,_,Z,E):rn}function ui(n,i,s,l,u){const p=n.providerIndexes,_=i.data,E=1048575&p,I=n.directiveStart,Z=p>>20,Me=u?E+Z:n.directiveEnd;for(let Oe=l?E:E+Z;Oe<Me;Oe++){const ot=_[Oe];if(Oe<I&&s===ot||Oe>=I&&ot.type===s)return Oe}if(u){const Oe=_[I];if(Oe&&dt(Oe)&&Oe.type===s)return I}return null}function Ns(n,i,s,l){let u=n[s];const p=i.data;if(function Qa(n){return n instanceof Zs}(u)){const _=u;_.resolving&&function Rt(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new fn(-200,`Circular dependency in DI detected for ${n}${s}`)}(tt(p[s]));const E=tl(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?fe(_.injectImpl):null;Po(n,l,he.Default);try{u=n[s]=_.factory(void 0,p,n,l),i.firstCreatePass&&s>=l.directiveStart&&function Cl(n,i,s){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:p}=i.type.prototype;if(l){const _=Ks(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,u),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,p))}(s,p[s],i)}finally{null!==I&&fe(I),tl(E),_.resolving=!1,Ko()}}return u}function Bo(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function nl(n,i){return!(n&he.Self||n&he.Host&&i)}class is{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,l){return En(this._tNode,this._lView,i,l,s)}}function Ss(n){return ft(()=>{const i=n.prototype.constructor,s=i[ur]||il(i),l=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==l;){const p=u[ur]||il(u);if(p&&p!==s)return p;u=Object.getPrototypeOf(u)}return p=>new p})}function il(n){return Bi(n)?()=>{const i=il(Pt(n));return i&&i()}:co(n)}function Nc(n){return function we(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const l=s.length;let u=0;for(;u<l;){const p=s[u];if(Oo(p))break;if(0===p)u+=2;else if("number"==typeof p)for(u++;u<l&&"string"==typeof s[u];)u++;else{if(p===i)return s[u+1];u+=2}}}return null}(or(),n)}const Tl="__parameters__";function Vo(n,i,s){return ft(()=>{const l=function lc(n){return function(...s){if(n){const l=n(...s);for(const u in l)this[u]=l[u]}}}(i);function u(...p){if(this instanceof u)return l.apply(this,p),this;const _=new u(...p);return E.annotation=_,E;function E(I,G,Z){const se=I.hasOwnProperty(Tl)?I[Tl]:Object.defineProperty(I,Tl,{value:[]})[Tl];for(;se.length<=Z;)se.push(null);return(se[Z]=se[Z]||[]).push(_),I}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class ri{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Tn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rn=new ri("AnalyzeForEntryComponents");function Fs(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(i===n&&(i=n.slice(0,s)),Fs(l,i)):i!==n&&i.push(l)}return i}function yo(n,i){n.forEach(s=>Array.isArray(s)?yo(s,i):i(s))}function Eu(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function Rl(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function Mr(n,i){const s=[];for(let l=0;l<n;l++)s.push(i);return s}function ro(n,i,s){let l=$s(n,i);return l>=0?n[1|l]=s:(l=~l,function Ia(n,i,s,l){let u=n.length;if(u==i)n.push(s,l);else if(1===u)n.push(l,n[0]),n[0]=s;else{for(u--,n.push(n[u-1],n[u]);u>i;)n[u]=n[u-2],u--;n[i]=s,n[i+1]=l}}(n,l,i,s)),l}function Uc(n,i){const s=$s(n,i);if(s>=0)return n[1|s]}function $s(n,i){return function Zr(n,i,s){let l=0,u=n.length>>s;for(;u!==l;){const p=l+(u-l>>1),_=n[p<<s];if(i===_)return p<<s;_>i?u=p:l=p+1}return~(u<<s)}(n,i,1)}const it={},hn="__NG_DI_FLAG__",Ln="ngTempTokenPath",Bh=/\n/gm,Sp="__source",zm=et({provide:String,useValue:et});let Su;function Tp(n){const i=Su;return Su=n,i}function Gm(n,i=he.Default){if(void 0===Su)throw new fn(203,"");return null===Su?Se(n,void 0,i):Su.get(n,i&he.Optional?null:void 0,i)}function Ts(n,i=he.Default){return(function ee(){return ve}()||Gm)(Pt(n),i)}const Wm=Ts;function Vh(n){const i=[];for(let s=0;s<n.length;s++){const l=Pt(n[s]);if(Array.isArray(l)){if(0===l.length)throw new fn(900,"");let u,p=he.Default;for(let _=0;_<l.length;_++){const E=l[_],I=Zm(E);"number"==typeof I?-1===I?u=E.token:p|=I:u=E}i.push(Ts(u,p))}else i.push(Ts(l))}return i}function Tu(n,i){return n[hn]=i,n.prototype[hn]=i,n}function Zm(n){return n[hn]}const Au=Tu(Vo("Inject",n=>({token:n})),-1),fc=Tu(Vo("Optional"),8),Vc=Tu(Vo("SkipSelf"),4);let Dd,Rd;function zc(n){var i;return(null===(i=function zh(){if(void 0===Dd&&(Dd=null,Nn.trustedTypes))try{Dd=Nn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Dd}())||void 0===i?void 0:i.createHTML(n))||n}function Lp(n){var i;return(null===(i=function Gh(){if(void 0===Rd&&(Rd=null,Nn.trustedTypes))try{Rd=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Rd}())||void 0===i?void 0:i.createHTML(n))||n}class pc{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class rv extends pc{getTypeName(){return"HTML"}}class sv extends pc{getTypeName(){return"Style"}}class ov extends pc{getTypeName(){return"Script"}}class av extends pc{getTypeName(){return"URL"}}class lv extends pc{getTypeName(){return"ResourceURL"}}function cl(n){return n instanceof pc?n.changingThisBreaksApplicationSecurity:n}function Gc(n,i){const s=Fp(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Fp(n){return n instanceof pc&&n.getTypeName()||null}function cv(n){return new rv(n)}function uv(n){return new sv(n)}function dv(n){return new ov(n)}function hv(n){return new av(n)}function fv(n){return new lv(n)}class pv{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(zc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class gv{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const l=this.inertDocument.createElement("body");s.appendChild(l)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=zc(i),s;const l=this.inertDocument.createElement("body");return l.innerHTML=zc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(i){const s=i.attributes;for(let u=s.length-1;0<u;u--){const _=s.item(u).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&i.removeAttribute(_)}let l=i.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const vv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_v=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ru(n){return(n=String(n)).match(vv)||n.match(_v)?n:"unsafe:"+n}function La(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function Pu(...n){const i={};for(const s of n)for(const l in s)s.hasOwnProperty(l)&&(i[l]=!0);return i}const Bp=La("area,br,col,hr,img,wbr"),Vp=La("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hp=La("rp,rt"),Wh=Pu(Bp,Pu(Vp,La("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pu(Hp,La("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pu(Hp,Vp)),Zh=La("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jh=La("srcset"),zp=Pu(Zh,jh,La("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),La("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yv=La("script,style,template");class xv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,l=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?l=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,l&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let u=this.checkClobberedElement(s,s.nextSibling);if(u){s=u;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!Wh.hasOwnProperty(s))return this.sanitizedSomething=!0,!yv.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const l=i.attributes;for(let u=0;u<l.length;u++){const p=l.item(u),_=p.name,E=_.toLowerCase();if(!zp.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=p.value;Zh[E]&&(I=Ru(I)),jh[E]&&(n=I,I=(n=String(n)).split(",").map(i=>Ru(i.trim())).join(", ")),this.buf.push(" ",_,'="',Gp(I),'"')}var n;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();Wh.hasOwnProperty(s)&&!Bp.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Gp(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const bv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wv=/([^\#-~ |!])/g;function Gp(n){return n.replace(/&/g,"&amp;").replace(bv,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(wv,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pd;function Wp(n,i){let s=null;try{Pd=Pd||function kp(n){const i=new gv(n);return function mv(){try{return!!(new window.DOMParser).parseFromString(zc(""),"text/html")}catch(n){return!1}}()?new pv(i):i}(n);let l=i?String(i):"";s=Pd.getInertBodyElement(l);let u=5,p=l;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,l=p,p=s.innerHTML,s=Pd.getInertBodyElement(l)}while(l!==p);return zc((new xv).sanitizeChildren(qh(s)||s))}finally{if(s){const l=qh(s)||s;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function qh(n){return"content"in n&&function Mv(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var jr=(()=>((jr=jr||{})[jr.NONE=0]="NONE",jr[jr.HTML=1]="HTML",jr[jr.STYLE=2]="STYLE",jr[jr.SCRIPT=3]="SCRIPT",jr[jr.URL=4]="URL",jr[jr.RESOURCE_URL=5]="RESOURCE_URL",jr))();function Zp(n){const i=Id();return i?Lp(i.sanitize(jr.HTML,n)||""):Gc(n,"HTML")?Lp(cl(n)):Wp(ze(),$e(n))}function $h(n){const i=Id();return i?i.sanitize(jr.URL,n)||"":Gc(n,"URL")?cl(n):Ru($e(n))}function Id(){const n=ht();return n&&n[12]}const Pv="__ngContext__";function so(n,i){n[Pv]=i}function $p(n){const i=function Ld(n){return n[Pv]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function Jp(n){return n.ngOriginalError}function A0(n,...i){n.error(...i)}class Od{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),l=function T0(n){return n&&n.ngErrorLogger||A0}(i);l(this._console,"ERROR",i),s&&l(this._console,"ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&Jp(i);for(;s&&Jp(s);)s=Jp(s);return s||null}}const Xp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nn))();function Na(n){return n instanceof Function?n():n}var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();function Ud(n,i){return undefined(n,i)}function ul(n){const i=n[3];return j(i)?i[3]:i}function Vd(n){return Il(n[13])}function Lu(n){return Il(n[4])}function Il(n){for(;null!==n&&!j(n);)n=n[4];return n}function vc(n,i,s,l,u){if(null!=l){let p,_=!1;j(l)?p=l:Tr(l)&&(_=!0,l=l[0]);const E=vn(l);0===n&&null!==s?null==u?Qh(i,s,E):_c(i,s,E,u||null,!0):1===n&&null!==s?_c(i,s,E,u||null,!0):2===n?function ag(n,i,s){const l=Fu(n,i);l&&function sg(n,i,s,l){Tt(n)?n.removeChild(i,s,l):i.removeChild(s)}(n,l,i,s)}(i,E,_):3===n&&i.destroyNode(E),null!=p&&function Zv(n,i,s,l,u){const p=s[7];p!==vn(s)&&vc(i,n,l,p,u);for(let E=10;E<s.length;E++){const I=s[E];ku(I[1],I,n,i,l,p)}}(i,n,p,s,u)}}function jc(n,i,s){if(Tt(n))return n.createElement(i,s);{const l=null!==s?function B(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":i===k?"http://www.w3.org/1998/MathML/":null}(s):null;return null===l?n.createElement(i):n.createElementNS(l,i)}}function ng(n,i){const s=n[9],l=s.indexOf(i),u=i[3];1024&i[2]&&(i[2]&=-1025,Ml(u,-1)),s.splice(l,1)}function Xh(n,i){if(n.length<=10)return;const s=10+i,l=n[s];if(l){const u=l[17];null!==u&&u!==n&&ng(u,l),i>0&&(n[s-1][4]=l[4]);const p=Rl(n,10+i);!function Bv(n,i){ku(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ig(n,i){if(!(256&i[2])){const s=i[11];Tt(s)&&s.destroyNode&&ku(n,i,s,3,null,null),function Jh(n){let i=n[13];if(!i)return Nu(n[1],n);for(;i;){let s=null;if(Tr(i))s=i[13];else{const l=i[10];l&&(s=l)}if(!s){for(;i&&!i[4]&&i!==n;)Tr(i)&&Nu(i[1],i),i=i[3];null===i&&(i=n),Tr(i)&&Nu(i[1],i),s=i&&i[4]}i=s}}(i)}}function Nu(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function Gv(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const u=i[s[l]];if(!(u instanceof Zs)){const p=s[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=u[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(u)}finally{}}}}(n,i),function zv(n,i){const s=n.cleanup,l=i[7];let u=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const _=s[p+1],E="function"==typeof _?_(i):vn(i[_]),I=l[u=s[p+2]],G=s[p+3];"boolean"==typeof G?E.removeEventListener(s[p],I,G):G>=0?l[u=G]():l[u=-G].unsubscribe(),p+=2}else{const _=l[u=s[p+1]];s[p].call(_)}if(null!==l){for(let p=u+1;p<l.length;p++)l[p]();i[7]=null}}(n,i),1===i[1].type&&Tt(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&j(i[3])){s!==i[3]&&ng(s,i);const l=i[19];null!==l&&l.detachView(n)}}}function Kh(n,i,s){return function rg(n,i,s){let l=i;for(;null!==l&&40&l.type;)l=(i=l).parent;if(null===l)return s[0];if(2&l.flags){const u=n.data[l.directiveStart].encapsulation;if(u===on.None||u===on.Emulated)return null}return O(l,s)}(n,i.parent,s)}function _c(n,i,s,l,u){Tt(n)?n.insertBefore(i,s,l,u):i.insertBefore(s,l,u)}function Qh(n,i,s){Tt(n)?n.appendChild(i,s):i.appendChild(s)}function ef(n,i,s,l,u){null!==l?_c(n,i,s,l,u):Qh(n,i,s)}function Fu(n,i){return Tt(n)?n.parentNode(i):i.parentNode}function tf(n,i,s){return rf(n,i,s)}let rf=function nf(n,i,s){return 40&n.type?O(n,s):null};function dl(n,i,s,l){const u=Kh(n,l,i),p=i[11],E=tf(l.parent||i[6],l,i);if(null!=u)if(Array.isArray(s))for(let I=0;I<s.length;I++)ef(p,u,s[I],E,!1);else ef(p,u,s,E,!1)}function As(n,i){if(null!==i){const s=i.type;if(3&s)return O(i,n);if(4&s)return qc(-1,n[i.index]);if(8&s){const l=i.child;if(null!==l)return As(n,l);{const u=n[i.index];return j(u)?qc(-1,u):vn(u)}}if(32&s)return Ud(i,n)()||vn(n[i.index]);{const l=Us(n,i);return null!==l?Array.isArray(l)?l[0]:As(ul(n[16]),l):As(n,i.next)}}return null}function Us(n,i){return null!==i?n[16][6].projection[i.projection]:null}function qc(n,i){const s=10+n+1;if(s<i.length){const l=i[s],u=l[1].firstChild;if(null!==u)return As(l,u)}return i[7]}function af(n,i,s,l,u,p,_){for(;null!=s;){const E=l[s.index],I=s.type;if(_&&0===i&&(E&&so(vn(E),l),s.flags|=4),64!=(64&s.flags))if(8&I)af(n,i,s.child,l,u,p,!1),vc(i,n,u,E,p);else if(32&I){const G=Ud(s,l);let Z;for(;Z=G();)vc(i,n,u,Z,p);vc(i,n,u,E,p)}else 16&I?lg(n,i,l,s,u,p):vc(i,n,u,E,p);s=_?s.projectionNext:s.next}}function ku(n,i,s,l,u,p){af(s,l,n.firstChild,i,u,p,!1)}function lg(n,i,s,l,u,p){const _=s[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let G=0;G<I.length;G++)vc(i,n,u,I[G],p);else af(n,i,I,_[3],u,p,!0)}function cg(n,i,s){Tt(n)?n.setAttribute(i,"style",s):i.style.cssText=s}function lf(n,i,s){Tt(n)?""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s):i.className=s}function ug(n,i,s){let l=n.length;for(;;){const u=n.indexOf(i,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const p=i.length;if(u+p===l||n.charCodeAt(u+p)<=32)return u}s=u+1}}const dg="ng-template";function qv(n,i,s){let l=0;for(;l<n.length;){let u=n[l++];if(s&&"class"===u){if(u=n[l],-1!==ug(u.toLowerCase(),i,0))return!0}else if(1===u){for(;l<n.length&&"string"==typeof(u=n[l++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function hg(n){return 4===n.type&&n.value!==dg}function $v(n,i,s){return i===(4!==n.type||s?n.value:dg)}function Yv(n,i,s){let l=4;const u=n.attrs||[],p=function Kv(n){for(let i=0;i<n.length;i++)if(Oo(n[i]))return i;return n.length}(u);let _=!1;for(let E=0;E<i.length;E++){const I=i[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!$v(n,I,s)||""===I&&1===i.length){if(da(l))return!1;_=!0}}else{const G=8&l?I:i[++E];if(8&l&&null!==n.attrs){if(!qv(n.attrs,G,s)){if(da(l))return!1;_=!0}continue}const se=Jv(8&l?"class":I,u,hg(n),s);if(-1===se){if(da(l))return!1;_=!0;continue}if(""!==G){let Me;Me=se>p?"":u[se+1].toLowerCase();const Oe=8&l?Me:null;if(Oe&&-1!==ug(Oe,G,0)||2&l&&G!==Me){if(da(l))return!1;_=!0}}}}else{if(!_&&!da(l)&&!da(I))return!1;if(_&&da(I))continue;_=!1,l=I|1&l}}return da(l)||_}function da(n){return 0==(1&n)}function Jv(n,i,s,l){if(null===i)return-1;let u=0;if(l||!s){let p=!1;for(;u<i.length;){const _=i[u];if(_===n)return u;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=i[++u];for(;"string"==typeof E;)E=i[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=p?1:2}return-1}return function Qv(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===i)return s;s++}return-1}(i,n)}function fg(n,i,s=!1){for(let l=0;l<i.length;l++)if(Yv(n,i[l],s))return!0;return!1}function e_(n,i){e:for(let s=0;s<i.length;s++){const l=i[s];if(n.length===l.length){for(let u=0;u<n.length;u++)if(n[u]!==l[u])continue e;return!0}}return!1}function pg(n,i){return n?":not("+i.trim()+")":i}function t_(n){let i=n[0],s=1,l=2,u="",p=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&l){const E=n[++s];u+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?u+="."+_:4&l&&(u+=" "+_);else""!==u&&!da(_)&&(i+=pg(p,u),u=""),l=_,p=p||!da(l);s++}return""!==u&&(i+=pg(p,u)),i}const qn={};function gg(n){mg(ii(),ht(),Dr()+n,Mi())}function mg(n,i,s,l){if(!l)if(3==(3&i[2])){const p=n.preOrderCheckHooks;null!==p&&Ls(i,p,s)}else{const p=n.preOrderHooks;null!==p&&Qt(i,p,0,s)}no(s)}function Gd(n,i){return n<<17|i<<2}function ha(n){return n>>17&32767}function cf(n){return 2|n}function hl(n){return(131068&n)>>2}function uf(n,i){return-131069&n|i<<2}function df(n){return 1|n}function Tg(n,i){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const u=s[l],p=s[l+1];if(-1!==p){const _=n.data[p];Ro(u),_.contentQueries(2,i[p],p)}}}function Bu(n,i,s,l,u,p,_,E,I,G){const Z=i.blueprint.slice();return Z[0]=u,Z[2]=140|l,Pc(Z),Z[3]=Z[15]=n,Z[8]=s,Z[10]=_||n&&n[10],Z[11]=E||n&&n[11],Z[12]=I||n&&n[12]||null,Z[9]=G||n&&n[9]||null,Z[6]=p,Z[16]=2==i.type?n[16]:Z,Z}function yc(n,i,s,l,u){let p=n.data[i];if(null===p)p=function bf(n,i,s,l,u){const p=Ql(),_=uo(),I=n.data[i]=function x_(n,i,s,l,u,p){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,s,i,l,u);return null===n.firstChild&&(n.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(n,i,s,l,u),function tc(){return Bn.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=s,p.value=l,p.attrs=u;const _=function Ht(){const n=Bn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return hs(p,!0),p}function Nl(n,i,s,l){if(0===s)return-1;const u=i.length;for(let p=0;p<s;p++)i.push(l),n.blueprint.push(l),n.data.push(null);return u}function xc(n,i,s){to(i);try{const l=n.viewQuery;null!==l&&ss(1,l,s);const u=n.template;null!==u&&wf(n,i,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Tg(n,i),n.staticViewQueries&&ss(2,n.viewQuery,s);const p=n.components;null!==p&&function v_(n,i){for(let s=0;s<i.length;s++)Qc(n,i[s])}(i,p)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{i[2]&=-5,Ra()}}function Jc(n,i,s,l){const u=i[2];if(256==(256&u))return;to(i);const p=Mi();try{Pc(i),function Wr(n){return Bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&wf(n,i,s,2,l);const _=3==(3&u);if(!p)if(_){const G=n.preOrderCheckHooks;null!==G&&Ls(i,G,null)}else{const G=n.preOrderHooks;null!==G&&Qt(i,G,0,null),Os(i,0)}if(function Ng(n){for(let i=Vd(n);null!==i;i=Lu(i)){if(!i[2])continue;const s=i[9];for(let l=0;l<s.length;l++){const u=s[l],p=u[3];0==(1024&u[2])&&Ml(p,1),u[2]|=1024}}}(i),function E_(n){for(let i=Vd(n);null!==i;i=Lu(i))for(let s=10;s<i.length;s++){const l=i[s],u=l[1];Ur(l)&&Jc(u,l,u.template,l[8])}}(i),null!==n.contentQueries&&Tg(n,i),!p)if(_){const G=n.contentCheckHooks;null!==G&&Ls(i,G)}else{const G=n.contentHooks;null!==G&&Qt(i,G,1),Os(i,1)}!function g_(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const u=s[l];if(u<0)no(~u);else{const p=u,_=s[++l],E=s[++l];fo(_,p),E(2,i[p])}}}finally{no(-1)}}(n,i);const E=n.components;null!==E&&function m_(n,i){for(let s=0;s<i.length;s++)Kd(n,i[s])}(i,E);const I=n.viewQuery;if(null!==I&&ss(2,I,l),!p)if(_){const G=n.viewCheckHooks;null!==G&&Ls(i,G)}else{const G=n.viewHooks;null!==G&&Qt(i,G,2),Os(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),p||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Ml(i[3],-1))}finally{Ra()}}function __(n,i,s,l){const u=i[10],p=!Mi(),_=Hi(i);try{p&&!_&&u.begin&&u.begin(),_&&xc(n,i,l),Jc(n,i,s,l)}finally{p&&!_&&u.end&&u.end()}}function wf(n,i,s,l,u){const p=Dr(),_=2&l;try{no(-1),_&&i.length>20&&mg(n,i,20,Mi()),s(l,u)}finally{no(p)}}function Mf(n,i,s){!Gs()||(function zu(n,i,s,l){const u=s.directiveStart,p=s.directiveEnd;n.firstCreatePass||y(s,i),so(l,i);const _=s.initialInputs;for(let E=u;E<p;E++){const I=n.data[E],G=dt(I);G&&Jd(i,s,I);const Z=Ns(i,n,E,s);so(Z,i),null!==_&&w_(0,E-u,Z,I,0,_),G&&(Nt(s.index,i)[8]=Z)}}(n,i,s,O(s,i)),128==(128&s.flags)&&function Ig(n,i,s){const l=s.directiveStart,u=s.directiveEnd,_=s.index,E=function po(){return Bn.lFrame.currentDirectiveIndex}();try{no(_);for(let I=l;I<u;I++){const G=n.data[I],Z=i[I];Aa(I),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&Gu(G,Z)}}finally{no(-1),Aa(E)}}(n,i,s))}function Ef(n,i,s=O){const l=i.localNames;if(null!==l){let u=i.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?s(i,n):n[_];n[u++]=E}}}function Cf(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=ka(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function ka(n,i,s,l,u,p,_,E,I,G){const Z=20+l,se=Z+u,Me=function y_(n,i){const s=[];for(let l=0;l<i;l++)s.push(l<n?null:qn);return s}(Z,se),Oe="function"==typeof G?G():G;return Me[1]={type:n,blueprint:Me,template:s,queries:null,viewQuery:E,declTNode:i,data:Me.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Oe,incompleteFirstPass:!1}}function Pg(n,i,s,l){const u=Df(i);null===s?u.push(l):(u.push(s),n.firstCreatePass&&nh(n).push(l,u.length-1))}function ji(n,i,s){for(let l in n)if(n.hasOwnProperty(l)){const u=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(i,u):s[l]=[i,u]}return s}function Ys(n,i,s,l,u,p,_,E){const I=O(i,s);let Z,G=i.inputs;!E&&null!=G&&(Z=G[l])?(Rf(n,s,Z,l,u),ge(i)&&function qd(n,i){const s=Nt(i,n);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(l=function jd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),u=null!=_?_(u,i.value||"",l):u,Tt(p)?p.setProperty(I,l,u):el(l)||(I.setProperty?I.setProperty(l,u):I[l]=u))}function Fl(n,i,s,l){let u=!1;if(Gs()){const p=function Wu(n,i,s){const l=n.directiveRegistry;let u=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];fg(s,_.selectors,!1)&&(u||(u=[]),de(y(s,i),n,_.type),dt(_)?(Zu(n,s),u.unshift(_)):u.push(_))}return u}(n,i,s),_=null===l?null:{"":-1};if(null!==p){u=!0,Tf(s,n.data.length,p.length);for(let Z=0;Z<p.length;Z++){const se=p[Z];se.providersResolver&&se.providersResolver(se)}let E=!1,I=!1,G=Nl(n,i,p.length,null);for(let Z=0;Z<p.length;Z++){const se=p[Z];s.mergedAttrs=No(s.mergedAttrs,se.hostAttrs),Yd(n,s,i,G,se),Sf(G,se,_),null!==se.contentQueries&&(s.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(s.flags|=128);const Me=se.type.prototype;!E&&(Me.ngOnChanges||Me.ngOnInit||Me.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),E=!0),!I&&(Me.ngOnChanges||Me.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),I=!0),G++}!function b_(n,i){const l=i.directiveEnd,u=n.data,p=i.attrs,_=[];let E=null,I=null;for(let G=i.directiveStart;G<l;G++){const Z=u[G],se=Z.inputs,Me=null===p||hg(i)?null:Og(se,p);_.push(Me),E=ji(se,G,E),I=ji(Z.outputs,G,I)}null!==E&&(E.hasOwnProperty("class")&&(i.flags|=16),E.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=_,i.inputs=E,i.outputs=I}(n,s)}_&&function Lg(n,i,s){if(i){const l=n.localNames=[];for(let u=0;u<i.length;u+=2){const p=s[i[u+1]];if(null==p)throw new fn(-301,!1);l.push(i[u],p)}}}(s,l,_)}return s.mergedAttrs=No(s.mergedAttrs,s.attrs),u}function Mc(n,i,s,l,u,p){const _=p.hostBindings;if(_){let E=n.hostBindingOpCodes;null===E&&(E=n.hostBindingOpCodes=[]);const I=~i.index;(function Xc(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(E)!=I&&E.push(I),E.push(l,u,_)}}function Gu(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Zu(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Sf(n,i,s){if(s){if(i.exportAs)for(let l=0;l<i.exportAs.length;l++)s[i.exportAs[l]]=n;dt(i)&&(s[""]=n)}}function Tf(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Yd(n,i,s,l,u){n.data[l]=u;const p=u.factory||(u.factory=co(u.type)),_=new Zs(p,dt(u),null);n.blueprint[l]=_,s[l]=_,Mc(n,i,0,l,Nl(n,s,u.hostVars,qn),u)}function Jd(n,i,s){const l=O(i,n),u=Cf(s),p=n[10],_=Qd(n,Bu(n,u,null,s.onPush?64:16,l,i,p,p.createRenderer(l,s),null,null));n[i.index]=_}function Ho(n,i,s,l,u,p){const _=O(n,i);!function Xd(n,i,s,l,u,p,_){if(null==p)Tt(n)?n.removeAttribute(i,u,s):i.removeAttribute(u);else{const E=null==_?$e(p):_(p,l||"",u);Tt(n)?n.setAttribute(i,u,E,s):s?i.setAttributeNS(s,u,E):i.setAttribute(u,E)}}(i[11],_,p,n.value,s,l,u)}function w_(n,i,s,l,u,p){const _=p[i];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const G=_[I++],Z=_[I++],se=_[I++];null!==E?l.setInput(s,se,G,Z):s[Z]=se}}}function Og(n,i){let s=null,l=0;for(;l<i.length;){const u=i[l];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,n[u],i[l+1])),l+=2}else l+=2;else l+=4}return s}function Af(n,i,s,l){return new Array(n,!0,!1,i,null,0,l,s,null,null)}function Kd(n,i){const s=Nt(i,n);if(Ur(s)){const l=s[1];80&s[2]?Jc(l,s,l.template,s[8]):s[5]>0&&Kc(s)}}function Kc(n){for(let l=Vd(n);null!==l;l=Lu(l))for(let u=10;u<l.length;u++){const p=l[u];if(1024&p[2]){const _=p[1];Jc(_,p,_.template,p[8])}else p[5]>0&&Kc(p)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const u=Nt(s[l],n);Ur(u)&&u[5]>0&&Kc(u)}}function Qc(n,i){const s=Nt(i,n),l=s[1];(function Fg(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(l,s),xc(l,s,s[8])}function Qd(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function eu(n){for(;n;){n[2]|=64;const i=ul(n);if(Bt(n)&&!i)return n;n=i}return null}function th(n,i,s){const l=i[10];l.begin&&l.begin();try{Jc(n,i,n.template,s)}catch(u){throw fl(i,u),u}finally{l.end&&l.end()}}function ju(n){!function eh(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],l=$p(s),u=l[1];__(u,l,u.template,s)}}(n[8])}function ss(n,i,s){Ro(0),i(n,s)}const Ug=(()=>Promise.resolve(null))();function Df(n){return n[7]||(n[7]=[])}function nh(n){return n.cleanup||(n.cleanup=[])}function fl(n,i){const s=n[9],l=s?s.get(Od,null):null;l&&l.handleError(i)}function Rf(n,i,s,l,u){for(let p=0;p<s.length;){const _=s[p++],E=s[p++],I=i[_],G=n.data[_];null!==G.setInput?G.setInput(I,u,l,E):I[E]=u}}function Ua(n,i,s){const l=V(i,n);!function Kp(n,i,s){Tt(n)?n.setValue(i,s):i.textContent=s}(n[11],l,s)}function ta(n,i,s){let l=s?n.styles:null,u=s?n.classes:null,p=0;if(null!==i)for(let _=0;_<i.length;_++){const E=i[_];"number"==typeof E?p=E:1==p?u=Ft(u,E):2==p&&(l=Ft(l,E+": "+i[++_]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=u:n.classesWithoutHost=u}const nu=new ri("INJECTOR",-1);class Yu{get(i,s=it){if(s===it){const l=new Error(`NullInjectorError: No provider for ${Ge(i)}!`);throw l.name="NullInjectorError",l}return s}}const iu=new ri("Set Injector scope."),pl={},Bg={};let If;function Vg(){return void 0===If&&(If=new Yu),If}function Lf(n,i=null,s=null,l){const u=Hg(n,i,s,l);return u._resolveInjectorDefTypes(),u}function Hg(n,i=null,s=null,l){return new ih(n,s,i||Vg(),l)}class ih{constructor(i,s,l,u=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];s&&yo(s,E=>this.processProvider(E,i,s)),yo([i],E=>this.processInjectorType(E,[],p)),this.records.set(nu,gl(void 0,this));const _=this.records.get(iu);this.scope=null!=_?_.value:null,this.source=u||("object"==typeof i?null:Ge(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=it,l=he.Default){this.assertNotDestroyed();const u=Tp(this),p=fe(void 0);try{if(!(l&he.SkipSelf)){let E=this.records.get(i);if(void 0===E){const I=function Nf(n){return"function"==typeof n||"object"==typeof n&&n instanceof ri}(i)&&Xi(i);E=I&&this.injectableDefInScope(I)?gl(kl(i),pl):null,this.records.set(i,E)}if(null!=E)return this.hydrate(i,E)}return(l&he.Self?Vg():this.parent).get(i,s=l&he.Optional&&s===it?null:s)}catch(_){if("NullInjectorError"===_.name){if((_[Ln]=_[Ln]||[]).unshift(Ge(i)),u)throw _;return function jm(n,i,s,l){const u=n[Ln];throw i[Sp]&&u.unshift(i[Sp]),n.message=function qm(n,i,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=Ge(i);if(Array.isArray(i))u=i.map(Ge).join(" -> ");else if("object"==typeof i){let p=[];for(let _ in i)if(i.hasOwnProperty(_)){let E=i[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):Ge(E)))}u=`{${p.join(", ")}}`}return`${s}${l?"("+l+")":""}[${u}]: ${n.replace(Bh,"\n  ")}`}("\n"+n.message,u,s,l),n.ngTokenPath=u,n[Ln]=null,n}(_,i,"R3InjectorError",this.source)}throw _}finally{fe(p),Tp(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((l,u)=>i.push(Ge(u))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fn(205,!1)}processInjectorType(i,s,l){if(!(i=Pt(i)))return!1;let u=lr(i);const p=null==u&&i.ngModule||void 0,_=void 0===p?i:p,E=-1!==l.indexOf(_);if(void 0!==p&&(u=lr(p)),null==u)return!1;if(null!=u.imports&&!E){let Z;l.push(_);try{yo(u.imports,se=>{this.processInjectorType(se,s,l)&&(void 0===Z&&(Z=[]),Z.push(se))})}finally{}if(void 0!==Z)for(let se=0;se<Z.length;se++){const{ngModule:Me,providers:Oe}=Z[se];yo(Oe,ot=>this.processProvider(ot,Me,Oe||ni))}}this.injectorDefTypes.add(_);const I=co(_)||(()=>new _);this.records.set(_,gl(I,pl));const G=u.providers;if(null!=G&&!E){const Z=i;yo(G,se=>this.processProvider(se,Z,G))}return void 0!==p&&void 0!==i.providers}processProvider(i,s,l){let u=Cc(i=Pt(i))?i:Pt(i&&i.provide);const p=function Ul(n,i,s){return Xu(n)?gl(void 0,n.useValue):gl(Ju(n),pl)}(i);if(Cc(i)||!0!==i.multi)this.records.get(u);else{let _=this.records.get(u);_||(_=gl(void 0,pl,!0),_.factory=()=>Vh(_.multi),this.records.set(u,_)),u=i,_.multi.push(i)}this.records.set(u,p)}hydrate(i,s){return s.value===pl&&(s.value=Bg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function zg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Pt(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function kl(n){const i=Xi(n),s=null!==i?i.factory:co(n);if(null!==s)return s;if(n instanceof ri)throw new fn(204,!1);if(n instanceof Function)return function rh(n){const i=n.length;if(i>0)throw Mr(i,"?"),new fn(204,!1);const s=function Yr(n){const i=n&&(n[os]||n[Ee]);if(i){const s=function Gi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new fn(204,!1)}function Ju(n,i,s){let l;if(Cc(n)){const u=Pt(n);return co(u)||kl(u)}if(Xu(n))l=()=>Pt(n.useValue);else if(function sh(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Vh(n.deps||[]));else if(function Of(n){return!(!n||!n.useExisting)}(n))l=()=>Ts(Pt(n.useExisting));else{const u=Pt(n&&(n.useClass||n.provide));if(!function oh(n){return!!n.deps}(n))return co(u)||kl(u);l=()=>new u(...Vh(n.deps))}return l}function gl(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function Xu(n){return null!==n&&"object"==typeof n&&zm in n}function Cc(n){return"function"==typeof n}let oo=(()=>{class n{static create(s,l){var u;if(Array.isArray(s))return Lf({name:""},l,s,"");{const p=null!==(u=s.name)&&void 0!==u?u:"";return Lf({name:p},s.parent,s.providers,p)}}}return n.THROW_IF_NOT_FOUND=it,n.NULL=new Yu,n.\u0275prov=Tn({token:n,providedIn:"any",factory:()=>Ts(nu)}),n.__NG_ELEMENT_ID__=-1,n})();function Bl(n,i){io($p(n)[1],or())}function Vf(n){let i=function $g(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;i;){let u;if(dt(n))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new fn(903,"");u=i.\u0275dir}if(u){if(s){l.push(u);const _=n;_.inputs=Hf(n.inputs),_.declaredInputs=Hf(n.declaredInputs),_.outputs=Hf(n.outputs);const E=u.hostBindings;E&&F_(n,E);const I=u.viewQuery,G=u.contentQueries;if(I&&O_(n,I),G&&N_(n,G),rt(n.inputs,u.inputs),rt(n.declaredInputs,u.declaredInputs),rt(n.outputs,u.outputs),dt(u)&&u.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(u.data.animation)}}const p=u.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(n),E===Vf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function L_(n){let i=0,s=null;for(let l=n.length-1;l>=0;l--){const u=n[l];u.hostVars=i+=u.hostVars,u.hostAttrs=No(u.hostAttrs,s=No(s,u.hostAttrs))}}(l)}function Hf(n){return n===cr?{}:n===ni?[]:n}function O_(n,i){const s=n.viewQuery;n.viewQuery=s?(l,u)=>{i(l,u),s(l,u)}:i}function N_(n,i){const s=n.contentQueries;n.contentQueries=s?(l,u,p)=>{i(l,u,p),s(l,u,p)}:i}function F_(n,i){const s=n.hostBindings;n.hostBindings=s?(l,u)=>{i(l,u),s(l,u)}:i}let hh=null;function Vl(){if(!hh){const n=Nn.Symbol;if(n&&n.iterator)hh=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const l=i[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(hh=l)}}}return hh}function Va(n){return!!su(n)&&(Array.isArray(n)||!(n instanceof Map)&&Vl()in n)}function su(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function fa(n,i,s){return n[i]=s}function vs(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function Sc(n,i,s,l){const u=vs(n,i,s);return vs(n,i+1,l)||u}function fh(n,i,s,l){const u=ht();return vs(u,re(),i)&&(ii(),Ho(Ii(),u,n,i,s,l)),fh}function Ha(n,i,s,l){return vs(n,re(),s)?i+$e(s)+l:qn}function Gl(n,i,s,l,u,p){const E=Sc(n,function ho(){return Bn.lFrame.bindingIndex}(),s,u);return Ws(2),E?i+$e(s)+l+$e(u)+p:qn}function sd(n,i,s,l,u,p,_,E){const I=ht(),G=ii(),Z=n+20,se=G.firstCreatePass?function ph(n,i,s,l,u,p,_,E,I){const G=i.consts,Z=yc(i,n,4,_||null,zs(G,E));Fl(i,s,Z,zs(G,I)),io(i,Z);const se=Z.tViews=ka(2,Z,l,u,p,i.directiveRegistry,i.pipeRegistry,null,i.schemas,G);return null!==i.queries&&(i.queries.template(i,Z),se.queries=i.queries.embeddedTView(Z)),Z}(Z,G,I,i,s,l,u,p,_):G.data[Z];hs(se,!1);const Me=I[11].createComment("");dl(G,I,Me,se),so(Me,I),Qd(I,I[Z]=Af(Me,I,Me,se)),Fe(se)&&Mf(G,I,se),null!=_&&Ef(I,se,E)}function zf(n){return We(function ec(){return Bn.lFrame.contextLView}(),20+n)}function pu(n,i=he.Default){const s=ht();return null===s?Ts(n,i):En(or(),s,Pt(n),i)}function Yf(){throw new Error("invalid")}function _h(n,i,s){const l=ht();return vs(l,re(),i)&&Ys(ii(),Ii(),l,n,i,l[11],s,!1),_h}function cd(n,i,s,l,u){const _=u?"class":"style";Rf(n,s,i.inputs[_],_,l)}function ud(n,i,s,l){const u=ht(),p=ii(),_=20+n,E=u[11],I=u[_]=jc(E,i,function ts(){return Bn.lFrame.currentNamespace}()),G=p.firstCreatePass?function om(n,i,s,l,u,p,_){const E=i.consts,G=yc(i,n,2,u,zs(E,p));return Fl(i,s,G,zs(E,_)),null!==G.attrs&&ta(G,G.attrs,!1),null!==G.mergedAttrs&&ta(G,G.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,G),G}(_,p,u,0,i,s,l):p.data[_];hs(G,!0);const Z=G.mergedAttrs;null!==Z&&Lo(E,I,Z);const se=G.classes;null!==se&&lf(E,I,se);const Me=G.styles;null!==Me&&cg(E,I,Me),64!=(64&G.flags)&&dl(p,u,I,G),0===function vr(){return Bn.lFrame.elementDepthCount}()&&so(I,u),function Ic(){Bn.lFrame.elementDepthCount++}(),Fe(G)&&(Mf(p,u,G),function Ag(n,i,s){if(ne(i)){const u=i.directiveEnd;for(let p=i.directiveStart;p<u;p++){const _=n.data[p];_.contentQueries&&_.contentQueries(1,s[p],p)}}}(p,G,u)),null!==l&&Ef(u,G)}function yh(){let n=or();uo()?Ta():(n=n.parent,hs(n,!1));const i=n;!function xu(){Bn.lFrame.elementDepthCount--}();const s=ii();s.firstCreatePass&&(io(s,n),ne(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function js(n){return 0!=(16&n.flags)}(i)&&cd(s,i,ht(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Sl(n){return 0!=(32&n.flags)}(i)&&cd(s,i,ht(),i.stylesWithoutHost,!1)}function gu(n,i,s,l){ud(n,i,s,l),yh()}function Kf(){return ht()}function bh(n){return!!n&&"function"==typeof n.then}function Qf(n){return!!n&&"function"==typeof n.subscribe}const dd=Qf;function ep(n,i,s,l){const u=ht(),p=ii(),_=or();return function um(n,i,s,l,u,p,_,E){const I=Fe(l),Z=n.firstCreatePass&&nh(n),se=i[8],Me=Df(i);let Oe=!0;if(3&l.type||E){const Gt=O(l,i),cn=E?E(Gt):Gt,wt=Me.length,Dn=E?Si=>E(vn(Si[l.index])):l.index;if(Tt(s)){let Si=null;if(!E&&I&&(Si=function cm(n,i,s,l){const u=n.cleanup;if(null!=u)for(let p=0;p<u.length-1;p+=2){const _=u[p];if(_===s&&u[p+1]===l){const E=i[7],I=u[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(n,i,u,l.index)),null!==Si)(Si.__ngLastListenerFn__||Si).__ngNextListenerFn__=p,Si.__ngLastListenerFn__=p,Oe=!1;else{p=tp(l,i,se,p,!1);const nr=s.listen(cn,u,p);Me.push(p,nr),Z&&Z.push(u,Dn,wt,wt+1)}}else p=tp(l,i,se,p,!0),cn.addEventListener(u,p,_),Me.push(p),Z&&Z.push(u,Dn,wt,_)}else p=tp(l,i,se,p,!1);const ot=l.outputs;let It;if(Oe&&null!==ot&&(It=ot[u])){const Gt=It.length;if(Gt)for(let cn=0;cn<Gt;cn+=2){const Ma=i[It[cn]][It[cn+1]].subscribe(p),Md=Me.length;Me.push(p,Ma),Z&&Z.push(u,l.index,Md,-(Md+1))}}}(p,u,u[11],_,n,i,!!s,l),ep}function $_(n,i,s,l){try{return!1!==s(l)}catch(u){return fl(n,u),!1}}function tp(n,i,s,l,u){return function p(_){if(_===Function)return l;const E=2&n.flags?Nt(n.index,i):i;0==(32&i[2])&&eu(E);let I=$_(i,0,l,_),G=p.__ngNextListenerFn__;for(;G;)I=$_(i,0,G,_)&&I,G=G.__ngNextListenerFn__;return u&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function np(n=1){return function nc(n){return(Bn.lFrame.contextLView=function ic(n,i){for(;n>0;)i=i[15],n--;return i}(n,Bn.lFrame.contextLView))[8]}(n)}function dm(n,i){let s=null;const l=function Xv(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let u=0;u<i.length;u++){const p=i[u];if("*"!==p){if(null===l?fg(n,p,!0):e_(l,p))return u}else s=u}return s}function ip(n){const i=ht()[16][6];if(!i.projection){const l=i.projection=Mr(n?n.length:1,null),u=l.slice();let p=i.child;for(;null!==p;){const _=n?dm(p,n):0;null!==_&&(u[_]?u[_].projectionNext=p:l[_]=p,u[_]=p),p=p.next}}}function fd(n,i=0,s){const l=ht(),u=ii(),p=yc(u,20+n,16,null,s||null);null===p.projection&&(p.projection=i),Ta(),64!=(64&p.flags)&&function Wv(n,i,s){lg(i[11],0,i,s,Kh(n,s,i),tf(s.parent||i[6],s,i))}(u,l,p)}function wh(n,i,s){return rp(n,"",i,"",s),wh}function rp(n,i,s,l,u){const p=ht(),_=Ha(p,i,s,l);return _!==qn&&Ys(ii(),Ii(),p,n,_,p[11],u,!1),rp}function ql(n,i,s,l,u){const p=n[s+1],_=null===i;let E=l?ha(p):hl(p),I=!1;for(;0!==E&&(!1===I||_);){const Z=n[E+1];X0(n[E],i)&&(I=!0,n[E+1]=l?df(Z):cf(Z)),E=l?ha(Z):hl(Z)}I&&(n[s+1]=l?cf(p):df(p))}function X0(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&$s(n,i)>=0}const _s={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $l(n){return n.substring(_s.key,_s.keyEnd)}function Yl(n,i){const s=_s.textEnd;return s===i?-1:(i=_s.keyEnd=function K_(n,i,s){for(;i<s&&n.charCodeAt(i)>32;)i++;return i}(n,_s.key=i,s),Jl(n,i,s))}function Jl(n,i,s){for(;i<s&&n.charCodeAt(i)<=32;)i++;return i}function cp(n,i,s){return ma(n,i,s,!1),cp}function up(n,i){return ma(n,i,null,!0),up}function ar(n){va(ro,Za,n,!0)}function Za(n,i){for(let s=function X_(n){return function _m(n){_s.key=0,_s.keyEnd=0,_s.value=0,_s.valueEnd=0,_s.textEnd=n.length}(n),Yl(n,Jl(n,0,_s.textEnd))}(i);s>=0;s=Yl(i,s))ro(n,$l(i),!0)}function ma(n,i,s,l){const u=ht(),p=ii(),_=Ws(2);p.firstUpdatePass&&bm(p,n,_,l),i!==qn&&vs(u,_,i)&&pd(p,p.data[Dr()],u,u[11],n,u[_+1]=function tx(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ge(cl(n)))),n}(i,s),l,_)}function va(n,i,s,l){const u=ii(),p=Ws(2);u.firstUpdatePass&&bm(u,null,p,l);const _=ht();if(s!==qn&&vs(_,p,s)){const E=u.data[Dr()];if(_l(E,l)&&!Mh(u,p)){let I=l?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(s=Ft(I,s||"")),cd(u,E,_,s,l)}else!function Em(n,i,s,l,u,p,_,E){u===qn&&(u=ni);let I=0,G=0,Z=0<u.length?u[0]:null,se=0<p.length?p[0]:null;for(;null!==Z||null!==se;){const Me=I<u.length?u[I+1]:void 0,Oe=G<p.length?p[G+1]:void 0;let It,ot=null;Z===se?(I+=2,G+=2,Me!==Oe&&(ot=se,It=Oe)):null===se||null!==Z&&Z<se?(I+=2,ot=Z):(G+=2,ot=se,It=Oe),null!==ot&&pd(n,i,s,l,ot,It,_,E),Z=I<u.length?u[I]:null,se=G<p.length?p[G]:null}}(u,E,_,_[11],_[p+1],_[p+1]=function Mm(n,i,s){if(null==s||""===s)return ni;const l=[],u=cl(s);if(Array.isArray(u))for(let p=0;p<u.length;p++)n(l,u[p],!0);else if("object"==typeof u)for(const p in u)u.hasOwnProperty(p)&&n(l,p,u[p]);else"string"==typeof u&&i(l,u);return l}(n,i,s),l,p)}}function Mh(n,i){return i>=n.expandoStartIndex}function bm(n,i,s,l){const u=n.data;if(null===u[s+1]){const p=u[Dr()],_=Mh(n,s);_l(p,l)&&null===i&&!_&&(i=!1),i=function ty(n,i,s,l){const u=function Do(n){const i=Bn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let p=l?i.residualClasses:i.residualStyles;if(null===u)0===(l?i.classBindings:i.styleBindings)&&(s=Eh(s=hp(null,n,i,s,l),i.attrs,l),p=null);else{const _=i.directiveStylingLast;if(-1===_||n[_]!==u)if(s=hp(u,n,i,s,l),null===p){let I=function ex(n,i,s){const l=s?i.classBindings:i.styleBindings;if(0!==hl(l))return n[ha(l)]}(n,i,l);void 0!==I&&Array.isArray(I)&&(I=hp(null,n,i,I[1],l),I=Eh(I,i.attrs,l),function wm(n,i,s,l){n[ha(s?i.classBindings:i.styleBindings)]=l}(n,i,l,I))}else p=function dp(n,i,s){let l;const u=i.directiveEnd;for(let p=1+i.directiveStylingLast;p<u;p++)l=Eh(l,n[p].hostAttrs,s);return Eh(l,i.attrs,s)}(n,i,l)}return void 0!==p&&(l?i.residualClasses=p:i.residualStyles=p),s}(u,p,i,l),function gm(n,i,s,l,u,p){let _=p?i.classBindings:i.styleBindings,E=ha(_),I=hl(_);n[l]=s;let Z,G=!1;if(Array.isArray(s)){const se=s;Z=se[1],(null===Z||$s(se,Z)>0)&&(G=!0)}else Z=s;if(u)if(0!==I){const Me=ha(n[E+1]);n[l+1]=Gd(Me,E),0!==Me&&(n[Me+1]=uf(n[Me+1],l)),n[E+1]=function r_(n,i){return 131071&n|i<<17}(n[E+1],l)}else n[l+1]=Gd(E,0),0!==E&&(n[E+1]=uf(n[E+1],l)),E=l;else n[l+1]=Gd(I,0),0===E?E=l:n[I+1]=uf(n[I+1],l),I=l;G&&(n[l+1]=cf(n[l+1])),ql(n,Z,l,!0),ql(n,Z,l,!1),function J_(n,i,s,l,u){const p=u?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof i&&$s(p,i)>=0&&(s[l+1]=df(s[l+1]))}(i,Z,n,l,p),_=Gd(E,I),p?i.classBindings=_:i.styleBindings=_}(u,p,i,s,_,l)}}function hp(n,i,s,l,u){let p=null;const _=s.directiveEnd;let E=s.directiveStylingLast;for(-1===E?E=s.directiveStart:E++;E<_&&(p=i[E],l=Eh(l,p.hostAttrs,u),p!==n);)E++;return null!==n&&(s.directiveStylingLast=E),l}function Eh(n,i,s){const l=s?1:2;let u=-1;if(null!==i)for(let p=0;p<i.length;p++){const _=i[p];"number"==typeof _?u=_:u===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ro(n,_,!!s||i[++p]))}return void 0===n?null:n}function pd(n,i,s,l,u,p,_,E){if(!(3&i.type))return;const I=n.data,G=I[E+1];gd(function yg(n){return 1==(1&n)}(G)?Cm(I,i,s,u,hl(G),_):void 0)||(gd(p)||function _g(n){return 2==(2&n)}(G)&&(p=Cm(I,null,s,u,E,_)),function jv(n,i,s,l,u){const p=Tt(n);if(i)u?p?n.addClass(s,l):s.classList.add(l):p?n.removeClass(s,l):s.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ms.DashCase;if(null==u)p?n.removeStyle(s,l,_):s.style.removeProperty(l);else{const E="string"==typeof u&&u.endsWith("!important");E&&(u=u.slice(0,-10),_|=ms.Important),p?n.setStyle(s,l,u,_):s.style.setProperty(l,u,E?"important":"")}}}(l,_,V(Dr(),s),u,p))}function Cm(n,i,s,l,u,p){const _=null===i;let E;for(;u>0;){const I=n[u],G=Array.isArray(I),Z=G?I[1]:I,se=null===Z;let Me=s[u+1];Me===qn&&(Me=se?ni:void 0);let Oe=se?Uc(Me,l):Z===l?Me:void 0;if(G&&!gd(Oe)&&(Oe=Uc(I,l)),gd(Oe)&&(E=Oe,_))return E;const ot=n[u+1];u=_?ha(ot):hl(ot)}if(null!==i){let I=p?i.residualClasses:i.residualStyles;null!=I&&(E=Uc(I,l))}return E}function gd(n){return void 0!==n}function _l(n,i){return 0!=(n.flags&(i?16:32))}function md(n,i=""){const s=ht(),l=ii(),u=n+20,p=l.firstCreatePass?yc(l,u,1,i,null):l.data[u],_=s[u]=function Hd(n,i){return Tt(n)?n.createText(i):n.createTextNode(i)}(s[11],i);dl(l,s,_,p),hs(p,!1)}function vd(n){return Ch("",n,""),vd}function Ch(n,i,s){const l=ht(),u=Ha(l,n,i,s);return u!==qn&&Ua(l,Dr(),u),Ch}function Sh(n,i,s,l,u){const p=ht(),_=Gl(p,n,i,s,l,u);return _!==qn&&Ua(p,Dr(),_),Sh}function gp(n,i,s){va(ro,Za,Ha(ht(),n,i,s),!0)}const _u=void 0;var cx=["en",[["a","p"],["AM","PM"],_u],[["AM","PM"],_u,_u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_u,"{1} 'at' {0}",_u],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lx(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let _d={};function Pm(n){const i=function ux(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=vy(i);if(s)return s;const l=i.split("-")[0];if(s=vy(l),s)return s;if("en"===l)return cx;throw new Error(`Missing locale data for the locale "${n}".`)}function my(n){return Pm(n)[On.PluralCase]}function vy(n){return n in _d||(_d[n]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[n]),_d[n]}var On=(()=>((On=On||{})[On.LocaleId=0]="LocaleId",On[On.DayPeriodsFormat=1]="DayPeriodsFormat",On[On.DayPeriodsStandalone=2]="DayPeriodsStandalone",On[On.DaysFormat=3]="DaysFormat",On[On.DaysStandalone=4]="DaysStandalone",On[On.MonthsFormat=5]="MonthsFormat",On[On.MonthsStandalone=6]="MonthsStandalone",On[On.Eras=7]="Eras",On[On.FirstDayOfWeek=8]="FirstDayOfWeek",On[On.WeekendRange=9]="WeekendRange",On[On.DateFormat=10]="DateFormat",On[On.TimeFormat=11]="TimeFormat",On[On.DateTimeFormat=12]="DateTimeFormat",On[On.NumberSymbols=13]="NumberSymbols",On[On.NumberFormats=14]="NumberFormats",On[On.CurrencyCode=15]="CurrencyCode",On[On.CurrencySymbol=16]="CurrencySymbol",On[On.CurrencyName=17]="CurrencyName",On[On.Currencies=18]="Currencies",On[On.Directionality=19]="Directionality",On[On.PluralCase=20]="PluralCase",On[On.ExtraData=21]="ExtraData",On))();const _p="en-US";let _y=_p;function nn(n,i,s,l,u){if(n=Pt(n),Array.isArray(n))for(let p=0;p<n.length;p++)nn(n[p],i,s,l,u);else{const p=ii(),_=ht();let E=Cc(n)?n:Pt(n.provide),I=Ju(n);const G=or(),Z=1048575&G.providerIndexes,se=G.directiveStart,Me=G.providerIndexes>>20;if(Cc(n)||!n.multi){const Oe=new Zs(I,u,pu),ot=Pn(E,i,u?Z:Z+Me,se);-1===ot?(de(y(G,_),p,E),Vn(p,n,i.length),i.push(E),G.directiveStart++,G.directiveEnd++,u&&(G.providerIndexes+=1048576),s.push(Oe),_.push(Oe)):(s[ot]=Oe,_[ot]=Oe)}else{const Oe=Pn(E,i,Z+Me,se),ot=Pn(E,i,Z,Z+Me),It=Oe>=0&&s[Oe],Gt=ot>=0&&s[ot];if(u&&!Gt||!u&&!It){de(y(G,_),p,E);const cn=function Vr(n,i,s,l,u){const p=new Zs(n,s,pu);return p.multi=[],p.index=i,p.componentProviders=0,bt(p,u,l&&!s),p}(u?Ir:Ci,s.length,u,l,I);!u&&Gt&&(s[ot].providerFactory=cn),Vn(p,n,i.length,0),i.push(E),G.directiveStart++,G.directiveEnd++,u&&(G.providerIndexes+=1048576),s.push(cn),_.push(cn)}else Vn(p,n,Oe>-1?Oe:ot,bt(s[u?ot:Oe],I,!u&&l));!u&&l&&Gt&&s[ot].componentProviders++}}}function Vn(n,i,s,l){const u=Cc(i),p=function na(n){return!!n.useClass}(i);if(u||p){const I=(p?Pt(i.useClass):i).prototype.ngOnDestroy;if(I){const G=n.destroyHooks||(n.destroyHooks=[]);if(!u&&i.multi){const Z=G.indexOf(s);-1===Z?G.push(s,[l,I]):G[Z+1].push(l,I)}else G.push(s,I)}}}function bt(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function Pn(n,i,s,l){for(let u=s;u<l;u++)if(i[u]===n)return u;return-1}function Ci(n,i,s,l){return ao(this.multi,[])}function Ir(n,i,s,l){const u=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ns(s,s[1],this.providerFactory.index,l);p=E.slice(0,_),ao(u,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],ao(u,p);return p}function ao(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function _a(n,i=[]){return s=>{s.providersResolver=(l,u)=>function _n(n,i,s){const l=ii();if(l.firstCreatePass){const u=dt(n);nn(s,l.data,l.blueprint,u,!0),nn(i,l.data,l.blueprint,u,!1)}}(l,u?u(n):n,i)}}class yd{}class Cy{resolveComponentFactory(i){throw function My(n){const i=Error(`No component factory found for ${Ge(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let xd=(()=>{class n{}return n.NULL=new Cy,n})();function Sy(){return ue(or(),ht())}function ue(n,i){return new Be(O(n,i))}let Be=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Sy,n})();function st(n){return n instanceof Be?n.nativeElement:n}class Mt{}let $n=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fi(){const n=ht(),s=Nt(or().index,n);return function Xn(n){return n[11]}(Tr(s)?s:n)}(),n})(),ai=(()=>{class n{}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:()=>null}),n})();class qi{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Li=new qi("13.2.2"),Ri={};function _r(n,i,s,l,u=!1){for(;null!==s;){const p=i[s.index];if(null!==p&&l.push(vn(p)),j(p))for(let E=10;E<p.length;E++){const I=p[E],G=I[1].firstChild;null!==G&&_r(I[1],I,G,l)}const _=s.type;if(8&_)_r(n,i,s.child,l);else if(32&_){const E=Ud(s,i);let I;for(;I=E();)l.push(I)}else if(16&_){const E=Us(i,s);if(Array.isArray(E))l.push(...E);else{const I=ul(i[16]);_r(I[1],I,E,l,!0)}}s=u?s.projectionNext:s.next}return l}class ya{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return _r(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(j(i)){const s=i[8],l=s?s.indexOf(this):-1;l>-1&&(Xh(i,l),Rl(s,l))}this._attachedToViewContainer=!1}ig(this._lView[1],this._lView)}onDestroy(i){Pg(this._lView[1],this._lView,null,i)}markForCheck(){eu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){th(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qu(n,i,s){es(!0);try{th(n,i,s)}finally{es(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new fn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tg(n,i){ku(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new fn(902,"");this._appRef=i}}class yu extends ya{constructor(i){super(i),this._view=i}detectChanges(){ju(this._view)}checkNoChanges(){!function kg(n){es(!0);try{ju(n)}finally{es(!1)}}(this._view)}get context(){return null}}class Ui extends xd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Yi(i);return new ra(s,this.ngModule)}}function xa(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}const ja=new ri("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xp});class ra extends yd{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function n_(n){return n.map(t_).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return xa(this.componentDef.inputs)}get outputs(){return xa(this.componentDef.outputs)}create(i,s,l,u){const p=(u=u||this.ngModule)?function Lh(n,i){return{get:(s,l,u)=>{const p=n.get(s,Ri,u);return p!==Ri||l===Ri?p:i.get(s,l,u)}}}(i,u.injector):i,_=p.get(Mt,wi),E=p.get(ai,null),I=_.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Z=l?function Rg(n,i,s){if(Tt(n))return n.selectRootElement(i,s===on.ShadowDom);let l="string"==typeof i?n.querySelector(i):i;return l.textContent="",l}(I,l,this.componentDef.encapsulation):jc(_.createRenderer(null,this.componentDef),G,function ys(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?k:null}(G)),se=this.componentDef.onPush?576:528,Me=function Bf(n,i){return{components:[],scheduler:n||Xp,clean:Ug,playerHandler:i||null,flags:0}}(),Oe=ka(0,null,null,1,0,null,null,null,null,null),ot=Bu(null,Oe,Me,se,null,null,_,I,E,p);let It,Gt;to(ot);try{const cn=function Ba(n,i,s,l,u,p){const _=s[1];s[20]=n;const I=yc(_,20,2,"#host",null),G=I.mergedAttrs=i.hostAttrs;null!==G&&(ta(I,G,!0),null!==n&&(Lo(u,n,G),null!==I.classes&&lf(u,n,I.classes),null!==I.styles&&cg(u,n,I.styles)));const Z=l.createRenderer(n,i),se=Bu(s,Cf(i),null,i.onPush?64:16,s[20],I,l,Z,p||null,null);return _.firstCreatePass&&(de(y(I,s),_,i.type),Zu(_,I),Tf(I,s.length,1)),Qd(s,se),s[20]=se}(Z,this.componentDef,ot,_,I);if(Z)if(l)Lo(I,Z,["ng-version",Li.full]);else{const{attrs:wt,classes:Dn}=function i_(n){const i=[],s=[];let l=1,u=2;for(;l<n.length;){let p=n[l];if("string"==typeof p)2===u?""!==p&&i.push(p,n[++l]):8===u&&s.push(p);else{if(!da(u))break;u=p}l++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);wt&&Lo(I,Z,wt),Dn&&Dn.length>0&&lf(I,Z,Dn.join(" "))}if(Gt=X(Oe,20),void 0!==s){const wt=Gt.projection=[];for(let Dn=0;Dn<this.ngContentSelectors.length;Dn++){const Si=s[Dn];wt.push(null!=Si?Array.from(Si):null)}}It=function qg(n,i,s,l,u){const p=s[1],_=function Hu(n,i,s){const l=or();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Yd(n,l,i,Nl(n,i,1,null),s));const u=Ns(i,n,l.directiveStart,l);so(u,i);const p=O(l,i);return p&&so(p,i),u}(p,s,i);if(l.components.push(_),n[8]=_,u&&u.forEach(I=>I(_,i)),i.contentQueries){const I=or();i.contentQueries(1,_,I.directiveStart)}const E=or();return!p.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(no(E.index),Mc(s[1],E,0,E.directiveStart,E.directiveEnd,i),Gu(i,_)),_}(cn,this.componentDef,ot,Me,[Bl]),xc(Oe,ot,null)}finally{Ra()}return new bd(this.componentType,It,ue(Gt,ot),ot,Gt)}}class bd extends class yl{}{constructor(i,s,l,u,p){super(),this.location=l,this._rootLView=u,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new yu(u),this.componentType=i}get injector(){return new is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Oh{}class xx{}const Nh=new Map;class Mx extends Oh{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ui(this);const l=Fi(i);this._bootstrapComponents=Na(l.bootstrap),this._r3Injector=Hg(i,s,[{provide:Oh,useValue:this},{provide:xd,useValue:this.componentFactoryResolver}],Ge(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=oo.THROW_IF_NOT_FOUND,l=he.Default){return i===oo||i===Oh||i===nu?this:this._r3Injector.get(i,s,l)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ty extends xx{constructor(i){super(),this.moduleType=i,null!==Fi(i)&&function Vb(n){const i=new Set;!function s(l){const u=Fi(l,!0),p=u.id;null!==p&&(function bx(n,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${n} - ${Ge(i)} vs ${Ge(i.name)}`)}(p,Nh.get(p),l),Nh.set(p,l));const _=Na(u.imports);for(const E of _)i.has(E)||(i.add(E),s(E))}(n)}(i)}create(i){return new Mx(this.moduleType,i)}}function Ex(n,i,s){const l=fs()+n,u=ht();return u[l]===qn?fa(u,l,s?i.call(s):i()):function Hl(n,i){return n[i]}(u,l)}function Cx(n,i,s,l,u){return function Tx(n,i,s,l,u,p,_){const E=i+s;return Sc(n,E,u,p)?fa(n,E+2,_?l.call(_,u,p):l(u,p)):bp(n,E+2)}(ht(),fs(),n,i,s,l,u)}function bp(n,i){const s=n[i];return s===qn?void 0:s}function Px(n,i){const s=ii();let l;const u=n+20;s.firstCreatePass?(l=function Yb(n,i){if(i)for(let s=i.length-1;s>=0;s--){const l=i[s];if(n===l.name)return l}}(i,s.pipeRegistry),s.data[u]=l,l.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(u,l.onDestroy)):l=s.data[u];const p=l.factory||(l.factory=co(l.type)),_=fe(pu);try{const E=tl(!1),I=p();return tl(E),function gh(n,i,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=l}(s,ht(),u,I),I}finally{fe(_)}}function Ix(n,i,s){const l=n+20,u=ht(),p=We(u,l);return function wp(n,i){return n[1].data[i].pure}(u,l)?function Sx(n,i,s,l,u,p){const _=i+s;return vs(n,_,u)?fa(n,_+1,p?l.call(p,u):l(u)):bp(n,_+1)}(u,fs(),i,p.transform,s,p):p.transform(s)}function Ay(n){return i=>{setTimeout(n,void 0,i)}}const Xl=class ew extends Ae.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,l){var u,p,_;let E=i,I=s||(()=>null),G=l;if(i&&"object"==typeof i){const se=i;E=null===(u=se.next)||void 0===u?void 0:u.bind(se),I=null===(p=se.error)||void 0===p?void 0:p.bind(se),G=null===(_=se.complete)||void 0===_?void 0:_.bind(se)}this.__isAsync&&(I=Ay(I),E&&(E=Ay(E)),G&&(G=Ay(G)));const Z=super.subscribe({next:E,error:I,complete:G});return i instanceof Ie.w&&i.add(Z),Z}};function tw(){return this._results[Vl()]()}class Dy{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Vl(),l=Dy.prototype;l[s]||(l[s]=tw)}get changes(){return this._changes||(this._changes=new Xl)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const l=this;l.dirty=!1;const u=Fs(i);(this._changesDetected=!function Fc(n,i,s){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){let u=n[l],p=i[l];if(s&&(u=s(u),p=s(p)),p!==u)return!1}return!0}(l._results,u,s))&&(l._results=u,l.length=u.length,l.last=u[this.length-1],l.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Mp=(()=>{class n{}return n.__NG_ELEMENT_ID__=rw,n})();const nw=Mp,iw=class extends nw{constructor(i,s,l){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(i){const s=this._declarationTContainer.tViews,l=Bu(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(s)),xc(s,l,i),new ya(l)}};function rw(){return Im(or(),ht())}function Im(n,i){return 4&n.type?new iw(i,n,ue(n,i)):null}let Lm=(()=>{class n{}return n.__NG_ELEMENT_ID__=sw,n})();function sw(){return Nx(or(),ht())}const ow=Lm,Lx=class extends ow{constructor(i,s,l){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=l}get element(){return ue(this._hostTNode,this._hostLView)}get injector(){return new is(this._hostTNode,this._hostLView)}get parentInjector(){const i=J(this._hostTNode,this._hostLView);if(Oc(i)){const s=Fo(i,this._hostLView),l=ea(i);return new is(s[1].data[l+8],s)}return new is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Ox(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,l){const u=i.createEmbeddedView(s||{});return this.insert(u,l),u}createComponent(i,s,l,u,p){const _=i&&!function Pa(n){return"function"==typeof n}(i);let E;if(_)E=s;else{const se=s||{};E=se.index,l=se.injector,u=se.projectableNodes,p=se.ngModuleRef}const I=_?i:new ra(Yi(i)),G=l||this.parentInjector;if(!p&&null==I.ngModule&&G){const se=G.get(Oh,null);se&&(p=se)}const Z=I.create(G,u,void 0,p);return this.insert(Z.hostView,E),Z}insert(i,s){const l=i._lView,u=l[1];if(function eo(n){return j(n[3])}(l)){const Z=this.indexOf(i);if(-1!==Z)this.detach(Z);else{const se=l[3],Me=new Lx(se,se[6],se[3]);Me.detach(Me.indexOf(i))}}const p=this._adjustIndex(s),_=this._lContainer;!function Vv(n,i,s,l){const u=10+l,p=s.length;l>0&&(s[u-1][4]=i),l<p-10?(i[4]=s[u],Eu(s,10+l,i)):(s.push(i),i[4]=null),i[3]=s;const _=i[17];null!==_&&s!==_&&function Hv(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(_,i);const E=i[19];null!==E&&E.insertView(n),i[2]|=128}(u,l,_,p);const E=qc(p,_),I=l[11],G=Fu(I,_[7]);return null!==G&&function eg(n,i,s,l,u,p){l[0]=u,l[6]=i,ku(n,l,s,1,u,p)}(u,_[6],I,l,G,E),i.attachToViewContainerRef(),Eu(Ry(_),p,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Ox(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),l=Xh(this._lContainer,s);l&&(Rl(Ry(this._lContainer),s),ig(l[1],l))}detach(i){const s=this._adjustIndex(i,-1),l=Xh(this._lContainer,s);return l&&null!=Rl(Ry(this._lContainer),s)?new ya(l):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Ox(n){return n[8]}function Ry(n){return n[8]||(n[8]=[])}function Nx(n,i){let s;const l=i[n.index];if(j(l))s=l;else{let u;if(8&n.type)u=vn(l);else{const p=i[11];u=p.createComment("");const _=O(n,i);_c(p,Fu(p,_),u,function og(n,i){return Tt(n)?n.nextSibling(i):i.nextSibling}(p,_),!1)}i[n.index]=s=Af(l,i,u,n),Qd(i,s)}return new Lx(s,n,i)}class Py{constructor(i){this.queryList=i,this.matches=null}clone(){return new Py(this.queryList)}setDirty(){this.queryList.setDirty()}}class Iy{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const l=null!==i.contentQueries?i.contentQueries[0]:s.length,u=[];for(let p=0;p<l;p++){const _=s.getByIndex(p);u.push(this.queries[_.indexInDeclarationView].clone())}return new Iy(u)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Wx(i,s).matches&&this.queries[s].setDirty()}}class Fx{constructor(i,s,l=null){this.predicate=i,this.flags=s,this.read=l}}class Ly{constructor(i=[]){this.queries=i}elementStart(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let l=0;l<this.length;l++){const u=null!==s?s.length:0,p=this.getByIndex(l).embeddedTView(i,u);p&&(p.indexInDeclarationView=l,null!==s?s.push(p):s=[p])}return null!==s?new Ly(s):null}template(i,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Oy{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new Oy(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=i.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const p=l[u];this.matchTNodeWithReadOption(i,s,cw(s,p)),this.matchTNodeWithReadOption(i,s,ui(s,i,p,!1,!1))}else l===Mp?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,ui(s,i,l,!1,!1))}matchTNodeWithReadOption(i,s,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Be||u===Lm||u===Mp&&4&s.type)this.addMatch(s.index,-2);else{const p=ui(s,i,u,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,l)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function cw(n,i){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===i)return s[l+1];return null}function dw(n,i,s,l){return-1===s?function uw(n,i){return 11&n.type?ue(n,i):4&n.type?Im(n,i):null}(i,n):-2===s?function hw(n,i,s){return s===Be?ue(i,n):s===Mp?Im(i,n):s===Lm?Nx(i,n):void 0}(n,i,l):Ns(n,n[1],s,i)}function kx(n,i,s,l){const u=i[19].queries[l];if(null===u.matches){const p=n.data,_=s.matches,E=[];for(let I=0;I<_.length;I+=2){const G=_[I];E.push(G<0?null:dw(i,p[G],_[I+1],s.metadata.read))}u.matches=E}return u.matches}function Ny(n,i,s,l){const u=n.queries.getByIndex(s),p=u.matches;if(null!==p){const _=kx(n,i,u,s);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const G=p[E+1],Z=i[-I];for(let se=10;se<Z.length;se++){const Me=Z[se];Me[17]===Me[3]&&Ny(Me[1],Me,G,l)}if(null!==Z[9]){const se=Z[9];for(let Me=0;Me<se.length;Me++){const Oe=se[Me];Ny(Oe[1],Oe,G,l)}}}}}return l}function Ux(n){const i=ht(),s=ii(),l=ca();Ro(l+1);const u=Wx(s,l);if(n.dirty&&Hi(i)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const p=u.crossesNgTemplate?Ny(s,i,l,[]):kx(s,i,u,l);n.reset(p,st),n.notifyOnChanges()}return!0}return!1}function Bx(n,i,s){const l=ii();l.firstCreatePass&&(Gx(l,new Fx(n,i,s),-1),2==(2&i)&&(l.staticViewQueries=!0)),zx(l,ht(),i)}function Vx(n,i,s,l){const u=ii();if(u.firstCreatePass){const p=or();Gx(u,new Fx(i,s,l),p.index),function pw(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(u,n),2==(2&s)&&(u.staticContentQueries=!0)}zx(u,ht(),s)}function Hx(){return function fw(n,i){return n[19].queries[i].queryList}(ht(),ca())}function zx(n,i,s){const l=new Dy(4==(4&s));Pg(n,i,l,l.destroy),null===i[19]&&(i[19]=new Iy),i[19].queries.push(new Py(l))}function Gx(n,i,s){null===n.queries&&(n.queries=new Ly),n.queries.track(new Oy(i,s))}function Wx(n,i){return n.queries.getByIndex(i)}function Fm(...n){}const Hy=new ri("Application Initializer");let kh=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Fm,this.reject=Fm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,u)=>{this.resolve=l,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const p=this.appInits[u]();if(bh(p))s.push(p);else if(dd(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});s.push(_)}}Promise.all(s).then(()=>{l()}).catch(u=>{this.reject(u)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ts(Hy,8))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const ab=new ri("AppId"),Lw={provide:ab,useFactory:function Iw(){return`${zy()}${zy()}${zy()}`},deps:[]};function zy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lb=new ri("Platform Initializer"),cb=new ri("Platform ID"),ub=new ri("appBootstrapListener");let db=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const km=new ri("LocaleId"),hb=new ri("DefaultCurrencyCode");class Ow{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let Gy=(()=>{class n{compileModuleSync(s){return new Ty(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),p=Na(Fi(s).declarations).reduce((_,E)=>{const I=Yi(E);return I&&_.push(new ra(I)),_},[]);return new Ow(l,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();const Fw=(()=>Promise.resolve(0))();function Wy(n){"undefined"==typeof Zone?Fw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class wa{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xl(!1),this.onMicrotaskEmpty=new Xl(!1),this.onStable=new Xl(!1),this.onError=new Xl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!l&&s,u.shouldCoalesceRunChangeDetection=l,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function kw(){let n=Nn.requestAnimationFrame,i=Nn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=i[Zone.__symbol__("OriginalDelegate")];l&&(i=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Vw(n){const i=()=>{!function Bw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jy(n),n.isCheckStableRunning=!0,Zy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,u,p,_,E)=>{try{return fb(n),s.invokeTask(u,p,_,E)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&i(),pb(n)}},onInvoke:(s,l,u,p,_,E,I)=>{try{return fb(n),s.invoke(u,p,_,E,I)}finally{n.shouldCoalesceRunChangeDetection&&i(),pb(n)}},onHasTask:(s,l,u,p)=>{s.hasTask(u,p),l===u&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,jy(n),Zy(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,l,u,p)=>(s.handleError(u,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,l){return this._inner.run(i,s,l)}runTask(i,s,l,u){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+u,i,Uw,Fm,Fm);try{return p.runTask(_,s,l)}finally{p.cancelTask(_)}}runGuarded(i,s,l){return this._inner.runGuarded(i,s,l)}runOutsideAngular(i){return this._outer.run(i)}}const Uw={};function Zy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pb(n){n._nesting--,Zy(n)}class Hw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xl,this.onMicrotaskEmpty=new Xl,this.onStable=new Xl,this.onError=new Xl}run(i,s,l){return i.apply(s,l)}runGuarded(i,s,l){return i.apply(s,l)}runOutsideAngular(i){return i()}runTask(i,s,l,u){return i.apply(s,l)}}let gb=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wa.assertNotInAngularZone(),Wy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wy(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,u){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:u})}whenStable(s,l,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,l,u){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ts(wa))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})(),mb=(()=>{class n{constructor(){this._applications=new Map,qy.addToWindow(this)}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return qy.findTestabilityInTree(this,s,l)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();class zw{addToWindow(i){}findTestabilityInTree(i,s,l){return null}}function Gw(n){qy=n}let bl,qy=new zw;const vb=new ri("AllowMultipleToken");class jw{constructor(i,s){this.name=i,this.token=s}}function _b(n,i,s=[]){const l=`Platform: ${i}`,u=new ri(l);return(p=[])=>{let _=yb();if(!_||_.injector.get(vb,!1))if(n)n(s.concat(p).concat({provide:u,useValue:!0}));else{const E=s.concat(p).concat({provide:u,useValue:!0},{provide:iu,useValue:"platform"});!function qw(n){if(bl&&!bl.destroyed&&!bl.injector.get(vb,!1))throw new fn(400,"");bl=n.get(xb);const i=n.get(lb,null);i&&i.forEach(s=>s())}(oo.create({providers:E,name:l}))}return function $w(n){const i=yb();if(!i)throw new fn(401,"");return i}()}}function yb(){return bl&&!bl.destroyed?bl:null}let xb=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const E=function Yw(n,i){let s;return s="noop"===n?new Hw:("zone.js"===n?void 0:n)||new wa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:wa,useValue:E}];return E.run(()=>{const G=oo.create({providers:I,parent:this.injector,name:s.moduleType.name}),Z=s.create(G),se=Z.injector.get(Od,null);if(!se)throw new fn(402,"");return E.runOutsideAngular(()=>{const Me=E.onError.subscribe({next:Oe=>{se.handleError(Oe)}});Z.onDestroy(()=>{$y(this._modules,Z),Me.unsubscribe()})}),function Jw(n,i,s){try{const l=s();return bh(l)?l.catch(u=>{throw i.runOutsideAngular(()=>n.handleError(u)),u}):l}catch(l){throw i.runOutsideAngular(()=>n.handleError(l)),l}}(se,E,()=>{const Me=Z.injector.get(kh);return Me.runInitializers(),Me.donePromise.then(()=>(function px(n){jt(n,"Expected localeId to be defined"),"string"==typeof n&&(_y=n.toLowerCase().replace(/_/g,"-"))}(Z.injector.get(km,_p)||_p),this._moduleDoBootstrap(Z),Z))})})}bootstrapModule(s,l=[]){const u=bb({},l);return function Ww(n,i,s){const l=new Ty(s);return Promise.resolve(l)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,u))}_moduleDoBootstrap(s){const l=s.injector.get(Cp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>l.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new fn(403,"");s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fn(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ts(oo))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function bb(n,i){return Array.isArray(i)?i.reduce(bb,n):Object.assign(Object.assign({},n),i)}let Cp=(()=>{class n{constructor(s,l,u,p,_){this._zone=s,this._injector=l,this._exceptionHandler=u,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new S.y(G=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{G.next(this._stable),G.complete()})}),I=new S.y(G=>{let Z;this._zone.runOutsideAngular(()=>{Z=this._zone.onStable.subscribe(()=>{wa.assertNotInAngularZone(),Wy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,G.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{wa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{G.next(!1)}))});return()=>{Z.unsubscribe(),se.unsubscribe()}});this.isStable=function pe(...n){let i=Number.POSITIVE_INFINITY,s=null,l=n[n.length-1];return(0,a.K)(l)?(s=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(i=n.pop())):"number"==typeof l&&(i=n.pop()),null===s&&1===n.length&&n[0]instanceof S.y?n[0]:(0,qe.J)(i)((0,ke.n)(n,s))}(E,I.pipe(function Ne(){return n=>(0,_e.x)()(function Ce(n,i){return function(l){let u;if(u="function"==typeof n?n:function(){return n},"function"==typeof i)return l.lift(new ae(u,i));const p=Object.create(l,Ue.N);return p.source=l,p.subjectFactory=u,p}}(Re)(n))}()))}bootstrap(s,l){if(!this._initStatus.done)throw new fn(405,"");let u;u=s instanceof yd?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(u.componentType);const p=function Zw(n){return n.isBoundToModule}(u)?void 0:this._injector.get(Oh),E=u.create(oo.NULL,[],l||u.selector,p),I=E.location.nativeElement,G=E.injector.get(gb,null),Z=G&&E.injector.get(mb);return G&&Z&&Z.registerApplication(I,G),E.onDestroy(()=>{this.detachView(E.hostView),$y(this.components,E),Z&&Z.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new fn(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;$y(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(ub,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ts(wa),Ts(oo),Ts(Od),Ts(xd),Ts(kh))},n.\u0275prov=Tn({token:n,factory:n.\u0275fac}),n})();function $y(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let Mb=!0;function Kw(){Mb=!1}let Qw=(()=>{class n{}return n.__NG_ELEMENT_ID__=eM,n})();function eM(n){return function tM(n,i,s){if(ge(n)&&!s){const l=Nt(n.index,i);return new ya(l,l)}return 47&n.type?new ya(i[16],i):null}(or(),ht(),16==(16&n))}function oM(n){return null}class Ab{constructor(){}supports(i){return Va(i)}create(i){return new lM(i)}}const aM=(n,i)=>i;class lM{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||aM}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,l=this._removalsHead,u=0,p=null;for(;s||l;){const _=!l||s&&s.currentIndex<Rb(l,u,p)?s:l,E=Rb(_,u,p),I=_.currentIndex;if(_===l)u--,l=l._nextRemoved;else if(s=s._next,null==_.previousIndex)u++;else{p||(p=[]);const G=E-u,Z=I-u;if(G!=Z){for(let Me=0;Me<G;Me++){const Oe=Me<p.length?p[Me]:p[Me]=0,ot=Oe+Me;Z<=ot&&ot<G&&(p[Me]=Oe+1)}p[_.previousIndex]=Z-G}}E!==I&&i(_,E,I)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Va(i))throw new fn(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,p,_,s=this._itHead,l=!1;if(Array.isArray(i)){this.length=i.length;for(let E=0;E<this.length;E++)p=i[E],_=this._trackByFn(E,p),null!==s&&Object.is(s.trackById,_)?(l&&(s=this._verifyReinsertion(s,p,_,E)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,_,E),l=!0),s=s._next}else u=0,function Pr(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[Vl()]();let l;for(;!(l=s.next()).done;)i(l.value)}}(i,E=>{_=this._trackByFn(u,E),null!==s&&Object.is(s.trackById,_)?(l&&(s=this._verifyReinsertion(s,E,_,u)),Object.is(s.item,E)||this._addIdentityChange(s,E)):(s=this._mismatch(s,E,_,u),l=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,l,u){let p;return null===i?p=this._itTail:(p=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,p,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,p,u)):i=this._addAfter(new cM(s,l),p,u),i}_verifyReinsertion(i,s,l,u){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?i=this._reinsertAfter(p,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,p=i._nextRemoved;return null===u?this._removalsHead=p:u._nextRemoved=p,null===p?this._removalsTail=u:p._prevRemoved=u,this._insertAfter(i,s,l),this._addToMoves(i,l),i}_moveAfter(i,s,l){return this._unlink(i),this._insertAfter(i,s,l),this._addToMoves(i,l),i}_addAfter(i,s,l){return this._insertAfter(i,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,l){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new Db),this._linkedRecords.put(i),i.currentIndex=l,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,l=i._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Db),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class cM{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uM{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,i))return l;return null}remove(i){const s=i._prevDup,l=i._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class Db{constructor(){this.map=new Map}put(i){const s=i.trackById;let l=this.map.get(s);l||(l=new uM,this.map.set(s,l)),l.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rb(n,i,s){const l=n.previousIndex;if(null===l)return l;let u=0;return s&&l<s.length&&(u=s[l]),l+i+u}class Pb{constructor(){}supports(i){return i instanceof Map||su(i)}create(){return new dM}}class dM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||su(i)))throw new fn(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(l,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(u,l);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const l=i._prev;return s._next=i,s._prev=l,i._prev=s,l&&(l._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const p=u._prev,_=u._next;return p&&(p._next=_),_&&(_._prev=p),u._next=null,u._prev=null,u}const l=new hM(i);return this._records.set(i,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(l=>s(i[l],l))}}class hM{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ib(){return new Vm([new Ab])}let Vm=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const u=l.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||Ib()),deps:[[n,new Vc,new fc]]}}find(s){const l=this.factories.find(u=>u.supports(s));if(null!=l)return l;throw new fn(901,"")}}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:Ib}),n})();function Lb(){return new Hm([new Pb])}let Hm=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const u=l.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||Lb()),deps:[[n,new Vc,new fc]]}}find(s){const l=this.factories.find(p=>p.supports(s));if(l)return l;throw new fn(901,"")}}return n.\u0275prov=Tn({token:n,providedIn:"root",factory:Lb}),n})();const fM=[new Pb],gM=new Vm([new Ab]),mM=new Hm(fM),vM=_b(null,"core",[{provide:cb,useValue:"unknown"},{provide:xb,deps:[oo]},{provide:mb,deps:[]},{provide:db,deps:[]}]),wM=[{provide:Cp,useClass:Cp,deps:[wa,oo,Od,xd,kh]},{provide:ja,deps:[wa],useFactory:function MM(n){let i=[];return n.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:kh,useClass:kh,deps:[[new fc,Hy]]},{provide:Gy,useClass:Gy,deps:[]},Lw,{provide:Vm,useFactory:function _M(){return gM},deps:[]},{provide:Hm,useFactory:function yM(){return mM},deps:[]},{provide:km,useFactory:function xM(n){return n||function bM(){return"undefined"!=typeof $localize&&$localize.locale||_p}()},deps:[[new Au(km),new fc,new Vc]]},{provide:hb,useValue:"USD"}];let EM=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ts(Cp))},n.\u0275mod=rr({type:n}),n.\u0275inj=pr({providers:wM}),n})()},3075:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{Fj:()=>et,on:()=>kr,u5:()=>wi,nD:()=>q,JJ:()=>xr,JL:()=>Yr,F:()=>Fn,On:()=>bi,Q7:()=>aa,_Y:()=>br});var S=Q(2096),a=Q(9808),qe=Q(5254),ke=Q(567),pe=Q(4850);let Ae=(()=>{class V{constructor(L,X){this._renderer=L,this._elementRef=X,this.onChange=We=>{},this.onTouched=()=>{}}setProperty(L,X){this._renderer.setProperty(this._elementRef.nativeElement,L,X)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(S.Qsj),S.Y36(S.SBq))},V.\u0275dir=S.lG2({type:V}),V})(),Ie=(()=>{class V extends Ae{}return V.\u0275fac=function(){let O;return function(X){return(O||(O=S.n5z(V)))(X||V)}}(),V.\u0275dir=S.lG2({type:V,features:[S.qOj]}),V})();const Ue=new S.OlP("NgValueAccessor"),_e={provide:Ue,useExisting:(0,S.Gpc)(()=>et),multi:!0},Ne=new S.OlP("CompositionEventMode");let et=(()=>{class V extends Ae{constructor(L,X,We){super(L,X),this._compositionMode=We,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Re(){const V=(0,a.q)()?(0,a.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(L){this.setProperty("value",null==L?"":L)}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(S.Qsj),S.Y36(S.SBq),S.Y36(Ne,8))},V.\u0275dir=S.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,X){1&L&&S.NdJ("input",function(Nt){return X._handleInput(Nt.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(Nt){return X._compositionEnd(Nt.target.value)})},features:[S._Bn([_e]),S.qOj]}),V})();function rt(V){return null==V||0===V.length}const Ft=new S.OlP("NgValidators"),an=new S.OlP("NgAsyncValidators"),Ot=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function fn(V){return rt(V.value)?{required:!0}:null}function $e(V){return rt(V.value)||Ot.test(V.value)?null:{email:!0}}function ut(V){return null}function Ct(V){return null!=V}function kt(V){const O=(0,S.QGY)(V)?(0,qe.D)(V):V;return(0,S.CqO)(O),O}function Ut(V){let O={};return V.forEach(L=>{O=null!=L?Object.assign(Object.assign({},O),L):O}),0===Object.keys(O).length?null:O}function dn(V,O){return O.map(L=>L(V))}function hi(V){return V.map(O=>function Pi(V){return!V.validate}(O)?O:L=>O.validate(L))}function Lr(V){return null!=V?function xi(V){if(!V)return null;const O=V.filter(Ct);return 0==O.length?null:function(L){return Ut(dn(L,O))}}(hi(V)):null}function ir(V){return null!=V?function Yn(V){if(!V)return null;const O=V.filter(Ct);return 0==O.length?null:function(L){const X=dn(L,O).map(kt);return(0,ke.D)(X).pipe((0,pe.U)(Ut))}}(hi(V)):null}function xs(V,O){return null===V?[O]:Array.isArray(V)?[...V,O]:[V,O]}function vi(V){return V?Array.isArray(V)?V:[V]:[]}function jt(V,O){return Array.isArray(V)?V.includes(O):V===O}function kn(V,O){const L=vi(O);return vi(V).forEach(We=>{jt(L,We)||L.push(We)}),L}function Kn(V,O){return vi(O).filter(L=>!jt(V,L))}class ti{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=Lr(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=ir(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,L){return!!this.control&&this.control.hasError(O,L)}getError(O,L){return this.control?this.control.getError(O,L):null}}class Oi extends ti{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tn extends ti{get formDirective(){return null}get path(){return null}}class $i{constructor(O){this._cd=O}is(O){var L,X,We;return"submitted"===O?!!(null===(L=this._cd)||void 0===L?void 0:L.submitted):!!(null===(We=null===(X=this._cd)||void 0===X?void 0:X.control)||void 0===We?void 0:We[O])}}let xr=(()=>{class V extends $i{constructor(L){super(L)}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(Oi,2))},V.\u0275dir=S.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,X){2&L&&S.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))},features:[S.qOj]}),V})(),Yr=(()=>{class V extends $i{constructor(L){super(L)}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(Tn,10))},V.\u0275dir=S.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,X){2&L&&S.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))("ng-submitted",X.is("submitted"))},features:[S.qOj]}),V})();function yn(V,O){Nn(V,O),O.valueAccessor.writeValue(V.value),function li(V,O){O.valueAccessor.registerOnChange(L=>{V._pendingValue=L,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&ni(V,O)})}(V,O),function Jr(V,O){const L=(X,We)=>{O.valueAccessor.writeValue(X),We&&O.viewToModelUpdate(X)};V.registerOnChange(L),O._registerOnDestroy(()=>{V._unregisterOnChange(L)})}(V,O),function cr(V,O){O.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&ni(V,O),"submit"!==V.updateOn&&V.markAsTouched()})}(V,O),function Ki(V,O){if(O.valueAccessor.setDisabledState){const L=X=>{O.valueAccessor.setDisabledState(X)};V.registerOnDisabledChange(L),O._registerOnDestroy(()=>{V._unregisterOnDisabledChange(L)})}}(V,O)}function Hn(V,O){V.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(O)})}function Nn(V,O){const L=function pi(V){return V._rawValidators}(V);null!==O.validator?V.setValidators(xs(L,O.validator)):"function"==typeof L&&V.setValidators([L]);const X=function yr(V){return V._rawAsyncValidators}(V);null!==O.asyncValidator?V.setAsyncValidators(xs(X,O.asyncValidator)):"function"==typeof X&&V.setAsyncValidators([X]);const We=()=>V.updateValueAndValidity();Hn(O._rawValidators,We),Hn(O._rawAsyncValidators,We)}function ni(V,O){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}function Xr(V,O){const L=V.indexOf(O);L>-1&&V.splice(L,1)}const rr="VALID",Ni="INVALID",Nr="PENDING",Kr="DISABLED";function Yi(V){return(gr(V)?V.validators:V)||null}function Fr(V){return Array.isArray(V)?Lr(V):V||null}function dr(V,O){return(gr(O)?O.asyncValidators:V)||null}function Fi(V){return Array.isArray(V)?ir(V):V||null}function gr(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}const mr=V=>V instanceof Xt;function cs(V){return(V=>V instanceof At)(V)?V.value:V.getRawValue()}function Ji(V,O){const L=mr(V),X=V.controls;if(!(L?Object.keys(X):X).length)throw new S.vHH(1e3,"");if(!X[O])throw new S.vHH(1001,"")}function Ps(V,O){mr(V),V._forEachChild((X,We)=>{if(void 0===O[We])throw new S.vHH(1002,"")})}class zn{constructor(O,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=L,this._composedValidatorFn=Fr(this._rawValidators),this._composedAsyncValidatorFn=Fi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===rr}get invalid(){return this.status===Ni}get pending(){return this.status==Nr}get disabled(){return this.status===Kr}get enabled(){return this.status!==Kr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=Fr(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=Fi(O)}addValidators(O){this.setValidators(kn(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(kn(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(Kn(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(Kn(O,this._rawAsyncValidators))}hasValidator(O){return jt(this._rawValidators,O)}hasAsyncValidator(O){return jt(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=Nr,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const L=this._parentMarkedDirty(O.onlySelf);this.status=Kr,this.errors=null,this._forEachChild(X=>{X.disable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:L})),this._onDisabledChange.forEach(X=>X(!0))}enable(O={}){const L=this._parentMarkedDirty(O.onlySelf);this.status=rr,this._forEachChild(X=>{X.enable(Object.assign(Object.assign({},O),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},O),{skipPristineCheck:L})),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rr||this.status===Nr)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kr:rr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=Nr,this._hasOwnPendingAsyncValidator=!0;const L=kt(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,L={}){this.errors=O,this._updateControlsErrors(!1!==L.emitEvent)}get(O){return function Rs(V,O,L){if(null==O||(Array.isArray(O)||(O=O.split(L)),Array.isArray(O)&&0===O.length))return null;let X=V;return O.forEach(We=>{X=mr(X)?X.controls.hasOwnProperty(We)?X.controls[We]:null:(V=>V instanceof ei)(X)&&X.at(We)||null}),X}(this,O,".")}getError(O,L){const X=L?this.get(L):this;return X&&X.errors?X.errors[O]:null}hasError(O,L){return!!this.getError(O,L)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new S.vpe,this.statusChanges=new S.vpe}_calculateStatus(){return this._allControlsDisabled()?Kr:this.errors?Ni:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nr)?Nr:this._anyControlsHaveStatus(Ni)?Ni:rr}_anyControlsHaveStatus(O){return this._anyControls(L=>L.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_isBoxedValue(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){gr(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class At extends zn{constructor(O=null,L,X){super(Yi(L),dr(X,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gr(L)&&L.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(O)?O.value:O)}setValue(O,L={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(O,L={}){this.setValue(O,L)}reset(O=this.defaultValue,L={}){this._applyFormState(O),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){Xr(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){Xr(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){this._isBoxedValue(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}}class Xt extends zn{constructor(O,L,X){super(Yi(L),dr(X,L)),this.controls=O,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,L){return this.controls[O]?this.controls[O]:(this.controls[O]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(O,L,X={}){this.registerControl(O,L),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(O,L={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(O,L,X={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],L&&this.registerControl(O,L),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,L={}){Ps(this,O),Object.keys(O).forEach(X=>{Ji(this,X),this.controls[X].setValue(O[X],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(O,L={}){null!=O&&(Object.keys(O).forEach(X=>{this.controls[X]&&this.controls[X].patchValue(O[X],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(O={},L={}){this._forEachChild((X,We)=>{X.reset(O[We],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(O,L,X)=>(O[X]=cs(L),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(L,X)=>!!X._syncPendingControls()||L);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(L=>{const X=this.controls[L];X&&O(X,L)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const L of Object.keys(this.controls)){const X=this.controls[L];if(this.contains(L)&&O(X))return!0}return!1}_reduceValue(){return this._reduceChildren({},(O,L,X)=>((L.enabled||this.disabled)&&(O[X]=L.value),O))}_reduceChildren(O,L){let X=O;return this._forEachChild((We,Nt)=>{X=L(X,We,Nt)}),X}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ei extends zn{constructor(O,L,X){super(Yi(L),dr(X,L)),this.controls=O,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[O]}push(O,L={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(O,L,X={}){this.controls.splice(O,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(O,L={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(O,L,X={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),L&&(this.controls.splice(O,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,L={}){Ps(this,O),O.forEach((X,We)=>{Ji(this,We),this.at(We).setValue(X,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(O,L={}){null!=O&&(O.forEach((X,We)=>{this.at(We)&&this.at(We).patchValue(X,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(O=[],L={}){this._forEachChild((X,We)=>{X.reset(O[We],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(O=>cs(O))}clear(O={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_syncPendingControls(){let O=this.controls.reduce((L,X)=>!!X._syncPendingControls()||L,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((L,X)=>{O(L,X)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(L=>L.enabled&&O(L))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}}const Qi={provide:Tn,useExisting:(0,S.Gpc)(()=>Fn)},_i=(()=>Promise.resolve(null))();let Fn=(()=>{class V extends Tn{constructor(L,X){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new S.vpe,this.form=new Xt({},Lr(L),ir(X))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){_i.then(()=>{const X=this._findContainer(L.path);L.control=X.registerControl(L.name,L.control),yn(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){_i.then(()=>{const X=this._findContainer(L.path);X&&X.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){_i.then(()=>{const X=this._findContainer(L.path),We=new Xt({});(function bs(V,O){Nn(V,O)})(We,L),X.registerControl(L.name,We),We.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){_i.then(()=>{const X=this._findContainer(L.path);X&&X.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,X){_i.then(()=>{this.form.get(L.path).setValue(X)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,function Or(V,O){V._syncPendingControls(),O.forEach(L=>{const X=L.control;"submit"===X.updateOn&&X._pendingChange&&(L.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(L),!1}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(Ft,10),S.Y36(an,10))},V.\u0275dir=S.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,X){1&L&&S.NdJ("submit",function(Nt){return X.onSubmit(Nt)})("reset",function(){return X.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[S._Bn([Qi]),S.qOj]}),V})();const Wi={provide:Oi,useExisting:(0,S.Gpc)(()=>bi)},Sr=(()=>Promise.resolve(null))();let bi=(()=>{class V extends Oi{constructor(L,X,We,Nt,Hi){super(),this._changeDetectorRef=Hi,this.control=new At,this._registered=!1,this.update=new S.vpe,this._parent=L,this._setValidators(X),this._setAsyncValidators(We),this.valueAccessor=function Bs(V,O){if(!O)return null;let L,X,We;return Array.isArray(O),O.forEach(Nt=>{Nt.constructor===et?L=Nt:function Zo(V){return Object.getPrototypeOf(V.constructor)===Ie}(Nt)?X=Nt:We=Nt}),We||X||L||null}(0,Nt)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const X=L.name.previousValue;this.formDirective.removeControl({name:X,path:this._getPath(X)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),function Ds(V,O){if(!V.hasOwnProperty("model"))return!1;const L=V.model;return!!L.isFirstChange()||!Object.is(O,L.currentValue)}(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){Sr.then(()=>{var X;this.control.setValue(L,{emitViewToModelChange:!1}),null===(X=this._changeDetectorRef)||void 0===X||X.markForCheck()})}_updateDisabled(L){const X=L.isDisabled.currentValue,We=""===X||X&&"false"!==X;Sr.then(()=>{var Nt;We&&!this.control.disabled?this.control.disable():!We&&this.control.disabled&&this.control.enable(),null===(Nt=this._changeDetectorRef)||void 0===Nt||Nt.markForCheck()})}_getPath(L){return this._parent?function on(V,O){return[...O.path,V]}(L,this._parent):[L]}}return V.\u0275fac=function(L){return new(L||V)(S.Y36(Tn,9),S.Y36(Ft,10),S.Y36(an,10),S.Y36(Ue,10),S.Y36(S.sBO,8))},V.\u0275dir=S.lG2({type:V,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[S._Bn([Wi]),S.qOj,S.TTD]}),V})(),br=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275dir=S.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),V})(),us=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=S.oAB({type:V}),V.\u0275inj=S.cJS({}),V})();let Gr=(()=>{class V{constructor(){this._validator=ut}ngOnChanges(L){if(this.inputName in L){const X=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(X),this._validator=this._enabled?this.createValidator(X):ut,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}}return V.\u0275fac=function(L){return new(L||V)},V.\u0275dir=S.lG2({type:V,features:[S.TTD]}),V})();const Co={provide:Ft,useExisting:(0,S.Gpc)(()=>aa),multi:!0};let aa=(()=>{class V extends Gr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=L=>function Hs(V){return null!=V&&!1!==V&&"false"!=`${V}`}(L),this.createValidator=L=>fn}enabled(L){return L}}return V.\u0275fac=function(){let O;return function(X){return(O||(O=S.n5z(V)))(X||V)}}(),V.\u0275dir=S.lG2({type:V,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(L,X){2&L&&S.uIk("required",X._enabled?"":null)},inputs:{required:"required"},features:[S._Bn([Co]),S.qOj]}),V})();const la={provide:Ft,useExisting:(0,S.Gpc)(()=>kr),multi:!0};let kr=(()=>{class V extends Gr{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=L=>""===L||!0===L||"true"===L,this.createValidator=L=>$e}enabled(L){return L}}return V.\u0275fac=function(){let O;return function(X){return(O||(O=S.n5z(V)))(X||V)}}(),V.\u0275dir=S.lG2({type:V,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[S._Bn([la]),S.qOj]}),V})();const k={provide:Ft,useExisting:(0,S.Gpc)(()=>q),multi:!0};let q=(()=>{class V extends Gr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=L=>function sa(V){return"number"==typeof V?V:parseInt(V,10)}(L),this.createValidator=L=>function Rt(V){return O=>function Ge(V){return null!=V&&"number"==typeof V.length}(O.value)&&O.value.length>V?{maxlength:{requiredLength:V,actualLength:O.value.length}}:null}(L)}}return V.\u0275fac=function(){let O;return function(X){return(O||(O=S.n5z(V)))(X||V)}}(),V.\u0275dir=S.lG2({type:V,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(L,X){2&L&&S.uIk("maxlength",X._enabled?X.maxlength:null)},inputs:{maxlength:"maxlength"},features:[S._Bn([k]),S.qOj]}),V})(),Tt=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=S.oAB({type:V}),V.\u0275inj=S.cJS({imports:[[us]]}),V})(),wi=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=S.oAB({type:V}),V.\u0275inj=S.cJS({imports:[Tt]}),V})()},4406:(Jt,Qe,Q)=>{"use strict";Q.d(Qe,{m2:()=>$i,F0:()=>ts,rH:()=>Ls,Od:()=>ns,yS:()=>Qt,Bz:()=>Lo,lC:()=>la});var S=Q(2096);const qe=(()=>{function A(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return A.prototype=Object.create(Error.prototype),A})();var ke=Q(5254),pe=Q(1086),Ae=Q(591),Ie=Q(6053),Ue=Q(2916),Ce=Q(1221),ae=Q(8514),_e=Q(8896),Re=Q(1762),Ne=Q(8929),et=Q(3489);function rt(A,b){let y=!1;return arguments.length>=2&&(y=!0),function(z){return z.lift(new Ge(A,b,y))}}class Ge{constructor(b,y,F=!1){this.accumulator=b,this.seed=y,this.hasSeed=F}call(b,y){return y.subscribe(new Ft(b,this.accumulator,this.seed,this.hasSeed))}}class Ft extends et.L{constructor(b,y,F,z){super(b),this.accumulator=y,this._seed=F,this.hasSeed=z,this.index=0}get seed(){return this._seed}set seed(b){this.hasSeed=!0,this._seed=b}_next(b){if(this.hasSeed)return this._tryNext(b);this.seed=b,this.destination.next(b)}_tryNext(b){const y=this.index++;let F;try{F=this.accumulator(this.seed,b,y)}catch(z){this.destination.error(z)}this.seed=F,this.destination.next(F)}}var an=Q(2198),Ot=Q(4231);function Pt(A){return function(y){return 0===A?(0,_e.c)():y.lift(new Bi(A))}}class Bi{constructor(b){if(this.total=b,this.total<0)throw new Ot.W}call(b,y){return y.subscribe(new Cr(b,this.total))}}class Cr extends et.L{constructor(b,y){super(b),this.total=y,this.ring=new Array,this.count=0}_next(b){const y=this.ring,F=this.total,z=this.count++;y.length<F?y.push(b):y[z%F]=b}_complete(){const b=this.destination;let y=this.count;if(y>0){const F=this.count>=this.total?this.total:this.count,z=this.ring;for(let J=0;J<F;J++){const de=y++%F;b.next(z[de])}}b.complete()}}function fn(A=tt){return b=>b.lift(new mt(A))}class mt{constructor(b){this.errorFactory=b}call(b,y){return y.subscribe(new $e(b,this.errorFactory))}}class $e extends et.L{constructor(b,y){super(b),this.errorFactory=y,this.hasValue=!1}_next(b){this.hasValue=!0,this.destination.next(b)}_complete(){if(this.hasValue)return this.destination.complete();{let b;try{b=this.errorFactory()}catch(y){b=y}this.destination.error(b)}}}function tt(){return new qe}function Rt(A=null){return b=>b.lift(new St(A))}class St{constructor(b){this.defaultValue=b}call(b,y){return y.subscribe(new ut(b,this.defaultValue))}}class ut extends et.L{constructor(b,y){super(b),this.defaultValue=y,this.isEmpty=!0}_next(b){this.isEmpty=!1,this.destination.next(b)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ct=Q(5379),Ut=Q(2986);function dn(A,b){const y=arguments.length>=2;return F=>F.pipe(A?(0,an.h)((z,J)=>A(z,J,F)):Ct.y,(0,Ut.q)(1),y?Rt(b):fn(()=>new qe))}var Pi=Q(2654);class xi{constructor(b){this.callback=b}call(b,y){return y.subscribe(new Lr(b,this.callback))}}class Lr extends et.L{constructor(b,y){super(b),this.add(new Pi.w(y))}}var Yn=Q(4850),ir=Q(7545),xs=Q(1059),pi=Q(7221),yr=Q(1406),vi=Q(1709),jt=Q(2994),kn=Q(4327),Kn=Q(9146),ti=Q(9808);class Oi{constructor(b,y){this.id=b,this.url=y}}class Tn extends Oi{constructor(b,y,F="imperative",z=null){super(b,y),this.navigationTrigger=F,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $i extends Oi{constructor(b,y,F){super(b,y),this.urlAfterRedirects=F}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pr extends Oi{constructor(b,y,F){super(b,y),this.reason=F}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xi extends Oi{constructor(b,y,F){super(b,y),this.error=F}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xr extends Oi{constructor(b,y,F,z){super(b,y),this.urlAfterRedirects=F,this.state=z}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends Oi{constructor(b,y,F,z){super(b,y),this.urlAfterRedirects=F,this.state=z}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gi extends Oi{constructor(b,y,F,z,J){super(b,y),this.urlAfterRedirects=F,this.state=z,this.shouldActivate=J}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lr extends Oi{constructor(b,y,F,z){super(b,y),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class os extends Oi{constructor(b,y,F,z){super(b,y),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe{constructor(b){this.route=b}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ee{constructor(b){this.route=b}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Te{constructor(b){this.snapshot=b}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class he{constructor(b){this.snapshot=b}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ve{constructor(b){this.snapshot=b}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ee{constructor(b){this.snapshot=b}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fe{constructor(b,y,F){this.routerEvent=b,this.position=y,this.anchor=F}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Se="primary";class nt{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const y=this.params[b];return Array.isArray(y)?y[0]:y}return null}getAll(b){if(this.has(b)){const y=this.params[b];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function ft(A){return new nt(A)}const Lt="ngNavigationCancelingError";function Qn(A){const b=Error("NavigationCancelingError: "+A);return b[Lt]=!0,b}function on(A,b,y){const F=y.path.split("/");if(F.length>A.length||"full"===y.pathMatch&&(b.hasChildren()||F.length<A.length))return null;const z={};for(let J=0;J<F.length;J++){const de=F[J],we=A[J];if(de.startsWith(":"))z[de.substring(1)]=we;else if(de!==we.path)return null}return{consumed:A.slice(0,F.length),posParams:z}}function xn(A,b){const y=A?Object.keys(A):void 0,F=b?Object.keys(b):void 0;if(!y||!F||y.length!=F.length)return!1;let z;for(let J=0;J<y.length;J++)if(z=y[J],!Hn(A[z],b[z]))return!1;return!0}function Hn(A,b){if(Array.isArray(A)&&Array.isArray(b)){if(A.length!==b.length)return!1;const y=[...A].sort(),F=[...b].sort();return y.every((z,J)=>F[J]===z)}return A===b}function Ki(A){return Array.prototype.concat.apply([],A)}function Nn(A){return A.length>0?A[A.length-1]:null}function li(A,b){for(const y in A)A.hasOwnProperty(y)&&b(A[y],y)}function cr(A){return(0,S.CqO)(A)?A:(0,S.QGY)(A)?(0,ke.D)(Promise.resolve(A)):(0,pe.of)(A)}const Jr={exact:function ur(A,b,y){if(!Ni(A.segments,b.segments)||!Bs(A.segments,b.segments,y)||A.numberOfChildren!==b.numberOfChildren)return!1;for(const F in b.children)if(!A.children[F]||!ur(A.children[F],b.children[F],y))return!1;return!0},subset:Zo},bs={exact:function as(A,b){return xn(A,b)},subset:function Ds(A,b){return Object.keys(b).length<=Object.keys(A).length&&Object.keys(b).every(y=>Hn(A[y],b[y]))},ignored:()=>!0};function ws(A,b,y){return Jr[y.paths](A.root,b.root,y.matrixParams)&&bs[y.queryParams](A.queryParams,b.queryParams)&&!("exact"===y.fragment&&A.fragment!==b.fragment)}function Zo(A,b,y){return Or(A,b,b.segments,y)}function Or(A,b,y,F){if(A.segments.length>y.length){const z=A.segments.slice(0,y.length);return!(!Ni(z,y)||b.hasChildren()||!Bs(z,y,F))}if(A.segments.length===y.length){if(!Ni(A.segments,y)||!Bs(A.segments,y,F))return!1;for(const z in b.children)if(!A.children[z]||!Zo(A.children[z],b.children[z],F))return!1;return!0}{const z=y.slice(0,A.segments.length),J=y.slice(A.segments.length);return!!(Ni(A.segments,z)&&Bs(A.segments,z,F)&&A.children[Se])&&Or(A.children[Se],b,J,F)}}function Bs(A,b,y){return b.every((F,z)=>bs[y](A[z].parameters,F.parameters))}class Xr{constructor(b,y,F){this.root=b,this.queryParams=y,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return Yi.serialize(this)}}class pn{constructor(b,y){this.segments=b,this.children=y,this.parent=null,li(y,(F,z)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fr(this)}}class Hr{constructor(b,y){this.path=b,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=ft(this.parameters)),this._parameterMap}toString(){return Ji(this)}}function Ni(A,b){return A.length===b.length&&A.every((y,F)=>y.path===b[F].path)}class Kr{}class Rs{parse(b){const y=new ki(b);return new Xr(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(b){const y=`/${dr(b.root,!0)}`,F=function zn(A){const b=Object.keys(A).map(y=>{const F=A[y];return Array.isArray(F)?F.map(z=>`${gr(y)}=${gr(z)}`).join("&"):`${gr(y)}=${gr(F)}`}).filter(y=>!!y);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${y}${F}${"string"==typeof b.fragment?`#${function Qr(A){return encodeURI(A)}(b.fragment)}`:""}`}}const Yi=new Rs;function Fr(A){return A.segments.map(b=>Ji(b)).join("/")}function dr(A,b){if(!A.hasChildren())return Fr(A);if(b){const y=A.children[Se]?dr(A.children[Se],!1):"",F=[];return li(A.children,(z,J)=>{J!==Se&&F.push(`${J}:${dr(z,!1)}`)}),F.length>0?`${y}(${F.join("//")})`:y}{const y=function Nr(A,b){let y=[];return li(A.children,(F,z)=>{z===Se&&(y=y.concat(b(F,z)))}),li(A.children,(F,z)=>{z!==Se&&(y=y.concat(b(F,z)))}),y}(A,(F,z)=>z===Se?[dr(A.children[Se],!1)]:[`${z}:${dr(F,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Se]?`${Fr(A)}/${y[0]}`:`${Fr(A)}/(${y.join("//")})`}}function Fi(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gr(A){return Fi(A).replace(/%3B/gi,";")}function mr(A){return Fi(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ls(A){return decodeURIComponent(A)}function cs(A){return ls(A.replace(/\+/g,"%20"))}function Ji(A){return`${mr(A.path)}${function Ps(A){return Object.keys(A).map(b=>`;${mr(b)}=${mr(A[b])}`).join("")}(A.parameters)}`}const At=/^[^\/()?;=#]+/;function Xt(A){const b=A.match(At);return b?b[0]:""}const ei=/^[^=?&#]+/,_i=/^[^&#]+/;class ki{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(b.length>0||Object.keys(y).length>0)&&(F[Se]=new pn(b,y)),F}parseSegment(){const b=Xt(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(b),new Hr(ls(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const y=Xt(this.remaining);if(!y)return;this.capture(y);let F="";if(this.consumeOptional("=")){const z=Xt(this.remaining);z&&(F=z,this.capture(F))}b[ls(y)]=ls(F)}parseQueryParam(b){const y=function Qi(A){const b=A.match(ei);return b?b[0]:""}(this.remaining);if(!y)return;this.capture(y);let F="";if(this.consumeOptional("=")){const de=function Fn(A){const b=A.match(_i);return b?b[0]:""}(this.remaining);de&&(F=de,this.capture(F))}const z=cs(y),J=cs(F);if(b.hasOwnProperty(z)){let de=b[z];Array.isArray(de)||(de=[de],b[z]=de),de.push(J)}else b[z]=J}parseParens(b){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Xt(this.remaining),z=this.remaining[F.length];if("/"!==z&&")"!==z&&";"!==z)throw new Error(`Cannot parse url '${this.url}'`);let J;F.indexOf(":")>-1?(J=F.substr(0,F.indexOf(":")),this.capture(J),this.capture(":")):b&&(J=Se);const de=this.parseChildren();y[J]=1===Object.keys(de).length?de[Se]:new pn([],de),this.consumeOptional("//")}return y}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new Error(`Expected "${b}".`)}}class Ti{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const y=this.pathFromRoot(b);return y.length>1?y[y.length-2]:null}children(b){const y=hr(b,this._root);return y?y.children.map(F=>F.value):[]}firstChild(b){const y=hr(b,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(b){const y=er(b,this._root);return y.length<2?[]:y[y.length-2].children.map(z=>z.value).filter(z=>z!==b)}pathFromRoot(b){return er(b,this._root).map(y=>y.value)}}function hr(A,b){if(A===b.value)return b;for(const y of b.children){const F=hr(A,y);if(F)return F}return null}function er(A,b){if(A===b.value)return[b];for(const y of b.children){const F=er(A,y);if(F.length)return F.unshift(b),F}return[]}class un{constructor(b,y){this.value=b,this.children=y}toString(){return`TreeNode(${this.value})`}}function sr(A){const b={};return A&&A.children.forEach(y=>b[y.value.outlet]=y),b}class zr extends Ti{constructor(b,y){super(b),this.snapshot=y,Ms(this,b)}toString(){return this.snapshot.toString()}}function Wi(A,b){const y=function Sr(A,b){const de=new Zi([],{},{},"",{},Se,b,null,A.root,-1,{});return new ci("",new un(de,[]))}(A,b),F=new Ae.X([new Hr("",{})]),z=new Ae.X({}),J=new Ae.X({}),de=new Ae.X({}),we=new Ae.X(""),Ve=new bi(F,z,de,we,J,Se,b,y.root);return Ve.snapshot=y.root,new zr(new un(Ve,[]),y)}class bi{constructor(b,y,F,z,J,de,we,Ve){this.url=b,this.params=y,this.queryParams=F,this.fragment=z,this.data=J,this.outlet=de,this.component=we,this._futureSnapshot=Ve}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Yn.U)(b=>ft(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Yn.U)(b=>ft(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function br(A,b="emptyOnly"){const y=A.pathFromRoot;let F=0;if("always"!==b)for(F=y.length-1;F>=1;){const z=y[F],J=y[F-1];if(z.routeConfig&&""===z.routeConfig.path)F--;else{if(J.component)break;F--}}return function Js(A){return A.reduce((b,y)=>({params:Object.assign(Object.assign({},b.params),y.params),data:Object.assign(Object.assign({},b.data),y.data),resolve:Object.assign(Object.assign({},b.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(F))}class Zi{constructor(b,y,F,z,J,de,we,Ve,qt,En,rn){this.url=b,this.params=y,this.queryParams=F,this.fragment=z,this.data=J,this.outlet=de,this.component=we,this.routeConfig=Ve,this._urlSegment=qt,this._lastPathIndex=En,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ft(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ci extends Ti{constructor(b,y){super(y),this.url=b,Ms(this,y)}toString(){return us(this._root)}}function Ms(A,b){b.value._routerState=A,b.children.forEach(y=>Ms(A,y))}function us(A){const b=A.children.length>0?` { ${A.children.map(us).join(", ")} } `:"";return`${A.value}${b}`}function Tr(A){if(A.snapshot){const b=A.snapshot,y=A._futureSnapshot;A.snapshot=y,xn(b.queryParams,y.queryParams)||A.queryParams.next(y.queryParams),b.fragment!==y.fragment&&A.fragment.next(y.fragment),xn(b.params,y.params)||A.params.next(y.params),function yn(A,b){if(A.length!==b.length)return!1;for(let y=0;y<A.length;++y)if(!xn(A[y],b[y]))return!1;return!0}(b.url,y.url)||A.url.next(y.url),xn(b.data,y.data)||A.data.next(y.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function j(A,b){const y=xn(A.params,b.params)&&function rr(A,b){return Ni(A,b)&&A.every((y,F)=>xn(y.parameters,b[F].parameters))}(A.url,b.url);return y&&!(!A.parent!=!b.parent)&&(!A.parent||j(A.parent,b.parent))}function ge(A,b,y){if(y&&A.shouldReuseRoute(b.value,y.value.snapshot)){const F=y.value;F._futureSnapshot=b.value;const z=function Fe(A,b,y){return b.children.map(F=>{for(const z of y.children)if(A.shouldReuseRoute(F.value,z.value.snapshot))return ge(A,F,z);return ge(A,F)})}(A,b,y);return new un(F,z)}{if(A.shouldAttach(b.value)){const J=A.retrieve(b.value);if(null!==J){const de=J.route;return de.value._futureSnapshot=b.value,de.children=b.children.map(we=>ge(A,we)),de}}const F=function dt(A){return new bi(new Ae.X(A.url),new Ae.X(A.params),new Ae.X(A.queryParams),new Ae.X(A.fragment),new Ae.X(A.data),A.outlet,A.component,A)}(b.value),z=b.children.map(J=>ge(A,J));return new un(F,z)}}function Un(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Ai(A){return"object"==typeof A&&null!=A&&A.outlets}function gi(A,b,y,F,z){let J={};return F&&li(F,(de,we)=>{J[we]=Array.isArray(de)?de.map(Ve=>`${Ve}`):`${de}`}),new Xr(y.root===A?b:In(y.root,A,b),J,z)}function In(A,b,y){const F={};return li(A.children,(z,J)=>{F[J]=z===b?y:In(z,b,y)}),new pn(A.segments,F)}class ds{constructor(b,y,F){if(this.isAbsolute=b,this.numberOfDoubleDots=y,this.commands=F,b&&F.length>0&&Un(F[0]))throw new Error("Root segment cannot have matrix parameters");const z=F.find(Ai);if(z&&z!==Nn(F))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Es{constructor(b,y,F){this.segmentGroup=b,this.processChildren=y,this.index=F}}function Vs(A,b,y){if(A||(A=new pn([],{})),0===A.segments.length&&A.hasChildren())return Mo(A,b,y);const F=function jo(A,b,y){let F=0,z=b;const J={match:!1,pathIndex:0,commandIndex:0};for(;z<A.segments.length;){if(F>=y.length)return J;const de=A.segments[z],we=y[F];if(Ai(we))break;const Ve=`${we}`,qt=F<y.length-1?y[F+1]:null;if(z>0&&void 0===Ve)break;if(Ve&&qt&&"object"==typeof qt&&void 0===qt.outlets){if(!Eo(Ve,qt,de))return J;F+=2}else{if(!Eo(Ve,{},de))return J;F++}z++}return{match:!0,pathIndex:z,commandIndex:F}}(A,b,y),z=y.slice(F.commandIndex);if(F.match&&F.pathIndex<A.segments.length){const J=new pn(A.segments.slice(0,F.pathIndex),{});return J.children[Se]=new pn(A.segments.slice(F.pathIndex),A.children),Mo(J,0,z)}return F.match&&0===z.length?new pn(A.segments,{}):F.match&&!A.hasChildren()?$a(A,b,y):F.match?Mo(A,0,z):$a(A,b,y)}function Mo(A,b,y){if(0===y.length)return new pn(A.segments,{});{const F=function qa(A){return Ai(A[0])?A[0].outlets:{[Se]:A}}(y),z={};return li(F,(J,de)=>{"string"==typeof J&&(J=[J]),null!==J&&(z[de]=Vs(A.children[de],b,J))}),li(A.children,(J,de)=>{void 0===F[de]&&(z[de]=J)}),new pn(A.segments,z)}}function $a(A,b,y){const F=A.segments.slice(0,b);let z=0;for(;z<y.length;){const J=y[z];if(Ai(J)){const Ve=Ya(J.outlets);return new pn(F,Ve)}if(0===z&&Un(y[0])){F.push(new Hr(A.segments[b].path,Ja(y[0]))),z++;continue}const de=Ai(J)?J.outlets[Se]:`${J}`,we=z<y.length-1?y[z+1]:null;de&&we&&Un(we)?(F.push(new Hr(de,Ja(we))),z+=2):(F.push(new Hr(de,{})),z++)}return new pn(F,{})}function Ya(A){const b={};return li(A,(y,F)=>{"string"==typeof y&&(y=[y]),null!==y&&(b[F]=$a(new pn([],{}),0,y))}),b}function Ja(A){const b={};return li(A,(y,F)=>b[F]=`${y}`),b}function Eo(A,b,y){return A==y.path&&xn(b,y.parameters)}class qo{constructor(b,y,F,z){this.routeReuseStrategy=b,this.futureState=y,this.currState=F,this.forwardEvent=z}activate(b){const y=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,F,b),Tr(this.futureState.root),this.activateChildRoutes(y,F,b)}deactivateChildRoutes(b,y,F){const z=sr(y);b.children.forEach(J=>{const de=J.value.outlet;this.deactivateRoutes(J,z[de],F),delete z[de]}),li(z,(J,de)=>{this.deactivateRouteAndItsChildren(J,F)})}deactivateRoutes(b,y,F){const z=b.value,J=y?y.value:null;if(z===J)if(z.component){const de=F.getContext(z.outlet);de&&this.deactivateChildRoutes(b,y,de.children)}else this.deactivateChildRoutes(b,y,F);else J&&this.deactivateRouteAndItsChildren(y,F)}deactivateRouteAndItsChildren(b,y){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,y):this.deactivateRouteAndOutlet(b,y)}detachAndStoreRouteSubtree(b,y){const F=y.getContext(b.value.outlet),z=F&&b.value.component?F.children:y,J=sr(b);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],z);if(F&&F.outlet){const de=F.outlet.detach(),we=F.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:de,route:b,contexts:we})}}deactivateRouteAndOutlet(b,y){const F=y.getContext(b.value.outlet),z=F&&b.value.component?F.children:y,J=sr(b);for(const de of Object.keys(J))this.deactivateRouteAndItsChildren(J[de],z);F&&F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated(),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(b,y,F){const z=sr(y);b.children.forEach(J=>{this.activateRoutes(J,z[J.value.outlet],F),this.forwardEvent(new ee(J.value.snapshot))}),b.children.length&&this.forwardEvent(new he(b.value.snapshot))}activateRoutes(b,y,F){const z=b.value,J=y?y.value:null;if(Tr(z),z===J)if(z.component){const de=F.getOrCreateContext(z.outlet);this.activateChildRoutes(b,y,de.children)}else this.activateChildRoutes(b,y,F);else if(z.component){const de=F.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const we=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),de.children.onOutletReAttached(we.contexts),de.attachRef=we.componentRef,de.route=we.route.value,de.outlet&&de.outlet.attach(we.componentRef,we.route.value),Tr(we.route.value),this.activateChildRoutes(b,null,de.children)}else{const we=function Xa(A){for(let b=A.parent;b;b=b.parent){const y=b.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(z.snapshot),Ve=we?we.module.componentFactoryResolver:null;de.attachRef=null,de.route=z,de.resolver=Ve,de.outlet&&de.outlet.activateWith(z,Ve),this.activateChildRoutes(b,null,de.children)}}else this.activateChildRoutes(b,null,F)}}class sa{constructor(b,y){this.routes=b,this.module=y}}function Hs(A){return"function"==typeof A}function Gr(A){return A instanceof Xr}const Co=Symbol("INITIAL_VALUE");function So(){return(0,ir.w)(A=>(0,Ie.aj)(A.map(b=>b.pipe((0,Ut.q)(1),(0,xs.O)(Co)))).pipe(rt((b,y)=>{let F=!1;return y.reduce((z,J,de)=>z!==Co?z:(J===Co&&(F=!0),F||!1!==J&&de!==y.length-1&&!Gr(J)?z:J),b)},Co),(0,an.h)(b=>b!==Co),(0,Yn.U)(b=>Gr(b)?b:!0===b),(0,Ut.q)(1)))}class aa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Qs,this.attachRef=null}}class Qs{constructor(){this.contexts=new Map}onChildOutletCreated(b,y){const F=this.getOrCreateContext(b);F.outlet=y,this.contexts.set(b,F)}onChildOutletDestroyed(b){const y=this.getContext(b);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let y=this.getContext(b);return y||(y=new aa,this.contexts.set(b,y)),y}getContext(b){return this.contexts.get(b)||null}}let la=(()=>{class A{constructor(y,F,z,J,de){this.parentContexts=y,this.location=F,this.resolver=z,this.changeDetector=de,this.activated=null,this._activatedRoute=null,this.activateEvents=new S.vpe,this.deactivateEvents=new S.vpe,this.attachEvents=new S.vpe,this.detachEvents=new S.vpe,this.name=J||Se,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,F){this.activated=y,this._activatedRoute=F,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,F){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const de=(F=F||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),we=this.parentContexts.getOrCreateContext(this.name).children,Ve=new kr(y,we,this.location.injector);this.activated=this.location.createComponent(de,this.location.length,Ve),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(y){return new(y||A)(S.Y36(Qs),S.Y36(S.s_b),S.Y36(S._Vd),S.$8M("name"),S.Y36(S.sBO))},A.\u0275dir=S.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class kr{constructor(b,y,F){this.route=b,this.childContexts=y,this.parent=F}get(b,y){return b===bi?this.route:b===Qs?this.childContexts:this.parent.get(b,y)}}let To=(()=>{class A{}return A.\u0275fac=function(y){return new(y||A)},A.\u0275cmp=S.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,F){1&y&&S._UZ(0,"router-outlet")},directives:[la],encapsulation:2}),A})();function Ao(A,b=""){for(let y=0;y<A.length;y++){const F=A[y];k(F,q(b,F))}}function k(A,b){A.children&&Ao(A.children,b)}function q(A,b){return b?A||b.path?A&&!b.path?`${A}/`:!A&&b.path?b.path:`${A}/${b.path}`:"":A}function B(A){const b=A.children&&A.children.map(B),y=b?Object.assign(Object.assign({},A),{children:b}):Object.assign({},A);return!y.component&&(b||y.loadChildren)&&y.outlet&&y.outlet!==Se&&(y.component=To),y}function Y(A){return A.outlet||Se}function xe(A,b){const y=A.filter(F=>Y(F)===b);return y.push(...A.filter(F=>Y(F)!==b)),y}const ze={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function at(A,b,y){var F;if(""===b.path)return"full"===b.pathMatch&&(A.hasChildren()||y.length>0)?Object.assign({},ze):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const J=(b.matcher||on)(y,A,b);if(!J)return Object.assign({},ze);const de={};li(J.posParams,(Ve,qt)=>{de[qt]=Ve.path});const we=J.consumed.length>0?Object.assign(Object.assign({},de),J.consumed[J.consumed.length-1].parameters):de;return{matched:!0,consumedSegments:J.consumed,lastChild:J.consumed.length,parameters:we,positionalParamSegments:null!==(F=J.posParams)&&void 0!==F?F:{}}}function Tt(A,b,y,F,z="corrected"){if(y.length>0&&function vn(A,b,y){return y.some(F=>wr(A,b,F)&&Y(F)!==Se)}(A,y,F)){const de=new pn(b,function Vi(A,b,y,F){const z={};z[Se]=F,F._sourceSegment=A,F._segmentIndexShift=b.length;for(const J of y)if(""===J.path&&Y(J)!==Se){const de=new pn([],{});de._sourceSegment=A,de._segmentIndexShift=b.length,z[Y(J)]=de}return z}(A,b,F,new pn(y,A.children)));return de._sourceSegment=A,de._segmentIndexShift=b.length,{segmentGroup:de,slicedSegments:[]}}if(0===y.length&&function oi(A,b,y){return y.some(F=>wr(A,b,F))}(A,y,F)){const de=new pn(A.segments,function wi(A,b,y,F,z,J){const de={};for(const we of F)if(wr(A,y,we)&&!z[Y(we)]){const Ve=new pn([],{});Ve._sourceSegment=A,Ve._segmentIndexShift="legacy"===J?A.segments.length:b.length,de[Y(we)]=Ve}return Object.assign(Object.assign({},z),de)}(A,b,y,F,A.children,z));return de._sourceSegment=A,de._segmentIndexShift=b.length,{segmentGroup:de,slicedSegments:y}}const J=new pn(A.segments,A.children);return J._sourceSegment=A,J._segmentIndexShift=b.length,{segmentGroup:J,slicedSegments:y}}function wr(A,b,y){return(!(A.hasChildren()||b.length>0)||"full"!==y.pathMatch)&&""===y.path}function V(A,b,y,F){return!!(Y(A)===F||F!==Se&&wr(b,y,A))&&("**"===A.path||at(b,A,y).matched)}function O(A,b,y){return 0===b.length&&!A.children[y]}class L{constructor(b){this.segmentGroup=b||null}}class X{constructor(b){this.urlTree=b}}function We(A){return new Ue.y(b=>b.error(new L(A)))}function Nt(A){return new Ue.y(b=>b.error(new X(A)))}function Hi(A){return new Ue.y(b=>b.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${A}'`)))}class zs{constructor(b,y,F,z,J){this.configLoader=y,this.urlSerializer=F,this.urlTree=z,this.config=J,this.allowRedirects=!0,this.ngModule=b.get(S.h0i)}apply(){const b=Tt(this.urlTree.root,[],[],this.config).segmentGroup,y=new pn(b.segments,b.children);return this.expandSegmentGroup(this.ngModule,this.config,y,Se).pipe((0,Yn.U)(J=>this.createUrlTree(Ml(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,pi.K)(J=>{if(J instanceof X)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof L?this.noMatchError(J):J}))}match(b){return this.expandSegmentGroup(this.ngModule,this.config,b.root,Se).pipe((0,Yn.U)(z=>this.createUrlTree(Ml(z),b.queryParams,b.fragment))).pipe((0,pi.K)(z=>{throw z instanceof L?this.noMatchError(z):z}))}noMatchError(b){return new Error(`Cannot match any routes. URL Segment: '${b.segmentGroup}'`)}createUrlTree(b,y,F){const z=b.segments.length>0?new pn([],{[Se]:b}):b;return new Xr(z,y,F)}expandSegmentGroup(b,y,F,z){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(b,y,F).pipe((0,Yn.U)(J=>new pn([],J))):this.expandSegment(b,F,y,F.segments,z,!0)}expandChildren(b,y,F){const z=[];for(const J of Object.keys(F.children))"primary"===J?z.unshift(J):z.push(J);return(0,ke.D)(z).pipe((0,yr.b)(J=>{const de=F.children[J],we=xe(y,J);return this.expandSegmentGroup(b,we,de,J).pipe((0,Yn.U)(Ve=>({segment:Ve,outlet:J})))}),rt((J,de)=>(J[de.outlet]=de.segment,J),{}),function kt(A,b){const y=arguments.length>=2;return F=>F.pipe(A?(0,an.h)((z,J)=>A(z,J,F)):Ct.y,Pt(1),y?Rt(b):fn(()=>new qe))}())}expandSegment(b,y,F,z,J,de){return(0,ke.D)(F).pipe((0,yr.b)(we=>this.expandSegmentAgainstRoute(b,y,F,we,z,J,de).pipe((0,pi.K)(qt=>{if(qt instanceof L)return(0,pe.of)(null);throw qt}))),dn(we=>!!we),(0,pi.K)((we,Ve)=>{if(we instanceof qe||"EmptyError"===we.name){if(O(y,z,J))return(0,pe.of)(new pn([],{}));throw new L(y)}throw we}))}expandSegmentAgainstRoute(b,y,F,z,J,de,we){return V(z,y,J,de)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(b,y,z,J,de):we&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,y,F,z,J,de):We(y):We(y)}expandSegmentAgainstRouteUsingRedirect(b,y,F,z,J,de){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,F,z,de):this.expandRegularSegmentAgainstRouteUsingRedirect(b,y,F,z,J,de)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,y,F,z){const J=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Nt(J):this.lineralizeSegments(F,J).pipe((0,vi.zg)(de=>{const we=new pn(de,{});return this.expandSegment(b,we,y,de,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,y,F,z,J,de){const{matched:we,consumedSegments:Ve,lastChild:qt,positionalParamSegments:En}=at(y,z,J);if(!we)return We(y);const rn=this.applyRedirectCommands(Ve,z.redirectTo,En);return z.redirectTo.startsWith("/")?Nt(rn):this.lineralizeSegments(z,rn).pipe((0,vi.zg)(bn=>this.expandSegment(b,y,F,bn.concat(J.slice(qt)),de,!1)))}matchSegmentAgainstRoute(b,y,F,z,J){if("**"===F.path)return F.loadChildren?(F._loadedConfig?(0,pe.of)(F._loadedConfig):this.configLoader.load(b.injector,F)).pipe((0,Yn.U)(bn=>(F._loadedConfig=bn,new pn(z,{})))):(0,pe.of)(new pn(z,{}));const{matched:de,consumedSegments:we,lastChild:Ve}=at(y,F,z);if(!de)return We(y);const qt=z.slice(Ve);return this.getChildConfig(b,F,z).pipe((0,vi.zg)(rn=>{const bn=rn.module,Ei=rn.routes,{segmentGroup:ui,slicedSegments:Ns}=Tt(y,we,qt,Ei),Uo=new pn(ui.segments,ui.children);if(0===Ns.length&&Uo.hasChildren())return this.expandChildren(bn,Ei,Uo).pipe((0,Yn.U)(Ss=>new pn(we,Ss)));if(0===Ei.length&&0===Ns.length)return(0,pe.of)(new pn(we,{}));const Bo=Y(F)===J;return this.expandSegment(bn,Uo,Ei,Ns,Bo?Se:J,!0).pipe((0,Yn.U)(is=>new pn(we.concat(is.segments),is.children)))}))}getChildConfig(b,y,F){return y.children?(0,pe.of)(new sa(y.children,b)):y.loadChildren?void 0!==y._loadedConfig?(0,pe.of)(y._loadedConfig):this.runCanLoadGuards(b.injector,y,F).pipe((0,vi.zg)(z=>z?this.configLoader.load(b.injector,y).pipe((0,Yn.U)(J=>(y._loadedConfig=J,J))):function Ur(A){return new Ue.y(b=>b.error(Qn(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`)))}(y))):(0,pe.of)(new sa([],b))}runCanLoadGuards(b,y,F){const z=y.canLoad;if(!z||0===z.length)return(0,pe.of)(!0);const J=z.map(de=>{const we=b.get(de);let Ve;if(function Xs(A){return A&&Hs(A.canLoad)}(we))Ve=we.canLoad(y,F);else{if(!Hs(we))throw new Error("Invalid CanLoad guard");Ve=we(y,F)}return cr(Ve)});return(0,pe.of)(J).pipe(So(),(0,jt.b)(de=>{if(!Gr(de))return;const we=Qn(`Redirecting to "${this.urlSerializer.serialize(de)}"`);throw we.url=de,we}),(0,Yn.U)(de=>!0===de))}lineralizeSegments(b,y){let F=[],z=y.root;for(;;){if(F=F.concat(z.segments),0===z.numberOfChildren)return(0,pe.of)(F);if(z.numberOfChildren>1||!z.children[Se])return Hi(b.redirectTo);z=z.children[Se]}}applyRedirectCommands(b,y,F){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),b,F)}applyRedirectCreatreUrlTree(b,y,F,z){const J=this.createSegmentGroup(b,y.root,F,z);return new Xr(J,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(b,y){const F={};return li(b,(z,J)=>{if("string"==typeof z&&z.startsWith(":")){const we=z.substring(1);F[J]=y[we]}else F[J]=z}),F}createSegmentGroup(b,y,F,z){const J=this.createSegments(b,y.segments,F,z);let de={};return li(y.children,(we,Ve)=>{de[Ve]=this.createSegmentGroup(b,we,F,z)}),new pn(J,de)}createSegments(b,y,F,z){return y.map(J=>J.path.startsWith(":")?this.findPosParam(b,J,z):this.findOrReturn(J,F))}findPosParam(b,y,F){const z=F[y.path.substring(1)];if(!z)throw new Error(`Cannot redirect to '${b}'. Cannot find '${y.path}'.`);return z}findOrReturn(b,y){let F=0;for(const z of y){if(z.path===b.path)return y.splice(F),z;F++}return b}}function Ml(A){const b={};for(const F of Object.keys(A.children)){const J=Ml(A.children[F]);(J.segments.length>0||J.hasChildren())&&(b[F]=J)}return function Pc(A){if(1===A.numberOfChildren&&A.children[Se]){const b=A.children[Se];return new pn(A.segments.concat(b.segments),b.children)}return A}(new pn(A.segments,b))}class yt{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class vr{constructor(b,y){this.component=b,this.route=y}}function Ic(A,b,y){const F=A._root;return $o(F,b?b._root:null,y,[F.value])}function Gs(A,b,y){const F=function El(A){if(!A)return null;for(let b=A.parent;b;b=b.parent){const y=b.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(b);return(F?F.module.injector:y).get(A)}function $o(A,b,y,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const J=sr(b);return A.children.forEach(de=>{(function ht(A,b,y,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const J=A.value,de=b?b.value:null,we=y?y.getContext(A.value.outlet):null;if(de&&J.routeConfig===de.routeConfig){const Ve=function ii(A,b,y){if("function"==typeof y)return y(A,b);switch(y){case"pathParamsChange":return!Ni(A.url,b.url);case"pathParamsOrQueryParamsChange":return!Ni(A.url,b.url)||!xn(A.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!j(A,b)||!xn(A.queryParams,b.queryParams);default:return!j(A,b)}}(de,J,J.routeConfig.runGuardsAndResolvers);Ve?z.canActivateChecks.push(new yt(F)):(J.data=de.data,J._resolvedData=de._resolvedData),$o(A,b,J.component?we?we.children:null:y,F,z),Ve&&we&&we.outlet&&we.outlet.isActivated&&z.canDeactivateChecks.push(new vr(we.outlet.component,de))}else de&&Yo(b,we,z),z.canActivateChecks.push(new yt(F)),$o(A,null,J.component?we?we.children:null:y,F,z)})(de,J[de.value.outlet],y,F.concat([de.value]),z),delete J[de.value.outlet]}),li(J,(de,we)=>Yo(de,y.getContext(we),z)),z}function Yo(A,b,y){const F=sr(A),z=A.value;li(F,(J,de)=>{Yo(J,z.component?b?b.children.getContext(de):null:b,y)}),y.canDeactivateChecks.push(new vr(z.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,z))}class Mi{}function es(A){return new Ue.y(b=>b.error(A))}class ho{constructor(b,y,F,z,J,de){this.rootComponentType=b,this.config=y,this.urlTree=F,this.url=z,this.paramsInheritanceStrategy=J,this.relativeLinkResolution=de}recognize(){const b=Tt(this.urlTree.root,[],[],this.config.filter(de=>void 0===de.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,b,Se);if(null===y)return null;const F=new Zi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Se,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new un(F,y),J=new ci(this.url,z);return this.inheritParamsAndData(J._root),J}inheritParamsAndData(b){const y=b.value,F=br(y,this.paramsInheritanceStrategy);y.params=Object.freeze(F.params),y.data=Object.freeze(F.data),b.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(b,y,F){return 0===y.segments.length&&y.hasChildren()?this.processChildren(b,y):this.processSegment(b,y,y.segments,F)}processChildren(b,y){const F=[];for(const J of Object.keys(y.children)){const de=y.children[J],we=xe(b,J),Ve=this.processSegmentGroup(we,de,J);if(null===Ve)return null;F.push(...Ve)}const z=tc(F);return function Wr(A){A.sort((b,y)=>b.value.outlet===Se?-1:y.value.outlet===Se?1:b.value.outlet.localeCompare(y.value.outlet))}(z),z}processSegment(b,y,F,z){for(const J of b){const de=this.processSegmentAgainstRoute(J,y,F,z);if(null!==de)return de}return O(y,F,z)?[]:null}processSegmentAgainstRoute(b,y,F,z){if(b.redirectTo||!V(b,y,F,z))return null;let J,de=[],we=[];if("**"===b.path){const Ei=F.length>0?Nn(F).parameters:{};J=new Zi(F,Ei,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(b),Y(b),b.component,b,fo(y),po(y)+F.length,Do(b))}else{const Ei=at(y,b,F);if(!Ei.matched)return null;de=Ei.consumedSegments,we=F.slice(Ei.lastChild),J=new Zi(de,Ei.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Aa(b),Y(b),b.component,b,fo(y),po(y)+de.length,Do(b))}const Ve=function re(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(b),{segmentGroup:qt,slicedSegments:En}=Tt(y,de,we,Ve.filter(Ei=>void 0===Ei.redirectTo),this.relativeLinkResolution);if(0===En.length&&qt.hasChildren()){const Ei=this.processChildren(Ve,qt);return null===Ei?null:[new un(J,Ei)]}if(0===Ve.length&&0===En.length)return[new un(J,[])];const rn=Y(b)===z,bn=this.processSegment(Ve,qt,En,rn?Se:z);return null===bn?null:[new un(J,bn)]}}function Ws(A){const b=A.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function tc(A){const b=[],y=new Set;for(const F of A){if(!Ws(F)){b.push(F);continue}const z=b.find(J=>F.value.routeConfig===J.value.routeConfig);void 0!==z?(z.children.push(...F.children),y.add(z)):b.push(F)}for(const F of y){const z=tc(F.children);b.push(new un(F.value,z))}return b.filter(F=>!y.has(F))}function fo(A){let b=A;for(;b._sourceSegment;)b=b._sourceSegment;return b}function po(A){let b=A,y=b._segmentIndexShift?b._segmentIndexShift:0;for(;b._sourceSegment;)b=b._sourceSegment,y+=b._segmentIndexShift?b._segmentIndexShift:0;return y-1}function Aa(A){return A.data||{}}function Do(A){return A.resolve||{}}function to(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function Xo(A){return(0,ir.w)(b=>{const y=A(b);return y?(0,ke.D)(y).pipe((0,Yn.U)(()=>b)):(0,pe.of)(b)})}class Ra extends class Ko{shouldDetach(b){return!1}store(b,y){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,y){return b.routeConfig===y.routeConfig}}{}const nc=new S.OlP("ROUTES");class ic{constructor(b,y,F,z){this.injector=b,this.compiler=y,this.onLoadStartListener=F,this.onLoadEndListener=z}load(b,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const z=this.loadModuleFactory(y.loadChildren).pipe((0,Yn.U)(J=>{this.onLoadEndListener&&this.onLoadEndListener(y);const de=J.create(b);return new sa(Ki(de.injector.get(nc,void 0,S.XFs.Self|S.XFs.Optional)).map(B),de)}),(0,pi.K)(J=>{throw y._loader$=void 0,J}));return y._loader$=new Re.c(z,()=>new Ne.xQ).pipe((0,kn.x)()),y._loader$}loadModuleFactory(b){return cr(b()).pipe((0,vi.zg)(y=>y instanceof S.YKP?(0,pe.of)(y):(0,ke.D)(this.compiler.compileModuleAsync(y))))}}class no{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,y){return b}}function Ii(A){throw A}function Io(A,b,y){return b.parse("/")}function ps(A,b){return(0,pe.of)(null)}const Ka={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ts=(()=>{class A{constructor(y,F,z,J,de,we,Ve){this.rootComponentType=y,this.urlSerializer=F,this.rootContexts=z,this.location=J,this.config=Ve,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ne.xQ,this.errorHandler=Ii,this.malformedUriErrorHandler=Io,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ps,afterPreactivation:ps},this.urlHandlingStrategy=new no,this.routeReuseStrategy=new Ra,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=de.get(S.h0i),this.console=de.get(S.c2e);const rn=de.get(S.R0b);this.isNgZoneEnabled=rn instanceof S.R0b&&S.R0b.isInAngularZone(),this.resetConfig(Ve),this.currentUrlTree=function ni(){return new Xr(new pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ic(de,we,bn=>this.triggerEvent(new Xe(bn)),bn=>this.triggerEvent(new Ee(bn))),this.routerState=Wi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ae.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const F=this.events;return y.pipe((0,an.h)(z=>0!==z.id),(0,Yn.U)(z=>Object.assign(Object.assign({},z),{extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,ir.w)(z=>{let J=!1,de=!1;return(0,pe.of)(z).pipe((0,jt.b)(we=>{this.currentNavigation={id:we.id,initialUrl:we.currentRawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ir.w)(we=>{const Ve=this.browserUrlTree.toString(),qt=!this.navigated||we.extractedUrl.toString()!==Ve||Ve!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qt)&&this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return io(we.source)&&(this.browserUrlTree=we.extractedUrl),(0,pe.of)(we).pipe((0,ir.w)(rn=>{const bn=this.transitions.getValue();return F.next(new Tn(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),bn!==this.transitions.getValue()?_e.E:Promise.resolve(rn)}),function Bn(A,b,y,F){return(0,ir.w)(z=>function eo(A,b,y,F,z){return new zs(A,b,y,F,z).apply()}(A,b,y,z.extractedUrl,F).pipe((0,Yn.U)(J=>Object.assign(Object.assign({},z),{urlAfterRedirects:J}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jt.b)(rn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:rn.urlAfterRedirects})}),function ca(A,b,y,F,z){return(0,vi.zg)(J=>function fs(A,b,y,F,z="emptyOnly",J="legacy"){try{const de=new ho(A,b,y,F,z,J).recognize();return null===de?es(new Mi):(0,pe.of)(de)}catch(de){return es(de)}}(A,b,J.urlAfterRedirects,y(J.urlAfterRedirects),F,z).pipe((0,Yn.U)(de=>Object.assign(Object.assign({},J),{targetSnapshot:de}))))}(this.rootComponentType,this.config,rn=>this.serializeUrl(rn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jt.b)(rn=>{if("eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const Ei=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(Ei,rn)}this.browserUrlTree=rn.urlAfterRedirects}const bn=new xr(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);F.next(bn)}));if(qt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:bn,extractedUrl:Ei,source:ui,restoredState:Ns,extras:Uo}=we,Bo=new Tn(bn,this.serializeUrl(Ei),ui,Ns);F.next(Bo);const nl=Wi(Ei,this.rootComponentType).snapshot;return(0,pe.of)(Object.assign(Object.assign({},we),{targetSnapshot:nl,urlAfterRedirects:Ei,extras:Object.assign(Object.assign({},Uo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=we.rawUrl,we.resolve(null),_e.E}),Xo(we=>{const{targetSnapshot:Ve,id:qt,extractedUrl:En,rawUrl:rn,extras:{skipLocationChange:bn,replaceUrl:Ei}}=we;return this.hooks.beforePreactivation(Ve,{navigationId:qt,appliedUrlTree:En,rawUrlTree:rn,skipLocationChange:!!bn,replaceUrl:!!Ei})}),(0,jt.b)(we=>{const Ve=new Yr(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot);this.triggerEvent(Ve)}),(0,Yn.U)(we=>Object.assign(Object.assign({},we),{guards:Ic(we.targetSnapshot,we.currentSnapshot,this.rootContexts)})),function or(A,b){return(0,vi.zg)(y=>{const{targetSnapshot:F,currentSnapshot:z,guards:{canActivateChecks:J,canDeactivateChecks:de}}=y;return 0===de.length&&0===J.length?(0,pe.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function Ql(A,b,y,F){return(0,ke.D)(A).pipe((0,vi.zg)(z=>function ec(A,b,y,F,z){const J=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,pe.of)(!0);const de=J.map(we=>{const Ve=Gs(we,b,z);let qt;if(function oa(A){return A&&Hs(A.canDeactivate)}(Ve))qt=cr(Ve.canDeactivate(A,b,y,F));else{if(!Hs(Ve))throw new Error("Invalid CanDeactivate guard");qt=cr(Ve(A,b,y,F))}return qt.pipe(dn())});return(0,pe.of)(de).pipe(So())}(z.component,z.route,y,b,F)),dn(z=>!0!==z,!0))}(de,F,z,A).pipe((0,vi.zg)(we=>we&&function co(A){return"boolean"==typeof A}(we)?function Ht(A,b,y,F){return(0,ke.D)(b).pipe((0,yr.b)(z=>(0,Ce.z)(function uo(A,b){return null!==A&&b&&b(new Te(A)),(0,pe.of)(!0)}(z.route.parent,F),function hs(A,b){return null!==A&&b&&b(new ve(A)),(0,pe.of)(!0)}(z.route,F),function Ar(A,b,y){const F=b[b.length-1],J=b.slice(0,b.length-1).reverse().map(de=>function xu(A){const b=A.routeConfig?A.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:A,guards:b}:null}(de)).filter(de=>null!==de).map(de=>(0,ae.P)(()=>{const we=de.guards.map(Ve=>{const qt=Gs(Ve,de.node,y);let En;if(function Sa(A){return A&&Hs(A.canActivateChild)}(qt))En=cr(qt.canActivateChild(F,A));else{if(!Hs(qt))throw new Error("Invalid CanActivateChild guard");En=cr(qt(F,A))}return En.pipe(dn())});return(0,pe.of)(we).pipe(So())}));return(0,pe.of)(J).pipe(So())}(A,z.path,y),function Ta(A,b,y){const F=b.routeConfig?b.routeConfig.canActivate:null;if(!F||0===F.length)return(0,pe.of)(!0);const z=F.map(J=>(0,ae.P)(()=>{const de=Gs(J,b,y);let we;if(function Ks(A){return A&&Hs(A.canActivate)}(de))we=cr(de.canActivate(b,A));else{if(!Hs(de))throw new Error("Invalid CanActivate guard");we=cr(de(b,A))}return we.pipe(dn())}));return(0,pe.of)(z).pipe(So())}(A,z.route,y))),dn(z=>!0!==z,!0))}(F,J,A,b):(0,pe.of)(we)),(0,Yn.U)(we=>Object.assign(Object.assign({},y),{guardsResult:we})))})}(this.ngModule.injector,we=>this.triggerEvent(we)),(0,jt.b)(we=>{if(Gr(we.guardsResult)){const qt=Qn(`Redirecting to "${this.serializeUrl(we.guardsResult)}"`);throw qt.url=we.guardsResult,qt}const Ve=new Gi(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.triggerEvent(Ve)}),(0,an.h)(we=>!!we.guardsResult||(this.restoreHistory(we),this.cancelNavigationTransition(we,""),!1)),Xo(we=>{if(we.guards.canActivateChecks.length)return(0,pe.of)(we).pipe((0,jt.b)(Ve=>{const qt=new lr(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot);this.triggerEvent(qt)}),(0,ir.w)(Ve=>{let qt=!1;return(0,pe.of)(Ve).pipe(function Ro(A,b){return(0,vi.zg)(y=>{const{targetSnapshot:F,guards:{canActivateChecks:z}}=y;if(!z.length)return(0,pe.of)(y);let J=0;return(0,ke.D)(z).pipe((0,yr.b)(de=>function Jo(A,b,y,F){return function Po(A,b,y,F){const z=to(A);if(0===z.length)return(0,pe.of)({});const J={};return(0,ke.D)(z).pipe((0,vi.zg)(de=>function Da(A,b,y,F){const z=Gs(A,b,F);return cr(z.resolve?z.resolve(b,y):z(b,y))}(A[de],b,y,F).pipe((0,jt.b)(we=>{J[de]=we}))),Pt(1),(0,vi.zg)(()=>to(J).length===z.length?(0,pe.of)(J):_e.E))}(A._resolve,A,b,F).pipe((0,Yn.U)(J=>(A._resolvedData=J,A.data=Object.assign(Object.assign({},A.data),br(A,y).resolve),null)))}(de.route,F,A,b)),(0,jt.b)(()=>J++),Pt(1),(0,vi.zg)(de=>J===z.length?(0,pe.of)(y):_e.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jt.b)({next:()=>qt=!0,complete:()=>{qt||(this.restoreHistory(Ve),this.cancelNavigationTransition(Ve,"At least one route resolver didn't emit any value."))}}))}),(0,jt.b)(Ve=>{const qt=new os(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot);this.triggerEvent(qt)}))}),Xo(we=>{const{targetSnapshot:Ve,id:qt,extractedUrl:En,rawUrl:rn,extras:{skipLocationChange:bn,replaceUrl:Ei}}=we;return this.hooks.afterPreactivation(Ve,{navigationId:qt,appliedUrlTree:En,rawUrlTree:rn,skipLocationChange:!!bn,replaceUrl:!!Ei})}),(0,Yn.U)(we=>{const Ve=function ne(A,b,y){const F=ge(A,b._root,y?y._root:void 0);return new zr(F,b)}(this.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return Object.assign(Object.assign({},we),{targetRouterState:Ve})}),(0,jt.b)(we=>{this.currentUrlTree=we.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(we.urlAfterRedirects,we.rawUrl),this.routerState=we.targetRouterState,"deferred"===this.urlUpdateStrategy&&(we.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,we),this.browserUrlTree=we.urlAfterRedirects)}),((A,b,y)=>(0,Yn.U)(F=>(new qo(b,F.targetRouterState,F.currentRouterState,y).activate(A),F)))(this.rootContexts,this.routeReuseStrategy,we=>this.triggerEvent(we)),(0,jt.b)({next(){J=!0},complete(){J=!0}}),function hi(A){return b=>b.lift(new xi(A))}(()=>{var we;J||de||this.cancelNavigationTransition(z,`Navigation ID ${z.id} is not equal to the current navigation id ${this.navigationId}`),(null===(we=this.currentNavigation)||void 0===we?void 0:we.id)===z.id&&(this.currentNavigation=null)}),(0,pi.K)(we=>{if(de=!0,function si(A){return A&&A[Lt]}(we)){const Ve=Gr(we.url);Ve||(this.navigated=!0,this.restoreHistory(z,!0));const qt=new pr(z.id,this.serializeUrl(z.extractedUrl),we.message);F.next(qt),Ve?setTimeout(()=>{const En=this.urlHandlingStrategy.merge(we.url,this.rawUrlTree),rn={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||io(z.source)};this.scheduleNavigation(En,"imperative",null,rn,{resolve:z.resolve,reject:z.reject,promise:z.promise})},0):z.resolve(!1)}else{this.restoreHistory(z,!0);const Ve=new Xi(z.id,this.serializeUrl(z.extractedUrl),we);F.next(Ve);try{z.resolve(this.errorHandler(we))}catch(qt){z.reject(qt)}}return _e.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const F="popstate"===y.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{var z;const J={replaceUrl:!0},de=(null===(z=y.state)||void 0===z?void 0:z.navigationId)?y.state:null;if(de){const Ve=Object.assign({},de);delete Ve.navigationId,delete Ve.\u0275routerPageId,0!==Object.keys(Ve).length&&(J.state=Ve)}const we=this.parseUrl(y.url);this.scheduleNavigation(we,F,de,J)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){Ao(y),this.config=y.map(B),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,F={}){const{relativeTo:z,queryParams:J,fragment:de,queryParamsHandling:we,preserveFragment:Ve}=F,qt=z||this.routerState.root,En=Ve?this.currentUrlTree.fragment:de;let rn=null;switch(we){case"merge":rn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),J);break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=J||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),function Bt(A,b,y,F,z){if(0===y.length)return gi(b.root,b.root,b,F,z);const J=function Ea(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new ds(!0,0,A);let b=0,y=!1;const F=A.reduce((z,J,de)=>{if("object"==typeof J&&null!=J){if(J.outlets){const we={};return li(J.outlets,(Ve,qt)=>{we[qt]="string"==typeof Ve?Ve.split("/"):Ve}),[...z,{outlets:we}]}if(J.segmentPath)return[...z,J.segmentPath]}return"string"!=typeof J?[...z,J]:0===de?(J.split("/").forEach((we,Ve)=>{0==Ve&&"."===we||(0==Ve&&""===we?y=!0:".."===we?b++:""!=we&&z.push(we))}),z):[...z,J]},[]);return new ds(y,b,F)}(y);if(J.toRoot())return gi(b.root,new pn([],{}),b,F,z);const de=function Kl(A,b,y){if(A.isAbsolute)return new Es(b.root,!0,0);if(-1===y.snapshot._lastPathIndex){const J=y.snapshot._urlSegment;return new Es(J,J===b.root,0)}const F=Un(A.commands[0])?0:1;return function wl(A,b,y){let F=A,z=b,J=y;for(;J>z;){if(J-=z,F=F.parent,!F)throw new Error("Invalid number of '../'");z=F.segments.length}return new Es(F,!1,z-J)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+F,A.numberOfDoubleDots)}(J,b,A),we=de.processChildren?Mo(de.segmentGroup,de.index,J.commands):Vs(de.segmentGroup,de.index,J.commands);return gi(de.segmentGroup,we,b,F,z)}(qt,this.currentUrlTree,y,rn,null!=En?En:null)}navigateByUrl(y,F={skipLocationChange:!1}){const z=Gr(y)?y:this.parseUrl(y),J=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(J,"imperative",null,F)}navigate(y,F={skipLocationChange:!1}){return function Cl(A){for(let b=0;b<A.length;b++){const y=A[b];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${b}`)}}(y),this.navigateByUrl(this.createUrlTree(y,F),F)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let F;try{F=this.urlSerializer.parse(y)}catch(z){F=this.malformedUriErrorHandler(z,this.urlSerializer,y)}return F}isActive(y,F){let z;if(z=!0===F?Object.assign({},Ka):!1===F?Object.assign({},ua):F,Gr(y))return ws(this.currentUrlTree,y,z);const J=this.parseUrl(y);return ws(this.currentUrlTree,J,z)}removeEmptyProps(y){return Object.keys(y).reduce((F,z)=>{const J=y[z];return null!=J&&(F[z]=J),F},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new $i(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,F,z,J,de){var we,Ve,qt;if(this.disposed)return Promise.resolve(!1);const En=this.transitions.value,rn=io(F)&&En&&!io(En.source),bn=En.rawUrl.toString()===y.toString(),Ei=En.id===(null===(we=this.currentNavigation)||void 0===we?void 0:we.id);if(rn&&bn&&Ei)return Promise.resolve(!0);let Ns,Uo,Bo;de?(Ns=de.resolve,Uo=de.reject,Bo=de.promise):Bo=new Promise((Ss,il)=>{Ns=Ss,Uo=il});const nl=++this.navigationId;let is;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),is=z&&z.\u0275routerPageId?z.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?null!==(Ve=this.browserPageId)&&void 0!==Ve?Ve:0:(null!==(qt=this.browserPageId)&&void 0!==qt?qt:0)+1):is=0,this.setTransition({id:nl,targetPageId:is,source:F,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:J,resolve:Ns,reject:Uo,promise:Bo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bo.catch(Ss=>Promise.reject(Ss))}setBrowserUrl(y,F){const z=this.urlSerializer.serialize(y),J=Object.assign(Object.assign({},F.extras.state),this.generateNgRouterState(F.id,F.targetPageId));this.location.isCurrentPathEqualTo(z)||F.extras.replaceUrl?this.location.replaceState(z,"",J):this.location.go(z,"",J)}restoreHistory(y,F=!1){var z,J;if("computed"===this.canceledNavigationResolution){const de=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(z=this.currentNavigation)||void 0===z?void 0:z.finalUrl)||0===de?this.currentUrlTree===(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)&&0===de&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(de)}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,F){const z=new pr(y.id,this.serializeUrl(y.extractedUrl),F);this.triggerEvent(z),y.resolve(!1)}generateNgRouterState(y,F){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:F}:{navigationId:y}}}return A.\u0275fac=function(y){S.$Z()},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();function io(A){return"imperative"!==A}let Ls=(()=>{class A{constructor(y,F,z,J,de){this.router=y,this.route=F,this.tabIndexAttribute=z,this.renderer=J,this.el=de,this.commands=null,this.onChanges=new Ne.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(y){if(null!=this.tabIndexAttribute)return;const F=this.renderer,z=this.el.nativeElement;null!==y?F.setAttribute(z,"tabindex",y):F.removeAttribute(z,"tabindex")}ngOnChanges(y){this.onChanges.next(this)}set routerLink(y){null!=y?(this.commands=Array.isArray(y)?y:[y],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const y={skipLocationChange:Os(this.skipLocationChange),replaceUrl:Os(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Os(this.preserveFragment)})}}return A.\u0275fac=function(y){return new(y||A)(S.Y36(ts),S.Y36(bi),S.$8M("tabindex"),S.Y36(S.Qsj),S.Y36(S.SBq))},A.\u0275dir=S.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(y,F){1&y&&S.NdJ("click",function(){return F.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[S.TTD]}),A})(),Qt=(()=>{class A{constructor(y,F,z){this.router=y,this.route=F,this.locationStrategy=z,this.commands=null,this.href=null,this.onChanges=new Ne.xQ,this.subscription=y.events.subscribe(J=>{J instanceof $i&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,F,z,J,de){if(0!==y||F||z||J||de||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const we={skipLocationChange:Os(this.skipLocationChange),replaceUrl:Os(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,we),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Os(this.preserveFragment)})}}return A.\u0275fac=function(y){return new(y||A)(S.Y36(ts),S.Y36(bi),S.Y36(ti.S$))},A.\u0275dir=S.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,F){1&y&&S.NdJ("click",function(J){return F.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&y&&S.uIk("target",F.target)("href",F.href,S.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[S.TTD]}),A})();function Os(A){return""===A||!!A}let ns=(()=>{class A{constructor(y,F,z,J,de,we){this.router=y,this.element=F,this.renderer=z,this.cdr=J,this.link=de,this.linkWithHref=we,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new S.vpe,this.routerEventsSubscription=y.events.subscribe(Ve=>{Ve instanceof $i&&this.update()})}ngAfterContentInit(){(0,pe.of)(this.links.changes,this.linksWithHrefs.changes,(0,pe.of)(null)).pipe((0,Kn.J)()).subscribe(y=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var y;null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe();const F=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(z=>!!z).map(z=>z.onChanges);this.linkInputChangesSubscription=(0,ke.D)(F).pipe((0,Kn.J)()).subscribe(z=>{this.isActive!==this.isLinkActive(this.router)(z)&&this.update()})}set routerLinkActive(y){const F=Array.isArray(y)?y:y.split(" ");this.classes=F.filter(z=>!!z)}ngOnChanges(y){this.update()}ngOnDestroy(){var y;this.routerEventsSubscription.unsubscribe(),null===(y=this.linkInputChangesSubscription)||void 0===y||y.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const y=this.hasActiveLinks();this.isActive!==y&&(this.isActive=y,this.cdr.markForCheck(),this.classes.forEach(F=>{y?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),this.isActiveChange.emit(y))})}isLinkActive(y){const F=function bu(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&y.isActive(z.urlTree,F)}hasActiveLinks(){const y=this.isLinkActive(this.router);return this.link&&y(this.link)||this.linkWithHref&&y(this.linkWithHref)||this.links.some(y)||this.linksWithHrefs.some(y)}}return A.\u0275fac=function(y){return new(y||A)(S.Y36(ts),S.Y36(S.SBq),S.Y36(S.Qsj),S.Y36(S.sBO),S.Y36(Ls,8),S.Y36(Qt,8))},A.\u0275dir=S.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(y,F,z){if(1&y&&(S.Suo(z,Ls,5),S.Suo(z,Qt,5)),2&y){let J;S.iGM(J=S.CRH())&&(F.links=J),S.iGM(J=S.CRH())&&(F.linksWithHrefs=J)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[S.TTD]}),A})();class mo{}class Qa{preload(b,y){return(0,pe.of)(null)}}let Cs=(()=>{class A{constructor(y,F,z,J){this.router=y,this.injector=z,this.preloadingStrategy=J,this.loader=new ic(z,F,Ve=>y.triggerEvent(new Xe(Ve)),Ve=>y.triggerEvent(new Ee(Ve)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,an.h)(y=>y instanceof $i),(0,yr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(S.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,F){const z=[];for(const J of F)if(J.loadChildren&&!J.canLoad&&J._loadedConfig){const de=J._loadedConfig;z.push(this.processRoutes(de.module,de.routes))}else J.loadChildren&&!J.canLoad?z.push(this.preloadConfig(y,J)):J.children&&z.push(this.processRoutes(y,J.children));return(0,ke.D)(z).pipe((0,Kn.J)(),(0,Yn.U)(J=>{}))}preloadConfig(y,F){return this.preloadingStrategy.preload(F,()=>(F._loadedConfig?(0,pe.of)(F._loadedConfig):this.loader.load(y.injector,F)).pipe((0,vi.zg)(J=>(F._loadedConfig=J,this.processRoutes(J.module,J.routes)))))}}return A.\u0275fac=function(y){return new(y||A)(S.LFG(ts),S.LFG(S.Sil),S.LFG(S.zs3),S.LFG(mo))},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})(),Qo=(()=>{class A{constructor(y,F,z={}){this.router=y,this.viewportScroller=F,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof Tn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof $i&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof fe&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,F){this.router.triggerEvent(new fe(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(y){S.$Z()},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();const js=new S.OlP("ROUTER_CONFIGURATION"),Sl=new S.OlP("ROUTER_FORROOT_GUARD"),Lc=[ti.Ye,{provide:Kr,useClass:Rs},{provide:ts,useFactory:function Oc(A,b,y,F,z,J,de={},we,Ve){const qt=new ts(null,A,b,y,F,z,Ki(J));return we&&(qt.urlHandlingStrategy=we),Ve&&(qt.routeReuseStrategy=Ve),function ea(A,b){A.errorHandler&&(b.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(b.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(b.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(b.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(b.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(b.canceledNavigationResolution=A.canceledNavigationResolution)}(de,qt),de.enableTracing&&qt.events.subscribe(En=>{var rn,bn;null===(rn=console.group)||void 0===rn||rn.call(console,`Router Event: ${En.constructor.name}`),console.log(En.toString()),console.log(En),null===(bn=console.groupEnd)||void 0===bn||bn.call(console)}),qt},deps:[Kr,Qs,ti.Ye,S.zs3,S.Sil,nc,js,[class Dr{},new S.FiY],[class go{},new S.FiY]]},Qs,{provide:bi,useFactory:function oc(A){return A.routerState.root},deps:[ts]},Cs,Qa,class Zs{preload(b,y){return y().pipe((0,pi.K)(()=>(0,pe.of)(null)))}},{provide:js,useValue:{enableTracing:!1}}];function wu(){return new S.PXZ("Router",ts)}let Lo=(()=>{class A{constructor(y,F){}static forRoot(y,F){return{ngModule:A,providers:[Lc,sc(y),{provide:Sl,useFactory:No,deps:[[ts,new S.FiY,new S.tp0]]},{provide:js,useValue:F||{}},{provide:ti.S$,useFactory:el,deps:[ti.lw,[new S.tBr(ti.mr),new S.FiY],js]},{provide:Qo,useFactory:Oo,deps:[ts,ti.EM,js]},{provide:mo,useExisting:F&&F.preloadingStrategy?F.preloadingStrategy:Qa},{provide:S.PXZ,multi:!0,useFactory:wu},[Fo,{provide:S.ip1,multi:!0,useFactory:ac,deps:[Fo]},{provide:yi,useFactory:tl,deps:[Fo]},{provide:S.tb,multi:!0,useExisting:yi}]]}}static forChild(y){return{ngModule:A,providers:[sc(y)]}}}return A.\u0275fac=function(y){return new(y||A)(S.LFG(Sl,8),S.LFG(ts,8))},A.\u0275mod=S.oAB({type:A}),A.\u0275inj=S.cJS({}),A})();function Oo(A,b,y){return y.scrollOffset&&b.setOffset(y.scrollOffset),new Qo(A,b,y)}function el(A,b,y={}){return y.useHash?new ti.Do(A,b):new ti.b0(A,b)}function No(A){return"guarded"}function sc(A){return[{provide:S.deG,multi:!0,useValue:A},{provide:nc,multi:!0,useValue:A}]}let Fo=(()=>{class A{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ne.xQ}appInitializer(){return this.injector.get(ti.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let F=null;const z=new Promise(we=>F=we),J=this.injector.get(ts),de=this.injector.get(js);return"disabled"===de.initialNavigation?(J.setUpLocationChangeListener(),F(!0)):"enabled"===de.initialNavigation||"enabledBlocking"===de.initialNavigation?(J.hooks.afterPreactivation=()=>this.initNavigation?(0,pe.of)(null):(this.initNavigation=!0,F(!0),this.resultOfPreactivationDone),J.initialNavigation()):F(!0),z})}bootstrapListener(y){const F=this.injector.get(js),z=this.injector.get(Cs),J=this.injector.get(Qo),de=this.injector.get(ts),we=this.injector.get(S.z2F);y===we.components[0]&&(("enabledNonBlocking"===F.initialNavigation||void 0===F.initialNavigation)&&de.initialNavigation(),z.setUpPreloading(),J.init(),de.resetRootComponentType(we.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(y){return new(y||A)(S.LFG(S.zs3))},A.\u0275prov=S.Yz7({token:A,factory:A.\u0275fac}),A})();function ac(A){return A.appInitializer.bind(A)}function tl(A){return A.bootstrapListener.bind(A)}const yi=new S.OlP("Router Initializer")},2329:(Jt,Qe,Q)=>{"use strict";function S(d,e,t,r,o,c,h){try{var f=d[c](h),m=f.value}catch(v){return void t(v)}f.done?e(m):Promise.resolve(m).then(r,o)}Q.d(Qe,{WMw:()=>Bi,m7l:()=>Zl,N$j:()=>Kc,ZzF:()=>Is,DvJ:()=>Ia,TlE:()=>ui,u9r:()=>Rn,uWy:()=>nt,Ilk:()=>Ht,tEQ:()=>rm,Ox3:()=>Xf,ehD:()=>Ge,pBf:()=>k,hH6:()=>ga,Wl3:()=>et,ZAu:()=>ka,vmT:()=>sm,QRU:()=>ip,vpT:()=>bc,kB5:()=>wc,_C8:()=>Wl,Syv:()=>Ms,NMF:()=>us,x12:()=>fl,nls:()=>ss,blk:()=>Pf,ejS:()=>ta,wem:()=>xn,D1R:()=>Nn,qyh:()=>Hn,aNw:()=>ml,Zp0:()=>hd,RsA:()=>ke,F5T:()=>En,M8C:()=>Bn,yGw:()=>Qt,Kj0:()=>Mr,vBJ:()=>rn,RSm:()=>jf,EJi:()=>Wf,Wid:()=>od,OoA:()=>ft,TyD:()=>Lt,aH4:()=>on,YLQ:()=>Qn,dUE:()=>za,Tme:()=>yi,iKG:()=>Nd,cPb:()=>Zr,_12:()=>Bc,cek:()=>xh,woe:()=>pl,UY4:()=>Ec,iUV:()=>ar,_fP:()=>Wr,iLg:()=>Rc,rpg:()=>Se,xsS:()=>qd,OdW:()=>eu,TUv:()=>Kd,aLr:()=>Ii,$V:()=>hp,PMe:()=>ud,QmN:()=>pe,IOt:()=>Es,xEZ:()=>Ar,dpR:()=>vh,z$h:()=>Ai,UlW:()=>Un,FM8:()=>yt,Pa4:()=>re,yC1:()=>hu,CP7:()=>ji,knz:()=>In});const ke={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},pe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},et=0,Ge=2,Bi=2,Se=1e3,nt=1001,ft=1002,Lt=1003,Qn=1004,on=1005,xn=1006,Hn=1007,Nn=1008,li=1009,Jr=1012,as=1015,ur=1016,Or=1020,pn=1023,Ni=1026,Nr=1027,Ms=2300,us=2301,j=2400,ne=2401,Un=1,Ai=2,gi=3e3,In=3001,Es=0,Xs=35044,Ks=35048;class k{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const o=this._listeners[e];if(void 0!==o){const c=o.indexOf(t);-1!==c&&o.splice(c,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const o=r.slice(0);for(let c=0,h=o.length;c<h;c++)o[c].call(this,e);e.target=null}}}const q=[];for(let d=0;d<256;d++)q[d]=(d<16?"0":"")+d.toString(16);let B=1234567;const Y=Math.PI/180,xe=180/Math.PI;function ze(){const d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(q[255&d]+q[d>>8&255]+q[d>>16&255]+q[d>>24&255]+"-"+q[255&e]+q[e>>8&255]+"-"+q[e>>16&15|64]+q[e>>24&255]+"-"+q[63&t|128]+q[t>>8&255]+"-"+q[t>>16&255]+q[t>>24&255]+q[255&r]+q[r>>8&255]+q[r>>16&255]+q[r>>24&255]).toUpperCase()}function at(d,e,t){return Math.max(e,Math.min(t,d))}function Tt(d,e){return(d%e+e)%e}function vn(d,e,t){return(1-t)*d+t*e}function eo(d){return 0==(d&d-1)&&0!==d}function zs(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Pc(d){return Math.pow(2,Math.floor(Math.log(d)/Math.LN2))}var Bn=Object.freeze({__proto__:null,DEG2RAD:Y,RAD2DEG:xe,generateUUID:ze,clamp:at,euclideanModulo:Tt,mapLinear:function wi(d,e,t,r,o){return r+(d-e)*(o-r)/(t-e)},inverseLerp:function Vi(d,e,t){return d!==e?(t-d)/(e-d):0},lerp:vn,damp:function oi(d,e,t,r){return vn(d,e,1-Math.exp(-t*r))},pingpong:function wr(d,e=1){return e-Math.abs(Tt(d,2*e)-e)},smoothstep:function V(d,e,t){return d<=e?0:d>=t?1:(d=(d-e)/(t-e))*d*(3-2*d)},smootherstep:function O(d,e,t){return d<=e?0:d>=t?1:(d=(d-e)/(t-e))*d*d*(d*(6*d-15)+10)},randInt:function L(d,e){return d+Math.floor(Math.random()*(e-d+1))},randFloat:function X(d,e){return d+Math.random()*(e-d)},randFloatSpread:function We(d){return d*(.5-Math.random())},seededRandom:function Nt(d){return void 0!==d&&(B=d%2147483647),B=16807*B%2147483647,(B-1)/2147483646},degToRad:function Hi(d){return d*Y},radToDeg:function Ur(d){return d*xe},isPowerOfTwo:eo,ceilPowerOfTwo:zs,floorPowerOfTwo:Pc,setQuaternionFromProperEuler:function Ml(d,e,t,r,o){const c=Math.cos,h=Math.sin,f=c(t/2),m=h(t/2),v=c((e+r)/2),M=h((e+r)/2),w=c((e-r)/2),C=h((e-r)/2),D=c((r-e)/2),N=h((r-e)/2);switch(o){case"XYX":d.set(f*M,m*w,m*C,f*v);break;case"YZY":d.set(m*C,f*M,m*w,f*v);break;case"ZXZ":d.set(m*w,m*C,f*M,f*v);break;case"XZX":d.set(f*M,m*N,m*D,f*v);break;case"YXY":d.set(m*D,f*M,m*N,f*v);break;case"ZYZ":d.set(m*N,m*D,f*M,f*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}});class yt{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),c=this.x-e.x,h=this.y-e.y;return this.x=c*r-h*o+e.x,this.y=c*o+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}yt.prototype.isVector2=!0;class vr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,c,h,f,m,v){const M=this.elements;return M[0]=e,M[1]=o,M[2]=f,M[3]=t,M[4]=c,M[5]=m,M[6]=r,M[7]=h,M[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,c=this.elements,h=r[0],f=r[3],m=r[6],v=r[1],M=r[4],w=r[7],C=r[2],D=r[5],N=r[8],H=o[0],K=o[3],U=o[6],P=o[1],ie=o[4],$=o[7],le=o[2],me=o[5],be=o[8];return c[0]=h*H+f*P+m*le,c[3]=h*K+f*ie+m*me,c[6]=h*U+f*$+m*be,c[1]=v*H+M*P+w*le,c[4]=v*K+M*ie+w*me,c[7]=v*U+M*$+w*be,c[2]=C*H+D*P+N*le,c[5]=C*K+D*ie+N*me,c[8]=C*U+D*$+N*be,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8];return t*h*M-t*f*v-r*c*M+r*f*m+o*c*v-o*h*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8],w=M*h-f*v,C=f*m-M*c,D=v*c-h*m,N=t*w+r*C+o*D;if(0===N)return this.set(0,0,0,0,0,0,0,0,0);const H=1/N;return e[0]=w*H,e[1]=(o*v-M*r)*H,e[2]=(f*r-o*h)*H,e[3]=C*H,e[4]=(M*t-o*m)*H,e[5]=(o*c-f*t)*H,e[6]=D*H,e[7]=(r*m-v*t)*H,e[8]=(h*t-r*c)*H,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,c,h,f){const m=Math.cos(c),v=Math.sin(c);return this.set(r*m,r*v,-r*(m*h+v*f)+h+e,-o*v,o*m,-o*(-v*h+m*f)+f+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,c=o[0],h=o[3],f=o[6],m=o[1],v=o[4],M=o[7];return o[0]=t*c+r*m,o[3]=t*h+r*v,o[6]=t*f+r*M,o[1]=-r*c+t*m,o[4]=-r*h+t*v,o[7]=-r*f+t*M,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Ic(d){for(let e=d.length-1;e>=0;--e)if(d[e]>65535)return!0;return!1}function El(d){return document.createElementNS("http://www.w3.org/1999/xhtml",d)}vr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const $o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ht={h:0,s:0,l:0},ii={h:0,s:0,l:0};function Yo(d,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?d+6*(e-d)*t:t<.5?e:t<2/3?d+6*(e-d)*(2/3-t):d}function or(d){return d<.04045?.0773993808*d:Math.pow(.9478672986*d+.0521327014,2.4)}function Ql(d){return d<.0031308?12.92*d:1.055*Math.pow(d,.41666)-.055}let hs,Ht=(()=>{class d{constructor(t,r,o){return void 0===r&&void 0===o?this.set(t):this.setRGB(t,r,o)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,o){return this.r=t,this.g=r,this.b=o,this}setHSL(t,r,o){if(t=Tt(t,1),r=at(r,0,1),o=at(o,0,1),0===r)this.r=this.g=this.b=o;else{const c=o<=.5?o*(1+r):o+r-o*r,h=2*o-c;this.r=Yo(h,c,t+1/3),this.g=Yo(h,c,t),this.b=Yo(h,c,t-1/3)}return this}setStyle(t){function r(c){void 0!==c&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let c;const f=o[2];switch(o[1]){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,r(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,r(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f)){const m=parseFloat(c[1])/360,v=parseInt(c[2],10)/100,M=parseInt(c[3],10)/100;return r(c[4]),this.setHSL(m,v,M)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const c=o[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=$o[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=or(t.r),this.g=or(t.g),this.b=or(t.b),this}copyLinearToSRGB(t){return this.r=Ql(t.r),this.g=Ql(t.g),this.b=Ql(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,o=this.g,c=this.b,h=Math.max(r,o,c),f=Math.min(r,o,c);let m,v;const M=(f+h)/2;if(f===h)m=0,v=0;else{const w=h-f;switch(v=M<=.5?w/(h+f):w/(2-h-f),h){case r:m=(o-c)/w+(o<c?6:0);break;case o:m=(c-r)/w+2;break;case c:m=(r-o)/w+4}m/=6}return t.h=m,t.s=v,t.l=M,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,o){return this.getHSL(ht),ht.h+=t,ht.s+=r,ht.l+=o,this.setHSL(ht.h,ht.s,ht.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,o){return this.r=t.r+(r.r-t.r)*o,this.g=t.g+(r.g-t.g)*o,this.b=t.b+(r.b-t.b)*o,this}lerpHSL(t,r){this.getHSL(ht),t.getHSL(ii);const o=vn(ht.h,ii.h,r),c=vn(ht.s,ii.s,r),h=vn(ht.l,ii.l,r);return this.setHSL(o,c,h),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return d.NAMES=$o,d})();Ht.prototype.isColor=!0,Ht.prototype.r=1,Ht.prototype.g=1,Ht.prototype.b=1;class uo{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===hs&&(hs=El("canvas")),hs.width=e.width,hs.height=e.height;const r=hs.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=hs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=El("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),c=o.data;for(let h=0;h<c.length;h++)c[h]=255*or(c[h]/255);return r.putImageData(o,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*or(t[r]/255)):or(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ta=0;class Ar extends k{constructor(e=Ar.DEFAULT_IMAGE,t=Ar.DEFAULT_MAPPING,r=nt,o=nt,c=xn,h=Nn,f=pn,m=li,v=1,M=gi){super(),Object.defineProperty(this,"id",{value:Ta++}),this.uuid=ze(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=c,this.minFilter=h,this.anisotropy=v,this.format=f,this.internalFormat=null,this.type=m,this.offset=new yt(0,0),this.repeat=new yt(1,1),this.center=new yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=M,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const o=this.image;if(void 0===o.uuid&&(o.uuid=ze()),!t&&void 0===e.images[o.uuid]){let c;if(Array.isArray(o)){c=[];for(let h=0,f=o.length;h<f;h++)c.push(ec(o[h].isDataTexture?o[h].image:o[h]))}else c=ec(o);e.images[o.uuid]={uuid:o.uuid,url:c}}r.image=o.uuid}return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Se:e.x=e.x-Math.floor(e.x);break;case nt:e.x=e.x<0?0:1;break;case ft:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Se:e.y=e.y-Math.floor(e.y);break;case nt:e.y=e.y<0?0:1;break;case ft:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ec(d){return"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&d instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&d instanceof ImageBitmap?uo.getDataURL(d):d.data?{data:Array.prototype.slice.call(d.data),width:d.width,height:d.height,type:d.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ar.DEFAULT_IMAGE=void 0,Ar.DEFAULT_MAPPING=300,Ar.prototype.isTexture=!0;class Mi{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,c=this.w,h=e.elements;return this.x=h[0]*t+h[4]*r+h[8]*o+h[12]*c,this.y=h[1]*t+h[5]*r+h[9]*o+h[13]*c,this.z=h[2]*t+h[6]*r+h[10]*o+h[14]*c,this.w=h[3]*t+h[7]*r+h[11]*o+h[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,c;const h=.01,f=.1,m=e.elements,v=m[0],M=m[4],w=m[8],C=m[1],D=m[5],N=m[9],H=m[2],K=m[6],U=m[10];if(Math.abs(M-C)<h&&Math.abs(w-H)<h&&Math.abs(N-K)<h){if(Math.abs(M+C)<f&&Math.abs(w+H)<f&&Math.abs(N+K)<f&&Math.abs(v+D+U-3)<f)return this.set(1,0,0,0),this;t=Math.PI;const ie=(v+1)/2,$=(D+1)/2,le=(U+1)/2,me=(M+C)/4,be=(w+H)/4,Le=(N+K)/4;return ie>$&&ie>le?ie<h?(r=0,o=.707106781,c=.707106781):(r=Math.sqrt(ie),o=me/r,c=be/r):$>le?$<h?(r=.707106781,o=0,c=.707106781):(o=Math.sqrt($),r=me/o,c=Le/o):le<h?(r=.707106781,o=.707106781,c=0):(c=Math.sqrt(le),r=be/c,o=Le/c),this.set(r,o,c,t),this}let P=Math.sqrt((K-N)*(K-N)+(w-H)*(w-H)+(C-M)*(C-M));return Math.abs(P)<.001&&(P=1),this.x=(K-N)/P,this.y=(w-H)/P,this.z=(C-M)/P,this.w=Math.acos((v+D+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Mi.prototype.isVector4=!0;class es extends k{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Mi(0,0,e,t),this.scissorTest=!1,this.viewport=new Mi(0,0,e,t),this.texture=new Ar(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:xn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}es.prototype.isWebGLRenderTarget=!0,class fs extends es{constructor(e,t,r){super(e,t);const o=this.texture;this.texture=[];for(let c=0;c<r;c++)this.texture[c]=o.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,c=this.texture.length;o<c;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class ho extends es{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}ho.prototype.isWebGLMultisampleRenderTarget=!0;class Wr{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,c,h,f){let m=r[o+0],v=r[o+1],M=r[o+2],w=r[o+3];const C=c[h+0],D=c[h+1],N=c[h+2],H=c[h+3];if(0===f)return e[t+0]=m,e[t+1]=v,e[t+2]=M,void(e[t+3]=w);if(1===f)return e[t+0]=C,e[t+1]=D,e[t+2]=N,void(e[t+3]=H);if(w!==H||m!==C||v!==D||M!==N){let K=1-f;const U=m*C+v*D+M*N+w*H,P=U>=0?1:-1,ie=1-U*U;if(ie>Number.EPSILON){const le=Math.sqrt(ie),me=Math.atan2(le,U*P);K=Math.sin(K*me)/le,f=Math.sin(f*me)/le}const $=f*P;if(m=m*K+C*$,v=v*K+D*$,M=M*K+N*$,w=w*K+H*$,K===1-f){const le=1/Math.sqrt(m*m+v*v+M*M+w*w);m*=le,v*=le,M*=le,w*=le}}e[t]=m,e[t+1]=v,e[t+2]=M,e[t+3]=w}static multiplyQuaternionsFlat(e,t,r,o,c,h){const f=r[o],m=r[o+1],v=r[o+2],M=r[o+3],w=c[h],C=c[h+1],D=c[h+2],N=c[h+3];return e[t]=f*N+M*w+m*D-v*C,e[t+1]=m*N+M*C+v*w-f*D,e[t+2]=v*N+M*D+f*C-m*w,e[t+3]=M*N-f*w-m*C-v*D,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,c=e._z,h=e._order,f=Math.cos,m=Math.sin,v=f(r/2),M=f(o/2),w=f(c/2),C=m(r/2),D=m(o/2),N=m(c/2);switch(h){case"XYZ":this._x=C*M*w+v*D*N,this._y=v*D*w-C*M*N,this._z=v*M*N+C*D*w,this._w=v*M*w-C*D*N;break;case"YXZ":this._x=C*M*w+v*D*N,this._y=v*D*w-C*M*N,this._z=v*M*N-C*D*w,this._w=v*M*w+C*D*N;break;case"ZXY":this._x=C*M*w-v*D*N,this._y=v*D*w+C*M*N,this._z=v*M*N+C*D*w,this._w=v*M*w-C*D*N;break;case"ZYX":this._x=C*M*w-v*D*N,this._y=v*D*w+C*M*N,this._z=v*M*N-C*D*w,this._w=v*M*w+C*D*N;break;case"YZX":this._x=C*M*w+v*D*N,this._y=v*D*w+C*M*N,this._z=v*M*N-C*D*w,this._w=v*M*w-C*D*N;break;case"XZY":this._x=C*M*w-v*D*N,this._y=v*D*w-C*M*N,this._z=v*M*N+C*D*w,this._w=v*M*w+C*D*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],c=t[8],h=t[1],f=t[5],m=t[9],v=t[2],M=t[6],w=t[10],C=r+f+w;if(C>0){const D=.5/Math.sqrt(C+1);this._w=.25/D,this._x=(M-m)*D,this._y=(c-v)*D,this._z=(h-o)*D}else if(r>f&&r>w){const D=2*Math.sqrt(1+r-f-w);this._w=(M-m)/D,this._x=.25*D,this._y=(o+h)/D,this._z=(c+v)/D}else if(f>w){const D=2*Math.sqrt(1+f-r-w);this._w=(c-v)/D,this._x=(o+h)/D,this._y=.25*D,this._z=(m+M)/D}else{const D=2*Math.sqrt(1+w-r-f);this._w=(h-o)/D,this._x=(c+v)/D,this._y=(m+M)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(at(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,c=e._z,h=e._w,f=t._x,m=t._y,v=t._z,M=t._w;return this._x=r*M+h*f+o*v-c*m,this._y=o*M+h*m+c*f-r*v,this._z=c*M+h*v+r*m-o*f,this._w=h*M-r*f-o*m-c*v,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,o=this._y,c=this._z,h=this._w;let f=h*e._w+r*e._x+o*e._y+c*e._z;if(f<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,f=-f):this.copy(e),f>=1)return this._w=h,this._x=r,this._y=o,this._z=c,this;const m=1-f*f;if(m<=Number.EPSILON){const D=1-t;return this._w=D*h+t*this._w,this._x=D*r+t*this._x,this._y=D*o+t*this._y,this._z=D*c+t*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),M=Math.atan2(v,f),w=Math.sin((1-t)*M)/v,C=Math.sin(t*M)/v;return this._w=h*w+this._w*C,this._x=r*w+this._x*C,this._y=o*w+this._y*C,this._z=c*w+this._z*C,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(c),r*Math.cos(c),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Wr.prototype.isQuaternion=!0;class re{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(tc.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tc.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[3]*r+c[6]*o,this.y=c[1]*t+c[4]*r+c[7]*o,this.z=c[2]*t+c[5]*r+c[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,c=e.elements,h=1/(c[3]*t+c[7]*r+c[11]*o+c[15]);return this.x=(c[0]*t+c[4]*r+c[8]*o+c[12])*h,this.y=(c[1]*t+c[5]*r+c[9]*o+c[13])*h,this.z=(c[2]*t+c[6]*r+c[10]*o+c[14])*h,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,c=e.x,h=e.y,f=e.z,m=e.w,v=m*t+h*o-f*r,M=m*r+f*t-c*o,w=m*o+c*r-h*t,C=-c*t-h*r-f*o;return this.x=v*m+C*-c+M*-f-w*-h,this.y=M*m+C*-h+w*-c-v*-f,this.z=w*m+C*-f+v*-h-M*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[4]*r+c[8]*o,this.y=c[1]*t+c[5]*r+c[9]*o,this.z=c[2]*t+c[6]*r+c[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,c=e.z,h=t.x,f=t.y,m=t.z;return this.x=o*m-c*f,this.y=c*h-r*m,this.z=r*f-o*h,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Ws.copy(this).projectOnVector(e),this.sub(Ws)}reflect(e){return this.sub(Ws.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(at(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-Ob(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}re.prototype.isVector3=!0;const Ws=new re,tc=new Wr;class Is{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,c=-1/0,h=-1/0,f=-1/0;for(let m=0,v=e.length;m<v;m+=3){const M=e[m],w=e[m+1],C=e[m+2];M<t&&(t=M),w<r&&(r=w),C<o&&(o=C),M>c&&(c=M),w>h&&(h=w),C>f&&(f=C)}return this.min.set(t,r,o),this.max.set(c,h,f),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,c=-1/0,h=-1/0,f=-1/0;for(let m=0,v=e.count;m<v;m++){const M=e.getX(m),w=e.getY(m),C=e.getZ(m);M<t&&(t=M),w<r&&(r=w),C<o&&(o=C),M>c&&(c=M),w>h&&(h=w),C>f&&(f=C)}return this.min.set(t,r,o),this.max.set(c,h,f),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=po.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const c=r.attributes.position;for(let h=0,f=c.count;h<f;h++)po.fromBufferAttribute(c,h).applyMatrix4(e.matrixWorld),this.expandByPoint(po)}else null===r.boundingBox&&r.computeBoundingBox(),Aa.copy(r.boundingBox),Aa.applyMatrix4(e.matrixWorld),this.union(Aa);const o=e.children;for(let c=0,h=o.length;c<h;c++)this.expandByObject(o[c],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,po),po.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Da),Xo.subVectors(this.max,Da),Do.subVectors(e.a,Da),ca.subVectors(e.b,Da),Ro.subVectors(e.c,Da),Jo.subVectors(ca,Do),Po.subVectors(Ro,ca),to.subVectors(Do,Ro);let t=[0,-Jo.z,Jo.y,0,-Po.z,Po.y,0,-to.z,to.y,Jo.z,0,-Jo.x,Po.z,0,-Po.x,to.z,0,-to.x,-Jo.y,Jo.x,0,-Po.y,Po.x,0,-to.y,to.x,0];return!(!Ra(t,Do,ca,Ro,Xo)||(t=[1,0,0,0,1,0,0,0,1],!Ra(t,Do,ca,Ro,Xo)))&&(go.crossVectors(Jo,Po),t=[go.x,go.y,go.z],Ra(t,Do,ca,Ro,Xo))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return po.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(po).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(fo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Is.prototype.isBox3=!0;const fo=[new re,new re,new re,new re,new re,new re,new re,new re],po=new re,Aa=new Is,Do=new re,ca=new re,Ro=new re,Jo=new re,Po=new re,to=new re,Da=new re,Xo=new re,go=new re,Ko=new re;function Ra(d,e,t,r,o){for(let c=0,h=d.length-3;c<=h;c+=3){Ko.fromArray(d,c);const f=o.x*Math.abs(Ko.x)+o.y*Math.abs(Ko.y)+o.z*Math.abs(Ko.z),m=e.dot(Ko),v=t.dot(Ko),M=r.dot(Ko);if(Math.max(-Math.max(m,v,M),Math.min(m,v,M))>f)return!1}return!0}const nc=new Is,ic=new re,Dr=new re,no=new re;class Ii{constructor(e=new re,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):nc.setFromPoints(e).getCenter(r);let o=0;for(let c=0,h=e.length;c<h;c++)o=Math.max(o,r.distanceToSquared(e[c]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){no.subVectors(e,this.center);const t=no.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=.5*(r-this.radius);this.center.add(no.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return!0===this.center.equals(e.center)?Dr.set(0,0,1).multiplyScalar(e.radius):Dr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ic.copy(e.center).add(Dr)),this.expandByPoint(ic.copy(e.center).sub(Dr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Io=new re,ps=new re,Ka=new re,ua=new re,ts=new re,Cl=new re,io=new re;class Ls{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Io)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Io.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Io.copy(this.direction).multiplyScalar(t).add(this.origin),Io.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){ps.copy(e).add(t).multiplyScalar(.5),Ka.copy(t).sub(e).normalize(),ua.copy(this.origin).sub(ps);const c=.5*e.distanceTo(t),h=-this.direction.dot(Ka),f=ua.dot(this.direction),m=-ua.dot(Ka),v=ua.lengthSq(),M=Math.abs(1-h*h);let w,C,D,N;if(M>0)if(w=h*m-f,C=h*f-m,N=c*M,w>=0)if(C>=-N)if(C<=N){const H=1/M;w*=H,C*=H,D=w*(w+h*C+2*f)+C*(h*w+C+2*m)+v}else C=c,w=Math.max(0,-(h*C+f)),D=-w*w+C*(C+2*m)+v;else C=-c,w=Math.max(0,-(h*C+f)),D=-w*w+C*(C+2*m)+v;else C<=-N?(w=Math.max(0,-(-h*c+f)),C=w>0?-c:Math.min(Math.max(-c,-m),c),D=-w*w+C*(C+2*m)+v):C<=N?(w=0,C=Math.min(Math.max(-c,-m),c),D=C*(C+2*m)+v):(w=Math.max(0,-(h*c+f)),C=w>0?c:Math.min(Math.max(-c,-m),c),D=-w*w+C*(C+2*m)+v);else C=h>0?-c:c,w=Math.max(0,-(h*C+f)),D=-w*w+C*(C+2*m)+v;return r&&r.copy(this.direction).multiplyScalar(w).add(this.origin),o&&o.copy(Ka).multiplyScalar(C).add(ps),D}intersectSphere(e,t){Io.subVectors(e.center,this.origin);const r=Io.dot(this.direction),o=Io.dot(Io)-r*r,c=e.radius*e.radius;if(o>c)return null;const h=Math.sqrt(c-o),f=r-h,m=r+h;return f<0&&m<0?null:this.at(f<0?m:f,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,c,h,f,m;const v=1/this.direction.x,M=1/this.direction.y,w=1/this.direction.z,C=this.origin;return v>=0?(r=(e.min.x-C.x)*v,o=(e.max.x-C.x)*v):(r=(e.max.x-C.x)*v,o=(e.min.x-C.x)*v),M>=0?(c=(e.min.y-C.y)*M,h=(e.max.y-C.y)*M):(c=(e.max.y-C.y)*M,h=(e.min.y-C.y)*M),r>h||c>o||((c>r||r!=r)&&(r=c),(h<o||o!=o)&&(o=h),w>=0?(f=(e.min.z-C.z)*w,m=(e.max.z-C.z)*w):(f=(e.max.z-C.z)*w,m=(e.min.z-C.z)*w),r>m||f>o)||((f>r||r!=r)&&(r=f),(m<o||o!=o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return null!==this.intersectBox(e,Io)}intersectTriangle(e,t,r,o,c){ts.subVectors(t,e),Cl.subVectors(r,e),io.crossVectors(ts,Cl);let f,h=this.direction.dot(io);if(h>0){if(o)return null;f=1}else{if(!(h<0))return null;f=-1,h=-h}ua.subVectors(this.origin,e);const m=f*this.direction.dot(Cl.crossVectors(ua,Cl));if(m<0)return null;const v=f*this.direction.dot(ts.cross(ua));if(v<0||m+v>h)return null;const M=-f*ua.dot(io);return M<0?null:this.at(M/h,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,c,h,f,m,v,M,w,C,D,N,H,K){const U=this.elements;return U[0]=e,U[4]=t,U[8]=r,U[12]=o,U[1]=c,U[5]=h,U[9]=f,U[13]=m,U[2]=v,U[6]=M,U[10]=w,U[14]=C,U[3]=D,U[7]=N,U[11]=H,U[15]=K,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qt).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/Os.setFromMatrixColumn(e,0).length(),c=1/Os.setFromMatrixColumn(e,1).length(),h=1/Os.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*c,t[5]=r[5]*c,t[6]=r[6]*c,t[7]=0,t[8]=r[8]*h,t[9]=r[9]*h,t[10]=r[10]*h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,c=e.z,h=Math.cos(r),f=Math.sin(r),m=Math.cos(o),v=Math.sin(o),M=Math.cos(c),w=Math.sin(c);if("XYZ"===e.order){const C=h*M,D=h*w,N=f*M,H=f*w;t[0]=m*M,t[4]=-m*w,t[8]=v,t[1]=D+N*v,t[5]=C-H*v,t[9]=-f*m,t[2]=H-C*v,t[6]=N+D*v,t[10]=h*m}else if("YXZ"===e.order){const C=m*M,D=m*w,N=v*M,H=v*w;t[0]=C+H*f,t[4]=N*f-D,t[8]=h*v,t[1]=h*w,t[5]=h*M,t[9]=-f,t[2]=D*f-N,t[6]=H+C*f,t[10]=h*m}else if("ZXY"===e.order){const C=m*M,D=m*w,N=v*M,H=v*w;t[0]=C-H*f,t[4]=-h*w,t[8]=N+D*f,t[1]=D+N*f,t[5]=h*M,t[9]=H-C*f,t[2]=-h*v,t[6]=f,t[10]=h*m}else if("ZYX"===e.order){const C=h*M,D=h*w,N=f*M,H=f*w;t[0]=m*M,t[4]=N*v-D,t[8]=C*v+H,t[1]=m*w,t[5]=H*v+C,t[9]=D*v-N,t[2]=-v,t[6]=f*m,t[10]=h*m}else if("YZX"===e.order){const C=h*m,D=h*v,N=f*m,H=f*v;t[0]=m*M,t[4]=H-C*w,t[8]=N*w+D,t[1]=w,t[5]=h*M,t[9]=-f*M,t[2]=-v*M,t[6]=D*w+N,t[10]=C-H*w}else if("XZY"===e.order){const C=h*m,D=h*v,N=f*m,H=f*v;t[0]=m*M,t[4]=-w,t[8]=v*M,t[1]=C*w+H,t[5]=h*M,t[9]=D*w-N,t[2]=N*w-D,t[6]=f*M,t[10]=H*w+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bu,e,mo)}lookAt(e,t,r){const o=this.elements;return Cs.subVectors(e,t),0===Cs.lengthSq()&&(Cs.z=1),Cs.normalize(),Zs.crossVectors(r,Cs),0===Zs.lengthSq()&&(1===Math.abs(r.z)?Cs.x+=1e-4:Cs.z+=1e-4,Cs.normalize(),Zs.crossVectors(r,Cs)),Zs.normalize(),Qa.crossVectors(Cs,Zs),o[0]=Zs.x,o[4]=Qa.x,o[8]=Cs.x,o[1]=Zs.y,o[5]=Qa.y,o[9]=Cs.y,o[2]=Zs.z,o[6]=Qa.z,o[10]=Cs.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,c=this.elements,h=r[0],f=r[4],m=r[8],v=r[12],M=r[1],w=r[5],C=r[9],D=r[13],N=r[2],H=r[6],K=r[10],U=r[14],P=r[3],ie=r[7],$=r[11],le=r[15],me=o[0],be=o[4],Le=o[8],lt=o[12],Ye=o[1],te=o[5],De=o[9],He=o[13],je=o[2],Je=o[6],Ze=o[10],vt=o[14],Dt=o[3],gn=o[7],gt=o[11],Et=o[15];return c[0]=h*me+f*Ye+m*je+v*Dt,c[4]=h*be+f*te+m*Je+v*gn,c[8]=h*Le+f*De+m*Ze+v*gt,c[12]=h*lt+f*He+m*vt+v*Et,c[1]=M*me+w*Ye+C*je+D*Dt,c[5]=M*be+w*te+C*Je+D*gn,c[9]=M*Le+w*De+C*Ze+D*gt,c[13]=M*lt+w*He+C*vt+D*Et,c[2]=N*me+H*Ye+K*je+U*Dt,c[6]=N*be+H*te+K*Je+U*gn,c[10]=N*Le+H*De+K*Ze+U*gt,c[14]=N*lt+H*He+K*vt+U*Et,c[3]=P*me+ie*Ye+$*je+le*Dt,c[7]=P*be+ie*te+$*Je+le*gn,c[11]=P*Le+ie*De+$*Ze+le*gt,c[15]=P*lt+ie*He+$*vt+le*Et,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],c=e[12],h=e[1],f=e[5],m=e[9],v=e[13],M=e[2],w=e[6],C=e[10],D=e[14];return e[3]*(+c*m*w-o*v*w-c*f*C+r*v*C+o*f*D-r*m*D)+e[7]*(+t*m*D-t*v*C+c*h*C-o*h*D+o*v*M-c*m*M)+e[11]*(+t*v*w-t*f*D-c*h*w+r*h*D+c*f*M-r*v*M)+e[15]*(-o*f*M-t*m*w+t*f*C+o*h*w-r*h*C+r*m*M)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8],w=e[9],C=e[10],D=e[11],N=e[12],H=e[13],K=e[14],U=e[15],P=w*K*v-H*C*v+H*m*D-f*K*D-w*m*U+f*C*U,ie=N*C*v-M*K*v-N*m*D+h*K*D+M*m*U-h*C*U,$=M*H*v-N*w*v+N*f*D-h*H*D-M*f*U+h*w*U,le=N*w*m-M*H*m-N*f*C+h*H*C+M*f*K-h*w*K,me=t*P+r*ie+o*$+c*le;if(0===me)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const be=1/me;return e[0]=P*be,e[1]=(H*C*c-w*K*c-H*o*D+r*K*D+w*o*U-r*C*U)*be,e[2]=(f*K*c-H*m*c+H*o*v-r*K*v-f*o*U+r*m*U)*be,e[3]=(w*m*c-f*C*c-w*o*v+r*C*v+f*o*D-r*m*D)*be,e[4]=ie*be,e[5]=(M*K*c-N*C*c+N*o*D-t*K*D-M*o*U+t*C*U)*be,e[6]=(N*m*c-h*K*c-N*o*v+t*K*v+h*o*U-t*m*U)*be,e[7]=(h*C*c-M*m*c+M*o*v-t*C*v-h*o*D+t*m*D)*be,e[8]=$*be,e[9]=(N*w*c-M*H*c-N*r*D+t*H*D+M*r*U-t*w*U)*be,e[10]=(h*H*c-N*f*c+N*r*v-t*H*v-h*r*U+t*f*U)*be,e[11]=(M*f*c-h*w*c-M*r*v+t*w*v+h*r*D-t*f*D)*be,e[12]=le*be,e[13]=(M*H*o-N*w*o+N*r*C-t*H*C-M*r*K+t*w*K)*be,e[14]=(N*f*o-h*H*o-N*r*m+t*H*m+h*r*K-t*f*K)*be,e[15]=(h*w*o-M*f*o+M*r*m-t*w*m-h*r*C+t*f*C)*be,this}scale(e){const t=this.elements,r=e.x,o=e.y,c=e.z;return t[0]*=r,t[4]*=o,t[8]*=c,t[1]*=r,t[5]*=o,t[9]*=c,t[2]*=r,t[6]*=o,t[10]*=c,t[3]*=r,t[7]*=o,t[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),c=1-r,h=e.x,f=e.y,m=e.z,v=c*h,M=c*f;return this.set(v*h+r,v*f-o*m,v*m+o*f,0,v*f+o*m,M*f+r,M*m-o*h,0,v*m-o*f,M*m+o*h,c*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,c,h){return this.set(1,r,c,0,e,1,h,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,c=t._x,h=t._y,f=t._z,m=t._w,v=c+c,M=h+h,w=f+f,C=c*v,D=c*M,N=c*w,H=h*M,K=h*w,U=f*w,P=m*v,ie=m*M,$=m*w,le=r.x,me=r.y,be=r.z;return o[0]=(1-(H+U))*le,o[1]=(D+$)*le,o[2]=(N-ie)*le,o[3]=0,o[4]=(D-$)*me,o[5]=(1-(C+U))*me,o[6]=(K+P)*me,o[7]=0,o[8]=(N+ie)*be,o[9]=(K-P)*be,o[10]=(1-(C+H))*be,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let c=Os.set(o[0],o[1],o[2]).length();const h=Os.set(o[4],o[5],o[6]).length(),f=Os.set(o[8],o[9],o[10]).length();this.determinant()<0&&(c=-c),e.x=o[12],e.y=o[13],e.z=o[14],ns.copy(this);const v=1/c,M=1/h,w=1/f;return ns.elements[0]*=v,ns.elements[1]*=v,ns.elements[2]*=v,ns.elements[4]*=M,ns.elements[5]*=M,ns.elements[6]*=M,ns.elements[8]*=w,ns.elements[9]*=w,ns.elements[10]*=w,t.setFromRotationMatrix(ns),r.x=c,r.y=h,r.z=f,this}makePerspective(e,t,r,o,c,h){void 0===h&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const f=this.elements,v=2*c/(r-o),M=(t+e)/(t-e),w=(r+o)/(r-o),C=-(h+c)/(h-c),D=-2*h*c/(h-c);return f[0]=2*c/(t-e),f[4]=0,f[8]=M,f[12]=0,f[1]=0,f[5]=v,f[9]=w,f[13]=0,f[2]=0,f[6]=0,f[10]=C,f[14]=D,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,r,o,c,h){const f=this.elements,m=1/(t-e),v=1/(r-o),M=1/(h-c),w=(t+e)*m,C=(r+o)*v,D=(h+c)*M;return f[0]=2*m,f[4]=0,f[8]=0,f[12]=-w,f[1]=0,f[5]=2*v,f[9]=0,f[13]=-C,f[2]=0,f[6]=0,f[10]=-2*M,f[14]=-D,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Qt.prototype.isMatrix4=!0;const Os=new re,ns=new Qt,bu=new re(0,0,0),mo=new re(1,1,1),Zs=new re,Qa=new re,Cs=new re,Qo=new Qt,rc=new Wr;class js{constructor(e=0,t=0,r=0,o=js.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,c=o[0],h=o[4],f=o[8],m=o[1],v=o[5],M=o[9],w=o[2],C=o[6],D=o[10];switch(t){case"XYZ":this._y=Math.asin(at(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-M,D),this._z=Math.atan2(-h,c)):(this._x=Math.atan2(C,v),this._z=0);break;case"YXZ":this._x=Math.asin(-at(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(f,D),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-w,c),this._z=0);break;case"ZXY":this._x=Math.asin(at(C,-1,1)),Math.abs(C)<.9999999?(this._y=Math.atan2(-w,D),this._z=Math.atan2(-h,v)):(this._y=0,this._z=Math.atan2(m,c));break;case"ZYX":this._y=Math.asin(-at(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(C,D),this._z=Math.atan2(m,c)):(this._x=0,this._z=Math.atan2(-h,v));break;case"YZX":this._z=Math.asin(at(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-M,v),this._y=Math.atan2(-w,c)):(this._x=0,this._y=Math.atan2(f,D));break;case"XZY":this._z=Math.asin(-at(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(C,v),this._y=Math.atan2(f,c)):(this._x=Math.atan2(-M,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Qo.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qo,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rc.setFromEuler(this),this.setFromQuaternion(rc,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new re(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}js.prototype.isEuler=!0,js.DefaultOrder="XYZ",js.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Sl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Lc=0;const wu=new re,Lo=new Wr,Oo=new Qt,el=new re,No=new re,sc=new re,Oc=new Wr,ea=new re(1,0,0),oc=new re(0,1,0),Fo=new re(0,0,1),ac={type:"added"},tl={type:"removed"};class yi extends k{constructor(){super(),Object.defineProperty(this,"id",{value:Lc++}),this.uuid=ze(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yi.DefaultUp.clone();const e=new re,t=new js,r=new Wr,o=new re(1,1,1);t._onChange(function c(){r.setFromEuler(t,!1)}),r._onChange(function h(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Qt},normalMatrix:{value:new vr}}),this.matrix=new Qt,this.matrixWorld=new Qt,this.matrixAutoUpdate=yi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Lo.setFromAxisAngle(e,t),this.quaternion.multiply(Lo),this}rotateOnWorldAxis(e,t){return Lo.setFromAxisAngle(e,t),this.quaternion.premultiply(Lo),this}rotateX(e){return this.rotateOnAxis(ea,e)}rotateY(e){return this.rotateOnAxis(oc,e)}rotateZ(e){return this.rotateOnAxis(Fo,e)}translateOnAxis(e,t){return wu.copy(e).applyQuaternion(this.quaternion),this.position.add(wu.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ea,e)}translateY(e){return this.translateOnAxis(oc,e)}translateZ(e){return this.translateOnAxis(Fo,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Oo.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?el.copy(e):el.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),No.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oo.lookAt(No,el,this.up):Oo.lookAt(el,No,this.up),this.quaternion.setFromRotationMatrix(Oo),o&&(Oo.extractRotation(o.matrixWorld),Lo.setFromRotationMatrix(Oo),this.quaternion.premultiply(Lo.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ac)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tl)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(tl)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Oo.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Oo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Oo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const h=this.children[r].getObjectByProperty(e,t);if(void 0!==h)return h}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(No,e,sc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(No,Oc,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const o=this.children;for(let c=0,h=o.length;c<h;c++)o[c].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function c(f,m){return void 0===f[m.uuid]&&(f[m.uuid]=m.toJSON(e)),m.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=c(e.geometries,this.geometry);const f=this.geometry.parameters;if(void 0!==f&&void 0!==f.shapes){const m=f.shapes;if(Array.isArray(m))for(let v=0,M=m.length;v<M;v++)c(e.shapes,m[v]);else c(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const f=[];for(let m=0,v=this.material.length;m<v;m++)f.push(c(e.materials,this.material[m]));o.material=f}else o.material=c(e.materials,this.material);if(this.children.length>0){o.children=[];for(let f=0;f<this.children.length;f++)o.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let f=0;f<this.animations.length;f++)o.animations.push(c(e.animations,this.animations[f]))}if(t){const f=h(e.geometries),m=h(e.materials),v=h(e.textures),M=h(e.images),w=h(e.shapes),C=h(e.skeletons),D=h(e.animations);f.length>0&&(r.geometries=f),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),M.length>0&&(r.images=M),w.length>0&&(r.shapes=w),C.length>0&&(r.skeletons=C),D.length>0&&(r.animations=D)}return r.object=o,r;function h(f){const m=[];for(const v in f){const M=f[v];delete M.metadata,m.push(M)}return m}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}yi.DefaultUp=new re(0,1,0),yi.DefaultMatrixAutoUpdate=!0,yi.prototype.isObject3D=!0;const qs=new re,ko=new re,A=new re,b=new re,y=new re,F=new re,z=new re,J=new re,de=new re,we=new re;class Ve{constructor(e=new re,t=new re,r=new re){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),qs.subVectors(e,t),o.cross(qs);const c=o.lengthSq();return c>0?o.multiplyScalar(1/Math.sqrt(c)):o.set(0,0,0)}static getBarycoord(e,t,r,o,c){qs.subVectors(o,t),ko.subVectors(r,t),A.subVectors(e,t);const h=qs.dot(qs),f=qs.dot(ko),m=qs.dot(A),v=ko.dot(ko),M=ko.dot(A),w=h*v-f*f;if(0===w)return c.set(-2,-1,-1);const C=1/w,D=(v*m-f*M)*C,N=(h*M-f*m)*C;return c.set(1-D-N,N,D)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,b),b.x>=0&&b.y>=0&&b.x+b.y<=1}static getUV(e,t,r,o,c,h,f,m){return this.getBarycoord(e,t,r,o,b),m.set(0,0),m.addScaledVector(c,b.x),m.addScaledVector(h,b.y),m.addScaledVector(f,b.z),m}static isFrontFacing(e,t,r,o){return qs.subVectors(r,t),ko.subVectors(e,t),qs.cross(ko).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qs.subVectors(this.c,this.b),ko.subVectors(this.a,this.b),.5*qs.cross(ko).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ve.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ve.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,c){return Ve.getUV(e,this.a,this.b,this.c,t,r,o,c)}containsPoint(e){return Ve.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ve.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,c=this.c;let h,f;y.subVectors(o,r),F.subVectors(c,r),J.subVectors(e,r);const m=y.dot(J),v=F.dot(J);if(m<=0&&v<=0)return t.copy(r);de.subVectors(e,o);const M=y.dot(de),w=F.dot(de);if(M>=0&&w<=M)return t.copy(o);const C=m*w-M*v;if(C<=0&&m>=0&&M<=0)return h=m/(m-M),t.copy(r).addScaledVector(y,h);we.subVectors(e,c);const D=y.dot(we),N=F.dot(we);if(N>=0&&D<=N)return t.copy(c);const H=D*v-m*N;if(H<=0&&v>=0&&N<=0)return f=v/(v-N),t.copy(r).addScaledVector(F,f);const K=M*N-D*w;if(K<=0&&w-M>=0&&D-N>=0)return z.subVectors(c,o),f=(w-M)/(w-M+(D-N)),t.copy(o).addScaledVector(z,f);const U=1/(K+H+C);return h=H*U,f=C*U,t.copy(r).addScaledVector(y,h).addScaledVector(F,f)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let qt=0;class En extends k{constructor(){super(),Object.defineProperty(this,"id",{value:qt++}),this.uuid=ze(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=et,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const o=this[t];void 0!==o?o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function o(c){const h=[];for(const f in c){const m=c[f];delete m.metadata,h.push(m)}return h}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),this.side!==et&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const c=o(e.textures),h=o(e.images);c.length>0&&(r.textures=c),h.length>0&&(r.images=h)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const o=t.length;r=new Array(o);for(let c=0;c!==o;++c)r[c]=t[c].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}En.prototype.isMaterial=!0;class rn extends En{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}rn.prototype.isMeshBasicMaterial=!0;const bn=new re,Ei=new yt;class ui{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=Xs,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,c=this.itemSize;o<c;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),h=new Ht),t[r++]=h.r,t[r++]=h.g,t[r++]=h.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),h=new yt),t[r++]=h.x,t[r++]=h.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),h=new re),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),h=new Mi),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z,t[r++]=h.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Ei.fromBufferAttribute(this,t),Ei.applyMatrix3(e),this.setXY(t,Ei.x,Ei.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)bn.fromBufferAttribute(this,t),bn.applyMatrix3(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)bn.x=this.getX(t),bn.y=this.getY(t),bn.z=this.getZ(t),bn.applyMatrix4(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)bn.x=this.getX(t),bn.y=this.getY(t),bn.z=this.getZ(t),bn.applyNormalMatrix(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)bn.x=this.getX(t),bn.y=this.getY(t),bn.z=this.getZ(t),bn.transformDirection(e),this.setXYZ(t,bn.x,bn.y,bn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,c){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Xs&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}ui.prototype.isBufferAttribute=!0;class is extends ui{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class il extends ui{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class Nc extends ui{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class tn extends ui{constructor(e,t,r){super(new Float32Array(e),t,r)}}let rl=0;const vo=new Qt,lc=new yi,Vo=new re,_o=new Is,cc=new Is,ri=new re;class Rn extends k{constructor(){super(),Object.defineProperty(this,"id",{value:rl++}),this.uuid=ze(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Ic(e)?il:is)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const c=(new vr).getNormalMatrix(e);r.applyNormalMatrix(c),r.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(e),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vo.makeRotationFromQuaternion(e),this.applyMatrix4(vo),this}rotateX(e){return vo.makeRotationX(e),this.applyMatrix4(vo),this}rotateY(e){return vo.makeRotationY(e),this.applyMatrix4(vo),this}rotateZ(e){return vo.makeRotationZ(e),this.applyMatrix4(vo),this}translate(e,t,r){return vo.makeTranslation(e,t,r),this.applyMatrix4(vo),this}scale(e,t,r){return vo.makeScale(e,t,r),this.applyMatrix4(vo),this}lookAt(e){return lc.lookAt(e),lc.updateMatrix(),this.applyMatrix4(lc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vo).negate(),this.translate(Vo.x,Vo.y,Vo.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const c=e[r];t.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new tn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)_o.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(ri.addVectors(this.boundingBox.min,_o.min),this.boundingBox.expandByPoint(ri),ri.addVectors(this.boundingBox.max,_o.max),this.boundingBox.expandByPoint(ri)):(this.boundingBox.expandByPoint(_o.min),this.boundingBox.expandByPoint(_o.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ii);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new re,1/0);if(e){const r=this.boundingSphere.center;if(_o.setFromBufferAttribute(e),t)for(let c=0,h=t.length;c<h;c++)cc.setFromBufferAttribute(t[c]),this.morphTargetsRelative?(ri.addVectors(_o.min,cc.min),_o.expandByPoint(ri),ri.addVectors(_o.max,cc.max),_o.expandByPoint(ri)):(_o.expandByPoint(cc.min),_o.expandByPoint(cc.max));_o.getCenter(r);let o=0;for(let c=0,h=e.count;c<h;c++)ri.fromBufferAttribute(e,c),o=Math.max(o,r.distanceToSquared(ri));if(t)for(let c=0,h=t.length;c<h;c++){const f=t[c],m=this.morphTargetsRelative;for(let v=0,M=f.count;v<M;v++)ri.fromBufferAttribute(f,v),m&&(Vo.fromBufferAttribute(e,v),ri.add(Vo)),o=Math.max(o,r.distanceToSquared(ri))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,o=t.position.array,c=t.normal.array,h=t.uv.array,f=o.length/3;void 0===t.tangent&&this.setAttribute("tangent",new ui(new Float32Array(4*f),4));const m=t.tangent.array,v=[],M=[];for(let Ye=0;Ye<f;Ye++)v[Ye]=new re,M[Ye]=new re;const w=new re,C=new re,D=new re,N=new yt,H=new yt,K=new yt,U=new re,P=new re;function ie(Ye,te,De){w.fromArray(o,3*Ye),C.fromArray(o,3*te),D.fromArray(o,3*De),N.fromArray(h,2*Ye),H.fromArray(h,2*te),K.fromArray(h,2*De),C.sub(w),D.sub(w),H.sub(N),K.sub(N);const He=1/(H.x*K.y-K.x*H.y);!isFinite(He)||(U.copy(C).multiplyScalar(K.y).addScaledVector(D,-H.y).multiplyScalar(He),P.copy(D).multiplyScalar(H.x).addScaledVector(C,-K.x).multiplyScalar(He),v[Ye].add(U),v[te].add(U),v[De].add(U),M[Ye].add(P),M[te].add(P),M[De].add(P))}let $=this.groups;0===$.length&&($=[{start:0,count:r.length}]);for(let Ye=0,te=$.length;Ye<te;++Ye){const De=$[Ye],He=De.start;for(let Je=He,Ze=He+De.count;Je<Ze;Je+=3)ie(r[Je+0],r[Je+1],r[Je+2])}const le=new re,me=new re,be=new re,Le=new re;function lt(Ye){be.fromArray(c,3*Ye),Le.copy(be);const te=v[Ye];le.copy(te),le.sub(be.multiplyScalar(be.dot(te))).normalize(),me.crossVectors(Le,te);const He=me.dot(M[Ye])<0?-1:1;m[4*Ye]=le.x,m[4*Ye+1]=le.y,m[4*Ye+2]=le.z,m[4*Ye+3]=He}for(let Ye=0,te=$.length;Ye<te;++Ye){const De=$[Ye],He=De.start;for(let Je=He,Ze=He+De.count;Je<Ze;Je+=3)lt(r[Je+0]),lt(r[Je+1]),lt(r[Je+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new ui(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let C=0,D=r.count;C<D;C++)r.setXYZ(C,0,0,0);const o=new re,c=new re,h=new re,f=new re,m=new re,v=new re,M=new re,w=new re;if(e)for(let C=0,D=e.count;C<D;C+=3){const N=e.getX(C+0),H=e.getX(C+1),K=e.getX(C+2);o.fromBufferAttribute(t,N),c.fromBufferAttribute(t,H),h.fromBufferAttribute(t,K),M.subVectors(h,c),w.subVectors(o,c),M.cross(w),f.fromBufferAttribute(r,N),m.fromBufferAttribute(r,H),v.fromBufferAttribute(r,K),f.add(M),m.add(M),v.add(M),r.setXYZ(N,f.x,f.y,f.z),r.setXYZ(H,m.x,m.y,m.z),r.setXYZ(K,v.x,v.y,v.z)}else for(let C=0,D=t.count;C<D;C+=3)o.fromBufferAttribute(t,C+0),c.fromBufferAttribute(t,C+1),h.fromBufferAttribute(t,C+2),M.subVectors(h,c),w.subVectors(o,c),M.cross(w),r.setXYZ(C+0,M.x,M.y,M.z),r.setXYZ(C+1,M.x,M.y,M.z),r.setXYZ(C+2,M.x,M.y,M.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(void 0===e.attributes[o])continue;const h=r[o].array,f=e.attributes[o],m=f.array,v=f.itemSize*t,M=Math.min(m.length,h.length-v);for(let w=0,C=v;w<M;w++,C++)h[C]=m[w]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ri.fromBufferAttribute(e,t),ri.normalize(),e.setXYZ(t,ri.x,ri.y,ri.z)}toNonIndexed(){function e(f,m){const v=f.array,M=f.itemSize,w=f.normalized,C=new v.constructor(m.length*M);let D=0,N=0;for(let H=0,K=m.length;H<K;H++){D=f.isInterleavedBufferAttribute?m[H]*f.data.stride+f.offset:m[H]*M;for(let U=0;U<M;U++)C[N++]=v[D++]}return new ui(C,M,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Rn,r=this.index.array,o=this.attributes;for(const f in o){const v=e(o[f],r);t.setAttribute(f,v)}const c=this.morphAttributes;for(const f in c){const m=[],v=c[f];for(let M=0,w=v.length;M<w;M++){const D=e(v[M],r);m.push(D)}t.morphAttributes[f]=m}t.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let f=0,m=h.length;f<m;f++){const v=h[f];t.addGroup(v.start,v.count,v.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const v in m)void 0!==m[v]&&(e[v]=m[v]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r)e.data.attributes[m]=r[m].toJSON(e.data);const o={};let c=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],M=[];for(let w=0,C=v.length;w<C;w++)M.push(v[w].toJSON(e.data));M.length>0&&(o[m]=M,c=!0)}c&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const o=e.attributes;for(const v in o)this.setAttribute(v,o[v].clone(t));const c=e.morphAttributes;for(const v in c){const M=[],w=c[v];for(let C=0,D=w.length;C<D;C++)M.push(w[C].clone(t));this.morphAttributes[v]=M}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let v=0,M=h.length;v<M;v++){const w=h[v];this.addGroup(w.start,w.count,w.materialIndex)}const f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());const m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Rn.prototype.isBufferGeometry=!0;const Uh=new Qt,Al=new Ls,Ed=new Ii,sl=new re,ol=new re,al=new re,ll=new re,Cd=new re,Rr=new re,Dl=new re,Pa=new re,Mu=new re,Fc=new yt,Fs=new yt,yo=new yt,Eu=new re,Rl=new re;class Mr extends yi{constructor(e=new Rn,t=new rn){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,c=this.matrixWorld;if(void 0===o||(null===r.boundingSphere&&r.computeBoundingSphere(),Ed.copy(r.boundingSphere),Ed.applyMatrix4(c),!1===e.ray.intersectsSphere(Ed))||(Uh.copy(c).invert(),Al.copy(e.ray).applyMatrix4(Uh),null!==r.boundingBox&&!1===Al.intersectsBox(r.boundingBox)))return;let h;if(r.isBufferGeometry){const f=r.index,m=r.attributes.position,v=r.morphAttributes.position,M=r.morphTargetsRelative,w=r.attributes.uv,C=r.attributes.uv2,D=r.groups,N=r.drawRange;if(null!==f)if(Array.isArray(o))for(let H=0,K=D.length;H<K;H++){const U=D[H],P=o[U.materialIndex];for(let le=Math.max(U.start,N.start),me=Math.min(f.count,Math.min(U.start+U.count,N.start+N.count));le<me;le+=3){const be=f.getX(le),Le=f.getX(le+1),lt=f.getX(le+2);h=kc(this,P,e,Al,m,v,M,w,C,be,Le,lt),h&&(h.faceIndex=Math.floor(le/3),h.face.materialIndex=U.materialIndex,t.push(h))}}else for(let U=Math.max(0,N.start),P=Math.min(f.count,N.start+N.count);U<P;U+=3){const ie=f.getX(U),$=f.getX(U+1),le=f.getX(U+2);h=kc(this,o,e,Al,m,v,M,w,C,ie,$,le),h&&(h.faceIndex=Math.floor(U/3),t.push(h))}else if(void 0!==m)if(Array.isArray(o))for(let H=0,K=D.length;H<K;H++){const U=D[H],P=o[U.materialIndex];for(let le=Math.max(U.start,N.start),me=Math.min(m.count,Math.min(U.start+U.count,N.start+N.count));le<me;le+=3)h=kc(this,P,e,Al,m,v,M,w,C,le,le+1,le+2),h&&(h.faceIndex=Math.floor(le/3),h.face.materialIndex=U.materialIndex,t.push(h))}else for(let U=Math.max(0,N.start),P=Math.min(m.count,N.start+N.count);U<P;U+=3)h=kc(this,o,e,Al,m,v,M,w,C,U,U+1,U+2),h&&(h.faceIndex=Math.floor(U/3),t.push(h))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function kc(d,e,t,r,o,c,h,f,m,v,M,w){sl.fromBufferAttribute(o,v),ol.fromBufferAttribute(o,M),al.fromBufferAttribute(o,w);const C=d.morphTargetInfluences;if(c&&C){Dl.set(0,0,0),Pa.set(0,0,0),Mu.set(0,0,0);for(let N=0,H=c.length;N<H;N++){const K=C[N],U=c[N];0!==K&&(ll.fromBufferAttribute(U,v),Cd.fromBufferAttribute(U,M),Rr.fromBufferAttribute(U,w),h?(Dl.addScaledVector(ll,K),Pa.addScaledVector(Cd,K),Mu.addScaledVector(Rr,K)):(Dl.addScaledVector(ll.sub(sl),K),Pa.addScaledVector(Cd.sub(ol),K),Mu.addScaledVector(Rr.sub(al),K)))}sl.add(Dl),ol.add(Pa),al.add(Mu)}d.isSkinnedMesh&&(d.boneTransform(v,sl),d.boneTransform(M,ol),d.boneTransform(w,al));const D=function Sd(d,e,t,r,o,c,h,f){let m;if(m=1===e.side?r.intersectTriangle(h,c,o,!0,f):r.intersectTriangle(o,c,h,e.side!==Ge,f),null===m)return null;Rl.copy(f),Rl.applyMatrix4(d.matrixWorld);const v=t.ray.origin.distanceTo(Rl);return v<t.near||v>t.far?null:{distance:v,point:Rl.clone(),object:d}}(d,e,t,r,sl,ol,al,Eu);if(D){f&&(Fc.fromBufferAttribute(f,v),Fs.fromBufferAttribute(f,M),yo.fromBufferAttribute(f,w),D.uv=Ve.getUV(Eu,sl,ol,al,Fc,Fs,yo,new yt)),m&&(Fc.fromBufferAttribute(m,v),Fs.fromBufferAttribute(m,M),yo.fromBufferAttribute(m,w),D.uv2=Ve.getUV(Eu,sl,ol,al,Fc,Fs,yo,new yt));const N={a:v,b:M,c:w,normal:new re,materialIndex:0};Ve.getNormal(sl,ol,al,N.normal),D.face=N}return D}Mr.prototype.isMesh=!0;class Ia extends Rn{constructor(e=1,t=1,r=1,o=1,c=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:c,depthSegments:h};const f=this;o=Math.floor(o),c=Math.floor(c),h=Math.floor(h);const m=[],v=[],M=[],w=[];let C=0,D=0;function N(H,K,U,P,ie,$,le,me,be,Le,lt){const Ye=$/be,te=le/Le,De=$/2,He=le/2,je=me/2,Je=be+1,Ze=Le+1;let vt=0,Dt=0;const gn=new re;for(let gt=0;gt<Ze;gt++){const Et=gt*te-He;for(let $t=0;$t<Je;$t++)gn[H]=($t*Ye-De)*P,gn[K]=Et*ie,gn[U]=je,v.push(gn.x,gn.y,gn.z),gn[H]=0,gn[K]=0,gn[U]=me>0?1:-1,M.push(gn.x,gn.y,gn.z),w.push($t/be),w.push(1-gt/Le),vt+=1}for(let gt=0;gt<Le;gt++)for(let Et=0;Et<be;Et++){const mn=C+Et+Je*(gt+1),Sn=C+(Et+1)+Je*(gt+1),ct=C+(Et+1)+Je*gt;m.push(C+Et+Je*gt,mn,ct),m.push(mn,Sn,ct),Dt+=6}f.addGroup(D,Dt,lt),D+=Dt,C+=vt}N("z","y","x",-1,-1,r,t,e,h,c,0),N("z","y","x",1,-1,r,t,-e,h,c,1),N("x","z","y",1,1,e,r,t,o,h,2),N("x","z","y",1,-1,e,r,-t,o,h,3),N("x","y","z",1,-1,e,t,r,o,c,4),N("x","y","z",-1,-1,e,t,-r,o,c,5),this.setIndex(m),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(M,3)),this.setAttribute("uv",new tn(w,2))}static fromJSON(e){return new Ia(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uc(d){const e={};for(const t in d){e[t]={};for(const r in d[t]){const o=d[t][r];e[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}}return e}function ks(d){const e={};for(let t=0;t<d.length;t++){const r=uc(d[t]);for(const o in r)e[o]=r[o]}return e}const Td={clone:uc,merge:ks};class $s extends En{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const h=this.uniforms[o].value;t.uniforms[o]=h&&h.isTexture?{type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?{type:"c",value:h.getHex()}:h&&h.isVector2?{type:"v2",value:h.toArray()}:h&&h.isVector3?{type:"v3",value:h.toArray()}:h&&h.isVector4?{type:"v4",value:h.toArray()}:h&&h.isMatrix3?{type:"m3",value:h.toArray()}:h&&h.isMatrix4?{type:"m4",value:h.toArray()}:{value:h}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}$s.prototype.isShaderMaterial=!0;class Cu extends yi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Qt,this.projectionMatrix=new Qt,this.projectionMatrixInverse=new Qt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Cu.prototype.isCamera=!0;class Zr extends Cu{constructor(e=50,t=1,r=.1,o=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*xe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Y*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*xe*Math.atan(Math.tan(.5*Y*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,c,h){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Y*this.fov)/this.zoom,r=2*t,o=this.aspect*r,c=-.5*o;const h=this.view;if(null!==this.view&&this.view.enabled){const m=h.fullWidth,v=h.fullHeight;c+=h.offsetX*o/m,t-=h.offsetY*r/v,o*=h.width/m,r*=h.height/v}const f=this.filmOffset;0!==f&&(c+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Zr.prototype.isPerspectiveCamera=!0;class hc extends yi{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const o=new Zr(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new re(1,0,0)),this.add(o);const c=new Zr(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new re(-1,0,0)),this.add(c);const h=new Zr(90,1,e,t);h.layers=this.layers,h.up.set(0,0,1),h.lookAt(new re(0,1,0)),this.add(h);const f=new Zr(90,1,e,t);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new re(0,-1,0)),this.add(f);const m=new Zr(90,1,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new re(0,0,1)),this.add(m);const v=new Zr(90,1,e,t);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new re(0,0,-1)),this.add(v)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[o,c,h,f,m,v]=this.children,M=e.xr.enabled,w=e.getRenderTarget();e.xr.enabled=!1;const C=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,c),e.setRenderTarget(r,2),e.render(t,h),e.setRenderTarget(r,3),e.render(t,f),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=C,e.setRenderTarget(r,5),e.render(t,v),e.setRenderTarget(w),e.xr.enabled=M,r.texture.needsPMREMUpdate=!0}}class x extends Ar{constructor(e,t,r,o,c,h,f,m,v,M){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,o,c,h,f,m,v,M),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}x.prototype.isCubeTexture=!0;class R extends es{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),this.texture=new x(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:xn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=pn,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Ia(5,5,5),c=new $s({name:"CubemapFromEquirect",uniforms:uc(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});c.uniforms.tEquirect.value=t;const h=new Mr(o,c),f=t.minFilter;return t.minFilter===Nn&&(t.minFilter=xn),new hc(1,10,this).update(e,h),t.minFilter=f,h.geometry.dispose(),h.material.dispose(),this}clear(e,t,r,o){const c=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(t,r,o);e.setRenderTarget(c)}}R.prototype.isWebGLCubeRenderTarget=!0;const g=new re,T=new re,W=new vr;class oe{constructor(e=new re(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=g.subVectors(r,t).cross(T.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(g),o=this.normal.dot(r);if(0===o)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/o;return c<0||c>1?null:t.copy(r).multiplyScalar(c).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||W.getNormalMatrix(e),o=this.coplanarPoint(g).applyMatrix4(e),c=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}oe.prototype.isPlane=!0;const it=new Ii,hn=new re;class Ln{constructor(e=new oe,t=new oe,r=new oe,o=new oe,c=new oe,h=new oe){this.planes=[e,t,r,o,c,h]}set(e,t,r,o,c,h){const f=this.planes;return f[0].copy(e),f[1].copy(t),f[2].copy(r),f[3].copy(o),f[4].copy(c),f[5].copy(h),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],c=r[1],h=r[2],f=r[3],m=r[4],v=r[5],M=r[6],w=r[7],C=r[8],D=r[9],N=r[10],H=r[11],K=r[12],U=r[13],P=r[14],ie=r[15];return t[0].setComponents(f-o,w-m,H-C,ie-K).normalize(),t[1].setComponents(f+o,w+m,H+C,ie+K).normalize(),t[2].setComponents(f+c,w+v,H+D,ie+U).normalize(),t[3].setComponents(f-c,w-v,H-D,ie-U).normalize(),t[4].setComponents(f-h,w-M,H-N,ie-P).normalize(),t[5].setComponents(f+h,w+M,H+N,ie+P).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),it.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(it)}intersectsSprite(e){return it.center.set(0,0,0),it.radius=.7071067811865476,it.applyMatrix4(e.matrixWorld),this.intersectsSphere(it)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let c=0;c<6;c++)if(t[c].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(hn.x=o.normal.x>0?e.max.x:e.min.x,hn.y=o.normal.y>0?e.max.y:e.min.y,hn.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(hn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function gs(){let d=null,e=!1,t=null,r=null;function o(c,h){t(c,h),r=d.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==t&&(r=d.requestAnimationFrame(o),e=!0)},stop:function(){d.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(c){t=c},setContext:function(c){d=c}}}function Bh(d,e){const t=e.isWebGL2,r=new WeakMap;return{get:function h(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)},remove:function f(v){v.isInterleavedBufferAttribute&&(v=v.data);const M=r.get(v);M&&(d.deleteBuffer(M.buffer),r.delete(v))},update:function m(v,M){if(v.isGLBufferAttribute){const C=r.get(v);return void((!C||C.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}v.isInterleavedBufferAttribute&&(v=v.data);const w=r.get(v);void 0===w?r.set(v,function o(v,M){const w=v.array,C=v.usage,D=d.createBuffer();d.bindBuffer(M,D),d.bufferData(M,w,C),v.onUploadCallback();let N=5126;return w instanceof Float32Array?N=5126:w instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):w instanceof Uint16Array?v.isFloat16BufferAttribute?t?N=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):N=5123:w instanceof Int16Array?N=5122:w instanceof Uint32Array?N=5125:w instanceof Int32Array?N=5124:w instanceof Int8Array?N=5120:(w instanceof Uint8Array||w instanceof Uint8ClampedArray)&&(N=5121),{buffer:D,type:N,bytesPerElement:w.BYTES_PER_ELEMENT,version:v.version}}(v,M)):w.version<v.version&&(function c(v,M,w){const C=M.array,D=M.updateRange;d.bindBuffer(w,v),-1===D.count?d.bufferSubData(w,0,C):(t?d.bufferSubData(w,D.offset*C.BYTES_PER_ELEMENT,C,D.offset,D.count):d.bufferSubData(w,D.offset*C.BYTES_PER_ELEMENT,C.subarray(D.offset,D.offset+D.count)),D.count=-1)}(w.buffer,v,M),w.version=v.version)}}}class Bc extends Rn{constructor(e=1,t=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const c=e/2,h=t/2,f=Math.floor(r),m=Math.floor(o),v=f+1,M=m+1,w=e/f,C=t/m,D=[],N=[],H=[],K=[];for(let U=0;U<M;U++){const P=U*C-h;for(let ie=0;ie<v;ie++)N.push(ie*w-c,-P,0),H.push(0,0,1),K.push(ie/f),K.push(1-U/m)}for(let U=0;U<m;U++)for(let P=0;P<f;P++){const $=P+v*(U+1),le=P+1+v*(U+1),me=P+1+v*U;D.push(P+v*U,$,me),D.push($,le,me)}this.setIndex(D),this.setAttribute("position",new tn(N,3)),this.setAttribute("normal",new tn(H,3)),this.setAttribute("uv",new tn(K,2))}static fromJSON(e){return new Bc(e.width,e.height,e.widthSegments,e.heightSegments)}}const mi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Zt={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vr},uv2Transform:{value:new vr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}}},Oa={basic:{uniforms:ks([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.fog]),vertexShader:mi.meshbasic_vert,fragmentShader:mi.meshbasic_frag},lambert:{uniforms:ks([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:mi.meshlambert_vert,fragmentShader:mi.meshlambert_frag},phong:{uniforms:ks([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:mi.meshphong_vert,fragmentShader:mi.meshphong_frag},standard:{uniforms:ks([Zt.common,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.roughnessmap,Zt.metalnessmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},toon:{uniforms:ks([Zt.common,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.gradientmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:mi.meshtoon_vert,fragmentShader:mi.meshtoon_frag},matcap:{uniforms:ks([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,{matcap:{value:null}}]),vertexShader:mi.meshmatcap_vert,fragmentShader:mi.meshmatcap_frag},points:{uniforms:ks([Zt.points,Zt.fog]),vertexShader:mi.points_vert,fragmentShader:mi.points_frag},dashed:{uniforms:ks([Zt.common,Zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mi.linedashed_vert,fragmentShader:mi.linedashed_frag},depth:{uniforms:ks([Zt.common,Zt.displacementmap]),vertexShader:mi.depth_vert,fragmentShader:mi.depth_frag},normal:{uniforms:ks([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,{opacity:{value:1}}]),vertexShader:mi.meshnormal_vert,fragmentShader:mi.meshnormal_frag},sprite:{uniforms:ks([Zt.sprite,Zt.fog]),vertexShader:mi.sprite_vert,fragmentShader:mi.sprite_frag},background:{uniforms:{uvTransform:{value:new vr},t2D:{value:null}},vertexShader:mi.background_vert,fragmentShader:mi.background_frag},cube:{uniforms:ks([Zt.envmap,{opacity:{value:1}}]),vertexShader:mi.cube_vert,fragmentShader:mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mi.equirect_vert,fragmentShader:mi.equirect_frag},distanceRGBA:{uniforms:ks([Zt.common,Zt.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mi.distanceRGBA_vert,fragmentShader:mi.distanceRGBA_frag},shadow:{uniforms:ks([Zt.lights,Zt.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:mi.shadow_vert,fragmentShader:mi.shadow_frag}};function Xp(d,e,t,r,o,c){const h=new Ht(0);let m,v,f=!0===o?0:1,M=null,w=0,C=null;function N(H,K){t.buffers.color.setClear(H.r,H.g,H.b,K,c)}return{getClearColor:function(){return h},setClearColor:function(H,K=1){h.set(H),f=K,N(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(H){f=H,N(h,f)},render:function D(H,K){let U=!1,P=!0===K.isScene?K.background:null;P&&P.isTexture&&(P=e.get(P));const ie=d.xr,$=ie.getSession&&ie.getSession();$&&"additive"===$.environmentBlendMode&&(P=null),null===P?N(h,f):P&&P.isColor&&(N(P,1),U=!0),(d.autoClear||U)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil),P&&(P.isCubeTexture||306===P.mapping)?(void 0===v&&(v=new Mr(new Ia(1,1,1),new $s({name:"BackgroundCubeMaterial",uniforms:uc(Oa.cube.uniforms),vertexShader:Oa.cube.vertexShader,fragmentShader:Oa.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(le,me,be){this.matrixWorld.copyPosition(be.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&!1===P.isRenderTargetTexture?-1:1,(M!==P||w!==P.version||C!==d.toneMapping)&&(v.material.needsUpdate=!0,M=P,w=P.version,C=d.toneMapping),H.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(void 0===m&&(m=new Mr(new Bc(2,2),new $s({name:"BackgroundMaterial",uniforms:uc(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:et,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=P,!0===P.matrixAutoUpdate&&P.updateMatrix(),m.material.uniforms.uvTransform.value.copy(P.matrix),(M!==P||w!==P.version||C!==d.toneMapping)&&(m.material.needsUpdate=!0,M=P,w=P.version,C=d.toneMapping),H.unshift(m,m.geometry,m.material,0,0,null))}}}function Fv(d,e,t,r){const o=d.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),h=r.isWebGL2||null!==c,f={},m=H(null);let v=m;function C(He){return r.isWebGL2?d.bindVertexArray(He):c.bindVertexArrayOES(He)}function D(He){return r.isWebGL2?d.deleteVertexArray(He):c.deleteVertexArrayOES(He)}function H(He){const je=[],Je=[],Ze=[];for(let vt=0;vt<o;vt++)je[vt]=0,Je[vt]=0,Ze[vt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:je,enabledAttributes:Je,attributeDivisors:Ze,object:He,attributes:{},index:null}}function P(){const He=v.newAttributes;for(let je=0,Je=He.length;je<Je;je++)He[je]=0}function ie(He){$(He,0)}function $(He,je){const Ze=v.enabledAttributes,vt=v.attributeDivisors;v.newAttributes[He]=1,0===Ze[He]&&(d.enableVertexAttribArray(He),Ze[He]=1),vt[He]!==je&&((r.isWebGL2?d:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](He,je),vt[He]=je)}function le(){const He=v.newAttributes,je=v.enabledAttributes;for(let Je=0,Ze=je.length;Je<Ze;Je++)je[Je]!==He[Je]&&(d.disableVertexAttribArray(Je),je[Je]=0)}function me(He,je,Je,Ze,vt,Dt){!0!==r.isWebGL2||5124!==Je&&5125!==Je?d.vertexAttribPointer(He,je,Je,Ze,vt,Dt):d.vertexAttribIPointer(He,je,Je,vt,Dt)}function te(){De(),v!==m&&(v=m,C(v.object))}function De(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function M(He,je,Je,Ze,vt){let Dt=!1;if(h){const gn=function N(He,je,Je){const Ze=!0===Je.wireframe;let vt=f[He.id];void 0===vt&&(vt={},f[He.id]=vt);let Dt=vt[je.id];void 0===Dt&&(Dt={},vt[je.id]=Dt);let gn=Dt[Ze];return void 0===gn&&(gn=H(function w(){return r.isWebGL2?d.createVertexArray():c.createVertexArrayOES()}()),Dt[Ze]=gn),gn}(Ze,Je,je);v!==gn&&(v=gn,C(v.object)),Dt=function K(He,je){const Je=v.attributes,Ze=He.attributes;let vt=0;for(const Dt in Ze){const gn=Je[Dt],gt=Ze[Dt];if(void 0===gn||gn.attribute!==gt||gn.data!==gt.data)return!0;vt++}return v.attributesNum!==vt||v.index!==je}(Ze,vt),Dt&&function U(He,je){const Je={},Ze=He.attributes;let vt=0;for(const Dt in Ze){const gn=Ze[Dt],gt={};gt.attribute=gn,gn.data&&(gt.data=gn.data),Je[Dt]=gt,vt++}v.attributes=Je,v.attributesNum=vt,v.index=je}(Ze,vt)}else{const gn=!0===je.wireframe;(v.geometry!==Ze.id||v.program!==Je.id||v.wireframe!==gn)&&(v.geometry=Ze.id,v.program=Je.id,v.wireframe=gn,Dt=!0)}!0===He.isInstancedMesh&&(Dt=!0),null!==vt&&t.update(vt,34963),Dt&&(function be(He,je,Je,Ze){if(!1===r.isWebGL2&&(He.isInstancedMesh||Ze.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;P();const vt=Ze.attributes,Dt=Je.getAttributes(),gn=je.defaultAttributeValues;for(const gt in Dt){const Et=Dt[gt];if(Et.location>=0){let $t=vt[gt];if(void 0===$t&&("instanceMatrix"===gt&&He.instanceMatrix&&($t=He.instanceMatrix),"instanceColor"===gt&&He.instanceColor&&($t=He.instanceColor)),void 0!==$t){const mn=$t.normalized,Sn=$t.itemSize,ct=t.get($t);if(void 0===ct)continue;const zi=ct.buffer,wn=ct.type,jn=ct.bytesPerElement;if($t.isInterleavedBufferAttribute){const sn=$t.data,di=sn.stride,Gn=$t.offset;if(sn&&sn.isInstancedInterleavedBuffer){for(let xt=0;xt<Et.locationSize;xt++)$(Et.location+xt,sn.meshPerAttribute);!0!==He.isInstancedMesh&&void 0===Ze._maxInstanceCount&&(Ze._maxInstanceCount=sn.meshPerAttribute*sn.count)}else for(let xt=0;xt<Et.locationSize;xt++)ie(Et.location+xt);d.bindBuffer(34962,zi);for(let xt=0;xt<Et.locationSize;xt++)me(Et.location+xt,Sn/Et.locationSize,wn,mn,di*jn,(Gn+Sn/Et.locationSize*xt)*jn)}else{if($t.isInstancedBufferAttribute){for(let sn=0;sn<Et.locationSize;sn++)$(Et.location+sn,$t.meshPerAttribute);!0!==He.isInstancedMesh&&void 0===Ze._maxInstanceCount&&(Ze._maxInstanceCount=$t.meshPerAttribute*$t.count)}else for(let sn=0;sn<Et.locationSize;sn++)ie(Et.location+sn);d.bindBuffer(34962,zi);for(let sn=0;sn<Et.locationSize;sn++)me(Et.location+sn,Sn/Et.locationSize,wn,mn,Sn*jn,Sn/Et.locationSize*sn*jn)}}else if(void 0!==gn){const mn=gn[gt];if(void 0!==mn)switch(mn.length){case 2:d.vertexAttrib2fv(Et.location,mn);break;case 3:d.vertexAttrib3fv(Et.location,mn);break;case 4:d.vertexAttrib4fv(Et.location,mn);break;default:d.vertexAttrib1fv(Et.location,mn)}}}}le()}(He,je,Je,Ze),null!==vt&&d.bindBuffer(34963,t.get(vt).buffer))},reset:te,resetDefaultState:De,dispose:function Le(){te();for(const He in f){const je=f[He];for(const Je in je){const Ze=je[Je];for(const vt in Ze)D(Ze[vt].object),delete Ze[vt];delete je[Je]}delete f[He]}},releaseStatesOfGeometry:function lt(He){if(void 0===f[He.id])return;const je=f[He.id];for(const Je in je){const Ze=je[Je];for(const vt in Ze)D(Ze[vt].object),delete Ze[vt];delete je[Je]}delete f[He.id]},releaseStatesOfProgram:function Ye(He){for(const je in f){const Je=f[je];if(void 0===Je[He.id])continue;const Ze=Je[He.id];for(const vt in Ze)D(Ze[vt].object),delete Ze[vt];delete Je[He.id]}},initAttributes:P,enableAttribute:ie,disableUnusedAttributes:le}}function kv(d,e,t,r){const o=r.isWebGL2;let c;this.setMode=function h(v){c=v},this.render=function f(v,M){d.drawArrays(c,v,M),t.update(M,c,1)},this.renderInstances=function m(v,M,w){if(0===w)return;let C,D;if(o)C=d,D="drawArraysInstanced";else if(C=e.get("ANGLE_instanced_arrays"),D="drawArraysInstancedANGLE",null===C)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[D](c,v,M,w),t.update(M,c,w)}}function Uv(d,e,t){let r;function c(be){if("highp"===be){if(d.getShaderPrecisionFormat(35633,36338).precision>0&&d.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";be="mediump"}return"mediump"===be&&d.getShaderPrecisionFormat(35633,36337).precision>0&&d.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const h="undefined"!=typeof WebGL2RenderingContext&&d instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&d instanceof WebGL2ComputeRenderingContext;let f=void 0!==t.precision?t.precision:"highp";const m=c(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const v=h||e.has("WEBGL_draw_buffers"),M=!0===t.logarithmicDepthBuffer,w=d.getParameter(34930),C=d.getParameter(35660),D=d.getParameter(3379),N=d.getParameter(34076),H=d.getParameter(34921),K=d.getParameter(36347),U=d.getParameter(36348),P=d.getParameter(36349),ie=C>0,$=h||e.has("OES_texture_float");return{isWebGL2:h,drawBuffers:v,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const be=e.get("EXT_texture_filter_anisotropic");r=d.getParameter(be.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,precision:f,logarithmicDepthBuffer:M,maxTextures:w,maxVertexTextures:C,maxTextureSize:D,maxCubemapSize:N,maxAttributes:H,maxVertexUniforms:K,maxVaryings:U,maxFragmentUniforms:P,vertexTextures:ie,floatFragmentTextures:$,floatVertexTextures:ie&&$,maxSamples:h?d.getParameter(36183):0}}function Wc(d){const e=this;let t=null,r=0,o=!1,c=!1;const h=new oe,f=new vr,m={value:null,needsUpdate:!1};function v(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function M(w,C,D,N){const H=null!==w?w.length:0;let K=null;if(0!==H){if(K=m.value,!0!==N||null===K){const U=D+4*H,P=C.matrixWorldInverse;f.getNormalMatrix(P),(null===K||K.length<U)&&(K=new Float32Array(U));for(let ie=0,$=D;ie!==H;++ie,$+=4)h.copy(w[ie]).applyMatrix4(P,f),h.normal.toArray(K,$),K[$+3]=h.constant}m.value=K,m.needsUpdate=!0}return e.numPlanes=H,e.numIntersection=0,K}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(w,C,D){const N=0!==w.length||C||0!==r||o;return o=C,t=M(w,D,0),r=w.length,N},this.beginShadows=function(){c=!0,M(null)},this.endShadows=function(){c=!1,v()},this.setState=function(w,C,D){const N=w.clippingPlanes,H=w.clipIntersection,K=w.clipShadows,U=d.get(w);if(!o||null===N||0===N.length||c&&!K)c?M(null):v();else{const P=c?0:r,ie=4*P;let $=U.clippingState||null;m.value=$,$=M(N,C,ie,D);for(let le=0;le!==ie;++le)$[le]=t[le];U.clippingState=$,this.numIntersection=H?this.numPlanes:0,this.numPlanes+=P}}}function Na(d){let e=new WeakMap;function t(h,f){return 303===f?h.mapping=301:304===f&&(h.mapping=302),h}function o(h){const f=h.target;f.removeEventListener("dispose",o);const m=e.get(f);void 0!==m&&(e.delete(f),m.dispose())}return{get:function r(h){if(h&&h.isTexture&&!1===h.isRenderTargetTexture){const f=h.mapping;if(303===f||304===f){if(e.has(h))return t(e.get(h).texture,h.mapping);{const m=h.image;if(m&&m.height>0){const v=new R(m.height/2);return v.fromEquirectangularTexture(d,h),e.set(h,v),h.addEventListener("dispose",o),t(v.texture,h.mapping)}return null}}}return h},dispose:function c(){e=new WeakMap}}}Oa.physical={uniforms:ks([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new yt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag};class Nd extends Cu{constructor(e=-1,t=1,r=1,o=-1,c=.1,h=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=c,this.far=h,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,c,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let c=r-e,h=r+e,f=o+t,m=o-t;if(null!==this.view&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=v*this.view.offsetX,h=c+v*this.view.width,f-=M*this.view.offsetY,m=f-M*this.view.height}this.projectionMatrix.makeOrthographic(c,h,f,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Nd.prototype.isOrthographicCamera=!0;class Fd extends $s{constructor(e){super(e),this.type="RawShaderMaterial"}}Fd.prototype.isRawShaderMaterial=!0;const ms=Math.pow(2,8),kd=[.125,.215,.35,.446,.526,.582],Ud=5+kd.length,Bd=new Nd,{_lodPlanes:ul,_sizeLods:Yh,_sigmas:Iu}=Kp(),Vd=new Ht;let Lu=null;const Il=(1+Math.sqrt(5))/2,Ou=1/Il,vc=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,Il,Ou),new re(0,Il,-Ou),new re(Ou,0,Il),new re(-Ou,0,Il),new re(Il,Ou,0),new re(-Il,Ou,0)];class Hd{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function Bv(d){const e=new Float32Array(d),t=new re(0,1,0);return new Fd({name:"SphericalGaussianBlur",defines:{n:d},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){Lu=this._renderer.getRenderTarget();const c=this._allocateTargets();return this._sceneToCubeUV(e,r,o,c),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=tg(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=eg(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<ul.length;e++)ul[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Lu),e.scissorTest=!1,jc(e,0,0,e.width,e.height)}_fromTexture(e,t){Lu=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:xn,minFilter:xn,generateMipmaps:!1,type:ur,format:pn,encoding:gi,depthBuffer:!1},r=Qp(t);return r.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Qp(t)),r}_compileMaterial(e){const t=new Mr(ul[0],e);this._renderer.compile(t,Bd)}_sceneToCubeUV(e,t,r,o){const f=new Zr(90,1,t,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],M=this._renderer,w=M.autoClear,C=M.toneMapping;M.getClearColor(Vd),M.toneMapping=0,M.autoClear=!1;const D=new rn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),N=new Mr(new Ia,D);let H=!1;const K=e.background;K?K.isColor&&(D.color.copy(K),e.background=null,H=!0):(D.color.copy(Vd),H=!0);for(let U=0;U<6;U++){const P=U%3;0===P?(f.up.set(0,m[U],0),f.lookAt(v[U],0,0)):1===P?(f.up.set(0,0,m[U]),f.lookAt(0,v[U],0)):(f.up.set(0,m[U],0),f.lookAt(0,0,v[U])),jc(o,P*ms,U>2?ms:0,ms,ms),M.setRenderTarget(o),H&&M.render(N,f),M.render(e,f)}N.geometry.dispose(),N.material.dispose(),M.toneMapping=C,M.autoClear=w,e.background=K}_textureToCubeUV(e,t){const r=this._renderer,o=301===e.mapping||302===e.mapping;o?(null===this._cubemapShader&&(this._cubemapShader=tg()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=eg());const c=o?this._cubemapShader:this._equirectShader,h=new Mr(ul[0],c),f=c.uniforms;f.envMap.value=e,o||f.texelSize.value.set(1/e.image.width,1/e.image.height),jc(t,0,0,3*ms,2*ms),r.setRenderTarget(t),r.render(h,Bd)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<Ud;o++){const c=Math.sqrt(Iu[o]*Iu[o]-Iu[o-1]*Iu[o-1]);this._blur(e,o-1,o,c,vc[(o-1)%vc.length])}t.autoClear=r}_blur(e,t,r,o,c){const h=this._pingPongRenderTarget;this._halfBlur(e,h,t,r,o,"latitudinal",c),this._halfBlur(h,e,r,r,o,"longitudinal",c)}_halfBlur(e,t,r,o,c,h,f){const m=this._renderer,v=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const w=new Mr(ul[o],v),C=v.uniforms,D=Yh[r]-1,N=isFinite(c)?Math.PI/(2*D):2*Math.PI/39,H=c/N,K=isFinite(c)?1+Math.floor(3*H):20;K>20&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${K} samples when the maximum is set to 20`);const U=[];let P=0;for(let me=0;me<20;++me){const be=me/H,Le=Math.exp(-be*be/2);U.push(Le),0===me?P+=Le:me<K&&(P+=2*Le)}for(let me=0;me<U.length;me++)U[me]=U[me]/P;C.envMap.value=e.texture,C.samples.value=K,C.weights.value=U,C.latitudinal.value="latitudinal"===h,f&&(C.poleAxis.value=f),C.dTheta.value=N,C.mipInt.value=8-r;const ie=Yh[o];jc(t,3*Math.max(0,ms-2*ie),(0===o?0:2*ms)+2*ie*(o>4?o-8+4:0),3*ie,2*ie),m.setRenderTarget(t),m.render(w,Bd)}}function Kp(){const d=[],e=[],t=[];let r=8;for(let o=0;o<Ud;o++){const c=Math.pow(2,r);e.push(c);let h=1/c;o>4?h=kd[o-8+4-1]:0===o&&(h=0),t.push(h);const f=1/(c-1),m=-f/2,v=1+f/2,M=[m,m,v,m,v,v,m,m,v,v,m,v],w=6,C=6,D=3,N=2,H=1,K=new Float32Array(D*C*w),U=new Float32Array(N*C*w),P=new Float32Array(H*C*w);for(let $=0;$<w;$++){const le=$%3*2/3-1,me=$>2?0:-1;K.set([le,me,0,le+2/3,me,0,le+2/3,me+1,0,le,me,0,le+2/3,me+1,0,le,me+1,0],D*C*$),U.set(M,N*C*$),P.set([$,$,$,$,$,$],H*C*$)}const ie=new Rn;ie.setAttribute("position",new ui(K,D)),ie.setAttribute("uv",new ui(U,N)),ie.setAttribute("faceIndex",new ui(P,H)),d.push(ie),r>4&&r--}return{_lodPlanes:d,_sizeLods:e,_sigmas:t}}function Qp(d){const e=new es(3*ms,3*ms,d);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function jc(d,e,t,r,o){d.viewport.set(e,t,r,o),d.scissor.set(e,t,r,o)}function eg(){const d=new yt(1,1);return new Fd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:d}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tg(){return new Fd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vv(d){let e=new WeakMap,t=null;function c(f){const m=f.target;m.removeEventListener("dispose",c);const v=e.get(m);void 0!==v&&(e.delete(m),v.dispose())}return{get:function r(f){if(f&&f.isTexture){const m=f.mapping,v=303===m||304===m,M=301===m||302===m;if(v||M){if(f.isRenderTargetTexture&&!0===f.needsPMREMUpdate){f.needsPMREMUpdate=!1;let w=e.get(f);return null===t&&(t=new Hd(d)),w=v?t.fromEquirectangular(f,w):t.fromCubemap(f,w),e.set(f,w),w.texture}if(e.has(f))return e.get(f).texture;{const w=f.image;if(v&&w&&w.height>0||M&&w&&function o(f){let m=0;for(let M=0;M<6;M++)void 0!==f[M]&&m++;return 6===m}(w)){null===t&&(t=new Hd(d));const C=v?t.fromEquirectangular(f):t.fromCubemap(f);return e.set(f,C),f.addEventListener("dispose",c),C.texture}return null}}}return f},dispose:function h(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Hv(d){const e={};function t(r){if(void 0!==e[r])return e[r];let o;switch(r){case"WEBGL_depth_texture":o=d.getExtension("WEBGL_depth_texture")||d.getExtension("MOZ_WEBGL_depth_texture")||d.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=d.getExtension("WEBGL_compressed_texture_s3tc")||d.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=d.getExtension("WEBGL_compressed_texture_pvrtc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=d.getExtension(r)}return e[r]=o,o}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return null===o&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function ng(d,e,t,r){const o={},c=new WeakMap;function h(w){const C=w.target;null!==C.index&&e.remove(C.index);for(const N in C.attributes)e.remove(C.attributes[N]);C.removeEventListener("dispose",h),delete o[C.id];const D=c.get(C);D&&(e.remove(D),c.delete(C)),r.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,t.memory.geometries--}function v(w){const C=[],D=w.index,N=w.attributes.position;let H=0;if(null!==D){const P=D.array;H=D.version;for(let ie=0,$=P.length;ie<$;ie+=3){const le=P[ie+0],me=P[ie+1],be=P[ie+2];C.push(le,me,me,be,be,le)}}else{H=N.version;for(let ie=0,$=N.array.length/3-1;ie<$;ie+=3){const le=ie+0,me=ie+1,be=ie+2;C.push(le,me,me,be,be,le)}}const K=new(Ic(C)?il:is)(C,1);K.version=H;const U=c.get(w);U&&e.remove(U),c.set(w,K)}return{get:function f(w,C){return!0===o[C.id]||(C.addEventListener("dispose",h),o[C.id]=!0,t.memory.geometries++),C},update:function m(w){const C=w.attributes;for(const N in C)e.update(C[N],34962);const D=w.morphAttributes;for(const N in D){const H=D[N];for(let K=0,U=H.length;K<U;K++)e.update(H[K],34962)}},getWireframeAttribute:function M(w){const C=c.get(w);if(C){const D=w.index;null!==D&&C.version<D.version&&v(w)}else v(w);return c.get(w)}}}function Xh(d,e,t,r){const o=r.isWebGL2;let c,f,m;this.setMode=function h(C){c=C},this.setIndex=function v(C){f=C.type,m=C.bytesPerElement},this.render=function M(C,D){d.drawElements(c,D,f,C*m),t.update(D,c,1)},this.renderInstances=function w(C,D,N){if(0===N)return;let H,K;if(o)H=d,K="drawElementsInstanced";else if(H=e.get("ANGLE_instanced_arrays"),K="drawElementsInstancedANGLE",null===H)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");H[K](c,D,f,C*m,N),t.update(D,c,N)}}function ig(d){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(c,h,f){switch(t.calls++,h){case 4:t.triangles+=f*(c/3);break;case 1:t.lines+=f*(c/2);break;case 3:t.lines+=f*(c-1);break;case 2:t.lines+=f*c;break;case 0:t.points+=f*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h)}}}}class Nu extends Ar{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Lt,this.minFilter=Lt,this.wrapR=nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function zv(d,e){return d[0]-e[0]}function Gv(d,e){return Math.abs(e[1])-Math.abs(d[1])}function Kh(d,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),d.divideScalar(t)}function rg(d,e,t){const r={},o=new Float32Array(8),c=new WeakMap,h=new re,f=[];for(let v=0;v<8;v++)f[v]=[v,0];return{update:function m(v,M,w,C){const D=v.morphTargetInfluences;if(!0===e.isWebGL2){const N=M.morphAttributes.position.length;let H=c.get(M);if(void 0===H||H.count!==N){let De=function(){Ye.dispose(),c.delete(M),M.removeEventListener("dispose",De)};void 0!==H&&H.texture.dispose();const P=void 0!==M.morphAttributes.normal,ie=M.morphAttributes.position,$=M.morphAttributes.normal||[],me=!0===P?2:1;let be=M.attributes.position.count*me,Le=1;be>e.maxTextureSize&&(Le=Math.ceil(be/e.maxTextureSize),be=e.maxTextureSize);const lt=new Float32Array(be*Le*4*N),Ye=new Nu(lt,be,Le,N);Ye.format=pn,Ye.type=as,Ye.needsUpdate=!0;const te=4*me;for(let He=0;He<N;He++){const je=ie[He],Je=$[He],Ze=be*Le*4*He;for(let vt=0;vt<je.count;vt++){h.fromBufferAttribute(je,vt),!0===je.normalized&&Kh(h,je);const Dt=vt*te;lt[Ze+Dt+0]=h.x,lt[Ze+Dt+1]=h.y,lt[Ze+Dt+2]=h.z,lt[Ze+Dt+3]=0,!0===P&&(h.fromBufferAttribute(Je,vt),!0===Je.normalized&&Kh(h,Je),lt[Ze+Dt+4]=h.x,lt[Ze+Dt+5]=h.y,lt[Ze+Dt+6]=h.z,lt[Ze+Dt+7]=0)}}H={count:N,texture:Ye,size:new yt(be,Le)},c.set(M,H),M.addEventListener("dispose",De)}let K=0;for(let P=0;P<D.length;P++)K+=D[P];const U=M.morphTargetsRelative?1:1-K;C.getUniforms().setValue(d,"morphTargetBaseInfluence",U),C.getUniforms().setValue(d,"morphTargetInfluences",D),C.getUniforms().setValue(d,"morphTargetsTexture",H.texture,t),C.getUniforms().setValue(d,"morphTargetsTextureSize",H.size)}else{const N=void 0===D?0:D.length;let H=r[M.id];if(void 0===H||H.length!==N){H=[];for(let $=0;$<N;$++)H[$]=[$,0];r[M.id]=H}for(let $=0;$<N;$++){const le=H[$];le[0]=$,le[1]=D[$]}H.sort(Gv);for(let $=0;$<8;$++)$<N&&H[$][1]?(f[$][0]=H[$][0],f[$][1]=H[$][1]):(f[$][0]=Number.MAX_SAFE_INTEGER,f[$][1]=0);f.sort(zv);const K=M.morphAttributes.position,U=M.morphAttributes.normal;let P=0;for(let $=0;$<8;$++){const le=f[$],me=le[0],be=le[1];me!==Number.MAX_SAFE_INTEGER&&be?(K&&M.getAttribute("morphTarget"+$)!==K[me]&&M.setAttribute("morphTarget"+$,K[me]),U&&M.getAttribute("morphNormal"+$)!==U[me]&&M.setAttribute("morphNormal"+$,U[me]),o[$]=be,P+=be):(K&&!0===M.hasAttribute("morphTarget"+$)&&M.deleteAttribute("morphTarget"+$),U&&!0===M.hasAttribute("morphNormal"+$)&&M.deleteAttribute("morphNormal"+$),o[$]=0)}const ie=M.morphTargetsRelative?1:1-P;C.getUniforms().setValue(d,"morphTargetBaseInfluence",ie),C.getUniforms().setValue(d,"morphTargetInfluences",o)}}}}function _c(d,e,t,r){let o=new WeakMap;function f(m){const v=m.target;v.removeEventListener("dispose",f),t.remove(v.instanceMatrix),null!==v.instanceColor&&t.remove(v.instanceColor)}return{update:function c(m){const v=r.render.frame,w=e.get(m,m.geometry);return o.get(w)!==v&&(e.update(w),o.set(w,v)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",f)&&m.addEventListener("dispose",f),t.update(m.instanceMatrix,34962),null!==m.instanceColor&&t.update(m.instanceColor,34962)),w},dispose:function h(){o=new WeakMap}}}Nu.prototype.isDataTexture2DArray=!0;class Qh extends Ar{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Lt,this.minFilter=Lt,this.wrapR=nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Qh.prototype.isDataTexture3D=!0;const ef=new Ar,sg=new Nu,Fu=new Qh,og=new x,tf=[],nf=[],rf=new Float32Array(16),zd=new Float32Array(9),sf=new Float32Array(4);function dl(d,e,t){const r=d[0];if(r<=0||r>0)return d;const o=e*t;let c=tf[o];if(void 0===c&&(c=new Float32Array(o),tf[o]=c),0!==e){r.toArray(c,0);for(let h=1,f=0;h!==e;++h)f+=t,d[h].toArray(c,f)}return c}function As(d,e){if(d.length!==e.length)return!1;for(let t=0,r=d.length;t<r;t++)if(d[t]!==e[t])return!1;return!0}function Us(d,e){for(let t=0,r=e.length;t<r;t++)d[t]=e[t]}function qc(d,e){let t=nf[e];void 0===t&&(t=new Int32Array(e),nf[e]=t);for(let r=0;r!==e;++r)t[r]=d.allocateTextureUnit();return t}function ag(d,e){const t=this.cache;t[0]!==e&&(d.uniform1f(this.addr,e),t[0]=e)}function af(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(d.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(As(t,e))return;d.uniform2fv(this.addr,e),Us(t,e)}}function ku(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(d.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(d.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(As(t,e))return;d.uniform3fv(this.addr,e),Us(t,e)}}function Wv(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(d.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(As(t,e))return;d.uniform4fv(this.addr,e),Us(t,e)}}function lg(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix2fv(this.addr,!1,e),Us(t,e)}else{if(As(t,r))return;sf.set(r),d.uniformMatrix2fv(this.addr,!1,sf),Us(t,r)}}function Zv(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix3fv(this.addr,!1,e),Us(t,e)}else{if(As(t,r))return;zd.set(r),d.uniformMatrix3fv(this.addr,!1,zd),Us(t,r)}}function jv(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix4fv(this.addr,!1,e),Us(t,e)}else{if(As(t,r))return;rf.set(r),d.uniformMatrix4fv(this.addr,!1,rf),Us(t,r)}}function cg(d,e){const t=this.cache;t[0]!==e&&(d.uniform1i(this.addr,e),t[0]=e)}function lf(d,e){const t=this.cache;As(t,e)||(d.uniform2iv(this.addr,e),Us(t,e))}function ug(d,e){const t=this.cache;As(t,e)||(d.uniform3iv(this.addr,e),Us(t,e))}function N0(d,e){const t=this.cache;As(t,e)||(d.uniform4iv(this.addr,e),Us(t,e))}function dg(d,e){const t=this.cache;t[0]!==e&&(d.uniform1ui(this.addr,e),t[0]=e)}function qv(d,e){const t=this.cache;As(t,e)||(d.uniform2uiv(this.addr,e),Us(t,e))}function hg(d,e){const t=this.cache;As(t,e)||(d.uniform3uiv(this.addr,e),Us(t,e))}function $v(d,e){const t=this.cache;As(t,e)||(d.uniform4uiv(this.addr,e),Us(t,e))}function Yv(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.safeSetTexture2D(e||ef,o)}function da(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||Fu,o)}function Jv(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.safeSetTextureCube(e||og,o)}function fg(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||sg,o)}function Kv(d,e){d.uniform1fv(this.addr,e)}function Qv(d,e){const t=dl(e,this.size,2);d.uniform2fv(this.addr,t)}function e_(d,e){const t=dl(e,this.size,3);d.uniform3fv(this.addr,t)}function pg(d,e){const t=dl(e,this.size,4);d.uniform4fv(this.addr,t)}function t_(d,e){const t=dl(e,this.size,4);d.uniformMatrix2fv(this.addr,!1,t)}function n_(d,e){const t=dl(e,this.size,9);d.uniformMatrix3fv(this.addr,!1,t)}function i_(d,e){const t=dl(e,this.size,16);d.uniformMatrix4fv(this.addr,!1,t)}function qn(d,e){d.uniform1iv(this.addr,e)}function gg(d,e){d.uniform2iv(this.addr,e)}function mg(d,e){d.uniform3iv(this.addr,e)}function vg(d,e){d.uniform4iv(this.addr,e)}function Gd(d,e){d.uniform1uiv(this.addr,e)}function ha(d,e){d.uniform2uiv(this.addr,e)}function _g(d,e){d.uniform3uiv(this.addr,e)}function r_(d,e){d.uniform4uiv(this.addr,e)}function cf(d,e,t){const r=e.length,o=qc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.safeSetTexture2D(e[c]||ef,o[c])}function hl(d,e,t){const r=e.length,o=qc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.setTexture3D(e[c]||Fu,o[c])}function uf(d,e,t){const r=e.length,o=qc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.safeSetTextureCube(e[c]||og,o[c])}function yg(d,e,t){const r=e.length,o=qc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.setTexture2DArray(e[c]||sg,o[c])}function F0(d,e,t){this.id=d,this.addr=t,this.cache=[],this.setValue=function Xv(d){switch(d){case 5126:return ag;case 35664:return af;case 35665:return ku;case 35666:return Wv;case 35674:return lg;case 35675:return Zv;case 35676:return jv;case 5124:case 35670:return cg;case 35667:case 35671:return lf;case 35668:case 35672:return ug;case 35669:case 35673:return N0;case 5125:return dg;case 36294:return qv;case 36295:return hg;case 36296:return $v;case 35678:case 36198:case 36298:case 36306:case 35682:return Yv;case 35679:case 36299:case 36307:return da;case 35680:case 36300:case 36308:case 36293:return Jv;case 36289:case 36303:case 36311:case 36292:return fg}}(e.type)}function hf(d,e,t){this.id=d,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function df(d){switch(d){case 5126:return Kv;case 35664:return Qv;case 35665:return e_;case 35666:return pg;case 35674:return t_;case 35675:return n_;case 35676:return i_;case 5124:case 35670:return qn;case 35667:case 35671:return gg;case 35668:case 35672:return mg;case 35669:case 35673:return vg;case 5125:return Gd;case 36294:return ha;case 36295:return _g;case 36296:return r_;case 35678:case 36198:case 36298:case 36306:case 35682:return cf;case 35679:case 36299:case 36307:return hl;case 35680:case 36300:case 36308:case 36293:return uf;case 36289:case 36303:case 36311:case 36292:return yg}}(e.type)}function s_(d){this.id=d,this.seq=[],this.map={}}hf.prototype.updateCache=function(d){const e=this.cache;d instanceof Float32Array&&e.length!==d.length&&(this.cache=new Float32Array(d.length)),Us(e,d)},s_.prototype.setValue=function(d,e,t){const r=this.seq;for(let o=0,c=r.length;o!==c;++o){const h=r[o];h.setValue(d,e[h.id],t)}};const $c=/(\w+)(\])?(\[|\.)?/g;function Uu(d,e){d.seq.push(e),d.map[e.id]=e}function ff(d,e,t){const r=d.name,o=r.length;for($c.lastIndex=0;;){const c=$c.exec(r),h=$c.lastIndex;let f=c[1];const v=c[3];if("]"===c[2]&&(f|=0),void 0===v||"["===v&&h+2===o){Uu(t,void 0===v?new F0(f,d,e):new hf(f,d,e));break}{let w=t.map[f];void 0===w&&(w=new s_(f),Uu(t,w)),t=w}}}function Fa(d,e){this.seq=[],this.map={};const t=d.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=d.getActiveUniform(e,r);ff(o,d.getUniformLocation(e,o.name),this)}}function Wd(d,e,t){const r=d.createShader(e);return d.shaderSource(r,t),d.compileShader(r),r}Fa.prototype.setValue=function(d,e,t,r){const o=this.map[e];void 0!==o&&o.setValue(d,t,r)},Fa.prototype.setOptional=function(d,e,t){const r=e[t];void 0!==r&&this.setValue(d,t,r)},Fa.upload=function(d,e,t,r){for(let o=0,c=e.length;o!==c;++o){const h=e[o],f=t[h.id];!1!==f.needsUpdate&&h.setValue(d,f.value,r)}},Fa.seqWithValue=function(d,e){const t=[];for(let r=0,o=d.length;r!==o;++r){const c=d[r];c.id in e&&t.push(c)}return t};let k0=0;function xg(d,e,t){const r=d.getShaderParameter(e,35713),o=d.getShaderInfoLog(e).trim();return r&&""===o?"":t.toUpperCase()+"\n\n"+o+"\n\n"+function o_(d){const e=d.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(d.getShaderSource(e))}function l_(d,e){const t=function a_(d){switch(d){case gi:return["Linear","( value )"];case In:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",d),["Linear","( value )"]}}(e);return"vec4 "+d+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function bg(d,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+d+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Yc(d){return""!==d}function pf(d,e){return d.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function wg(d,e){return d.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gf=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mg(d){return d.replace(gf,V0)}function V0(d,e){const t=mi[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Mg(t)}const H0=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,z0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function u_(d){return d.replace(z0,d_).replace(H0,G0)}function G0(d,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),d_(0,e,t,r)}function d_(d,e,t,r){let o="";for(let c=parseInt(e);c<parseInt(t);c++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return o}function h_(d){let e="precision "+d.precision+" float;\nprecision "+d.precision+" int;";return"highp"===d.precision?e+="\n#define HIGH_PRECISION":"mediump"===d.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===d.precision&&(e+="\n#define LOW_PRECISION"),e}function f_(d,e,t,r){const o=d.getContext(),c=t.defines;let h=t.vertexShader,f=t.fragmentShader;const m=function W0(d){let e="SHADOWMAP_TYPE_BASIC";return 1===d.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===d.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===d.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),v=function Z0(d){let e="ENVMAP_TYPE_CUBE";if(d.envMap)switch(d.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),M=function Ll(d){let e="ENVMAP_MODE_REFLECTION";if(d.envMap)switch(d.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),w=function mf(d){let e="ENVMAP_BLENDING_NONE";if(d.envMap)switch(d.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),C=t.isWebGL2?"":function U0(d){return[d.extensionDerivatives||d.envMapCubeUV||d.bumpMap||d.tangentSpaceNormalMap||d.clearcoatNormalMap||d.flatShading||"physical"===d.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(d.extensionFragDepth||d.logarithmicDepthBuffer)&&d.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",d.extensionDrawBuffers&&d.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(d.extensionShaderTextureLOD||d.envMap||d.transmission)&&d.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yc).join("\n")}(t),D=function c_(d){const e=[];for(const t in d){const r=d[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(c),N=o.createProgram();let H,K,U=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(H=[D].filter(Yc).join("\n"),H.length>0&&(H+="\n"),K=[C,D].filter(Yc).join("\n"),K.length>0&&(K+="\n")):(H=[h_(t),"#define SHADER_NAME "+t.shaderName,D,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+M:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yc).join("\n"),K=[C,h_(t),"#define SHADER_NAME "+t.shaderName,D,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.envMap?"#define "+M:"",t.envMap?"#define "+w:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?mi.tonemapping_pars_fragment:"",0!==t.toneMapping?bg("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",mi.encodings_pars_fragment,l_("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Yc).join("\n")),h=Mg(h),h=pf(h,t),h=wg(h,t),f=Mg(f),f=pf(f,t),f=wg(f,t),h=u_(h),f=u_(f),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(U="#version 300 es\n",H=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+H,K=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+K);const ie=U+K+f,$=Wd(o,35633,U+H+h),le=Wd(o,35632,ie);if(o.attachShader(N,$),o.attachShader(N,le),void 0!==t.index0AttributeName?o.bindAttribLocation(N,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(N,0,"position"),o.linkProgram(N),d.debug.checkShaderErrors){const Le=o.getProgramInfoLog(N).trim(),lt=o.getShaderInfoLog($).trim(),Ye=o.getShaderInfoLog(le).trim();let te=!0,De=!0;if(!1===o.getProgramParameter(N,35714)){te=!1;const He=xg(o,$,"vertex"),je=xg(o,le,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(N,35715)+"\n\nProgram Info Log: "+Le+"\n"+He+"\n"+je)}else""!==Le?console.warn("THREE.WebGLProgram: Program Info Log:",Le):(""===lt||""===Ye)&&(De=!1);De&&(this.diagnostics={runnable:te,programLog:Le,vertexShader:{log:lt,prefix:H},fragmentShader:{log:Ye,prefix:K}})}let me,be;return o.deleteShader($),o.deleteShader(le),this.getUniforms=function(){return void 0===me&&(me=new Fa(o,N)),me},this.getAttributes=function(){return void 0===be&&(be=function B0(d,e){const t={},r=d.getProgramParameter(e,35721);for(let o=0;o<r;o++){const c=d.getActiveAttrib(e,o),h=c.name;let f=1;35674===c.type&&(f=2),35675===c.type&&(f=3),35676===c.type&&(f=4),t[h]={type:c.type,location:d.getAttribLocation(e,h),locationSize:f}}return t}(o,N)),be},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(N),this.program=void 0},this.name=t.shaderName,this.id=k0++,this.cacheKey=e,this.usedTimes=1,this.program=N,this.vertexShader=$,this.fragmentShader=le,this}let Eg=0;class vf{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,o=this._getShaderStage(e.vertexShader),c=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return!1===h.has(o)&&(h.add(o),o.usedTimes++),!1===h.has(c)&&(h.add(c),c.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new Cg;t.set(e,r)}return t.get(e)}}class Cg{constructor(){this.id=Eg++,this.usedTimes=0}}function _f(d,e,t,r,o,c,h){const f=new Sl,m=new vf,v=[],M=o.isWebGL2,w=o.logarithmicDepthBuffer,C=o.floatVertexTextures,D=o.maxVertexUniforms,N=o.vertexTextures;let H=o.precision;const K={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function P(te,De,He,je,Je){const Ze=je.fog,Dt=(te.isMeshStandardMaterial?t:e).get(te.envMap||(te.isMeshStandardMaterial?je.environment:null)),gn=K[te.type],gt=Je.isSkinnedMesh?function U(te){const He=te.skeleton.bones;if(C)return 1024;{const Je=Math.floor((D-20)/4),Ze=Math.min(Je,He.length);return Ze<He.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+He.length+" bones. This GPU supports "+Ze+"."),0):Ze}}(Je):0;let Et,$t,mn,Sn;if(null!==te.precision&&(H=o.getMaxPrecision(te.precision),H!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",H,"instead.")),gn){const sn=Oa[gn];Et=sn.vertexShader,$t=sn.fragmentShader}else Et=te.vertexShader,$t=te.fragmentShader,m.update(te),mn=m.getVertexShaderID(te),Sn=m.getFragmentShaderID(te);const ct=d.getRenderTarget(),wn=te.clearcoat>0;return{isWebGL2:M,shaderID:gn,shaderName:te.type,vertexShader:Et,fragmentShader:$t,defines:te.defines,customVertexShaderID:mn,customFragmentShaderID:Sn,isRawShaderMaterial:!0===te.isRawShaderMaterial,glslVersion:te.glslVersion,precision:H,instancing:!0===Je.isInstancedMesh,instancingColor:!0===Je.isInstancedMesh&&null!==Je.instanceColor,supportsVertexTextures:N,outputEncoding:null===ct?d.outputEncoding:!0===ct.isXRRenderTarget?ct.texture.encoding:gi,map:!!te.map,matcap:!!te.matcap,envMap:!!Dt,envMapMode:Dt&&Dt.mapping,envMapCubeUV:!!Dt&&(306===Dt.mapping||307===Dt.mapping),lightMap:!!te.lightMap,aoMap:!!te.aoMap,emissiveMap:!!te.emissiveMap,bumpMap:!!te.bumpMap,normalMap:!!te.normalMap,objectSpaceNormalMap:1===te.normalMapType,tangentSpaceNormalMap:te.normalMapType===Es,decodeVideoTexture:!!te.map&&!0===te.map.isVideoTexture&&te.map.encoding===In,clearcoat:wn,clearcoatMap:wn&&!!te.clearcoatMap,clearcoatRoughnessMap:wn&&!!te.clearcoatRoughnessMap,clearcoatNormalMap:wn&&!!te.clearcoatNormalMap,displacementMap:!!te.displacementMap,roughnessMap:!!te.roughnessMap,metalnessMap:!!te.metalnessMap,specularMap:!!te.specularMap,specularIntensityMap:!!te.specularIntensityMap,specularColorMap:!!te.specularColorMap,transparent:te.transparent,alphaMap:!!te.alphaMap,alphaTest:te.alphaTest>0,gradientMap:!!te.gradientMap,sheen:te.sheen>0,sheenColorMap:!!te.sheenColorMap,sheenRoughnessMap:!!te.sheenRoughnessMap,transmission:te.transmission>0,transmissionMap:!!te.transmissionMap,thicknessMap:!!te.thicknessMap,combine:te.combine,vertexTangents:!!te.normalMap&&!!Je.geometry&&!!Je.geometry.attributes.tangent,vertexColors:te.vertexColors,vertexAlphas:!0===te.vertexColors&&!!Je.geometry&&!!Je.geometry.attributes.color&&4===Je.geometry.attributes.color.itemSize,vertexUvs:!!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatMap||te.clearcoatRoughnessMap||te.clearcoatNormalMap||te.displacementMap||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheenColorMap||te.sheenRoughnessMap),uvsVertexOnly:!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatNormalMap||te.transmission>0||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheen>0||te.sheenColorMap||te.sheenRoughnessMap||!te.displacementMap),fog:!!Ze,useFog:te.fog,fogExp2:Ze&&Ze.isFogExp2,flatShading:!!te.flatShading,sizeAttenuation:te.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===Je.isSkinnedMesh&&gt>0,maxBones:gt,useVertexTexture:C,morphTargets:!!Je.geometry&&!!Je.geometry.morphAttributes.position,morphNormals:!!Je.geometry&&!!Je.geometry.morphAttributes.normal,morphTargetsCount:Je.geometry&&Je.geometry.morphAttributes.position?Je.geometry.morphAttributes.position.length:0,numDirLights:De.directional.length,numPointLights:De.point.length,numSpotLights:De.spot.length,numRectAreaLights:De.rectArea.length,numHemiLights:De.hemi.length,numDirLightShadows:De.directionalShadowMap.length,numPointLightShadows:De.pointShadowMap.length,numSpotLightShadows:De.spotShadowMap.length,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:te.dithering,shadowMapEnabled:d.shadowMap.enabled&&He.length>0,shadowMapType:d.shadowMap.type,toneMapping:te.toneMapped?d.toneMapping:0,physicallyCorrectLights:d.physicallyCorrectLights,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===Ge,flipSided:1===te.side,depthPacking:void 0!==te.depthPacking&&te.depthPacking,index0AttributeName:te.index0AttributeName,extensionDerivatives:te.extensions&&te.extensions.derivatives,extensionFragDepth:te.extensions&&te.extensions.fragDepth,extensionDrawBuffers:te.extensions&&te.extensions.drawBuffers,extensionShaderTextureLOD:te.extensions&&te.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||r.has("EXT_shader_texture_lod"),customProgramCacheKey:te.customProgramCacheKey()}},getProgramCacheKey:function ie(te){const De=[];if(te.shaderID?De.push(te.shaderID):(De.push(te.customVertexShaderID),De.push(te.customFragmentShaderID)),void 0!==te.defines)for(const He in te.defines)De.push(He),De.push(te.defines[He]);return!1===te.isRawShaderMaterial&&(function $(te,De){te.push(De.precision),te.push(De.outputEncoding),te.push(De.envMapMode),te.push(De.combine),te.push(De.vertexUvs),te.push(De.fogExp2),te.push(De.sizeAttenuation),te.push(De.maxBones),te.push(De.morphTargetsCount),te.push(De.numDirLights),te.push(De.numPointLights),te.push(De.numSpotLights),te.push(De.numHemiLights),te.push(De.numRectAreaLights),te.push(De.numDirLightShadows),te.push(De.numPointLightShadows),te.push(De.numSpotLightShadows),te.push(De.shadowMapType),te.push(De.toneMapping),te.push(De.numClippingPlanes),te.push(De.numClipIntersection)}(De,te),function le(te,De){f.disableAll(),De.isWebGL2&&f.enable(0),De.supportsVertexTextures&&f.enable(1),De.instancing&&f.enable(2),De.instancingColor&&f.enable(3),De.map&&f.enable(4),De.matcap&&f.enable(5),De.envMap&&f.enable(6),De.envMapCubeUV&&f.enable(7),De.lightMap&&f.enable(8),De.aoMap&&f.enable(9),De.emissiveMap&&f.enable(10),De.bumpMap&&f.enable(11),De.normalMap&&f.enable(12),De.objectSpaceNormalMap&&f.enable(13),De.tangentSpaceNormalMap&&f.enable(14),De.clearcoat&&f.enable(15),De.clearcoatMap&&f.enable(16),De.clearcoatRoughnessMap&&f.enable(17),De.clearcoatNormalMap&&f.enable(18),De.displacementMap&&f.enable(19),De.specularMap&&f.enable(20),De.roughnessMap&&f.enable(21),De.metalnessMap&&f.enable(22),De.gradientMap&&f.enable(23),De.alphaMap&&f.enable(24),De.alphaTest&&f.enable(25),De.vertexColors&&f.enable(26),De.vertexAlphas&&f.enable(27),De.vertexUvs&&f.enable(28),De.vertexTangents&&f.enable(29),De.uvsVertexOnly&&f.enable(30),De.fog&&f.enable(31),te.push(f.mask),f.disableAll(),De.useFog&&f.enable(0),De.flatShading&&f.enable(1),De.logarithmicDepthBuffer&&f.enable(2),De.skinning&&f.enable(3),De.useVertexTexture&&f.enable(4),De.morphTargets&&f.enable(5),De.morphNormals&&f.enable(6),De.premultipliedAlpha&&f.enable(7),De.shadowMapEnabled&&f.enable(8),De.physicallyCorrectLights&&f.enable(9),De.doubleSided&&f.enable(10),De.flipSided&&f.enable(11),De.depthPacking&&f.enable(12),De.dithering&&f.enable(13),De.specularIntensityMap&&f.enable(14),De.specularColorMap&&f.enable(15),De.transmission&&f.enable(16),De.transmissionMap&&f.enable(17),De.thicknessMap&&f.enable(18),De.sheen&&f.enable(19),De.sheenColorMap&&f.enable(20),De.sheenRoughnessMap&&f.enable(21),De.decodeVideoTexture&&f.enable(22),De.transparent&&f.enable(23),te.push(f.mask)}(De,te),De.push(d.outputEncoding)),De.push(te.customProgramCacheKey),De.join()},getUniforms:function me(te){const De=K[te.type];let He;return He=De?Td.clone(Oa[De].uniforms):te.uniforms,He},acquireProgram:function be(te,De){let He;for(let je=0,Je=v.length;je<Je;je++){const Ze=v[je];if(Ze.cacheKey===De){He=Ze,++He.usedTimes;break}}return void 0===He&&(He=new f_(d,De,te,c),v.push(He)),He},releaseProgram:function Le(te){if(0==--te.usedTimes){const De=v.indexOf(te);v[De]=v[v.length-1],v.pop(),te.destroy()}},releaseShaderCache:function lt(te){m.remove(te)},programs:v,dispose:function Ye(){m.dispose()}}}function p_(){let d=new WeakMap;return{get:function e(c){let h=d.get(c);return void 0===h&&(h={},d.set(c,h)),h},remove:function t(c){d.delete(c)},update:function r(c,h,f){d.get(c)[h]=f},dispose:function o(){d=new WeakMap}}}function Ol(d,e){return d.groupOrder!==e.groupOrder?d.groupOrder-e.groupOrder:d.renderOrder!==e.renderOrder?d.renderOrder-e.renderOrder:d.material.id!==e.material.id?d.material.id-e.material.id:d.z!==e.z?d.z-e.z:d.id-e.id}function yf(d,e){return d.groupOrder!==e.groupOrder?d.groupOrder-e.groupOrder:d.renderOrder!==e.renderOrder?d.renderOrder-e.renderOrder:d.z!==e.z?e.z-d.z:d.id-e.id}function Sg(){const d=[];let e=0;const t=[],r=[],o=[];function h(w,C,D,N,H,K){let U=d[e];return void 0===U?(U={id:w.id,object:w,geometry:C,material:D,groupOrder:N,renderOrder:w.renderOrder,z:H,group:K},d[e]=U):(U.id=w.id,U.object=w,U.geometry=C,U.material=D,U.groupOrder=N,U.renderOrder=w.renderOrder,U.z=H,U.group=K),e++,U}return{opaque:t,transmissive:r,transparent:o,init:function c(){e=0,t.length=0,r.length=0,o.length=0},push:function f(w,C,D,N,H,K){const U=h(w,C,D,N,H,K);D.transmission>0?r.push(U):!0===D.transparent?o.push(U):t.push(U)},unshift:function m(w,C,D,N,H,K){const U=h(w,C,D,N,H,K);D.transmission>0?r.unshift(U):!0===D.transparent?o.unshift(U):t.unshift(U)},finish:function M(){for(let w=e,C=d.length;w<C;w++){const D=d[w];if(null===D.id)break;D.id=null,D.object=null,D.geometry=null,D.material=null,D.group=null}},sort:function v(w,C){t.length>1&&t.sort(w||Ol),r.length>1&&r.sort(C||yf),o.length>1&&o.sort(C||yf)}}}function xf(){let d=new WeakMap;return{get:function e(r,o){let c;return!1===d.has(r)?(c=new Sg,d.set(r,[c])):o>=d.get(r).length?(c=new Sg,d.get(r).push(c)):c=d.get(r)[o],c},dispose:function t(){d=new WeakMap}}}function g_(){const d={};return{get:function(e){if(void 0!==d[e.id])return d[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Ht};break;case"SpotLight":t={position:new re,direction:new re,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":t={color:new Ht,position:new re,halfWidth:new re,halfHeight:new re}}return d[e.id]=t,t}}}let m_=0;function v_(d,e){return(e.castShadow?1:0)-(d.castShadow?1:0)}function Bu(d,e){const t=new g_,r=function Tg(){const d={};return{get:function(e){if(void 0!==d[e.id])return d[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt,shadowCameraNear:1,shadowCameraFar:1e3}}return d[e.id]=t,t}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let M=0;M<9;M++)o.probe.push(new re);const c=new re,h=new Qt,f=new Qt;return{setup:function m(M,w){let C=0,D=0,N=0;for(let lt=0;lt<9;lt++)o.probe[lt].set(0,0,0);let H=0,K=0,U=0,P=0,ie=0,$=0,le=0,me=0;M.sort(v_);const be=!0!==w?Math.PI:1;for(let lt=0,Ye=M.length;lt<Ye;lt++){const te=M[lt],De=te.color,He=te.intensity,je=te.distance,Je=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)C+=De.r*He*be,D+=De.g*He*be,N+=De.b*He*be;else if(te.isLightProbe)for(let Ze=0;Ze<9;Ze++)o.probe[Ze].addScaledVector(te.sh.coefficients[Ze],He);else if(te.isDirectionalLight){const Ze=t.get(te);if(Ze.color.copy(te.color).multiplyScalar(te.intensity*be),te.castShadow){const vt=te.shadow,Dt=r.get(te);Dt.shadowBias=vt.bias,Dt.shadowNormalBias=vt.normalBias,Dt.shadowRadius=vt.radius,Dt.shadowMapSize=vt.mapSize,o.directionalShadow[H]=Dt,o.directionalShadowMap[H]=Je,o.directionalShadowMatrix[H]=te.shadow.matrix,$++}o.directional[H]=Ze,H++}else if(te.isSpotLight){const Ze=t.get(te);if(Ze.position.setFromMatrixPosition(te.matrixWorld),Ze.color.copy(De).multiplyScalar(He*be),Ze.distance=je,Ze.coneCos=Math.cos(te.angle),Ze.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),Ze.decay=te.decay,te.castShadow){const vt=te.shadow,Dt=r.get(te);Dt.shadowBias=vt.bias,Dt.shadowNormalBias=vt.normalBias,Dt.shadowRadius=vt.radius,Dt.shadowMapSize=vt.mapSize,o.spotShadow[U]=Dt,o.spotShadowMap[U]=Je,o.spotShadowMatrix[U]=te.shadow.matrix,me++}o.spot[U]=Ze,U++}else if(te.isRectAreaLight){const Ze=t.get(te);Ze.color.copy(De).multiplyScalar(He),Ze.halfWidth.set(.5*te.width,0,0),Ze.halfHeight.set(0,.5*te.height,0),o.rectArea[P]=Ze,P++}else if(te.isPointLight){const Ze=t.get(te);if(Ze.color.copy(te.color).multiplyScalar(te.intensity*be),Ze.distance=te.distance,Ze.decay=te.decay,te.castShadow){const vt=te.shadow,Dt=r.get(te);Dt.shadowBias=vt.bias,Dt.shadowNormalBias=vt.normalBias,Dt.shadowRadius=vt.radius,Dt.shadowMapSize=vt.mapSize,Dt.shadowCameraNear=vt.camera.near,Dt.shadowCameraFar=vt.camera.far,o.pointShadow[K]=Dt,o.pointShadowMap[K]=Je,o.pointShadowMatrix[K]=te.shadow.matrix,le++}o.point[K]=Ze,K++}else if(te.isHemisphereLight){const Ze=t.get(te);Ze.skyColor.copy(te.color).multiplyScalar(He*be),Ze.groundColor.copy(te.groundColor).multiplyScalar(He*be),o.hemi[ie]=Ze,ie++}}P>0&&(e.isWebGL2||!0===d.has("OES_texture_float_linear")?(o.rectAreaLTC1=Zt.LTC_FLOAT_1,o.rectAreaLTC2=Zt.LTC_FLOAT_2):!0===d.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=Zt.LTC_HALF_1,o.rectAreaLTC2=Zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=C,o.ambient[1]=D,o.ambient[2]=N;const Le=o.hash;(Le.directionalLength!==H||Le.pointLength!==K||Le.spotLength!==U||Le.rectAreaLength!==P||Le.hemiLength!==ie||Le.numDirectionalShadows!==$||Le.numPointShadows!==le||Le.numSpotShadows!==me)&&(o.directional.length=H,o.spot.length=U,o.rectArea.length=P,o.point.length=K,o.hemi.length=ie,o.directionalShadow.length=$,o.directionalShadowMap.length=$,o.pointShadow.length=le,o.pointShadowMap.length=le,o.spotShadow.length=me,o.spotShadowMap.length=me,o.directionalShadowMatrix.length=$,o.pointShadowMatrix.length=le,o.spotShadowMatrix.length=me,Le.directionalLength=H,Le.pointLength=K,Le.spotLength=U,Le.rectAreaLength=P,Le.hemiLength=ie,Le.numDirectionalShadows=$,Le.numPointShadows=le,Le.numSpotShadows=me,o.version=m_++)},setupView:function v(M,w){let C=0,D=0,N=0,H=0,K=0;const U=w.matrixWorldInverse;for(let P=0,ie=M.length;P<ie;P++){const $=M[P];if($.isDirectionalLight){const le=o.directional[C];le.direction.setFromMatrixPosition($.matrixWorld),c.setFromMatrixPosition($.target.matrixWorld),le.direction.sub(c),le.direction.transformDirection(U),C++}else if($.isSpotLight){const le=o.spot[N];le.position.setFromMatrixPosition($.matrixWorld),le.position.applyMatrix4(U),le.direction.setFromMatrixPosition($.matrixWorld),c.setFromMatrixPosition($.target.matrixWorld),le.direction.sub(c),le.direction.transformDirection(U),N++}else if($.isRectAreaLight){const le=o.rectArea[H];le.position.setFromMatrixPosition($.matrixWorld),le.position.applyMatrix4(U),f.identity(),h.copy($.matrixWorld),h.premultiply(U),f.extractRotation(h),le.halfWidth.set(.5*$.width,0,0),le.halfHeight.set(0,.5*$.height,0),le.halfWidth.applyMatrix4(f),le.halfHeight.applyMatrix4(f),H++}else if($.isPointLight){const le=o.point[D];le.position.setFromMatrixPosition($.matrixWorld),le.position.applyMatrix4(U),D++}else if($.isHemisphereLight){const le=o.hemi[K];le.direction.setFromMatrixPosition($.matrixWorld),le.direction.transformDirection(U),le.direction.normalize(),K++}}},state:o}}function yc(d,e){const t=new Bu(d,e),r=[],o=[];return{init:function c(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function m(w){t.setup(r,w)},setupLightsView:function v(w){t.setupView(r,w)},pushLight:function h(w){r.push(w)},pushShadow:function f(w){o.push(w)}}}function bf(d,e){let t=new WeakMap;return{get:function r(c,h=0){let f;return!1===t.has(c)?(f=new yc(d,e),t.set(c,[f])):h>=t.get(c).length?(f=new yc(d,e),t.get(c).push(f)):f=t.get(c)[h],f},dispose:function o(){t=new WeakMap}}}class Nl extends En{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Nl.prototype.isMeshDepthMaterial=!0;class xc extends En{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function wf(d,e,t){let r=new Ln;const o=new yt,c=new yt,h=new Mi,f=new Nl({depthPacking:3201}),m=new xc,v={},M=t.maxTextureSize,w={0:1,1:et,2:Ge},C=new $s({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new yt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),D=C.clone();D.defines.HORIZONTAL_PASS=1;const N=new Rn;N.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const H=new Mr(N,C),K=this;function U($,le){const me=e.update(H);C.defines.VSM_SAMPLES!==$.blurSamples&&(C.defines.VSM_SAMPLES=$.blurSamples,D.defines.VSM_SAMPLES=$.blurSamples,C.needsUpdate=!0,D.needsUpdate=!0),C.uniforms.shadow_pass.value=$.map.texture,C.uniforms.resolution.value=$.mapSize,C.uniforms.radius.value=$.radius,d.setRenderTarget($.mapPass),d.clear(),d.renderBufferDirect(le,null,me,C,H,null),D.uniforms.shadow_pass.value=$.mapPass.texture,D.uniforms.resolution.value=$.mapSize,D.uniforms.radius.value=$.radius,d.setRenderTarget($.map),d.clear(),d.renderBufferDirect(le,null,me,D,H,null)}function P($,le,me,be,Le,lt,Ye){let te=null;const De=!0===be.isPointLight?$.customDistanceMaterial:$.customDepthMaterial;if(te=void 0!==De?De:!0===be.isPointLight?m:f,d.localClippingEnabled&&!0===me.clipShadows&&0!==me.clippingPlanes.length||me.displacementMap&&0!==me.displacementScale||me.alphaMap&&me.alphaTest>0){const He=te.uuid,je=me.uuid;let Je=v[He];void 0===Je&&(Je={},v[He]=Je);let Ze=Je[je];void 0===Ze&&(Ze=te.clone(),Je[je]=Ze),te=Ze}return te.visible=me.visible,te.wireframe=me.wireframe,te.side=3===Ye?null!==me.shadowSide?me.shadowSide:me.side:null!==me.shadowSide?me.shadowSide:w[me.side],te.alphaMap=me.alphaMap,te.alphaTest=me.alphaTest,te.clipShadows=me.clipShadows,te.clippingPlanes=me.clippingPlanes,te.clipIntersection=me.clipIntersection,te.displacementMap=me.displacementMap,te.displacementScale=me.displacementScale,te.displacementBias=me.displacementBias,te.wireframeLinewidth=me.wireframeLinewidth,te.linewidth=me.linewidth,!0===be.isPointLight&&!0===te.isMeshDistanceMaterial&&(te.referencePosition.setFromMatrixPosition(be.matrixWorld),te.nearDistance=Le,te.farDistance=lt),te}function ie($,le,me,be,Le){if(!1===$.visible)return;if($.layers.test(le.layers)&&($.isMesh||$.isLine||$.isPoints)&&($.castShadow||$.receiveShadow&&3===Le)&&(!$.frustumCulled||r.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,$.matrixWorld);const te=e.update($),De=$.material;if(Array.isArray(De)){const He=te.groups;for(let je=0,Je=He.length;je<Je;je++){const Ze=He[je],vt=De[Ze.materialIndex];if(vt&&vt.visible){const Dt=P($,0,vt,be,me.near,me.far,Le);d.renderBufferDirect(me,null,te,Dt,$,Ze)}}}else if(De.visible){const He=P($,0,De,be,me.near,me.far,Le);d.renderBufferDirect(me,null,te,He,$,null)}}const Ye=$.children;for(let te=0,De=Ye.length;te<De;te++)ie(Ye[te],le,me,be,Le)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function($,le,me){if(!1===K.enabled||!1===K.autoUpdate&&!1===K.needsUpdate||0===$.length)return;const be=d.getRenderTarget(),Le=d.getActiveCubeFace(),lt=d.getActiveMipmapLevel(),Ye=d.state;Ye.setBlending(0),Ye.buffers.color.setClear(1,1,1,1),Ye.buffers.depth.setTest(!0),Ye.setScissorTest(!1);for(let te=0,De=$.length;te<De;te++){const He=$[te],je=He.shadow;if(void 0===je){console.warn("THREE.WebGLShadowMap:",He,"has no shadow.");continue}if(!1===je.autoUpdate&&!1===je.needsUpdate)continue;o.copy(je.mapSize);const Je=je.getFrameExtents();if(o.multiply(Je),c.copy(je.mapSize),(o.x>M||o.y>M)&&(o.x>M&&(c.x=Math.floor(M/Je.x),o.x=c.x*Je.x,je.mapSize.x=c.x),o.y>M&&(c.y=Math.floor(M/Je.y),o.y=c.y*Je.y,je.mapSize.y=c.y)),null===je.map&&!je.isPointLightShadow&&3===this.type){const vt={minFilter:xn,magFilter:xn,format:pn};je.map=new es(o.x,o.y,vt),je.map.texture.name=He.name+".shadowMap",je.mapPass=new es(o.x,o.y,vt),je.camera.updateProjectionMatrix()}null===je.map&&(je.map=new es(o.x,o.y,{minFilter:Lt,magFilter:Lt,format:pn}),je.map.texture.name=He.name+".shadowMap",je.camera.updateProjectionMatrix()),d.setRenderTarget(je.map),d.clear();const Ze=je.getViewportCount();for(let vt=0;vt<Ze;vt++){const Dt=je.getViewport(vt);h.set(c.x*Dt.x,c.y*Dt.y,c.x*Dt.z,c.y*Dt.w),Ye.viewport(h),je.updateMatrices(He,vt),r=je.getFrustum(),ie(le,me,je.camera,He,this.type)}!je.isPointLightShadow&&3===this.type&&U(je,me),je.needsUpdate=!1}K.needsUpdate=!1,d.setRenderTarget(be,Le,lt)}}function Ag(d,e,t){const r=t.isWebGL2,f=new function o(){let Pe=!1;const _n=new Mi;let nn=null;const Vn=new Mi(0,0,0,0);return{setMask:function(bt){nn!==bt&&!Pe&&(d.colorMask(bt,bt,bt,bt),nn=bt)},setLocked:function(bt){Pe=bt},setClear:function(bt,Pn,Ci,Ir,ao){!0===ao&&(bt*=Ir,Pn*=Ir,Ci*=Ir),_n.set(bt,Pn,Ci,Ir),!1===Vn.equals(_n)&&(d.clearColor(bt,Pn,Ci,Ir),Vn.copy(_n))},reset:function(){Pe=!1,nn=null,Vn.set(-1,0,0,0)}}},m=new function c(){let Pe=!1,_n=null,nn=null,Vn=null;return{setTest:function(bt){bt?ct(2929):zi(2929)},setMask:function(bt){_n!==bt&&!Pe&&(d.depthMask(bt),_n=bt)},setFunc:function(bt){if(nn!==bt){if(bt)switch(bt){case 0:d.depthFunc(512);break;case 1:d.depthFunc(519);break;case 2:d.depthFunc(513);break;case 3:default:d.depthFunc(515);break;case 4:d.depthFunc(514);break;case 5:d.depthFunc(518);break;case 6:d.depthFunc(516);break;case 7:d.depthFunc(517)}else d.depthFunc(515);nn=bt}},setLocked:function(bt){Pe=bt},setClear:function(bt){Vn!==bt&&(d.clearDepth(bt),Vn=bt)},reset:function(){Pe=!1,_n=null,nn=null,Vn=null}}},v=new function h(){let Pe=!1,_n=null,nn=null,Vn=null,bt=null,Pn=null,Ci=null,Ir=null,ao=null;return{setTest:function(Vr){Pe||(Vr?ct(2960):zi(2960))},setMask:function(Vr){_n!==Vr&&!Pe&&(d.stencilMask(Vr),_n=Vr)},setFunc:function(Vr,_a,yl){(nn!==Vr||Vn!==_a||bt!==yl)&&(d.stencilFunc(Vr,_a,yl),nn=Vr,Vn=_a,bt=yl)},setOp:function(Vr,_a,yl){(Pn!==Vr||Ci!==_a||Ir!==yl)&&(d.stencilOp(Vr,_a,yl),Pn=Vr,Ci=_a,Ir=yl)},setLocked:function(Vr){Pe=Vr},setClear:function(Vr){ao!==Vr&&(d.clearStencil(Vr),ao=Vr)},reset:function(){Pe=!1,_n=null,nn=null,Vn=null,bt=null,Pn=null,Ci=null,Ir=null,ao=null}}};let M={},w={},C=new WeakMap,D=[],N=null,H=!1,K=null,U=null,P=null,ie=null,$=null,le=null,me=null,be=!1,Le=null,lt=null,Ye=null,te=null,De=null;const He=d.getParameter(35661);let je=!1,Je=0;const Ze=d.getParameter(7938);-1!==Ze.indexOf("WebGL")?(Je=parseFloat(/^WebGL (\d)/.exec(Ze)[1]),je=Je>=1):-1!==Ze.indexOf("OpenGL ES")&&(Je=parseFloat(/^OpenGL ES (\d)/.exec(Ze)[1]),je=Je>=2);let vt=null,Dt={};const gn=d.getParameter(3088),gt=d.getParameter(2978),Et=(new Mi).fromArray(gn),$t=(new Mi).fromArray(gt);function mn(Pe,_n,nn){const Vn=new Uint8Array(4),bt=d.createTexture();d.bindTexture(Pe,bt),d.texParameteri(Pe,10241,9728),d.texParameteri(Pe,10240,9728);for(let Pn=0;Pn<nn;Pn++)d.texImage2D(_n+Pn,0,6408,1,1,0,6408,5121,Vn);return bt}const Sn={};function ct(Pe){!0!==M[Pe]&&(d.enable(Pe),M[Pe]=!0)}function zi(Pe){!1!==M[Pe]&&(d.disable(Pe),M[Pe]=!1)}Sn[3553]=mn(3553,3553,1),Sn[34067]=mn(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),v.setClear(0),ct(2929),m.setFunc(3),Vt(!1),ln(1),ct(2884),xt(0);const di={100:32774,101:32778,102:32779};if(r)di[103]=32775,di[104]=32776;else{const Pe=e.get("EXT_blend_minmax");null!==Pe&&(di[103]=Pe.MIN_EXT,di[104]=Pe.MAX_EXT)}const Gn={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function xt(Pe,_n,nn,Vn,bt,Pn,Ci,Ir){if(0!==Pe){if(!1===H&&(ct(3042),H=!0),5===Pe)bt=bt||_n,Pn=Pn||nn,Ci=Ci||Vn,(_n!==U||bt!==$)&&(d.blendEquationSeparate(di[_n],di[bt]),U=_n,$=bt),(nn!==P||Vn!==ie||Pn!==le||Ci!==me)&&(d.blendFuncSeparate(Gn[nn],Gn[Vn],Gn[Pn],Gn[Ci]),P=nn,ie=Vn,le=Pn,me=Ci),K=Pe,be=null;else if(Pe!==K||Ir!==be){if((100!==U||100!==$)&&(d.blendEquation(32774),U=100,$=100),Ir)switch(Pe){case 1:d.blendFuncSeparate(1,771,1,771);break;case Bi:d.blendFunc(1,1);break;case 3:d.blendFuncSeparate(0,769,0,1);break;case 4:d.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}else switch(Pe){case 1:d.blendFuncSeparate(770,771,1,771);break;case Bi:d.blendFunc(770,1);break;case 3:d.blendFuncSeparate(0,769,0,1);break;case 4:d.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}P=null,ie=null,le=null,me=null,K=Pe,be=Ir}}else!0===H&&(zi(3042),H=!1)}function Vt(Pe){Le!==Pe&&(d.frontFace(Pe?2304:2305),Le=Pe)}function ln(Pe){0!==Pe?(ct(2884),Pe!==lt&&d.cullFace(1===Pe?1029:2===Pe?1028:1032)):zi(2884),lt=Pe}function Wn(Pe,_n,nn){Pe?(ct(32823),(te!==_n||De!==nn)&&(d.polygonOffset(_n,nn),te=_n,De=nn)):zi(32823)}function Di(Pe){void 0===Pe&&(Pe=33984+He-1),vt!==Pe&&(d.activeTexture(Pe),vt=Pe)}return{buffers:{color:f,depth:m,stencil:v},enable:ct,disable:zi,bindFramebuffer:function wn(Pe,_n){return w[Pe]!==_n&&(d.bindFramebuffer(Pe,_n),w[Pe]=_n,r&&(36009===Pe&&(w[36160]=_n),36160===Pe&&(w[36009]=_n)),!0)},drawBuffers:function jn(Pe,_n){let nn=D,Vn=!1;if(Pe)if(nn=C.get(_n),void 0===nn&&(nn=[],C.set(_n,nn)),Pe.isWebGLMultipleRenderTargets){const bt=Pe.texture;if(nn.length!==bt.length||36064!==nn[0]){for(let Pn=0,Ci=bt.length;Pn<Ci;Pn++)nn[Pn]=36064+Pn;nn.length=bt.length,Vn=!0}}else 36064!==nn[0]&&(nn[0]=36064,Vn=!0);else 1029!==nn[0]&&(nn[0]=1029,Vn=!0);Vn&&(t.isWebGL2?d.drawBuffers(nn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(nn))},useProgram:function sn(Pe){return N!==Pe&&(d.useProgram(Pe),N=Pe,!0)},setBlending:xt,setMaterial:function Wt(Pe,_n){Pe.side===Ge?zi(2884):ct(2884);let nn=1===Pe.side;_n&&(nn=!nn),Vt(nn),1===Pe.blending&&!1===Pe.transparent?xt(0):xt(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.premultipliedAlpha),m.setFunc(Pe.depthFunc),m.setTest(Pe.depthTest),m.setMask(Pe.depthWrite),f.setMask(Pe.colorWrite);const Vn=Pe.stencilWrite;v.setTest(Vn),Vn&&(v.setMask(Pe.stencilWriteMask),v.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),v.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),Wn(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),!0===Pe.alphaToCoverage?ct(32926):zi(32926)},setFlipSided:Vt,setCullFace:ln,setLineWidth:function Kt(Pe){Pe!==Ye&&(je&&d.lineWidth(Pe),Ye=Pe)},setPolygonOffset:Wn,setScissorTest:function Zn(Pe){Pe?ct(3089):zi(3089)},activeTexture:Di,bindTexture:function fr(Pe,_n){null===vt&&Di();let nn=Dt[vt];void 0===nn&&(nn={type:void 0,texture:void 0},Dt[vt]=nn),(nn.type!==Pe||nn.texture!==_n)&&(d.bindTexture(Pe,_n||Sn[Pe]),nn.type=Pe,nn.texture=_n)},unbindTexture:function tr(){const Pe=Dt[vt];void 0!==Pe&&void 0!==Pe.type&&(d.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)},compressedTexImage2D:function ye(){try{d.compressedTexImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage2D:function An(){try{d.texImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage3D:function Cn(){try{d.texImage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texStorage2D:function Mn(){try{d.texStorage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texStorage3D:function pt(){try{d.texStorage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texSubImage2D:function ce(){try{d.texSubImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texSubImage3D:function _t(){try{d.texSubImage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},compressedTexSubImage2D:function zt(){try{d.compressedTexSubImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},scissor:function en(Pe){!1===Et.equals(Pe)&&(d.scissor(Pe.x,Pe.y,Pe.z,Pe.w),Et.copy(Pe))},viewport:function Yt(Pe){!1===$t.equals(Pe)&&(d.viewport(Pe.x,Pe.y,Pe.z,Pe.w),$t.copy(Pe))},reset:function Jn(){d.disable(3042),d.disable(2884),d.disable(2929),d.disable(32823),d.disable(3089),d.disable(2960),d.disable(32926),d.blendEquation(32774),d.blendFunc(1,0),d.blendFuncSeparate(1,0,1,0),d.colorMask(!0,!0,!0,!0),d.clearColor(0,0,0,0),d.depthMask(!0),d.depthFunc(513),d.clearDepth(1),d.stencilMask(4294967295),d.stencilFunc(519,0,4294967295),d.stencilOp(7680,7680,7680),d.clearStencil(0),d.cullFace(1029),d.frontFace(2305),d.polygonOffset(0,0),d.activeTexture(33984),d.bindFramebuffer(36160,null),!0===r&&(d.bindFramebuffer(36009,null),d.bindFramebuffer(36008,null)),d.useProgram(null),d.lineWidth(1),d.scissor(0,0,d.canvas.width,d.canvas.height),d.viewport(0,0,d.canvas.width,d.canvas.height),M={},vt=null,Dt={},w={},C=new WeakMap,D=[],N=null,H=!1,K=null,U=null,P=null,ie=null,$=null,le=null,me=null,be=!1,Le=null,lt=null,Ye=null,te=null,De=null,Et.set(0,0,d.canvas.width,d.canvas.height),$t.set(0,0,d.canvas.width,d.canvas.height),f.reset(),m.reset(),v.reset()}}}function Mf(d,e,t,r,o,c,h){const f=o.isWebGL2,m=o.maxTextures,v=o.maxCubemapSize,M=o.maxTextureSize,w=o.maxSamples,D=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,N=new WeakMap;let H,K=!1;try{K="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ye){}function U(ye,ce){return K?new OffscreenCanvas(ye,ce):El("canvas")}function P(ye,ce,_t,zt){let Mn=1;if((ye.width>zt||ye.height>zt)&&(Mn=zt/Math.max(ye.width,ye.height)),Mn<1||!0===ce){if("undefined"!=typeof HTMLImageElement&&ye instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ye instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ye instanceof ImageBitmap){const pt=ce?Pc:Math.floor,An=pt(Mn*ye.width),Cn=pt(Mn*ye.height);void 0===H&&(H=U(An,Cn));const en=_t?U(An,Cn):H;return en.width=An,en.height=Cn,en.getContext("2d").drawImage(ye,0,0,An,Cn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+An+"x"+Cn+")."),en}return"data"in ye&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),ye}return ye}function ie(ye){return eo(ye.width)&&eo(ye.height)}function le(ye,ce){return ye.generateMipmaps&&ce&&ye.minFilter!==Lt&&ye.minFilter!==xn}function me(ye){d.generateMipmap(ye)}function be(ye,ce,_t,zt,Mn=!1){if(!1===f)return ce;if(null!==ye){if(void 0!==d[ye])return d[ye];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ye+"'")}let pt=ce;return 6403===ce&&(5126===_t&&(pt=33326),5131===_t&&(pt=33325),5121===_t&&(pt=33321)),33319===ce&&(5126===_t&&(pt=33328),5131===_t&&(pt=33327),5121===_t&&(pt=33323)),6408===ce&&(5126===_t&&(pt=34836),5131===_t&&(pt=34842),5121===_t&&(pt=zt===In&&!1===Mn?35907:32856),32819===_t&&(pt=32854),32820===_t&&(pt=32855)),(33325===pt||33326===pt||33327===pt||33328===pt||34842===pt||34836===pt)&&e.get("EXT_color_buffer_float"),pt}function Le(ye,ce,_t){return!0===le(ye,_t)||ye.isFramebufferTexture&&ye.minFilter!==Lt&&ye.minFilter!==xn?Math.log2(Math.max(ce.width,ce.height))+1:void 0!==ye.mipmaps&&ye.mipmaps.length>0?ye.mipmaps.length:ye.isCompressedTexture&&Array.isArray(ye.image)?ce.mipmaps.length:1}function lt(ye){return ye===Lt||ye===Qn||ye===on?9728:9729}function Ye(ye){const ce=ye.target;ce.removeEventListener("dispose",Ye),function De(ye){const ce=r.get(ye);void 0!==ce.__webglInit&&(d.deleteTexture(ce.__webglTexture),r.remove(ye))}(ce),ce.isVideoTexture&&N.delete(ce),h.memory.textures--}function te(ye){const ce=ye.target;ce.removeEventListener("dispose",te),function He(ye){const ce=ye.texture,_t=r.get(ye),zt=r.get(ce);if(ye){if(void 0!==zt.__webglTexture&&(d.deleteTexture(zt.__webglTexture),h.memory.textures--),ye.depthTexture&&ye.depthTexture.dispose(),ye.isWebGLCubeRenderTarget)for(let Mn=0;Mn<6;Mn++)d.deleteFramebuffer(_t.__webglFramebuffer[Mn]),_t.__webglDepthbuffer&&d.deleteRenderbuffer(_t.__webglDepthbuffer[Mn]);else d.deleteFramebuffer(_t.__webglFramebuffer),_t.__webglDepthbuffer&&d.deleteRenderbuffer(_t.__webglDepthbuffer),_t.__webglMultisampledFramebuffer&&d.deleteFramebuffer(_t.__webglMultisampledFramebuffer),_t.__webglColorRenderbuffer&&d.deleteRenderbuffer(_t.__webglColorRenderbuffer),_t.__webglDepthRenderbuffer&&d.deleteRenderbuffer(_t.__webglDepthRenderbuffer);if(ye.isWebGLMultipleRenderTargets)for(let Mn=0,pt=ce.length;Mn<pt;Mn++){const An=r.get(ce[Mn]);An.__webglTexture&&(d.deleteTexture(An.__webglTexture),h.memory.textures--),r.remove(ce[Mn])}r.remove(ce),r.remove(ye)}}(ce)}let je=0;function vt(ye,ce){const _t=r.get(ye);if(ye.isVideoTexture&&function Kt(ye){const ce=h.render.frame;N.get(ye)!==ce&&(N.set(ye,ce),ye.update())}(ye),ye.version>0&&_t.__version!==ye.version){const zt=ye.image;if(void 0===zt)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==zt.complete)return void ct(_t,ye,ce);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ce),t.bindTexture(3553,_t.__webglTexture)}function gt(ye,ce){const _t=r.get(ye);ye.version>0&&_t.__version!==ye.version?function zi(ye,ce,_t){if(6!==ce.image.length)return;Sn(ye,ce),t.activeTexture(33984+_t),t.bindTexture(34067,ye.__webglTexture),d.pixelStorei(37440,ce.flipY),d.pixelStorei(37441,ce.premultiplyAlpha),d.pixelStorei(3317,ce.unpackAlignment),d.pixelStorei(37443,0);const zt=ce&&(ce.isCompressedTexture||ce.image[0].isCompressedTexture),Mn=ce.image[0]&&ce.image[0].isDataTexture,pt=[];for(let bt=0;bt<6;bt++)pt[bt]=zt||Mn?Mn?ce.image[bt].image:ce.image[bt]:P(ce.image[bt],!1,!0,v),pt[bt]=Wn(ce,pt[bt]);const An=pt[0],Cn=ie(An)||f,en=c.convert(ce.format,ce.encoding),Yt=c.convert(ce.type),Jn=be(ce.internalFormat,en,Yt,ce.encoding),Pe=f&&!0!==ce.isVideoTexture,_n=void 0===ye.__version;let Vn,nn=Le(ce,An,Cn);if(mn(34067,ce,Cn),zt){Pe&&_n&&t.texStorage2D(34067,nn,Jn,An.width,An.height);for(let bt=0;bt<6;bt++){Vn=pt[bt].mipmaps;for(let Pn=0;Pn<Vn.length;Pn++){const Ci=Vn[Pn];ce.format!==pn?null!==en?Pe?t.compressedTexSubImage2D(34069+bt,Pn,0,0,Ci.width,Ci.height,en,Ci.data):t.compressedTexImage2D(34069+bt,Pn,Jn,Ci.width,Ci.height,0,Ci.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?t.texSubImage2D(34069+bt,Pn,0,0,Ci.width,Ci.height,en,Yt,Ci.data):t.texImage2D(34069+bt,Pn,Jn,Ci.width,Ci.height,0,en,Yt,Ci.data)}}}else{Vn=ce.mipmaps,Pe&&_n&&(Vn.length>0&&nn++,t.texStorage2D(34067,nn,Jn,pt[0].width,pt[0].height));for(let bt=0;bt<6;bt++)if(Mn){Pe?t.texSubImage2D(34069+bt,0,0,0,pt[bt].width,pt[bt].height,en,Yt,pt[bt].data):t.texImage2D(34069+bt,0,Jn,pt[bt].width,pt[bt].height,0,en,Yt,pt[bt].data);for(let Pn=0;Pn<Vn.length;Pn++){const Ir=Vn[Pn].image[bt].image;Pe?t.texSubImage2D(34069+bt,Pn+1,0,0,Ir.width,Ir.height,en,Yt,Ir.data):t.texImage2D(34069+bt,Pn+1,Jn,Ir.width,Ir.height,0,en,Yt,Ir.data)}}else{Pe?t.texSubImage2D(34069+bt,0,0,0,en,Yt,pt[bt]):t.texImage2D(34069+bt,0,Jn,en,Yt,pt[bt]);for(let Pn=0;Pn<Vn.length;Pn++){const Ci=Vn[Pn];Pe?t.texSubImage2D(34069+bt,Pn+1,0,0,en,Yt,Ci.image[bt]):t.texImage2D(34069+bt,Pn+1,Jn,en,Yt,Ci.image[bt])}}}le(ce,Cn)&&me(34067),ye.__version=ce.version,ce.onUpdate&&ce.onUpdate(ce)}(_t,ye,ce):(t.activeTexture(33984+ce),t.bindTexture(34067,_t.__webglTexture))}const Et={[Se]:10497,[nt]:33071,[ft]:33648},$t={[Lt]:9728,[Qn]:9984,[on]:9986,[xn]:9729,[Hn]:9985,[Nn]:9987};function mn(ye,ce,_t){if(_t?(d.texParameteri(ye,10242,Et[ce.wrapS]),d.texParameteri(ye,10243,Et[ce.wrapT]),(32879===ye||35866===ye)&&d.texParameteri(ye,32882,Et[ce.wrapR]),d.texParameteri(ye,10240,$t[ce.magFilter]),d.texParameteri(ye,10241,$t[ce.minFilter])):(d.texParameteri(ye,10242,33071),d.texParameteri(ye,10243,33071),(32879===ye||35866===ye)&&d.texParameteri(ye,32882,33071),(ce.wrapS!==nt||ce.wrapT!==nt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),d.texParameteri(ye,10240,lt(ce.magFilter)),d.texParameteri(ye,10241,lt(ce.minFilter)),ce.minFilter!==Lt&&ce.minFilter!==xn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const zt=e.get("EXT_texture_filter_anisotropic");if(ce.type===as&&!1===e.has("OES_texture_float_linear")||!1===f&&ce.type===ur&&!1===e.has("OES_texture_half_float_linear"))return;(ce.anisotropy>1||r.get(ce).__currentAnisotropy)&&(d.texParameterf(ye,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ce.anisotropy,o.getMaxAnisotropy())),r.get(ce).__currentAnisotropy=ce.anisotropy)}}function Sn(ye,ce){void 0===ye.__webglInit&&(ye.__webglInit=!0,ce.addEventListener("dispose",Ye),ye.__webglTexture=d.createTexture(),h.memory.textures++)}function ct(ye,ce,_t){let zt=3553;ce.isDataTexture2DArray&&(zt=35866),ce.isDataTexture3D&&(zt=32879),Sn(ye,ce),t.activeTexture(33984+_t),t.bindTexture(zt,ye.__webglTexture),d.pixelStorei(37440,ce.flipY),d.pixelStorei(37441,ce.premultiplyAlpha),d.pixelStorei(3317,ce.unpackAlignment),d.pixelStorei(37443,0);const Mn=function $(ye){return!f&&(ye.wrapS!==nt||ye.wrapT!==nt||ye.minFilter!==Lt&&ye.minFilter!==xn)}(ce)&&!1===ie(ce.image);let pt=P(ce.image,Mn,!1,M);pt=Wn(ce,pt);const An=ie(pt)||f,Cn=c.convert(ce.format,ce.encoding);let Jn,en=c.convert(ce.type),Yt=be(ce.internalFormat,Cn,en,ce.encoding,ce.isVideoTexture);mn(zt,ce,An);const Pe=ce.mipmaps,_n=f&&!0!==ce.isVideoTexture,nn=void 0===ye.__version,Vn=Le(ce,pt,An);if(ce.isDepthTexture)Yt=6402,f?Yt=ce.type===as?36012:1014===ce.type?33190:ce.type===Or?35056:33189:ce.type===as&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ce.format===Ni&&6402===Yt&&ce.type!==Jr&&1014!==ce.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ce.type=Jr,en=c.convert(ce.type)),ce.format===Nr&&6402===Yt&&(Yt=34041,ce.type!==Or&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ce.type=Or,en=c.convert(ce.type))),_n&&nn?t.texStorage2D(3553,1,Yt,pt.width,pt.height):t.texImage2D(3553,0,Yt,pt.width,pt.height,0,Cn,en,null);else if(ce.isDataTexture)if(Pe.length>0&&An){_n&&nn&&t.texStorage2D(3553,Vn,Yt,Pe[0].width,Pe[0].height);for(let bt=0,Pn=Pe.length;bt<Pn;bt++)Jn=Pe[bt],_n?t.texSubImage2D(3553,0,0,0,Jn.width,Jn.height,Cn,en,Jn.data):t.texImage2D(3553,bt,Yt,Jn.width,Jn.height,0,Cn,en,Jn.data);ce.generateMipmaps=!1}else _n?(nn&&t.texStorage2D(3553,Vn,Yt,pt.width,pt.height),t.texSubImage2D(3553,0,0,0,pt.width,pt.height,Cn,en,pt.data)):t.texImage2D(3553,0,Yt,pt.width,pt.height,0,Cn,en,pt.data);else if(ce.isCompressedTexture){_n&&nn&&t.texStorage2D(3553,Vn,Yt,Pe[0].width,Pe[0].height);for(let bt=0,Pn=Pe.length;bt<Pn;bt++)Jn=Pe[bt],ce.format!==pn?null!==Cn?_n?t.compressedTexSubImage2D(3553,bt,0,0,Jn.width,Jn.height,Cn,Jn.data):t.compressedTexImage2D(3553,bt,Yt,Jn.width,Jn.height,0,Jn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_n?t.texSubImage2D(3553,bt,0,0,Jn.width,Jn.height,Cn,en,Jn.data):t.texImage2D(3553,bt,Yt,Jn.width,Jn.height,0,Cn,en,Jn.data)}else if(ce.isDataTexture2DArray)_n?(nn&&t.texStorage3D(35866,Vn,Yt,pt.width,pt.height,pt.depth),t.texSubImage3D(35866,0,0,0,0,pt.width,pt.height,pt.depth,Cn,en,pt.data)):t.texImage3D(35866,0,Yt,pt.width,pt.height,pt.depth,0,Cn,en,pt.data);else if(ce.isDataTexture3D)_n?(nn&&t.texStorage3D(32879,Vn,Yt,pt.width,pt.height,pt.depth),t.texSubImage3D(32879,0,0,0,0,pt.width,pt.height,pt.depth,Cn,en,pt.data)):t.texImage3D(32879,0,Yt,pt.width,pt.height,pt.depth,0,Cn,en,pt.data);else if(ce.isFramebufferTexture)_n&&nn?t.texStorage2D(3553,Vn,Yt,pt.width,pt.height):t.texImage2D(3553,0,Yt,pt.width,pt.height,0,Cn,en,null);else if(Pe.length>0&&An){_n&&nn&&t.texStorage2D(3553,Vn,Yt,Pe[0].width,Pe[0].height);for(let bt=0,Pn=Pe.length;bt<Pn;bt++)Jn=Pe[bt],_n?t.texSubImage2D(3553,bt,0,0,Cn,en,Jn):t.texImage2D(3553,bt,Yt,Cn,en,Jn);ce.generateMipmaps=!1}else _n?(nn&&t.texStorage2D(3553,Vn,Yt,pt.width,pt.height),t.texSubImage2D(3553,0,0,0,Cn,en,pt)):t.texImage2D(3553,0,Yt,Cn,en,pt);le(ce,An)&&me(zt),ye.__version=ce.version,ce.onUpdate&&ce.onUpdate(ce)}function wn(ye,ce,_t,zt,Mn){const pt=c.convert(_t.format,_t.encoding),An=c.convert(_t.type),Cn=be(_t.internalFormat,pt,An,_t.encoding);r.get(ce).__hasExternalTextures||(32879===Mn||35866===Mn?t.texImage3D(Mn,0,Cn,ce.width,ce.height,ce.depth,0,pt,An,null):t.texImage2D(Mn,0,Cn,ce.width,ce.height,0,pt,An,null)),t.bindFramebuffer(36160,ye),ce.useRenderToTexture?D.framebufferTexture2DMultisampleEXT(36160,zt,Mn,r.get(_t).__webglTexture,0,ln(ce)):d.framebufferTexture2D(36160,zt,Mn,r.get(_t).__webglTexture,0),t.bindFramebuffer(36160,null)}function jn(ye,ce,_t){if(d.bindRenderbuffer(36161,ye),ce.depthBuffer&&!ce.stencilBuffer){let zt=33189;if(_t||ce.useRenderToTexture){const Mn=ce.depthTexture;Mn&&Mn.isDepthTexture&&(Mn.type===as?zt=36012:1014===Mn.type&&(zt=33190));const pt=ln(ce);ce.useRenderToTexture?D.renderbufferStorageMultisampleEXT(36161,pt,zt,ce.width,ce.height):d.renderbufferStorageMultisample(36161,pt,zt,ce.width,ce.height)}else d.renderbufferStorage(36161,zt,ce.width,ce.height);d.framebufferRenderbuffer(36160,36096,36161,ye)}else if(ce.depthBuffer&&ce.stencilBuffer){const zt=ln(ce);_t&&ce.useRenderbuffer?d.renderbufferStorageMultisample(36161,zt,35056,ce.width,ce.height):ce.useRenderToTexture?D.renderbufferStorageMultisampleEXT(36161,zt,35056,ce.width,ce.height):d.renderbufferStorage(36161,34041,ce.width,ce.height),d.framebufferRenderbuffer(36160,33306,36161,ye)}else{const zt=!0===ce.isWebGLMultipleRenderTargets?ce.texture[0]:ce.texture,Mn=c.convert(zt.format,zt.encoding),pt=c.convert(zt.type),An=be(zt.internalFormat,Mn,pt,zt.encoding),Cn=ln(ce);_t&&ce.useRenderbuffer?d.renderbufferStorageMultisample(36161,Cn,An,ce.width,ce.height):ce.useRenderToTexture?D.renderbufferStorageMultisampleEXT(36161,Cn,An,ce.width,ce.height):d.renderbufferStorage(36161,An,ce.width,ce.height)}d.bindRenderbuffer(36161,null)}function di(ye){const ce=r.get(ye),_t=!0===ye.isWebGLCubeRenderTarget;if(ye.depthTexture&&!ce.__autoAllocateDepthBuffer){if(_t)throw new Error("target.depthTexture not supported in Cube render targets");!function sn(ye,ce){if(ce&&ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ye),!ce.depthTexture||!ce.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ce.depthTexture).__webglTexture||ce.depthTexture.image.width!==ce.width||ce.depthTexture.image.height!==ce.height)&&(ce.depthTexture.image.width=ce.width,ce.depthTexture.image.height=ce.height,ce.depthTexture.needsUpdate=!0),vt(ce.depthTexture,0);const zt=r.get(ce.depthTexture).__webglTexture,Mn=ln(ce);if(ce.depthTexture.format===Ni)ce.useRenderToTexture?D.framebufferTexture2DMultisampleEXT(36160,36096,3553,zt,0,Mn):d.framebufferTexture2D(36160,36096,3553,zt,0);else{if(ce.depthTexture.format!==Nr)throw new Error("Unknown depthTexture format");ce.useRenderToTexture?D.framebufferTexture2DMultisampleEXT(36160,33306,3553,zt,0,Mn):d.framebufferTexture2D(36160,33306,3553,zt,0)}}(ce.__webglFramebuffer,ye)}else if(_t){ce.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)t.bindFramebuffer(36160,ce.__webglFramebuffer[zt]),ce.__webglDepthbuffer[zt]=d.createRenderbuffer(),jn(ce.__webglDepthbuffer[zt],ye,!1)}else t.bindFramebuffer(36160,ce.__webglFramebuffer),ce.__webglDepthbuffer=d.createRenderbuffer(),jn(ce.__webglDepthbuffer,ye,!1);t.bindFramebuffer(36160,null)}function ln(ye){return f&&(ye.useRenderbuffer||ye.useRenderToTexture)?Math.min(w,ye.samples):0}function Wn(ye,ce){const _t=ye.encoding,zt=ye.format,Mn=ye.type;return!0===ye.isCompressedTexture||!0===ye.isVideoTexture||1035===ye.format||_t!==gi&&(_t===In?!1===f?!0===e.has("EXT_sRGB")&&zt===pn?(ye.format=1035,ye.minFilter=xn,ye.generateMipmaps=!1):ce=uo.sRGBToLinear(ce):(zt!==pn||Mn!==li)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",_t)),ce}let Zn=!1,Di=!1;this.allocateTextureUnit=function Ze(){const ye=je;return ye>=m&&console.warn("THREE.WebGLTextures: Trying to use "+ye+" texture units while this GPU supports only "+m),je+=1,ye},this.resetTextureUnits=function Je(){je=0},this.setTexture2D=vt,this.setTexture2DArray=function Dt(ye,ce){const _t=r.get(ye);ye.version>0&&_t.__version!==ye.version?ct(_t,ye,ce):(t.activeTexture(33984+ce),t.bindTexture(35866,_t.__webglTexture))},this.setTexture3D=function gn(ye,ce){const _t=r.get(ye);ye.version>0&&_t.__version!==ye.version?ct(_t,ye,ce):(t.activeTexture(33984+ce),t.bindTexture(32879,_t.__webglTexture))},this.setTextureCube=gt,this.rebindTextures=function Gn(ye,ce,_t){const zt=r.get(ye);void 0!==ce&&wn(zt.__webglFramebuffer,ye,ye.texture,36064,3553),void 0!==_t&&di(ye)},this.setupRenderTarget=function xt(ye){const ce=ye.texture,_t=r.get(ye),zt=r.get(ce);ye.addEventListener("dispose",te),!0!==ye.isWebGLMultipleRenderTargets&&(void 0===zt.__webglTexture&&(zt.__webglTexture=d.createTexture()),zt.__version=ce.version,h.memory.textures++);const Mn=!0===ye.isWebGLCubeRenderTarget,pt=!0===ye.isWebGLMultipleRenderTargets,An=ce.isDataTexture3D||ce.isDataTexture2DArray,Cn=ie(ye)||f;if(Mn){_t.__webglFramebuffer=[];for(let en=0;en<6;en++)_t.__webglFramebuffer[en]=d.createFramebuffer()}else if(_t.__webglFramebuffer=d.createFramebuffer(),pt)if(o.drawBuffers){const en=ye.texture;for(let Yt=0,Jn=en.length;Yt<Jn;Yt++){const Pe=r.get(en[Yt]);void 0===Pe.__webglTexture&&(Pe.__webglTexture=d.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ye.useRenderbuffer)if(f){_t.__webglMultisampledFramebuffer=d.createFramebuffer(),_t.__webglColorRenderbuffer=d.createRenderbuffer(),d.bindRenderbuffer(36161,_t.__webglColorRenderbuffer);const en=c.convert(ce.format,ce.encoding),Yt=c.convert(ce.type),Jn=be(ce.internalFormat,en,Yt,ce.encoding),Pe=ln(ye);d.renderbufferStorageMultisample(36161,Pe,Jn,ye.width,ye.height),t.bindFramebuffer(36160,_t.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(36160,36064,36161,_t.__webglColorRenderbuffer),d.bindRenderbuffer(36161,null),ye.depthBuffer&&(_t.__webglDepthRenderbuffer=d.createRenderbuffer(),jn(_t.__webglDepthRenderbuffer,ye,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Mn){t.bindTexture(34067,zt.__webglTexture),mn(34067,ce,Cn);for(let en=0;en<6;en++)wn(_t.__webglFramebuffer[en],ye,ce,36064,34069+en);le(ce,Cn)&&me(34067),t.unbindTexture()}else if(pt){const en=ye.texture;for(let Yt=0,Jn=en.length;Yt<Jn;Yt++){const Pe=en[Yt],_n=r.get(Pe);t.bindTexture(3553,_n.__webglTexture),mn(3553,Pe,Cn),wn(_t.__webglFramebuffer,ye,Pe,36064+Yt,3553),le(Pe,Cn)&&me(3553)}t.unbindTexture()}else{let en=3553;An&&(f?en=ce.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(en,zt.__webglTexture),mn(en,ce,Cn),wn(_t.__webglFramebuffer,ye,ce,36064,en),le(ce,Cn)&&me(en),t.unbindTexture()}ye.depthBuffer&&di(ye)},this.updateRenderTargetMipmap=function Wt(ye){const ce=ie(ye)||f,_t=!0===ye.isWebGLMultipleRenderTargets?ye.texture:[ye.texture];for(let zt=0,Mn=_t.length;zt<Mn;zt++){const pt=_t[zt];if(le(pt,ce)){const An=ye.isWebGLCubeRenderTarget?34067:3553,Cn=r.get(pt).__webglTexture;t.bindTexture(An,Cn),me(An),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Vt(ye){if(ye.useRenderbuffer)if(f){const ce=ye.width,_t=ye.height;let zt=16384;const Mn=[36064],pt=ye.stencilBuffer?33306:36096;ye.depthBuffer&&Mn.push(pt),ye.ignoreDepthForMultisampleCopy||(ye.depthBuffer&&(zt|=256),ye.stencilBuffer&&(zt|=1024));const An=r.get(ye);t.bindFramebuffer(36008,An.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,An.__webglFramebuffer),ye.ignoreDepthForMultisampleCopy&&(d.invalidateFramebuffer(36008,[pt]),d.invalidateFramebuffer(36009,[pt])),d.blitFramebuffer(0,0,ce,_t,0,0,ce,_t,zt,9728),d.invalidateFramebuffer(36008,Mn),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,An.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=di,this.setupFrameBufferTexture=wn,this.safeSetTexture2D=function fr(ye,ce){ye&&ye.isWebGLRenderTarget&&(!1===Zn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Zn=!0),ye=ye.texture),vt(ye,ce)},this.safeSetTextureCube=function tr(ye,ce){ye&&ye.isWebGLCubeRenderTarget&&(!1===Di&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Di=!0),ye=ye.texture),gt(ye,ce)}}function Ef(d,e,t){const r=t.isWebGL2;return{convert:function o(c,h=null){let f;if(c===li)return 5121;if(1017===c)return 32819;if(1018===c)return 32820;if(1010===c)return 5120;if(1011===c)return 5122;if(c===Jr)return 5123;if(1013===c)return 5124;if(1014===c)return 5125;if(c===as)return 5126;if(c===ur)return r?5131:(f=e.get("OES_texture_half_float"),null!==f?f.HALF_FLOAT_OES:null);if(1021===c)return 6406;if(c===pn)return 6408;if(1024===c)return 6409;if(1025===c)return 6410;if(c===Ni)return 6402;if(c===Nr)return 34041;if(1028===c)return 6403;if(1022===c)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===c)return f=e.get("EXT_sRGB"),null!==f?f.SRGB_ALPHA_EXT:null;if(1029===c)return 36244;if(1030===c)return 33319;if(1031===c)return 33320;if(1033===c)return 36249;if(33776===c||33777===c||33778===c||33779===c)if(h===In){if(f=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===f)return null;if(33776===c)return f.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(f=e.get("WEBGL_compressed_texture_s3tc"),null===f)return null;if(33776===c)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(f=e.get("WEBGL_compressed_texture_pvrtc"),null===f)return null;if(35840===c)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return f=e.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===c||37496===c){if(f=e.get("WEBGL_compressed_texture_etc"),null===f)return null;if(37492===c)return h===In?f.COMPRESSED_SRGB8_ETC2:f.COMPRESSED_RGB8_ETC2;if(37496===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c){if(f=e.get("WEBGL_compressed_texture_astc"),null===f)return null;if(37808===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:f.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:f.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:f.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:f.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:f.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:f.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:f.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:f.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:f.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:f.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:f.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:f.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:f.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===c)return h===In?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:f.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===c){if(f=e.get("EXT_texture_compression_bptc"),null===f)return null;if(36492===c)return h===In?f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:f.COMPRESSED_RGBA_BPTC_UNORM_EXT}return c===Or?r?34042:(f=e.get("WEBGL_depth_texture"),null!==f?f.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}xc.prototype.isMeshDistanceMaterial=!0;class Cf extends Zr{constructor(e=[]){super(),this.cameras=e}}Cf.prototype.isArrayCamera=!0;class ka extends yi{constructor(){super(),this.type="Group"}}ka.prototype.isGroup=!0;const y_={type:"move"};class Zd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ka,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ka,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ka,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let o=null,c=null,h=null;const f=this._targetRay,m=this._grip,v=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==f&&(o=t.getPose(e.targetRaySpace,r),null!==o&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(y_))),v&&e.hand){h=!0;for(const H of e.hand.values()){const K=t.getJointPose(H,r);if(void 0===v.joints[H.jointName]){const P=new ka;P.matrixAutoUpdate=!1,P.visible=!1,v.joints[H.jointName]=P,v.add(P)}const U=v.joints[H.jointName];null!==K&&(U.matrix.fromArray(K.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.jointRadius=K.radius),U.visible=null!==K}const C=v.joints["index-finger-tip"].position.distanceTo(v.joints["thumb-tip"].position),D=.02,N=.005;v.inputState.pinching&&C>D+N?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&C<=D-N&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==m&&e.gripSpace&&(c=t.getPose(e.gripSpace,r),null!==c&&(m.matrix.fromArray(c.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),c.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(c.linearVelocity)):m.hasLinearVelocity=!1,c.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(c.angularVelocity)):m.hasAngularVelocity=!1));return null!==f&&(f.visible=null!==o),null!==m&&(m.visible=null!==c),null!==v&&(v.visible=null!==h),this}}class Dg extends Ar{constructor(e,t,r,o,c,h,f,m,v,M){if((M=void 0!==M?M:Ni)!==Ni&&M!==Nr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&M===Ni&&(r=Jr),void 0===r&&M===Nr&&(r=Or),super(null,o,c,h,f,m,M,r,v),this.image={width:e,height:t},this.magFilter=void 0!==f?f:Lt,this.minFilter=void 0!==m?m:Lt,this.flipY=!1,this.generateMipmaps=!1}}Dg.prototype.isDepthTexture=!0;class Rg extends k{constructor(e,t){super();const r=this;let o=null,c=1,h=null,f="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let v=null,M=null,w=null,C=null,D=!1,N=null;const H=t.getContextAttributes();let K=null,U=null;const P=[],ie=new Map,$=new Zr;$.layers.enable(1),$.viewport=new Mi;const le=new Zr;le.layers.enable(2),le.viewport=new Mi;const me=[$,le],be=new Cf;be.layers.enable(1),be.layers.enable(2);let Le=null,lt=null;function Ye(gt){const Et=ie.get(gt.inputSource);Et&&Et.dispatchEvent({type:gt.type,data:gt.inputSource})}function te(){ie.forEach(function(gt,Et){gt.disconnect(Et)}),ie.clear(),Le=null,lt=null,e.setRenderTarget(K),C=null,w=null,M=null,o=null,U=null,gn.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function De(gt){const Et=o.inputSources;for(let $t=0;$t<P.length;$t++)ie.set(Et[$t],P[$t]);for(let $t=0;$t<gt.removed.length;$t++){const mn=gt.removed[$t],Sn=ie.get(mn);Sn&&(Sn.dispatchEvent({type:"disconnected",data:mn}),ie.delete(mn))}for(let $t=0;$t<gt.added.length;$t++){const mn=gt.added[$t],Sn=ie.get(mn);Sn&&Sn.dispatchEvent({type:"connected",data:mn})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(gt){let Et=P[gt];return void 0===Et&&(Et=new Zd,P[gt]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(gt){let Et=P[gt];return void 0===Et&&(Et=new Zd,P[gt]=Et),Et.getGripSpace()},this.getHand=function(gt){let Et=P[gt];return void 0===Et&&(Et=new Zd,P[gt]=Et),Et.getHandSpace()},this.setFramebufferScaleFactor=function(gt){c=gt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gt){f=gt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h},this.getBaseLayer=function(){return null!==w?w:C},this.getBinding=function(){return M},this.getFrame=function(){return N},this.getSession=function(){return o},this.setSession=function(){var gt=function a(d){return function(){var e=this,t=arguments;return new Promise(function(r,o){var c=d.apply(e,t);function h(m){S(c,r,o,h,f,"next",m)}function f(m){S(c,r,o,h,f,"throw",m)}h(void 0)})}}(function*(Et){if(o=Et,null!==o){if(K=e.getRenderTarget(),o.addEventListener("select",Ye),o.addEventListener("selectstart",Ye),o.addEventListener("selectend",Ye),o.addEventListener("squeeze",Ye),o.addEventListener("squeezestart",Ye),o.addEventListener("squeezeend",Ye),o.addEventListener("end",te),o.addEventListener("inputsourceschange",De),!0!==H.xrCompatible&&(yield t.makeXRCompatible()),void 0===o.renderState.layers||!1===e.capabilities.isWebGL2)C=new XRWebGLLayer(o,t,{antialias:void 0!==o.renderState.layers||H.antialias,alpha:H.alpha,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:c}),o.updateRenderState({baseLayer:C}),U=new es(C.framebufferWidth,C.framebufferHeight,{format:pn,type:li,encoding:e.outputEncoding});else{D=H.antialias;let $t=null,mn=null,Sn=null;H.depth&&(Sn=H.stencil?35056:33190,$t=H.stencil?Nr:Ni,mn=H.stencil?Or:Jr);const ct={colorFormat:e.outputEncoding===In?35907:32856,depthFormat:Sn,scaleFactor:c};M=new XRWebGLBinding(o,t),w=M.createProjectionLayer(ct),o.updateRenderState({layers:[w]}),U=D?new ho(w.textureWidth,w.textureHeight,{format:pn,type:li,depthTexture:new Dg(w.textureWidth,w.textureHeight,mn,void 0,void 0,void 0,void 0,void 0,void 0,$t),stencilBuffer:H.stencil,ignoreDepth:w.ignoreDepthValues,useRenderToTexture:m,encoding:e.outputEncoding}):new es(w.textureWidth,w.textureHeight,{format:pn,type:li,depthTexture:new Dg(w.textureWidth,w.textureHeight,mn,void 0,void 0,void 0,void 0,void 0,void 0,$t),stencilBuffer:H.stencil,ignoreDepth:w.ignoreDepthValues,encoding:e.outputEncoding})}U.isXRRenderTarget=!0,this.setFoveation(1),h=yield o.requestReferenceSpace(f),gn.setContext(o),gn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Et){return gt.apply(this,arguments)}}();const He=new re,je=new re;function Ze(gt,Et){null===Et?gt.matrixWorld.copy(gt.matrix):gt.matrixWorld.multiplyMatrices(Et.matrixWorld,gt.matrix),gt.matrixWorldInverse.copy(gt.matrixWorld).invert()}this.updateCamera=function(gt){if(null===o)return;be.near=le.near=$.near=gt.near,be.far=le.far=$.far=gt.far,(Le!==be.near||lt!==be.far)&&(o.updateRenderState({depthNear:be.near,depthFar:be.far}),Le=be.near,lt=be.far);const Et=gt.parent,$t=be.cameras;Ze(be,Et);for(let Sn=0;Sn<$t.length;Sn++)Ze($t[Sn],Et);be.matrixWorld.decompose(be.position,be.quaternion,be.scale),gt.position.copy(be.position),gt.quaternion.copy(be.quaternion),gt.scale.copy(be.scale),gt.matrix.copy(be.matrix),gt.matrixWorld.copy(be.matrixWorld);const mn=gt.children;for(let Sn=0,ct=mn.length;Sn<ct;Sn++)mn[Sn].updateMatrixWorld(!0);2===$t.length?function Je(gt,Et,$t){He.setFromMatrixPosition(Et.matrixWorld),je.setFromMatrixPosition($t.matrixWorld);const mn=He.distanceTo(je),Sn=Et.projectionMatrix.elements,ct=$t.projectionMatrix.elements,zi=Sn[14]/(Sn[10]-1),wn=Sn[14]/(Sn[10]+1),jn=(Sn[9]+1)/Sn[5],sn=(Sn[9]-1)/Sn[5],di=(Sn[8]-1)/Sn[0],Gn=(ct[8]+1)/ct[0],xt=zi*di,Wt=zi*Gn,Vt=mn/(-di+Gn),ln=Vt*-di;Et.matrixWorld.decompose(gt.position,gt.quaternion,gt.scale),gt.translateX(ln),gt.translateZ(Vt),gt.matrixWorld.compose(gt.position,gt.quaternion,gt.scale),gt.matrixWorldInverse.copy(gt.matrixWorld).invert();const Kt=zi+Vt,Wn=wn+Vt;gt.projectionMatrix.makePerspective(xt-ln,Wt+(mn-ln),jn*wn/Wn*Kt,sn*wn/Wn*Kt,Kt,Wn)}(be,$,le):be.projectionMatrix.copy($.projectionMatrix)},this.getCamera=function(){return be},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==C?C.fixedFoveation:void 0},this.setFoveation=function(gt){null!==w&&(w.fixedFoveation=gt),null!==C&&void 0!==C.fixedFoveation&&(C.fixedFoveation=gt)};let vt=null;const gn=new gs;gn.setAnimationLoop(function Dt(gt,Et){if(v=Et.getViewerPose(h),N=Et,null!==v){const mn=v.views;null!==C&&(e.setRenderTargetFramebuffer(U,C.framebuffer),e.setRenderTarget(U));let Sn=!1;mn.length!==be.cameras.length&&(be.cameras.length=0,Sn=!0);for(let ct=0;ct<mn.length;ct++){const zi=mn[ct];let wn=null;if(null!==C)wn=C.getViewport(zi);else{const sn=M.getViewSubImage(w,zi);wn=sn.viewport,0===ct&&(e.setRenderTargetTextures(U,sn.colorTexture,w.ignoreDepthValues?void 0:sn.depthStencilTexture),e.setRenderTarget(U))}const jn=me[ct];jn.matrix.fromArray(zi.transform.matrix),jn.projectionMatrix.fromArray(zi.projectionMatrix),jn.viewport.set(wn.x,wn.y,wn.width,wn.height),0===ct&&be.matrix.copy(jn.matrix),!0===Sn&&be.cameras.push(jn)}}const $t=o.inputSources;for(let mn=0;mn<P.length;mn++)P[mn].update($t[mn],Et,h);vt&&vt(gt,Et),N=null}),this.setAnimationLoop=function(gt){vt=gt},this.dispose=function(){}}}function Pg(d){function r(U,P){U.opacity.value=P.opacity,P.color&&U.diffuse.value.copy(P.color),P.emissive&&U.emissive.value.copy(P.emissive).multiplyScalar(P.emissiveIntensity),P.map&&(U.map.value=P.map),P.alphaMap&&(U.alphaMap.value=P.alphaMap),P.specularMap&&(U.specularMap.value=P.specularMap),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest);const ie=d.get(P).envMap;let $,le;ie&&(U.envMap.value=ie,U.flipEnvMap.value=ie.isCubeTexture&&!1===ie.isRenderTargetTexture?-1:1,U.reflectivity.value=P.reflectivity,U.ior.value=P.ior,U.refractionRatio.value=P.refractionRatio),P.lightMap&&(U.lightMap.value=P.lightMap,U.lightMapIntensity.value=P.lightMapIntensity),P.aoMap&&(U.aoMap.value=P.aoMap,U.aoMapIntensity.value=P.aoMapIntensity),P.map?$=P.map:P.specularMap?$=P.specularMap:P.displacementMap?$=P.displacementMap:P.normalMap?$=P.normalMap:P.bumpMap?$=P.bumpMap:P.roughnessMap?$=P.roughnessMap:P.metalnessMap?$=P.metalnessMap:P.alphaMap?$=P.alphaMap:P.emissiveMap?$=P.emissiveMap:P.clearcoatMap?$=P.clearcoatMap:P.clearcoatNormalMap?$=P.clearcoatNormalMap:P.clearcoatRoughnessMap?$=P.clearcoatRoughnessMap:P.specularIntensityMap?$=P.specularIntensityMap:P.specularColorMap?$=P.specularColorMap:P.transmissionMap?$=P.transmissionMap:P.thicknessMap?$=P.thicknessMap:P.sheenColorMap?$=P.sheenColorMap:P.sheenRoughnessMap&&($=P.sheenRoughnessMap),void 0!==$&&($.isWebGLRenderTarget&&($=$.texture),!0===$.matrixAutoUpdate&&$.updateMatrix(),U.uvTransform.value.copy($.matrix)),P.aoMap?le=P.aoMap:P.lightMap&&(le=P.lightMap),void 0!==le&&(le.isWebGLRenderTarget&&(le=le.texture),!0===le.matrixAutoUpdate&&le.updateMatrix(),U.uv2Transform.value.copy(le.matrix))}function w(U,P){U.roughness.value=P.roughness,U.metalness.value=P.metalness,P.roughnessMap&&(U.roughnessMap.value=P.roughnessMap),P.metalnessMap&&(U.metalnessMap.value=P.metalnessMap),P.emissiveMap&&(U.emissiveMap.value=P.emissiveMap),P.bumpMap&&(U.bumpMap.value=P.bumpMap,U.bumpScale.value=P.bumpScale,1===P.side&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,U.normalScale.value.copy(P.normalScale),1===P.side&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias),d.get(P).envMap&&(U.envMapIntensity.value=P.envMapIntensity)}return{refreshFogUniforms:function e(U,P){U.fogColor.value.copy(P.color),P.isFog?(U.fogNear.value=P.near,U.fogFar.value=P.far):P.isFogExp2&&(U.fogDensity.value=P.density)},refreshMaterialUniforms:function t(U,P,ie,$,le){P.isMeshBasicMaterial?r(U,P):P.isMeshLambertMaterial?(r(U,P),function m(U,P){P.emissiveMap&&(U.emissiveMap.value=P.emissiveMap)}(U,P)):P.isMeshToonMaterial?(r(U,P),function M(U,P){P.gradientMap&&(U.gradientMap.value=P.gradientMap),P.emissiveMap&&(U.emissiveMap.value=P.emissiveMap),P.bumpMap&&(U.bumpMap.value=P.bumpMap,U.bumpScale.value=P.bumpScale,1===P.side&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,U.normalScale.value.copy(P.normalScale),1===P.side&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias)}(U,P)):P.isMeshPhongMaterial?(r(U,P),function v(U,P){U.specular.value.copy(P.specular),U.shininess.value=Math.max(P.shininess,1e-4),P.emissiveMap&&(U.emissiveMap.value=P.emissiveMap),P.bumpMap&&(U.bumpMap.value=P.bumpMap,U.bumpScale.value=P.bumpScale,1===P.side&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,U.normalScale.value.copy(P.normalScale),1===P.side&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias)}(U,P)):P.isMeshStandardMaterial?(r(U,P),P.isMeshPhysicalMaterial?function C(U,P,ie){w(U,P),U.ior.value=P.ior,P.sheen>0&&(U.sheenColor.value.copy(P.sheenColor).multiplyScalar(P.sheen),U.sheenRoughness.value=P.sheenRoughness,P.sheenColorMap&&(U.sheenColorMap.value=P.sheenColorMap),P.sheenRoughnessMap&&(U.sheenRoughnessMap.value=P.sheenRoughnessMap)),P.clearcoat>0&&(U.clearcoat.value=P.clearcoat,U.clearcoatRoughness.value=P.clearcoatRoughness,P.clearcoatMap&&(U.clearcoatMap.value=P.clearcoatMap),P.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=P.clearcoatRoughnessMap),P.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(P.clearcoatNormalScale),U.clearcoatNormalMap.value=P.clearcoatNormalMap,1===P.side&&U.clearcoatNormalScale.value.negate())),P.transmission>0&&(U.transmission.value=P.transmission,U.transmissionSamplerMap.value=ie.texture,U.transmissionSamplerSize.value.set(ie.width,ie.height),P.transmissionMap&&(U.transmissionMap.value=P.transmissionMap),U.thickness.value=P.thickness,P.thicknessMap&&(U.thicknessMap.value=P.thicknessMap),U.attenuationDistance.value=P.attenuationDistance,U.attenuationColor.value.copy(P.attenuationColor)),U.specularIntensity.value=P.specularIntensity,U.specularColor.value.copy(P.specularColor),P.specularIntensityMap&&(U.specularIntensityMap.value=P.specularIntensityMap),P.specularColorMap&&(U.specularColorMap.value=P.specularColorMap)}(U,P,le):w(U,P)):P.isMeshMatcapMaterial?(r(U,P),function D(U,P){P.matcap&&(U.matcap.value=P.matcap),P.bumpMap&&(U.bumpMap.value=P.bumpMap,U.bumpScale.value=P.bumpScale,1===P.side&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,U.normalScale.value.copy(P.normalScale),1===P.side&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias)}(U,P)):P.isMeshDepthMaterial?(r(U,P),function N(U,P){P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias)}(U,P)):P.isMeshDistanceMaterial?(r(U,P),function H(U,P){P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias),U.referencePosition.value.copy(P.referencePosition),U.nearDistance.value=P.nearDistance,U.farDistance.value=P.farDistance}(U,P)):P.isMeshNormalMaterial?(r(U,P),function K(U,P){P.bumpMap&&(U.bumpMap.value=P.bumpMap,U.bumpScale.value=P.bumpScale,1===P.side&&(U.bumpScale.value*=-1)),P.normalMap&&(U.normalMap.value=P.normalMap,U.normalScale.value.copy(P.normalScale),1===P.side&&U.normalScale.value.negate()),P.displacementMap&&(U.displacementMap.value=P.displacementMap,U.displacementScale.value=P.displacementScale,U.displacementBias.value=P.displacementBias)}(U,P)):P.isLineBasicMaterial?(function o(U,P){U.diffuse.value.copy(P.color),U.opacity.value=P.opacity}(U,P),P.isLineDashedMaterial&&function c(U,P){U.dashSize.value=P.dashSize,U.totalSize.value=P.dashSize+P.gapSize,U.scale.value=P.scale}(U,P)):P.isPointsMaterial?function h(U,P,ie,$){let le;U.diffuse.value.copy(P.color),U.opacity.value=P.opacity,U.size.value=P.size*ie,U.scale.value=.5*$,P.map&&(U.map.value=P.map),P.alphaMap&&(U.alphaMap.value=P.alphaMap),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest),P.map?le=P.map:P.alphaMap&&(le=P.alphaMap),void 0!==le&&(!0===le.matrixAutoUpdate&&le.updateMatrix(),U.uvTransform.value.copy(le.matrix))}(U,P,ie,$):P.isSpriteMaterial?function f(U,P){let ie;U.diffuse.value.copy(P.color),U.opacity.value=P.opacity,U.rotation.value=P.rotation,P.map&&(U.map.value=P.map),P.alphaMap&&(U.alphaMap.value=P.alphaMap),P.alphaTest>0&&(U.alphaTest.value=P.alphaTest),P.map?ie=P.map:P.alphaMap&&(ie=P.alphaMap),void 0!==ie&&(!0===ie.matrixAutoUpdate&&ie.updateMatrix(),U.uvTransform.value.copy(ie.matrix))}(U,P):P.isShadowMaterial?(U.color.value.copy(P.color),U.opacity.value=P.opacity):P.isShaderMaterial&&(P.uniformsNeedUpdate=!1)}}}function ji(d={}){const e=void 0!==d.canvas?d.canvas:function x_(){const d=El("canvas");return d.style.display="block",d}(),t=void 0!==d.context?d.context:null,r=void 0!==d.alpha&&d.alpha,o=void 0===d.depth||d.depth,c=void 0===d.stencil||d.stencil,h=void 0!==d.antialias&&d.antialias,f=void 0===d.premultipliedAlpha||d.premultipliedAlpha,m=void 0!==d.preserveDrawingBuffer&&d.preserveDrawingBuffer,v=void 0!==d.powerPreference?d.powerPreference:"default",M=void 0!==d.failIfMajorPerformanceCaveat&&d.failIfMajorPerformanceCaveat;let w=null,C=null;const D=[],N=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gi,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const H=this;let K=!1,U=0,P=0,ie=null,$=-1,le=null;const me=new Mi,be=new Mi;let Le=null,lt=e.width,Ye=e.height,te=1,De=null,He=null;const je=new Mi(0,0,lt,Ye),Je=new Mi(0,0,lt,Ye);let Ze=!1;const vt=new Ln;let Dt=!1,gn=!1,gt=null;const Et=new Qt,$t=new re,mn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Sn(){return null===ie?te:1}let wn,jn,sn,di,Gn,xt,Wt,Vt,ln,Kt,Wn,Zn,Di,fr,tr,ye,ce,_t,zt,Mn,pt,An,Cn,ct=t;function zi(ue,Be){for(let st=0;st<ue.length;st++){const Mt=e.getContext(ue[st],Be);if(null!==Mt)return Mt}return null}try{const ue={alpha:!0,depth:o,stencil:c,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:M};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Jn,!1),e.addEventListener("webglcontextrestored",Pe,!1),null===ct){const Be=["webgl2","webgl","experimental-webgl"];if(!0===H.isWebGL1Renderer&&Be.shift(),ct=zi(Be,ue),null===ct)throw zi(Be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}function en(){wn=new Hv(ct),jn=new Uv(ct,wn,d),wn.init(jn),An=new Ef(ct,wn,jn),sn=new Ag(ct,wn,jn),di=new ig(ct),Gn=new p_,xt=new Mf(ct,wn,sn,Gn,jn,An,di),Wt=new Na(H),Vt=new Vv(H),ln=new Bh(ct,jn),Cn=new Fv(ct,wn,ln,jn),Kt=new ng(ct,ln,di,Cn),Wn=new _c(ct,Kt,ln,di),zt=new rg(ct,jn,xt),ye=new Wc(Gn),Zn=new _f(H,Wt,Vt,wn,jn,Cn,ye),Di=new Pg(Gn),fr=new xf,tr=new bf(wn,jn),_t=new Xp(H,Wt,sn,Wn,r,f),ce=new wf(H,Wn,jn),Mn=new kv(ct,wn,di,jn),pt=new Xh(ct,wn,di,jn),di.programs=Zn.programs,H.capabilities=jn,H.extensions=wn,H.properties=Gn,H.renderLists=fr,H.shadowMap=ce,H.state=sn,H.info=di}en();const Yt=new Rg(H,ct);function Jn(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1;const ue=di.autoReset,Be=ce.enabled,st=ce.autoUpdate,Ke=ce.needsUpdate,Mt=ce.type;en(),di.autoReset=ue,ce.enabled=Be,ce.autoUpdate=st,ce.needsUpdate=Ke,ce.type=Mt}function _n(ue){const Be=ue.target;Be.removeEventListener("dispose",_n),function nn(ue){(function Vn(ue){const Be=Gn.get(ue).programs;void 0!==Be&&(Be.forEach(function(st){Zn.releaseProgram(st)}),ue.isShaderMaterial&&Zn.releaseShaderCache(ue))})(ue),Gn.remove(ue)}(Be)}this.xr=Yt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const ue=wn.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=wn.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(ue){void 0!==ue&&(te=ue,this.setSize(lt,Ye,!1))},this.getSize=function(ue){return ue.set(lt,Ye)},this.setSize=function(ue,Be,st){Yt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(lt=ue,Ye=Be,e.width=Math.floor(ue*te),e.height=Math.floor(Be*te),!1!==st&&(e.style.width=ue+"px",e.style.height=Be+"px"),this.setViewport(0,0,ue,Be))},this.getDrawingBufferSize=function(ue){return ue.set(lt*te,Ye*te).floor()},this.setDrawingBufferSize=function(ue,Be,st){lt=ue,Ye=Be,te=st,e.width=Math.floor(ue*st),e.height=Math.floor(Be*st),this.setViewport(0,0,ue,Be)},this.getCurrentViewport=function(ue){return ue.copy(me)},this.getViewport=function(ue){return ue.copy(je)},this.setViewport=function(ue,Be,st,Ke){ue.isVector4?je.set(ue.x,ue.y,ue.z,ue.w):je.set(ue,Be,st,Ke),sn.viewport(me.copy(je).multiplyScalar(te).floor())},this.getScissor=function(ue){return ue.copy(Je)},this.setScissor=function(ue,Be,st,Ke){ue.isVector4?Je.set(ue.x,ue.y,ue.z,ue.w):Je.set(ue,Be,st,Ke),sn.scissor(be.copy(Je).multiplyScalar(te).floor())},this.getScissorTest=function(){return Ze},this.setScissorTest=function(ue){sn.setScissorTest(Ze=ue)},this.setOpaqueSort=function(ue){De=ue},this.setTransparentSort=function(ue){He=ue},this.getClearColor=function(ue){return ue.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(ue,Be,st){let Ke=0;(void 0===ue||ue)&&(Ke|=16384),(void 0===Be||Be)&&(Ke|=256),(void 0===st||st)&&(Ke|=1024),ct.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Jn,!1),e.removeEventListener("webglcontextrestored",Pe,!1),fr.dispose(),tr.dispose(),Gn.dispose(),Wt.dispose(),Vt.dispose(),Wn.dispose(),Cn.dispose(),Zn.dispose(),Yt.dispose(),Yt.removeEventListener("sessionstart",Ci),Yt.removeEventListener("sessionend",Ir),gt&&(gt.dispose(),gt=null),ao.stop()},this.renderBufferDirect=function(ue,Be,st,Ke,Mt,$n){null===Be&&(Be=mn);const Xn=Mt.isMesh&&Mt.matrixWorld.determinant()<0,fi=function Cy(ue,Be,st,Ke,Mt){!0!==Be.isScene&&(Be=mn),xt.resetTextureUnits();const $n=Be.fog,fi=null===ie?H.outputEncoding:!0===ie.isXRRenderTarget?ie.texture.encoding:gi,ai=(Ke.isMeshStandardMaterial?Vt:Wt).get(Ke.envMap||(Ke.isMeshStandardMaterial?Be.environment:null)),qi=!0===Ke.vertexColors&&!!st.attributes.color&&4===st.attributes.color.itemSize,Li=!!Ke.normalMap&&!!st.attributes.tangent,Ri=!!st.morphAttributes.position,_r=!!st.morphAttributes.normal,ya=st.morphAttributes.position?st.morphAttributes.position.length:0,yu=Ke.toneMapped?H.toneMapping:0,Ui=Gn.get(Ke),xa=C.state.lights;!0!==Dt||!0!==gn&&ue===le||ye.setState(Ke,ue,ue===le&&Ke.id===$);let ys=!1;Ke.version===Ui.__version?(Ui.needsLights&&Ui.lightsStateVersion!==xa.state.version||Ui.outputEncoding!==fi||Mt.isInstancedMesh&&!1===Ui.instancing||!Mt.isInstancedMesh&&!0===Ui.instancing||Mt.isSkinnedMesh&&!1===Ui.skinning||!Mt.isSkinnedMesh&&!0===Ui.skinning||Ui.envMap!==ai||Ke.fog&&Ui.fog!==$n||void 0!==Ui.numClippingPlanes&&(Ui.numClippingPlanes!==ye.numPlanes||Ui.numIntersection!==ye.numIntersection)||Ui.vertexAlphas!==qi||Ui.vertexTangents!==Li||Ui.morphTargets!==Ri||Ui.morphNormals!==_r||Ui.toneMapping!==yu||!0===jn.isWebGL2&&Ui.morphTargetsCount!==ya)&&(ys=!0):(ys=!0,Ui.__version=Ke.version);let ja=Ui.currentProgram;!0===ys&&(ja=Ih(Ke,Be,Mt));let Lh=!1,ra=!1,xl=!1;const lo=ja.getUniforms(),bd=Ui.uniforms;if(sn.useProgram(ja.program)&&(Lh=!0,ra=!0,xl=!0),Ke.id!==$&&($=Ke.id,ra=!0),Lh||le!==ue){if(lo.setValue(ct,"projectionMatrix",ue.projectionMatrix),jn.logarithmicDepthBuffer&&lo.setValue(ct,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),le!==ue&&(le=ue,ra=!0,xl=!0),Ke.isShaderMaterial||Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshStandardMaterial||Ke.envMap){const ba=lo.map.cameraPosition;void 0!==ba&&ba.setValue(ct,$t.setFromMatrixPosition(ue.matrixWorld))}(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&lo.setValue(ct,"isOrthographic",!0===ue.isOrthographicCamera),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial||Ke.isShadowMaterial||Mt.isSkinnedMesh)&&lo.setValue(ct,"viewMatrix",ue.matrixWorldInverse)}if(Mt.isSkinnedMesh){lo.setOptional(ct,Mt,"bindMatrix"),lo.setOptional(ct,Mt,"bindMatrixInverse");const ba=Mt.skeleton;ba&&(jn.floatVertexTextures?(null===ba.boneTexture&&ba.computeBoneTexture(),lo.setValue(ct,"boneTexture",ba.boneTexture,xt),lo.setValue(ct,"boneTextureSize",ba.boneTextureSize)):lo.setOptional(ct,ba,"boneMatrices"))}return!!st&&(void 0!==st.morphAttributes.position||void 0!==st.morphAttributes.normal)&&zt.update(Mt,st,Ke,ja),(ra||Ui.receiveShadow!==Mt.receiveShadow)&&(Ui.receiveShadow=Mt.receiveShadow,lo.setValue(ct,"receiveShadow",Mt.receiveShadow)),ra&&(lo.setValue(ct,"toneMappingExposure",H.toneMappingExposure),Ui.needsLights&&function xd(ue,Be){ue.ambientLightColor.needsUpdate=Be,ue.lightProbe.needsUpdate=Be,ue.directionalLights.needsUpdate=Be,ue.directionalLightShadows.needsUpdate=Be,ue.pointLights.needsUpdate=Be,ue.pointLightShadows.needsUpdate=Be,ue.spotLights.needsUpdate=Be,ue.spotLightShadows.needsUpdate=Be,ue.rectAreaLights.needsUpdate=Be,ue.hemisphereLights.needsUpdate=Be}(bd,xl),$n&&Ke.fog&&Di.refreshFogUniforms(bd,$n),Di.refreshMaterialUniforms(bd,Ke,te,Ye,gt),Fa.upload(ct,Ui.uniformsList,bd,xt)),Ke.isShaderMaterial&&!0===Ke.uniformsNeedUpdate&&(Fa.upload(ct,Ui.uniformsList,bd,xt),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&lo.setValue(ct,"center",Mt.center),lo.setValue(ct,"modelViewMatrix",Mt.modelViewMatrix),lo.setValue(ct,"normalMatrix",Mt.normalMatrix),lo.setValue(ct,"modelMatrix",Mt.matrixWorld),ja}(ue,Be,st,Ke,Mt);sn.setMaterial(Ke,Xn);let ai=st.index;const qi=st.attributes.position;if(null===ai){if(void 0===qi||0===qi.count)return}else if(0===ai.count)return;let Li=1;!0===Ke.wireframe&&(ai=Kt.getWireframeAttribute(st),Li=2),Cn.setup(Mt,Ke,fi,st,ai);let Ri,_r=Mn;null!==ai&&(Ri=ln.get(ai),_r=pt,_r.setIndex(Ri));const ya=null!==ai?ai.count:qi.count,yu=st.drawRange.start*Li,Ui=st.drawRange.count*Li,xa=null!==$n?$n.start*Li:0,ys=null!==$n?$n.count*Li:1/0,ja=Math.max(yu,xa),Lh=Math.min(ya,yu+Ui,xa+ys)-1,ra=Math.max(0,Lh-ja+1);if(0!==ra){if(Mt.isMesh)!0===Ke.wireframe?(sn.setLineWidth(Ke.wireframeLinewidth*Sn()),_r.setMode(1)):_r.setMode(4);else if(Mt.isLine){let xl=Ke.linewidth;void 0===xl&&(xl=1),sn.setLineWidth(xl*Sn()),_r.setMode(Mt.isLineSegments?1:Mt.isLineLoop?2:3)}else Mt.isPoints?_r.setMode(0):Mt.isSprite&&_r.setMode(4);if(Mt.isInstancedMesh)_r.renderInstances(ja,ra,Mt.count);else if(st.isInstancedBufferGeometry){const xl=Math.min(st.instanceCount,st._maxInstanceCount);_r.renderInstances(ja,ra,xl)}else _r.render(ja,ra)}},this.compile=function(ue,Be){C=tr.get(ue),C.init(),N.push(C),ue.traverseVisible(function(st){st.isLight&&st.layers.test(Be.layers)&&(C.pushLight(st),st.castShadow&&C.pushShadow(st))}),C.setupLights(H.physicallyCorrectLights),ue.traverse(function(st){const Ke=st.material;if(Ke)if(Array.isArray(Ke))for(let Mt=0;Mt<Ke.length;Mt++)Ih(Ke[Mt],ue,st);else Ih(Ke,ue,st)}),N.pop(),C=null};let bt=null;function Ci(){ao.stop()}function Ir(){ao.start()}const ao=new gs;function Vr(ue,Be,st,Ke){if(!1===ue.visible)return;if(ue.layers.test(Be.layers))if(ue.isGroup)st=ue.renderOrder;else if(ue.isLOD)!0===ue.autoUpdate&&ue.update(Be);else if(ue.isLight)C.pushLight(ue),ue.castShadow&&C.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||vt.intersectsSprite(ue)){Ke&&$t.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(Et);const Xn=Wn.update(ue),fi=ue.material;fi.visible&&w.push(ue,Xn,fi,st,$t.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(ue.isSkinnedMesh&&ue.skeleton.frame!==di.render.frame&&(ue.skeleton.update(),ue.skeleton.frame=di.render.frame),!ue.frustumCulled||vt.intersectsObject(ue))){Ke&&$t.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(Et);const Xn=Wn.update(ue),fi=ue.material;if(Array.isArray(fi)){const ai=Xn.groups;for(let qi=0,Li=ai.length;qi<Li;qi++){const Ri=ai[qi],_r=fi[Ri.materialIndex];_r&&_r.visible&&w.push(ue,Xn,_r,st,$t.z,Ri)}}else fi.visible&&w.push(ue,Xn,fi,st,$t.z,null)}const $n=ue.children;for(let Xn=0,fi=$n.length;Xn<fi;Xn++)Vr($n[Xn],Be,st,Ke)}function _a(ue,Be,st,Ke){const Mt=ue.opaque,$n=ue.transmissive,Xn=ue.transparent;C.setupLightsView(st),$n.length>0&&function yl(ue,Be,st){null===gt&&(gt=new(!0===h&&!0===jn.isWebGL2?ho:es)(1024,1024,{generateMipmaps:!0,type:null!==An.convert(ur)?ur:li,minFilter:Nn,magFilter:Lt,wrapS:nt,wrapT:nt,useRenderToTexture:wn.has("WEBGL_multisampled_render_to_texture")}));const Ke=H.getRenderTarget();H.setRenderTarget(gt),H.clear();const Mt=H.toneMapping;H.toneMapping=0,yd(ue,Be,st),H.toneMapping=Mt,xt.updateMultisampleRenderTarget(gt),xt.updateRenderTargetMipmap(gt),H.setRenderTarget(Ke)}(Mt,Be,st),Ke&&sn.viewport(me.copy(Ke)),Mt.length>0&&yd(Mt,Be,st),$n.length>0&&yd($n,Be,st),Xn.length>0&&yd(Xn,Be,st)}function yd(ue,Be,st){const Ke=!0===Be.isScene?Be.overrideMaterial:null;for(let Mt=0,$n=ue.length;Mt<$n;Mt++){const Xn=ue[Mt],fi=Xn.object,ai=Xn.geometry,qi=null===Ke?Xn.material:Ke,Li=Xn.group;fi.layers.test(st.layers)&&My(fi,Be,st,ai,qi,Li)}}function My(ue,Be,st,Ke,Mt,$n){ue.onBeforeRender(H,Be,st,Ke,Mt,$n),ue.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Mt.onBeforeRender(H,Be,st,Ke,ue,$n),!0===Mt.transparent&&Mt.side===Ge?(Mt.side=1,Mt.needsUpdate=!0,H.renderBufferDirect(st,Be,Ke,Mt,ue,$n),Mt.side=et,Mt.needsUpdate=!0,H.renderBufferDirect(st,Be,Ke,Mt,ue,$n),Mt.side=Ge):H.renderBufferDirect(st,Be,Ke,Mt,ue,$n),ue.onAfterRender(H,Be,st,Ke,Mt,$n)}function Ih(ue,Be,st){!0!==Be.isScene&&(Be=mn);const Ke=Gn.get(ue),Mt=C.state.lights,Xn=Mt.state.version,fi=Zn.getParameters(ue,Mt.state,C.state.shadowsArray,Be,st),ai=Zn.getProgramCacheKey(fi);let qi=Ke.programs;Ke.environment=ue.isMeshStandardMaterial?Be.environment:null,Ke.fog=Be.fog,Ke.envMap=(ue.isMeshStandardMaterial?Vt:Wt).get(ue.envMap||Ke.environment),void 0===qi&&(ue.addEventListener("dispose",_n),qi=new Map,Ke.programs=qi);let Li=qi.get(ai);if(void 0!==Li){if(Ke.currentProgram===Li&&Ke.lightsStateVersion===Xn)return Ey(ue,fi),Li}else fi.uniforms=Zn.getUniforms(ue),ue.onBuild(st,fi,H),ue.onBeforeCompile(fi,H),Li=Zn.acquireProgram(fi,ai),qi.set(ai,Li),Ke.uniforms=fi.uniforms;const Ri=Ke.uniforms;(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||!0===ue.clipping)&&(Ri.clippingPlanes=ye.uniform),Ey(ue,fi),Ke.needsLights=function Sy(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&!0===ue.lights}(ue),Ke.lightsStateVersion=Xn,Ke.needsLights&&(Ri.ambientLightColor.value=Mt.state.ambient,Ri.lightProbe.value=Mt.state.probe,Ri.directionalLights.value=Mt.state.directional,Ri.directionalLightShadows.value=Mt.state.directionalShadow,Ri.spotLights.value=Mt.state.spot,Ri.spotLightShadows.value=Mt.state.spotShadow,Ri.rectAreaLights.value=Mt.state.rectArea,Ri.ltc_1.value=Mt.state.rectAreaLTC1,Ri.ltc_2.value=Mt.state.rectAreaLTC2,Ri.pointLights.value=Mt.state.point,Ri.pointLightShadows.value=Mt.state.pointShadow,Ri.hemisphereLights.value=Mt.state.hemi,Ri.directionalShadowMap.value=Mt.state.directionalShadowMap,Ri.directionalShadowMatrix.value=Mt.state.directionalShadowMatrix,Ri.spotShadowMap.value=Mt.state.spotShadowMap,Ri.spotShadowMatrix.value=Mt.state.spotShadowMatrix,Ri.pointShadowMap.value=Mt.state.pointShadowMap,Ri.pointShadowMatrix.value=Mt.state.pointShadowMatrix);const _r=Li.getUniforms(),ya=Fa.seqWithValue(_r.seq,Ri);return Ke.currentProgram=Li,Ke.uniformsList=ya,Li}function Ey(ue,Be){const st=Gn.get(ue);st.outputEncoding=Be.outputEncoding,st.instancing=Be.instancing,st.skinning=Be.skinning,st.morphTargets=Be.morphTargets,st.morphNormals=Be.morphNormals,st.morphTargetsCount=Be.morphTargetsCount,st.numClippingPlanes=Be.numClippingPlanes,st.numIntersection=Be.numClipIntersection,st.vertexAlphas=Be.vertexAlphas,st.vertexTangents=Be.vertexTangents,st.toneMapping=Be.toneMapping}ao.setAnimationLoop(function Pn(ue){bt&&bt(ue)}),"undefined"!=typeof window&&ao.setContext(window),this.setAnimationLoop=function(ue){bt=ue,Yt.setAnimationLoop(ue),null===ue?ao.stop():ao.start()},Yt.addEventListener("sessionstart",Ci),Yt.addEventListener("sessionend",Ir),this.render=function(ue,Be){if(void 0===Be||!0===Be.isCamera){if(!0!==K){if(!0===ue.autoUpdate&&ue.updateMatrixWorld(),null===Be.parent&&Be.updateMatrixWorld(),!0===Yt.enabled&&!0===Yt.isPresenting&&(!0===Yt.cameraAutoUpdate&&Yt.updateCamera(Be),Be=Yt.getCamera()),!0===ue.isScene&&ue.onBeforeRender(H,ue,Be,ie),C=tr.get(ue,N.length),C.init(),N.push(C),Et.multiplyMatrices(Be.projectionMatrix,Be.matrixWorldInverse),vt.setFromProjectionMatrix(Et),gn=this.localClippingEnabled,Dt=ye.init(this.clippingPlanes,gn,Be),w=fr.get(ue,D.length),w.init(),D.push(w),Vr(ue,Be,0,H.sortObjects),w.finish(),!0===H.sortObjects&&w.sort(De,He),!0===Dt&&ye.beginShadows(),ce.render(C.state.shadowsArray,ue,Be),!0===Dt&&ye.endShadows(),!0===this.info.autoReset&&this.info.reset(),_t.render(w,ue),C.setupLights(H.physicallyCorrectLights),Be.isArrayCamera){const Ke=Be.cameras;for(let Mt=0,$n=Ke.length;Mt<$n;Mt++){const Xn=Ke[Mt];_a(w,ue,Xn,Xn.viewport)}}else _a(w,ue,Be);null!==ie&&(xt.updateMultisampleRenderTarget(ie),xt.updateRenderTargetMipmap(ie)),!0===ue.isScene&&ue.onAfterRender(H,ue,Be),sn.buffers.depth.setTest(!0),sn.buffers.depth.setMask(!0),sn.buffers.color.setMask(!0),sn.setPolygonOffset(!1),Cn.resetDefaultState(),$=-1,le=null,N.pop(),C=N.length>0?N[N.length-1]:null,D.pop(),w=D.length>0?D[D.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return ie},this.setRenderTargetTextures=function(ue,Be,st){Gn.get(ue.texture).__webglTexture=Be,Gn.get(ue.depthTexture).__webglTexture=st;const Ke=Gn.get(ue);Ke.__hasExternalTextures=!0,Ke.__hasExternalTextures&&(Ke.__autoAllocateDepthBuffer=void 0===st,Ke.__autoAllocateDepthBuffer||ue.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),ue.useRenderToTexture=!1,ue.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(ue,Be){const st=Gn.get(ue);st.__webglFramebuffer=Be,st.__useDefaultFramebuffer=void 0===Be},this.setRenderTarget=function(ue,Be=0,st=0){ie=ue,U=Be,P=st;let Ke=!0;if(ue){const ai=Gn.get(ue);void 0!==ai.__useDefaultFramebuffer?(sn.bindFramebuffer(36160,null),Ke=!1):void 0===ai.__webglFramebuffer?xt.setupRenderTarget(ue):ai.__hasExternalTextures&&xt.rebindTextures(ue,Gn.get(ue.texture).__webglTexture,Gn.get(ue.depthTexture).__webglTexture)}let Mt=null,$n=!1,Xn=!1;if(ue){const ai=ue.texture;(ai.isDataTexture3D||ai.isDataTexture2DArray)&&(Xn=!0);const qi=Gn.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Mt=qi[Be],$n=!0):Mt=ue.useRenderbuffer?Gn.get(ue).__webglMultisampledFramebuffer:qi,me.copy(ue.viewport),be.copy(ue.scissor),Le=ue.scissorTest}else me.copy(je).multiplyScalar(te).floor(),be.copy(Je).multiplyScalar(te).floor(),Le=Ze;if(sn.bindFramebuffer(36160,Mt)&&jn.drawBuffers&&Ke&&sn.drawBuffers(ue,Mt),sn.viewport(me),sn.scissor(be),sn.setScissorTest(Le),$n){const ai=Gn.get(ue.texture);ct.framebufferTexture2D(36160,36064,34069+Be,ai.__webglTexture,st)}else if(Xn){const ai=Gn.get(ue.texture);ct.framebufferTextureLayer(36160,36064,ai.__webglTexture,st||0,Be||0)}$=-1},this.readRenderTargetPixels=function(ue,Be,st,Ke,Mt,$n,Xn){if(!ue||!ue.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fi=Gn.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&void 0!==Xn&&(fi=fi[Xn]),fi){sn.bindFramebuffer(36160,fi);try{const ai=ue.texture,qi=ai.format,Li=ai.type;if(qi!==pn&&An.convert(qi)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ri=Li===ur&&(wn.has("EXT_color_buffer_half_float")||jn.isWebGL2&&wn.has("EXT_color_buffer_float"));if(!(Li===li||An.convert(Li)===ct.getParameter(35738)||Li===as&&(jn.isWebGL2||wn.has("OES_texture_float")||wn.has("WEBGL_color_buffer_float"))||Ri))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?Be>=0&&Be<=ue.width-Ke&&st>=0&&st<=ue.height-Mt&&ct.readPixels(Be,st,Ke,Mt,An.convert(qi),An.convert(Li),$n):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ai=null!==ie?Gn.get(ie).__webglFramebuffer:null;sn.bindFramebuffer(36160,ai)}}},this.copyFramebufferToTexture=function(ue,Be,st=0){if(!0!==Be.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Ke=Math.pow(2,-st),Mt=Math.floor(Be.image.width*Ke),$n=Math.floor(Be.image.height*Ke);xt.setTexture2D(Be,0),ct.copyTexSubImage2D(3553,st,0,0,ue.x,ue.y,Mt,$n),sn.unbindTexture()},this.copyTextureToTexture=function(ue,Be,st,Ke=0){const Mt=Be.image.width,$n=Be.image.height,Xn=An.convert(st.format),fi=An.convert(st.type);xt.setTexture2D(st,0),ct.pixelStorei(37440,st.flipY),ct.pixelStorei(37441,st.premultiplyAlpha),ct.pixelStorei(3317,st.unpackAlignment),Be.isDataTexture?ct.texSubImage2D(3553,Ke,ue.x,ue.y,Mt,$n,Xn,fi,Be.image.data):Be.isCompressedTexture?ct.compressedTexSubImage2D(3553,Ke,ue.x,ue.y,Be.mipmaps[0].width,Be.mipmaps[0].height,Xn,Be.mipmaps[0].data):ct.texSubImage2D(3553,Ke,ue.x,ue.y,Xn,fi,Be.image),0===Ke&&st.generateMipmaps&&ct.generateMipmap(3553),sn.unbindTexture()},this.copyTextureToTexture3D=function(ue,Be,st,Ke,Mt=0){if(H.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const $n=ue.max.x-ue.min.x+1,Xn=ue.max.y-ue.min.y+1,fi=ue.max.z-ue.min.z+1,ai=An.convert(Ke.format),qi=An.convert(Ke.type);let Li;if(Ke.isDataTexture3D)xt.setTexture3D(Ke,0),Li=32879;else{if(!Ke.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");xt.setTexture2DArray(Ke,0),Li=35866}ct.pixelStorei(37440,Ke.flipY),ct.pixelStorei(37441,Ke.premultiplyAlpha),ct.pixelStorei(3317,Ke.unpackAlignment);const Ri=ct.getParameter(3314),_r=ct.getParameter(32878),ya=ct.getParameter(3316),yu=ct.getParameter(3315),Ui=ct.getParameter(32877),xa=st.isCompressedTexture?st.mipmaps[0]:st.image;ct.pixelStorei(3314,xa.width),ct.pixelStorei(32878,xa.height),ct.pixelStorei(3316,ue.min.x),ct.pixelStorei(3315,ue.min.y),ct.pixelStorei(32877,ue.min.z),st.isDataTexture||st.isDataTexture3D?ct.texSubImage3D(Li,Mt,Be.x,Be.y,Be.z,$n,Xn,fi,ai,qi,xa.data):st.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ct.compressedTexSubImage3D(Li,Mt,Be.x,Be.y,Be.z,$n,Xn,fi,ai,xa.data)):ct.texSubImage3D(Li,Mt,Be.x,Be.y,Be.z,$n,Xn,fi,ai,qi,xa),ct.pixelStorei(3314,Ri),ct.pixelStorei(32878,_r),ct.pixelStorei(3316,ya),ct.pixelStorei(3315,yu),ct.pixelStorei(32877,Ui),0===Mt&&Ke.generateMipmaps&&ct.generateMipmap(Li),sn.unbindTexture()},this.initTexture=function(ue){xt.setTexture2D(ue,0),sn.unbindTexture()},this.resetState=function(){U=0,P=0,ie=null,sn.reset(),Cn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ji.prototype.isWebGLRenderer=!0,class b_ extends ji{}.prototype.isWebGL1Renderer=!0;class jd{constructor(e,t=25e-5){this.name="",this.color=new Ht(e),this.density=t}clone(){return new jd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}jd.prototype.isFogExp2=!0;class Ys{constructor(e,t=1,r=1e3){this.name="",this.color=new Ht(e),this.near=t,this.far=r}clone(){return new Ys(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Ys.prototype.isFog=!0;class qd extends yi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}qd.prototype.isScene=!0;class bc{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Xs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ze()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,c=this.stride;o<c;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ze()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ze()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}bc.prototype.isInterleavedBuffer=!0;const rs=new re;class wc{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyMatrix4(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.applyNormalMatrix(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)rs.x=this.getX(t),rs.y=this.getY(t),rs.z=this.getZ(t),rs.transformDirection(e),this.setXYZ(t,rs.x,rs.y,rs.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,c){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=c,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[o+c])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[o+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}wc.prototype.isInterleavedBufferAttribute=!0;class $d extends En{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Vu;$d.prototype.isSpriteMaterial=!0;const Hu=new re,Fl=new re,Mc=new re,Xc=new yt,zu=new yt,Ig=new Qt,Gu=new re,Wu=new re,Zu=new re,Lg=new yt,Sf=new yt,Tf=new yt;function Jd(d,e,t,r,o,c){Xc.subVectors(d,t).addScalar(.5).multiply(r),void 0!==o?(zu.x=c*Xc.x-o*Xc.y,zu.y=o*Xc.x+c*Xc.y):zu.copy(Xc),d.copy(e),d.x+=zu.x,d.y+=zu.y,d.applyMatrix4(Ig)}(class Yd extends yi{constructor(e){if(super(),this.type="Sprite",void 0===Vu){Vu=new Rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new bc(t,5);Vu.setIndex([0,1,2,0,2,3]),Vu.setAttribute("position",new wc(r,3,0,!1)),Vu.setAttribute("uv",new wc(r,2,3,!1))}this.geometry=Vu,this.material=void 0!==e?e:new $d,this.center=new yt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fl.setFromMatrixScale(this.matrixWorld),Ig.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Mc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fl.multiplyScalar(-Mc.z);const r=this.material.rotation;let o,c;0!==r&&(c=Math.cos(r),o=Math.sin(r));const h=this.center;Jd(Gu.set(-.5,-.5,0),Mc,h,Fl,o,c),Jd(Wu.set(.5,-.5,0),Mc,h,Fl,o,c),Jd(Zu.set(.5,.5,0),Mc,h,Fl,o,c),Lg.set(0,0),Sf.set(1,0),Tf.set(1,1);let f=e.ray.intersectTriangle(Gu,Wu,Zu,!1,Hu);if(null===f&&(Jd(Wu.set(-.5,.5,0),Mc,h,Fl,o,c),Sf.set(0,1),f=e.ray.intersectTriangle(Gu,Zu,Wu,!1,Hu),null===f))return;const m=e.ray.origin.distanceTo(Hu);m<e.near||m>e.far||t.push({distance:m,point:Hu.clone(),uv:Ve.getUV(Hu,Gu,Wu,Zu,Lg,Sf,Tf,new yt),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Og=new re,M_=new Mi,Af=new Mi,E_=new re,Ng=new Qt;class Kd extends Mr{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qt,this.bindMatrixInverse=new Qt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mi,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;M_.fromBufferAttribute(o.attributes.skinIndex,e),Af.fromBufferAttribute(o.attributes.skinWeight,e),Og.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let c=0;c<4;c++){const h=Af.getComponent(c);if(0!==h){const f=M_.getComponent(c);Ng.multiplyMatrices(r.bones[f].matrixWorld,r.boneInverses[f]),t.addScaledVector(E_.copy(Og).applyMatrix4(Ng),h)}}return t.applyMatrix4(this.bindMatrixInverse)}}Kd.prototype.isSkinnedMesh=!0;class Kc extends yi{constructor(){super(),this.type="Bone"}}Kc.prototype.isBone=!0;class Qc extends Ar{constructor(e=null,t=1,r=1,o,c,h,f,m,v=Lt,M=Lt,w,C){super(null,h,f,m,v,M,o,c,w,C),this.image={data:e,width:t,height:r},this.magFilter=v,this.minFilter=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Qc.prototype.isDataTexture=!0;const Fg=new Qt,Qd=new Qt;class eu{constructor(e=[],t=[]){this.uuid=ze(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new Qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let c=0,h=e.length;c<h;c++)Fg.multiplyMatrices(e[c]?e[c].matrixWorld:Qd,t[c]),Fg.toArray(r,16*c);null!==o&&(o.needsUpdate=!0)}clone(){return new eu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=zs(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Qc(t,e,e,pn,as);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const c=e.bones[r];let h=t[c];void 0===h&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),h=new Kc),this.bones.push(h),this.boneInverses.push((new Qt).fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,c=t.length;o<c;o++)e.bones.push(t[o].uuid),e.boneInverses.push(r[o].toArray());return e}}class tu extends ui{constructor(e,t,r,o=1){"number"==typeof r&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}tu.prototype.isInstancedBufferAttribute=!0;const eh=new Qt,th=new Qt,ju=[],qu=new Mr;(class kg extends Mr{constructor(e,t,r){super(e,t),this.instanceMatrix=new tu(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(qu.geometry=this.geometry,qu.material=this.material,void 0!==qu.material)for(let c=0;c<o;c++){this.getMatrixAt(c,eh),th.multiplyMatrices(r,eh),qu.matrixWorld=th,qu.raycast(e,ju);for(let h=0,f=ju.length;h<f;h++){const m=ju[h];m.instanceId=c,m.object=this,t.push(m)}ju.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new tu(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class ss extends En{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}ss.prototype.isLineBasicMaterial=!0;const C_=new re,Ug=new re,Df=new Qt,nh=new Ls,$u=new Ii;class fl extends yi{constructor(e=new Rn,t=new ss){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let o=1,c=t.count;o<c;o++)C_.fromBufferAttribute(t,o-1),Ug.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=C_.distanceTo(Ug);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,c=e.params.Line.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),$u.copy(r.boundingSphere),$u.applyMatrix4(o),$u.radius+=c,!1===e.ray.intersectsSphere($u))return;Df.copy(o).invert(),nh.copy(e.ray).applyMatrix4(Df);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f,v=new re,M=new re,w=new re,C=new re,D=this.isLineSegments?2:1;if(r.isBufferGeometry){const N=r.index,K=r.attributes.position;if(null!==N)for(let ie=Math.max(0,h.start),$=Math.min(N.count,h.start+h.count)-1;ie<$;ie+=D){const le=N.getX(ie),me=N.getX(ie+1);if(v.fromBufferAttribute(K,le),M.fromBufferAttribute(K,me),nh.distanceSqToSegment(v,M,C,w)>m)continue;C.applyMatrix4(this.matrixWorld);const Le=e.ray.origin.distanceTo(C);Le<e.near||Le>e.far||t.push({distance:Le,point:w.clone().applyMatrix4(this.matrixWorld),index:ie,face:null,faceIndex:null,object:this})}else for(let ie=Math.max(0,h.start),$=Math.min(K.count,h.start+h.count)-1;ie<$;ie+=D){if(v.fromBufferAttribute(K,ie),M.fromBufferAttribute(K,ie+1),nh.distanceSqToSegment(v,M,C,w)>m)continue;C.applyMatrix4(this.matrixWorld);const me=e.ray.origin.distanceTo(C);me<e.near||me>e.far||t.push({distance:me,point:w.clone().applyMatrix4(this.matrixWorld),index:ie,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}fl.prototype.isLine=!0;const Rf=new re,Ua=new re;class ta extends fl{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let o=0,c=t.count;o<c;o+=2)Rf.fromBufferAttribute(t,o),Ua.fromBufferAttribute(t,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+Rf.distanceTo(Ua);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ta.prototype.isLineSegments=!0;class Pf extends fl{constructor(e,t){super(e,t),this.type="LineLoop"}}Pf.prototype.isLineLoop=!0;class Ec extends En{constructor(e){super(),this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Ec.prototype.isPointsMaterial=!0;const S_=new Qt,nu=new Ls,Yu=new Ii,iu=new re;class pl extends yi{constructor(e=new Rn,t=new Ec){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,c=e.params.Points.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Yu.copy(r.boundingSphere),Yu.applyMatrix4(o),Yu.radius+=c,!1===e.ray.intersectsSphere(Yu))return;S_.copy(o).invert(),nu.copy(e.ray).applyMatrix4(S_);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f;if(r.isBufferGeometry){const v=r.index,w=r.attributes.position;if(null!==v)for(let N=Math.max(0,h.start),H=Math.min(v.count,h.start+h.count);N<H;N++){const K=v.getX(N);iu.fromBufferAttribute(w,K),Bg(iu,K,m,o,e,t,this)}else for(let N=Math.max(0,h.start),H=Math.min(w.count,h.start+h.count);N<H;N++)iu.fromBufferAttribute(w,N),Bg(iu,N,m,o,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Bg(d,e,t,r,o,c,h){const f=nu.distanceSqToPoint(d);if(f<t){const m=new re;nu.closestPointToPoint(d,m),m.applyMatrix4(r);const v=o.ray.origin.distanceTo(m);if(v<o.near||v>o.far)return;c.push({distance:v,distanceToRay:Math.sqrt(f),point:m,index:e,face:null,object:h})}}pl.prototype.isPoints=!0,class If extends Ar{constructor(e,t,r,o,c,h,f,m,v){super(e,t,r,o,c,h,f,m,v),this.minFilter=void 0!==h?h:xn,this.magFilter=void 0!==c?c:xn,this.generateMipmaps=!1;const M=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function w(){M.needsUpdate=!0,e.requestVideoFrameCallback(w)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class Vg extends Ar{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Lt,this.minFilter=Lt,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class Lf extends Ar{constructor(e,t,r,o,c,h,f,m,v,M,w,C){super(null,h,f,m,v,M,o,c,w,C),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class Hg extends Ar{constructor(e,t,r,o,c,h,f,m,v){super(e,t,r,o,c,h,f,m,v),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new re,new re,new re,new Ve;class na{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),c=0;t.push(0);for(let h=1;h<=e;h++)r=this.getPoint(h/e),c+=r.distanceTo(o),t.push(c),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const c=r.length;let h;h=t||e*r[c-1];let v,f=0,m=c-1;for(;f<=m;)if(o=Math.floor(f+(m-f)/2),v=r[o]-h,v<0)f=o+1;else{if(!(v>0)){m=o;break}m=o-1}if(o=m,r[o]===h)return o/(c-1);const M=r[o];return(o+(h-M)/(r[o+1]-M))/(c-1)}getTangent(e,t){const r=1e-4;let o=e-r,c=e+r;o<0&&(o=0),c>1&&(c=1);const h=this.getPoint(o),f=this.getPoint(c),m=t||(h.isVector2?new yt:new re);return m.copy(f).sub(h).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new re,o=[],c=[],h=[],f=new re,m=new Qt;for(let D=0;D<=e;D++)o[D]=this.getTangentAt(D/e,new re);c[0]=new re,h[0]=new re;let v=Number.MAX_VALUE;const M=Math.abs(o[0].x),w=Math.abs(o[0].y),C=Math.abs(o[0].z);M<=v&&(v=M,r.set(1,0,0)),w<=v&&(v=w,r.set(0,1,0)),C<=v&&r.set(0,0,1),f.crossVectors(o[0],r).normalize(),c[0].crossVectors(o[0],f),h[0].crossVectors(o[0],c[0]);for(let D=1;D<=e;D++){if(c[D]=c[D-1].clone(),h[D]=h[D-1].clone(),f.crossVectors(o[D-1],o[D]),f.length()>Number.EPSILON){f.normalize();const N=Math.acos(at(o[D-1].dot(o[D]),-1,1));c[D].applyMatrix4(m.makeRotationAxis(f,N))}h[D].crossVectors(o[D],c[D])}if(!0===t){let D=Math.acos(at(c[0].dot(c[e]),-1,1));D/=e,o[0].dot(f.crossVectors(c[0],c[e]))>0&&(D=-D);for(let N=1;N<=e;N++)c[N].applyMatrix4(m.makeRotationAxis(o[N],D*N)),h[N].crossVectors(o[N],c[N])}return{tangents:o,normals:c,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oh extends na{constructor(e=0,t=0,r=1,o=1,c=0,h=2*Math.PI,f=!1,m=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=c,this.aEndAngle=h,this.aClockwise=f,this.aRotation=m}getPoint(e,t){const r=t||new yt,o=2*Math.PI;let c=this.aEndAngle-this.aStartAngle;const h=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=o;for(;c>o;)c-=o;c<Number.EPSILON&&(c=h?0:o),!0===this.aClockwise&&!h&&(c===o?c=-o:c-=o);const f=this.aStartAngle+e*c;let m=this.aX+this.xRadius*Math.cos(f),v=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){const M=Math.cos(this.aRotation),w=Math.sin(this.aRotation),C=m-this.aX,D=v-this.aY;m=C*M-D*w+this.aX,v=C*w+D*M+this.aY}return r.set(m,v)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}oh.prototype.isEllipseCurve=!0;class zg extends oh{constructor(e,t,r,o,c,h){super(e,t,r,r,o,c,h),this.type="ArcCurve"}}function Nf(){let d=0,e=0,t=0,r=0;function o(c,h,f,m){d=c,e=f,t=-3*c+3*h-2*f-m,r=2*c-2*h+f+m}return{initCatmullRom:function(c,h,f,m,v){o(h,f,v*(f-c),v*(m-h))},initNonuniformCatmullRom:function(c,h,f,m,v,M,w){let C=(h-c)/v-(f-c)/(v+M)+(f-h)/M,D=(f-h)/M-(m-h)/(M+w)+(m-f)/w;C*=M,D*=M,o(h,f,C,D)},calc:function(c){const h=c*c;return d+e*c+t*h+r*(h*c)}}}zg.prototype.isArcCurve=!0;const oo=new re,Ku=new Nf,ah=new Nf,lh=new Nf;class Ff extends na{constructor(e=[],t=!1,r="centripetal",o=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new re){const r=t,o=this.points,c=o.length,h=(c-(this.closed?0:1))*e;let v,M,f=Math.floor(h),m=h-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/c)+1)*c:0===m&&f===c-1&&(f=c-2,m=1),this.closed||f>0?v=o[(f-1)%c]:(oo.subVectors(o[0],o[1]).add(o[0]),v=oo);const w=o[f%c],C=o[(f+1)%c];if(this.closed||f+2<c?M=o[(f+2)%c]:(oo.subVectors(o[c-1],o[c-2]).add(o[c-1]),M=oo),"centripetal"===this.curveType||"chordal"===this.curveType){const D="chordal"===this.curveType?.5:.25;let N=Math.pow(v.distanceToSquared(w),D),H=Math.pow(w.distanceToSquared(C),D),K=Math.pow(C.distanceToSquared(M),D);H<1e-4&&(H=1),N<1e-4&&(N=H),K<1e-4&&(K=H),Ku.initNonuniformCatmullRom(v.x,w.x,C.x,M.x,N,H,K),ah.initNonuniformCatmullRom(v.y,w.y,C.y,M.y,N,H,K),lh.initNonuniformCatmullRom(v.z,w.z,C.z,M.z,N,H,K)}else"catmullrom"===this.curveType&&(Ku.initCatmullRom(v.x,w.x,C.x,M.x,this.tension),ah.initCatmullRom(v.y,w.y,C.y,M.y,this.tension),lh.initCatmullRom(v.z,w.z,C.z,M.z,this.tension));return r.set(Ku.calc(m),ah.calc(m),lh.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new re).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kf(d,e,t,r,o){const c=.5*(r-e),h=.5*(o-t),f=d*d;return(2*t-2*r+c+h)*(d*f)+(-3*t+3*r-2*c-h)*f+c*d+t}function Qu(d,e,t,r){return function T_(d,e){const t=1-d;return t*t*e}(d,e)+function A_(d,e){return 2*(1-d)*d*e}(d,t)+function D_(d,e){return d*d*e}(d,r)}function ed(d,e,t,r,o){return function Gg(d,e){const t=1-d;return t*t*t*e}(d,e)+function j0(d,e){const t=1-d;return 3*t*t*d*e}(d,t)+function Wg(d,e){return 3*(1-d)*d*d*e}(d,r)+function R_(d,e){return d*d*d*e}(d,o)}Ff.prototype.isCatmullRomCurve3=!0;class Zg extends na{constructor(e=new yt,t=new yt,r=new yt,o=new yt){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new yt){const r=t,o=this.v0,c=this.v1,h=this.v2,f=this.v3;return r.set(ed(e,o.x,c.x,h.x,f.x),ed(e,o.y,c.y,h.y,f.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Zg.prototype.isCubicBezierCurve=!0;class P_ extends na{constructor(e=new re,t=new re,r=new re,o=new re){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new re){const r=t,o=this.v0,c=this.v1,h=this.v2,f=this.v3;return r.set(ed(e,o.x,c.x,h.x,f.x),ed(e,o.y,c.y,h.y,f.y),ed(e,o.z,c.z,h.z,f.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}P_.prototype.isCubicBezierCurve3=!0;class ru extends na{constructor(e=new yt,t=new yt){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new yt){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new yt;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ru.prototype.isLineCurve=!0;class ch extends na{constructor(e=new yt,t=new yt,r=new yt){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new yt){const r=t,o=this.v0,c=this.v1,h=this.v2;return r.set(Qu(e,o.x,c.x,h.x),Qu(e,o.y,c.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ch.prototype.isQuadraticBezierCurve=!0;class uh extends na{constructor(e=new re,t=new re,r=new re){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new re){const r=t,o=this.v0,c=this.v1,h=this.v2;return r.set(Qu(e,o.x,c.x,h.x),Qu(e,o.y,c.y,h.y),Qu(e,o.z,c.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uh.prototype.isQuadraticBezierCurve3=!0;class jg extends na{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new yt){const r=t,o=this.points,c=(o.length-1)*e,h=Math.floor(c),f=c-h,m=o[0===h?h:h-1],v=o[h],M=o[h>o.length-2?o.length-1:h+1],w=o[h>o.length-3?o.length-1:h+2];return r.set(kf(f,m.x,v.x,M.x,w.x),kf(f,m.y,v.y,M.y,w.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new yt).fromArray(o))}return this}}jg.prototype.isSplineCurve=!0;var zo=Object.freeze({__proto__:null,ArcCurve:zg,CatmullRomCurve3:Ff,CubicBezierCurve:Zg,CubicBezierCurve3:P_,EllipseCurve:oh,LineCurve:ru,LineCurve3:class I_ extends na{constructor(e=new re,t=new re){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new re){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:ch,QuadraticBezierCurve3:uh,SplineCurve:jg});class q0 extends na{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ru(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let c=0;for(;c<o.length;){if(o[c]>=r){const h=o[c]-r,f=this.curves[c],m=f.getLength();return f.getPointAt(0===m?0:1-h/m,t)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,c=this.curves;o<c.length;o++){const h=c[o],m=h.getPoints(h&&h.isEllipseCurve?2*e:h&&(h.isLineCurve||h.isLineCurve3)?1:h&&h.isSplineCurve?e*h.points.length:e);for(let v=0;v<m.length;v++){const M=m[v];r&&r.equals(M)||(t.push(M),r=M)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push((new zo[o.type]).fromJSON(o))}return this}}class Uf extends q0{constructor(e){super(),this.type="Path",this.currentPoint=new yt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new ru(this.currentPoint.clone(),new yt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const c=new ch(this.currentPoint.clone(),new yt(e,t),new yt(r,o));return this.curves.push(c),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,c,h){const f=new Zg(this.currentPoint.clone(),new yt(e,t),new yt(r,o),new yt(c,h));return this.curves.push(f),this.currentPoint.set(c,h),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new jg(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,c,h){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,o,c,h),this}absarc(e,t,r,o,c,h){return this.absellipse(e,t,r,r,o,c,h),this}ellipse(e,t,r,o,c,h,f,m){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,o,c,h,f,m),this}absellipse(e,t,r,o,c,h,f,m){const v=new oh(e,t,r,o,c,h,f,m);if(this.curves.length>0){const w=v.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(v);const M=v.getPoint(1);return this.currentPoint.copy(M),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ba extends Uf{constructor(e){super(e),this.uuid=ze(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push((new Uf).fromJSON(o))}return this}}function Bf(d,e,t,r,o){let c,h;if(o===function ou(d,e,t,r){let o=0;for(let c=e,h=t-r;c<t;c+=r)o+=(d[h]-d[c])*(d[c+1]+d[h+1]),h=c;return o}(d,e,t,r)>0)for(c=e;c<t;c+=r)h=Tc(c,d[c],d[c+1],h);else for(c=t-r;c>=e;c-=r)h=Tc(c,d[c],d[c+1],h);return h&&su(h,h.next)&&(Ha(h),h=h.next),h}function Bl(d,e){if(!d)return d;e||(e=d);let r,t=d;do{if(r=!1,t.steiner||!su(t,t.next)&&0!==Pr(t.prev,t,t.next))t=t.next;else{if(Ha(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function dh(d,e,t,r,o,c,h){if(!d)return;!h&&c&&function B_(d,e,t,r){let o=d;do{null===o.z&&(o.z=Vl(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==d);o.prevZ.nextZ=null,o.prevZ=null,function hh(d){let e,t,r,o,c,h,f,m,v=1;do{for(t=d,d=null,c=null,h=0;t;){for(h++,r=t,f=0,e=0;e<v&&(f++,r=r.nextZ,r);e++);for(m=v;f>0||m>0&&r;)0!==f&&(0===m||!r||t.z<=r.z)?(o=t,t=t.nextZ,f--):(o=r,r=r.nextZ,m--),c?c.nextZ=o:d=o,o.prevZ=c,c=o;t=r}c.nextZ=null,v*=2}while(h>1)}(o)}(d,r,o,c);let m,v,f=d;for(;d.prev!==d.next;)if(m=d.prev,v=d.next,c?Vf(d,r,o,c):$g(d))e.push(m.i/t),e.push(d.i/t),e.push(v.i/t),Ha(d),d=v.next,f=v.next;else if((d=v)===f){h?1===h?dh(d=L_(Bl(d),e,t),e,t,r,o,c,2):2===h&&Hf(d,e,t,r,o,c):dh(Bl(d),e,t,r,o,c,1);break}}function $g(d){const e=d.prev,t=d,r=d.next;if(Pr(e,t,r)>=0)return!1;let o=d.next.next;for(;o!==d.prev;){if(Va(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&Pr(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function Vf(d,e,t,r){const o=d.prev,c=d,h=d.next;if(Pr(o,c,h)>=0)return!1;const v=o.x>c.x?o.x>h.x?o.x:h.x:c.x>h.x?c.x:h.x,M=o.y>c.y?o.y>h.y?o.y:h.y:c.y>h.y?c.y:h.y,w=Vl(o.x<c.x?o.x<h.x?o.x:h.x:c.x<h.x?c.x:h.x,o.y<c.y?o.y<h.y?o.y:h.y:c.y<h.y?c.y:h.y,e,t,r),C=Vl(v,M,e,t,r);let D=d.prevZ,N=d.nextZ;for(;D&&D.z>=w&&N&&N.z<=C;){if(D!==d.prev&&D!==d.next&&Va(o.x,o.y,c.x,c.y,h.x,h.y,D.x,D.y)&&Pr(D.prev,D,D.next)>=0||(D=D.prevZ,N!==d.prev&&N!==d.next&&Va(o.x,o.y,c.x,c.y,h.x,h.y,N.x,N.y)&&Pr(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;D&&D.z>=w;){if(D!==d.prev&&D!==d.next&&Va(o.x,o.y,c.x,c.y,h.x,h.y,D.x,D.y)&&Pr(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;N&&N.z<=C;){if(N!==d.prev&&N!==d.next&&Va(o.x,o.y,c.x,c.y,h.x,h.y,N.x,N.y)&&Pr(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function L_(d,e,t){let r=d;do{const o=r.prev,c=r.next.next;!su(o,c)&&fa(o,r,r.next,c)&&zl(o,c)&&zl(c,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(c.i/t),Ha(r),Ha(r.next),r=d=c),r=r.next}while(r!==d);return Bl(r)}function Hf(d,e,t,r,o,c){let h=d;do{let f=h.next.next;for(;f!==h.prev;){if(h.i!==f.i&&H_(h,f)){let m=fh(h,f);return h=Bl(h,h.next),m=Bl(m,m.next),dh(h,e,t,r,o,c),void dh(m,e,t,r,o,c)}f=f.next}h=h.next}while(h!==d)}function N_(d,e){return d.x-e.x}function F_(d,e){if(e=function k_(d,e){let t=e;const r=d.x,o=d.y;let h,c=-1/0;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const C=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(C<=r&&C>c){if(c=C,C===r){if(o===t.y)return t;if(o===t.next.y)return t.next}h=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!h)return null;if(r===c)return h;const f=h,m=h.x,v=h.y;let w,M=1/0;t=h;do{r>=t.x&&t.x>=m&&r!==t.x&&Va(o<v?r:c,o,m,v,o<v?c:r,o,t.x,t.y)&&(w=Math.abs(o-t.y)/(r-t.x),zl(t,d)&&(w<M||w===M&&(t.x>h.x||t.x===h.x&&U_(h,t)))&&(h=t,M=w)),t=t.next}while(t!==f);return h}(d,e),e){const t=fh(e,d);Bl(e,e.next),Bl(t,t.next)}}function U_(d,e){return Pr(d.prev,d,e.prev)<0&&Pr(e.next,d,d.next)<0}function Vl(d,e,t,r,o){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-t)*o)|d<<8))|d<<4))|d<<2))|d<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function V_(d){let e=d,t=d;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==d);return t}function Va(d,e,t,r,o,c,h,f){return(o-h)*(e-f)-(d-h)*(c-f)>=0&&(d-h)*(r-f)-(t-h)*(e-f)>=0&&(t-h)*(c-f)-(o-h)*(r-f)>=0}function H_(d,e){return d.next.i!==e.i&&d.prev.i!==e.i&&!function Sc(d,e){let t=d;do{if(t.i!==d.i&&t.next.i!==d.i&&t.i!==e.i&&t.next.i!==e.i&&fa(t,t.next,d,e))return!0;t=t.next}while(t!==d);return!1}(d,e)&&(zl(d,e)&&zl(e,d)&&function ia(d,e){let t=d,r=!1;const o=(d.x+e.x)/2,c=(d.y+e.y)/2;do{t.y>c!=t.next.y>c&&t.next.y!==t.y&&o<(t.next.x-t.x)*(c-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==d);return r}(d,e)&&(Pr(d.prev,d,e.prev)||Pr(d,e.prev,e))||su(d,e)&&Pr(d.prev,d,d.next)>0&&Pr(e.prev,e,e.next)>0)}function Pr(d,e,t){return(e.y-d.y)*(t.x-e.x)-(e.x-d.x)*(t.y-e.y)}function su(d,e){return d.x===e.x&&d.y===e.y}function fa(d,e,t,r){const o=vs(Pr(d,e,t)),c=vs(Pr(d,e,r)),h=vs(Pr(t,r,d)),f=vs(Pr(t,r,e));return!!(o!==c&&h!==f||0===o&&Hl(d,t,e)||0===c&&Hl(d,r,e)||0===h&&Hl(t,d,r)||0===f&&Hl(t,e,r))}function Hl(d,e,t){return e.x<=Math.max(d.x,t.x)&&e.x>=Math.min(d.x,t.x)&&e.y<=Math.max(d.y,t.y)&&e.y>=Math.min(d.y,t.y)}function vs(d){return d>0?1:d<0?-1:0}function zl(d,e){return Pr(d.prev,d,d.next)<0?Pr(d,e,d.next)>=0&&Pr(d,d.prev,e)>=0:Pr(d,e,d.prev)<0||Pr(d,d.next,e)<0}function fh(d,e){const t=new Gl(d.i,d.x,d.y),r=new Gl(e.i,e.x,e.y),o=d.next,c=e.prev;return d.next=e,e.prev=d,t.next=o,o.prev=t,r.next=t,t.prev=r,c.next=r,r.prev=c,r}function Tc(d,e,t,r){const o=new Gl(d,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function Ha(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Gl(d,e,t){this.i=d,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bo{static area(e){const t=e.length;let r=0;for(let o=t-1,c=0;c<t;o=c++)r+=e[o].x*e[c].y-e[c].x*e[o].y;return.5*r}static isClockWise(e){return bo.area(e)<0}static triangulateShape(e,t){const r=[],o=[],c=[];Ac(e),Dc(r,e);let h=e.length;t.forEach(Ac);for(let m=0;m<t.length;m++)o.push(h),h+=t[m].length,Dc(r,t[m]);const f=function(d,e,t=2){const r=e&&e.length,o=r?e[0]*t:d.length;let c=Bf(d,0,o,t,!0);const h=[];if(!c||c.next===c.prev)return h;let f,m,v,M,w,C,D;if(r&&(c=function O_(d,e,t,r){const o=[];let c,h,f,m,v;for(c=0,h=e.length;c<h;c++)f=e[c]*r,m=c<h-1?e[c+1]*r:d.length,v=Bf(d,f,m,r,!1),v===v.next&&(v.steiner=!0),o.push(V_(v));for(o.sort(N_),c=0;c<o.length;c++)F_(o[c],t),t=Bl(t,t.next);return t}(d,e,c,t)),d.length>80*t){f=v=d[0],m=M=d[1];for(let N=t;N<o;N+=t)w=d[N],C=d[N+1],w<f&&(f=w),C<m&&(m=C),w>v&&(v=w),C>M&&(M=C);D=Math.max(v-f,M-m),D=0!==D?1/D:0}return dh(c,h,t,f,m,D),h}(r,o);for(let m=0;m<f.length;m+=3)c.push(f.slice(m,m+3));return c}}function Ac(d){const e=d.length;e>2&&d[e-1].equals(d[0])&&d.pop()}function Dc(d,e){for(let t=0;t<e.length;t++)d.push(e[t].x),d.push(e[t].y)}class Go extends Rn{constructor(e=new Ba([new yt(.5,.5),new yt(-.5,.5),new yt(-.5,-.5),new yt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],c=[];for(let f=0,m=e.length;f<m;f++)h(e[f]);function h(f){const m=[],v=void 0!==t.curveSegments?t.curveSegments:12,M=void 0!==t.steps?t.steps:1;let w=void 0!==t.depth?t.depth:1,C=void 0===t.bevelEnabled||t.bevelEnabled,D=void 0!==t.bevelThickness?t.bevelThickness:.2,N=void 0!==t.bevelSize?t.bevelSize:D-.1,H=void 0!==t.bevelOffset?t.bevelOffset:0,K=void 0!==t.bevelSegments?t.bevelSegments:3;const U=t.extrudePath,P=void 0!==t.UVGenerator?t.UVGenerator:au;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),w=t.amount);let ie,le,me,be,Le,$=!1;U&&(ie=U.getSpacedPoints(M),$=!0,C=!1,le=U.computeFrenetFrames(M,!1),me=new re,be=new re,Le=new re),C||(K=0,D=0,N=0,H=0);const lt=f.extractPoints(v);let Ye=lt.shape;const te=lt.holes;if(!bo.isClockWise(Ye)){Ye=Ye.reverse();for(let xt=0,Wt=te.length;xt<Wt;xt++){const Vt=te[xt];bo.isClockWise(Vt)&&(te[xt]=Vt.reverse())}}const He=bo.triangulateShape(Ye,te),je=Ye;for(let xt=0,Wt=te.length;xt<Wt;xt++)Ye=Ye.concat(te[xt]);function Je(xt,Wt,Vt){return Wt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Wt.clone().multiplyScalar(Vt).add(xt)}const Ze=Ye.length,vt=He.length;function Dt(xt,Wt,Vt){let ln,Kt,Wn;const Zn=xt.x-Wt.x,Di=xt.y-Wt.y,fr=Vt.x-xt.x,tr=Vt.y-xt.y,ye=Zn*Zn+Di*Di;if(Math.abs(Zn*tr-Di*fr)>Number.EPSILON){const _t=Math.sqrt(ye),zt=Math.sqrt(fr*fr+tr*tr),Mn=Wt.x-Di/_t,pt=Wt.y+Zn/_t,en=((Vt.x-tr/zt-Mn)*tr-(Vt.y+fr/zt-pt)*fr)/(Zn*tr-Di*fr);ln=Mn+Zn*en-xt.x,Kt=pt+Di*en-xt.y;const Yt=ln*ln+Kt*Kt;if(Yt<=2)return new yt(ln,Kt);Wn=Math.sqrt(Yt/2)}else{let _t=!1;Zn>Number.EPSILON?fr>Number.EPSILON&&(_t=!0):Zn<-Number.EPSILON?fr<-Number.EPSILON&&(_t=!0):Math.sign(Di)===Math.sign(tr)&&(_t=!0),_t?(ln=-Di,Kt=Zn,Wn=Math.sqrt(ye)):(ln=Zn,Kt=Di,Wn=Math.sqrt(ye/2))}return new yt(ln/Wn,Kt/Wn)}const gn=[];for(let xt=0,Wt=je.length,Vt=Wt-1,ln=xt+1;xt<Wt;xt++,Vt++,ln++)Vt===Wt&&(Vt=0),ln===Wt&&(ln=0),gn[xt]=Dt(je[xt],je[Vt],je[ln]);const gt=[];let Et,$t=gn.concat();for(let xt=0,Wt=te.length;xt<Wt;xt++){const Vt=te[xt];Et=[];for(let ln=0,Kt=Vt.length,Wn=Kt-1,Zn=ln+1;ln<Kt;ln++,Wn++,Zn++)Wn===Kt&&(Wn=0),Zn===Kt&&(Zn=0),Et[ln]=Dt(Vt[ln],Vt[Wn],Vt[Zn]);gt.push(Et),$t=$t.concat(Et)}for(let xt=0;xt<K;xt++){const Wt=xt/K,Vt=D*Math.cos(Wt*Math.PI/2),ln=N*Math.sin(Wt*Math.PI/2)+H;for(let Kt=0,Wn=je.length;Kt<Wn;Kt++){const Zn=Je(je[Kt],gn[Kt],ln);wn(Zn.x,Zn.y,-Vt)}for(let Kt=0,Wn=te.length;Kt<Wn;Kt++){const Zn=te[Kt];Et=gt[Kt];for(let Di=0,fr=Zn.length;Di<fr;Di++){const tr=Je(Zn[Di],Et[Di],ln);wn(tr.x,tr.y,-Vt)}}}const mn=N+H;for(let xt=0;xt<Ze;xt++){const Wt=C?Je(Ye[xt],$t[xt],mn):Ye[xt];$?(be.copy(le.normals[0]).multiplyScalar(Wt.x),me.copy(le.binormals[0]).multiplyScalar(Wt.y),Le.copy(ie[0]).add(be).add(me),wn(Le.x,Le.y,Le.z)):wn(Wt.x,Wt.y,0)}for(let xt=1;xt<=M;xt++)for(let Wt=0;Wt<Ze;Wt++){const Vt=C?Je(Ye[Wt],$t[Wt],mn):Ye[Wt];$?(be.copy(le.normals[xt]).multiplyScalar(Vt.x),me.copy(le.binormals[xt]).multiplyScalar(Vt.y),Le.copy(ie[xt]).add(be).add(me),wn(Le.x,Le.y,Le.z)):wn(Vt.x,Vt.y,w/M*xt)}for(let xt=K-1;xt>=0;xt--){const Wt=xt/K,Vt=D*Math.cos(Wt*Math.PI/2),ln=N*Math.sin(Wt*Math.PI/2)+H;for(let Kt=0,Wn=je.length;Kt<Wn;Kt++){const Zn=Je(je[Kt],gn[Kt],ln);wn(Zn.x,Zn.y,w+Vt)}for(let Kt=0,Wn=te.length;Kt<Wn;Kt++){const Zn=te[Kt];Et=gt[Kt];for(let Di=0,fr=Zn.length;Di<fr;Di++){const tr=Je(Zn[Di],Et[Di],ln);$?wn(tr.x,tr.y+ie[M-1].y,ie[M-1].x+Vt):wn(tr.x,tr.y,w+Vt)}}}function zi(xt,Wt){let Vt=xt.length;for(;--Vt>=0;){const ln=Vt;let Kt=Vt-1;Kt<0&&(Kt=xt.length-1);for(let Wn=0,Zn=M+2*K;Wn<Zn;Wn++){const Di=Ze*Wn,fr=Ze*(Wn+1);sn(Wt+ln+Di,Wt+Kt+Di,Wt+Kt+fr,Wt+ln+fr)}}}function wn(xt,Wt,Vt){m.push(xt),m.push(Wt),m.push(Vt)}function jn(xt,Wt,Vt){di(xt),di(Wt),di(Vt);const ln=o.length/3,Kt=P.generateTopUV(r,o,ln-3,ln-2,ln-1);Gn(Kt[0]),Gn(Kt[1]),Gn(Kt[2])}function sn(xt,Wt,Vt,ln){di(xt),di(Wt),di(ln),di(Wt),di(Vt),di(ln);const Kt=o.length/3,Wn=P.generateSideWallUV(r,o,Kt-6,Kt-3,Kt-2,Kt-1);Gn(Wn[0]),Gn(Wn[1]),Gn(Wn[3]),Gn(Wn[1]),Gn(Wn[2]),Gn(Wn[3])}function di(xt){o.push(m[3*xt+0]),o.push(m[3*xt+1]),o.push(m[3*xt+2])}function Gn(xt){c.push(xt.x),c.push(xt.y)}(function Sn(){const xt=o.length/3;if(C){let Wt=0,Vt=Ze*Wt;for(let ln=0;ln<vt;ln++){const Kt=He[ln];jn(Kt[2]+Vt,Kt[1]+Vt,Kt[0]+Vt)}Wt=M+2*K,Vt=Ze*Wt;for(let ln=0;ln<vt;ln++){const Kt=He[ln];jn(Kt[0]+Vt,Kt[1]+Vt,Kt[2]+Vt)}}else{for(let Wt=0;Wt<vt;Wt++){const Vt=He[Wt];jn(Vt[2],Vt[1],Vt[0])}for(let Wt=0;Wt<vt;Wt++){const Vt=He[Wt];jn(Vt[0]+Ze*M,Vt[1]+Ze*M,Vt[2]+Ze*M)}}r.addGroup(xt,o.length/3-xt,0)})(),function ct(){const xt=o.length/3;let Wt=0;zi(je,Wt),Wt+=je.length;for(let Vt=0,ln=te.length;Vt<ln;Vt++){const Kt=te[Vt];zi(Kt,Wt),Wt+=Kt.length}r.addGroup(xt,o.length/3-xt,1)}()}this.setAttribute("position",new tn(o,3)),this.setAttribute("uv",new tn(c,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Yg(d,e,t){if(t.shapes=[],Array.isArray(d))for(let r=0,o=d.length;r<o;r++)t.shapes.push(d[r].uuid);else t.shapes.push(d.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let c=0,h=e.shapes.length;c<h;c++)r.push(t[e.shapes[c]]);const o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new zo[o.type]).fromJSON(o)),new Go(r,e.options)}}const au={generateTopUV:function(d,e,t,r,o){const f=e[3*r],m=e[3*r+1],v=e[3*o],M=e[3*o+1];return[new yt(e[3*t],e[3*t+1]),new yt(f,m),new yt(v,M)]},generateSideWallUV:function(d,e,t,r,o,c){const h=e[3*t],f=e[3*t+1],m=e[3*t+2],v=e[3*r],M=e[3*r+1],w=e[3*r+2],C=e[3*o],D=e[3*o+1],N=e[3*o+2],H=e[3*c],K=e[3*c+1],U=e[3*c+2];return Math.abs(f-M)<Math.abs(h-v)?[new yt(h,1-m),new yt(v,1-w),new yt(C,1-N),new yt(H,1-U)]:[new yt(f,1-m),new yt(M,1-w),new yt(D,1-N),new yt(K,1-U)]}};class cu extends Rn{constructor(e=new Ba([new yt(0,.5),new yt(-.5,-.5),new yt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],c=[],h=[];let f=0,m=0;if(!1===Array.isArray(e))v(e);else for(let M=0;M<e.length;M++)v(e[M]),this.addGroup(f,m,M),f+=m,m=0;function v(M){const w=o.length/3,C=M.extractPoints(t);let D=C.shape;const N=C.holes;!1===bo.isClockWise(D)&&(D=D.reverse());for(let K=0,U=N.length;K<U;K++){const P=N[K];!0===bo.isClockWise(P)&&(N[K]=P.reverse())}const H=bo.triangulateShape(D,N);for(let K=0,U=N.length;K<U;K++)D=D.concat(N[K]);for(let K=0,U=D.length;K<U;K++){const P=D[K];o.push(P.x,P.y,0),c.push(0,0,1),h.push(P.x,P.y)}for(let K=0,U=H.length;K<U;K++){const P=H[K];r.push(P[0]+w,P[1]+w,P[2]+w),m+=3}}this.setIndex(r),this.setAttribute("position",new tn(o,3)),this.setAttribute("normal",new tn(c,3)),this.setAttribute("uv",new tn(h,2))}toJSON(){const e=super.toJSON();return function Jg(d,e){if(e.shapes=[],Array.isArray(d))for(let t=0,r=d.length;t<r;t++)e.shapes.push(d[t].uuid);else e.shapes.push(d.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let o=0,c=e.shapes.length;o<c;o++)r.push(t[e.shapes[o]]);return new cu(r,e.curveSegments)}}(class Kg extends En{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class od extends En{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Es,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}od.prototype.isMeshStandardMaterial=!0;class Wf extends od{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new yt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return at(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ht(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Wf.prototype.isMeshPhysicalMaterial=!0;(class Zf extends En{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Es,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class Qg extends En{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Es,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;class jf extends En{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Es,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}jf.prototype.isMeshNormalMaterial=!0;(class z_ extends En{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class em extends En{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Es,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class mh extends ss{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Er={arraySlice:function(d,e,t){return Er.isTypedArray(d)?new d.constructor(d.subarray(e,void 0!==t?t:d.length)):d.slice(e,t)},convertArray:function(d,e,t){return!d||!t&&d.constructor===e?d:"number"==typeof e.BYTES_PER_ELEMENT?new e(d):Array.prototype.slice.call(d)},isTypedArray:function(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)},getKeyframeOrder:function(d){const t=d.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(function e(o,c){return d[o]-d[c]}),r},sortedArray:function(d,e,t){const r=d.length,o=new d.constructor(r);for(let c=0,h=0;h!==r;++c){const f=t[c]*e;for(let m=0;m!==e;++m)o[h++]=d[f+m]}return o},flattenJSON:function(d,e,t,r){let o=1,c=d[0];for(;void 0!==c&&void 0===c[r];)c=d[o++];if(void 0===c)return;let h=c[r];if(void 0!==h)if(Array.isArray(h))do{h=c[r],void 0!==h&&(e.push(c.time),t.push.apply(t,h)),c=d[o++]}while(void 0!==c);else if(void 0!==h.toArray)do{h=c[r],void 0!==h&&(e.push(c.time),h.toArray(t,t.length)),c=d[o++]}while(void 0!==c);else do{h=c[r],void 0!==h&&(e.push(c.time),t.push(h)),c=d[o++]}while(void 0!==c)},subclip:function(d,e,t,r,o=30){const c=d.clone();c.name=e;const h=[];for(let m=0;m<c.tracks.length;++m){const v=c.tracks[m],M=v.getValueSize(),w=[],C=[];for(let D=0;D<v.times.length;++D){const N=v.times[D]*o;if(!(N<t||N>=r)){w.push(v.times[D]);for(let H=0;H<M;++H)C.push(v.values[D*M+H])}}0!==w.length&&(v.times=Er.convertArray(w,v.times.constructor),v.values=Er.convertArray(C,v.values.constructor),h.push(v))}c.tracks=h;let f=1/0;for(let m=0;m<c.tracks.length;++m)f>c.tracks[m].times[0]&&(f=c.tracks[m].times[0]);for(let m=0;m<c.tracks.length;++m)c.tracks[m].shift(-1*f);return c.resetDuration(),c},makeClipAdditive:function(d,e=0,t=d,r=30){r<=0&&(r=30);const o=t.tracks.length,c=e/r;for(let h=0;h<o;++h){const f=t.tracks[h],m=f.ValueTypeName;if("bool"===m||"string"===m)continue;const v=d.tracks.find(function(U){return U.name===f.name&&U.ValueTypeName===m});if(void 0===v)continue;let M=0;const w=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(M=w/3);let C=0;const D=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(C=D/3);const N=f.times.length-1;let H;if(c<=f.times[0])H=Er.arraySlice(f.values,M,w-M);else if(c>=f.times[N]){const U=N*w+M;H=Er.arraySlice(f.values,U,U+w-M)}else{const U=f.createInterpolant(),P=M,ie=w-M;U.evaluate(c),H=Er.arraySlice(U.resultBuffer,P,ie)}"quaternion"===m&&(new Wr).fromArray(H).normalize().conjugate().toArray(H);const K=v.times.length;for(let U=0;U<K;++U){const P=U*D+C;if("quaternion"===m)Wr.multiplyQuaternionsFlat(v.values,P,H,0,v.values,P);else{const ie=D-2*C;for(let $=0;$<ie;++$)v.values[P+$]-=H[$]}}}return d.blendMode=2501,d}};class Wl{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],c=t[r-1];e:{t:{let h;n:{i:if(!(e<o)){for(let f=r+2;;){if(void 0===o){if(e<c)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,c)}if(r===f)break;if(c=o,o=t[++r],e<o)break t}h=t.length;break n}if(e>=c)break e;{const f=t[1];e<f&&(r=2,c=f);for(let m=r-2;;){if(void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=c,c=t[--r-1],e>=c)break t}h=r,r=0}}for(;r<h;){const f=r+h>>>1;e<t[f]?h=f:r=f+1}if(o=t[r],c=t[r-1],void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(void 0===o)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,c,e)}this._cachedIndex=r,this.intervalChanged_(r,c,o)}return this.interpolate_(r,c,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=e*o;for(let h=0;h!==o;++h)t[h]=r[c+h];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Wl.prototype.beforeStart_=Wl.prototype.copySampleValue_,Wl.prototype.afterEnd_=Wl.prototype.copySampleValue_;class $0 extends Wl{constructor(e,t,r,o){super(e,t,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:j,endingEnd:j}}intervalChanged_(e,t,r){const o=this.parameterPositions;let c=e-2,h=e+1,f=o[c],m=o[h];if(void 0===f)switch(this.getSettings_().endingStart){case ne:c=e,f=2*t-r;break;case 2402:c=o.length-2,f=t+o[c]-o[c+1];break;default:c=e,f=r}if(void 0===m)switch(this.getSettings_().endingEnd){case ne:h=e,m=2*r-t;break;case 2402:h=1,m=r+o[1]-o[0];break;default:h=e-1,m=t}const v=.5*(r-t),M=this.valueSize;this._weightPrev=v/(t-f),this._weightNext=v/(m-r),this._offsetPrev=c*M,this._offsetNext=h*M}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=e*f,v=m-f,M=this._offsetPrev,w=this._offsetNext,C=this._weightPrev,D=this._weightNext,N=(r-t)/(o-t),H=N*N,K=H*N,U=-C*K+2*C*H-C*N,P=(1+C)*K+(-1.5-2*C)*H+(-.5+C)*N+1,ie=(-1-D)*K+(1.5+D)*H+.5*N,$=D*K-D*H;for(let le=0;le!==f;++le)c[le]=U*h[M+le]+P*h[v+le]+ie*h[m+le]+$*h[w+le];return c}}class G_ extends Wl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=e*f,v=m-f,M=(r-t)/(o-t),w=1-M;for(let C=0;C!==f;++C)c[C]=h[v+C]*w+h[m+C]*M;return c}}class W_ extends Wl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class pa{constructor(e,t,r,o){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Er.convertArray(t,this.TimeBufferType),this.values=Er.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Er.convertArray(e.times,Array),values:Er.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new W_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new G_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $0(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ms:t=this.InterpolantFactoryMethodDiscrete;break;case us:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ms;case this.InterpolantFactoryMethodLinear:return us;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let c=0,h=o-1;for(;c!==o&&r[c]<e;)++c;for(;-1!==h&&r[h]>t;)--h;if(++h,0!==c||h!==o){c>=h&&(h=Math.max(h,1),c=h-1);const f=this.getValueSize();this.times=Er.arraySlice(r,c,h),this.values=Er.arraySlice(this.values,c*f,h*f)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,c=r.length;0===c&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let h=null;for(let f=0;f!==c;f++){const m=r[f];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,m),e=!1;break}if(null!==h&&h>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,m,h),e=!1;break}h=m}if(void 0!==o&&Er.isTypedArray(o))for(let f=0,m=o.length;f!==m;++f){const v=o[f];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,v),e=!1;break}}return e}optimize(){const e=Er.arraySlice(this.times),t=Er.arraySlice(this.values),r=this.getValueSize(),o=2302===this.getInterpolation(),c=e.length-1;let h=1;for(let f=1;f<c;++f){let m=!1;const v=e[f];if(v!==e[f+1]&&(1!==f||v!==e[0]))if(o)m=!0;else{const w=f*r,C=w-r,D=w+r;for(let N=0;N!==r;++N){const H=t[w+N];if(H!==t[C+N]||H!==t[D+N]){m=!0;break}}}if(m){if(f!==h){e[h]=e[f];const w=f*r,C=h*r;for(let D=0;D!==r;++D)t[C+D]=t[w+D]}++h}}if(c>0){e[h]=e[c];for(let f=c*r,m=h*r,v=0;v!==r;++v)t[m+v]=t[f+v];++h}return h!==e.length?(this.times=Er.arraySlice(e,0,h),this.values=Er.arraySlice(t,0,h*r)):(this.times=e,this.values=t),this}clone(){const e=Er.arraySlice(this.times,0),t=Er.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}pa.prototype.TimeBufferType=Float32Array,pa.prototype.ValueBufferType=Float32Array,pa.prototype.DefaultInterpolation=us;class ad extends pa{}ad.prototype.ValueTypeName="bool",ad.prototype.ValueBufferType=Array,ad.prototype.DefaultInterpolation=Ms,ad.prototype.InterpolantFactoryMethodLinear=void 0,ad.prototype.InterpolantFactoryMethodSmooth=void 0;class tm extends pa{}tm.prototype.ValueTypeName="color";class za extends pa{}za.prototype.ValueTypeName="number";class Z_ extends Wl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=(r-t)/(o-t);let v=e*f;for(let M=v+f;v!==M;v+=4)Wr.slerpFlat(c,0,h,v-f,h,v,m);return c}}class Rc extends pa{InterpolantFactoryMethodLinear(e){return new Z_(this.times,this.values,this.getValueSize(),e)}}Rc.prototype.ValueTypeName="quaternion",Rc.prototype.DefaultInterpolation=us,Rc.prototype.InterpolantFactoryMethodSmooth=void 0;class du extends pa{}du.prototype.ValueTypeName="string",du.prototype.ValueBufferType=Array,du.prototype.DefaultInterpolation=Ms,du.prototype.InterpolantFactoryMethodLinear=void 0,du.prototype.InterpolantFactoryMethodSmooth=void 0;class hu extends pa{}hu.prototype.ValueTypeName="vector";class Zl{constructor(e,t=-1,r,o=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=ze(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let h=0,f=r.length;h!==f;++h)t.push(nm(r[h]).scale(o));const c=new this(e.name,e.duration,t,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,h=r.length;c!==h;++c)t.push(pa.toJSON(r[c]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const c=t.length,h=[];for(let f=0;f<c;f++){let m=[],v=[];m.push((f+c-1)%c,f,(f+1)%c),v.push(0,1,0);const M=Er.getKeyframeOrder(m);m=Er.sortedArray(m,1,M),v=Er.sortedArray(v,1,M),!o&&0===m[0]&&(m.push(c),v.push(v[0])),h.push(new za(".morphTargetInfluences["+t[f].name+"]",m,v).scale(1/r))}return new this(e,-1,h)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},c=/^([\w-]*?)([\d]+)$/;for(let f=0,m=e.length;f<m;f++){const v=e[f],M=v.name.match(c);if(M&&M.length>1){const w=M[1];let C=o[w];C||(o[w]=C=[]),C.push(v)}}const h=[];for(const f in o)h.push(this.CreateFromMorphTargetSequence(f,o[f],t,r));return h}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(w,C,D,N,H){if(0!==D.length){const K=[],U=[];Er.flattenJSON(D,K,U,N),0!==K.length&&H.push(new w(C,K,U))}},o=[],c=e.name||"default",h=e.fps||30,f=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let w=0;w<v.length;w++){const C=v[w].keys;if(C&&0!==C.length)if(C[0].morphTargets){const D={};let N;for(N=0;N<C.length;N++)if(C[N].morphTargets)for(let H=0;H<C[N].morphTargets.length;H++)D[C[N].morphTargets[H]]=-1;for(const H in D){const K=[],U=[];for(let P=0;P!==C[N].morphTargets.length;++P){const ie=C[N];K.push(ie.time),U.push(ie.morphTarget===H?1:0)}o.push(new za(".morphTargetInfluence["+H+"]",K,U))}m=D.length*(h||1)}else{const D=".bones["+t[w].name+"]";r(hu,D+".position",C,"pos",o),r(Rc,D+".quaternion",C,"rot",o),r(hu,D+".scale",C,"scl",o)}}return 0===o.length?null:new this(c,m,o,f)}resetDuration(){let t=0;for(let r=0,o=this.tracks.length;r!==o;++r){const c=this.tracks[r];t=Math.max(t,c.times[c.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nm(d){if(void 0===d.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function j_(d){switch(d.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return za;case"vector":case"vector2":case"vector3":case"vector4":return hu;case"color":return tm;case"quaternion":return Rc;case"bool":case"boolean":return ad;case"string":return du}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+d)}(d.type);if(void 0===d.times){const t=[],r=[];Er.flattenJSON(d.keys,t,r,"value"),d.times=t,d.values=r}return void 0!==e.parse?e.parse(d):new e(d.name,d.times,d.values,d.interpolation)}const fu={enabled:!1,files:{},add:function(d,e){!1!==this.enabled&&(this.files[d]=e)},get:function(d){if(!1!==this.enabled)return this.files[d]},remove:function(d){delete this.files[d]},clear:function(){this.files={}}};const rm=new class im{constructor(e,t,r){const o=this;let m,c=!1,h=0,f=0;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(M){f++,!1===c&&void 0!==o.onStart&&o.onStart(M,h,f),c=!0},this.itemEnd=function(M){h++,void 0!==o.onProgress&&o.onProgress(M,h,f),h===f&&(c=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(M){void 0!==o.onError&&o.onError(M)},this.resolveURL=function(M){return m?m(M):M},this.setURLModifier=function(M){return m=M,this},this.addHandler=function(M,w){return v.push(M,w),this},this.removeHandler=function(M){const w=v.indexOf(M);return-1!==w&&v.splice(w,2),this},this.getHandler=function(M){for(let w=0,C=v.length;w<C;w+=2){const D=v[w],N=v[w+1];if(D.global&&(D.lastIndex=0),D.test(M))return N}return null}}};class ml{constructor(e){this.manager=void 0!==e?e:rm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,c){r.load(e,o,t,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const vl={};class ga extends ml{constructor(e){super(e)}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=fu.get(e);if(void 0!==c)return this.manager.itemStart(e),setTimeout(()=>{t&&t(c),this.manager.itemEnd(e)},0),c;if(void 0!==vl[e])return void vl[e].push({onLoad:t,onProgress:r,onError:o});vl[e]=[],vl[e].push({onLoad:t,onProgress:r,onError:o});const h=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,m=this.responseType;fetch(h).then(v=>{if(200===v.status||0===v.status){if(0===v.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===v.body.getReader)return v;const M=vl[e],w=v.body.getReader(),C=v.headers.get("Content-Length"),D=C?parseInt(C):0,N=0!==D;let H=0;const K=new ReadableStream({start(U){!function P(){w.read().then(({done:ie,value:$})=>{if(ie)U.close();else{H+=$.byteLength;const le=new ProgressEvent("progress",{lengthComputable:N,loaded:H,total:D});for(let me=0,be=M.length;me<be;me++){const Le=M[me];Le.onProgress&&Le.onProgress(le)}U.enqueue($),P()}})}()}});return new Response(K)}throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(M=>(new DOMParser).parseFromString(M,f));case"json":return v.json();default:if(void 0===f)return v.text();{const w=/charset="?([^;"\s]*)"?/i.exec(f),C=w&&w[1]?w[1].toLowerCase():void 0,D=new TextDecoder(C);return v.arrayBuffer().then(N=>D.decode(N))}}}).then(v=>{fu.add(e,v);const M=vl[e];delete vl[e];for(let w=0,C=M.length;w<C;w++){const D=M[w];D.onLoad&&D.onLoad(v)}}).catch(v=>{const M=vl[e];if(void 0===M)throw this.manager.itemError(e),v;delete vl[e];for(let w=0,C=M.length;w<C;w++){const D=M[w];D.onError&&D.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ld extends ml{constructor(e){super(e)}load(e,t,r,o){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=fu.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const f=El("img");function m(){M(),fu.add(e,this),t&&t(this),c.manager.itemEnd(e)}function v(w){M(),o&&o(w),c.manager.itemError(e),c.manager.itemEnd(e)}function M(){f.removeEventListener("load",m,!1),f.removeEventListener("error",v,!1)}return f.addEventListener("load",m,!1),f.addEventListener("error",v,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),c.manager.itemStart(e),f.src=e,f}}class $f extends ml{constructor(e){super(e)}load(e,t,r,o){const c=new x,h=new ld(this.manager);h.setCrossOrigin(this.crossOrigin),h.setPath(this.path);let f=0;function m(v){h.load(e[v],function(M){c.images[v]=M,f++,6===f&&(c.needsUpdate=!0,t&&t(c))},void 0,o)}for(let v=0;v<e.length;++v)m(v);return c}}class vh extends ml{constructor(e){super(e)}load(e,t,r,o){const c=new Ar,h=new ld(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(e,function(f){c.image=f,c.needsUpdate=!0,void 0!==t&&t(c)},r,o),c}}class Ga extends yi{constructor(e,t=1){super(),this.type="Light",this.color=new Ht(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ga.prototype.isLight=!0;class sm extends Ga{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.groundColor=new Ht(t)}copy(e){return Ga.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}sm.prototype.isHemisphereLight=!0;const pu=new Qt,Yf=new re,_h=new re;class cd{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ln,this._frameExtents=new yt(1,1),this._viewportCount=1,this._viewports=[new Mi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Yf.setFromMatrixPosition(e.matrixWorld),t.position.copy(Yf),_h.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_h),t.updateMatrixWorld(),pu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pu),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class om extends cd{constructor(){super(new Zr(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*xe*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,c=e.distance||t.far;(r!==t.fov||o!==t.aspect||c!==t.far)&&(t.fov=r,t.aspect=o,t.far=c,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}om.prototype.isSpotLightShadow=!0;class ud extends Ga{constructor(e,t,r=0,o=Math.PI/3,c=0,h=1){super(e,t),this.type="SpotLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.distance=r,this.angle=o,this.penumbra=c,this.decay=h,this.shadow=new om}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}ud.prototype.isSpotLight=!0;const yh=new Qt,gu=new re,am=new re;class lm extends cd{constructor(){super(new Zr(90,1,.5,500)),this._frameExtents=new yt(4,2),this._viewportCount=6,this._viewports=[new Mi(2,1,1,1),new Mi(0,1,1,1),new Mi(3,1,1,1),new Mi(1,1,1,1),new Mi(3,0,1,1),new Mi(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,c=e.distance||r.far;c!==r.far&&(r.far=c,r.updateProjectionMatrix()),gu.setFromMatrixPosition(e.matrixWorld),r.position.copy(gu),am.copy(r.position),am.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(am),r.updateMatrixWorld(),o.makeTranslation(-gu.x,-gu.y,-gu.z),yh.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yh)}}lm.prototype.isPointLightShadow=!0;class xh extends Ga{constructor(e,t,r=0,o=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new lm}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}xh.prototype.isPointLight=!0;class Jf extends cd{constructor(){super(new Nd(-5,5,5,-5,.5,500))}}Jf.prototype.isDirectionalLightShadow=!0;class Xf extends Ga{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(yi.DefaultUp),this.updateMatrix(),this.target=new yi,this.shadow=new Jf}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Xf.prototype.isDirectionalLight=!0;(class Kf extends Ga{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class bh extends Ga{constructor(e,t,r=10,o=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class Qf{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.282095),t.addScaledVector(h[1],.488603*o),t.addScaledVector(h[2],.488603*c),t.addScaledVector(h[3],.488603*r),t.addScaledVector(h[4],r*o*1.092548),t.addScaledVector(h[5],o*c*1.092548),t.addScaledVector(h[6],.315392*(3*c*c-1)),t.addScaledVector(h[7],r*c*1.092548),t.addScaledVector(h[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.886227),t.addScaledVector(h[1],1.023328*o),t.addScaledVector(h[2],1.023328*c),t.addScaledVector(h[3],1.023328*r),t.addScaledVector(h[4],.858086*r*o),t.addScaledVector(h[5],.858086*o*c),t.addScaledVector(h[6],.743125*c*c-.247708),t.addScaledVector(h[7],.858086*r*c),t.addScaledVector(h[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+3*o);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+3*o);return e}static getBasisAt(e,t){const r=e.x,o=e.y,c=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*c,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*c,t[6]=.315392*(3*c*c-1),t[7]=1.092548*r*c,t[8]=.546274*(r*r-o*o)}}Qf.prototype.isSphericalHarmonics3=!0;class dd extends Ga{constructor(e=new Qf,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}dd.prototype.isLightProbe=!0;class hd{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}(class cm extends Rn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;class ip extends ml{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=fu.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const f={};f.credentials="anonymous"===this.crossOrigin?"same-origin":"include",f.headers=this.requestHeader,fetch(e,f).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(m){fu.add(e,m),t&&t(m),c.manager.itemEnd(e)}).catch(function(m){o&&o(m),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}let fd;ip.prototype.isImageBitmapLoader=!0;class rp extends ml{constructor(e){super(e)}load(e,t,r,o){const c=this,h=new ga(this.manager);h.setResponseType("arraybuffer"),h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(f){try{const m=f.slice(0);(void 0===fd&&(fd=new(window.AudioContext||window.webkitAudioContext)),fd).decodeAudioData(m,function(M){t(M)})}catch(m){o?o(m):console.error(m),c.manager.itemError(e)}},r,o)}}(class hm extends dd{constructor(e,t,r=1){super(void 0,r);const o=(new Ht).set(e),c=(new Ht).set(t),h=new re(o.r,o.g,o.b),f=new re(c.r,c.g,c.b),m=Math.sqrt(Math.PI),v=m*Math.sqrt(.75);this.sh.coefficients[0].copy(h).add(f).multiplyScalar(m),this.sh.coefficients[1].copy(h).sub(f).multiplyScalar(v)}}).prototype.isHemisphereLightProbe=!0,class fm extends dd{constructor(e,t=1){super(void 0,t);const r=(new Ht).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class _m{constructor(e,t,r){let o,c,h;switch(this.binding=e,this.valueSize=r,t){case"quaternion":o=this._slerp,c=this._slerpAdditive,h=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,c=this._select,h=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,c=this._lerpAdditive,h=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=c,this._setIdentity=h,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,c=e*o+o;let h=this.cumulativeWeight;if(0===h){for(let f=0;f!==o;++f)r[c+f]=r[f];h=t}else h+=t,this._mixBufferRegion(r,c,0,t/h,o);this.cumulativeWeight=h}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,c=this.cumulativeWeight,h=this.cumulativeWeightAdditive,f=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1&&this._mixBufferRegion(r,o,t*this._origIndex,1-c,t),h>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,v=t+t;m!==v;++m)if(r[m]!==r[m+t]){f.setValue(r,o);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,o=r*this._origIndex;this.binding.getValue(t,o);for(let c=r,h=o;c!==h;++c)t[c]=t[o+c%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,c){if(o>=.5)for(let h=0;h!==c;++h)e[t+h]=e[r+h]}_slerp(e,t,r,o){Wr.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,c){const h=this._workIndex*c;Wr.multiplyQuaternionsFlat(e,h,e,t,e,r),Wr.slerpFlat(e,t,e,t,e,h,o)}_lerp(e,t,r,o,c){const h=1-o;for(let f=0;f!==c;++f){const m=t+f;e[m]=e[m]*h+e[r+f]*o}}_lerpAdditive(e,t,r,o,c){for(let h=0;h!==c;++h){const f=t+h;e[f]=e[f]+e[r+h]*o}}}const Jl="\\[\\]\\.:\\/",K_=new RegExp("["+Jl+"]","g"),lp="[^"+Jl+"]",ym="[^"+Jl.replace("\\.","")+"]",Q_=/((?:WC+[\/:])*)/.source.replace("WC",lp),xm=/(WCOD+)?/.source.replace("WCOD",ym),Q0=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lp),cp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lp),up=new RegExp("^"+Q_+xm+Q0+cp+"$"),Wa=["material","materials","bones"];class ey{constructor(e,t,r){const o=r||ar.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=r.length;o!==c;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let ar=(()=>{class d{constructor(t,r,o){this.path=r,this.parsedPath=o||d.parseTrackName(r),this.node=d.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,o){return t&&t.isAnimationObjectGroup?new d.Composite(t,r,o):new d(t,r,o)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(K_,"")}static parseTrackName(t){const r=up.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const o={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},c=o.nodeName&&o.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const h=o.nodeName.substring(c+1);-1!==Wa.indexOf(h)&&(o.nodeName=o.nodeName.substring(0,c),o.objectName=h)}if(null===o.propertyName||0===o.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return o}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const o=t.skeleton.getBoneByName(r);if(void 0!==o)return o}if(t.children){const o=function(h){for(let f=0;f<h.length;f++){const m=h[f];if(m.name===r||m.uuid===r)return m;const v=o(m.children);if(v)return v}return null},c=o(t.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)t[r++]=o[c]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,o=r.objectName,c=r.propertyName;let h=r.propertyIndex;if(t||(t=d.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(o){let M=r.objectIndex;switch(o){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let w=0;w<t.length;w++)if(t[w].name===M){M=w;break}break;default:if(void 0===t[o])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[o]}if(void 0!==M){if(void 0===t[M])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[M]}}const f=t[c];if(void 0===f)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+c+" but it wasn't found.",t);let m=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===c){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[h]&&(h=t.morphTargetDictionary[h])}v=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=h}else void 0!==f.fromArray&&void 0!==f.toArray?(v=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(v=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=c;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return d.Composite=ey,d})();ar.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ar.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ar.prototype.GetterByBindingType=[ar.prototype._getValue_direct,ar.prototype._getValue_array,ar.prototype._getValue_arrayElement,ar.prototype._getValue_toArray],ar.prototype.SetterByBindingTypeAndVersioning=[[ar.prototype._setValue_direct,ar.prototype._setValue_direct_setNeedsUpdate,ar.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_array,ar.prototype._setValue_array_setNeedsUpdate,ar.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_arrayElement,ar.prototype._setValue_arrayElement_setNeedsUpdate,ar.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_fromArray,ar.prototype._setValue_fromArray_setNeedsUpdate,ar.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ma{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const c=t.tracks,h=c.length,f=new Array(h),m={endingStart:j,endingEnd:j};for(let v=0;v!==h;++v){const M=c[v].createInterpolant(null);f[v]=M,M.settings=m}this._interpolantSettings=m,this._interpolants=f,this._propertyBindings=new Array(h),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,c=e._clip.duration,f=o/c;e.warp(1,c/o,t),this.warp(f,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,c=o.time,h=this.timeScale;let f=this._timeScaleInterpolant;null===f&&(f=o._lendControlInterpolant(),this._timeScaleInterpolant=f);const m=f.parameterPositions,v=f.sampleValues;return m[0]=c,m[1]=c+r,v[0]=e/h,v[1]=t/h,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled)return void this._updateWeight(e);const c=this._startTime;if(null!==c){const m=(e-c)*r;if(m<0||0===r)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const h=this._updateTime(t),f=this._updateWeight(e);if(f>0){const m=this._interpolants,v=this._propertyBindings;if(2501===this.blendMode)for(let M=0,w=m.length;M!==w;++M)m[M].evaluate(h),v[M].accumulateAdditive(f);else for(let M=0,w=m.length;M!==w;++M)m[M].evaluate(h),v[M].accumulate(o,f)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,c=this._loopCount;const h=2202===r;if(0===e)return-1===c?o:h&&1==(1&c)?t-o:o;if(2200===r){-1===c&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===c&&(e>=0?(c=0,this._setEndings(!0,0===this.repetitions,h)):this._setEndings(0===this.repetitions,!0,h)),o>=t||o<0){const f=Math.floor(o/t);o-=t*f,c+=Math.abs(f);const m=this.repetitions-c;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===m){const v=e<0;this._setEndings(v,!v,h)}else this._setEndings(!1,!1,h);this._loopCount=c,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=o;if(h&&1==(1&c))return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=ne,o.endingEnd=ne):(o.endingStart=e?this.zeroSlopeAtStart?ne:j:2402,o.endingEnd=t?this.zeroSlopeAtEnd?ne:j:2402)}_scheduleFading(e,t,r){const o=this._mixer,c=o.time;let h=this._weightInterpolant;null===h&&(h=o._lendControlInterpolant(),this._weightInterpolant=h);const f=h.parameterPositions,m=h.sampleValues;return f[0]=c,m[0]=t,f[1]=c+e,m[1]=r,this}}(class va extends k{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,c=o.length,h=e._propertyBindings,f=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let M=v[m];void 0===M&&(M={},v[m]=M);for(let w=0;w!==c;++w){const C=o[w],D=C.name;let N=M[D];if(void 0!==N)++N.referenceCount,h[w]=N;else{if(N=h[w],void 0!==N){null===N._cacheIndex&&(++N.referenceCount,this._addInactiveBinding(N,m,D));continue}N=new _m(ar.create(r,D,t&&t._propertyBindings[w].binding.parsedPath),C.ValueTypeName,C.getValueSize()),++N.referenceCount,this._addInactiveBinding(N,m,D),h[w]=N}f[w].resultBuffer=N.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,c=this._actionsByClip[o];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==c.useCount++&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==--c.useCount&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,c=this._actionsByClip;let h=c[t];if(void 0===h)h={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[t]=h;else{const f=h.knownActions;e._byClipCacheIndex=f.length,f.push(e)}e._cacheIndex=o.length,o.push(e),h.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const c=e._clip.uuid,h=this._actionsByClip,f=h[c],m=f.knownActions,v=m[m.length-1],M=e._byClipCacheIndex;v._byClipCacheIndex=M,m[M]=v,m.pop(),e._byClipCacheIndex=null,delete f.actionByRoot[(e._localRoot||this._root).uuid],0===m.length&&delete h[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==--c.referenceCount&&this._removeInactiveBinding(c)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,c=this._bindings;let h=o[t];void 0===h&&(h={},o[t]=h),h[r]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,c=r.path,h=this._bindingsByRootAndName,f=h[o],m=t[t.length-1],v=e._cacheIndex;m._cacheIndex=v,t[v]=m,t.pop(),delete f[c],0===Object.keys(f).length&&delete h[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new G_(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,c=t[o];e.__cacheIndex=o,t[o]=e,c.__cacheIndex=r,t[r]=c}clipAction(e,t,r){const o=t||this._root,c=o.uuid;let h="string"==typeof e?Zl.findByName(o,e):e;const f=null!==h?h.uuid:e,m=this._actionsByClip[f];let v=null;if(void 0===r&&(r=null!==h?h.blendMode:2500),void 0!==m){const w=m.actionByRoot[c];if(void 0!==w&&w.blendMode===r)return w;v=m.knownActions[0],null===h&&(h=v._clip)}if(null===h)return null;const M=new ma(this,h,t,r);return this._bindAction(M,v),this._addInactiveAction(M,f,c),M}existingAction(e,t){const r=t||this._root,o=r.uuid,c="string"==typeof e?Zl.findByName(r,e):e,f=this._actionsByClip[c?c.uuid:e];return void 0!==f&&f.actionByRoot[o]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,o=this.time+=e*=this.timeScale,c=Math.sign(e),h=this._accuIndex^=1;for(let v=0;v!==r;++v)t[v]._update(o,e,c,h);const f=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)f[v].apply(h);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,c=o[r];if(void 0!==c){const h=c.knownActions;for(let f=0,m=h.length;f!==m;++f){const v=h[f];this._deactivateAction(v);const M=v._cacheIndex,w=t[t.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,w._cacheIndex=M,t[M]=w,t.pop(),this._removeInactiveBindingsForAction(v)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const h in r){const m=r[h].actionByRoot[t];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}const c=this._bindingsByRootAndName[t];if(void 0!==c)for(const h in c){const f=c[h];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Mh{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Mh(void 0===this.value.clone?this.value:this.value.clone())}}(class bm extends bc{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class hp{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(at(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Mm=new yt;class vu{constructor(e=new yt(1/0,1/0),t=new yt(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Mm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Mm.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}vu.prototype.isBox2=!0;const _l=new re,md=new Qt,vd=new Qt;function Sh(d){const e=[];d&&d.isBone&&e.push(d);for(let t=0;t<d.children.length;t++)e.push.apply(e,Sh(d.children[t]));return e}const vp=new Float32Array(1);new Int32Array(vp.buffer),na.create=function(d,e){return console.log("THREE.Curve.create() has been deprecated"),d.prototype=Object.create(na.prototype),d.prototype.constructor=d,d.prototype.getPoint=e,d},Uf.prototype.fromPoints=function(d){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(d)},class Tm extends ta{constructor(e=10,t=10,r=4473924,o=8947848){r=new Ht(r),o=new Ht(o);const c=t/2,h=e/t,f=e/2,m=[],v=[];for(let C=0,D=0,N=-f;C<=t;C++,N+=h){m.push(-f,0,N,f,0,N),m.push(N,0,-f,N,0,f);const H=C===c?r:o;H.toArray(v,D),D+=3,H.toArray(v,D),D+=3,H.toArray(v,D),D+=3,H.toArray(v,D),D+=3}const M=new Rn;M.setAttribute("position",new tn(m,3)),M.setAttribute("color",new tn(v,3)),super(M,new ss({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class Ch extends ta{constructor(e){const t=Sh(e),r=new Rn,o=[],c=[],h=new Ht(0,0,1),f=new Ht(0,1,0);for(let v=0;v<t.length;v++){const M=t[v];M.parent&&M.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),c.push(h.r,h.g,h.b),c.push(f.r,f.g,f.b))}r.setAttribute("position",new tn(o,3)),r.setAttribute("color",new tn(c,3)),super(r,new ss({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");vd.copy(this.root.matrixWorld).invert();for(let c=0,h=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(md.multiplyMatrices(vd,f.matrixWorld),_l.setFromMatrixPosition(md),o.setXYZ(h,_l.x,_l.y,_l.z),md.multiplyMatrices(vd,f.parent.matrixWorld),_l.setFromMatrixPosition(md),o.setXYZ(h+1,_l.x,_l.y,_l.z),h+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ml.prototype.extractUrlBase=function(d){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hd.extractUrlBase(d)},ml.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},vu.prototype.center=function(d){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(d)},vu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},vu.prototype.isIntersectionBox=function(d){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},vu.prototype.size=function(d){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(d)},Is.prototype.center=function(d){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(d)},Is.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Is.prototype.isIntersectionBox=function(d){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},Is.prototype.isIntersectionSphere=function(d){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(d)},Is.prototype.size=function(d){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(d)},Ii.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ln.prototype.setFromMatrix=function(d){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(d)},vr.prototype.flattenToArrayOffset=function(d,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(d,e)},vr.prototype.multiplyVector3=function(d){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),d.applyMatrix3(this)},vr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},vr.prototype.applyToBufferAttribute=function(d){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),d.applyMatrix3(this)},vr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},vr.prototype.getInverse=function(d){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(d).invert()},Qt.prototype.extractPosition=function(d){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(d)},Qt.prototype.flattenToArrayOffset=function(d,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(d,e)},Qt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new re).setFromMatrixColumn(this,3)},Qt.prototype.setRotationFromQuaternion=function(d){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(d)},Qt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Qt.prototype.multiplyVector3=function(d){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.multiplyVector4=function(d){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Qt.prototype.rotateAxis=function(d){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),d.transformDirection(this)},Qt.prototype.crossVector=function(d){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Qt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Qt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Qt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Qt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Qt.prototype.applyToBufferAttribute=function(d){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Qt.prototype.makeFrustum=function(d,e,t,r,o,c){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(d,e,r,t,o,c)},Qt.prototype.getInverse=function(d){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(d).invert()},oe.prototype.isIntersectionLine=function(d){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(d)},Wr.prototype.multiplyVector3=function(d){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),d.applyQuaternion(this)},Wr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ls.prototype.isIntersectionBox=function(d){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},Ls.prototype.isIntersectionPlane=function(d){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(d)},Ls.prototype.isIntersectionSphere=function(d){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(d)},Ve.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ve.prototype.barycoordFromPoint=function(d,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(d,e)},Ve.prototype.midpoint=function(d){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(d)},Ve.prototypenormal=function(d){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(d)},Ve.prototype.plane=function(d){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(d)},Ve.barycoordFromPoint=function(d,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ve.getBarycoord(d,e,t,r,o)},Ve.normal=function(d,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ve.getNormal(d,e,t,r)},Ba.prototype.extractAllPoints=function(d){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(d)},Ba.prototype.extrude=function(d){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Go(this,d)},Ba.prototype.makeGeometry=function(d){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new cu(this,d)},yt.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},yt.prototype.distanceToManhattan=function(d){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(d)},yt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},re.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},re.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},re.prototype.getPositionFromMatrix=function(d){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(d)},re.prototype.getScaleFromMatrix=function(d){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(d)},re.prototype.getColumnFromMatrix=function(d,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,d)},re.prototype.applyProjection=function(d){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(d)},re.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},re.prototype.distanceToManhattan=function(d){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(d)},re.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mi.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},Mi.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},yi.prototype.getChildByName=function(d){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(d)},yi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},yi.prototype.translate=function(d,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,d)},yi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},yi.prototype.applyMatrix=function(d){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(d)},Object.defineProperties(yi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(d){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=d}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Mr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Mr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Kd.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Zr.prototype.setLens=function(d,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(d)},Object.defineProperties(Ga.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(d){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=d}},shadowCameraLeft:{set:function(d){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=d}},shadowCameraRight:{set:function(d){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=d}},shadowCameraTop:{set:function(d){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=d}},shadowCameraBottom:{set:function(d){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=d}},shadowCameraNear:{set:function(d){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=d}},shadowCameraFar:{set:function(d){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=d}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(d){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=d}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(d){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=d}},shadowMapHeight:{set:function(d){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=d}}}),Object.defineProperties(ui.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ks},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ks)}}}),ui.prototype.setDynamic=function(d){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===d?Ks:Xs),this},ui.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ui.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Rn.prototype.addIndex=function(d){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(d)},Rn.prototype.addAttribute=function(d,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===d?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(d,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(d,new ui(arguments[1],arguments[2])))},Rn.prototype.addDrawCall=function(d,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(d,e)},Rn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Rn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Rn.prototype.removeAttribute=function(d){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(d)},Rn.prototype.applyMatrix=function(d){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(d)},Object.defineProperties(Rn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),bc.prototype.setDynamic=function(d){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===d?Ks:Xs),this},bc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Go.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Go.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Go.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},qd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Mh.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(En.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(d){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===d}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(d){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=d}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties($s.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(d){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=d}}}),ji.prototype.clearTarget=function(d,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(d),this.clear(e,t,r)},ji.prototype.animate=function(d){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(d)},ji.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ji.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ji.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ji.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ji.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ji.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ji.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ji.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ji.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ji.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ji.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ji.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ji.prototype.enableScissorTest=function(d){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(d)},ji.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ji.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ji.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ji.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ji.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ji.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ji.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ji.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ji.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ji.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ji.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=d}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=d}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(d){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===d?In:gi}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(wf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(es.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=d}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=d}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(d){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=d}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(d){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=d}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(d){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=d}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(d){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=d}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(d){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=d}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(d){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=d}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(d){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=d}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(d){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=d}}}),class _s extends yi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(d){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new rp).load(d,function(r){e.setBuffer(r)}),this},hc.prototype.updateCubeMap=function(d,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(d,e)},hc.prototype.clear=function(d,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(d,e,t,r)},uo.crossOrigin=void 0,uo.loadTexture=function(d,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new vh;o.setCrossOrigin(this.crossOrigin);const c=o.load(d,t,void 0,r);return e&&(c.mapping=e),c},uo.loadTextureCube=function(d,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new $f;o.setCrossOrigin(this.crossOrigin);const c=o.load(d,t,void 0,r);return e&&(c.mapping=e),c},uo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},uo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137")}},Jt=>{Jt(Jt.s=4649)}]);