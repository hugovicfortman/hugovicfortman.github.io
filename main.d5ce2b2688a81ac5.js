(self.webpackChunkvictor_fortman=self.webpackChunkvictor_fortman||[]).push([[792],{818:(xs,Ms,zr)=>{"use strict";var vr=zr(467);let wn=null,On=1;const yr=Symbol("SIGNAL");function nt(e){const n=wn;return wn=e,n}function rn(e){if((!yi(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==On)){if(!e.producerMustRecompute(e)&&!Es(e))return e.dirty=!1,void(e.lastCleanEpoch=On);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=On}}function Es(e){Cs(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(rn(t),i!==t.version))return!0}return!1}function Ss(e,n){if(function jo(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Cs(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)Ss(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],s=e.liveConsumerNode[n];Cs(s),s.producerIndexOfThis[i]=n}}function yi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Cs(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let fu=null;function Bt(e){return"function"==typeof e}function Ts(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ds=Ts(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,s)=>`${s+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ai(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Tr{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const l of t)l.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Bt(i))try{i()}catch(l){n=l instanceof Ds?l.errors:[l]}const{_teardowns:s}=this;if(s){this._teardowns=null;for(const l of s)try{gu(l)}catch(u){n=n??[],u instanceof Ds?n=[...n,...u.errors]:n.push(u)}}if(n)throw new Ds(n)}}add(n){var t;if(n&&n!==this)if(this.closed)gu(n);else{if(n instanceof Tr){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&ai(t,n)}remove(n){const{_teardowns:t}=this;t&&ai(t,n),n instanceof Tr&&n._removeParent(this)}}Tr.EMPTY=(()=>{const e=new Tr;return e.closed=!0,e})();const ji=Tr.EMPTY;function qo(e){return e instanceof Tr||e&&"closed"in e&&Bt(e.remove)&&Bt(e.add)&&Bt(e.unsubscribe)}function gu(e){Bt(e)?e():e.unsubscribe()}const Xo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},bo={setTimeout(...e){const{delegate:n}=bo;return(n?.setTimeout||setTimeout)(...e)},clearTimeout(e){const{delegate:n}=bo;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Dr(e){bo.setTimeout(()=>{const{onUnhandledError:n}=Xo;if(!n)throw e;n(e)})}function ao(){}const sc=wa("C",void 0,void 0);function wa(e,n,t){return{kind:e,value:n,error:t}}let Ai=null;function sr(e){if(Xo.useDeprecatedSynchronousErrorHandling){const n=!Ai;if(n&&(Ai={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=Ai;if(Ai=null,t)throw i}}else e()}class Vn extends Tr{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,qo(n)&&n.add(this)):this.destination=Wn}static create(n,t,i){return new wo(n,t,i)}next(n){this.isStopped?ih(function gl(e){return wa("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?ih(function ac(e){return wa("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?ih(sc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class wo extends Vn{constructor(n,t,i){let s;if(super(),Bt(n))s=n;else if(n){let l;({next:s,error:t,complete:i}=n),this&&Xo.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=()=>this.unsubscribe()):l=n,s=s?.bind(l),t=t?.bind(l),i=i?.bind(l)}this.destination={next:s?lc(s):ao,error:lc(t??ml),complete:i?lc(i):ao}}}function lc(e,n){return(...t)=>{try{e(...t)}catch(i){Xo.useDeprecatedSynchronousErrorHandling?function xa(e){Xo.useDeprecatedSynchronousErrorHandling&&Ai&&(Ai.errorThrown=!0,Ai.error=e)}(i):Dr(i)}}}function ml(e){throw e}function ih(e,n){const{onStoppedNotification:t}=Xo;t&&bo.setTimeout(()=>t(e,n))}const Wn={closed:!0,next:ao,error:ml,complete:ao},vl="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ma(e){return e}function Vp(e){return 0===e.length?Ma:1===e.length?e[0]:function(t){return e.reduce((i,s)=>s(i),t)}}let hn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,s){const l=function As(e){return e&&e instanceof Vn||function oh(e){return e&&Bt(e.next)&&Bt(e.error)&&Bt(e.complete)}(e)&&qo(e)}(t)?t:new wo(t,i,s);return sr(()=>{const{operator:u,source:p}=this;l.add(u?u.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=mu(i))((s,l)=>{let u;u=this.subscribe(p=>{try{t(p)}catch(m){l(m),u?.unsubscribe()}},l,s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[vl](){return this}pipe(...t){return Vp(t)(this)}toPromise(t){return new(t=mu(t))((i,s)=>{let l;this.subscribe(u=>l=u,u=>s(u),()=>i(l))})}}return e.create=n=>new e(n),e})();function mu(e){var n;return null!==(n=e??Xo.Promise)&&void 0!==n?n:Promise}const Bp=Ts(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ar=(()=>{class e extends hn{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new xo(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Bp}next(t){sr(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const s of i)s.next(t)}})}error(t){sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:s,observers:l}=this;return i||s?ji:(l.push(t),new Tr(()=>ai(l,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:s,isStopped:l}=this;i?t.error(s):l&&t.complete()}asObservable(){const t=new hn;return t.source=this,t}}return e.create=(n,t)=>new xo(n,t),e})();class xo extends Ar{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:ji}}class Ir extends Ar{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function sh(e){return Bt(e?.lift)}function Rr(e){return n=>{if(sh(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class Bn extends Vn{constructor(n,t,i,s,l){super(n),this.onFinalize=l,this._next=t?function(u){try{t(u)}catch(p){n.error(p)}}:super._next,this._error=s?function(u){try{s(u)}catch(p){n.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(u){n.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}function Ot(e,n){return Rr((t,i)=>{let s=0;t.subscribe(new Bn(i,l=>{i.next(e.call(n,l,s++))}))})}const Nr="https://g.co/ng/security#xss";class we extends Error{constructor(n,t){super(function Yo(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function uo(e){return{toString:e}.toString()}const ho="__parameters__";function fo(e,n,t){return uo(()=>{const i=function Mo(e){return function(...t){if(e){const i=e(...t);for(const s in i)this[s]=i[s]}}}(n);function s(...l){if(this instanceof s)return i.apply(this,l),this;const u=new s(...l);return p.annotation=u,p;function p(m,_,S){const A=m.hasOwnProperty(ho)?m[ho]:Object.defineProperty(m,ho,{value:[]})[ho];for(;A.length<=S;)A.push(null);return(A[S]=A[S]||[]).push(u),m}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const on=globalThis;function Rt(e){for(let n in e)if(e[n]===Rt)return n;throw Error("Could not find renamed property on target object.")}function xn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(xn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function Ii(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const $i=Rt({__forward_ref__:Rt});function qt(e){return e.__forward_ref__=qt,e.toString=function(){return xn(this())},e}function ut(e){return Ea(e)?e():e}function Ea(e){return"function"==typeof e&&e.hasOwnProperty($i)&&e.__forward_ref__===qt}function ne(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function kt(e){return{providers:e.providers||[],imports:e.imports||[]}}function xt(e){return Yi(e,Wp)||Yi(e,z0)}function Yi(e,n){return e.hasOwnProperty(n)?e[n]:null}function ah(e){return e&&(e.hasOwnProperty(Mu)||e.hasOwnProperty(JS))?e[Mu]:null}const Wp=Rt({\u0275prov:Rt}),Mu=Rt({\u0275inj:Rt}),z0=Rt({ngInjectableDef:Rt}),JS=Rt({ngInjectorDef:Rt});class Pe{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function jp(e){return e&&!!e.\u0275providers}const Ns=Rt({\u0275cmp:Rt}),xl=Rt({\u0275dir:Rt}),Xv=Rt({\u0275pipe:Rt}),W0=Rt({\u0275mod:Rt}),Ca=Rt({\u0275fac:Rt}),lh=Rt({__NG_ELEMENT_ID__:Rt}),j0=Rt({__NG_ENV_ID__:Rt});function It(e){return"string"==typeof e?e:null==e?"":String(e)}function uc(e,n){throw new we(-201,!1)}var Pt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Pt||{});let El;function Ri(){return El}function pn(e){const n=El;return El=e,n}function ch(e,n,t){const i=xt(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Pt.Optional?null:void 0!==n?n:void uc()}const Os={},qp="__NG_DI_FLAG__",uh="ngTempTokenPath",q0=/\n/gm,Zv="__source";let dc;function Ta(e){const n=dc;return dc=e,n}function Z0(e,n=Pt.Default){if(void 0===dc)throw new we(-203,!1);return null===dc?ch(e,void 0,n):dc.get(e,n&Pt.Optional?null:void 0,n)}function Oe(e,n=Pt.Default){return(Ri()||Z0)(ut(e),n)}function Te(e,n=Pt.Default){return Oe(e,dh(n))}function dh(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Yp(e){const n=[];for(let t=0;t<e.length;t++){const i=ut(e[t]);if(Array.isArray(i)){if(0===i.length)throw new we(900,!1);let s,l=Pt.Default;for(let u=0;u<i.length;u++){const p=i[u],m=Wr(p);"number"==typeof m?-1===m?s=p.token:l|=m:s=p}n.push(Oe(s,l))}else n.push(Oe(i))}return n}function Me(e,n){return e[qp]=n,e.prototype[qp]=n,e}function Wr(e){return e[qp]}const Ls=Me(fo("Optional"),8),Pi=Me(fo("SkipSelf"),4);function Fs(e,n){return e.hasOwnProperty(Ca)?e[Ca]:null}function ke(e,n){e.forEach(t=>Array.isArray(t)?ke(t,n):n(t))}function Sl(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Qo(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Zi(e,n,t){let i=fr(e,n);return i>=0?e[1|i]=t:(i=~i,function Mn(e,n,t,i){let s=e.length;if(s==n)e.push(t,i);else if(1===s)e.push(i,e[0]),e[0]=t;else{for(s--,e.push(e[s-1],e[s]);s>n;)e[s]=e[s-2],s--;e[n]=t,e[n+1]=i}}(e,i,n,t)),i}function Eu(e,n){const t=fr(e,n);if(t>=0)return e[1|t]}function fr(e,n){return function ph(e,n,t){let i=0,s=e.length>>t;for(;s!==i;){const l=i+(s-i>>1),u=e[l<<t];if(n===u)return l<<t;u>n?s=l:i=l+1}return~(s<<t)}(e,n,1)}const So={},Ct=[],bi=new Pe(""),Da=new Pe("",-1),Su=new Pe("");class ks{get(n,t=Os){if(t===Os){const i=new Error(`NullInjectorError: No provider for ${xn(n)}!`);throw i.name="NullInjectorError",i}return t}}var Vs=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Vs||{}),ui=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ui||{}),an=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(an||{});function Aa(e,n,t){let i=e.length;for(;;){const s=e.indexOf(n,t);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const l=n.length;if(s+l===i||e.charCodeAt(s+l)<=32)return s}t=s+1}}function Bs(e,n,t){let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const l=t[i++],u=t[i++],p=t[i++];e.setAttribute(n,u,p,l)}else{const l=s,u=t[++i];Cu(l)?e.setProperty(n,l,u):e.setAttribute(n,l,u),i++}}return i}function pc(e){return 3===e||4===e||6===e}function Cu(e){return 64===e.charCodeAt(0)}function Ia(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const s=n[i];"number"==typeof s?t=s:0===t||Ra(e,t,s,null,-1===t||2===t?n[++i]:null)}}return e}function Ra(e,n,t,i,s){let l=0,u=e.length;if(-1===n)u=-1;else for(;l<e.length;){const p=e[l++];if("number"==typeof p){if(p===n){u=-1;break}if(p>n){u=l-1;break}}}for(;l<e.length;){const p=e[l];if("number"==typeof p)break;if(p===t){if(null===i)return void(null!==s&&(e[l+1]=s));if(i===e[l+1])return void(e[l+2]=s)}l++,null!==i&&l++,null!==s&&l++}-1!==u&&(e.splice(u,0,n),l=u+1),e.splice(l++,0,t),null!==i&&e.splice(l++,0,i),null!==s&&e.splice(l++,0,s)}const gh="ng-template";function Q0(e,n,t,i){let s=0;if(i){for(;s<n.length&&"string"==typeof n[s];s+=2)if("class"===n[s]&&-1!==Aa(n[s+1].toLowerCase(),t,0))return!0}else if(mh(e))return!1;if(s=n.indexOf(1,s),s>-1){let l;for(;++s<n.length&&"string"==typeof(l=n[s]);)if(l.toLowerCase()===t)return!0}return!1}function mh(e){return 4===e.type&&e.value!==gh}function vh(e,n,t){return n===(4!==e.type||t?e.value:gh)}function Zp(e,n,t){let i=4;const s=e.attrs,l=null!==s?function Pa(e){for(let n=0;n<e.length;n++)if(pc(e[n]))return n;return e.length}(s):0;let u=!1;for(let p=0;p<n.length;p++){const m=n[p];if("number"!=typeof m){if(!u)if(4&i){if(i=2|1&i,""!==m&&!vh(e,m,t)||""===m&&1===n.length){if(jr(i))return!1;u=!0}}else if(8&i){if(null===s||!Q0(e,s,m,t)){if(jr(i))return!1;u=!0}}else{const _=n[++p],S=Us(m,s,mh(e),t);if(-1===S){if(jr(i))return!1;u=!0;continue}if(""!==_){let A;if(A=S>l?"":s[S+1].toLowerCase(),2&i&&_!==A){if(jr(i))return!1;u=!0}}}}else{if(!u&&!jr(i)&&!jr(m))return!1;if(u&&jr(m))continue;u=!1,i=m|1&i}}return jr(i)||u}function jr(e){return!(1&e)}function Us(e,n,t,i){if(null===n)return-1;let s=0;if(i||!t){let l=!1;for(;s<n.length;){const u=n[s];if(u===e)return s;if(3===u||6===u)l=!0;else{if(1===u||2===u){let p=n[++s];for(;"string"==typeof p;)p=n[++s];continue}if(4===u)break;if(0===u){s+=4;continue}}s+=l?1:2}return-1}return function Jp(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function yh(e,n,t=!1){for(let i=0;i<n.length;i++)if(Zp(e,n[i],t))return!0;return!1}function wh(e,n){return e?":not("+n.trim()+")":n}function Cl(e){let n=e[0],t=1,i=2,s="",l=!1;for(;t<e.length;){let u=e[t];if("string"==typeof u)if(2&i){const p=e[++t];s+="["+u+(p.length>0?'="'+p+'"':"")+"]"}else 8&i?s+="."+u:4&i&&(s+=" "+u);else""!==s&&!jr(u)&&(n+=wh(l,s),s=""),i=u,l=l||!jr(i);t++}return""!==s&&(n+=wh(l,s)),n}function ln(e){return uo(()=>{const n=Tl(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Vs.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ui.Emulated,styles:e.styles||Ct,_:null,schemas:e.schemas||null,tView:null,id:""};Ko(t);const i=e.dependencies;return t.directiveDefs=Dl(i,!1),t.pipeDefs=Dl(i,!0),t.id=function tw(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const s of t)n=Math.imul(31,n)+s.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function K0(e){return Ut(e)||Yn(e)}function ew(e){return null!==e}function _r(e){return uo(()=>({type:e.type,bootstrap:e.bootstrap||Ct,declarations:e.declarations||Ct,imports:e.imports||Ct,exports:e.exports||Ct,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Tu(e,n){if(null==e)return So;const t={};for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];let l,u,p=an.None;Array.isArray(s)?(p=s[0],l=s[1],u=s[2]??l):(l=s,u=s),n?(t[l]=p!==an.None?[i,p]:i,n[l]=u):t[l]=i}return t}function Ke(e){return uo(()=>{const n=Tl(e);return Ko(n),n})}function di(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ut(e){return e[Ns]||null}function Yn(e){return e[xl]||null}function Lr(e){return e[Xv]||null}function ei(e,n){const t=e[W0]||null;if(!t&&!0===n)throw new Error(`Type ${xn(e)} does not have '\u0275mod' property.`);return t}function Tl(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||So,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Ct,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tu(e.inputs,n),outputs:Tu(e.outputs),debugInfo:null}}function Ko(e){e.features?.forEach(n=>n(e))}function Dl(e,n){if(!e)return null;const t=n?Lr:K0;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(ew)}function ey(...e){return{\u0275providers:xh(0,e),\u0275fromNgModule:!0}}function xh(e,...n){const t=[],i=new Set;let s;const l=u=>{t.push(u)};return ke(n,u=>{const p=u;Mh(p,l,[],i)&&(s||=[],s.push(p))}),void 0!==s&&Qp(s,l),t}function Qp(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:s}=e[t];Gt(s,l=>{n(l,i)})}}function Mh(e,n,t,i){if(!(e=ut(e)))return!1;let s=null,l=ah(e);const u=!l&&Ut(e);if(l||u){if(u&&!u.standalone)return!1;s=e}else{const m=e.ngModule;if(l=ah(m),!l)return!1;s=m}const p=i.has(s);if(u){if(p)return!1;if(i.add(s),u.dependencies){const m="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const _ of m)Mh(_,n,t,i)}}else{if(!l)return!1;{if(null!=l.imports&&!p){let _;i.add(s);try{ke(l.imports,S=>{Mh(S,n,t,i)&&(_||=[],_.push(S))})}finally{}void 0!==_&&Qp(_,n)}if(!p){const _=Fs(s)||(()=>new s);n({provide:s,useFactory:_,deps:Ct},s),n({provide:Su,useValue:s,multi:!0},s),n({provide:bi,useValue:()=>Oe(s),multi:!0},s)}const m=l.providers;if(null!=m&&!p){const _=e;Gt(m,S=>{n(S,_)})}}}return s!==e&&void 0!==e.providers}function Gt(e,n){for(let t of e)jp(t)&&(t=t.\u0275providers),Array.isArray(t)?Gt(t,n):n(t)}const Co=Rt({provide:String,useValue:Rt});function To(e){return null!==e&&"object"==typeof e&&Co in e}function po(e){return"function"==typeof e}const Sh=new Pe(""),vc={},Kp={};let Iu;function ar(){return void 0===Iu&&(Iu=new ks),Iu}class Ni{}class lr extends Ni{get destroyed(){return this._destroyed}constructor(n,t,i,s){super(),this.parent=t,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ru(n,u=>this.processProvider(u)),this.records.set(Da,yc(void 0,this)),s.has("environment")&&this.records.set(Ni,yc(void 0,this));const l=this.records.get(Sh);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Su,Ct,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=nt(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),nt(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=Ta(this),i=pn(void 0);try{return n()}finally{Ta(t),pn(i)}}get(n,t=Os,i=Pt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(j0))return n[j0](this);i=dh(i);const l=Ta(this),u=pn(void 0);try{if(!(i&Pt.SkipSelf)){let m=this.records.get(n);if(void 0===m){const _=function ow(e){return"function"==typeof e||"object"==typeof e&&e instanceof Pe}(n)&&xt(n);m=_&&this.injectableDefInScope(_)?yc(Do(n),vc):null,this.records.set(n,m)}if(null!=m)return this.hydrate(n,m)}return(i&Pt.Self?ar():this.parent).get(n,t=i&Pt.Optional&&t===Os?null:t)}catch(p){if("NullInjectorError"===p.name){if((p[uh]=p[uh]||[]).unshift(xn(n)),l)throw p;return function Jv(e,n,t,i){const s=e[uh];throw n[Zv]&&s.unshift(n[Zv]),e.message=function J0(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let s=xn(n);if(Array.isArray(n))s=n.map(xn).join(" -> ");else if("object"==typeof n){let l=[];for(let u in n)if(n.hasOwnProperty(u)){let p=n[u];l.push(u+":"+("string"==typeof p?JSON.stringify(p):xn(p)))}s=`{${l.join(", ")}}`}return`${t}${i?"("+i+")":""}[${s}]: ${e.replace(q0,"\n  ")}`}("\n"+e.message,s,t,i),e.ngTokenPath=s,e[uh]=null,e}(p,n,"R3InjectorError",this.source)}throw p}finally{pn(u),Ta(l)}}resolveInjectorInitializers(){const n=nt(null),t=Ta(this),i=pn(void 0);try{const l=this.get(bi,Ct,Pt.Self);for(const u of l)u()}finally{Ta(t),pn(i),nt(n)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(xn(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(n){let t=po(n=ut(n))?n:ut(n&&n.provide);const i=function Ch(e){return To(e)?yc(void 0,e.useValue):yc(function en(e,n,t){let i;if(po(e)){const s=ut(e);return Fs(s)||Do(s)}if(To(e))i=()=>ut(e.useValue);else if(function es(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Yp(e.deps||[]));else if(function Eh(e){return!(!e||!e.useExisting)}(e))i=()=>Oe(ut(e.useExisting));else{const s=ut(e&&(e.useClass||e.provide));if(!function rw(e){return!!e.deps}(e))return Fs(s)||Do(s);i=()=>new s(...Yp(e.deps))}return i}(e),vc)}(n);if(!po(n)&&!0===n.multi){let s=this.records.get(t);s||(s=yc(void 0,vc,!0),s.factory=()=>Yp(s.multi),this.records.set(t,s)),t=n,s.multi.push(n)}this.records.set(t,i)}hydrate(n,t){const i=nt(null);try{return t.value===vc&&(t.value=Kp,t.value=t.factory()),"object"==typeof t.value&&t.value&&function iw(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{nt(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=ut(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Do(e){const n=xt(e),t=null!==n?n.factory:Fs(e);if(null!==t)return t;if(e instanceof Pe)throw new we(204,!1);if(e instanceof Function)return function Un(e){if(e.length>0)throw new we(204,!1);const t=function wl(e){return e&&(e[Wp]||e[z0])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new we(204,!1)}function yc(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Ru(e,n){for(const t of e)Array.isArray(t)?Ru(t,n):t&&jp(t)?Ru(t.\u0275providers,n):n(t)}function ts(e,n){e instanceof lr&&e.assertNotDestroyed();const i=Ta(e),s=pn(void 0);try{return n()}finally{Ta(i),pn(s)}}function Th(){return void 0!==Ri()||null!=function Y0(){return dc}()}const cn=0,Re=1,tt=2,cr=3,Oi=4,Fr=5,hi=6,Hs=7,En=8,br=9,Ji=10,ht=11,Zn=12,ny=13,zs=14,mn=15,rs=16,wr=17,Gs=18,Nu=19,ry=20,wi=21,Al=22,Jn=23,pt=25,Oa=1,Li=7,La=9,xr=10;var tg=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(tg||{});function Qn(e){return Array.isArray(e)&&"object"==typeof e[Oa]}function Mr(e){return Array.isArray(e)&&!0===e[Oa]}function xc(e){return!!(4&e.flags)}function is(e){return e.componentOffset>-1}function Ou(e){return!(1&~e.flags)}function Io(e){return!!e.template}function Fa(e){return!!(512&e[tt])}class dw{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function ay(e,n,t,i){null!==n?n.applyValueToInputSignal(n,i):e[t]=i}function go(){return ly}function ly(e){return e.type.prototype.ngOnChanges&&(e.setInput=fw),hw}function hw(){const e=uy(this),n=e?.current;if(n){const t=e.previous;if(t===So)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function fw(e,n,t,i,s){const l=this.declaredInputs[i],u=uy(e)||function pw(e,n){return e[cy]=n}(e,{previous:So,current:null}),p=u.current||(u.current={}),m=u.previous,_=m[l];p[l]=new dw(_&&_.currentValue,t,m===So),ay(e,n,s,t)}go.ngInherit=!0;const cy="__ngSimpleChanges__";function uy(e){return e[cy]||null}const os=function(e,n,t){};let fy=!1;function Pn(e){for(;Array.isArray(e);)e=e[cn];return e}function Lu(e,n){return Pn(n[e])}function xi(e,n){return Pn(n[e.index])}function Fu(e,n){return e.data[n]}function Qi(e,n){const t=n[e];return Qn(t)?t:t[cn]}function sg(e){return!(128&~e[tt])}function ss(e,n){return null==n?null:e[n]}function py(e){e[wr]=0}function bw(e){1024&e[tt]||(e[tt]|=1024,sg(e)&&ku(e))}function ag(e){return!!(9216&e[tt]||e[Jn]?.dirty)}function lg(e){e[Ji].changeDetectionScheduler?.notify(1),ag(e)?ku(e):64&e[tt]&&(function mw(){return fy}()?(e[tt]|=1024,ku(e)):e[Ji].changeDetectionScheduler?.notify())}function ku(e){e[Ji].changeDetectionScheduler?.notify();let n=Rl(e);for(;null!==n&&!(8192&n[tt])&&(n[tt]|=8192,sg(n));)n=Rl(n)}function Ih(e,n){if(!(256&~e[tt]))throw new we(911,!1);null===e[wi]&&(e[wi]=[]),e[wi].push(n)}function Rl(e){const n=e[cr];return Mr(n)?n[cr]:n}const vt={lFrame:Fw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vy(){return vt.bindingsEnabled}function fe(){return vt.lFrame.lView}function Xt(){return vt.lFrame.tView}function Ro(e){return vt.lFrame.contextLView=e,e[En]}function Po(e){return vt.lFrame.contextLView=null,e}function Sn(){let e=yy();for(;null!==e&&64===e.type;)e=e.parent;return e}function yy(){return vt.lFrame.currentTNode}function as(e,n){const t=vt.lFrame;t.currentTNode=e,t.isParent=n}function ug(){return vt.lFrame.isParent}function Mi(){const e=vt.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function No(){return vt.lFrame.bindingIndex++}function js(e){const n=vt.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function Rw(e,n){const t=vt.lFrame;t.bindingIndex=t.bindingRootIndex=e,hg(n)}function hg(e){vt.lFrame.currentDirectiveIndex=e}function pg(){return vt.lFrame.currentQueryIndex}function Rh(e){vt.lFrame.currentQueryIndex=e}function Nw(e){const n=e[Re];return 2===n.type?n.declTNode:1===n.type?e[Fr]:null}function Ow(e,n,t){if(t&Pt.SkipSelf){let s=n,l=e;for(;!(s=s.parent,null!==s||t&Pt.Host||(s=Nw(l),null===s||(l=l[zs],10&s.type))););if(null===s)return!1;n=s,e=l}const i=vt.lFrame=Lw();return i.currentTNode=n,i.lView=e,!0}function xy(e){const n=Lw(),t=e[Re];vt.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Lw(){const e=vt.lFrame,n=null===e?null:e.child;return null===n?Fw(e):n}function Fw(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function kw(){const e=vt.lFrame;return vt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Vw=kw;function My(){const e=kw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ei(){return vt.lFrame.selectedIndex}function Sc(e){vt.lFrame.selectedIndex=e}function jn(){const e=vt.lFrame;return Fu(e.tView,e.selectedIndex)}let Uw=!0;function Ph(){return Uw}function $s(e){Uw=e}function gg(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const l=e.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:_,ngOnDestroy:S}=l;u&&(e.contentHooks??=[]).push(-t,u),p&&((e.contentHooks??=[]).push(t,p),(e.contentCheckHooks??=[]).push(t,p)),m&&(e.viewHooks??=[]).push(-t,m),_&&((e.viewHooks??=[]).push(t,_),(e.viewCheckHooks??=[]).push(t,_)),null!=S&&(e.destroyHooks??=[]).push(t,S)}}function mg(e,n,t){Hw(e,n,3,t)}function vg(e,n,t,i){(3&e[tt])===t&&Hw(e,n,t,i)}function Ey(e,n){let t=e[tt];(3&t)===n&&(t&=16383,t+=1,e[tt]=t)}function Hw(e,n,t,i){const l=i??-1,u=n.length-1;let p=0;for(let m=void 0!==i?65535&e[wr]:0;m<u;m++)if("number"==typeof n[m+1]){if(p=n[m],null!=i&&p>=i)break}else n[m]<0&&(e[wr]+=65536),(p<l||-1==l)&&(CC(e,t,n,m),e[wr]=(4294901760&e[wr])+m+2),m++}function zw(e,n){os(4,e,n);const t=nt(null);try{n.call(e)}finally{nt(t),os(5,e,n)}}function CC(e,n,t,i){const s=t[i]<0,l=t[i+1],p=e[s?-t[i]:t[i]];s?e[tt]>>14<e[wr]>>16&&(3&e[tt])===n&&(e[tt]+=16384,zw(p,l)):zw(p,l)}const Bu=-1;class Nh{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function yg(e){return e!==Bu}function Uu(e){return 32767&e}function Hu(e,n){let t=function Gw(e){return e>>16}(e),i=n;for(;t>0;)i=i[zs],t--;return i}let _g=!0;function ka(e){const n=_g;return _g=e,n}const Pl=255,Xs=5;let ls=0;const Oo={};function Ys(e,n){const t=Cc(e,n);if(-1!==t)return t;const i=n[Re];i.firstCreatePass&&(e.injectorIndex=n.length,zu(i.data,e),zu(n,null),zu(i.blueprint,null));const s=Gu(e,n),l=e.injectorIndex;if(yg(s)){const u=Uu(s),p=Hu(s,n),m=p[Re].data;for(let _=0;_<8;_++)n[l+_]=p[u+_]|m[u+_]}return n[l+8]=s,l}function zu(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Cc(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Gu(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,s=n;for(;null!==s;){if(i=Vh(s),null===i)return Bu;if(t++,s=s[zs],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Bu}function Tc(e,n,t){!function Cy(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(lh)&&(i=t[lh]),null==i&&(i=t[lh]=ls++);const s=i&Pl;n.data[e+(s>>Xs)]|=1<<s}(e,n,t)}function Lh(e,n,t){if(t&Pt.Optional||void 0!==e)return e;uc()}function Va(e,n,t,i){if(t&Pt.Optional&&void 0===i&&(i=null),!(t&(Pt.Self|Pt.Host))){const s=e[br],l=pn(void 0);try{return s?s.get(n,i,t&Pt.Optional):ch(n,i,t&Pt.Optional)}finally{pn(l)}}return Lh(i,0,t)}function Nl(e,n,t,i=Pt.Default,s){if(null!==e){if(2048&n[tt]&&!(i&Pt.Self)){const u=function jw(e,n,t,i,s){let l=e,u=n;for(;null!==l&&null!==u&&2048&u[tt]&&!(512&u[tt]);){const p=bg(l,u,t,i|Pt.Self,Oo);if(p!==Oo)return p;let m=l.parent;if(!m){const _=u[ry];if(_){const S=_.get(t,Oo,i);if(S!==Oo)return S}m=Vh(u),u=u[zs]}l=m}return s}(e,n,t,i,Oo);if(u!==Oo)return u}const l=bg(e,n,t,i,Oo);if(l!==Oo)return l}return Va(n,t,i,s)}function bg(e,n,t,i,s){const l=function kh(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(lh)?e[lh]:void 0;return"number"==typeof n?n>=0?n&Pl:Ww:n}(t);if("function"==typeof l){if(!Ow(n,e,i))return i&Pt.Host?Lh(s,0,i):Va(n,t,i,s);try{let u;if(u=l(i),null!=u||i&Pt.Optional)return u;uc()}finally{Vw()}}else if("number"==typeof l){let u=null,p=Cc(e,n),m=Bu,_=i&Pt.Host?n[mn][Fr]:null;for((-1===p||i&Pt.SkipSelf)&&(m=-1===p?Gu(e,n):n[p+8],m!==Bu&&wg(i,!1)?(u=n[Re],p=Uu(m),n=Hu(m,n)):p=-1);-1!==p;){const S=n[Re];if(Ay(l,p,S.data)){const A=Dy(p,n,t,u,i,_);if(A!==Oo)return A}m=n[p+8],m!==Bu&&wg(i,n[Re].data[p+8]===_)&&Ay(l,p,n)?(u=S,p=Uu(m),n=Hu(m,n)):p=-1}}return s}function Dy(e,n,t,i,s,l){const u=n[Re],p=u.data[e+8],S=Fh(p,u,t,null==i?is(p)&&_g:i!=u&&!!(3&p.type),s&Pt.Host&&l===p);return null!==S?Ba(n,u,S,p):Oo}function Fh(e,n,t,i,s){const l=e.providerIndexes,u=n.data,p=1048575&l,m=e.directiveStart,S=l>>20,O=s?p+S:e.directiveEnd;for(let H=i?p:p+S;H<O;H++){const $=u[H];if(H<m&&t===$||H>=m&&$.type===t)return H}if(s){const H=u[m];if(H&&Io(H)&&H.type===t)return m}return null}function Ba(e,n,t,i){let s=e[t];const l=n.data;if(function TC(e){return e instanceof Nh}(s)){const u=s;u.resolving&&function $p(e,n){throw n&&n.join(" > "),new we(-200,e)}(function fn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():It(e)}(l[t]));const p=ka(u.canSeeViewProviders);u.resolving=!0;const _=u.injectImpl?pn(u.injectImpl):null;Ow(e,i,Pt.Default);try{s=e[t]=u.factory(void 0,l,e,i),n.firstCreatePass&&t>=i.directiveStart&&function SC(e,n,t){const{ngOnChanges:i,ngOnInit:s,ngDoCheck:l}=n.type.prototype;if(i){const u=ly(n);(t.preOrderHooks??=[]).push(e,u),(t.preOrderCheckHooks??=[]).push(e,u)}s&&(t.preOrderHooks??=[]).push(0-e,s),l&&((t.preOrderHooks??=[]).push(e,l),(t.preOrderCheckHooks??=[]).push(e,l))}(t,l[t],n)}finally{null!==_&&pn(_),ka(p),u.resolving=!1,Vw()}}return s}function Ay(e,n,t){return!!(t[n+(e>>Xs)]&1<<e)}function wg(e,n){return!(e&Pt.Self||e&Pt.Host&&n)}class kr{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return Nl(this._tNode,this._lView,n,dh(i),t)}}function Ww(){return new kr(Sn(),fe())}function Er(e){return uo(()=>{const n=e.prototype.constructor,t=n[Ca]||xg(n),i=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){const l=s[Ca]||xg(s);if(l&&l!==t)return l;s=Object.getPrototypeOf(s)}return l=>new l})}function xg(e){return Ea(e)?()=>{const n=xg(ut(e));return n&&n()}:Fs(e)}function Vh(e){const n=e[Re],t=n.type;return 2===t?n.declTNode:1===t?e[Fr]:null}function Ll(e,n=null,t=null,i){const s=fi(e,n,t,i);return s.resolveInjectorInitializers(),s}function fi(e,n=null,t=null,i,s=new Set){const l=[t||Ct,ey(e)];return i=i||("object"==typeof e?void 0:xn(e)),new lr(l,n||ar(),i||null,s)}let vn=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Os;static#t=this.NULL=new ks;static create(t,i){if(Array.isArray(t))return Ll({name:""},i,t,"");{const s=t.name??"";return Ll({name:s},t.parent,t.providers,s)}}static#n=this.\u0275prov=ne({token:e,providedIn:"any",factory:()=>Oe(Da)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function Ag(e){return e.ngOriginalError}class cs{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Ag(n);for(;t&&Ag(t);)t=Ag(t);return t||null}}const ky=new Pe("",{providedIn:"root",factory:()=>Te(cs).handleError.bind(void 0)});let Dc=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Yw;static#t=this.__NG_ENV_ID__=t=>t}return e})();class Xw extends Dc{constructor(n){super(),this._lView=n}onDestroy(n){return Ih(this._lView,n),()=>function cg(e,n){if(null===e[wi])return;const t=e[wi].indexOf(n);-1!==t&&e[wi].splice(t,1)}(this._lView,n)}}function Yw(){return new Xw(fe())}function Zw(){return Ac(Sn(),fe())}function Ac(e,n){return new Ki(xi(e,n))}let Ki=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=Zw}return e})();function By(e){return e instanceof Ki?e.nativeElement:e}function Ig(e){return n=>{setTimeout(e,void 0,n)}}const Nn=class Jw extends Ar{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Th()&&(this.destroyRef=Te(Dc,{optional:!0})??void 0)}emit(n){const t=nt(null);try{super.next(n)}finally{nt(t)}}subscribe(n,t,i){let s=n,l=t||(()=>null),u=i;if(n&&"object"==typeof n){const m=n;s=m.next?.bind(m),l=m.error?.bind(m),u=m.complete?.bind(m)}this.__isAsync&&(l=Ig(l),s&&(s=Ig(s)),u&&(u=Ig(u)));const p=super.subscribe({next:s,error:l,complete:u});return n instanceof Tr&&n.add(p),p}};function Qw(){return this._results[Symbol.iterator]()}class Rg{static#e=Symbol.iterator;get changes(){return this._changes??=new Nn}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=Rg.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Qw)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;const i=function ci(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function fc(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],l=n[i];if(t&&(s=t(s),l=t(l)),l!==s)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Uh(e){return!(128&~e.flags)}const Pg=new Map;let ex=0;const Og="__ngContext__";function pi(e,n){Qn(n)?(e[Og]=n[Nu],function nx(e){Pg.set(e[Nu],e)}(n)):e[Og]=n}function Xy(e){return Zy(e[Zn])}function Yy(e){return Zy(e[Oi])}function Zy(e){for(;null!==e&&!Mr(e);)e=e[Oi];return e}let Ug;function Ga(){if(void 0!==Ug)return Ug;if(typeof document<"u")return document;throw new we(210,!1)}const Wh=new Pe("",{providedIn:"root",factory:()=>vx}),vx="ng",t_=new Pe(""),us=new Pe("",{providedIn:"platform",factory:()=>"unknown"}),n_=new Pe("",{providedIn:"root",factory:()=>Ga().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let i_=()=>null;function Nc(e,n,t=!1){return i_(e,n,t)}const Kh=new Pe("",{providedIn:"root",factory:()=>!1});let kl,tf;function Bc(e){return function ef(){if(void 0===kl&&(kl=null,on.trustedTypes))try{kl=on.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return kl}()?.createHTML(e)||e}function nf(){if(void 0===tf&&(tf=null,on.trustedTypes))try{tf=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return tf}function rd(e){return nf()?.createHTML(e)||e}function Vl(e){return nf()?.createScriptURL(e)||e}class Gg{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nr})`}}function Lo(e){return e instanceof Gg?e.changingThisBreaksApplicationSecurity:e}function Qs(e,n){const t=function c_(e){return e instanceof Gg&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Nr})`)}return t===n}class Ks{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Bc(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class d_{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=Bc(n),t}}const ki=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sd(e){return(e=String(e)).match(ki)?e:"unsafe:"+e}function Si(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Hc(...e){const n={};for(const t of e)for(const i in t)t.hasOwnProperty(i)&&(n[i]=!0);return n}const sf=Si("area,br,col,hr,img,wbr"),ad=Si("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ld=Si("rp,rt"),Wg=Hc(sf,Hc(ad,Si("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Hc(ld,Si("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hc(ld,ad)),lf=Si("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bl=Hc(lf,Si("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Si("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cf=Si("script,style,template");class ja{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,i=!0,s=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)s.push(t),t=hf(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let l=df(t);if(l){t=l;break}t=s.pop()}return this.buf.join("")}startElement(n){const t=ff(n).toLowerCase();if(!Wg.hasOwnProperty(t))return this.sanitizedSomething=!0,!cf.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=n.attributes;for(let s=0;s<i.length;s++){const l=i.item(s),u=l.name,p=u.toLowerCase();if(!Bl.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let m=l.value;lf[p]&&(m=sd(m)),this.buf.push(" ",u,'="',ud(m),'"')}return this.buf.push(">"),!0}endElement(n){const t=ff(n).toLowerCase();Wg.hasOwnProperty(t)&&!sf.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(ud(n))}}function df(e){const n=e.nextSibling;if(n&&e!==n.previousSibling)throw cd(n);return n}function hf(e){const n=e.firstChild;if(n&&function uf(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,n))throw cd(n);return n}function ff(e){const n=e.nodeName;return"string"==typeof n?n:"FORM"}function cd(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const f_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mo=/([^\#-~ |!])/g;function ud(e){return e.replace(/&/g,"&amp;").replace(f_,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(mo,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dd;function zc(e){return"content"in e&&function qg(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var $a=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}($a||{});function hd(e){const n=ta();return n?rd(n.sanitize($a.HTML,e)||""):Qs(e,"HTML")?rd(Lo(e)):function $g(e,n){let t=null;try{dd=dd||function od(e){const n=new d_(e);return function h_(){try{return!!(new window.DOMParser).parseFromString(Bc(""),"text/html")}catch{return!1}}()?new Ks(n):n}(e);let i=n?String(n):"";t=dd.getInertBodyElement(i);let s=5,l=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=l,l=t.innerHTML,t=dd.getInertBodyElement(i)}while(i!==l);return Bc((new ja).sanitizeChildren(zc(t)||t))}finally{if(t){const i=zc(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(Ga(),It(e))}function ea(e){const n=ta();return n?n.sanitize($a.URL,e)||"":Qs(e,"URL")?Lo(e):sd(It(e))}function g_(e){const n=ta();if(n)return Vl(n.sanitize($a.RESOURCE_URL,e)||"");if(Qs(e,"ResourceURL"))return Vl(Lo(e));throw new we(904,!1)}function ta(){const e=fe();return e&&e[Ji].sanitizer}function eo(e){return e instanceof Function?e():e}var na=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(na||{});let Ul;function gd(e,n){return Ul(e,n)}function Vi(e,n,t,i,s){if(null!=i){let l,u=!1;Mr(i)?l=i:Qn(i)&&(u=!0,i=i[cn]);const p=Pn(i);0===e&&null!==t?null==s?im(n,t,p):qa(n,t,p,s||null,!0):1===e&&null!==t?qa(n,t,p,s||null,!0):2===e?function Bi(e,n,t){const i=bd(e,n);i&&function om(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}(n,p,u):3===e&&n.destroyNode(p),null!=l&&function jc(e,n,t,i,s){const l=t[Li];l!==Pn(t)&&Vi(n,e,i,l,s);for(let p=xr;p<t.length;p++){const m=t[p];Xa(m[Re],m,e,n,i,l)}}(n,e,l,t,s)}}function wf(e,n,t){return e.createElement(n,t)}function md(e,n){n[Ji].changeDetectionScheduler?.notify(1),Xa(e,n,n[ht],2,null,null)}function M_(e,n){const t=e[La],i=t.indexOf(n);t.splice(i,1)}function ra(e,n){if(e.length<=xr)return;const t=xr+n,i=e[t];if(i){const s=i[rs];null!==s&&s!==e&&M_(s,i),n>0&&(e[t-1][Oi]=i[Oi]);const l=Qo(e,xr+n);!function Ux(e,n){md(e,n),n[cn]=null,n[Fr]=null}(i[Re],i);const u=l[Gs];null!==u&&u.detachView(l[Re]),i[cr]=null,i[Oi]=null,i[tt]&=-129}return i}function Hl(e,n){if(!(256&n[tt])){const t=n[ht];t.destroyNode&&Xa(e,n,t,3,null,null),function vd(e){let n=e[Zn];if(!n)return Wc(e[Re],e);for(;n;){let t=null;if(Qn(n))t=n[Zn];else{const i=n[xr];i&&(t=i)}if(!t){for(;n&&!n[Oi]&&n!==e;)Qn(n)&&Wc(n[Re],n),n=n[cr];null===n&&(n=e),Qn(n)&&Wc(n[Re],n),t=n&&n[Oi]}n=t}}(n)}}function Wc(e,n){if(256&n[tt])return;const t=nt(null);try{n[tt]&=-129,n[tt]|=256,n[Jn]&&function pl(e){if(Cs(e),yi(e))for(let n=0;n<e.producerNode.length;n++)Ss(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Jn]),function Sf(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const s=n[t[i]];if(!(s instanceof Nh)){const l=t[i+1];if(Array.isArray(l))for(let u=0;u<l.length;u+=2){const p=s[l[u]],m=l[u+1];os(4,p,m);try{m.call(p)}finally{os(5,p,m)}}else{os(4,s,l);try{l.call(s)}finally{os(5,s,l)}}}}}(e,n),function Ef(e,n){const t=e.cleanup,i=n[Hs];if(null!==t)for(let l=0;l<t.length-1;l+=2)if("string"==typeof t[l]){const u=t[l+3];u>=0?i[u]():i[-u].unsubscribe(),l+=2}else t[l].call(i[t[l+1]]);null!==i&&(n[Hs]=null);const s=n[wi];if(null!==s){n[wi]=null;for(let l=0;l<s.length;l++)(0,s[l])()}}(e,n),1===n[Re].type&&n[ht].destroy();const i=n[rs];if(null!==i&&Mr(n[cr])){i!==n[cr]&&M_(i,n);const s=n[Gs];null!==s&&s.detachView(e)}!function rx(e){Pg.delete(e[Nu])}(n)}finally{nt(t)}}function Cf(e,n,t){return function rm(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[cn];{const{componentOffset:s}=i;if(s>-1){const{encapsulation:l}=e.data[i.directiveStart+s];if(l===ui.None||l===ui.Emulated)return null}return xi(i,t)}}(e,n.parent,t)}function qa(e,n,t,i,s){e.insertBefore(n,t,i,s)}function im(e,n,t){e.appendChild(n,t)}function _d(e,n,t,i,s){null!==i?qa(e,n,t,i,s):im(e,n,t)}function bd(e,n){return e.parentNode(n)}let um,cm=function lm(e,n,t){return 40&e.type?xi(e,t):null};function vo(e,n,t,i){const s=Cf(e,i,n),l=n[ht],p=function am(e,n,t){return cm(e,n,t)}(i.parent||n[Fr],i,n);if(null!=s)if(Array.isArray(t))for(let m=0;m<t.length;m++)_d(l,s,t[m],p,!1);else _d(l,s,t,p,!1);void 0!==um&&um(l,i,n,t,s)}function wd(e,n){if(null!==n){const t=n.type;if(3&t)return xi(n,e);if(4&t)return hm(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return wd(e,i);{const s=e[n.index];return Mr(s)?hm(-1,s):Pn(s)}}if(32&t)return gd(n,e)()||Pn(e[n.index]);{const i=dm(e,n);return null!==i?Array.isArray(i)?i[0]:wd(Rl(e[mn]),i):wd(e,n.next)}}return null}function dm(e,n){return null!==n?e[mn][Fr].projection[n.projection]:null}function hm(e,n){const t=xr+e+1;if(t<n.length){const i=n[t],s=i[Re].firstChild;if(null!==s)return wd(i,s)}return n[Li]}function Tf(e,n,t,i,s,l,u){for(;null!=t;){const p=i[t.index],m=t.type;if(u&&0===n&&(p&&pi(Pn(p),i),t.flags|=2),32&~t.flags)if(8&m)Tf(e,n,t.child,i,s,l,!1),Vi(n,e,s,p,l);else if(32&m){const _=gd(t,i);let S;for(;S=_();)Vi(n,e,s,S,l);Vi(n,e,s,p,l)}else 16&m?Gl(e,n,i,t,s,l):Vi(n,e,s,p,l);t=u?t.projectionNext:t.next}}function Xa(e,n,t,i,s,l){Tf(t,i,e.firstChild,n,s,l,!1)}function Gl(e,n,t,i,s,l){const u=t[mn],m=u[Fr].projection[i.projection];if(Array.isArray(m))for(let _=0;_<m.length;_++)Vi(n,e,s,m[_],l);else{let _=m;const S=u[cr];Uh(i)&&(_.flags|=128),Tf(e,n,_,S,s,l,!0)}}function E_(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function S_(e,n,t){const{mergedAttrs:i,classes:s,styles:l}=t;null!==i&&Bs(e,n,i),null!==s&&E_(e,n,s),null!==l&&function Md(e,n,t){e.setAttribute(n,"style",t)}(e,n,l)}const mt={};function xe(e=1){fm(Xt(),fe(),Ei()+e,!1)}function fm(e,n,t,i){if(!i)if(3&~n[tt]){const l=e.preOrderHooks;null!==l&&vg(n,l,0,t)}else{const l=e.preOrderCheckHooks;null!==l&&mg(n,l,t)}Sc(t)}function ce(e,n=Pt.Default){const t=fe();return null===t?Oe(e,n):Nl(Sn(),t,ut(e),n)}function Vo(e,n,t,i,s,l){const u=nt(null);try{let p=null;s&an.SignalBased&&(p=n[i][yr]),null!==p&&void 0!==p.transformFn&&(l=p.transformFn(l)),s&an.HasDecoratorInputTransform&&(l=e.inputTransforms[i].call(n,l)),null!==e.setInput?e.setInput(n,p,l,t,i):ay(n,p,i,l)}finally{nt(u)}}function pm(e,n,t,i,s,l,u,p,m,_,S){const A=n.blueprint.slice();return A[cn]=s,A[tt]=204|i,(null!==_||e&&2048&e[tt])&&(A[tt]|=2048),py(A),A[cr]=A[zs]=e,A[En]=t,A[Ji]=u||e&&e[Ji],A[ht]=p||e&&e[ht],A[br]=m||e&&e[br]||null,A[Fr]=l,A[Nu]=function tx(){return ex++}(),A[hi]=S,A[ry]=_,A[mn]=2==n.type?e[mn]:A,A}function ia(e,n,t,i,s){let l=e.data[n];if(null===l)l=function gm(e,n,t,i,s){const l=yy(),u=ug(),m=e.data[n]=function xm(e,n,t,i,s,l){let u=n?n.injectorIndex:-1,p=0;return function Ec(){return null!==vt.skipHydrationRootTNode}()&&(p|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:p,providerIndexes:0,value:s,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?l:l&&l.parent,t,n,i,s);return null===e.firstChild&&(e.firstChild=m),null!==l&&(u?null==l.child&&null!==m.parent&&(l.child=m):null===l.next&&(l.next=m,m.prev=l)),m}(e,n,t,i,s),function Iw(){return vt.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=t,l.value=i,l.attrs=s;const u=function Vu(){const e=vt.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===u?-1:u.injectorIndex}return as(l,!0),l}function Ed(e,n,t,i){if(0===t)return-1;const s=n.length;for(let l=0;l<t;l++)n.push(i),e.blueprint.push(i),e.data.push(null);return s}function mm(e,n,t,i,s){const l=Ei(),u=2&i;try{Sc(-1),u&&n.length>pt&&fm(e,n,pt,!1),os(u?2:0,s),t(i,s)}finally{Sc(l),os(u?3:1,s)}}function yo(e,n,t){if(xc(n)){const i=nt(null);try{const l=n.directiveEnd;for(let u=n.directiveStart;u<l;u++){const p=e.data[u];p.contentQueries&&p.contentQueries(1,t[u],u)}}finally{nt(i)}}}function Sd(e,n,t){vy()&&(function R_(e,n,t,i){const s=t.directiveStart,l=t.directiveEnd;is(t)&&function O_(e,n,t){const i=xi(n,e),s=vm(t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const p=Lf(e,pm(e,s,null,u,i,n,null,e[Ji].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=p}(n,t,e.data[s+t.componentOffset]),e.firstCreatePass||Ys(t,n),pi(i,n);const u=t.initialInputs;for(let p=s;p<l;p++){const m=e.data[p],_=Ba(n,e,p,t);pi(_,n),null!==u&&Xx(0,p-s,_,m,0,u),Io(m)&&(Qi(t.index,n)[En]=Ba(n,e,p,t))}}(e,n,t,xi(t,n)),!(64&~t.flags)&&Sm(e,n,t))}function Df(e,n,t=xi){const i=n.localNames;if(null!==i){let s=n.index+1;for(let l=0;l<i.length;l+=2){const u=i[l+1],p=-1===u?t(n,e):e[u];e[s++]=p}}}function vm(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Af(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Af(e,n,t,i,s,l,u,p,m,_,S){const A=pt+i,O=A+s,H=function ym(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:mt);return t}(A,O),$="function"==typeof _?_():_;return H[Re]={type:e,blueprint:H,template:t,queries:null,viewQuery:p,declTNode:n,data:H.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:m,consts:$,incompleteFirstPass:!1,ssrId:S}}let bm=()=>null;function Mm(e,n,t,i,s){for(let l in n){if(!n.hasOwnProperty(l))continue;const u=n[l];if(void 0===u)continue;i??={};let p,m=an.None;Array.isArray(u)?(p=u[0],m=u[1]):p=u;let _=l;if(null!==s){if(!s.hasOwnProperty(l))continue;_=s[l]}0===e?If(i,t,_,p,m):If(i,t,_,p)}return i}function If(e,n,t,i,s){let l;e.hasOwnProperty(t)?(l=e[t]).push(n,i):l=e[t]=[n,i],void 0!==s&&l.push(s)}function Ci(e,n,t,i,s,l,u,p){const m=xi(n,t);let S,_=n.inputs;!p&&null!=_&&(S=_[i])?(sa(e,t,S,i,s),is(n)&&function Rf(e,n){const t=Qi(n,e);16&t[tt]||(t[tt]|=64)}(t,n.index)):3&n.type&&(i=function A_(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),s=null!=u?u(s,n.value||"",i):s,l.setProperty(m,i,s))}function Pf(e,n,t,i){if(vy()){const s=null===i?null:{"":-1},l=function Nf(e,n){const t=e.directiveRegistry;let i=null,s=null;if(t)for(let l=0;l<t.length;l++){const u=t[l];if(yh(n,u.selectors,!1))if(i||(i=[]),Io(u))if(null!==u.findHostDirectiveDefs){const p=[];s=s||new Map,u.findHostDirectiveDefs(u,p,s),i.unshift(...p,u),Of(e,n,p.length)}else i.unshift(u),Of(e,n,0);else s=s||new Map,u.findHostDirectiveDefs?.(u,i,s),i.push(u)}return null===i?null:[i,s]}(e,t);let u,p;null===l?u=p=null:[u,p]=l,null!==u&&I_(e,n,t,u,s,p),s&&function jx(e,n,t){if(n){const i=e.localNames=[];for(let s=0;s<n.length;s+=2){const l=t[n[s+1]];if(null==l)throw new we(-301,!1);i.push(n[s],l)}}}(t,i,s)}t.mergedAttrs=Ia(t.mergedAttrs,t.attrs)}function I_(e,n,t,i,s,l){for(let _=0;_<i.length;_++)Tc(Ys(t,n),e,i[_].type);!function qx(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let _=0;_<i.length;_++){const S=i[_];S.providersResolver&&S.providersResolver(S)}let u=!1,p=!1,m=Ed(e,n,i.length,null);for(let _=0;_<i.length;_++){const S=i[_];t.mergedAttrs=Ia(t.mergedAttrs,S.hostAttrs),N_(e,t,n,m,S),$x(m,S,s),null!==S.contentQueries&&(t.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(t.flags|=64);const A=S.type.prototype;!u&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),u=!0),!p&&(A.ngOnChanges||A.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),p=!0),m++}!function D_(e,n,t){const s=n.directiveEnd,l=e.data,u=n.attrs,p=[];let m=null,_=null;for(let S=n.directiveStart;S<s;S++){const A=l[S],O=t?t.get(A):null,$=O?O.outputs:null;m=Mm(0,A.inputs,S,m,O?O.inputs:null),_=Mm(1,A.outputs,S,_,$);const Y=null===m||null===u||mh(n)?null:F_(m,S,u);p.push(Y)}null!==m&&(m.hasOwnProperty("class")&&(n.flags|=8),m.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=p,n.inputs=m,n.outputs=_}(e,t,l)}function Sm(e,n,t){const i=t.directiveStart,s=t.directiveEnd,l=t.index,u=function Pw(){return vt.lFrame.currentDirectiveIndex}();try{Sc(l);for(let p=i;p<s;p++){const m=e.data[p],_=n[p];hg(p),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&P_(m,_)}}finally{Sc(-1),hg(u)}}function P_(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Of(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function $x(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;Io(n)&&(t[""]=e)}}function N_(e,n,t,i,s){e.data[i]=s;const l=s.factory||(s.factory=Fs(s.type)),u=new Nh(l,Io(s),ce);e.blueprint[i]=u,t[i]=u,function JC(e,n,t,i,s){const l=s.hostBindings;if(l){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const p=~n.index;(function Wx(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(u)!=p&&u.push(p),u.push(t,i,l)}}(e,n,i,Ed(e,t,s.hostVars,mt),s)}function gi(e,n,t,i,s,l){const u=xi(e,n);!function L_(e,n,t,i,s,l,u){if(null==l)e.removeAttribute(n,s,t);else{const p=null==u?It(l):u(l,i||"",s);e.setAttribute(n,s,p,t)}}(n[ht],u,l,e.value,t,i,s)}function Xx(e,n,t,i,s,l){const u=l[n];if(null!==u)for(let p=0;p<u.length;)Vo(i,t,u[p++],u[p++],u[p++],u[p++])}function F_(e,n,t){let i=null,s=0;for(;s<t.length;){const l=t[s];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===i&&(i=[]);const u=e[l];for(let p=0;p<u.length;p+=3)if(u[p]===n){i.push(l,u[p+1],u[p+2],t[s+1]);break}}s+=2}else s+=2;else s+=4}return i}function Ya(e,n,t,i){return[e,!0,0,n,null,i,null,t,null,null]}function Cm(e,n){const t=e.contentQueries;if(null!==t){const i=nt(null);try{for(let s=0;s<t.length;s+=2){const u=t[s+1];if(-1!==u){const p=e.data[u];Rh(t[s]),p.contentQueries(2,n[u],u)}}}finally{nt(i)}}}function Lf(e,n){return e[Zn]?e[ny][Oi]=n:e[Zn]=n,e[ny]=n,n}function oa(e,n,t){Rh(0);const i=nt(null);try{n(e,t)}finally{nt(i)}}function Tm(e){return e[Hs]||(e[Hs]=[])}function Za(e){return e.cleanup||(e.cleanup=[])}function Ff(e,n){const t=e[br],i=t?t.get(cs,null):null;i&&i.handleError(n)}function sa(e,n,t,i,s){for(let l=0;l<t.length;){const u=t[l++],p=t[l++],m=t[l++];Vo(e.data[u],n[u],i,p,m,s)}}function Yx(e,n){const t=Qi(n,e),i=t[Re];!function Zx(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const s=t[cn];null!==s&&null===t[hi]&&(t[hi]=Nc(s,t[br])),Td(i,t,t[En])}function Td(e,n,t){xy(n);try{const i=e.viewQuery;null!==i&&oa(1,i,t);const s=e.template;null!==s&&mm(e,n,s,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Gs]?.finishViewCreation(e),e.staticContentQueries&&Cm(e,n),e.staticViewQueries&&oa(2,e.viewQuery,t);const l=e.components;null!==l&&function Jx(e,n){for(let t=0;t<n.length;t++)Yx(e,n[t])}(n,l)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[tt]&=-5,My()}}function $c(e,n){return!n||null===n.firstChild||Uh(e)}function Dd(e,n,t,i=!0){const s=n[Re];if(function Mf(e,n,t,i){const s=xr+i,l=t.length;i>0&&(t[s-1][Oi]=n),i<l-xr?(n[Oi]=t[s],Sl(t,xr+i,n)):(t.push(n),n[Oi]=null),n[cr]=t;const u=n[rs];null!==u&&t!==u&&function yd(e,n){const t=e[La];n[mn]!==n[cr][cr][mn]&&(e[tt]|=tg.HasTransplantedViews),null===t?e[La]=[n]:t.push(n)}(u,n);const p=n[Gs];null!==p&&p.insertView(e),lg(n),n[tt]|=128}(s,n,e,t),i){const u=hm(t,e),p=n[ht],m=bd(p,e[Li]);null!==m&&function xf(e,n,t,i,s,l){i[cn]=s,i[Fr]=n,Xa(e,i,t,1,s,l)}(s,e[Fr],p,n,m,u)}const l=n[hi];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Ad(e,n,t,i,s=!1){for(;null!==t;){const l=n[t.index];null!==l&&i.push(Pn(l)),Mr(l)&&V_(l,i);const u=t.type;if(8&u)Ad(e,n,t.child,i);else if(32&u){const p=gd(t,n);let m;for(;m=p();)i.push(m)}else if(16&u){const p=dm(n,t);if(Array.isArray(p))i.push(...p);else{const m=Rl(n[mn]);Ad(m[Re],m,p,i,!0)}}t=s?t.projectionNext:t.next}return i}function V_(e,n){for(let t=xr;t<e.length;t++){const i=e[t],s=i[Re].firstChild;null!==s&&Ad(i[Re],i,s,n)}e[Li]!==e[cn]&&n.push(e[Li])}let B_=[];const eM={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{ku(e.lView)},consumerOnSignalRead(){this.lView[Jn]=this}},U_=100;function qc(e,n=!0,t=0){const i=e[Ji],s=i.rendererFactory;s.begin?.();try{!function tM(e,n){jl(e,n);let t=0;for(;ag(e);){if(t===U_)throw new we(103,!1);t++,jl(e,1)}}(e,t)}catch(u){throw n&&Ff(e,u),u}finally{s.end?.(),i.inlineEffectRunner?.flush()}}function KC(e,n,t,i){const s=n[tt];if(!(256&~s))return;n[Ji].inlineEffectRunner?.flush(),xy(n);let u=null,p=null;(function H_(e){return 2!==e.type})(e)&&(p=function Qx(e){return e[Jn]??function Hn(e){const n=B_.pop()??Object.create(eM);return n.lView=e,n}(e)}(n),u=function vi(e){return e&&(e.nextProducerIndex=0),nt(e)}(p));try{py(n),function by(e){return vt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&mm(e,n,t,2,i);const m=!(3&~s);if(m){const A=e.preOrderCheckHooks;null!==A&&mg(n,A,null)}else{const A=e.preOrderHooks;null!==A&&vg(n,A,0,null),Ey(n,0)}if(function nM(e){for(let n=Xy(e);null!==n;n=Yy(n)){if(!(n[tt]&tg.HasTransplantedViews))continue;const t=n[La];for(let i=0;i<t.length;i++){bw(t[i])}}}(n),kf(n,0),null!==e.contentQueries&&Cm(e,n),m){const A=e.contentCheckHooks;null!==A&&mg(n,A)}else{const A=e.contentHooks;null!==A&&vg(n,A,1),Ey(n,1)}!function ZC(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Sc(~s);else{const l=s,u=t[++i],p=t[++i];Rw(u,l),p(2,n[l])}}}finally{Sc(-1)}}(e,n);const _=e.components;null!==_&&Rm(n,_,0);const S=e.viewQuery;if(null!==S&&oa(2,S,i),m){const A=e.viewCheckHooks;null!==A&&mg(n,A)}else{const A=e.viewHooks;null!==A&&vg(n,A,2),Ey(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[Al]){for(const A of n[Al])A();n[Al]=null}n[tt]&=-73}catch(m){throw ku(n),m}finally{null!==p&&(function kn(e,n){if(nt(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(yi(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Ss(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(p,u),function Kx(e){e.lView[Jn]!==e&&(e.lView=null,B_.push(e))}(p)),My()}}function kf(e,n){for(let t=Xy(e);null!==t;t=Yy(t))for(let i=xr;i<t.length;i++)Im(t[i],n)}function eT(e,n,t){Im(Qi(n,e),t)}function Im(e,n){sg(e)&&jl(e,n)}function jl(e,n){const i=e[Re],s=e[tt],l=e[Jn];let u=!!(0===n&&16&s);if(u||=!!(64&s&&0===n),u||=!!(1024&s),u||=!(!l?.dirty||!Es(l)),l&&(l.dirty=!1),e[tt]&=-9217,u)KC(i,e,i.template,e[En]);else if(8192&s){kf(e,1);const p=i.components;null!==p&&Rm(e,p,1)}}function Rm(e,n,t){for(let i=0;i<n.length;i++)eT(e,n[i],t)}function Qa(e){for(e[Ji].changeDetectionScheduler?.notify();e;){e[tt]|=64;const n=Rl(e);if(Fa(e)&&!n)return e;e=n}return null}class Id{get rootNodes(){const n=this._lView,t=n[Re];return Ad(t,n,t.firstChild,[])}constructor(n,t,i=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(n){this._lView[En]=n}get destroyed(){return!(256&~this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[cr];if(Mr(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(ra(n,i),Qo(t,i))}this._attachedToViewContainer=!1}Hl(this._lView[Re],this._lView)}onDestroy(n){Ih(this._lView,n)}markForCheck(){Qa(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){lg(this._lView),this._lView[tt]|=128}detectChanges(){this._lView[tt]|=1024,qc(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,md(this._lView[Re],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=n,lg(this._lView)}}let gs=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Vf}return e})();const tT=gs,Ka=class extends tT{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const s=function Wl(e,n,t,i){const s=nt(null);try{const l=n.tView,m=pm(e,l,t,4096&e[tt]?4096:16,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);m[rs]=e[n.index];const S=e[Gs];return null!==S&&(m[Gs]=S.createEmbeddedView(l)),Td(l,m,t),m}finally{nt(s)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:i});return new Id(s)}};function Vf(){return Xc(Sn(),fe())}function Xc(e,n){return 4&e.type?new Ka(n,e,Ac(e,n)):null}class Q_{}class mT{}class aM{}class yT{resolveComponentFactory(n){throw function vT(e){const n=Error(`No component factory found for ${xn(e)}.`);return n.ngComponent=e,n}(n)}}let km=(()=>{class e{static#e=this.NULL=new yT}return e})();class cM{}let nl=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function _T(){const e=fe(),t=Qi(Sn().index,e);return(Qn(t)?t:e)[ht]}()}return e})(),bT=(()=>{class e{static#e=this.\u0275prov=ne({token:e,providedIn:"root",factory:()=>null})}return e})();const K_={},uM=new Set;function aa(e){uM.has(e)||(uM.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function dM(...e){}class Tn{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nn(!1),this.onMicrotaskEmpty=new Nn(!1),this.onStable=new Nn(!1),this.onError=new Nn(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&t,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function wT(){const e="function"==typeof on.requestAnimationFrame;let n=on[e?"requestAnimationFrame":"setTimeout"],t=on[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function r(e){const n=()=>{!function h(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(on,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,o(e),e.isCheckStableRunning=!0,eb(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),o(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,s,l,u,p)=>{if(function f(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(p))return t.invokeTask(s,l,u,p);try{return a(e),t.invokeTask(s,l,u,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),c(e)}},onInvoke:(t,i,s,l,u,p,m)=>{try{return a(e),t.invoke(s,l,u,p,m)}finally{e.shouldCoalesceRunChangeDetection&&n(),c(e)}},onHasTask:(t,i,s,l)=>{t.hasTask(s,l),i===s&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,o(e),eb(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(t,i,s,l)=>(t.handleError(s,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tn.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Tn.isInAngularZone())throw new we(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,s){const l=this._inner,u=l.scheduleEventTask("NgZoneEvent: "+s,n,xT,dM,dM);try{return l.runTask(u,t,i)}finally{l.cancelTask(u)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const xT={};function eb(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function o(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function a(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function c(e){e._nesting--,eb(e)}class d{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nn,this.onMicrotaskEmpty=new Nn,this.onStable=new Nn,this.onError=new Nn}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,s){return n.apply(t,i)}}var v=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(v||{});const y={destroy(){}};function x(e,n){!n&&function Dh(e){if(!Th())throw new we(-203,!1)}();const t=n?.injector??Te(vn);if(!function un(e){return"browser"===(e??Te(vn)).get(us)}(t))return y;aa("NgAfterNextRender");const i=t.get(D),s=i.handler??=new C,l=n?.phase??v.MixedReadWrite,u=()=>{s.unregister(m),p()},p=t.get(Dc).onDestroy(u),m=ts(t,()=>new M(l,()=>{u(),e()}));return s.register(m),{destroy:u}}class M{constructor(n,t){this.phase=n,this.callbackFn=t,this.zone=Te(Tn),this.errorHandler=Te(cs,{optional:!0}),Te(Q_,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class C{constructor(){this.executingCallbacks=!1,this.buckets={[v.EarlyRead]:new Set,[v.Write]:new Set,[v.MixedReadWrite]:new Set,[v.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const t of n)t.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let D=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ne({token:e,providedIn:"root",factory:()=>new e})}return e})();function q(e,n,t){let i=t?e.styles:null,s=t?e.classes:null,l=0;if(null!==n)for(let u=0;u<n.length;u++){const p=n[u];"number"==typeof p?l=p:1==l?s=Ii(s,p):2==l&&(i=Ii(i,p+": "+n[++u]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=s:e.classesWithoutHost=s}class K extends km{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ut(n);return new ve(t,this.ngModule)}}function ie(e){const n=[];for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t];void 0!==i&&n.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return n}class te{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=dh(i);const s=this.injector.get(n,K_,i);return s!==K_||t===K_?s:this.parentInjector.get(n,t,i)}}class ve extends aM{get inputs(){const n=this.componentDef,t=n.inputTransforms,i=ie(n.inputs);if(null!==t)for(const s of i)t.hasOwnProperty(s.propName)&&(s.transform=t[s.propName]);return i}get outputs(){return ie(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Je(e){return e.map(Cl).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,s){const l=nt(null);try{let u=(s=s||this.ngModule)instanceof Ni?s:s?.injector;u&&null!==this.componentDef.getStandaloneInjector&&(u=this.componentDef.getStandaloneInjector(u)||u);const p=u?new te(n,u):n,m=p.get(cM,null);if(null===m)throw new we(407,!1);const _=p.get(bT,null),O={rendererFactory:m,sanitizer:_,inlineEffectRunner:null,afterRenderEventManager:p.get(D,null),changeDetectionScheduler:p.get(Q_,null)},H=m.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Y=i?function C_(e,n,t,i){const l=i.get(Kh,!1)||t===ui.ShadowDom,u=e.selectRootElement(n,l);return function _m(e){bm(e)}(u),u}(H,i,this.componentDef.encapsulation,p):wf(H,$,function le(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}($));let se=512;this.componentDef.signals?se|=4096:this.componentDef.onPush||(se|=16);let pe=null;null!==Y&&(pe=Nc(Y,p,!0));const de=Af(0,null,null,1,0,null,null,null,null,null,null),Ve=pm(null,de,null,se,null,null,O,H,p,null,pe);let bt,Kt;xy(Ve);try{const In=this.componentDef;let mi,Kl=null;In.findHostDirectiveDefs?(mi=[],Kl=new Map,In.findHostDirectiveDefs(In,mi,Kl),mi.push(In)):mi=[In];const gO=function Ze(e,n){const t=e[Re],i=pt;return e[i]=n,ia(t,i,2,"#host",null)}(Ve,Y),jW=function _e(e,n,t,i,s,l,u){const p=s[Re];!function De(e,n,t,i){for(const s of e)n.mergedAttrs=Ia(n.mergedAttrs,s.hostAttrs);null!==n.mergedAttrs&&(q(n,n.mergedAttrs,!0),null!==t&&S_(i,t,n))}(i,e,n,u);let m=null;null!==n&&(m=Nc(n,s[br]));const _=l.rendererFactory.createRenderer(n,t);let S=16;t.signals?S=4096:t.onPush&&(S=64);const A=pm(s,vm(t),null,S,s[e.index],e,l,_,null,null,m);return p.firstCreatePass&&Of(p,e,i.length-1),Lf(s,A),s[e.index]=A}(gO,Y,In,mi,Ve,O,H);Kt=Fu(de,pt),Y&&function et(e,n,t,i){if(i)Bs(e,t,["ng-version","17.3.6"]);else{const{attrs:s,classes:l}=function gc(e){const n=[],t=[];let i=1,s=2;for(;i<e.length;){let l=e[i];if("string"==typeof l)2===s?""!==l&&n.push(l,e[++i]):8===s&&t.push(l);else{if(!jr(s))break;s=l}i++}return{attrs:n,classes:t}}(n.selectors[0]);s&&Bs(e,t,s),l&&l.length>0&&E_(e,t,l.join(" "))}}(H,In,Y,i),void 0!==t&&function at(e,n,t){const i=e.projection=[];for(let s=0;s<n.length;s++){const l=t[s];i.push(null!=l?Array.from(l):null)}}(Kt,this.ngContentSelectors,t),bt=function Ge(e,n,t,i,s,l){const u=Sn(),p=s[Re],m=xi(u,s);I_(p,s,u,t,null,i);for(let S=0;S<t.length;S++)pi(Ba(s,p,u.directiveStart+S,u),s);Sm(p,s,u),m&&pi(m,s);const _=Ba(s,p,u.directiveStart+u.componentOffset,u);if(e[En]=s[En]=_,null!==l)for(const S of l)S(_,n);return yo(p,u,s),_}(jW,In,mi,Kl,Ve,[me]),Td(de,Ve,null)}finally{My()}return new Ie(this.componentType,bt,Ac(Kt,Ve),Ve,Kt)}finally{nt(l)}}}class Ie extends mT{constructor(n,t,i,s,l){super(),this.location=i,this._rootLView=s,this._tNode=l,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Id(s,void 0,!1),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let s;if(null!==i&&(s=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const l=this._rootLView;sa(l[Re],l,s,n,t),this.previousInputValues.set(n,t),Qa(Qi(this._tNode.index,l))}}get injector(){return new kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function me(){const e=Sn();gg(fe()[Re],e)}let Vt=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ot}return e})();function ot(){return Ee(Sn(),fe())}const Mt=Vt,Ye=class extends Mt{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new kr(this._hostTNode,this._hostLView)}get parentInjector(){const n=Gu(this._hostTNode,this._hostLView);if(yg(n)){const t=Hu(n,this._hostLView),i=Uu(n);return new kr(t[Re].data[i+8],t)}return new kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Ht(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-xr}createEmbeddedView(n,t,i){let s,l;"number"==typeof i?s=i:null!=i&&(s=i.index,l=i.injector);const p=n.createEmbeddedViewImpl(t||{},l,null);return this.insertImpl(p,s,$c(this._hostTNode,null)),p}createComponent(n,t,i,s,l){const u=n&&!function ti(e){return"function"==typeof e}(n);let p;if(u)p=t;else{const $=t||{};p=$.index,i=$.injector,s=$.projectableNodes,l=$.environmentInjector||$.ngModuleRef}const m=u?n:new ve(Ut(n)),_=i||this.parentInjector;if(!l&&null==m.ngModule){const Y=(u?_:this.parentInjector).get(Ni,null);Y&&(l=Y)}Ut(m.componentType??{});const H=m.create(_,s,null,l);return this.insertImpl(H.hostView,p,$c(this._hostTNode,null)),H}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,i){const s=n._lView;if(function _w(e){return Mr(e[cr])}(s)){const p=this.indexOf(n);if(-1!==p)this.detach(p);else{const m=s[cr],_=new Ye(m,m[Fr],m[cr]);_.detach(_.indexOf(n))}}const l=this._adjustIndex(t),u=this._lContainer;return Dd(u,s,l,i),n.attachToViewContainerRef(),Sl(yt(u),l,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Ht(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=ra(this._lContainer,t);i&&(Qo(yt(this._lContainer),t),Hl(i[Re],i))}detach(n){const t=this._adjustIndex(n,-1),i=ra(this._lContainer,t);return i&&null!=Qo(yt(this._lContainer),t)?new Id(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function Ht(e){return e[8]}function yt(e){return e[8]||(e[8]=[])}function Ee(e,n){let t;const i=n[e.index];return Mr(i)?t=i:(t=Ya(i,n,null,e),n[e.index]=t,Lf(n,t)),Ne(t,n,e,i),new Ye(t,e,n)}let Ne=function _t(e,n,t,i){if(e[Li])return;let s;s=8&t.type?Pn(i):function Fe(e,n){const t=e[ht],i=t.createComment(""),s=xi(n,e);return qa(t,bd(t,s),i,function sm(e,n){return e.nextSibling(n)}(t,s),!1),i}(n,t),e[Li]=s},qe=()=>!1;class yn{constructor(n){this.queryList=n,this.matches=null}clone(){return new yn(this.queryList)}setDirty(){this.queryList.setDirty()}}class G{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,s=[];for(let l=0;l<i;l++){const u=t.getByIndex(l);s.push(this.queries[u.indexInDeclarationView].clone())}return new G(s)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==Zt(n,t).matches&&this.queries[t].setDirty()}}class B{constructor(n,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof n?function wt(e){return e.split(",").map(n=>n.trim())}(n):n}}class ye{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const s=null!==t?t.length:0,l=this.getByIndex(i).embeddedTView(n,s);l&&(l.indexInDeclarationView=i,null!==t?t.push(l):t=[l])}return null!==t?new ye(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Le{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Le(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){const l=i[s];this.matchTNodeWithReadOption(n,t,it(t,l)),this.matchTNodeWithReadOption(n,t,Fh(t,n,l,!1,!1))}else i===gs?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Fh(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const s=this.metadata.read;if(null!==s)if(s===Ki||s===Vt||s===gs&&4&t.type)this.addMatch(t.index,-2);else{const l=Fh(t,n,s,!1,!1);null!==l&&this.addMatch(t.index,l)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function it(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function dt(e,n,t,i){return-1===t?function be(e,n){return 11&e.type?Ac(e,n):4&e.type?Xc(e,n):null}(n,e):-2===t?function st(e,n,t){return t===Ki?Ac(n,e):t===gs?Xc(n,e):t===Vt?Ee(n,e):void 0}(e,n,i):Ba(e,e[Re],t,n)}function We(e,n,t,i){const s=n[Gs].queries[i];if(null===s.matches){const l=e.data,u=t.matches,p=[];for(let m=0;null!==u&&m<u.length;m+=2){const _=u[m];p.push(_<0?null:dt(n,l[_],u[m+1],t.metadata.read))}s.matches=p}return s.matches}function Ue(e,n,t,i){const s=e.queries.getByIndex(t),l=s.matches;if(null!==l){const u=We(e,n,s,t);for(let p=0;p<l.length;p+=2){const m=l[p];if(m>0)i.push(u[p/2]);else{const _=l[p+1],S=n[-m];for(let A=xr;A<S.length;A++){const O=S[A];O[rs]===O[cr]&&Ue(O[Re],O,_,i)}if(null!==S[La]){const A=S[La];for(let O=0;O<A.length;O++){const H=A[O];Ue(H[Re],H,_,i)}}}}}return i}function Xe(e,n,t,i){const s=Xt();if(s.firstCreatePass){const l=Sn();(function Se(e,n,t){null===e.queries&&(e.queries=new ye),e.queries.track(new Le(n,t))})(s,new B(n,t,i),l.index),function gt(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(s,e),!(2&~t)&&(s.staticContentQueries=!0)}return function Z(e,n,t){const i=new Rg(!(4&~t));return function T_(e,n,t,i){const s=Tm(n);s.push(t),e.firstCreatePass&&Za(e).push(i,s.length-1)}(e,n,i,i.destroy),(n[Gs]??=new G).queries.push(new yn(i))-1}(s,fe(),t)}function Zt(e,n){return e.queries.getByIndex(n)}function er(e,n){const t=e[Re],i=Zt(t,n);return i.crossesNgTemplate?Ue(t,e,n,[]):We(t,e,i,n)}function RT(e){const n=e.inputConfig,t={};for(const i in n)if(n.hasOwnProperty(i)){const s=n[i];Array.isArray(s)&&s[3]&&(t[i]=s[3])}e.inputTransforms=t}class Fd{}class PT{}class hM extends Fd{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new K(this);const s=ei(n);this._bootstrapComponents=eo(s.bootstrap),this._r3Injector=fi(n,t,[{provide:Fd,useValue:this},{provide:km,useValue:this.componentFactoryResolver},...i],xn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class fM extends PT{constructor(n){super(),this.moduleType=n}create(n){return new hM(this.moduleType,n,[])}}class NT extends Fd{constructor(n){super(),this.componentFactoryResolver=new K(this),this.instance=null;const t=new lr([...n.providers,{provide:Fd,useValue:this},{provide:km,useValue:this.componentFactoryResolver}],n.parent||ar(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function ab(e,n,t=null){return new NT({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let Zc=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ir(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function cb(e){return!!function pM(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function rl(e,n,t){return e[n]=t}function Vr(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function Br(e,n,t,i,s,l,u,p){const m=fe(),_=Xt(),S=e+pt,A=_.firstCreatePass?function QO(e,n,t,i,s,l,u,p,m){const _=n.consts,S=ia(n,e,4,u||null,ss(_,p));Pf(n,t,S,ss(_,m)),gg(n,S);const A=S.tView=Af(2,S,i,s,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,_,null);return null!==n.queries&&(n.queries.template(n,S),A.queries=n.queries.embeddedTView(S)),S}(S,_,m,n,t,i,s,l,u):_.data[S];as(A,!1);const O=OT(_,m,A,e);Ph()&&vo(_,m,O,A),pi(O,m);const H=Ya(O,m,O,A);return m[S]=H,Lf(m,H),function je(e,n,t){return qe(e,n,t)}(H,A,m),Ou(A)&&Sd(_,m,A),null!=u&&Df(m,A,p),Br}let OT=function LT(e,n,t,i){return $s(!0),n[ht].createComment("")};function gr(e,n,t,i){const s=fe();return Vr(s,No(),n)&&(Xt(),gi(jn(),s,e,n,t,i)),gr}function Qf(e,n,t,i){return Vr(e,No(),t)?n+It(t)+i:mt}function mb(e,n){return e<<17|n<<2}function Qc(e){return e>>17&32767}function EM(e){return 2|e}function Bd(e){return(131068&e)>>2}function SM(e,n){return-131069&e|n<<2}function CM(e){return 1|e}function hD(e,n,t,i){const s=e[t+1],l=null===n;let u=i?Qc(s):Bd(s),p=!1;for(;0!==u&&(!1===p||l);){const _=e[u+1];VL(e[u],n)&&(p=!0,e[u+1]=i?CM(_):EM(_)),u=i?Qc(_):Bd(_)}p&&(e[t+1]=i?EM(s):CM(s))}function VL(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&fr(e,n)>=0}const ri={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fD(e){return e.substring(ri.key,ri.keyEnd)}function pD(e,n){const t=ri.textEnd;return t===n?-1:(n=ri.keyEnd=function zL(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ri.key=n,t),sp(e,n,t))}function sp(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function Ft(e,n,t){const i=fe();return Vr(i,No(),n)&&Ci(Xt(),jn(),i,e,n,i[ht],t,!1),Ft}function TM(e,n,t,i,s){const u=s?"class":"style";sa(e,t,n.inputs[u],u,i)}function vb(e,n,t){return fa(e,n,t,!1),vb}function ha(e,n){return fa(e,n,null,!0),ha}function jm(e){pa(JL,ol,e,!0)}function ol(e,n){for(let t=function UL(e){return function mD(e){ri.key=0,ri.keyEnd=0,ri.value=0,ri.valueEnd=0,ri.textEnd=e.length}(e),pD(e,sp(e,0,ri.textEnd))}(n);t>=0;t=pD(n,t))Zi(e,fD(n),!0)}function fa(e,n,t,i){const s=fe(),l=Xt(),u=js(2);l.firstUpdatePass&&bD(l,e,u,i),n!==mt&&Vr(s,u,n)&&xD(l,l.data[Ei()],s,s[ht],e,s[u+1]=function KL(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=xn(Lo(e)))),e}(n,t),i,u)}function pa(e,n,t,i){const s=Xt(),l=js(2);s.firstUpdatePass&&bD(s,null,l,i);const u=fe();if(t!==mt&&Vr(u,l,t)){const p=s.data[Ei()];if(ED(p,i)&&!_D(s,l)){let m=i?p.classesWithoutHost:p.stylesWithoutHost;null!==m&&(t=Ii(m,t||"")),TM(s,p,u,t,i)}else!function QL(e,n,t,i,s,l,u,p){s===mt&&(s=Ct);let m=0,_=0,S=0<s.length?s[0]:null,A=0<l.length?l[0]:null;for(;null!==S||null!==A;){const O=m<s.length?s[m+1]:void 0,H=_<l.length?l[_+1]:void 0;let Y,$=null;S===A?(m+=2,_+=2,O!==H&&($=A,Y=H)):null===A||null!==S&&S<A?(m+=2,$=S):(_+=2,$=A,Y=H),null!==$&&xD(e,n,t,i,$,Y,u,p),S=m<s.length?s[m]:null,A=_<l.length?l[_]:null}}(s,p,u,u[ht],u[l+1],u[l+1]=function ZL(e,n,t){if(null==t||""===t)return Ct;const i=[],s=Lo(t);if(Array.isArray(s))for(let l=0;l<s.length;l++)e(i,s[l],!0);else if("object"==typeof s)for(const l in s)s.hasOwnProperty(l)&&e(i,l,s[l]);else"string"==typeof s&&n(i,s);return i}(e,n,t),i,l)}}function _D(e,n){return n>=e.expandoStartIndex}function bD(e,n,t,i){const s=e.data;if(null===s[t+1]){const l=s[Ei()],u=_D(e,t);ED(l,i)&&null===n&&!u&&(n=!1),n=function $L(e,n,t,i){const s=function fg(e){const n=vt.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=i?n.residualClasses:n.residualStyles;if(null===s)0===(i?n.classBindings:n.styleBindings)&&(t=$m(t=DM(null,e,n,t,i),n.attrs,i),l=null);else{const u=n.directiveStylingLast;if(-1===u||e[u]!==s)if(t=DM(s,e,n,t,i),null===l){let m=function qL(e,n,t){const i=t?n.classBindings:n.styleBindings;if(0!==Bd(i))return e[Qc(i)]}(e,n,i);void 0!==m&&Array.isArray(m)&&(m=DM(null,e,n,m[1],i),m=$m(m,n.attrs,i),function XL(e,n,t,i){e[Qc(t?n.classBindings:n.styleBindings)]=i}(e,n,i,m))}else l=function YL(e,n,t){let i;const s=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<s;l++)i=$m(i,e[l].hostAttrs,t);return $m(i,n.attrs,t)}(e,n,i)}return void 0!==l&&(i?n.residualClasses=l:n.residualStyles=l),t}(s,l,n,i),function FL(e,n,t,i,s,l){let u=l?n.classBindings:n.styleBindings,p=Qc(u),m=Bd(u);e[i]=t;let S,_=!1;if(Array.isArray(t)?(S=t[1],(null===S||fr(t,S)>0)&&(_=!0)):S=t,s)if(0!==m){const O=Qc(e[p+1]);e[i+1]=mb(O,p),0!==O&&(e[O+1]=SM(e[O+1],i)),e[p+1]=function OL(e,n){return 131071&e|n<<17}(e[p+1],i)}else e[i+1]=mb(p,0),0!==p&&(e[p+1]=SM(e[p+1],i)),p=i;else e[i+1]=mb(m,0),0===p?p=i:e[m+1]=SM(e[m+1],i),m=i;_&&(e[i+1]=EM(e[i+1])),hD(e,S,i,!0),hD(e,S,i,!1),function kL(e,n,t,i,s){const l=s?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&fr(l,n)>=0&&(t[i+1]=CM(t[i+1]))}(n,S,e,i,l),u=mb(p,m),l?n.classBindings=u:n.styleBindings=u}(s,l,n,t,u,i)}}function DM(e,n,t,i,s){let l=null;const u=t.directiveEnd;let p=t.directiveStylingLast;for(-1===p?p=t.directiveStart:p++;p<u&&(l=n[p],i=$m(i,l.hostAttrs,s),l!==e);)p++;return null!==e&&(t.directiveStylingLast=p),i}function $m(e,n,t){const i=t?1:2;let s=-1;if(null!==n)for(let l=0;l<n.length;l++){const u=n[l];"number"==typeof u?s=u:s===i&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Zi(e,u,!!t||n[++l]))}return void 0===e?null:e}function JL(e,n,t){const i=String(n);""!==i&&!i.includes(" ")&&Zi(e,i,t)}function xD(e,n,t,i,s,l,u,p){if(!(3&n.type))return;const m=e.data,_=m[p+1],S=function LL(e){return!(1&~e)}(_)?MD(m,n,t,s,Bd(_),u):void 0;yb(S)||(yb(l)||function NL(e){return!(2&~e)}(_)&&(l=MD(m,null,t,s,p,u)),function xd(e,n,t,i,s){if(n)s?e.addClass(t,i):e.removeClass(t,i);else{let l=-1===i.indexOf("-")?void 0:na.DashCase;null==s?e.removeStyle(t,i,l):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),l|=na.Important),e.setStyle(t,i,s,l))}}(i,u,Lu(Ei(),t),s,l))}function MD(e,n,t,i,s,l){const u=null===n;let p;for(;s>0;){const m=e[s],_=Array.isArray(m),S=_?m[1]:m,A=null===S;let O=t[s+1];O===mt&&(O=A?Ct:void 0);let H=A?Eu(O,i):S===i?O:void 0;if(_&&!yb(H)&&(H=Eu(m,i)),yb(H)&&(p=H,u))return p;const $=e[s+1];s=u?Qc($):Bd($)}if(null!==n){let m=l?n.residualClasses:n.residualStyles;null!=m&&(p=Eu(m,i))}return p}function yb(e){return void 0!==e}function ED(e,n){return!!(e.flags&(n?8:16))}function Ud(e,n,t){pa(Zi,ol,Qf(fe(),e,n,t),!0)}function X(e,n,t,i){const s=fe(),l=Xt(),u=pt+e,p=s[ht],m=l.firstCreatePass?function w2(e,n,t,i,s,l){const u=n.consts,m=ia(n,e,2,i,ss(u,s));return Pf(n,t,m,ss(u,l)),null!==m.attrs&&q(m,m.attrs,!1),null!==m.mergedAttrs&&q(m,m.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,m),m}(u,l,s,n,t,i):l.data[u],_=DD(l,s,m,p,n,e);s[u]=_;const S=Ou(m);return as(m,!0),S_(p,_,m),!function Hm(e){return!(32&~e.flags)}(m)&&Ph()&&vo(l,s,_,m),0===function ww(){return vt.lFrame.elementDepthCount}()&&pi(_,s),function xw(){vt.lFrame.elementDepthCount++}(),S&&(Sd(l,s,m),yo(l,m,s)),null!==i&&Df(s,m),X}function Q(){let e=Sn();ug()?function dg(){vt.lFrame.isParent=!1}():(e=e.parent,as(e,!1));const n=e;(function Ew(e){return vt.skipHydrationRootTNode===e})(n)&&function Dw(){vt.skipHydrationRootTNode=null}(),function Mw(){vt.lFrame.elementDepthCount--}();const t=Xt();return t.firstCreatePass&&(gg(t,e),xc(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Yt(e){return!!(8&e.flags)}(n)&&TM(t,n,fe(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Be(e){return!!(16&e.flags)}(n)&&TM(t,n,fe(),n.stylesWithoutHost,!1),Q}function lt(e,n,t,i){return X(e,n,t,i),Q(),lt}let DD=(e,n,t,i,s,l)=>($s(!0),wf(i,s,function Bw(){return vt.lFrame.currentNamespace}()));function Hd(){return fe()}const lp="en-US";let LD=lp;function St(e,n,t,i){const s=fe(),l=Xt(),u=Sn();return function kM(e,n,t,i,s,l,u){const p=Ou(i),_=e.firstCreatePass&&Za(e),S=n[En],A=Tm(n);let O=!0;if(3&i.type||u){const Y=xi(i,n),se=u?u(Y):Y,pe=A.length,de=u?bt=>u(Pn(bt[i.index])):i.index;let Ve=null;if(!u&&p&&(Ve=function SF(e,n,t,i){const s=e.cleanup;if(null!=s)for(let l=0;l<s.length-1;l+=2){const u=s[l];if(u===t&&s[l+1]===i){const p=n[Hs],m=s[l+2];return p.length>m?p[m]:null}"string"==typeof u&&(l+=2)}return null}(e,n,s,i.index)),null!==Ve)(Ve.__ngLastListenerFn__||Ve).__ngNextListenerFn__=l,Ve.__ngLastListenerFn__=l,O=!1;else{l=c1(i,n,S,l,!1);const bt=t.listen(se,s,l);A.push(l,bt),_&&_.push(s,de,pe,pe+1)}}else l=c1(i,n,S,l,!1);const H=i.outputs;let $;if(O&&null!==H&&($=H[s])){const Y=$.length;if(Y)for(let se=0;se<Y;se+=2){const Kt=n[$[se]][$[se+1]].subscribe(l),In=A.length;A.push(l,Kt),_&&_.push(s,i.index,In,-(In+1))}}}(l,s,s[ht],u,e,n,i),St}function l1(e,n,t,i){const s=nt(null);try{return os(6,n,t),!1!==t(i)}catch(l){return Ff(e,l),!1}finally{os(7,n,t),nt(s)}}function c1(e,n,t,i,s){return function l(u){if(u===Function)return i;Qa(e.componentOffset>-1?Qi(e.index,n):n);let m=l1(n,t,i,u),_=l.__ngNextListenerFn__;for(;_;)m=l1(n,t,_,u)&&m,_=_.__ngNextListenerFn__;return s&&!1===m&&u.preventDefault(),m}}function Fn(e=1){return function bC(e){return(vt.lFrame.contextLView=function gy(e,n){for(;e>0;)n=n[zs],e--;return n}(e,vt.lFrame.contextLView))[En]}(e)}function zi(e,n,t){return VM(e,"",n,"",t),zi}function VM(e,n,t,i,s){const l=fe(),u=Qf(l,n,t,i);return u!==mt&&Ci(Xt(),jn(),l,e,u,l[ht],s,!1),VM}function b1(){return function Tt(e,n){return e[Gs].queries[n].queryList}(fe(),pg())}function ae(e,n=""){const t=fe(),i=Xt(),s=e+pt,l=i.firstCreatePass?ia(i,s,1,n,null):i.data[s],u=I1(i,t,l,n,e);t[s]=u,Ph()&&vo(i,t,u,l),as(l,!1)}let I1=(e,n,t,i,s)=>($s(!0),function bf(e,n){return e.createText(n)}(n[ht],i));function Qt(e){return ur("",e,""),Qt}function ur(e,n,t){const i=fe(),s=Qf(i,e,n,t);return s!==mt&&function Ja(e,n,t){const i=Lu(n,e);!function nm(e,n,t){e.setValue(n,t)}(e[ht],i,t)}(i,Ei(),s),ur}let JF=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=xh(0,t.type),s=i.length>0?ab([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ne({token:e,providedIn:"environment",factory:()=>new e(Oe(Ni))})}return e})();function z1(e){aa("NgStandalone"),e.getStandaloneInjector=n=>n.get(JF).getOrCreateStandaloneInjector(e)}function Km(e,n,t){const i=Mi()+e,s=fe();return s[i]===mt?rl(s,i,t?n.call(t):n()):function Um(e,n){return e[n]}(s,i)}function W1(e,n,t,i,s,l){const u=n+t;return Vr(e,u,s)?rl(e,u+1,l?i.call(l,s):i(s)):function ev(e,n){const t=e[n];return t===mt?void 0:t}(e,u+1)}function He(e,n){const t=Xt();let i;const s=e+pt;t.firstCreatePass?(i=function ck(e,n){if(n)for(let t=n.length-1;t>=0;t--){const i=n[t];if(e===i.name)return i}}(n,t.pipeRegistry),t.data[s]=i,i.onDestroy&&(t.destroyHooks??=[]).push(s,i.onDestroy)):i=t.data[s];const l=i.factory||(i.factory=Fs(i.type)),p=pn(ce);try{const m=ka(!1),_=l();return ka(m),function NF(e,n,t,i){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=i}(t,fe(),s,_),_}finally{pn(p)}}function ze(e,n,t){const i=e+pt,s=fe(),l=function Mc(e,n){return e[n]}(s,i);return function tv(e,n){return e[Re].data[n].pure}(s,i)?W1(s,Mi(),n,l.transform,t,l):l.transform(t)}let Sb=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pA=new Pe(""),Tb=new Pe("");let ZM,XM=(()=>{class e{constructor(t,i,s){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ZM||(function a3(e){ZM=e}(s),s.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,s){let l=-1;i&&i>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==l),t()},i)),this._callbacks.push({doneCb:t,timeoutId:l,updateCb:s})}whenStable(t,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,s){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Tn),Oe(YM),Oe(Tb))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),YM=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return ZM?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function ov(e){return!!e&&"function"==typeof e.then}function gA(e){return!!e&&"function"==typeof e.subscribe}const Db=new Pe("");let JM=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Te(Db,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const s of this.appInits){const l=s();if(ov(l))t.push(l);else if(gA(l)){const u=new Promise((p,m)=>{l.subscribe({complete:p,error:m})});t.push(u)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(s=>{this.reject(s)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const QM=new Pe("");function yA(e,n){return Array.isArray(n)?n.reduce(yA,e):{...e,...n}}let Kc=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Te(ky),this.afterRenderEffectManager=Te(D),this.externalTestViews=new Set,this.beforeRender=new Ar,this.afterTick=new Ar,this.componentTypes=[],this.components=[],this.isStable=Te(Zc).hasPendingTasks.pipe(Ot(t=>!t)),this._injector=Te(Ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const s=t instanceof aM;if(!this._injector.get(JM).done)throw!s&&function Na(e){const n=Ut(e)||Yn(e)||Lr(e);return null!==n&&n.standalone}(t),new we(405,!1);let u;u=s?t:this._injector.get(km).resolveComponentFactory(t),this.componentTypes.push(u.componentType);const p=function l3(e){return e.isBoundToModule}(u)?void 0:this._injector.get(Fd),_=u.create(vn.NULL,[],i||u.selector,p),S=_.location.nativeElement,A=_.injector.get(pA,null);return A?.registerApplication(S),_.onDestroy(()=>{this.detachView(_.hostView),Ab(this.components,_),A?.unregisterApplication(S)}),this._loadComponent(_),_}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new we(101,!1);const i=nt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,nt(i)}}detectChangesInAttachedViews(t){let i=0;const s=this.afterRenderEffectManager;for(;;){if(i===U_)throw new we(103,!1);if(t){const l=0===i;this.beforeRender.next(l);for(let{_lView:u,notifyErrorHandler:p}of this._views)u3(u,l,p)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>KM(l))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>KM(l))))break}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Ab(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(QM,[]);[...this._bootstrapListeners,...i].forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ab(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new we(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ab(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function u3(e,n,t){!n&&!KM(e)||function d3(e,n,t){let i;t?(i=0,e[tt]|=1024):i=64&e[tt]?0:1,qc(e,n,i)}(e,t,n)}function KM(e){return ag(e)}class h3{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let _A=(()=>{class e{compileModuleSync(t){return new fM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),l=eo(ei(t).declarations).reduce((u,p)=>{const m=Ut(p);return m&&u.push(new ve(m)),u},[]);return new h3(i,l)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),g3=(()=>{class e{constructor(){this.zone=Te(Tn),this.applicationRef=Te(Kc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function m3(){const e=Te(Tn),n=Te(cs);return t=>e.runOutsideAngular(()=>n.handleError(t))}let y3=(()=>{class e{constructor(){this.subscription=new Tr,this.initialized=!1,this.zone=Te(Tn),this.pendingTasks=Te(Zc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Tn.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Tn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $l=new Pe("",{providedIn:"root",factory:()=>Te($l,Pt.Optional|Pt.SkipSelf)||function _3(){return typeof $localize<"u"&&$localize.locale||lp}()}),eE=new Pe("");let MA=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const s=function g(e="zone.js",n){return"noop"===e?new d:"zone.js"===e?new Tn(n):e}(i?.ngZone,function xA(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const l=function $O(e,n,t){return new hM(e,n,t)}(t.moduleType,this.injector,function wA(e){return[{provide:Tn,useFactory:e},{provide:bi,multi:!0,useFactory:()=>{const n=Te(g3,{optional:!0});return()=>n.initialize()}},{provide:bi,multi:!0,useFactory:()=>{const n=Te(y3);return()=>{n.initialize()}}},{provide:ky,useFactory:m3}]}(()=>s)),u=l.injector.get(cs,null);return s.runOutsideAngular(()=>{const p=s.onError.subscribe({next:m=>{u.handleError(m)}});l.onDestroy(()=>{Ab(this._modules,l),p.unsubscribe()})}),function vA(e,n,t){try{const i=t();return ov(i)?i.catch(s=>{throw n.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(u,s,()=>{const p=l.injector.get(JM);return p.runInitializers(),p.donePromise.then(()=>(function FD(e){"string"==typeof e&&(LD=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get($l,lp)||lp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,i=[]){const s=yA({},i);return function p3(e,n,t){const i=new fM(t);return Promise.resolve(i)}(0,0,t).then(l=>this.bootstrapModuleFactory(l,s))}_moduleDoBootstrap(t){const i=t.injector.get(Kc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new we(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(eE,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(vn))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),eu=null;const EA=new Pe("");function SA(e,n,t=[]){const i=`Platform: ${n}`,s=new Pe(i);return(l=[])=>{let u=tE();if(!u||u.injector.get(EA,!1)){const p=[...t,...l,{provide:s,useValue:!0}];e?e(p):function x3(e){if(eu&&!eu.get(EA,!1))throw new we(400,!1);(function mA(){!function Lp(e){fu=e}(()=>{throw new we(600,!1)})})(),eu=e;const n=e.get(MA);(function TA(e){e.get(t_,null)?.forEach(t=>t())})(e)}(function CA(e=[],n){return vn.create({name:n,providers:[{provide:Sh,useValue:"platform"},{provide:eE,useValue:new Set([()=>eu=null])},...e]})}(p,i))}return function M3(e){const n=tE();if(!n)throw new we(401,!1);return n}()}}function tE(){return eu?.get(MA)??null}let dp=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=S3}return e})();function S3(e){return function C3(e,n,t){if(is(e)&&!t){const i=Qi(e.index,n);return new Id(i,i)}return 47&e.type?new Id(n[mn],n):null}(Sn(),fe(),!(16&~e))}class PA{constructor(){}supports(n){return cb(n)}create(n){return new R3(n)}}const I3=(e,n)=>n;class R3{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||I3}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,s=0,l=null;for(;t||i;){const u=!i||t&&t.currentIndex<OA(i,s,l)?t:i,p=OA(u,s,l),m=u.currentIndex;if(u===i)s--,i=i._nextRemoved;else if(t=t._next,null==u.previousIndex)s++;else{l||(l=[]);const _=p-s,S=m-s;if(_!=S){for(let O=0;O<_;O++){const H=O<l.length?l[O]:l[O]=0,$=H+O;S<=$&&$<_&&(l[O]=H+1)}l[u.previousIndex]=S-_}}p!==m&&n(u,p,m)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!cb(n))throw new we(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s,l,u,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let p=0;p<this.length;p++)l=n[p],u=this._trackByFn(p,l),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,l,u,p)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,u,p),i=!0),t=t._next}else s=0,function ZO(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,p=>{u=this._trackByFn(s,p),null!==t&&Object.is(t.trackById,u)?(i&&(t=this._verifyReinsertion(t,p,u,s)),Object.is(t.item,p)||this._addIdentityChange(t,p)):(t=this._mismatch(t,p,u,s),i=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,s){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,l,s)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,s))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,l,s)):n=this._addAfter(new P3(t,i),l,s),n}_verifyReinsertion(n,t,i,s){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==l?n=this._reinsertAfter(l,n._prev,s):n.currentIndex!=s&&(n.currentIndex=s,this._addToMoves(n,s)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const s=n._prevRemoved,l=n._nextRemoved;return null===s?this._removalsHead=l:s._nextRemoved=l,null===l?this._removalsTail=s:l._prevRemoved=s,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const s=null===t?this._itHead:t._next;return n._next=s,n._prev=t,null===s?this._itTail=n:s._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new NA),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NA),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class P3{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class N3{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class NA{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new N3,this.map.set(t,i)),i.add(n)}get(n,t){const s=this.map.get(n);return s?s.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OA(e,n,t){const i=e.previousIndex;if(null===i)return i;let s=0;return t&&i<t.length&&(s=t[i]),i+n+s}function FA(){return new sE([new PA])}let sE=(()=>{class e{static#e=this.\u0275prov=ne({token:e,providedIn:"root",factory:FA});constructor(t){this.factories=t}static create(t,i){if(null!=i){const s=i.factories.slice();t=t.concat(s)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||FA()),deps:[[e,new Pi,new Ls]]}}find(t){const i=this.factories.find(s=>s.supports(t));if(null!=i)return i;throw new we(901,!1)}}return e})();const V3=SA(null,"core",[]);let B3=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Kc))};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({})}return e})();function fp(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let sI=null;function tu(){return sI}class xV{}const Gi=new Pe("");let cE=(()=>{class e{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(EV),providedIn:"platform"})}return e})();const MV=new Pe("");let EV=(()=>{class e extends cE{constructor(){super(),this._doc=Te(Gi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tu().getBaseHref(this._doc)}onPopState(t){const i=tu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=tu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,s){this._history.pushState(t,i,s)}replaceState(t,i,s){this._history.replaceState(t,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function uE(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function aI(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function ql(e){return e&&"?"!==e[0]?"?"+e:e}let Wd=(()=>{class e{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(cI),providedIn:"root"})}return e})();const lI=new Pe("");let cI=(()=>{class e extends Wd{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Te(Gi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uE(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ql(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${i}${s}`:i}pushState(t,i,s,l){const u=this.prepareExternalUrl(s+ql(l));this._platformLocation.pushState(t,i,u)}replaceState(t,i,s,l){const u=this.prepareExternalUrl(s+ql(l));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(cE),Oe(lI,8))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),SV=(()=>{class e extends Wd{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=uE(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,s,l){let u=this.prepareExternalUrl(s+ql(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,s,l){let u=this.prepareExternalUrl(s+ql(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(cE),Oe(lI,8))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),lv=(()=>{class e{constructor(t){this._subject=new Nn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function DV(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(aI(uI(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ql(i))}normalize(t){return e.stripTrailingSlash(function TV(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,uI(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",s=null){this._locationStrategy.pushState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ql(i)),s)}replaceState(t,i="",s=null){this._locationStrategy.replaceState(s,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ql(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(s=>s(t,i))}subscribe(t,i,s){return this._subject.subscribe({next:t,error:i,complete:s})}static#e=this.normalizeQueryParams=ql;static#t=this.joinWithSlash=uE;static#n=this.stripTrailingSlash=aI;static#r=this.\u0275fac=function(i){return new(i||e)(Oe(Wd))};static#i=this.\u0275prov=ne({token:e,factory:()=>function CV(){return new lv(Oe(Wd))}(),providedIn:"root"})}return e})();function uI(e){return e.replace(/\/index.html$/,"")}function _I(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[s,l]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(s.trim()===n)return decodeURIComponent(l)}return null}class pB{constructor(n,t,i,s){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jd=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,s){this._viewContainer=t,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((s,l,u)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new pB(s.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)i.remove(null===l?void 0:l);else if(null!==l){const p=i.get(l);i.move(p,u),xI(p,s)}});for(let s=0,l=i.length;s<l;s++){const p=i.get(s).context;p.index=s,p.count=l,p.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{xI(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vt),ce(gs),ce(sE))};static#t=this.\u0275dir=Ke({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function xI(e,n){e.context.$implicit=n.item}let gp=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new gB,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){MI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){MI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vt),ce(gs))};static#t=this.\u0275dir=Ke({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class gB{constructor(){this.$implicit=null,this.ngIf=null}}function MI(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${xn(n)}'.`)}let SE=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({})}return e})();const CI="browser";function TI(e){return e===CI}function DI(e){return"server"===e}let AI=(()=>{class e{static#e=this.\u0275prov=ne({token:e,providedIn:"root",factory:()=>TI(Te(us))?new WB(Te(Gi),window):new $B})}return e})();class WB{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){const t=function jB(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let s=i.currentNode;for(;s;){const l=s.shadowRoot;if(l){const u=l.getElementById(n)||l.querySelector(`[name="${n}"]`);if(u)return u}s=i.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){const t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(i-l[0],s-l[1])}}class $B{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}}class II{}class bU extends xV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class TE extends bU{static makeCurrent(){!function wV(e){sI??=e}(new TE)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function wU(){return hv=hv||document.querySelector("base"),hv?hv.getAttribute("href"):null}();return null==t?null:function xU(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){hv=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return _I(document.cookie,n)}}let hv=null,EU=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const Kb=new Pe("");let BI=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,s){return this._findPluginFor(i).addEventListener(t,i,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(l=>l.supports(t)),!i)throw new we(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Kb),Oe(Tn))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();class DE{constructor(n){this._doc=n}}const AE="ng-app-id";let UI=(()=>{class e{constructor(t,i,s,l={}){this.doc=t,this.appId=i,this.nonce=s,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=DI(l),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(s=>s.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${AE}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(t,i){const s=this.styleRef;if(s.has(t)){const l=s.get(t);return l.usage+=i,l.usage}return s.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const s=this.styleNodesInDOM,l=s?.get(i);if(l?.parentNode===t)return s.delete(i),l.removeAttribute(AE),l;{const u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(AE,this.appId),t.appendChild(u),u}}addStyleToHost(t,i){const s=this.getStyleElement(t,i),l=this.styleRef,u=l.get(i)?.elements;u?u.push(s):l.set(i,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi),Oe(Wh),Oe(n_,8),Oe(us))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const IE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},RE=/%COMP%/g,DU=new Pe("",{providedIn:"root",factory:()=>!0});function zI(e,n){return n.map(t=>t.replace(RE,e))}let GI=(()=>{class e{constructor(t,i,s,l,u,p,m,_=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=l,this.doc=u,this.platformId=p,this.ngZone=m,this.nonce=_,this.rendererByCompId=new Map,this.platformIsServer=DI(p),this.defaultRenderer=new PE(t,u,m,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ui.ShadowDom&&(i={...i,encapsulation:ui.Emulated});const s=this.getOrCreateRenderer(t,i);return s instanceof jI?s.applyToHost(t):s instanceof NE&&s.applyStyles(),s}getOrCreateRenderer(t,i){const s=this.rendererByCompId;let l=s.get(i.id);if(!l){const u=this.doc,p=this.ngZone,m=this.eventManager,_=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,A=this.platformIsServer;switch(i.encapsulation){case ui.Emulated:l=new jI(m,_,i,this.appId,S,u,p,A);break;case ui.ShadowDom:return new PU(m,_,t,i,u,p,this.nonce,A);default:l=new NE(m,_,i,S,u,p,A)}s.set(i.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(BI),Oe(UI),Oe(Wh),Oe(DU),Oe(Gi),Oe(us),Oe(Tn),Oe(n_))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();class PE{constructor(n,t,i,s){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(IE[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(WI(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(WI(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new we(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,s){if(s){t=s+":"+t;const l=IE[s];l?n.setAttributeNS(l,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const s=IE[i];s?n.removeAttributeNS(s,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,s){s&(na.DashCase|na.Important)?n.style.setProperty(t,i,s&na.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&na.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){null!=n&&(n[t]=i)}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=tu().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function WI(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class PU extends PE{constructor(n,t,i,s,l,u,p,m){super(n,l,u,m),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=zI(s.id,s.styles);for(const S of _){const A=document.createElement("style");p&&A.setAttribute("nonce",p),A.textContent=S,this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class NE extends PE{constructor(n,t,i,s,l,u,p,m){super(n,l,u,p),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=m?zI(m,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class jI extends NE{constructor(n,t,i,s,l,u,p,m){const _=s+"-"+i.id;super(n,t,i,l,u,p,m,_),this.contentAttr=function AU(e){return"_ngcontent-%COMP%".replace(RE,e)}(_),this.hostAttr=function IU(e){return"_nghost-%COMP%".replace(RE,e)}(_)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let NU=(()=>{class e extends DE{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,s){return t.addEventListener(i,s,!1),()=>this.removeEventListener(t,i,s)}removeEventListener(t,i,s){return t.removeEventListener(i,s)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const $I=["alt","control","meta","shift"],OU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LU={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let FU=(()=>{class e extends DE{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,s){const l=e.parseEventName(i),u=e.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tu().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const l=e._normalizeKey(i.pop());let u="",p=i.indexOf("code");if(p>-1&&(i.splice(p,1),u="code."),$I.forEach(_=>{const S=i.indexOf(_);S>-1&&(i.splice(S,1),u+=_+".")}),u+=l,0!=i.length||0===l.length)return null;const m={};return m.domEventName=s,m.fullKey=u,m}static matchEventFullKeyCode(t,i){let s=OU[t.key]||t.key,l="";return i.indexOf("code.")>-1&&(s=t.code,l="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),$I.forEach(u=>{u!==s&&(0,LU[u])(t)&&(l+=u+".")}),l+=s,l===i)}static eventCallback(t,i,s){return l=>{e.matchEventFullKeyCode(l,t)&&s.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const UU=SA(V3,"browser",[{provide:us,useValue:CI},{provide:t_,useValue:function kU(){TE.makeCurrent()},multi:!0},{provide:Gi,useFactory:function BU(){return function mx(e){Ug=e}(document),document},deps:[]}]),HU=new Pe(""),YI=[{provide:Tb,useClass:class MU{addToWindow(n){on.getAngularTestability=(i,s=!0)=>{const l=n.findTestabilityInTree(i,s);if(null==l)throw new we(5103,!1);return l},on.getAllAngularTestabilities=()=>n.getAllTestabilities(),on.getAllAngularRootElements=()=>n.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(i=>{const s=on.getAllAngularTestabilities();let l=s.length;const u=function(){l--,0==l&&i()};s.forEach(p=>{p.whenStable(u)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?tu().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:pA,useClass:XM,deps:[Tn,YM,Tb]},{provide:XM,useClass:XM,deps:[Tn,YM,Tb]}],ZI=[{provide:Sh,useValue:"root"},{provide:cs,useFactory:function VU(){return new cs},deps:[]},{provide:Kb,useClass:NU,multi:!0,deps:[Gi,Tn,us]},{provide:Kb,useClass:FU,multi:!0,deps:[Gi]},GI,UI,BI,{provide:cM,useExisting:GI},{provide:II,useClass:EU,deps:[]},[]];let zU=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Wh,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(HU,12))};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({providers:[...ZI,...YI],imports:[SE,B3]})}return e})(),GU=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const qU={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},OE=new Pe("HammerGestureConfig"),KI=new Pe("HammerLoader");let XU=(()=>{class e{constructor(){this.events=[],this.overrides={}}buildHammer(t){const i=new Hammer(t,this.options);i.get("pinch").set({enable:!0}),i.get("rotate").set({enable:!0});for(const s in this.overrides)i.get(s).set(this.overrides[s]);return i}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),YU=(()=>{class e extends DE{constructor(t,i,s,l){super(t),this._config=i,this.console=s,this.loader=l,this._loaderPromise=null}supports(t){return!(!qU.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}addEventListener(t,i,s){const l=this.manager.getZone();if(i=i.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||l.runOutsideAngular(()=>this.loader());let u=!1,p=()=>{u=!0};return l.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?u||(p=this.addEventListener(t,i,s)):p=()=>{}}).catch(()=>{p=()=>{}})),()=>{p()}}return l.runOutsideAngular(()=>{const u=this._config.buildHammer(t),p=function(m){l.runGuarded(function(){s(m)})};return u.on(i,p),()=>{u.off(i,p),"function"==typeof u.destroy&&u.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi),Oe(OE),Oe(Sb),Oe(KI,8))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),ZU=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({providers:[{provide:Kb,useClass:YU,multi:!0,deps:[Gi,OE,Sb,[new Ls,KI]]},{provide:OE,useClass:XU,deps:[]}]})}return e})();function $d(e){return this instanceof $d?(this.v=e,this):new $d(e)}function eH(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function rR(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=e[l]&&function(u){return new Promise(function(p,m){!function s(l,u,p,m){Promise.resolve(m).then(function(_){l({value:_,done:p})},u)}(p,m,(u=e[l](u)).done,u.value)})}}}const FE=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function iR(e){return Bt(e?.then)}function oR(e){return Bt(e[vl])}function sR(e){return Symbol.asyncIterator&&Bt(e?.[Symbol.asyncIterator])}function aR(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const lR=function nH(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cR(e){return Bt(e?.[lR])}function uR(e){return function KU(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,i=t.apply(e,n||[]),l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(O){i[O]&&(s[O]=function(H){return new Promise(function($,Y){l.push([O,H,$,Y])>1||p(O,H)})})}function p(O,H){try{!function m(O){O.value instanceof $d?Promise.resolve(O.value.v).then(_,S):A(l[0][2],O)}(i[O](H))}catch($){A(l[0][3],$)}}function _(O){p("next",O)}function S(O){p("throw",O)}function A(O,H){O(H),l.shift(),l.length&&p(l[0][0],l[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:s}=yield $d(t.read());if(s)return yield $d(void 0);yield yield $d(i)}}finally{t.releaseLock()}})}function dR(e){return Bt(e?.getReader)}function va(e){if(e instanceof hn)return e;if(null!=e){if(oR(e))return function rH(e){return new hn(n=>{const t=e[vl]();if(Bt(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(FE(e))return function iH(e){return new hn(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(iR(e))return function oH(e){return new hn(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Dr)})}(e);if(sR(e))return hR(e);if(cR(e))return function sH(e){return new hn(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(dR(e))return function aH(e){return hR(uR(e))}(e)}throw aR(e)}function hR(e){return new hn(n=>{(function lH(e,n){var t,i,s,l;return function JU(e,n,t,i){return new(t||(t=Promise))(function(l,u){function p(S){try{_(i.next(S))}catch(A){u(A)}}function m(S){try{_(i.throw(S))}catch(A){u(A)}}function _(S){S.done?l(S.value):function s(l){return l instanceof t?l:new t(function(u){u(l)})}(S.value).then(p,m)}_((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=eH(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(u){s={error:u}}finally{try{i&&!i.done&&(l=t.return)&&(yield l.call(t))}finally{if(s)throw s.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Zl(e,n,t,i=0,s=!1){const l=n.schedule(function(){t(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(l),!s)return l}function fR(e,n=0){return Rr((t,i)=>{t.subscribe(new Bn(i,s=>Zl(i,e,()=>i.next(s),n),()=>Zl(i,e,()=>i.complete(),n),s=>Zl(i,e,()=>i.error(s),n)))})}function pR(e,n=0){return Rr((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function gR(e,n){if(!e)throw new Error("Iterable cannot be null");return new hn(t=>{Zl(t,n,()=>{const i=e[Symbol.asyncIterator]();Zl(t,n,()=>{i.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function Zr(e,n){return n?function pH(e,n){if(null!=e){if(oR(e))return function cH(e,n){return va(e).pipe(pR(n),fR(n))}(e,n);if(FE(e))return function dH(e,n){return new hn(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(iR(e))return function uH(e,n){return va(e).pipe(pR(n),fR(n))}(e,n);if(sR(e))return gR(e,n);if(cR(e))return function hH(e,n){return new hn(t=>{let i;return Zl(t,n,()=>{i=e[lR](),Zl(t,n,()=>{let s,l;try{({value:s,done:l}=i.next())}catch(u){return void t.error(u)}l?t.complete():t.next(s)},0,!0)}),()=>Bt(i?.return)&&i.return()})}(e,n);if(dR(e))return function fH(e,n){return gR(uR(e),n)}(e,n)}throw aR(e)}(e,n):va(e)}const{isArray:gH}=Array,{getPrototypeOf:mH,prototype:vH,keys:yH}=Object;function mR(e){if(1===e.length){const n=e[0];if(gH(n))return{args:n,keys:null};if(function _H(e){return e&&"object"==typeof e&&mH(e)===vH}(n)){const t=yH(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}function kE(e){return e[e.length-1]}function vR(e){return Bt(kE(e))?e.pop():void 0}function e0(e){return function bH(e){return e&&Bt(e.schedule)}(kE(e))?e.pop():void 0}const{isArray:wH}=Array;function VE(e){return Ot(n=>function xH(e,n){return wH(n)?e(...n):e(n)}(e,n))}function yR(e,n){return e.reduce((t,i,s)=>(t[i]=n[s],t),{})}const vp=new Pe("CallSetDisabledState",{providedIn:"root",factory:()=>a0}),a0="always";Promise.resolve(),Promise.resolve();let _z=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({})}return e})(),wz=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:vp,useValue:t.callSetDisabledState??a0}]}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({imports:[_z]})}return e})();function ct(...e){return Zr(e,e0(e))}function Ti(e,n,t=1/0){return Bt(n)?Ti((i,s)=>Ot((l,u)=>n(i,l,s,u))(va(e(i,s))),t):("number"==typeof n&&(t=n),Rr((i,s)=>function xz(e,n,t,i,s,l,u,p){const m=[];let _=0,S=0,A=!1;const O=()=>{A&&!m.length&&!_&&n.complete()},H=Y=>_<i?$(Y):m.push(Y),$=Y=>{l&&n.next(Y),_++;let se=!1;va(t(Y,S++)).subscribe(new Bn(n,pe=>{s?.(pe),l?H(pe):n.next(pe)},()=>{se=!0},void 0,()=>{if(se)try{for(_--;m.length&&_<i;){const pe=m.shift();u?Zl(n,u,()=>$(pe)):$(pe)}O()}catch(pe){n.error(pe)}}))};return e.subscribe(new Bn(n,H,()=>{A=!0,O()})),()=>{p?.()}}(i,s,e,t)))}function Yd(e,n){return Bt(n)?Ti(e,n,1):Ti(e,1)}function Jl(e,n){return Rr((t,i)=>{let s=0;t.subscribe(new Bn(i,l=>e.call(n,l,s++)&&i.next(l)))})}function yv(e){return Rr((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function Ho(e,n){return Rr((t,i)=>{let s=null,l=0,u=!1;const p=()=>u&&!s&&i.complete();t.subscribe(new Bn(i,m=>{s?.unsubscribe();let _=0;const S=l++;va(e(m,S)).subscribe(s=new Bn(i,A=>i.next(n?n(m,A,S,_++):A),()=>{s=null,p()}))},()=>{u=!0,p()}))})}class h0{}class f0{}class ws{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const s=t.slice(0,i),l=s.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(s,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof ws?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new ws;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ws?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,t);const s=("a"===n.op?this.headers.get(t):void 0)||[];s.push(...i),this.headers.set(t,s);break;case"d":const l=n.value;if(l){let u=this.headers.get(t);if(!u)return;u=u.filter(p=>-1===l.indexOf(p)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const i=(Array.isArray(t)?t:[t]).map(l=>l.toString()),s=n.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(n,s)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class Mz{encodeKey(n){return xP(n)}encodeValue(n){return xP(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Sz=/%(\d[a-f0-9])/gi,Cz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xP(e){return encodeURIComponent(e).replace(Sz,(n,t)=>Cz[t]??n)}function p0(e){return`${e}`}class ou{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Mz,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ez(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(s=>{const l=s.indexOf("="),[u,p]=-1==l?[n.decodeKey(s),""]:[n.decodeKey(s.slice(0,l)),n.decodeValue(s.slice(l+1))],m=t.get(u)||[];m.push(p),t.set(u,m)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const i=n.fromObject[t],s=Array.isArray(i)?i.map(p0):[p0(i)];this.map.set(t,s)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(i=>{const s=n[i];Array.isArray(s)?s.forEach(l=>{t.push({param:i,value:l,op:"a"})}):t.push({param:i,value:s,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new ou({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(p0(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const s=i.indexOf(p0(n.value));-1!==s&&i.splice(s,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Tz{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function MP(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function EP(e){return typeof Blob<"u"&&e instanceof Blob}function SP(e){return typeof FormData<"u"&&e instanceof FormData}class _v{constructor(n,t,i,s){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function Dz(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==i?i:null,l=s):l=i,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params),this.transferCache=l.transferCache),this.headers??=new ws,this.context??=new Tz,this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+u}}else this.params=new ou,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||MP(this.body)||EP(this.body)||SP(this.body)||function Az(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ou?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||SP(this.body)?null:EP(this.body)?this.body.type||null:MP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ou?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,i=n.url||this.url,s=n.responseType||this.responseType,l=n.transferCache??this.transferCache,u=void 0!==n.body?n.body:this.body,p=n.withCredentials??this.withCredentials,m=n.reportProgress??this.reportProgress;let _=n.headers||this.headers,S=n.params||this.params;const A=n.context??this.context;return void 0!==n.setHeaders&&(_=Object.keys(n.setHeaders).reduce((O,H)=>O.set(H,n.setHeaders[H]),_)),n.setParams&&(S=Object.keys(n.setParams).reduce((O,H)=>O.set(H,n.setParams[H]),S)),new _v(t,i,u,{params:S,headers:_,context:A,reportProgress:m,responseType:s,withCredentials:p,transferCache:l})}}var su=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(su||{});class sS{constructor(n,t=bv.Ok,i="OK"){this.headers=n.headers||new ws,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class g0 extends sS{constructor(n={}){super(n),this.type=su.ResponseHeader}clone(n={}){return new g0({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Zd extends sS{constructor(n={}){super(n),this.type=su.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Zd({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class yp extends sS{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}var bv=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(bv||{});function aS(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}let m0=(()=>{class e{constructor(t){this.handler=t}request(t,i,s={}){let l;if(t instanceof _v)l=t;else{let m,_;m=s.headers instanceof ws?s.headers:new ws(s.headers),s.params&&(_=s.params instanceof ou?s.params:new ou({fromObject:s.params})),l=new _v(t,i,void 0!==s.body?s.body:null,{headers:m,context:s.context,params:_,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const u=ct(l).pipe(Yd(m=>this.handler.handle(m)));if(t instanceof _v||"events"===s.observe)return u;const p=u.pipe(Jl(m=>m instanceof Zd));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe(Ot(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe(Ot(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe(Ot(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe(Ot(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new ou).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,s={}){return this.request("PATCH",t,aS(s,i))}post(t,i,s={}){return this.request("POST",t,aS(s,i))}put(t,i,s={}){return this.request("PUT",t,aS(s,i))}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(h0))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();function TP(e,n){return n(e)}function Oz(e,n){return(t,i)=>n.intercept(t,{handle:s=>e(s,i)})}const Fz=new Pe(""),wv=new Pe(""),DP=new Pe(""),AP=new Pe("");function kz(){let e=null;return(n,t)=>{null===e&&(e=(Te(Fz,{optional:!0})??[]).reduceRight(Oz,TP));const i=Te(Zc),s=i.add();return e(n,t).pipe(yv(()=>i.remove(s)))}}let IP=(()=>{class e extends h0{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Te(Zc);const s=Te(AP,{optional:!0});this.backend=s??t}handle(t){if(null===this.chain){const s=Array.from(new Set([...this.injector.get(wv),...this.injector.get(DP,[])]));this.chain=s.reduceRight((l,u)=>function Lz(e,n,t){return(i,s)=>ts(t,()=>n(i,l=>e(l,s)))}(l,u,this.injector),TP)}const i=this.pendingTasks.add();return this.chain(t,s=>this.backend.handle(s)).pipe(yv(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(f0),Oe(Ni))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const zz=/^\)\]\}',?\n/;let PP=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new we(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Zr(i.\u0275loadImpl()):ct(null)).pipe(Ho(()=>new hn(l=>{const u=i.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((Y,se)=>u.setRequestHeader(Y,se.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Y=t.detectContentTypeHeader();null!==Y&&u.setRequestHeader("Content-Type",Y)}if(t.responseType){const Y=t.responseType.toLowerCase();u.responseType="json"!==Y?Y:"text"}const p=t.serializeBody();let m=null;const _=()=>{if(null!==m)return m;const Y=u.statusText||"OK",se=new ws(u.getAllResponseHeaders()),pe=function Gz(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(u)||t.url;return m=new g0({headers:se,status:u.status,statusText:Y,url:pe}),m},S=()=>{let{headers:Y,status:se,statusText:pe,url:de}=_(),Ve=null;se!==bv.NoContent&&(Ve=typeof u.response>"u"?u.responseText:u.response),0===se&&(se=Ve?bv.Ok:0);let bt=se>=200&&se<300;if("json"===t.responseType&&"string"==typeof Ve){const Kt=Ve;Ve=Ve.replace(zz,"");try{Ve=""!==Ve?JSON.parse(Ve):null}catch(In){Ve=Kt,bt&&(bt=!1,Ve={error:In,text:Ve})}}bt?(l.next(new Zd({body:Ve,headers:Y,status:se,statusText:pe,url:de||void 0})),l.complete()):l.error(new yp({error:Ve,headers:Y,status:se,statusText:pe,url:de||void 0}))},A=Y=>{const{url:se}=_(),pe=new yp({error:Y,status:u.status||0,statusText:u.statusText||"Unknown Error",url:se||void 0});l.error(pe)};let O=!1;const H=Y=>{O||(l.next(_()),O=!0);let se={type:su.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(se.total=Y.total),"text"===t.responseType&&u.responseText&&(se.partialText=u.responseText),l.next(se)},$=Y=>{let se={type:su.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(se.total=Y.total),l.next(se)};return u.addEventListener("load",S),u.addEventListener("error",A),u.addEventListener("timeout",A),u.addEventListener("abort",A),t.reportProgress&&(u.addEventListener("progress",H),null!==p&&u.upload&&u.upload.addEventListener("progress",$)),u.send(p),l.next({type:su.Sent}),()=>{u.removeEventListener("error",A),u.removeEventListener("abort",A),u.removeEventListener("load",S),u.removeEventListener("timeout",A),t.reportProgress&&(u.removeEventListener("progress",H),null!==p&&u.upload&&u.upload.removeEventListener("progress",$)),u.readyState!==u.DONE&&u.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(II))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();const uS=new Pe(""),NP=new Pe("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),OP=new Pe("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class LP{}let $z=(()=>{class e{constructor(t,i,s){this.doc=t,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=_I(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi),Oe(us),Oe(NP))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();function qz(e,n){const t=e.url.toLowerCase();if(!Te(uS)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const i=Te(LP).getToken(),s=Te(OP);return null!=i&&!e.headers.has(s)&&(e=e.clone({headers:e.headers.set(s,i)})),n(e)}var au=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(au||{});function Xz(...e){const n=[m0,PP,IP,{provide:h0,useExisting:IP},{provide:f0,useExisting:PP},{provide:wv,useValue:qz,multi:!0},{provide:uS,useValue:!0},{provide:LP,useClass:$z}];for(const t of e)n.push(...t.\u0275providers);return function Au(e){return{\u0275providers:e}}(n)}const FP=new Pe("");function Yz(){return function Jd(e,n){return{\u0275kind:e,\u0275providers:n}}(au.LegacyInterceptors,[{provide:FP,useFactory:kz},{provide:wv,useExisting:FP,multi:!0}])}let Zz=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({providers:[Xz(Yz())]})}return e})();function lu(e){return!!e&&(e instanceof hn||Bt(e.lift)&&Bt(e.subscribe))}function xv(e=1/0){return Ti(Ma,e)}function Mv(...e){return function n4(){return xv(1)}()(Zr(e,e0(e)))}function y0(e){return new hn(n=>{va(e()).subscribe(n)})}const al=new hn(e=>e.complete());function ya(e){return e<=0?()=>al:Rr((n,t)=>{let i=0;n.subscribe(new Bn(t,s=>{++i<=e&&(t.next(s),e<=i&&t.complete())}))})}const WP={now:()=>(WP.delegate||Date).now(),delegate:void 0};class i4 extends Ar{constructor(n=1/0,t=1/0,i=WP){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:l,_windowTime:u}=this;t||(i.push(n),!s&&i.push(l.now()+u)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:s}=this,l=s.slice();for(let u=0;u<l.length&&!n.closed;u+=i?1:2)n.next(l[u]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,l=(s?1:2)*n;if(n<1/0&&l<i.length&&i.splice(0,i.length-l),!s){const u=t.now();let p=0;for(let m=1;m<i.length&&i[m]<=u;m+=2)p=m;p&&i.splice(0,p+1)}}}function dS(e,n,...t){return!0===n?(e(),null):!1===n?null:n(...t).pipe(ya(1)).subscribe(()=>e())}function jP(e,n,t){var i,s;let l,u=!1;return e&&"object"==typeof e?(l=null!==(i=e.bufferSize)&&void 0!==i?i:1/0,n=null!==(s=e.windowTime)&&void 0!==s?s:1/0,u=!!e.refCount,t=e.scheduler):l=e??1/0,function o4(e={}){const{connector:n=(()=>new Ar),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=e;return l=>{let u=null,p=null,m=null,_=0,S=!1,A=!1;const O=()=>{p?.unsubscribe(),p=null},H=()=>{O(),u=m=null,S=A=!1},$=()=>{const Y=u;H(),Y?.unsubscribe()};return Rr((Y,se)=>{_++,!A&&!S&&O();const pe=m=m??n();se.add(()=>{_--,0===_&&!A&&!S&&(p=dS($,s))}),pe.subscribe(se),u||(u=new wo({next:de=>pe.next(de),error:de=>{A=!0,O(),p=dS(H,t,de),pe.error(de)},complete:()=>{S=!0,O(),p=dS(H,i),pe.complete()}}),Zr(Y).subscribe(u))})(l)}}({connector:()=>new i4(l,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}class Ev{}let $P=(()=>{class e extends Ev{getTranslation(t){return ct({})}static \u0275fac=(()=>{let t;return function(s){return(t||(t=Er(e)))(s||e)}})();static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();class hS{}let qP=(()=>{class e{handle(t){return t.key}static \u0275fac=function(i){return new(i||e)};static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();function _0(e,n){if(e===n)return!0;if(null===e||null===n)return!1;if(e!=e&&n!=n)return!0;let s,l,u,t=typeof e;if(t==typeof n&&"object"==t){if(!Array.isArray(e)){if(Array.isArray(n))return!1;for(l in u=Object.create(null),e){if(!_0(e[l],n[l]))return!1;u[l]=!0}for(l in n)if(!(l in u)&&typeof n[l]<"u")return!1;return!0}if(!Array.isArray(n))return!1;if((s=e.length)==n.length){for(l=0;l<s;l++)if(!_0(e[l],n[l]))return!1;return!0}}return!1}function cu(e){return typeof e<"u"&&null!==e}function fS(e){return e&&"object"==typeof e&&!Array.isArray(e)}function XP(e,n){let t=Object.assign({},e);return fS(e)&&fS(n)&&Object.keys(n).forEach(i=>{fS(n[i])?i in e?t[i]=XP(e[i],n[i]):Object.assign(t,{[i]:n[i]}):Object.assign(t,{[i]:n[i]})}),t}class b0{}let YP=(()=>{class e extends b0{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,i){let s;return s="string"==typeof t?this.interpolateString(t,i):"function"==typeof t?this.interpolateFunction(t,i):t,s}getValue(t,i){let s="string"==typeof i?i.split("."):[i];i="";do{i+=s.shift(),!cu(t)||!cu(t[i])||"object"!=typeof t[i]&&s.length?s.length?i+=".":t=void 0:(t=t[i],i="")}while(s.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(s,l)=>{let u=this.getValue(i,l);return cu(u)?u:s}):t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=Er(e)))(s||e)}})();static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();class w0{}let ZP=(()=>{class e extends w0{compile(t,i){return t}compileTranslations(t,i){return t}static \u0275fac=(()=>{let t;return function(s){return(t||(t=Er(e)))(s||e)}})();static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();class JP{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Nn;onLangChange=new Nn;onDefaultLangChange=new Nn}const pS=new Pe("USE_STORE"),gS=new Pe("USE_DEFAULT_LANG"),mS=new Pe("DEFAULT_LANGUAGE"),vS=new Pe("USE_EXTEND");let x0=(()=>{class e{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Nn;_onLangChange=new Nn;_onDefaultLangChange=new Nn;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,i,s,l,u,p=!0,m=!1,_=!1,S){this.store=t,this.currentLoader=i,this.compiler=s,this.parser=l,this.missingTranslationHandler=u,this.useDefaultLang=p,this.isolate=m,this.extend=_,S&&this.setDefaultLang(S)}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=t),i.pipe(ya(1)).subscribe(s=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return ct(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe(ya(1)).subscribe(s=>{this.changeLang(t)}),i):(this.changeLang(t),ct(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;const i=this.currentLoader.getTranslation(t).pipe(jP(1),ya(1));return this.loadingTranslations=i.pipe(Ot(s=>this.compiler.compileTranslations(s,t)),jP(1),ya(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[t]=this.extend&&this.translations[t]?{...s,...this.translations[t]}:s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),i}setTranslation(t,i,s=!1){i=this.compiler.compileTranslations(i,t),this.translations[t]=(s||this.extend)&&this.translations[t]?XP(this.translations[t],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,s){let l;if(i instanceof Array){let u={},p=!1;for(let m of i)u[m]=this.getParsedResult(t,m,s),lu(u[m])&&(p=!0);return p?function _R(...e){const n=vR(e),{args:t,keys:i}=mR(e),s=new hn(l=>{const{length:u}=t;if(!u)return void l.complete();const p=new Array(u);let m=u,_=u;for(let S=0;S<u;S++){let A=!1;va(t[S]).subscribe(new Bn(l,O=>{A||(A=!0,_--),p[S]=O},()=>m--,void 0,()=>{(!m||!A)&&(_||l.next(i?yR(i,p):p),l.complete())}))}});return n?s.pipe(VE(n)):s}(i.map(_=>lu(u[_])?u[_]:ct(u[_]))).pipe(Ot(_=>{let S={};return _.forEach((A,O)=>{S[i[O]]=A}),S})):u}if(t&&(l=this.parser.interpolate(this.parser.getValue(t,i),s)),typeof l>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(l=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),s)),typeof l>"u"){let u={key:i,translateService:this};typeof s<"u"&&(u.interpolateParams=s),l=this.missingTranslationHandler.handle(u)}return typeof l<"u"?l:i}get(t,i){if(!cu(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Yd(s=>lu(s=this.getParsedResult(s,t,i))?s:ct(s)));{let s=this.getParsedResult(this.translations[this.currentLang],t,i);return lu(s)?s:ct(s)}}getStreamOnTranslationChange(t,i){if(!cu(t)||!t.length)throw new Error('Parameter "key" required');return Mv(y0(()=>this.get(t,i)),this.onTranslationChange.pipe(Ho(s=>{const l=this.getParsedResult(s.translations,t,i);return"function"==typeof l.subscribe?l:ct(l)})))}stream(t,i){if(!cu(t)||!t.length)throw new Error('Parameter "key" required');return Mv(y0(()=>this.get(t,i)),this.onLangChange.pipe(Ho(s=>{const l=this.getParsedResult(s.translations,t,i);return lu(l)?l:ct(l)})))}instant(t,i){if(!cu(t)||!t.length)throw new Error('Parameter "key" required');let s=this.getParsedResult(this.translations[this.currentLang],t,i);if(lu(s)){if(t instanceof Array){let l={};return t.forEach((u,p)=>{l[t[p]]=t[p]}),l}return t}return s}set(t,i,s=this.currentLang){this.translations[s][t]=this.compiler.compile(i,s),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof t>"u"?void 0:(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(i){return new(i||e)(Oe(JP),Oe(Ev),Oe(w0),Oe(b0),Oe(hS),Oe(gS),Oe(pS),Oe(vS),Oe(mS))};static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),Ql=(()=>{class e{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(t,i){this.translate=t,this._ref=i}updateValue(t,i,s){let l=u=>{this.value=void 0!==u?u:t,this.lastKey=t,this._ref.markForCheck()};if(s){let u=this.translate.getParsedResult(s,t,i);lu(u.subscribe)?u.subscribe(l):l(u)}this.translate.get(t,i).subscribe(l)}transform(t,...i){if(!t||!t.length)return t;if(_0(t,this.lastKey)&&_0(i,this.lastParams))return this.value;let s;if(cu(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let l=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{s=JSON.parse(l)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(s=i[0]);return this.lastKey=t,this.lastParams=i,this.updateValue(t,s),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(l=>{this.lastKey&&l.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,s,l.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(l=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s,l.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,s))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(i){return new(i||e)(ce(x0,16),ce(dp,16))};static \u0275pipe=di({name:"translate",type:e,pure:!1});static \u0275prov=ne({token:e,factory:e.\u0275fac})}return e})(),s4=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:Ev,useClass:$P},t.compiler||{provide:w0,useClass:ZP},t.parser||{provide:b0,useClass:YP},t.missingTranslationHandler||{provide:hS,useClass:qP},JP,{provide:pS,useValue:t.isolate},{provide:gS,useValue:t.useDefaultLang},{provide:vS,useValue:t.extend},{provide:mS,useValue:t.defaultLanguage},x0]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:Ev,useClass:$P},t.compiler||{provide:w0,useClass:ZP},t.parser||{provide:b0,useClass:YP},t.missingTranslationHandler||{provide:hS,useClass:qP},{provide:pS,useValue:t.isolate},{provide:gS,useValue:t.useDefaultLang},{provide:vS,useValue:t.extend},{provide:mS,useValue:t.defaultLanguage},x0]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=_r({type:e});static \u0275inj=kt({})}return e})();class a4{http;prefix;suffix;constructor(n,t="/assets/i18n/",i=".json"){this.http=n,this.prefix=t,this.suffix=i}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}}let l4=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({imports:[SE]})}return e})();const _p=[{name:"background",code:"BACKGROUND",longCode:"background-mode",desc:"BACKGROUNDMODE",ico:"fa-briefcase"},{name:"interactive",code:"INTERACTIVE",longCode:"interactive-mode",desc:"INTERACTIVEMODE",ico:"fa-binoculars"}],u4=[{name:"retracted",code:"RETRACTED"},{name:"available",code:"AVAILABLE"}],Qd=[{name:"bright",code:"DAY",longCode:"bright-mode",desc:"DAYMODE",ico:"fa-sun-o"},{name:"dark",code:"NIGHT",longCode:"dark-mode",desc:"NIGHTMODE",ico:"fa-moon-o"}],Kd=[{name:"GERMAN",code:"de",ico:"flag-de"},{name:"ENGLISH",code:"en",ico:"flag-gb"},{name:"FRENCH",code:"fr",ico:"flag-fr"}],QP={MenuMode:"retracted",MenuOrientation:"vertical",LightMode:"dark",Language:((e="en")=>{for(const n of navigator.languages){const t=n.split("-")[0],i=Kd.find(s=>s.code===t);if(null!=i)return i.code}return e})("en"),BackdropMode:"background"};let zo=(()=>{class e{constructor(){}click(t){t instanceof HTMLElement&&t.click()}range(t){const i=new Array(t);for(let s=0;s<t;s++)i[s]=s+1;return i}stringContainsAny(t,i){for(const s of i)if(-1!==t.indexOf(s.toString()))return!0;return!1}stringIndexOfAny(t,i){for(const s of i)if(-1!==t.indexOf(s.toString()))return t.indexOf(s.toString());return-1}arrayIndexOfMatchedString(t,i){for(let s=0;s<t.length;s++)if(-1!==i.indexOf(t[s]))return s;return-1}arrayMatchedString(t,i){for(let s=0;s<t.length;s++)if(-1!==i.indexOf(t[s]))return t[s];return null}set_var(t,i){document.body.setAttribute(t,i)}get_var(t){return document.body.getAttribute(t)}isNullOrUndefined(t){return null==t||void 0===t}globalFunction(t,...i){return window[t](i)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),d4=(()=>{class e{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=TI(this.platformId)}static getCookieRegExp(t){const i=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),e.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const s=e.getCookieRegExp(t).exec(this.document.cookie);return s[1]?e.safeDecodeURIComponent(s[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},i=this.document;return i.cookie&&""!==i.cookie&&i.cookie.split(";").forEach(s=>{const[l,u]=s.split("=");t[e.safeDecodeURIComponent(l.replace(/^ /,""))]=e.safeDecodeURIComponent(u)}),t}set(t,i,s,l,u,p,m,_){if(!this.documentIsAccessible)return;if("number"==typeof s||s instanceof Date||l||u||p||m)return void this.set(t,i,{expires:s,path:l,domain:u,secure:p,sameSite:m||"Lax",partitioned:_});let S=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const A=s||{};A.expires&&(S+="number"==typeof A.expires?"expires="+new Date((new Date).getTime()+1e3*A.expires*60*60*24).toUTCString()+";":"expires="+A.expires.toUTCString()+";"),A.path&&(S+="path="+A.path+";"),A.domain&&(S+="domain="+A.domain+";"),!1===A.secure&&"None"===A.sameSite&&(A.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),A.secure&&(S+="secure;"),A.sameSite||(A.sameSite="Lax"),S+="sameSite="+A.sameSite+";",A.partitioned&&(S+="Partitioned;"),this.document.cookie=S}delete(t,i,s,l,u="Lax"){this.documentIsAccessible&&this.set(t,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:i,domain:s,secure:l,sameSite:u})}deleteAll(t,i,s,l="Lax"){if(!this.documentIsAccessible)return;const u=this.getAll();for(const p in u)u.hasOwnProperty(p)&&this.delete(p,t,i,s,l)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Gi),Oe(us))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bp=(()=>{class e{constructor(t,i,s){this.locale=t,this.util=i,this.cookieService=s,this.preferenceChangedSource=new Ar,this.preferenceChanged$=this.preferenceChangedSource.asObservable(),t.setDefaultLang(QP.Language),t.use(this.getPreference().Language)}getPreference(){return this.cookieService.check("preference")?JSON.parse(this.cookieService.get("preference")):QP}setPreference(t,i){return this.preference=this.getPreference(),void 0!==this.preference[t]?(this.preference[t]=i,this.cookieService.set("preference",JSON.stringify(this.preference)),void this.preferenceChangedSource.next(this.preference)):void console.warn("Unidentified preference settings. Not persisted")}toggleLightMode(){const t=Qd.indexOf(Qd.find(s=>s.name===this.preference.LightMode))+1;this.setLightMode(Qd[t>=Qd.length?0:t].name)}setLightMode(t){const i=Qd.find(s=>s.name===t);this.util.isNullOrUndefined(i)||(this.setBodyLightMode(i.longCode),this.setPreference("LightMode",i.name))}setBodyLightMode(t){Qd.forEach(i=>document.body.classList.remove(i.longCode)),document.body.classList.add(t)}toggleLanguages(){const t=Kd.indexOf(Kd.find(s=>s.code===this.preference.Language))+1;this.setLanguage(Kd[t>=Kd.length?0:t].code)}setLanguage(t){const i=Kd.find(s=>s.code===t);this.util.isNullOrUndefined(i)||(this.setPreference("Language",i.code),document.documentElement.lang=i.code,this.locale.use(t))}toggleBackdropMode(){const t=_p.indexOf(_p.find(s=>s.name===this.preference.BackdropMode))+1;this.setBackdropMode(_p[t>=_p.length?0:t].name)}setBackdropMode(t){const i=_p.find(s=>s.name===t);this.util.isNullOrUndefined(i)||(this.setPreference("BackdropMode",i.name),this.util.globalFunction("switchBackdropMode",i.code))}setMenuMode(t){const i=u4.find(s=>s.name===t);this.util.isNullOrUndefined(i)||this.setPreference("MenuMode",i.name)}removeDarkMode(){this.util.globalFunction("removeDarkMode")}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(x0),Oe(zo),Oe(d4))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yS(...e){const n=e0(e),t=vR(e),{args:i,keys:s}=mR(e);if(0===i.length)return Zr([],n);const l=new hn(function h4(e,n,t=Ma){return i=>{KP(n,()=>{const{length:s}=e,l=new Array(s);let u=s,p=s;for(let m=0;m<s;m++)KP(n,()=>{const _=Zr(e[m],n);let S=!1;_.subscribe(new Bn(i,A=>{l[m]=A,S||(S=!0,p--),p||i.next(t(l.slice()))},()=>{--u||i.complete()}))},i)},i)}}(i,n,s?u=>yR(s,u):Ma));return t?l.pipe(VE(t)):l}function KP(e,n,t){e?Zl(t,e,n):n()}const M0=Ts(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function E0(e,n){const t=Bt(e)?e:()=>e,i=s=>s.error(t());return new hn(n?s=>n.schedule(i,0,s):i)}function _S(){return Rr((e,n)=>{let t=null;e._refCount++;const i=new Bn(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const s=e._connection,l=t;t=null,s&&(!l||s===l)&&s.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class eN extends hn{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sh(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Tr;const t=this.getSubject();n.add(this.source.subscribe(new Bn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Tr.EMPTY)}return n}refCount(){return _S()(this)}}function S0(e){return Rr((n,t)=>{let i=!1;n.subscribe(new Bn(t,s=>{i=!0,t.next(s)},()=>{i||t.next(e),t.complete()}))})}function tN(e=p4){return Rr((n,t)=>{let i=!1;n.subscribe(new Bn(t,s=>{i=!0,t.next(s)},()=>i?t.complete():t.error(e())))})}function p4(){return new M0}function eh(e,n){const t=arguments.length>=2;return i=>i.pipe(e?Jl((s,l)=>e(s,l,i)):Ma,ya(1),t?S0(n):tN(()=>new M0))}function oo(e,n,t){const i=Bt(e)||n||t?{next:e,error:n,complete:t}:e;return i?Rr((s,l)=>{var u;null===(u=i.subscribe)||void 0===u||u.call(i);let p=!0;s.subscribe(new Bn(l,m=>{var _;null===(_=i.next)||void 0===_||_.call(i,m),l.next(m)},()=>{var m;p=!1,null===(m=i.complete)||void 0===m||m.call(i),l.complete()},m=>{var _;p=!1,null===(_=i.error)||void 0===_||_.call(i,m),l.error(m)},()=>{var m,_;p&&(null===(m=i.unsubscribe)||void 0===m||m.call(i)),null===(_=i.finalize)||void 0===_||_.call(i)}))}):Ma}function wp(e){return Rr((n,t)=>{let l,i=null,s=!1;i=n.subscribe(new Bn(t,void 0,void 0,u=>{l=va(e(u,wp(e)(n))),i?(i.unsubscribe(),i=null,l.subscribe(t)):s=!0})),s&&(i.unsubscribe(),i=null,l.subscribe(t))})}function bS(e){return e<=0?()=>al:Rr((n,t)=>{let i=[];n.subscribe(new Bn(t,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(const s of i)t.next(s);t.complete()},void 0,()=>{i=null}))})}const Wt="primary",Sv=Symbol("RouteTitle");class b4{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xp(e){return new b4(e)}function w4(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const s={};for(let l=0;l<i.length;l++){const u=i[l],p=e[l];if(u.startsWith(":"))s[u.substring(1)]=p;else if(u!==p.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function ll(e,n){const t=e?wS(e):void 0,i=n?wS(n):void 0;if(!t||!i||t.length!=i.length)return!1;let s;for(let l=0;l<t.length;l++)if(s=t[l],!nN(e[s],n[s]))return!1;return!0}function wS(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function nN(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((s,l)=>i[l]===s)}return e===n}function rN(e){return e.length>0?e[e.length-1]:null}function uu(e){return lu(e)?e:ov(e)?Zr(Promise.resolve(e)):ct(e)}const M4={exact:function sN(e,n,t){if(!th(e.segments,n.segments)||!C0(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!sN(e.children[i],n.children[i],t))return!1;return!0},subset:aN},iN={exact:function E4(e,n){return ll(e,n)},subset:function S4(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>nN(e[t],n[t]))},ignored:()=>!0};function oN(e,n,t){return M4[t.paths](e.root,n.root,t.matrixParams)&&iN[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function aN(e,n,t){return lN(e,n,n.segments,t)}function lN(e,n,t,i){if(e.segments.length>t.length){const s=e.segments.slice(0,t.length);return!(!th(s,t)||n.hasChildren()||!C0(s,t,i))}if(e.segments.length===t.length){if(!th(e.segments,t)||!C0(e.segments,t,i))return!1;for(const s in n.children)if(!e.children[s]||!aN(e.children[s],n.children[s],i))return!1;return!0}{const s=t.slice(0,e.segments.length),l=t.slice(e.segments.length);return!!(th(e.segments,s)&&C0(e.segments,s,i)&&e.children[Wt])&&lN(e.children[Wt],n,l,i)}}function C0(e,n,t){return n.every((i,s)=>iN[t](e[s].parameters,i.parameters))}class Mp{constructor(n=new Gn([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=xp(this.queryParams),this._queryParamMap}toString(){return D4.serialize(this)}}class Gn{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return T0(this)}}class Cv{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=xp(this.parameters),this._parameterMap}toString(){return dN(this)}}function th(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let Ep=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>new xS,providedIn:"root"})}return e})();class xS{parse(n){const t=new B4(n);return new Mp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Tv(n.root,!0)}`,i=function R4(e){const n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(s=>`${D0(t)}=${D0(s)}`).join("&"):`${D0(t)}=${D0(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function A4(e){return encodeURI(e)}(n.fragment)}`:""}`}}const D4=new xS;function T0(e){return e.segments.map(n=>dN(n)).join("/")}function Tv(e,n){if(!e.hasChildren())return T0(e);if(n){const t=e.children[Wt]?Tv(e.children[Wt],!1):"",i=[];return Object.entries(e.children).forEach(([s,l])=>{s!==Wt&&i.push(`${s}:${Tv(l,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function T4(e,n){let t=[];return Object.entries(e.children).forEach(([i,s])=>{i===Wt&&(t=t.concat(n(s,i)))}),Object.entries(e.children).forEach(([i,s])=>{i!==Wt&&(t=t.concat(n(s,i)))}),t}(e,(i,s)=>s===Wt?[Tv(e.children[Wt],!1)]:[`${s}:${Tv(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Wt]?`${T0(e)}/${t[0]}`:`${T0(e)}/(${t.join("//")})`}}function cN(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function D0(e){return cN(e).replace(/%3B/gi,";")}function MS(e){return cN(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function A0(e){return decodeURIComponent(e)}function uN(e){return A0(e.replace(/\+/g,"%20"))}function dN(e){return`${MS(e.path)}${function I4(e){return Object.entries(e).map(([n,t])=>`;${MS(n)}=${MS(t)}`).join("")}(e.parameters)}`}const P4=/^[^\/()?;#]+/;function ES(e){const n=e.match(P4);return n?n[0]:""}const N4=/^[^\/()?;=#]+/,L4=/^[^=?&#]+/,k4=/^[^&#]+/;class B4{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[Wt]=new Gn(n,t)),i}parseSegment(){const n=ES(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(n),new Cv(A0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function O4(e){const n=e.match(N4);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=ES(this.remaining);s&&(i=s,this.capture(i))}n[A0(t)]=A0(i)}parseQueryParam(n){const t=function F4(e){const n=e.match(L4);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function V4(e){const n=e.match(k4);return n?n[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const s=uN(t),l=uN(i);if(n.hasOwnProperty(s)){let u=n[s];Array.isArray(u)||(u=[u],n[s]=u),u.push(l)}else n[s]=l}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ES(this.remaining),s=this.remaining[i.length];if("/"!==s&&")"!==s&&";"!==s)throw new we(4010,!1);let l;i.indexOf(":")>-1?(l=i.slice(0,i.indexOf(":")),this.capture(l),this.capture(":")):n&&(l=Wt);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[Wt]:new Gn([],u),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new we(4011,!1)}}function hN(e){return e.segments.length>0?new Gn([],{[Wt]:e}):e}function fN(e){const n={};for(const[i,s]of Object.entries(e.children)){const l=fN(s);if(i===Wt&&0===l.segments.length&&l.hasChildren())for(const[u,p]of Object.entries(l.children))n[u]=p;else(l.segments.length>0||l.hasChildren())&&(n[i]=l)}return function U4(e){if(1===e.numberOfChildren&&e.children[Wt]){const n=e.children[Wt];return new Gn(e.segments.concat(n.segments),n.children)}return e}(new Gn(e.segments,n))}function Sp(e){return e instanceof Mp}function pN(e){let n;const s=hN(function t(l){const u={};for(const m of l.children){const _=t(m);u[m.outlet]=_}const p=new Gn(l.url,u);return l===e&&(n=p),p}(e.root));return n??s}function gN(e,n,t,i){let s=e;for(;s.parent;)s=s.parent;if(0===n.length)return SS(s,s,s,t,i);const l=function z4(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new vN(!0,0,e);let n=0,t=!1;const i=e.reduce((s,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Object.entries(l.outlets).forEach(([m,_])=>{p[m]="string"==typeof _?_.split("/"):_}),[...s,{outlets:p}]}if(l.segmentPath)return[...s,l.segmentPath]}return"string"!=typeof l?[...s,l]:0===u?(l.split("/").forEach((p,m)=>{0==m&&"."===p||(0==m&&""===p?t=!0:".."===p?n++:""!=p&&s.push(p))}),s):[...s,l]},[]);return new vN(t,n,i)}(n);if(l.toRoot())return SS(s,s,new Gn([],{}),t,i);const u=function G4(e,n,t){if(e.isAbsolute)return new R0(n,!0,0);if(!t)return new R0(n,!1,NaN);if(null===t.parent)return new R0(t,!0,0);const i=I0(e.commands[0])?0:1;return function W4(e,n,t){let i=e,s=n,l=t;for(;l>s;){if(l-=s,i=i.parent,!i)throw new we(4005,!1);s=i.segments.length}return new R0(i,!1,s-l)}(t,t.segments.length-1+i,e.numberOfDoubleDots)}(l,s,e),p=u.processChildren?Av(u.segmentGroup,u.index,l.commands):yN(u.segmentGroup,u.index,l.commands);return SS(s,u.segmentGroup,p,t,i)}function I0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Dv(e){return"object"==typeof e&&null!=e&&e.outlets}function SS(e,n,t,i,s){let u,l={};i&&Object.entries(i).forEach(([m,_])=>{l[m]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),u=e===n?t:mN(e,n,t);const p=hN(fN(u));return new Mp(p,l,s)}function mN(e,n,t){const i={};return Object.entries(e.children).forEach(([s,l])=>{i[s]=l===n?t:mN(l,n,t)}),new Gn(e.segments,i)}class vN{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&I0(i[0]))throw new we(4003,!1);const s=i.find(Dv);if(s&&s!==rN(i))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R0{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function yN(e,n,t){if(e??=new Gn([],{}),0===e.segments.length&&e.hasChildren())return Av(e,n,t);const i=function $4(e,n,t){let i=0,s=n;const l={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=t.length)return l;const u=e.segments[s],p=t[i];if(Dv(p))break;const m=`${p}`,_=i<t.length-1?t[i+1]:null;if(s>0&&void 0===m)break;if(m&&_&&"object"==typeof _&&void 0===_.outlets){if(!bN(m,_,u))return l;i+=2}else{if(!bN(m,{},u))return l;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}(e,n,t),s=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const l=new Gn(e.segments.slice(0,i.pathIndex),{});return l.children[Wt]=new Gn(e.segments.slice(i.pathIndex),e.children),Av(l,0,s)}return i.match&&0===s.length?new Gn(e.segments,{}):i.match&&!e.hasChildren()?CS(e,n,t):i.match?Av(e,0,s):CS(e,n,t)}function Av(e,n,t){if(0===t.length)return new Gn(e.segments,{});{const i=function j4(e){return Dv(e[0])?e[0].outlets:{[Wt]:e}}(t),s={};if(Object.keys(i).some(l=>l!==Wt)&&e.children[Wt]&&1===e.numberOfChildren&&0===e.children[Wt].segments.length){const l=Av(e.children[Wt],n,t);return new Gn(e.segments,l.children)}return Object.entries(i).forEach(([l,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=yN(e.children[l],n,u))}),Object.entries(e.children).forEach(([l,u])=>{void 0===i[l]&&(s[l]=u)}),new Gn(e.segments,s)}}function CS(e,n,t){const i=e.segments.slice(0,n);let s=0;for(;s<t.length;){const l=t[s];if(Dv(l)){const m=q4(l.outlets);return new Gn(i,m)}if(0===s&&I0(t[0])){i.push(new Cv(e.segments[n].path,_N(t[0]))),s++;continue}const u=Dv(l)?l.outlets[Wt]:`${l}`,p=s<t.length-1?t[s+1]:null;u&&p&&I0(p)?(i.push(new Cv(u,_N(p))),s+=2):(i.push(new Cv(u,{})),s++)}return new Gn(i,{})}function q4(e){const n={};return Object.entries(e).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[t]=CS(new Gn([],{}),0,i))}),n}function _N(e){const n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function bN(e,n,t){return e==t.path&&ll(n,t.parameters)}const Iv="imperative";var sn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(sn||{});class cl{constructor(n,t){this.id=n,this.url=t}}class P0 extends cl{constructor(n,t,i="imperative",s=null){super(n,t),this.type=sn.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ul extends cl{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=sn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Go=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Go||{}),N0=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(N0||{});class Cp extends cl{constructor(n,t,i,s){super(n,t),this.reason=i,this.code=s,this.type=sn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tp extends cl{constructor(n,t,i,s){super(n,t),this.reason=i,this.code=s,this.type=sn.NavigationSkipped}}class O0 extends cl{constructor(n,t,i,s){super(n,t),this.error=i,this.target=s,this.type=sn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wN extends cl{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=sn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X4 extends cl{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=sn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y4 extends cl{constructor(n,t,i,s,l){super(n,t),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=l,this.type=sn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Z4 extends cl{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=sn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J4 extends cl{constructor(n,t,i,s){super(n,t),this.urlAfterRedirects=i,this.state=s,this.type=sn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q4{constructor(n){this.route=n,this.type=sn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K4{constructor(n){this.route=n,this.type=sn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eG{constructor(n){this.snapshot=n,this.type=sn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tG{constructor(n){this.snapshot=n,this.type=sn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nG{constructor(n){this.snapshot=n,this.type=sn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rG{constructor(n){this.snapshot=n,this.type=sn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xN{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=sn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TS{}class DS{constructor(n){this.url=n}}class iG{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rv,this.attachRef=null}}let Rv=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const s=this.getOrCreateContext(t);s.outlet=i,this.contexts.set(t,s)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new iG,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class MN{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=AS(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=AS(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=IS(n,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==n)}pathFromRoot(n){return IS(n,this._root).map(t=>t.value)}}function AS(e,n){if(e===n.value)return n;for(const t of n.children){const i=AS(e,t);if(i)return i}return null}function IS(e,n){if(e===n.value)return[n];for(const t of n.children){const i=IS(e,t);if(i.length)return i.unshift(n),i}return[]}class _a{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dp(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class EN extends MN{constructor(n,t){super(n),this.snapshot=t,NS(this,n)}toString(){return this.snapshot.toString()}}function SN(e){const n=function oG(e){const l=new PS([],{},{},"",{},Wt,e,null,{});return new CN("",new _a(l,[]))}(e),t=new Ir([new Cv("",{})]),i=new Ir({}),s=new Ir({}),l=new Ir({}),u=new Ir(""),p=new Ap(t,i,l,u,s,Wt,e,n.root);return p.snapshot=n.root,new EN(new _a(p,[]),n)}class Ap{constructor(n,t,i,s,l,u,p,m){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=l,this.outlet=u,this.component=p,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(Ot(_=>_[Sv]))??ct(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=s,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ot(n=>xp(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ot(n=>xp(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RS(e,n,t="emptyOnly"){let i;const{routeConfig:s}=e;return i=null===n||"always"!==t&&""!==s?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.data,...s?.data,...e._resolvedData}},s&&DN(s)&&(i.resolve[Sv]=s.title),i}class PS{get title(){return this.data?.[Sv]}constructor(n,t,i,s,l,u,p,m,_){this.url=n,this.params=t,this.queryParams=i,this.fragment=s,this.data=l,this.outlet=u,this.component=p,this.routeConfig=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xp(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class CN extends MN{constructor(n,t){super(t),this.url=n,NS(this,t)}toString(){return TN(this._root)}}function NS(e,n){n.value._routerState=e,n.children.forEach(t=>NS(e,t))}function TN(e){const n=e.children.length>0?` { ${e.children.map(TN).join(", ")} } `:"";return`${e.value}${n}`}function OS(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,ll(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),ll(n.params,t.params)||e.paramsSubject.next(t.params),function x4(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!ll(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),ll(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function LS(e,n){const t=ll(e.params,n.params)&&function C4(e,n){return th(e,n)&&e.every((t,i)=>ll(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||LS(e.parent,n.parent))}function DN(e){return"string"==typeof e.title||null===e.title}let L0=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new Nn,this.deactivateEvents=new Nn,this.attachEvents=new Nn,this.detachEvents=new Nn,this.parentContexts=Te(Rv),this.location=Te(Vt),this.changeDetector=Te(dp),this.environmentInjector=Te(Ni),this.inputBinder=Te(F0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:s}=t.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=t;const s=this.location,u=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,m=new FS(t,p,s.injector);this.activated=s.createComponent(u,{index:s.length,injector:m,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275dir=Ke({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[go]})}return e})();class FS{__ngOutletInjector(n){return new FS(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===Ap?this.route:n===Rv?this.childContexts:this.parent.get(n,t)}}const F0=new Pe("");let AN=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,s=yS([i.queryParams,i.params,i.data]).pipe(Ho(([l,u,p],m)=>(p={...l,...u,...p},0===m?ct(p):Promise.resolve(p)))).subscribe(l=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const u=function bV(e){const n=Ut(e);if(!n)return null;const t=new ve(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(u)for(const{templateName:p}of u.inputs)t.activatedComponentRef.setInput(p,l[p]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();function Pv(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const s=function aG(e,n,t){return n.children.map(i=>{for(const s of t.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return Pv(e,i,s);return Pv(e,i)})}(e,n,t);return new _a(i,s)}{if(e.shouldAttach(n.value)){const l=e.retrieve(n.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=n.value,u.children=n.children.map(p=>Pv(e,p)),u}}const i=function lG(e){return new Ap(new Ir(e.url),new Ir(e.params),new Ir(e.queryParams),new Ir(e.fragment),new Ir(e.data),e.outlet,e.component,e)}(n.value),s=n.children.map(l=>Pv(e,l));return new _a(i,s)}}const IN="ngNavigationCancelingError";function RN(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=Sp(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,s=PN(!1,Go.Redirect);return s.url=t,s.navigationBehaviorOptions=i,s}function PN(e,n){const t=new Error(`NavigationCancelingError: ${e||""}`);return t[IN]=!0,t.cancellationCode=n,t}function NN(e){return!!e&&e[IN]}let ON=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["ng-component"]],standalone:!0,features:[z1],decls:1,vars:0,template:function(i,s){1&i&&lt(0,"router-outlet")},dependencies:[L0],encapsulation:2})}return e})();function kS(e){const n=e.children&&e.children.map(kS),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=ON),t}function dl(e){return e.outlet||Wt}function Nv(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class mG{constructor(n,t,i,s,l){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=l}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),OS(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const s=Dp(t);n.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,s[u],i),delete s[u]}),Object.values(s).forEach(l=>{this.deactivateRouteAndItsChildren(l,i)})}deactivateRoutes(n,t,i){const s=n.value,l=t?t.value:null;if(s===l)if(s.component){const u=i.getContext(s.outlet);u&&this.deactivateChildRoutes(n,t,u.children)}else this.deactivateChildRoutes(n,t,i);else l&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),s=i&&n.value.component?i.children:t,l=Dp(n);for(const u of Object.values(l))this.deactivateRouteAndItsChildren(u,s);if(i&&i.outlet){const u=i.outlet.detach(),p=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:u,route:n,contexts:p})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),s=i&&n.value.component?i.children:t,l=Dp(n);for(const u of Object.values(l))this.deactivateRouteAndItsChildren(u,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){const s=Dp(t);n.children.forEach(l=>{this.activateRoutes(l,s[l.value.outlet],i),this.forwardEvent(new rG(l.value.snapshot))}),n.children.length&&this.forwardEvent(new tG(n.value.snapshot))}activateRoutes(n,t,i){const s=n.value,l=t?t.value:null;if(OS(s),s===l)if(s.component){const u=i.getOrCreateContext(s.outlet);this.activateChildRoutes(n,t,u.children)}else this.activateChildRoutes(n,t,i);else if(s.component){const u=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(p.contexts),u.attachRef=p.componentRef,u.route=p.route.value,u.outlet&&u.outlet.attach(p.componentRef,p.route.value),OS(p.route.value),this.activateChildRoutes(n,null,u.children)}else{const p=Nv(s.snapshot);u.attachRef=null,u.route=s,u.injector=p,u.outlet&&u.outlet.activateWith(s,u.injector),this.activateChildRoutes(n,null,u.children)}}else this.activateChildRoutes(n,null,i)}}class LN{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class k0{constructor(n,t){this.component=n,this.route=t}}function vG(e,n,t){const i=e._root;return Ov(i,n?n._root:null,t,[i.value])}function Ip(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function Qr(e){return null!==xt(e)}(e)?n.get(e):e:i}function Ov(e,n,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=Dp(n);return e.children.forEach(u=>{(function _G(e,n,t,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const l=e.value,u=n?n.value:null,p=t?t.getContext(e.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const m=function bG(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!th(e.url,n.url);case"pathParamsOrQueryParamsChange":return!th(e.url,n.url)||!ll(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LS(e,n)||!ll(e.queryParams,n.queryParams);default:return!LS(e,n)}}(u,l,l.routeConfig.runGuardsAndResolvers);m?s.canActivateChecks.push(new LN(i)):(l.data=u.data,l._resolvedData=u._resolvedData),Ov(e,n,l.component?p?p.children:null:t,i,s),m&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new k0(p.outlet.component,u))}else u&&Lv(n,p,s),s.canActivateChecks.push(new LN(i)),Ov(e,null,l.component?p?p.children:null:t,i,s)})(u,l[u.value.outlet],t,i.concat([u.value]),s),delete l[u.value.outlet]}),Object.entries(l).forEach(([u,p])=>Lv(p,t.getContext(u),s)),s}function Lv(e,n,t){const i=Dp(e),s=e.value;Object.entries(i).forEach(([l,u])=>{Lv(u,s.component?n?n.children.getContext(l):null:n,t)}),t.canDeactivateChecks.push(new k0(s.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,s))}function Fv(e){return"function"==typeof e}function FN(e){return e instanceof M0||"EmptyError"===e?.name}const V0=Symbol("INITIAL_VALUE");function Rp(){return Ho(e=>yS(e.map(n=>n.pipe(ya(1),function f4(...e){const n=e0(e);return Rr((t,i)=>{(n?Mv(e,t,n):Mv(e,t)).subscribe(i)})}(V0)))).pipe(Ot(n=>{for(const t of n)if(!0!==t){if(t===V0)return V0;if(!1===t||t instanceof Mp)return t}return!0}),Jl(n=>n!==V0),ya(1)))}function kN(e){return function lo(...e){return Vp(e)}(oo(n=>{if(Sp(n))throw RN(0,n)}),Ot(n=>!0===n))}class VS{constructor(n){this.segmentGroup=n||null}}class BS extends Error{constructor(n){super(),this.urlTree=n}}function Pp(e){return E0(new VS(e))}class BG{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],s=t.root;for(;;){if(i=i.concat(s.segments),0===s.numberOfChildren)return ct(i);if(s.numberOfChildren>1||!s.children[Wt])return E0(new we(4e3,!1));s=s.children[Wt]}}applyRedirectCommands(n,t,i){const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if(t.startsWith("/"))throw new BS(s);return s}applyRedirectCreateUrlTree(n,t,i,s){const l=this.createSegmentGroup(n,t.root,i,s);return new Mp(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return Object.entries(n).forEach(([s,l])=>{if("string"==typeof l&&l.startsWith(":")){const p=l.substring(1);i[s]=t[p]}else i[s]=l}),i}createSegmentGroup(n,t,i,s){const l=this.createSegments(n,t.segments,i,s);let u={};return Object.entries(t.children).forEach(([p,m])=>{u[p]=this.createSegmentGroup(n,m,i,s)}),new Gn(l,u)}createSegments(n,t,i,s){return t.map(l=>l.path.startsWith(":")?this.findPosParam(n,l,s):this.findOrReturn(l,i))}findPosParam(n,t,i){const s=i[t.path.substring(1)];if(!s)throw new we(4001,!1);return s}findOrReturn(n,t){let i=0;for(const s of t){if(s.path===n.path)return t.splice(i),s;i++}return n}}const US={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UG(e,n,t,i,s){const l=HS(e,n,t);return l.matched?(i=function uG(e,n){return e.providers&&!e._injector&&(e._injector=ab(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function FG(e,n,t,i){const s=n.canMatch;return s&&0!==s.length?ct(s.map(u=>{const p=Ip(u,e);return uu(function CG(e){return e&&Fv(e.canMatch)}(p)?p.canMatch(n,t):ts(e,()=>p(n,t)))})).pipe(Rp(),kN()):ct(!0)}(i,n,t).pipe(Ot(u=>!0===u?l:{...US}))):ct(l)}function HS(e,n,t){if("**"===n.path)return function HG(e){return{matched:!0,parameters:e.length>0?rN(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...US}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(n.matcher||w4)(t,e,n);if(!s)return{...US};const l={};Object.entries(s.posParams??{}).forEach(([p,m])=>{l[p]=m.path});const u=s.consumed.length>0?{...l,...s.consumed[s.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:u,positionalParamSegments:s.posParams??{}}}function VN(e,n,t,i){return t.length>0&&function WG(e,n,t){return t.some(i=>B0(e,n,i)&&dl(i)!==Wt)}(e,t,i)?{segmentGroup:new Gn(n,GG(i,new Gn(t,e.children))),slicedSegments:[]}:0===t.length&&function jG(e,n,t){return t.some(i=>B0(e,n,i))}(e,t,i)?{segmentGroup:new Gn(e.segments,zG(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new Gn(e.segments,e.children),slicedSegments:t}}function zG(e,n,t,i){const s={};for(const l of t)if(B0(e,n,l)&&!i[dl(l)]){const u=new Gn([],{});s[dl(l)]=u}return{...i,...s}}function GG(e,n){const t={};t[Wt]=n;for(const i of e)if(""===i.path&&dl(i)!==Wt){const s=new Gn([],{});t[dl(i)]=s}return t}function B0(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class XG{}class JG{constructor(n,t,i,s,l,u,p){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=s,this.urlTree=l,this.paramsInheritanceStrategy=u,this.urlSerializer=p,this.applyRedirects=new BG(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new we(4002,`'${n.segmentGroup}'`)}recognize(){const n=VN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Ot(t=>{const i=new PS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,{}),s=new _a(i,t),l=new CN("",s),u=function H4(e,n,t=null,i=null){return gN(pN(e),n,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(l._root,null),{state:l,tree:u}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n,Wt).pipe(wp(i=>{if(i instanceof BS)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof VS?this.noMatchError(i):i}))}inheritParamsAndData(n,t){const i=n.value,s=RS(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),n.children.forEach(l=>this.inheritParamsAndData(l,i))}processSegmentGroup(n,t,i,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,s,!0).pipe(Ot(l=>l instanceof _a?[l]:[]))}processChildren(n,t,i){const s=[];for(const l of Object.keys(i.children))"primary"===l?s.unshift(l):s.push(l);return Zr(s).pipe(Yd(l=>{const u=i.children[l],p=function pG(e,n){const t=e.filter(i=>dl(i)===n);return t.push(...e.filter(i=>dl(i)!==n)),t}(t,l);return this.processSegmentGroup(n,p,u,l)}),function m4(e,n){return Rr(function g4(e,n,t,i,s){return(l,u)=>{let p=t,m=n,_=0;l.subscribe(new Bn(u,S=>{const A=_++;m=p?e(m,S,A):(p=!0,S),i&&u.next(m)},s&&(()=>{p&&u.next(m),u.complete()})))}}(e,n,arguments.length>=2,!0))}((l,u)=>(l.push(...u),l)),S0(null),function v4(e,n){const t=arguments.length>=2;return i=>i.pipe(e?Jl((s,l)=>e(s,l,i)):Ma,bS(1),t?S0(n):tN(()=>new M0))}(),Ti(l=>{if(null===l)return Pp(i);const u=BN(l);return function QG(e){e.sort((n,t)=>n.value.outlet===Wt?-1:t.value.outlet===Wt?1:n.value.outlet.localeCompare(t.value.outlet))}(u),ct(u)}))}processSegment(n,t,i,s,l,u){return Zr(t).pipe(Yd(p=>this.processSegmentAgainstRoute(p._injector??n,t,p,i,s,l,u).pipe(wp(m=>{if(m instanceof VS)return ct(null);throw m}))),eh(p=>!!p),wp(p=>{if(FN(p))return function qG(e,n,t){return 0===n.length&&!e.children[t]}(i,s,l)?ct(new XG):Pp(i);throw p}))}processSegmentAgainstRoute(n,t,i,s,l,u,p){return function $G(e,n,t,i){return!!(dl(e)===i||i!==Wt&&B0(n,t,e))&&HS(n,e,t).matched}(i,s,l,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,s,i,l,u):this.allowRedirects&&p?this.expandSegmentAgainstRouteUsingRedirect(n,s,t,i,l,u):Pp(s):Pp(s)}expandSegmentAgainstRouteUsingRedirect(n,t,i,s,l,u){const{matched:p,consumedSegments:m,positionalParamSegments:_,remainingSegments:S}=HS(t,s,l);if(!p)return Pp(t);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const A=this.applyRedirects.applyRedirectCommands(m,s.redirectTo,_);return this.applyRedirects.lineralizeSegments(s,A).pipe(Ti(O=>this.processSegment(n,i,t,O.concat(S),u,!1)))}matchSegmentAgainstRoute(n,t,i,s,l){const u=UG(t,i,s,n);return"**"===i.path&&(t.children={}),u.pipe(Ho(p=>p.matched?this.getChildConfig(n=i._injector??n,i,s).pipe(Ho(({routes:m})=>{const _=i._loadedInjector??n,{consumedSegments:S,remainingSegments:A,parameters:O}=p,H=new PS(S,O,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function e5(e){return e.data||{}}(i),dl(i),i.component??i._loadedComponent??null,i,function t5(e){return e.resolve||{}}(i)),{segmentGroup:$,slicedSegments:Y}=VN(t,S,A,m);if(0===Y.length&&$.hasChildren())return this.processChildren(_,m,$).pipe(Ot(pe=>null===pe?null:new _a(H,pe)));if(0===m.length&&0===Y.length)return ct(new _a(H,[]));const se=dl(i)===l;return this.processSegment(_,m,$,Y,se?Wt:l,!0).pipe(Ot(pe=>new _a(H,pe instanceof _a?[pe]:[])))})):Pp(t)))}getChildConfig(n,t,i){return t.children?ct({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function LG(e,n,t,i){const s=n.canLoad;return void 0===s||0===s.length?ct(!0):ct(s.map(u=>{const p=Ip(u,e);return uu(function xG(e){return e&&Fv(e.canLoad)}(p)?p.canLoad(n,t):ts(e,()=>p(n,t)))})).pipe(Rp(),kN())}(n,t,i).pipe(Ti(s=>s?this.configLoader.loadChildren(n,t).pipe(oo(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function VG(e){return E0(PN(!1,Go.GuardRejected))}())):ct({routes:[],injector:n})}}function KG(e){const n=e.value.routeConfig;return n&&""===n.path}function BN(e){const n=[],t=new Set;for(const i of e){if(!KG(i)){n.push(i);continue}const s=n.find(l=>i.value.routeConfig===l.value.routeConfig);void 0!==s?(s.children.push(...i.children),t.add(s)):n.push(i)}for(const i of t){const s=BN(i.children);n.push(new _a(i.value,s))}return n.filter(i=>!t.has(i))}function UN(e){const n=e.children.map(t=>UN(t)).flat();return[e,...n]}function zS(e){return Ho(n=>{const t=e(n);return t?Zr(t).pipe(Ot(()=>n)):ct(n)})}let HN=(()=>{class e{buildTitle(t){let i,s=t.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(l=>l.outlet===Wt);return i}getResolvedTitleForRoute(t){return t.data[Sv]}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(a5),providedIn:"root"})}return e})(),a5=(()=>{class e extends HN{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(GU))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Np=new Pe("",{providedIn:"root",factory:()=>({})}),Op=new Pe("");let GS=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Te(_A)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=uu(t.loadComponent()).pipe(Ot(zN),oo(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),yv(()=>{this.componentLoaders.delete(t)})),s=new eN(i,()=>new Ar).pipe(_S());return this.componentLoaders.set(t,s),s}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const l=function l5(e,n,t,i){return uu(e.loadChildren()).pipe(Ot(zN),Ti(s=>s instanceof PT||Array.isArray(s)?ct(s):Zr(n.compileModuleAsync(s))),Ot(s=>{i&&i(e);let l,u,p=!1;return Array.isArray(s)?(u=s,!0):(l=s.create(t).injector,u=l.get(Op,[],{optional:!0,self:!0}).flat()),{routes:u.map(kS),injector:l}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(yv(()=>{this.childrenLoaders.delete(i)})),u=new eN(l,()=>new Ar).pipe(_S());return this.childrenLoaders.set(i,u),u}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function zN(e){return function c5(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let WS=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(u5),providedIn:"root"})}return e})(),u5=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const GN=new Pe(""),WN=new Pe("");function d5(e,n,t){const i=e.get(WN),s=e.get(Gi);return e.get(Tn).runOutsideAngular(()=>{if(!s.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let l;const u=new Promise(_=>{l=_}),p=s.startViewTransition(()=>(l(),function h5(e){return new Promise(n=>{x(n,{injector:e})})}(e))),{onViewTransitionCreated:m}=i;return m&&ts(e,()=>m({transition:p,from:n,to:t})),u})}let U0=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ar,this.transitionAbortSubject=new Ar,this.configLoader=Te(GS),this.environmentInjector=Te(Ni),this.urlSerializer=Te(Ep),this.rootContexts=Te(Rv),this.location=Te(lv),this.inputBindingEnabled=null!==Te(F0,{optional:!0}),this.titleStrategy=Te(HN),this.options=Te(Np,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Te(WS),this.createViewTransition=Te(GN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new K4(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Q4(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,s){return this.transitions=new Ir({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Iv,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Jl(l=>0!==l.id),Ot(l=>({...l,extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Ho(l=>{let u=!1,p=!1;return ct(l).pipe(Ho(m=>{if(this.navigationId>l.id)return this.cancelNavigationTransition(l,"",Go.SupersededByNewNavigation),al;this.currentTransition=l,this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const _=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!_&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new Tp(m.id,this.urlSerializer.serialize(m.rawUrl),A,N0.IgnoredSameUrlNavigation)),m.resolve(null),al}if(this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ct(m).pipe(Ho(A=>{const O=this.transitions?.getValue();return this.events.next(new P0(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),O!==this.transitions?.getValue()?al:Promise.resolve(A)}),function n5(e,n,t,i,s,l){return Ti(u=>function YG(e,n,t,i,s,l,u="emptyOnly"){return new JG(e,n,t,i,s,u,l).recognize()}(e,n,t,i,u.extractedUrl,s,l).pipe(Ot(({state:p,tree:m})=>({...u,targetSnapshot:p,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),oo(A=>{l.targetSnapshot=A.targetSnapshot,l.urlAfterRedirects=A.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects};const O=new wN(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(O)}));if(_&&this.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:A,extractedUrl:O,source:H,restoredState:$,extras:Y}=m,se=new P0(A,this.urlSerializer.serialize(O),H,$);this.events.next(se);const pe=SN(this.rootComponentType).snapshot;return this.currentTransition=l={...m,targetSnapshot:pe,urlAfterRedirects:O,extras:{...Y,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=O,ct(l)}{const A="";return this.events.next(new Tp(m.id,this.urlSerializer.serialize(m.extractedUrl),A,N0.IgnoredByUrlHandlingStrategy)),m.resolve(null),al}}),oo(m=>{const _=new X4(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),Ot(m=>(this.currentTransition=l={...m,guards:vG(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},l)),function TG(e,n){return Ti(t=>{const{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?ct({...t,guardsResult:!0}):function DG(e,n,t,i){return Zr(e).pipe(Ti(s=>function OG(e,n,t,i,s){const l=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return l&&0!==l.length?ct(l.map(p=>{const m=Nv(n)??s,_=Ip(p,m);return uu(function SG(e){return e&&Fv(e.canDeactivate)}(_)?_.canDeactivate(e,n,t,i):ts(m,()=>_(e,n,t,i))).pipe(eh())})).pipe(Rp()):ct(!0)}(s.component,s.route,t,n,i)),eh(s=>!0!==s,!0))}(u,i,s,e).pipe(Ti(p=>p&&function wG(e){return"boolean"==typeof e}(p)?function AG(e,n,t,i){return Zr(n).pipe(Yd(s=>Mv(function RG(e,n){return null!==e&&n&&n(new eG(e)),ct(!0)}(s.route.parent,i),function IG(e,n){return null!==e&&n&&n(new nG(e)),ct(!0)}(s.route,i),function NG(e,n,t){const i=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(u=>function yG(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(u)).filter(u=>null!==u).map(u=>y0(()=>ct(u.guards.map(m=>{const _=Nv(u.node)??t,S=Ip(m,_);return uu(function EG(e){return e&&Fv(e.canActivateChild)}(S)?S.canActivateChild(i,e):ts(_,()=>S(i,e))).pipe(eh())})).pipe(Rp())));return ct(l).pipe(Rp())}(e,s.path,t),function PG(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const s=i.map(l=>y0(()=>{const u=Nv(n)??t,p=Ip(l,u);return uu(function MG(e){return e&&Fv(e.canActivate)}(p)?p.canActivate(n,e):ts(u,()=>p(n,e))).pipe(eh())}));return ct(s).pipe(Rp())}(e,s.route,t))),eh(s=>!0!==s,!0))}(i,l,e,n):ct(p)),Ot(p=>({...t,guardsResult:p})))})}(this.environmentInjector,m=>this.events.next(m)),oo(m=>{if(l.guardsResult=m.guardsResult,Sp(m.guardsResult))throw RN(0,m.guardsResult);const _=new Y4(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(_)}),Jl(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",Go.GuardRejected),!1)),zS(m=>{if(m.guards.canActivateChecks.length)return ct(m).pipe(oo(_=>{const S=new Z4(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(S)}),Ho(_=>{let S=!1;return ct(_).pipe(function r5(e,n){return Ti(t=>{const{targetSnapshot:i,guards:{canActivateChecks:s}}=t;if(!s.length)return ct(t);const l=new Set(s.map(m=>m.route)),u=new Set;for(const m of l)if(!u.has(m))for(const _ of UN(m))u.add(_);let p=0;return Zr(u).pipe(Yd(m=>l.has(m)?function i5(e,n,t,i){const s=e.routeConfig,l=e._resolve;return void 0!==s?.title&&!DN(s)&&(l[Sv]=s.title),function o5(e,n,t,i){const s=wS(e);if(0===s.length)return ct({});const l={};return Zr(s).pipe(Ti(u=>function s5(e,n,t,i){const s=Nv(n)??i,l=Ip(e,s);return uu(l.resolve?l.resolve(n,t):ts(s,()=>l(n,t)))}(e[u],n,t,i).pipe(eh(),oo(p=>{l[u]=p}))),bS(1),function y4(e){return Ot(()=>e)}(l),wp(u=>FN(u)?al:E0(u)))}(l,e,n,i).pipe(Ot(u=>(e._resolvedData=u,e.data=RS(e,e.parent,t).resolve,null)))}(m,i,e,n):(m.data=RS(m,m.parent,e).resolve,ct(void 0))),oo(()=>p++),bS(1),Ti(m=>p===u.size?ct(t):al))})}(this.paramsInheritanceStrategy,this.environmentInjector),oo({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(_,"",Go.NoDataFromResolver)}}))}),oo(_=>{const S=new J4(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(S)}))}),zS(m=>{const _=S=>{const A=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(S.routeConfig).pipe(oo(O=>{S.component=O}),Ot(()=>{})));for(const O of S.children)A.push(..._(O));return A};return yS(_(m.targetSnapshot.root)).pipe(S0(null),ya(1))}),zS(()=>this.afterPreactivation()),Ho(()=>{const{currentSnapshot:m,targetSnapshot:_}=l,S=this.createViewTransition?.(this.environmentInjector,m.root,_.root);return S?Zr(S).pipe(Ot(()=>l)):ct(l)}),Ot(m=>{const _=function sG(e,n,t){const i=Pv(e,n._root,t?t._root:void 0);return new EN(i,n)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=l={...m,targetRouterState:_},this.currentNavigation.targetRouterState=_,l}),oo(()=>{this.events.next(new TS)}),((e,n,t,i)=>Ot(s=>(new mG(n,s.targetRouterState,s.currentRouterState,t,i).activate(e),s)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),ya(1),oo({next:m=>{u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ul(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),this.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{u=!0}}),function _4(e){return Rr((n,t)=>{va(e).subscribe(new Bn(t,()=>t.complete(),ao)),!t.closed&&n.subscribe(t)})}(this.transitionAbortSubject.pipe(oo(m=>{throw m}))),yv(()=>{!u&&!p&&this.cancelNavigationTransition(l,"",Go.SupersededByNewNavigation),this.currentTransition?.id===l.id&&(this.currentNavigation=null,this.currentTransition=null)}),wp(m=>{if(p=!0,NN(m))this.events.next(new Cp(l.id,this.urlSerializer.serialize(l.extractedUrl),m.message,m.cancellationCode)),function cG(e){return NN(e)&&Sp(e.url)}(m)?this.events.next(new DS(m.url)):l.resolve(!1);else{this.events.next(new O0(l.id,this.urlSerializer.serialize(l.extractedUrl),m,l.targetSnapshot??void 0));try{l.resolve(t.errorHandler(m))}catch(_){this.options.resolveNavigationPromiseOnError?l.resolve(!1):l.reject(_)}}return al}))}))}cancelNavigationTransition(t,i,s){const l=new Cp(t.id,this.urlSerializer.serialize(t.extractedUrl),i,s);this.events.next(l),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function f5(e){return e!==Iv}let p5=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(m5),providedIn:"root"})}return e})();class g5{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let m5=(()=>{class e extends g5{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Er(e)))(s||e)}})();static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jN=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:()=>Te(v5),providedIn:"root"})}return e})(),v5=(()=>{class e extends jN{constructor(){super(...arguments),this.location=Te(lv),this.urlSerializer=Te(Ep),this.options=Te(Np,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Te(WS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mp,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=SN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof P0)this.stateMemento=this.createStateMemento();else if(t instanceof Tp)this.rawUrlTree=i.initialUrl;else if(t instanceof wN){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else t instanceof TS?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof Cp&&(t.code===Go.GuardRejected||t.code===Go.NoDataFromResolver)?this.restoreHistory(i):t instanceof O0?this.restoreHistory(i,!0):t instanceof ul&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const u={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",u)}else{const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(s,"",l)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-this.browserPageId;0!==l?this.location.historyGo(l):this.currentUrlTree===t.finalUrl&&0===l&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=Er(e)))(s||e)}})();static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var kv=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(kv||{});function $N(e,n){e.events.pipe(Jl(t=>t instanceof ul||t instanceof Cp||t instanceof O0||t instanceof Tp),Ot(t=>t instanceof ul||t instanceof Tp?kv.COMPLETE:t instanceof Cp&&(t.code===Go.Redirect||t.code===Go.SupersededByNewNavigation)?kv.REDIRECTING:kv.FAILED),Jl(t=>t!==kv.REDIRECTING),ya(1)).subscribe(()=>{n()})}function y5(e){throw e}const _5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wo=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Te(Sb),this.stateManager=Te(jN),this.options=Te(Np,{optional:!0})||{},this.pendingTasks=Te(Zc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Te(U0),this.urlSerializer=Te(Ep),this.location=Te(lv),this.urlHandlingStrategy=Te(WS),this._events=new Ar,this.errorHandler=this.options.errorHandler||y5,this.navigated=!1,this.routeReuseStrategy=Te(p5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Te(Op,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Te(F0,{optional:!0}),this.eventsSubscription=new Tr,this.isNgZoneEnabled=Te(Tn)instanceof Tn&&Tn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const s=this.navigationTransitions.currentTransition,l=this.navigationTransitions.currentNavigation;if(null!==s&&null!==l)if(this.stateManager.handleRouterEvent(i,l),i instanceof Cp&&i.code!==Go.Redirect&&i.code!==Go.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ul)this.navigated=!0;else if(i instanceof DS){const u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),p={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f5(s.source)};this.scheduleNavigation(u,Iv,null,p,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function x5(e){return!(e instanceof TS||e instanceof DS)})(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Iv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,s){const l={replaceUrl:!0},u=s?.navigationId?s:null;if(s){const m={...s};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(l.state=m)}const p=this.parseUrl(t);this.scheduleNavigation(p,i,u,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(kS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:s,queryParams:l,fragment:u,queryParamsHandling:p,preserveFragment:m}=i,_=m?this.currentUrlTree.fragment:u;let A,S=null;switch(p){case"merge":S={...this.currentUrlTree.queryParams,...l};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=l||null}null!==S&&(S=this.removeEmptyProps(S));try{A=pN(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),A=this.currentUrlTree.root}return gN(A,t,S,_??null)}navigateByUrl(t,i={skipLocationChange:!1}){const s=Sp(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(l,Iv,null,i)}navigate(t,i={skipLocationChange:!1}){return function w5(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new we(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let s;if(s=!0===i?{..._5}:!1===i?{...b5}:i,Sp(t))return oN(this.currentUrlTree,t,s);const l=this.parseUrl(t);return oN(this.currentUrlTree,l,s)}removeEmptyProps(t){return Object.entries(t).reduce((i,[s,l])=>(null!=l&&(i[s]=l),i),{})}scheduleNavigation(t,i,s,l,u){if(this.disposed)return Promise.resolve(!1);let p,m,_;u?(p=u.resolve,m=u.reject,_=u.promise):_=new Promise((A,O)=>{p=A,m=O});const S=this.pendingTasks.add();return $N(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:l,resolve:p,reject:m,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(A=>Promise.reject(A))}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),du=(()=>{class e{constructor(t,i,s,l,u,p){this.router=t,this.route=i,this.tabIndexAttribute=s,this.renderer=l,this.el=u,this.locationStrategy=p,this.href=null,this.commands=null,this.onChanges=new Ar,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=u.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(_=>{_ instanceof ul&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,s,l,u){const p=this.urlTree;return!!(null===p||this.isAnchorElement&&(0!==t||i||s||l||u||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(p,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const i=null===this.href?null:function m_(e,n,t){return function Px(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?g_:ea}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){const s=this.renderer,l=this.el.nativeElement;null!==i?s.setAttribute(l,t,i):s.removeAttribute(l,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Wo),ce(Ap),function Wu(e){return function Ty(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const i=t.length;let s=0;for(;s<i;){const l=t[s];if(pc(l))break;if(0===l)s+=2;else if("number"==typeof l)for(s++;s<i&&"string"==typeof t[s];)s++;else{if(l===n)return t[s+1];s+=2}}}return null}(Sn(),e)}("tabindex"),ce(nl),ce(Ki),ce(Wd))};static#t=this.\u0275dir=Ke({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){1&i&&St("click",function(u){return s.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&i&&gr("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[an.HasDecoratorInputTransform,"preserveFragment","preserveFragment",fp],skipLocationChange:[an.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",fp],replaceUrl:[an.HasDecoratorInputTransform,"replaceUrl","replaceUrl",fp],routerLink:"routerLink"},standalone:!0,features:[RT,go]})}return e})(),qN=(()=>{class e{get isActive(){return this._isActive}constructor(t,i,s,l,u){this.router=t,this.element=i,this.renderer=s,this.cdr=l,this.link=u,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Nn,this.routerEventsSubscription=t.events.subscribe(p=>{p instanceof ul&&this.update()})}ngAfterContentInit(){ct(this.links.changes,ct(null)).pipe(xv()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Zr(t).pipe(xv()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function M5(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{const l=s.urlTree;return!!l&&t.isActive(l,i)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Wo),ce(Ki),ce(nl),ce(dp),ce(du,8))};static#t=this.\u0275dir=Ke({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,l){if(1&i&&function y1(e,n,t,i){Xe(e,n,t,i)}(l,du,5),2&i){let u;(function _1(e){const n=fe(),t=Xt(),i=pg();Rh(i+1);const s=Zt(t,i);if(e.dirty&&function yw(e){return!(4&~e[tt])}(n)===!(2&~s.metadata.flags)){if(null===s.matches)e.reset([]);else{const l=er(n,i);e.reset(l,By),e.notifyOnChanges()}return!0}return!1})(u=b1())&&(s.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[go]})}return e})();class XN{}let E5=(()=>{class e{constructor(t,i,s,l,u){this.router=t,this.injector=s,this.preloadingStrategy=l,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Jl(t=>t instanceof ul),Yd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const s=[];for(const l of i){l.providers&&!l._injector&&(l._injector=ab(l.providers,t,`Route: ${l.path}`));const u=l._injector??t,p=l._loadedInjector??u;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&s.push(this.preloadConfig(u,l)),(l.children||l._loadedRoutes)&&s.push(this.processRoutes(p,l.children??l._loadedRoutes))}return Zr(s).pipe(xv())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ct(null);const l=s.pipe(Ti(u=>null===u?ct(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));return i.loadComponent&&!i._loadedComponent?Zr([l,this.loader.loadComponent(i)]).pipe(xv()):l})}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(Wo),Oe(_A),Oe(Ni),Oe(XN),Oe(GS))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const jS=new Pe("");let YN=(()=>{class e{constructor(t,i,s,l,u={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=s,this.zone=l,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration||="disabled",u.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof P0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ul?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Tp&&t.code===N0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function ps(){throw new Error("invalid")}()};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac})}return e})();function hl(e,n){return{\u0275kind:e,\u0275providers:n}}function JN(){const e=Te(vn);return n=>{const t=e.get(Kc);if(n!==t.components[0])return;const i=e.get(Wo),s=e.get(QN);1===e.get($S)&&i.initialNavigation(),e.get(KN,null,Pt.Optional)?.setUpPreloading(),e.get(jS,null,Pt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const QN=new Pe("",{factory:()=>new Ar}),$S=new Pe("",{providedIn:"root",factory:()=>1}),KN=new Pe("");function D5(e){return hl(0,[{provide:KN,useExisting:E5},{provide:XN,useExisting:e}])}function I5(e){return hl(9,[{provide:GN,useValue:d5},{provide:WN,useValue:{skipNextTransition:!!e?.skipInitialTransition,...e}}])}const eO=new Pe("ROUTER_FORROOT_GUARD"),R5=[lv,{provide:Ep,useClass:xS},Wo,Rv,{provide:Ap,useFactory:function ZN(e){return e.routerState.root},deps:[Wo]},GS,[]];let tO=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[R5,[],{provide:Op,multi:!0,useValue:t},{provide:eO,useFactory:L5,deps:[[Wo,new Ls,new Pi]]},{provide:Np,useValue:i||{}},i?.useHash?{provide:Wd,useClass:SV}:{provide:Wd,useClass:cI},{provide:jS,useFactory:()=>{const e=Te(AI),n=Te(Tn),t=Te(Np),i=Te(U0),s=Te(Ep);return t.scrollOffset&&e.setOffset(t.scrollOffset),new YN(s,i,e,n,t)}},i?.preloadingStrategy?D5(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?F5(i):[],i?.bindToComponentInputs?hl(8,[AN,{provide:F0,useExisting:AN}]).\u0275providers:[],i?.enableViewTransitions?I5().\u0275providers:[],[{provide:nO,useFactory:JN},{provide:QM,multi:!0,useExisting:nO}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Op,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(eO,8))};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({})}return e})();function L5(e){return"guarded"}function F5(e){return["disabled"===e.initialNavigation?hl(3,[{provide:Db,multi:!0,useFactory:()=>{const n=Te(Wo);return()=>{n.setUpLocationChangeListener()}}},{provide:$S,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?hl(2,[{provide:$S,useValue:0},{provide:Db,multi:!0,deps:[vn],useFactory:n=>{const t=n.get(MV,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const s=n.get(Wo),l=n.get(QN);$N(s,()=>{i(!0)}),n.get(U0).afterPreactivation=()=>(i(!0),l.closed?ct(void 0):l),s.initialNavigation()}))}}]).\u0275providers:[]]}const nO=new Pe(""),V5=["addListener","removeListener"],B5=["addEventListener","removeEventListener"],U5=["on","off"];function H0(e,n,t,i){if(Bt(t)&&(i=t,t=void 0),i)return H0(e,n,t).pipe(VE(i));const[s,l]=function G5(e){return Bt(e.addEventListener)&&Bt(e.removeEventListener)}(e)?B5.map(u=>p=>e[u](n,p,t)):function H5(e){return Bt(e.addListener)&&Bt(e.removeListener)}(e)?V5.map(rO(e,n)):function z5(e){return Bt(e.on)&&Bt(e.off)}(e)?U5.map(rO(e,n)):[];if(!s&&FE(e))return Ti(u=>H0(u,n,t))(va(e));if(!s)throw new TypeError("Invalid event target");return new hn(u=>{const p=(...m)=>u.next(1<m.length?m:m[0]);return s(p),()=>l(p)})}function rO(e,n){return t=>i=>e[t](n,i)}let Vv=(()=>{class e{constructor(t,i){this.viewportScroller=t,this.util=i}getScroll(t=document){const i=this.getCurrentScroll(t),s=this.getMaxScroll(t);let l=i/Math.max(s,1);return l=Math.max(l,0),l=Math.min(l,1),100*l}getScrollAsStream(t=document){let i;return i=t instanceof Document?H0(window,"scroll").pipe(Ot(s=>this.getScroll(t))):H0(t,"scroll").pipe(Ot(s=>this.getScroll(t))),i}getScrollBoundaries(t){const i=document.querySelector("#"+t),s=new W5(0,0);return i instanceof HTMLElement&&(s.Top=i.offsetTop/document.body.offsetHeight*100,s.Bottom=(i.offsetTop+i.getBoundingClientRect().height)/document.body.offsetHeight*100),s}scrollTo(t){var i=this;return(0,vr.A)(function*(){return i.util.set_var("autoScrolling",!0),new Promise((s,l)=>{i.viewportScroller.scrollToAnchor(t),setTimeout(()=>{i.util.set_var("autoScrolling",!1),s(i.getScroll(document))},1e3)})})()}getRelativePosition(t){return t.offsetTop/document.body.offsetHeight*100}getCurrentScroll(t){return t instanceof Document?window.pageYOffset:t.scrollTop}getMaxScroll(t){return t instanceof Document?Math.max(t.body.scrollHeight,t.body.offsetHeight,t.body.clientHeight,t.documentElement.scrollHeight,t.documentElement.offsetHeight,t.documentElement.clientHeight)-t.documentElement.clientHeight:t.scrollHeight-t.clientHeight}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(AI),Oe(zo))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class W5{constructor(n,t){this.Top=n,this.Bottom=t}}let j5=(()=>{class e{constructor(t,i,s,l){this.elementScrollService=t,this.router=i,this.util=s,this.preferenceService=l,this.togglingNav=null,this.pageScroll=0}ngOnInit(){this.defaultRouteNames=this.getDefaultRouteNames(),this.elementScrollService.getScrollAsStream().subscribe(t=>{this.pageScroll=t,this.monitorDefaultRouteSections(t),this.lastSection=this.thisSection}),this.router.events.subscribe(t=>{t instanceof ul&&(this.IsInvalidRoute="/404"===t.url,setTimeout(()=>{this.preferenceService.setMenuMode(this.isDefaultRoute?"available":"retracted")},500)),this.folded=!0}),this.scrollToCurrentRouteSection(),this.folded=!0}toggleNavFolding(){null===this.togglingNav&&(this.togglingNav=setTimeout(()=>{this.folded=!this.folded,this.togglingNav=null},0))}scrollTo(t){this.elementScrollService.scrollTo(t).then(i=>{})}clickTarget(t){t.preventDefault(),this.util.click(t.target)}getAllRoutes(){return this.router.config.filter(t=>!["**","404"].includes(t.path))}getDefaultRouteNames(){return this.getAllRoutes().find(t=>""===t.path).children.filter(t=>![""].includes(t.path)).map(t=>t.path)}get isDefaultRoute(){return this.util.stringContainsAny(this.router.url,this.defaultRouteNames)}monitorDefaultRouteSections(t){if(this.util.stringContainsAny(this.router.url,this.defaultRouteNames))for(let i=0;i<this.defaultRouteNames.length;i++){const s=this.defaultRouteNames[i],l=this.elementScrollService.getScrollBoundaries(s);t>l.Top+1&&t<l.Bottom&&-1===this.router.url.indexOf(s)&&(this.thisSection=s,this.scrollingWithin||"true"===this.util.get_var("autoScrolling")||this.router.navigateByUrl("/"+s))}this.scrollingWithin=this.thisSection===this.lastSection}scrollToCurrentRouteSection(){if(this.util.stringContainsAny(window.location.href,this.defaultRouteNames)){if(this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)===this.defaultRouteNames[0])return;window.addEventListener("load",this.handleWindowLoad),this.util.set_var("defaultSection",this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)),this.util.set_var("autoScrolling",!0)}}handleWindowLoad(){window.removeEventListener("load",this.handleWindowLoad);const t=document.body.getAttribute("defaultSection");if(void 0!==t){const i=document.querySelector('[data-details="'+t+'"]');i?.click()}}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vv),ce(Wo),ce(zo),ce(bp))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-main-nav"]],inputs:{mode:"mode"},decls:30,vars:29,consts:[[1,"top"],[1,"nav","text-white","text-always-white"],["data-details","home","routerLink","/home","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","profile","routerLink","/profile","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","projects","routerLink","/projects","routerLinkActive","active",1,"nav-item",3,"click","tap"],[1,"nav-extender",3,"click","tap"],["data-details","contact","routerLink","/contact","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","skills","routerLink","/skills","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","projects","routerLink","/learning","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","resume","routerLink","/resume","routerLinkActive","active",1,"nav-item",3,"click","tap"],[3,"click","tap"],[1,"fa","fa-chevron-up"]],template:function(i,s){1&i&&(X(0,"aside",0)(1,"ul",1)(2,"li",2),St("click",function(){return s.scrollTo("home")})("tap",function(u){return s.clickTarget(u)}),ae(3),He(4,"translate"),Q(),X(5,"li",3),St("click",function(){return s.scrollTo("profile")})("tap",function(u){return s.clickTarget(u)}),ae(6),He(7,"translate"),Q(),X(8,"li",4),St("click",function(){return s.scrollTo("projects")})("tap",function(u){return s.clickTarget(u)}),ae(9),He(10,"translate"),Q(),X(11,"li",5),St("click",function(){return s.toggleNavFolding()})("tap",function(u){return s.clickTarget(u)}),X(12,"span"),ae(13,"\u23f7"),Q(),X(14,"span"),ae(15,"\u23f6"),Q()(),X(16,"li",6),St("click",function(){return s.scrollTo("contact")})("tap",function(u){return s.clickTarget(u)}),ae(17),He(18,"translate"),Q(),X(19,"li",7),St("click",function(){return s.scrollTo("skills")})("tap",function(u){return s.clickTarget(u)}),ae(20),He(21,"translate"),Q(),X(22,"li",8),St("click",function(){return s.scrollTo("learning")})("tap",function(u){return s.clickTarget(u)}),ae(23),He(24,"translate"),Q(),X(25,"li",9),St("click",function(){return s.scrollTo("resume")})("tap",function(u){return s.clickTarget(u)}),ae(26),He(27,"translate"),Q()(),X(28,"div",10),St("click",function(){return s.scrollTo("wrapper")})("tap",function(u){return s.clickTarget(u)}),lt(29,"i",11),Q()()),2&i&&(xe(),ha("collapsed",!s.folded),xe(2),ur(" ",ze(4,15,"MENU.HOME")," "),xe(3),ur(" ",ze(7,17,"MENU.PROFILE")," "),xe(3),ur(" ",ze(10,19,"MENU.PROJECTS")," "),xe(3),ha("d-none",!s.folded),xe(2),ha("d-none",s.folded),xe(3),ur(" ",ze(18,21,"MENU.CONTACT")," "),xe(3),ur(" ",ze(21,23,"MENU.SKILLS")," "),xe(3),ur(" ",ze(24,25,"MENU.LEARNING")," "),xe(3),ur(" ",ze(27,27,"MENU.RESUME")," "),xe(2),jm("top-scroller"+(s.pageScroll>20?"":" hide")))},dependencies:[du,qN,Ql],styles:[".nav[_ngcontent-%COMP%]{list-style-type:none;text-align:center;margin:0;padding:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#c8c8e14d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%], .top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{color:#fafafe!important;background-color:#575a7080;border:1px dashed #575a7080}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#9696af4d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0;-webkit-user-select:none;user-select:none;font-weight:700;font-size:smaller;display:flex;height:58px;justify-content:space-around;overflow:hidden}.top[_ngcontent-%COMP%]   .nav.collapsed[_ngcontent-%COMP%]{height:120px;border:1px dashed #777;border-top:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:block;cursor:pointer;list-style-type:none;line-height:58px;min-width:70px;max-width:calc(80px + 2vw);padding:0 2px;text-align:center}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-extender[_ngcontent-%COMP%]{width:18px;line-height:58px;padding:1px;border:1px dashed #777;cursor:pointer}.top-scroller[_ngcontent-%COMP%]{background-color:#77777750;position:fixed;bottom:10px;right:24px;height:58px;width:58px;border:1px dashed #99999950;z-index:1;font-size:30px;text-align:center;vertical-align:middle;line-height:45px;color:#777;cursor:pointer}"]})}return e})();function $5(e,n){if(1&e){const t=Hd();X(0,"span",24),St("click",function(){return Ro(t),Po(Fn().toggleFullscreenMode())})("tap",function(s){return Ro(t),Po(Fn().clickTarget(s))}),lt(1,"span",25),Q()}2&e&&ha("active",Fn().IsFullScreen)}function q5(e,n){if(1&e&&(X(0,"span",26),He(1,"translate"),lt(2,"i"),Q()),2&e){const t=n.$implicit;vb("display",Fn().preference.Language!=t.code?"none":""),zi("title",ze(1,6,"LANGUAGES."+t.name)),xe(2),Ud("flag ",t.ico,"")}}function X5(e,n){if(1&e&&(X(0,"span",27),He(1,"translate"),lt(2,"i"),Q()),2&e){const t=n.$implicit;vb("display",Fn().preference.LightMode!=t.name?"none":""),zi("title",ze(1,6,"MENU."+t.desc)),xe(2),Ud("fa ",t.ico,"")}}function Y5(e,n){if(1&e){const t=Hd();X(0,"li",28),He(1,"translate"),St("click",function(){const s=Ro(t).$implicit;return Po(Fn().setLanguage(s.code))})("tap",function(){const s=Ro(t).$implicit;return Po(Fn().setLanguage(s.code))}),ae(2),He(3,"translate"),X(4,"span",29),lt(5,"i"),Q()()}if(2&e){const t=n.$implicit;ha("active",Fn().preference.Language==t.code),zi("title",ze(1,7,"LANGUAGES."+t.name)),xe(2),ur("",ze(3,9,"LANGUAGES."+t.name)," "),xe(3),Ud("flag ",t.ico,"")}}function Z5(e,n){if(1&e){const t=Hd();X(0,"li",28),He(1,"translate"),St("click",function(){const s=Ro(t).$implicit;return Po(Fn().setLightMode(s.name))})("tap",function(){const s=Ro(t).$implicit;return Po(Fn().setLightMode(s.name))}),ae(2),He(3,"translate"),X(4,"span",30),lt(5,"i"),Q()()}if(2&e){const t=n.$implicit;ha("active",Fn().preference.LightMode==t.name),zi("title",ze(1,7,"MENU."+t.desc)),xe(2),ur(" ",ze(3,9,"MENU."+t.code)," "),xe(3),Ud("fa ",t.ico,"")}}function J5(e,n){if(1&e){const t=Hd();X(0,"li",28),He(1,"translate"),St("click",function(){const s=Ro(t).$implicit;return Po(Fn().setBackdropMode(s.name))})("tap",function(){const s=Ro(t).$implicit;return Po(Fn().setBackdropMode(s.name))}),ae(2),He(3,"translate"),X(4,"span",30),lt(5,"i"),Q()()}if(2&e){const t=n.$implicit;ha("active",Fn().preference.BackdropMode==t.name),zi("title",ze(1,7,"MENU."+t.desc)),xe(2),ur(" ",ze(3,9,"MENU."+t.code)," "),xe(3),Ud("fa ",t.ico,"")}}function Q5(e,n){if(1&e){const t=Hd();X(0,"button",31),St("click",function(){return Ro(t),Po(Fn().toggleBackdropMode())}),ae(1,"BackdropMode!"),Q()}}let K5=(()=>{class e{constructor(t,i){this.preferenceService=t,this.util=i,this.IsDrawn=!1,this.IsFullScreen=!1,this.backdropModes=_p,this.languages=Kd,this.lightModes=Qd}ngOnInit(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(t=>{this.preference=t})}toggleDrawer(){!0===this.IsDrawn?this.drawerPull():this.drawerPush()}toggleFullscreenMode(){const t=window.document,i=t.documentElement;var s=i.requestFullscreen;t.fullscreenElement?(t.exitFullscreen.call(t).then().catch(u=>console.log(u)),this.IsFullScreen=!1):(s.call(i).then().catch(u=>console.log(u)),this.IsFullScreen=!0)}drawerPull(){this.IsDrawn=!0}drawerPush(){this.IsDrawn=!1}setLightMode(t){this.preferenceService.setLightMode(t)}toggleLightMode(){this.preferenceService.toggleLightMode()}setLanguage(t){this.preferenceService.setLanguage(t)}toggleLanguages(){this.preferenceService.toggleLanguages()}setBackdropMode(t){this.preferenceService.setBackdropMode(t)}toggleBackdropMode(){this.preferenceService.toggleBackdropMode()}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(bp),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-preference-menu"]],decls:41,vars:23,consts:[[1,"menu-drawer","top",3,"panRight"],[1,"drawer-backdrop","show-drawn",3,"click","tap"],[1,"text-center","text-white","text-always-white","drawer-header"],[1,"drawer-header-inner"],["class","toggle-fullscreen hide-drawn",3,"active","click","tap",4,"ngIf"],[1,"d-none","d-sm-block","drawer-opener","hide-drawn",3,"click","tap"],[1,"d-flex","justify-content-around","drawer-toggle-inner","hide-drawn"],["class","hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["class","text-glow hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["title","Preference",1,"hide-drawn"],[1,"fa","fa-bars"],["title","close menu",1,"show-drawn","drawer-closer",3,"click","tap"],[1,"fa","fa-close"],[1,"d-sm-none","drawer-handle","text-glow",3,"panLeft"],[1,"fa","fa-chevron-left"],[1,"menu","py-2","list-block","text-white","text-always-white"],[1,"menu-item","list-item","my-1","py-2"],[1,"list-inline","py-2"],[3,"title","active","click","tap",4,"ngFor","ngForOf"],[1,"menu-item","list-item","my-1","py-2","d-none"],["title","Toggle Fullscreen",1,"text-center",3,"click","tap"],[1,"text-glow","mx-2",2,"height","30px","font-size","2em"],[1,"fa"],["style","width:150px;height:30px;background-color:orange;position:fixed;top:100px;left:100px;",3,"click",4,"ngIf"],[1,"toggle-fullscreen","hide-drawn",3,"click","tap"],[1,"fa","fa-compress"],[1,"hide-drawn",3,"title"],[1,"text-glow","hide-drawn",3,"title"],[3,"click","tap","title"],[1,"float-right","mx-2"],[1,"float-right","text-glow","mx-2"],[2,"width","150px","height","30px","background-color","orange","position","fixed","top","100px","left","100px",3,"click"]],template:function(i,s){1&i&&(X(0,"aside",0),St("panRight",function(){return s.drawerPush()}),X(1,"div",1),St("click",function(){return s.drawerPush()})("tap",function(){return s.drawerPush()}),Q(),X(2,"div",2)(3,"div",3),Br(4,$5,2,2,"span",4),X(5,"div",5),St("click",function(){return s.drawerPull()})("tap",function(){return s.drawerPull()}),X(6,"div",6),Br(7,q5,3,8,"span",7)(8,X5,3,8,"span",8),X(9,"span",9),lt(10,"i",10),Q()()(),X(11,"span",11),St("click",function(){return s.drawerPush()})("tap",function(){return s.drawerPush()}),lt(12,"i",12),Q(),X(13,"div",13),St("panLeft",function(){return s.drawerPull()}),lt(14,"i",14),Q()(),X(15,"h3"),ae(16),He(17,"translate"),Q()(),X(18,"ul",15)(19,"li",16),ae(20),He(21,"translate"),X(22,"ul",17),Br(23,Y5,6,11,"li",18),Q()(),X(24,"li",16),ae(25),He(26,"translate"),X(27,"ul",17),Br(28,Z5,6,11,"li",18),Q()(),X(29,"li",19),ae(30),He(31,"translate"),X(32,"ul",17),Br(33,J5,6,11,"li",18),Q()(),X(34,"li",16),ae(35," Toggle Fullscreen "),X(36,"ul",17)(37,"li",20),St("click",function(){return s.toggleFullscreenMode()})("tap",function(u){return s.clickTarget(u)}),X(38,"span",21),lt(39,"i",22),Q()()()()(),Br(40,Q5,2,0,"button",23),Q()),2&i&&(gr("drawn",s.IsDrawn)("light-mode",s.preference.LightMode),xe(4),Ft("ngIf",s.IsFullScreen),xe(3),Ft("ngForOf",s.languages),xe(),Ft("ngForOf",s.lightModes),xe(8),Qt(ze(17,15,"MENU.PREFERENCE")),xe(4),ur(" ",ze(21,17,"MENU.LANGUAGE")," "),xe(3),Ft("ngForOf",s.languages),xe(2),ur(" ",ze(26,19,"MENU.LIGHTINGMODE")," "),xe(3),Ft("ngForOf",s.lightModes),xe(2),ur(" ",ze(31,21,"MENU.BACKDROPMODE")," "),xe(3),Ft("ngForOf",s.backdropModes),xe(6),jm(s.IsFullScreen?"fa-compress":"fa-expand"),xe(),Ft("ngIf",!1))},dependencies:[jd,gp,Ql],styles:['.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:4px 4px 4px 10px;transition:all .2s ease}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#448}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#3f355f8e}.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:before{content:" ";display:inline-block;width:4px;height:4px}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#1a1a1a}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#272770}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:hover{background-color:#3a335a}.menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{content:" ";display:inline-block;width:10px;height:10px;background-color:#afc8fff2;border-radius:50%;margin-right:10px;box-shadow:1px 1px 2px #777}.menu[_ngcontent-%COMP%]{list-style-type:none;padding-left:10px}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:not(:first){border-top:1px dashed #77777780}.menu-drawer[_ngcontent-%COMP%]{width:320px;height:100vh;padding:8px;margin-right:-320px;transition:margin .2s ease}[light-mode=dark].menu-drawer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].menu-drawer[_ngcontent-%COMP%]{background-color:#203070}[drawn=true].menu-drawer[_ngcontent-%COMP%]{margin-right:0}.drawer-handle[_ngcontent-%COMP%]{position:absolute;left:-25px;top:75px;width:15px;border-top-left-radius:4px;border-bottom-left-radius:4px}[light-mode=dark][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#202020}[light-mode=bright][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#203070}.drawer-opener[_ngcontent-%COMP%]{position:absolute;left:-150px;width:125px;transition:background-color .2s ease;cursor:pointer}[drawn=true][_ngcontent-%COMP%]   .drawer-closer[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:10px;width:40px;height:40px;line-height:40px;background-color:#80808066}[drawn=true][_ngcontent-%COMP%]   .hide-drawn[_ngcontent-%COMP%], .show-drawn[_ngcontent-%COMP%]{display:none}[drawn=true][_ngcontent-%COMP%]   .show-drawn[_ngcontent-%COMP%]{display:initial}[light-mode=dark][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f2f2f}[light-mode=bright][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f3f7f}.drawer-toggle-inner[_ngcontent-%COMP%]{width:100%}.drawer-header[_ngcontent-%COMP%]{line-height:50px;padding:5px;border:1px dashed #777777;z-index:100}.drawer-header-inner[_ngcontent-%COMP%]{position:relative}[drawn=true][_ngcontent-%COMP%]   .drawer-backdrop[_ngcontent-%COMP%]{background-color:#0000004d;position:fixed;top:0;left:0;width:100%;height:100vh;z-index:-1}.toggle-fullscreen[_ngcontent-%COMP%]{position:absolute;right:450px;padding:0 15px;cursor:pointer}.toggle-fullscreen.active[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight 1s ease;animation-iteration-count:5}.toggle-fullscreen[_ngcontent-%COMP%]:hover{background-color:#99772231}@keyframes _ngcontent-%COMP%_highlight{0%{background-color:#99772231}50%{background-color:#bb9a22a6}to{background-color:#99772231}}']})}return e})();function eW(e,n){1&e&&lt(0,"app-main-nav",9),2&e&&(jm(Fn().preference.LightMode+"-mode"),Ft("mode","top"))}let tW=(()=>{class e{constructor(t,i){this.preferenceService=t,this.util=i,this.title="Victor Fortman",this.fullCard=!0,this.doorsClosed=!0,this.foreground=document.querySelector("#foreground"),this.toggleCard=function(){this.fullCard=!this.fullCard},this.toggleForeground=function(s){this.doorsClosed=!this.doorsClosed,this.foreground.className=this.doorsClosed||s?"door-opened":"door-closed"},this.init=function(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(s=>{this.preference=s}),this.preferenceService.setBodyLightMode(`${this.preference.LightMode}-mode`)}}ngOnInit(){this.init()}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(bp),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-root"]],decls:12,vars:5,consts:[["id","wrapper",1,"pt-5"],["role","header","aria-roledescription","header"],[1,"header-content"],["role","icon",1,"d-sm-inline-block"],["src","../assets/ico/VF_ICO128.ico","alt","Victor Fortman"],[1,"top-nav"],[3,"class","mode",4,"ngIf"],["role","preference-menu"],["role","body"],[3,"mode"]],template:function(i,s){1&i&&(X(0,"div")(1,"div",0)(2,"header",1)(3,"div",2)(4,"div",3),lt(5,"img",4),Q(),X(6,"nav",5),Br(7,eW,1,3,"app-main-nav",6),Q()(),X(8,"div",7),lt(9,"app-preference-menu"),Q()(),X(10,"div",8),lt(11,"router-outlet"),Q()()()),2&i&&(xe(),gr("backdrop-mode",s.preference.BackdropMode)("menu-mode",s.preference.MenuMode)("menu-orientation",s.preference.MenuOrientation),xe(),gr("light-mode",s.preference.LightMode),xe(5),Ft("ngIf",!0))},dependencies:[gp,L0,j5,K5],styles:["[role=header][_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:75px;width:100%;padding:8px;z-index:900;transition:all 1s ease}[role=header][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=header][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}[role=header][_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{border:1px dashed #777777;height:60px}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]{height:58px;width:58px;text-align:center;line-height:58px;vertical-align:middle}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block}.top-nav[_ngcontent-%COMP%]{max-width:320px;display:inline-block}[role=preference-menu][_ngcontent-%COMP%]{position:fixed;right:0;top:0}[menu-mode=retracted][menu-orientation=vertical][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%], [backdrop-mode=interactive][menu-orientation=vertical][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%]   [menu-mode=retracted][menu-orientation=horizontal][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%], [backdrop-mode=interactive][menu-orientation=horizontal][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%]{margin-top:-80px}[backdrop-mode=interactive][_ngcontent-%COMP%]   [role=body][_ngcontent-%COMP%]{display:none}"]})}return e})();new Pe("NG_SCROLLBAR_OPTIONS"),new Pe("NG_SCROLLBAR_POLYFILL"),new Pe("NG_SCROLLBAR"),new Pe("SCROLLBAR_CONTROL");let iW=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({})}return e})();const oW=[{linkID:1,mediaName:"LinkedIn",mediaURI:"https://linkedin.com",profileName:"Victor Fortman",profileURI:"https://linkedin.com/in/hugovicfortman",fontAwesomeIcon:"fa-linkedin-square"},{linkID:2,mediaName:"Github",mediaURI:"https://github.com",profileName:"Victor Fortman",profileURI:"https://github.com/hugovicfortman",fontAwesomeIcon:"fa-github-square"},{linkID:2,mediaName:"Telegram",mediaURI:"https://telegram.org/",profileName:"Victor Fortman",profileURI:"https://t.me/hugovicfortman",fontAwesomeIcon:"fa-telegram-square"}];let sW=(()=>{class e{constructor(){}getAllLinks(){return oW}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function aW(e,n){if(1&e){const t=Hd();X(0,"span",2)(1,"a",3),St("tap",function(s){return Ro(t),Po(Fn().clickTarget(s))}),lt(2,"i"),Q()()}if(2&e){const t=n.$implicit;xe(),zi("href",t.profileURI,ea),zi("title",t.mediaName),xe(),Ud("fa ",t.fontAwesomeIcon,"")}}let lW=(()=>{class e{constructor(t,i){this.socialLinksService=t,this.util=i}ngOnInit(){this.getAllSocialLinks()}getAllSocialLinks(){this.socialLinks=this.socialLinksService.getAllLinks()}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(sW),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-social-links"]],decls:2,vars:1,consts:[[1,"social-bridge"],["class","social-links",4,"ngFor","ngForOf"],[1,"social-links"],["rel","noreferrer noopener","target","_blank",3,"tap","href","title"]],template:function(i,s){1&i&&(X(0,"div",0),Br(1,aW,3,5,"span",1),Q()),2&i&&(xe(),Ft("ngForOf",s.socialLinks))},dependencies:[jd],styles:[".social-bridge[_ngcontent-%COMP%]{width:100%;margin:0 -15px;height:3em;line-height:3em}.social-links[_ngcontent-%COMP%]{display:inline-block;margin:15px;font-size:1.5em;animation:float 11s ease infinite}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border-radius:4px;padding:0 2.5px;cursor:pointer;color:#bbb;transition:color .3s ease font-size .3 ease}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#777;font-weight:700}"]})}return e})(),iO=(()=>{class e{constructor(t,i){this.elementScrollService=t,this.util=i}ngOnInit(){}scrollTo(t){this.elementScrollService.scrollTo(t)}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vv),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-about"]],inputs:{LightMode:"LightMode"},decls:47,vars:28,consts:[[1,"container-fluid","text-white","pt-2","px-2","paper-section-wrap-outer","paper-top"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"col-lg-4","text-justify"],[1,"mb-2","d-flex","align-items-center","justify-content-center",2,"height","200px"],[1,"profile-image"],[1,"profile-image-inner"],[1,"small"],[1,"fa","fa-globe"],[1,"col-lg-7","text-justify","pt-5"],[1,"text-center","pt-4"],["type","button","routerLink","/resume",1,"btn","btn-default","mx-2",3,"click","tap"],[1,"col-lg-1","text-center","lh-200"],[1,"text-center"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5),He(6,"translate"),Q(),X(7,"blockquote"),ae(8),He(9,"translate"),lt(10,"br"),X(11,"small"),ae(12),He(13,"translate"),Q()()()(),X(14,"div",2)(15,"div",4)(16,"div",5)(17,"div",2)(18,"div",6)(19,"div",7)(20,"div",8),lt(21,"div",9),Q()(),X(22,"dl")(23,"dt",10),ae(24),He(25,"translate"),Q(),X(26,"dd"),ae(27),He(28,"translate"),Q(),X(29,"dt",10),ae(30),He(31,"translate"),Q(),X(32,"dd"),ae(33),He(34,"translate"),lt(35,"i",11),Q()()(),X(36,"div",12)(37,"p"),ae(38),He(39,"translate"),Q(),X(40,"div",13)(41,"button",14),St("click",function(){return s.scrollTo("resume")})("tap",function(u){return s.clickTarget(u)}),ae(42),He(43,"translate"),Q()()(),lt(44,"div",15),Q(),X(45,"div",16),lt(46,"app-social-links"),Q()()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(5),Qt(ze(6,10,"PAGES.PROFILE.HEADER")),xe(3),ur(' "',ze(9,12,"PAGES.PROFILE.QUOTE.TEXT"),'" '),xe(4),ur("- ",ze(13,14,"PAGES.PROFILE.QUOTE.AUTHOR"),""),xe(12),ur("",ze(25,16,"PAGES.PROFILE.SPECS.CONTENT.NAMEKEY"),":"),xe(3),Qt(ze(28,18,"PAGES.PROFILE.SPECS.CONTENT.NAMEVALUE")),xe(3),ur("",ze(31,20,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONKEY"),":"),xe(3),ur("",ze(34,22,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONVALUE")," "),xe(5),Qt(ze(39,24,"PAGES.PROFILE.ABOUT.CONTENT")),xe(4),Qt(ze(43,26,"PAGES.PROFILE.ACTIONS.VIEWRESUME")))},dependencies:[lW,du,Ql],styles:[".lh-200[_ngcontent-%COMP%]{line-height:200px}.profile-image[_ngcontent-%COMP%]{padding:10px;background-color:#7d7d7d80;width:180px;height:180px;overflow:hidden;border-radius:50%;display:inline-block;vertical-align:middle}.profile-image-inner[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:50%;background-image:url(red_hoodie.c377c6db48866e10.svg);background-size:contain}[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}"]})}return e})();const YS="https://victorfortman.com/assets/config/";let sO=(()=>{class e{constructor(t){this.http=t}loadConfig(){var t=this;return new Promise((i,s)=>{window.caches&&window.caches.match(YS).then(function(){var l=(0,vr.A)(function*(u){u?(console.log("config loaded from cache"),i(u.json())):((yield window.caches.open("vf-local")).add(YS),t.http.get(YS).toPromise().then(m=>{console.log("config loaded from server"),i(m)}))});return function(u){return l.apply(this,arguments)}}()).catch(l=>console.log(l))}).then(i=>{this.config=i})}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(m0))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cW=(()=>{class e{constructor(t,i){this.http=t,this.configService=i}downloadFile(t){return this.http.get(`${this.configService.config.url.cors}${this.configService.config.url.github}CV/raw/main/public/${t}/Victor_Okafor.pdf&btoken=${this.configService.config.btoken}`,{responseType:"blob"})}static#e=this.\u0275fac=function(i){return new(i||e)(Oe(m0),Oe(sO))};static#t=this.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var uW=zr(578);const dW=()=>[0,1,2,4,5,6],hW=()=>[0,1];function fW(e,n){if(1&e&&(X(0,"div",12)(1,"div",13)(2,"strong",14),ae(3),He(4,"translate"),Q(),X(5,"em"),ae(6),He(7,"translate"),Q()(),X(8,"div",15)(9,"strong",14),ae(10),He(11,"translate"),Q(),lt(12,"p",16),He(13,"translate"),Q()()),2&e){const t=n.$implicit;xe(3),Qt(ze(4,4,"PAGES.RESUME.EXPERIENCE.CONTENT."+t+".COMPANY")),xe(3),Qt(ze(7,6,"PAGES.RESUME.EXPERIENCE.CONTENT."+t+".ACTIVEYEAR")),xe(4),Qt(ze(11,8,"PAGES.RESUME.EXPERIENCE.CONTENT."+t+".ROLE")),xe(2),Ft("innerHTML",ze(13,10,"PAGES.RESUME.EXPERIENCE.CONTENT."+t+".DESCRIPTION"),hd)}}function pW(e,n){if(1&e&&(X(0,"div",12)(1,"div",13)(2,"strong",14),ae(3),He(4,"translate"),Q(),X(5,"em"),ae(6),He(7,"translate"),Q()(),X(8,"div",15)(9,"strong",14),ae(10),He(11,"translate"),Q(),lt(12,"p",16),He(13,"translate"),Q()()),2&e){const t=n.$implicit;xe(3),Qt(ze(4,4,"PAGES.RESUME.EDUCATION.CONTENT."+t+".SCHOOLNAME")),xe(3),Qt(ze(7,6,"PAGES.RESUME.EDUCATION.CONTENT."+t+".ACTIVEYEAR")),xe(4),Qt(ze(11,8,"PAGES.RESUME.EDUCATION.CONTENT."+t+".DEGREE")),xe(2),Ft("innerHTML",ze(13,10,"PAGES.RESUME.EDUCATION.CONTENT."+t+".DESCRIPTION"),hd)}}let aO=(()=>{class e{constructor(t,i,s){this.fileService=t,this.preferenceService=i,this.util=s,this.IsDownloading=!1}ngOnInit(){}downloadCV(){if(this.IsDownloading)return;this.IsDownloading=!0;const t=this.preferenceService.getPreference().Language;this.fileService.downloadFile(t).subscribe(i=>{const s=new Blob([i],{type:"application/pdf; charset=utf-8"});uW.saveAs(s,"VictorFortman.pdf"),this.IsDownloading=!1},i=>{console.log("Error downloading the file"),this.IsDownloading=!1},()=>{})}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(cW),ce(bp),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-cv"]],inputs:{LightMode:"LightMode"},decls:28,vars:17,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],["class","row py-3",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","my-3"],[1,"btn","btn-primary",3,"click","tap"],[1,"fa","fa-download"],[1,"row","py-3"],[1,"col-lg-4","text-left"],[1,"d-block","py-2"],[1,"col-lg-8","text-left"],[1,"small",3,"innerHTML"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5),He(6,"translate"),Q()()(),X(7,"div",4)(8,"div",2)(9,"div",5)(10,"h3",6),ae(11),He(12,"translate"),Q(),X(13,"div",7),Br(14,fW,14,12,"div",8),Q()()(),X(15,"div",2)(16,"div",5)(17,"h3",6),ae(18),He(19,"translate"),Q(),X(20,"div",7),Br(21,pW,14,12,"div",8),Q()()()(),X(22,"div",2)(23,"div",9)(24,"button",10),St("click",function(){return s.downloadCV()})("tap",function(u){return s.clickTarget(u)}),ae(25),He(26,"translate"),lt(27,"i",11),Q()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(5),Qt(ze(6,7,"PAGES.RESUME.HEADER")),xe(6),Qt(ze(12,9,"PAGES.RESUME.EXPERIENCE.HEADER")),xe(3),Ft("ngForOf",Km(15,dW)),xe(4),Qt(ze(19,11,"PAGES.RESUME.EDUCATION.HEADER")),xe(3),Ft("ngForOf",Km(16,hW)),xe(4),ur(" ",ze(26,13,"PAGES.RESUME.DOWNLOADSUMMARY")," "))},dependencies:[jd,Ql],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}"]})}return e})(),gW=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-tools"]],inputs:{LightMode:"LightMode"},decls:2,vars:0,template:function(i,s){1&i&&(X(0,"p"),ae(1,"tools works!"),Q())}})}return e})(),lO=(()=>{class e{constructor(t){this.util=t}ngOnInit(){}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-contact"]],inputs:{LightMode:"LightMode"},decls:48,vars:10,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"row","py-3"],[1,"col-md-6","text-left"],[1,"p-3"],[1,"list-unstyled"],[1,"my-3"],["href","https://www.linkedin.com/in/hugovicfortman","rel","noreferrer noopener","target","_blank","title","LinkedIn",3,"tap"],[1,"text-left","media-banner","d-inline-block","mr-3"],[1,"fa","fa-linkedin","float-right"],[1,"media-username","d-inline-block"],["href","https://twitter.com/hugovicfortman","rel","noreferrer noopener","target","_blank","title","Twitter",3,"tap"],[1,"fa","fa-twitter","float-right"],[1,"fa","fa-skype","float-right"],[1,"col-md-6","text-center"],[1,"media-block","mt-5"],["href","https://t.me/hugovicfortman","rel","noreferrer noopener","target","_blank","title","Telegram"],[1,"telegram-button","p-3"],[1,"m-4"],[1,"fa","fa-telegram"],[1,"p-2","m-2"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5),He(6,"translate"),Q()()(),X(7,"div",4)(8,"div",2)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"h3"),ae(15),He(16,"translate"),Q(),X(17,"div")(18,"ul",10)(19,"li",11)(20,"a",12),St("tap",function(u){return s.clickTarget(u)}),X(21,"span",13),ae(22,"LinkedIn"),lt(23,"i",14),Q()(),X(24,"span",15),ae(25," hugovicfortman"),Q()(),X(26,"li",11)(27,"a",16),St("tap",function(u){return s.clickTarget(u)}),X(28,"span",13),ae(29,"Twitter"),lt(30,"i",17),Q()(),X(31,"span",15),ae(32,"@hugovicfortman"),Q()(),X(33,"li",11)(34,"span",13),ae(35,"Skype"),lt(36,"i",18),Q(),X(37,"span",15),ae(38," hugovicfortman"),Q()()()()()(),X(39,"div",19)(40,"div",20)(41,"a",21)(42,"div",22)(43,"span",23),lt(44,"i",24),Q(),X(45,"h3",25),ae(46),He(47,"translate"),Q()()()()()()()()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(5),Qt(ze(6,4,"PAGES.CONTACT.HEADER")),xe(10),Qt(ze(16,6,"PAGES.CONTACT.GETCONNECTED")),xe(31),Qt(ze(47,8,"PAGES.CONTACT.REACHOUT")))},dependencies:[Ql],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}.media-banner[_ngcontent-%COMP%]{width:100px;background-color:#2d3d77;line-height:1.2rem;padding:5px 10px;color:#cfcfcf}.media-username[_ngcontent-%COMP%]{width:200px;padding:5px}.telegram-button[_ngcontent-%COMP%]{background-color:#2d3d77;vertical-align:center;color:#cfcfcf}.media-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem}.media-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}"]})}return e})(),mW=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-progress"]],decls:7,vars:0,consts:[["id","loader",1,"loader"],[1,"loader-inner"],[1,"loader-dot"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1),lt(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2)(6,"span",2),Q()())},styles:[".loader[_ngcontent-%COMP%]{background-color:#fff;padding:5px;width:350px;overflow-x:hidden;justify-content:stretch;white-space:nowrap;-webkit-user-select:none;user-select:none}.loader-dot[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;margin:2px;background-color:#249;display:inline-block;position:relative;transition:all ease 2s;animation:_ngcontent-%COMP%_accordion 4s ease infinite}.loader-inner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_marquee ease-in-out infinite 4s}@keyframes _ngcontent-%COMP%_marquee{0%{margin-left:-50%}50%{margin-left:40%}to{margin-left:200%}}@keyframes _ngcontent-%COMP%_accordion{0%{margin-left:3%}20%{margin-left:2%}40%{margin-left:0%}60%{margin-left:0%}80%{margin-left:100%}to{margin-left:100%}}"]})}return e})();function vW(e,n){1&e&&(X(0,"div",2)(1,"div",14),lt(2,"app-progress"),Q()())}let yW=(()=>{class e{constructor(t,i){this.elementScrollService=t,this.util=i}ngOnInit(){}scrollTo(t){this.elementScrollService.scrollTo(t)}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vv),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-footer"]],inputs:{LightMode:"LightMode"},decls:51,vars:2,consts:[[1,"container-fluid","text-white","text-always-white","pb-2","px-2","paper-section-wrap-outer","paper-bottom"],[1,"p-3","paper-section-wrap-inner"],[1,"row"],[1,"col-md-8","offset-md-2","text-center","mt-5","mb-3"],[1,"col-md-8"],[1,"text-justify"],[1,"text-left","d-flex"],[1,"list-unstyled"],["routerLink","/home",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/profile",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/projects",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/contact",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/skills",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/resume",1,"nav-link","text-always-white",3,"click","tap"],[1,"col-md-4"],[1,"text-justify","small"],["class","row",4,"ngIf"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"h4",5),ae(7,"Victor Fortman"),Q(),X(8,"nav",6)(9,"ul",7)(10,"li")(11,"a",8),St("click",function(){return s.scrollTo("home")})("tap",function(u){return s.clickTarget(u)}),ae(12,"Home"),Q()(),X(13,"li")(14,"a",9),St("click",function(){return s.scrollTo("profile")})("tap",function(u){return s.clickTarget(u)}),ae(15,"Profile"),Q()(),X(16,"li")(17,"a",10),St("click",function(){return s.scrollTo("projects")})("tap",function(u){return s.clickTarget(u)}),ae(18,"Projects"),Q()(),X(19,"li")(20,"a",11),St("click",function(){return s.scrollTo("contact")})("tap",function(u){return s.clickTarget(u)}),ae(21,"Contact"),Q()(),X(22,"li")(23,"a",12),St("click",function(){return s.scrollTo("skills")})("tap",function(u){return s.clickTarget(u)}),ae(24,"Skills"),Q()(),X(25,"li")(26,"a",13),St("click",function(){return s.scrollTo("resume")})("tap",function(u){return s.clickTarget(u)}),ae(27,"Resume"),Q()()()()(),X(28,"div",14)(29,"h5"),ae(30,"Resources"),Q(),X(31,"dl",15)(32,"dt"),ae(33,"Flag Sprites"),Q(),X(34,"dd"),ae(35,"https://flag-sprites.com/"),Q()(),X(36,"dl",15)(37,"dt"),ae(38,"Avatar"),Q(),X(39,"dd"),ae(40,"https://www.cartoonify.de/"),Q()(),X(41,"dl",15)(42,"dt"),ae(43,"Backdrop Image"),Q(),X(44,"dd"),ae(45,"Andrew Neel "),X(46,"small"),ae(47,"on Pexels"),Q()(),X(48,"dd"),ae(49,"https://www.pexels.com/@andrew"),Q()()()()()(),Br(50,vW,3,0,"div",16),Q()()),2&i&&(gr("light-mode",s.LightMode),xe(50),Ft("ngIf",!1))},dependencies:[mW,gp,du],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#2d3d77}"]})}return e})();function _W(e,n){if(1&e&&(X(0,"span",2),lt(1,"i"),Q()),2&e){const t=n.$implicit,i=Fn();xe(),jm(i.myClass+(t>i.score?" "+i.offClass:""))}}let bW=(()=>{class e{constructor(t){this.util=t,this.IconClasses={star:"star"},this.DefaultMax=5,this.DefaultScore=0,this.myClass="fa fa-@type",this.offClass="text-dark"}ngOnInit(){this.myClass=this.myClass.replace("@type",()=>((null==this.type||void 0===this.type)&&(this.type="star"),void 0!==this.IconClasses[this.type]?this.IconClasses[this.type]:this.IconClasses.star)),this.setRating()}setRating(){(null==this.max||void 0===this.max)&&(this.max=this.DefaultMax),(null==this.score||void 0===this.score)&&(this.score=this.DefaultScore),this.score>this.max?this.score=this.max:this.score<0&&(this.score=0),this.Hits=this.util.range(this.max)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-rating"]],inputs:{type:"type",mode:"mode",max:"max",score:"score"},decls:2,vars:1,consts:[[1,"float-right","d-flex","justify-content-around","app-rating"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"]],template:function(i,s){1&i&&(X(0,"em",0),Br(1,_W,2,2,"span",1),Q()),2&i&&(xe(),Ft("ngForOf",s.Hits))},dependencies:[jd],styles:[".app-rating[_ngcontent-%COMP%]{min-width:100px}"]})}return e})(),cO=(()=>{class e{constructor(){this.skills=[{name:"HTML(5)",max:5,score:5},{name:"CSS(3)",max:5,score:5},{name:"JavaScript",max:5,score:5},{name:"C#",max:5,score:5},{name:"VB",max:5,score:5},{name:"Python",max:5,score:4},{name:"Angular",max:5,score:5},{name:"SCSS",max:5,score:4},{name:"Dart",max:5,score:4},{name:"C++",max:5,score:3},{name:"React",max:5,score:2},{name:"Rust",max:5,score:1}]}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-skills"]],inputs:{LightMode:"LightMode"},decls:139,vars:38,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-md-6"],[1,"skills-deck"],[1,"skills-stack"],[1,"language-stack","stack"],[1,"stack-item"],[1,"framework-stack","stack"],[1,"tool-stack","stack"],[1,"col-md-5"],[3,"type","max","score","mode"],[1,"d-block"],[1,"col-md-5","offset-md-1"],["aria-hidden","true",1,"fa","fa-institution"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5),He(6,"translate"),Q()()(),X(7,"div",2)(8,"div",4)(9,"h3",5),ae(10),He(11,"translate"),Q(),X(12,"div",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"ul")(17,"li"),ae(18,"Business Intelligence"),Q(),X(19,"li"),ae(20,"Full Stack Web Development "),X(21,"ul")(22,"li"),ae(23,"Front End Development"),Q(),X(24,"li"),ae(25,"API Development"),Q(),X(26,"li"),ae(27,"Back End Development"),Q(),X(28,"li"),ae(29,"Database Development"),Q()()(),X(30,"li"),ae(31,"UI and Graphics Design"),Q(),X(32,"li"),ae(33,"Mobile Development"),Q(),X(34,"li"),ae(35,"RPA Development"),Q(),X(36,"li"),ae(37,"Version Control"),Q()()()(),X(38,"div",8)(39,"div",10)(40,"div",11)(41,"span",12),ae(42,"C#"),Q(),X(43,"span",12),ae(44,"CSS3"),Q(),X(45,"span",12),ae(46,"Dart"),Q(),X(47,"span",12),ae(48,"HTML5"),Q(),X(49,"span",12),ae(50,"JavaScript"),Q(),X(51,"span",12),ae(52,"Php"),Q(),X(53,"span",12),ae(54,"Python"),Q(),X(55,"span",12),ae(56,"SQL"),Q(),X(57,"span",12),ae(58,"TypeScript"),Q(),X(59,"span",12),ae(60,"VB"),Q()(),X(61,"div",13)(62,"span",12),ae(63,".netcore"),Q(),X(64,"span",12),ae(65,"Angular 2+"),Q(),X(66,"span",12),ae(67,"aspnetmvc"),Q(),X(68,"span",12),ae(69,"Django"),Q(),X(70,"span",12),ae(71,"Flask"),Q(),X(72,"span",12),ae(73,"Flutter"),Q(),X(74,"span",12),ae(75,"WordPress"),Q()(),X(76,"div",14)(77,"span",12),ae(78,"Android Studio"),Q(),X(79,"span",12),ae(80,"Blender"),Q(),X(81,"span",12),ae(82,"Excel"),Q(),X(83,"span",12),ae(84,"Git"),Q(),X(85,"span",12),ae(86,"GitHub"),Q(),X(87,"span",12),ae(88,"Illustrator"),Q(),X(89,"span",12),ae(90,"MSSQL"),Q(),X(91,"span",12),ae(92,"MySql"),Q(),X(93,"span",12),ae(94,"Photoshop"),Q(),X(95,"span",12),ae(96,"Power BI"),Q(),X(97,"span",12),ae(98,"UiPath Studio"),Q(),X(99,"span",12),ae(100,"TFS"),Q()()()()()()()(),X(101,"div",2)(102,"div",4)(103,"h3",5),ae(104),He(105,"translate"),Q(),X(106,"div",6)(107,"div",7)(108,"div",15)(109,"div")(110,"strong"),ae(111),He(112,"translate"),Q(),lt(113,"app-rating",16),X(114,"small",17),ae(115,"Mother Tongue"),Q()(),X(116,"div")(117,"strong"),ae(118),He(119,"translate"),Q(),lt(120,"app-rating",16),X(121,"small",17),ae(122,"National Language"),Q()()(),X(123,"div",18)(124,"div")(125,"strong"),ae(126),He(127,"translate"),Q(),lt(128,"app-rating",16),X(129,"small",17),ae(130,"Professional - DELF B2 Certified \xa0"),lt(131,"i",19),Q()(),X(132,"div")(133,"strong"),ae(134),He(135,"translate"),Q(),lt(136,"app-rating",16),X(137,"small",17),ae(138,"Sehr Klein"),Q()()()()()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(5),Qt(ze(6,24,"PAGES.SKILLS.HEADER")),xe(5),Qt(ze(11,26,"PAGES.SKILLS.TECHNICAL")),xe(94),Qt(ze(105,28,"PAGES.SKILLS.LANGUAGES")),xe(7),Qt(ze(112,30,"LANGUAGES.IGBO")),xe(2),Ft("type","star")("max",5)("score",5)("mode","static"),xe(5),Qt(ze(119,32,"LANGUAGES.ENGLISH")),xe(2),Ft("type","star")("max",5)("score",5)("mode","static"),xe(6),Qt(ze(127,34,"LANGUAGES.FRENCH")),xe(2),Ft("type","star")("max",5)("score",4)("mode","static"),xe(6),Qt(ze(135,36,"LANGUAGES.GERMAN")),xe(2),Ft("type","star")("max",5)("score",2)("mode","static"))},dependencies:[bW,Ql],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#373738}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#ccc}.stack-item[_ngcontent-%COMP%]{background-color:#575a704d;padding:5px;margin:2px;display:inline-block}.skills-stack[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:100%}.stack[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap}"]})}return e})(),wW=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-awards"]],inputs:{LightMode:"LightMode"},decls:24,vars:1,consts:[[1,"container-fluid","text-white","px-2",2,"background-color","#373738","margin-top","-10px"],[1,"px-3","py-5",2,"border","1px dashed #777777","border-top","none","border-bottom","none"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-lg-6","text-left"],[1,"d-block","py-2"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5,"Skills"),Q()()(),X(6,"div",2)(7,"div",4)(8,"h3",5),ae(9,"Technical"),Q(),X(10,"div",6)(11,"div",7)(12,"div",8)(13,"strong",9),ae(14,"FUTO"),Q(),X(15,"em"),ae(16,"Sep 2010 - Dec 2015"),Q()(),lt(17,"div",8),Q()()()(),X(18,"div",2)(19,"div",4)(20,"h3",5),ae(21,"Languages"),Q(),X(22,"div",6),lt(23,"div",7),Q()()()()()),2&i&&gr("light-mode",s.LightMode)}})}return e})(),uO=(()=>{class e{constructor(t,i){this.elementScrollService=t,this.util=i}ngOnInit(){}scrollTo(t){this.elementScrollService.scrollTo(t).then(i=>{})}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(Vv),ce(zo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-home"]],inputs:{LightMode:"LightMode"},decls:21,vars:16,consts:[[1,"container-fluid","d-flex","justify-content-center","text-center","introduction"],[1,"text-white","text-always-white","introduction-text","text-on-glass"],[1,"lead","text-justify"],[1,"p-4"],[1,"list-unstyled","d-flex","justify-content-around"],["type","button","routerLink","/contact",1,"btn","btn-default","btn-tacked","btn-lg",3,"click","tap"],["type","button","routerLink","/profile",1,"btn","btn-default","btn-tacked","btn-lg",3,"click","tap"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"h1"),ae(3),He(4,"translate"),Q(),X(5,"h2"),ae(6),He(7,"translate"),Q(),X(8,"p",2),ae(9),He(10,"translate"),Q(),X(11,"div",3)(12,"ul",4)(13,"li")(14,"button",5),St("click",function(){return s.scrollTo("contact")})("tap",function(u){return s.clickTarget(u)}),ae(15),He(16,"translate"),Q()(),X(17,"li")(18,"button",6),St("click",function(){return s.scrollTo("profile")})("tap",function(u){return s.clickTarget(u)}),ae(19),He(20,"translate"),Q()()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(3),Qt(ze(4,6,"GREETINGS.HI")),xe(3),Qt(ze(7,8,"INTRO.WHOAMI")),xe(3),ur(" ",ze(10,10,"INTRO.WHATIDO")," "),xe(6),Qt(ze(16,12,"MENU.CONTACT")),xe(4),Qt(ze(20,14,"PAGES.PROFILE.ABOUT.HEADER")))},dependencies:[du,Ql],styles:[".introduction[_ngcontent-%COMP%]{padding-top:75px;height:calc(100vh - 125px)}.introduction-text[_ngcontent-%COMP%]{margin-top:calc(25vh - 50px)}.introduction-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:calc(1vw + 60px);font-weight:700}.introduction-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:calc(1vw + 36px);font-weight:600}.introduction-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px}"]})}return e})();const xW=()=>[0,1,2,3];function MW(e,n){1&e&&(X(0,"a",20),He(1,"translate"),ae(2),He(3,"translate"),Q()),2&e&&(zi("href",ze(1,2,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+Fn().$implicit+".LIVE"),ea),xe(2),Qt(ze(3,4,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWLIVE")))}function EW(e,n){if(1&e&&(X(0,"div",13),lt(1,"img",14),He(2,"translate"),He(3,"translate"),X(4,"div",15)(5,"aside")(6,"h3"),ae(7),He(8,"translate"),Q()()(),X(9,"div",16)(10,"article")(11,"h3"),ae(12),He(13,"translate"),Q(),X(14,"p"),ae(15),He(16,"translate"),Q(),X(17,"div",17),Br(18,MW,4,6,"a",18),He(19,"translate"),X(20,"a",19),He(21,"translate"),ae(22),He(23,"translate"),Q()()()()()),2&e){const t=n.$implicit;xe(),zi("src",ze(2,8,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".IMAGE"),ea),zi("alt",ze(3,10,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".TITLE")),xe(6),Qt(ze(8,12,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".TITLE")),xe(5),Qt(ze(13,14,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".TITLE")),xe(3),ur(" ",ze(16,16,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".DESCRIPTION")," "),xe(3),Ft("ngIf",1==ze(19,18,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".ISLIVE")),xe(2),zi("href",ze(21,20,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+t+".SOURCE"),ea),xe(2),Qt(ze(23,22,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWSOURCE"))}}let dO=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-featured-projects"]],inputs:{LightMode:"LightMode"},decls:24,vars:12,consts:[[1,"container-fluid","text-always-white","text-on-glass","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"container"],[1,"col-md-12","text-justify","mt-5","mb-3"],[1,"col-lg-5","py-4"],[1,"lead","text-justify"],[1,"p-2","d-none"],[1,"btn","btn-default","btn-tacked"],[1,"col-lg-7","py-3","d-flex","project-card-holder","text-always-white"],["class","mb-2 project-card",4,"ngFor","ngForOf"],[1,"foldable"],[1,"text-center","mt-2"],[1,"mb-2","project-card"],[1,"img","project-img",3,"src","alt"],[1,"project-nametag"],[1,"project-description"],[1,"text-center","mt-1","px-3"],["target","_blank","referrerpolicy","no-referrer","class","btn btn-default btn-block",3,"href",4,"ngIf"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-primary","btn-block",3,"href"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-default","btn-block",3,"href"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"h2"),ae(7),He(8,"translate"),Q()()(),X(9,"div",2)(10,"div",5)(11,"p",6),ae(12),He(13,"translate"),Q(),X(14,"div",7)(15,"button",8),ae(16,"See More"),Q()()(),X(17,"div",9),Br(18,EW,24,24,"div",10),Q()()()(),X(19,"div",11)(20,"div",12)(21,"small"),ae(22),He(23,"translate"),Q()()()()()),2&i&&(gr("light-mode",s.LightMode),xe(7),Qt(ze(8,5,"PAGES.FEATUREDPROJECTS.HEADER")),xe(5),ur(" ",ze(13,7,"PAGES.FEATUREDPROJECTS.CONTENT.INTRODUCTION")," "),xe(6),Ft("ngForOf",Km(11,xW)),xe(4),Qt(ze(23,9,"PAGES.FEATUREDPROJECTS.CONTENT.THISWEBSITE")))},dependencies:[jd,gp,Ql],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#282832cc}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#2d3d77ed}.project-card-holder[_ngcontent-%COMP%]{justify-content:space-around;flex-wrap:wrap}.project-card[_ngcontent-%COMP%]{background-color:#2d3d77;height:235px;width:235px;box-shadow:2px 2px 4px #222;margin:auto;position:relative}.project-card[_ngcontent-%COMP%]:hover{box-shadow:4px 1px 16px #000}.project-card[_ngcontent-%COMP%]:not(:hover)   .project-description[_ngcontent-%COMP%], .project-card[_ngcontent-%COMP%]:hover   .project-nametag[_ngcontent-%COMP%]{opacity:0}.project-img[_ngcontent-%COMP%]{height:235px;width:235px}.project-description[_ngcontent-%COMP%], .project-nametag[_ngcontent-%COMP%]{position:absolute;top:0%;height:100%;width:100%;transition:opacity .3s ease}.project-nametag[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{height:100%;width:100%;padding:15px;display:flex;justify-content:center;align-items:center;background:radial-gradient(circle,#0000,#000000bf)}.project-description[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#141414e6;padding:15px}"]})}return e})();const SW=()=>[0];function CW(e,n){if(1&e&&(X(0,"div",2)(1,"div",5)(2,"h3"),ae(3),He(4,"translate"),Q(),X(5,"div",2)(6,"div",6)(7,"p"),ae(8),He(9,"translate"),Q()()()(),X(10,"div",7),lt(11,"img",8),He(12,"translate"),He(13,"translate"),lt(14,"br"),X(15,"p",9)(16,"a",10),He(17,"translate"),ae(18,"Google Developer Profile"),Q()()()()),2&e){const t=n.$implicit;xe(3),Qt(ze(4,5,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+t+".TITLE")),xe(5),Qt(ze(9,7,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+t+".DESCRIPTION")),xe(3),zi("src",ze(12,9,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+t+".IMAGE"),ea),zi("alt",ze(13,11,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+t+".TITLE")),xe(5),zi("href",ze(17,13,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+t+".GDP"),ea)}}let hO=(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-featured-learning"]],inputs:{LightMode:"LightMode"},decls:8,vars:6,consts:[[1,"container-fluid","text-always-white","text-on-glass","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-6","text-center","my-4"],[1,"col-md-8","offset-md-2","d-flex","align-items-center"],[1,"col-md-6","text-center","my-5","py-5"],["height","128","width","128",3,"src","alt"],[1,"mt-3"],["target","_blank",3,"href"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),ae(5),He(6,"translate"),Q()()(),Br(7,CW,19,15,"div",4),Q()()),2&i&&(gr("light-mode",s.LightMode),xe(5),Qt(ze(6,3,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING")),xe(2),Ft("ngForOf",Km(5,SW)))},dependencies:[jd,Ql],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#282832cc}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#2d3d77ed}"]})}return e})();function TW(e,n){1&e&&lt(0,"app-about",13),2&e&&Ft("LightMode",Fn().preference.LightMode)}function DW(e,n){1&e&&lt(0,"app-featured-projects",14),2&e&&Ft("LightMode",Fn().preference.LightMode)}function AW(e,n){1&e&&lt(0,"app-contact",15),2&e&&Ft("LightMode",Fn().preference.LightMode)}function IW(e,n){1&e&&lt(0,"app-skills",16),2&e&&Ft("LightMode",Fn().preference.LightMode)}function RW(e,n){1&e&&lt(0,"app-featured-learning",17),2&e&&Ft("LightMode",Fn().preference.LightMode)}function PW(e,n){1&e&&lt(0,"app-tools",18),2&e&&Ft("LightMode",Fn().preference.LightMode)}function NW(e,n){1&e&&lt(0,"app-cv",19),2&e&&Ft("LightMode",Fn().preference.LightMode)}function OW(e,n){1&e&&lt(0,"app-awards",18),2&e&&Ft("LightMode",Fn().preference.LightMode)}function LW(e,n){1&e&&lt(0,"app-footer",18),2&e&&Ft("LightMode",Fn().preference.LightMode)}const FW=[{path:"",component:(()=>{class e{constructor(t,i,s){this.preferenceService=t,this.util=i,this.elementScrollService=s}ngOnInit(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(t=>{this.preference=t})}scrollTo(t){this.elementScrollService.scrollTo(t).then(i=>{})}clickTarget(t){this.util.click(t.target)}static#e=this.\u0275fac=function(i){return new(i||e)(ce(bp),ce(zo),ce(Vv))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-main"]],decls:16,vars:11,consts:[["id","home",1,"doc-section",3,"LightMode"],["routerLink","/profile",1,"d-flex","justify-content-end","align-content-center","jacket-sleeve",3,"click","tap"],[1,"p-2","d-inline-block","mx-3","jacket-sleeve-outer"],[1,"jacket-sleeve-inner","d-inline-block","p-2"],[1,"fa","fa-chevron-down"],[1,"jacket"],["id","profile","class","doc-section",3,"LightMode",4,"ngIf"],["id","projects","class","doc-section",3,"LightMode",4,"ngIf"],["id","contact","class","doc-section",3,"LightMode",4,"ngIf"],["id","skills","class","doc-section",3,"LightMode",4,"ngIf"],["id","learning","class","doc-section",3,"LightMode",4,"ngIf"],["class","doc-section",3,"LightMode",4,"ngIf"],["id","resume","class","doc-section",3,"LightMode",4,"ngIf"],["id","profile",1,"doc-section",3,"LightMode"],["id","projects",1,"doc-section",3,"LightMode"],["id","contact",1,"doc-section",3,"LightMode"],["id","skills",1,"doc-section",3,"LightMode"],["id","learning",1,"doc-section",3,"LightMode"],[1,"doc-section",3,"LightMode"],["id","resume",1,"doc-section",3,"LightMode"]],template:function(i,s){1&i&&(X(0,"main"),lt(1,"app-home",0),X(2,"div",1),St("click",function(){return s.scrollTo("profile")})("tap",function(u){return s.clickTarget(u)}),X(3,"span",2)(4,"span",3),lt(5,"i",4),Q()()(),X(6,"article",5),Br(7,TW,1,1,"app-about",6)(8,DW,1,1,"app-featured-projects",7)(9,AW,1,1,"app-contact",8)(10,IW,1,1,"app-skills",9)(11,RW,1,1,"app-featured-learning",10)(12,PW,1,1,"app-tools",11)(13,NW,1,1,"app-cv",12)(14,OW,1,1,"app-awards",11)(15,LW,1,1,"app-footer",11),Q()()),2&i&&(xe(),Ft("LightMode",s.preference.LightMode),xe(),gr("light-mode",s.preference.LightMode),xe(5),Ft("ngIf",!0),xe(),Ft("ngIf",!0),xe(),Ft("ngIf",!0),xe(),Ft("ngIf",!0),xe(),Ft("ngIf",!0),xe(),Ft("ngIf",!1),xe(),Ft("ngIf",!0),xe(),Ft("ngIf",!1),xe(),Ft("ngIf",!0))},dependencies:[gp,du,iO,aO,gW,lO,yW,cO,wW,uO,dO,hO],styles:[".jacket[_ngcontent-%COMP%]{box-shadow:0 -4px 4px #1e1e1e80}.jacket-sleeve[_ngcontent-%COMP%]{height:75px;animation:radiate 4s ease infinite;cursor:pointer;z-index:1000}[light-mode=dark][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#2d3d77}.jacket-sleeve-outer[_ngcontent-%COMP%]{width:75px;height:75px}.jacket-sleeve-inner[_ngcontent-%COMP%]{font-size:30px;text-align:center;vertical-align:middle;height:60px;width:60px;line-height:45px;border:1px dashed #777777;color:#777}"]})}return e})(),children:[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:uO},{path:"profile",component:iO},{path:"projects",component:dO},{path:"learning",component:hO},{path:"contact",component:lO},{path:"resume",component:aO},{path:"skills",component:cO}]},{path:"apps",component:(()=>{class e{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-apps"]],decls:2,vars:0,consts:[[1,"apps-outlet"]],template:function(i,s){1&i&&(X(0,"div",0),lt(1,"router-outlet"),Q())},dependencies:[L0],styles:[".apps-outlet[_ngcontent-%COMP%]{border:2px solid red;padding:5px;margin-top:15px}"]})}return e})(),children:[]},{path:"404",component:(()=>{class e{constructor(t,i){this.preferenceService=t,this.router=i,this.preference=this.preferenceService.getPreference()}ngOnInit(){}navigateBack(){window.history.back()}navigateHome(){this.preferenceService.setBackdropMode("background"),this.router.navigateByUrl("/home")}static#e=this.\u0275fac=function(i){return new(i||e)(ce(bp),ce(Wo))};static#t=this.\u0275cmp=ln({type:e,selectors:[["app-not-found"]],decls:11,vars:1,consts:[["role","sign-404",1,"sign-404"],[1,"msg-404","text-center","text-white","text-always-white"],[1,"banner-404"],[1,"btn","btn-link",3,"click","tap"]],template:function(i,s){1&i&&(X(0,"div",0)(1,"div",1)(2,"h1",2),ae(3,"Sorry"),Q(),X(4,"p"),ae(5,"The resource you are looking for is not found."),Q(),X(6,"div")(7,"a",3),St("click",function(){return s.navigateHome()})("tap",function(){return s.navigateHome()}),ae(8,"Go to Homepage"),Q(),X(9,"a",3),St("click",function(){return s.navigateBack()})("tap",function(){return s.navigateBack()}),ae(10,"Navigate Back"),Q()()()()),2&i&&gr("light-mode",s.preference.LightMode)},styles:["[role=sign-404][_ngcontent-%COMP%]{padding:7px}[role=sign-404][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=sign-404][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}.msg-404[_ngcontent-%COMP%]{min-height:100px;width:calc(300px + 10vw);padding:15px;border:1px dashed #777777}.banner-404[_ngcontent-%COMP%]{font-weight:bolder;font-size:xx-large;display:inline-block}.sign-404[_ngcontent-%COMP%]{position:fixed;top:0;left:calc(50% - 150px - 5vw);margin-top:calc(50vh - 75px)}"]})}return e})()},{path:"**",redirectTo:"/404"}];let kW=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e});static#n=this.\u0275inj=kt({imports:[SE,tO.forRoot(FW,{anchorScrolling:"enabled"}),tO]})}return e})();const VW=e=>new a4(e),BW=e=>()=>e.loadConfig();let UW=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=_r({type:e,bootstrap:[tW]});static#n=this.\u0275inj=kt({providers:[{provide:Db,useFactory:BW,deps:[sO],multi:!0}],imports:[l4,zU,wz,iW,ZU,kW,Zz,s4.forRoot({loader:{provide:Ev,useFactory:VW,deps:[m0]}})]})}return e})();var HW=zr(354),fO={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch{return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,t=void 0!==e.id?e.id:"oldie",i=fO.getWebGLErrorMessage();i.id=t,n.appendChild(i)}};const pO=fO,GW=function(){function e(){this.arenaCache=[],this.preloadStyleContent="canvas.preload{position:fixed;top:0;left:0;z-index:-1}",this.setArena=function(n){return console.log(n)},this.getArenaIndex=function(){return[]}}return e.prototype.init=function(n){this.container=n,this.initialize()},e.prototype.initialize=function(){var n=this;if(pO.webgl){var t=document.createElement("style");t.innerHTML=this.preloadStyleContent,document.body.appendChild(t),HW.h_9.onProgress=function(s,l,u){console.log("loading manager progress triggered"),n.incomingArena.loaded=l===u},this.currentArena=void 0}else{var i=pO.getWebGLErrorMessage();this.container.appendChild(i)}},e.prototype.setup=function(){var n=this;return new Promise(function(t,i){zr.e(600).then(zr.bind(zr,600)).then(function(s){var l=0;n.loadArena(l,s.getArena(l,n.container)),n.transition();var u=Array.from(Array(s.getArenaCount()).keys());n.setArena=function(p){p in u&&p!=l&&(n.loadArena(p,s.getArena(p,n.container)),n.transition(),l=p)},n.getArenaIndex=function(){return s.getArenaIndex()}}).then(function(){return t()}).catch(function(){return i()})})},e.prototype.finishLoading=function(n){return new Promise(function(t,i){if(n.needsLoading)var s=0,u=setInterval(function(){n.loaded?(clearInterval(u),t()):(s+=500)>=n.loadingTimeout&&(clearInterval(u),i())},500);else t()})},e.prototype.loadArena=function(n,t){null==this.arenaCache[n]?(this.incomingArena=t,this.arenaCache[n]=t):(this.incomingArena=this.arenaCache[n],console.log("retrieval"))},e.prototype.transition=function(){var n=this;void 0!==this.incomingArena&&(void 0!==this.currentArena&&(this.outgoingArena=this.currentArena),this.currentArena=this.incomingArena,this.currentArena.init(),console.log(this.currentArena),this.currentArena.canvas().classList.add("preload"),this.finishLoading(this.incomingArena).then(function(){void 0!==n.outgoingArena&&n.outgoingArena.packup(),n.fadeOutArena(n.outgoingArena,1).then(function(t){t&&n.outgoingArena.destroy(),n.currentArena.canvas().classList.remove("preload")})}).catch(function(t){return console.log(t)}))},e.prototype.fadeOutArena=function(n,t){return console.log("fadeout called on outgoing Arena"),null!=n?this.fadeOut(n.canvas(),t):(console.log("no outgoing Arena"),new Promise(function(i){return i(!1)}))},e.prototype.fadeOut=function(n,t){var i=Number(n.style.opacity)||1;return new Promise(function(s){var l=i,u=setInterval(function(){l>0?n.style.opacity="".concat(l-=i/60):(clearInterval(u),n.style.opacity="0",console.log("outgoing Arena faded out"),s(!0))},t/60)})},e}();zr(511);const WW=document.querySelector("#scenery"),ZS=new GW;ZS.init(WW),window.setScenery(ZS),ZS.setup().then(()=>window.removeDarkMode()),UU().bootstrapModule(UW).catch(e=>console.log(e))},578:function(xs,Ms){var zr,ir;void 0!==(ir="function"==typeof(zr=function(){"use strict";function oi(Dt,At,or){var zt=new XMLHttpRequest;zt.open("GET",Dt),zt.responseType="blob",zt.onload=function(){so(zt.response,At,or)},zt.onerror=function(){console.error("could not download file")},zt.send()}function On(Dt){var At=new XMLHttpRequest;At.open("HEAD",Dt,!1);try{At.send()}catch{}return 200<=At.status&&299>=At.status}function yr(Dt){try{Dt.dispatchEvent(new MouseEvent("click"))}catch{var At=document.createEvent("MouseEvents");At.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Dt.dispatchEvent(At)}}var nt="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,so=nt.saveAs||("object"!=typeof window||window!==nt?function(){}:"download"in HTMLAnchorElement.prototype?function(Dt,At,or){var zt=nt.URL||nt.webkitURL,Rn=document.createElement("a");Rn.download=At=At||Dt.name||"download",Rn.rel="noopener","string"==typeof Dt?(Rn.href=Dt,Rn.origin===location.origin?yr(Rn):On(Rn.href)?oi(Dt,At,or):yr(Rn,Rn.target="_blank")):(Rn.href=zt.createObjectURL(Dt),setTimeout(function(){zt.revokeObjectURL(Rn.href)},4e4),setTimeout(function(){yr(Rn)},0))}:"msSaveOrOpenBlob"in navigator?function(Dt,At,or){if(At=At||Dt.name||"download","string"!=typeof Dt)navigator.msSaveOrOpenBlob(function wn(Dt,At){return typeof At>"u"?At={autoBom:!1}:"object"!=typeof At&&(console.warn("Deprecated: Expected third argument to be a object"),At={autoBom:!At}),At.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Dt.type)?new Blob(["\ufeff",Dt],{type:Dt.type}):Dt}(Dt,or),At);else if(On(Dt))oi(Dt,At,or);else{var zt=document.createElement("a");zt.href=Dt,zt.target="_blank",setTimeout(function(){yr(zt)})}}:function(Dt,At,or,zt){if((zt=zt||open("","_blank"))&&(zt.document.title=zt.document.body.innerText="downloading..."),"string"==typeof Dt)return oi(Dt,At,or);var Rn="application/octet-stream"===Dt.type,rn=/constructor/i.test(nt.HTMLElement)||nt.safari,Di=/CriOS\/[\d]+/.test(navigator.userAgent);if((Di||Rn&&rn)&&"object"==typeof FileReader){var Gr=new FileReader;Gr.onloadend=function(){var kn=Gr.result;kn=Di?kn:kn.replace(/^data:[^;]*;/,"data:attachment/file;"),zt?zt.location.href=kn:location=kn,zt=null},Gr.readAsDataURL(Dt)}else{var fl=nt.URL||nt.webkitURL,vi=fl.createObjectURL(Dt);zt?zt.location=vi:location.href=vi,zt=null,setTimeout(function(){fl.revokeObjectURL(vi)},4e4)}});nt.saveAs=so.saveAs=so,xs.exports=so})?zr.apply(Ms,[]):zr)&&(xs.exports=ir)},511:(xs,Ms,zr)=>{var vr;!function(ir,wn,oi,On){"use strict";var Gr,yr=["","webkit","Moz","MS","ms","o"],nt=wn.createElement("div"),so="function",Dt=Math.round,At=Math.abs,or=Date.now;function zt(P,F,W){return setTimeout(Es(P,W),F)}function Rn(P,F,W){return!!Array.isArray(P)&&(rn(P,W[F],W),!0)}function rn(P,F,W){var ee;if(P)if(P.forEach)P.forEach(F,W);else if(P.length!==On)for(ee=0;ee<P.length;)F.call(W,P[ee],ee,P),ee++;else for(ee in P)P.hasOwnProperty(ee)&&F.call(W,P[ee],ee,P)}function Di(P,F,W){var ee="DEPRECATED METHOD: "+F+"\n"+W+" AT \n";return function(){var Ae=new Error("get-stack-trace"),ne=Ae&&Ae.stack?Ae.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",jt=ir.console&&(ir.console.warn||ir.console.log);return jt&&jt.call(ir.console,ee,ne),P.apply(this,arguments)}}Gr="function"!=typeof Object.assign?function(F){if(F===On||null===F)throw new TypeError("Cannot convert undefined or null to object");for(var W=Object(F),ee=1;ee<arguments.length;ee++){var Ae=arguments[ee];if(Ae!==On&&null!==Ae)for(var ne in Ae)Ae.hasOwnProperty(ne)&&(W[ne]=Ae[ne])}return W}:Object.assign;var fl=Di(function(F,W,ee){for(var Ae=Object.keys(W),ne=0;ne<Ae.length;)(!ee||ee&&F[Ae[ne]]===On)&&(F[Ae[ne]]=W[Ae[ne]]),ne++;return F},"extend","Use `assign`."),vi=Di(function(F,W){return fl(F,W,!0)},"merge","Use `assign`.");function kn(P,F,W){var Ae,ee=F.prototype;(Ae=P.prototype=Object.create(ee)).constructor=P,Ae._super=ee,W&&Gr(Ae,W)}function Es(P,F){return function(){return P.apply(F,arguments)}}function pl(P,F){return typeof P==so?P.apply(F&&F[0]||On,F):P}function ec(P,F){return P===On?F:P}function Ss(P,F,W){rn(tc(F),function(ee){P.addEventListener(ee,W,!1)})}function yi(P,F,W){rn(tc(F),function(ee){P.removeEventListener(ee,W,!1)})}function Cs(P,F){for(;P;){if(P==F)return!0;P=P.parentNode}return!1}function jo(P,F){return P.indexOf(F)>-1}function tc(P){return P.trim().split(/\s+/g)}function ba(P,F,W){if(P.indexOf&&!W)return P.indexOf(F);for(var ee=0;ee<P.length;){if(W&&P[ee][W]==F||!W&&P[ee]===F)return ee;ee++}return-1}function hu(P){return Array.prototype.slice.call(P,0)}function nh(P,F,W){for(var ee=[],Ae=[],ne=0;ne<P.length;){var jt=F?P[ne][F]:P[ne];ba(Ae,jt)<0&&ee.push(P[ne]),Ae[ne]=jt,ne++}return W&&(ee=F?ee.sort(function(xt,Qr){return xt[F]>Qr[F]}):ee.sort()),ee}function nc(P,F){for(var W,ee,Ae=F[0].toUpperCase()+F.slice(1),ne=0;ne<yr.length;){if((ee=(W=yr[ne])?W+Ae:F)in P)return ee;ne++}return On}var Bv=1;function rc(P){var F=P.ownerDocument||P;return F.defaultView||F.parentWindow||ir}var ic="ontouchstart"in ir,Uv=nc(ir,"PointerEvent")!==On,Hv=ic&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),oc="touch",rh="mouse",pu=25,si=1,dr=4,_i=8,Bt=1,Ts=2,Ds=4,ai=8,Tr=16,ji=Ts|Ds,qo=ai|Tr,gu=ji|qo,Xo=["x","y"],bo=["clientX","clientY"];function Dr(P,F){var W=this;this.manager=P,this.callback=F,this.element=P.element,this.target=P.options.inputTarget,this.domHandler=function(ee){pl(P.options.enable,[P])&&W.handler(ee)},this.init()}function sc(P,F,W){var ee=W.pointers.length,Ae=W.changedPointers.length,ne=F&si&&ee-Ae==0,jt=F&(dr|_i)&&ee-Ae==0;W.isFirst=!!ne,W.isFinal=!!jt,ne&&(P.session={}),W.eventType=F,function ac(P,F){var W=P.session,ee=F.pointers,Ae=ee.length;W.firstInput||(W.firstInput=Ai(F)),Ae>1&&!W.firstMultiple?W.firstMultiple=Ai(F):1===Ae&&(W.firstMultiple=!1);var ne=W.firstInput,jt=W.firstMultiple,kt=jt?jt.center:ne.center,xt=F.center=sr(ee);F.timeStamp=or(),F.deltaTime=F.timeStamp-ne.timeStamp,F.angle=lc(kt,xt),F.distance=wo(kt,xt),function gl(P,F){var W=F.center,ee=P.offsetDelta||{},Ae=P.prevDelta||{},ne=P.prevInput||{};(F.eventType===si||ne.eventType===dr)&&(Ae=P.prevDelta={x:ne.deltaX||0,y:ne.deltaY||0},ee=P.offsetDelta={x:W.x,y:W.y}),F.deltaX=Ae.x+(W.x-ee.x),F.deltaY=Ae.y+(W.y-ee.y)}(W,F),F.offsetDirection=Vn(F.deltaX,F.deltaY);var Qr=xa(F.deltaTime,F.deltaX,F.deltaY);F.overallVelocityX=Qr.x,F.overallVelocityY=Qr.y,F.overallVelocity=At(Qr.x)>At(Qr.y)?Qr.x:Qr.y,F.scale=jt?function ih(P,F){return wo(F[0],F[1],bo)/wo(P[0],P[1],bo)}(jt.pointers,ee):1,F.rotation=jt?function ml(P,F){return lc(F[1],F[0],bo)+lc(P[1],P[0],bo)}(jt.pointers,ee):0,F.maxPointers=W.prevInput?F.pointers.length>W.prevInput.maxPointers?F.pointers.length:W.prevInput.maxPointers:F.pointers.length,function wa(P,F){var Ae,ne,jt,kt,W=P.lastInterval||F,ee=F.timeStamp-W.timeStamp;if(F.eventType!=_i&&(ee>pu||W.velocity===On)){var xt=F.deltaX-W.deltaX,Qr=F.deltaY-W.deltaY,Yi=xa(ee,xt,Qr);ne=Yi.x,jt=Yi.y,Ae=At(Yi.x)>At(Yi.y)?Yi.x:Yi.y,kt=Vn(xt,Qr),P.lastInterval=F}else Ae=W.velocity,ne=W.velocityX,jt=W.velocityY,kt=W.direction;F.velocity=Ae,F.velocityX=ne,F.velocityY=jt,F.direction=kt}(W,F);var Yi=P.element;Cs(F.srcEvent.target,Yi)&&(Yi=F.srcEvent.target),F.target=Yi}(P,W),P.emit("hammer.input",W),P.recognize(W),P.session.prevInput=W}function Ai(P){for(var F=[],W=0;W<P.pointers.length;)F[W]={clientX:Dt(P.pointers[W].clientX),clientY:Dt(P.pointers[W].clientY)},W++;return{timeStamp:or(),pointers:F,center:sr(F),deltaX:P.deltaX,deltaY:P.deltaY}}function sr(P){var F=P.length;if(1===F)return{x:Dt(P[0].clientX),y:Dt(P[0].clientY)};for(var W=0,ee=0,Ae=0;Ae<F;)W+=P[Ae].clientX,ee+=P[Ae].clientY,Ae++;return{x:Dt(W/F),y:Dt(ee/F)}}function xa(P,F,W){return{x:F/P||0,y:W/P||0}}function Vn(P,F){return P===F?Bt:At(P)>=At(F)?P<0?Ts:Ds:F<0?ai:Tr}function wo(P,F,W){W||(W=Xo);var ee=F[W[0]]-P[W[0]],Ae=F[W[1]]-P[W[1]];return Math.sqrt(ee*ee+Ae*Ae)}function lc(P,F,W){return W||(W=Xo),180*Math.atan2(F[W[1]]-P[W[1]],F[W[0]]-P[W[0]])/Math.PI}Dr.prototype={handler:function(){},init:function(){this.evEl&&Ss(this.element,this.evEl,this.domHandler),this.evTarget&&Ss(this.target,this.evTarget,this.domHandler),this.evWin&&Ss(rc(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&yi(this.element,this.evEl,this.domHandler),this.evTarget&&yi(this.target,this.evTarget,this.domHandler),this.evWin&&yi(rc(this.element),this.evWin,this.domHandler)}};var Wn={mousedown:si,mousemove:2,mouseup:dr},vl="mousedown",Ma="mousemove mouseup";function lo(){this.evEl=vl,this.evWin=Ma,this.pressed=!1,Dr.apply(this,arguments)}kn(lo,Dr,{handler:function(F){var W=Wn[F.type];W&si&&0===F.button&&(this.pressed=!0),2&W&&1!==F.which&&(W=dr),this.pressed&&(W&dr&&(this.pressed=!1),this.callback(this.manager,W,{pointers:[F],changedPointers:[F],pointerType:rh,srcEvent:F}))}});var Vp={pointerdown:si,pointermove:2,pointerup:dr,pointercancel:_i,pointerout:_i},hn={2:oc,3:"pen",4:rh,5:"kinect"},mu="pointerdown",oh="pointermove pointerup pointercancel";function As(){this.evEl=mu,this.evWin=oh,Dr.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}ir.MSPointerEvent&&!ir.PointerEvent&&(mu="MSPointerDown",oh="MSPointerMove MSPointerUp MSPointerCancel"),kn(As,Dr,{handler:function(F){var W=this.store,ee=!1,Ae=F.type.toLowerCase().replace("ms",""),ne=Vp[Ae],jt=hn[F.pointerType]||F.pointerType,kt=jt==oc,xt=ba(W,F.pointerId,"pointerId");ne&si&&(0===F.button||kt)?xt<0&&(W.push(F),xt=W.length-1):ne&(dr|_i)&&(ee=!0),!(xt<0)&&(W[xt]=F,this.callback(this.manager,ne,{pointers:W,changedPointers:[F],pointerType:jt,srcEvent:F}),ee&&W.splice(xt,1))}});var Bp={touchstart:si,touchmove:2,touchend:dr,touchcancel:_i};function Ir(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Dr.apply(this,arguments)}function sh(P,F){var W=hu(P.touches),ee=hu(P.changedTouches);return F&(dr|_i)&&(W=nh(W.concat(ee),"identifier",!0)),[W,ee]}kn(Ir,Dr,{handler:function(F){var W=Bp[F.type];if(W===si&&(this.started=!0),this.started){var ee=sh.call(this,F,W);W&(dr|_i)&&ee[0].length-ee[1].length==0&&(this.started=!1),this.callback(this.manager,W,{pointers:ee[0],changedPointers:ee[1],pointerType:oc,srcEvent:F})}}});var Rr={touchstart:si,touchmove:2,touchend:dr,touchcancel:_i},Bn="touchstart touchmove touchend touchcancel";function Ot(){this.evTarget=Bn,this.targetIds={},Dr.apply(this,arguments)}function zv(P,F){var W=hu(P.touches),ee=this.targetIds;if(F&(2|si)&&1===W.length)return ee[W[0].identifier]=!0,[W,W];var Ae,ne,jt=hu(P.changedTouches),kt=[],xt=this.target;if(ne=W.filter(function(Qr){return Cs(Qr.target,xt)}),F===si)for(Ae=0;Ae<ne.length;)ee[ne[Ae].identifier]=!0,Ae++;for(Ae=0;Ae<jt.length;)ee[jt[Ae].identifier]&&kt.push(jt[Ae]),F&(dr|_i)&&delete ee[jt[Ae].identifier],Ae++;return kt.length?[nh(ne.concat(kt),"identifier",!0),kt]:void 0}kn(Ot,Dr,{handler:function(F){var W=Rr[F.type],ee=zv.call(this,F,W);ee&&this.callback(this.manager,W,{pointers:ee[0],changedPointers:ee[1],pointerType:oc,srcEvent:F})}});var Nr=2500;function Yo(){Dr.apply(this,arguments);var P=Es(this.handler,this);this.touch=new Ot(this.manager,P),this.mouse=new lo(this.manager,P),this.primaryTouch=null,this.lastTouches=[]}function co(P,F){P&si?(this.primaryTouch=F.changedPointers[0].identifier,Zo.call(this,F)):P&(dr|_i)&&Zo.call(this,F)}function Zo(P){var F=P.changedPointers[0];if(F.identifier===this.primaryTouch){var W={x:F.clientX,y:F.clientY};this.lastTouches.push(W);var ee=this.lastTouches;setTimeout(function(){var ne=ee.indexOf(W);ne>-1&&ee.splice(ne,1)},Nr)}}function Gv(P){for(var F=P.srcEvent.clientX,W=P.srcEvent.clientY,ee=0;ee<this.lastTouches.length;ee++){var Ae=this.lastTouches[ee],ne=Math.abs(F-Ae.x),jt=Math.abs(W-Ae.y);if(ne<=25&&jt<=25)return!0}return!1}kn(Yo,Dr,{handler:function(F,W,ee){var ne=ee.pointerType==rh;if(!(ne&&ee.sourceCapabilities&&ee.sourceCapabilities.firesTouchEvents)){if(ee.pointerType==oc)co.call(this,W,ee);else if(ne&&Gv.call(this,ee))return;this.callback(F,W,ee)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Up=nc(nt.style,"touchAction"),vu=Up!==On,uo="compute",ho="manipulation",li="none",Jo="pan-x",Mo="pan-y",fo=function Hp(){if(!vu)return!1;var P={},F=ir.CSS&&ir.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(W){P[W]=!F||ir.CSS.supports("touch-action",W)}),P}();function yu(P,F){this.manager=P,this.set(F)}yu.prototype={set:function(P){P==uo&&(P=this.compute()),vu&&this.manager.element.style&&fo[P]&&(this.manager.element.style[Up]=P),this.actions=P.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var P=[];return rn(this.manager.recognizers,function(F){pl(F.options.enable,[F])&&(P=P.concat(F.getTouchAction()))}),function on(P){if(jo(P,li))return li;var F=jo(P,Jo),W=jo(P,Mo);return F&&W?li:F||W?F?Jo:Mo:jo(P,ho)?ho:"auto"}(P.join(" "))},preventDefaults:function(P){var F=P.srcEvent,W=P.offsetDirection;if(!this.manager.session.prevented){var ee=this.actions,Ae=jo(ee,li)&&!fo[li],ne=jo(ee,Mo)&&!fo[Mo],jt=jo(ee,Jo)&&!fo[Jo];if(Ae&&1===P.pointers.length&&P.distance<2&&P.deltaTime<250)return;return jt&&ne||!(Ae||ne&&W&ji||jt&&W&qo)?void 0:this.preventSrc(F)}F.preventDefault()},preventSrc:function(P){this.manager.session.prevented=!0,P.preventDefault()}};var _u=1;function qt(P){this.options=Gr({},this.defaults,P||{}),this.id=function fu(){return Bv++}(),this.manager=null,this.options.enable=ec(this.options.enable,!0),this.state=_u,this.simultaneous={},this.requireFail=[]}function ut(P){return 16&P?"cancel":8&P?"end":4&P?"move":2&P?"start":""}function Ea(P){return P==Tr?"down":P==ai?"up":P==Ts?"left":P==Ds?"right":""}function Or(P,F){var W=F.manager;return W?W.get(P):P}function qi(){qt.apply(this,arguments)}function _l(){qi.apply(this,arguments),this.pX=null,this.pY=null}function bu(){qi.apply(this,arguments)}function Xi(){qt.apply(this,arguments),this._timer=null,this._input=null}function wu(){qi.apply(this,arguments)}function xu(){qi.apply(this,arguments)}function cc(){qt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Sa(P,F){return(F=F||{}).recognizers=ec(F.recognizers,Sa.defaults.preset),new Ps(P,F)}function Ps(P,F){this.options=Gr({},Sa.defaults,F||{}),this.options.inputTarget=this.options.inputTarget||P,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=P,this.input=function ao(P){return new(P.options.inputClass||(Uv?As:Hv?Ot:ic?Yo:lo))(P,sc)}(this),this.touchAction=new yu(this,this.options.touchAction),bl(this,!0),rn(this.options.recognizers,function(W){var ee=this.add(new W[0](W[1]));W[2]&&ee.recognizeWith(W[2]),W[3]&&ee.requireFailure(W[3])},this)}function bl(P,F){var ee,W=P.element;W.style&&(rn(P.options.cssProps,function(Ae,ne){ee=nc(W.style,ne),F?(P.oldCssProps[ee]=W.style[ee],W.style[ee]=Ae):W.style[ee]=P.oldCssProps[ee]||""}),F||(P.oldCssProps={}))}qt.prototype={defaults:{},set:function(P){return Gr(this.options,P),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(P){if(Rn(P,"recognizeWith",this))return this;var F=this.simultaneous;return F[(P=Or(P,this)).id]||(F[P.id]=P,P.recognizeWith(this)),this},dropRecognizeWith:function(P){return Rn(P,"dropRecognizeWith",this)||(P=Or(P,this),delete this.simultaneous[P.id]),this},requireFailure:function(P){if(Rn(P,"requireFailure",this))return this;var F=this.requireFail;return-1===ba(F,P=Or(P,this))&&(F.push(P),P.requireFailure(this)),this},dropRequireFailure:function(P){if(Rn(P,"dropRequireFailure",this))return this;P=Or(P,this);var F=ba(this.requireFail,P);return F>-1&&this.requireFail.splice(F,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(P){return!!this.simultaneous[P.id]},emit:function(P){var F=this,W=this.state;function ee(Ae){F.manager.emit(Ae,P)}W<8&&ee(F.options.event+ut(W)),ee(F.options.event),P.additionalEvent&&ee(P.additionalEvent),W>=8&&ee(F.options.event+ut(W))},tryEmit:function(P){if(this.canEmit())return this.emit(P);this.state=32},canEmit:function(){for(var P=0;P<this.requireFail.length;){if(!(this.requireFail[P].state&(32|_u)))return!1;P++}return!0},recognize:function(P){var F=Gr({},P);if(!pl(this.options.enable,[this,F]))return this.reset(),void(this.state=32);56&this.state&&(this.state=_u),this.state=this.process(F),30&this.state&&this.tryEmit(F)},process:function(P){},getTouchAction:function(){},reset:function(){}},kn(qi,qt,{defaults:{pointers:1},attrTest:function(P){var F=this.options.pointers;return 0===F||P.pointers.length===F},process:function(P){var F=this.state,W=P.eventType,ee=6&F,Ae=this.attrTest(P);return ee&&(W&_i||!Ae)?16|F:ee||Ae?W&dr?8|F:2&F?4|F:2:32}}),kn(_l,qi,{defaults:{event:"pan",threshold:10,pointers:1,direction:gu},getTouchAction:function(){var P=this.options.direction,F=[];return P&ji&&F.push(Mo),P&qo&&F.push(Jo),F},directionTest:function(P){var F=this.options,W=!0,ee=P.distance,Ae=P.direction,ne=P.deltaX,jt=P.deltaY;return Ae&F.direction||(F.direction&ji?(Ae=0===ne?Bt:ne<0?Ts:Ds,W=ne!=this.pX,ee=Math.abs(P.deltaX)):(Ae=0===jt?Bt:jt<0?ai:Tr,W=jt!=this.pY,ee=Math.abs(P.deltaY))),P.direction=Ae,W&&ee>F.threshold&&Ae&F.direction},attrTest:function(P){return qi.prototype.attrTest.call(this,P)&&(2&this.state||!(2&this.state)&&this.directionTest(P))},emit:function(P){this.pX=P.deltaX,this.pY=P.deltaY;var F=Ea(P.direction);F&&(P.additionalEvent=this.options.event+F),this._super.emit.call(this,P)}}),kn(bu,qi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[li]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.scale-1)>this.options.threshold||2&this.state)},emit:function(P){1!==P.scale&&(P.additionalEvent=this.options.event+(P.scale<1?"in":"out")),this._super.emit.call(this,P)}}),kn(Xi,qt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(P){var F=this.options,W=P.pointers.length===F.pointers,ee=P.distance<F.threshold,Ae=P.deltaTime>F.time;if(this._input=P,!ee||!W||P.eventType&(dr|_i)&&!Ae)this.reset();else if(P.eventType&si)this.reset(),this._timer=zt(function(){this.state=8,this.tryEmit()},F.time,this);else if(P.eventType&dr)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(P){8===this.state&&(P&&P.eventType&dr?this.manager.emit(this.options.event+"up",P):(this._input.timeStamp=or(),this.manager.emit(this.options.event,this._input)))}}),kn(wu,qi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[li]},attrTest:function(P){return this._super.attrTest.call(this,P)&&(Math.abs(P.rotation)>this.options.threshold||2&this.state)}}),kn(xu,qi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ji|qo,pointers:1},getTouchAction:function(){return _l.prototype.getTouchAction.call(this)},attrTest:function(P){var W,F=this.options.direction;return F&(ji|qo)?W=P.overallVelocity:F&ji?W=P.overallVelocityX:F&qo&&(W=P.overallVelocityY),this._super.attrTest.call(this,P)&&F&P.offsetDirection&&P.distance>this.options.threshold&&P.maxPointers==this.options.pointers&&At(W)>this.options.velocity&&P.eventType&dr},emit:function(P){var F=Ea(P.offsetDirection);F&&this.manager.emit(this.options.event+F,P),this.manager.emit(this.options.event,P)}}),kn(cc,qt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ho]},process:function(P){var F=this.options,W=P.pointers.length===F.pointers,ee=P.distance<F.threshold,Ae=P.deltaTime<F.time;if(this.reset(),P.eventType&si&&0===this.count)return this.failTimeout();if(ee&&Ae&&W){if(P.eventType!=dr)return this.failTimeout();var ne=!this.pTime||P.timeStamp-this.pTime<F.interval,jt=!this.pCenter||wo(this.pCenter,P.center)<F.posThreshold;if(this.pTime=P.timeStamp,this.pCenter=P.center,jt&&ne?this.count+=1:this.count=1,this._input=P,0==this.count%F.taps)return this.hasRequireFailures()?(this._timer=zt(function(){this.state=8,this.tryEmit()},F.interval,this),2):8}return 32},failTimeout:function(){return this._timer=zt(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Sa.VERSION="2.0.7",Sa.defaults={domEvents:!1,touchAction:uo,enable:!0,inputTarget:null,inputClass:null,preset:[[wu,{enable:!1}],[bu,{enable:!1},["rotate"]],[xu,{direction:ji}],[_l,{direction:ji},["swipe"]],[cc],[cc,{event:"doubletap",taps:2},["tap"]],[Xi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ps.prototype={set:function(P){return Gr(this.options,P),P.touchAction&&this.touchAction.update(),P.inputTarget&&(this.input.destroy(),this.input.target=P.inputTarget,this.input.init()),this},stop:function(P){this.session.stopped=P?2:1},recognize:function(P){var F=this.session;if(!F.stopped){this.touchAction.preventDefaults(P);var W,ee=this.recognizers,Ae=F.curRecognizer;(!Ae||Ae&&8&Ae.state)&&(Ae=F.curRecognizer=null);for(var ne=0;ne<ee.length;)W=ee[ne],2===F.stopped||Ae&&W!=Ae&&!W.canRecognizeWith(Ae)?W.reset():W.recognize(P),!Ae&&14&W.state&&(Ae=F.curRecognizer=W),ne++}},get:function(P){if(P instanceof qt)return P;for(var F=this.recognizers,W=0;W<F.length;W++)if(F[W].options.event==P)return F[W];return null},add:function(P){if(Rn(P,"add",this))return this;var F=this.get(P.options.event);return F&&this.remove(F),this.recognizers.push(P),P.manager=this,this.touchAction.update(),P},remove:function(P){if(Rn(P,"remove",this))return this;if(P=this.get(P)){var F=this.recognizers,W=ba(F,P);-1!==W&&(F.splice(W,1),this.touchAction.update())}return this},on:function(P,F){if(P!==On&&F!==On){var W=this.handlers;return rn(tc(P),function(ee){W[ee]=W[ee]||[],W[ee].push(F)}),this}},off:function(P,F){if(P!==On){var W=this.handlers;return rn(tc(P),function(ee){F?W[ee]&&W[ee].splice(ba(W[ee],F),1):delete W[ee]}),this}},emit:function(P,F){this.options.domEvents&&function Jr(P,F){var W=wn.createEvent("Event");W.initEvent(P,!0,!0),W.gesture=F,F.target.dispatchEvent(W)}(P,F);var W=this.handlers[P]&&this.handlers[P].slice();if(W&&W.length){F.type=P,F.preventDefault=function(){F.srcEvent.preventDefault()};for(var ee=0;ee<W.length;)W[ee](F),ee++}},destroy:function(){this.element&&bl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Gr(Sa,{INPUT_START:si,INPUT_MOVE:2,INPUT_END:dr,INPUT_CANCEL:_i,STATE_POSSIBLE:_u,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:Bt,DIRECTION_LEFT:Ts,DIRECTION_RIGHT:Ds,DIRECTION_UP:ai,DIRECTION_DOWN:Tr,DIRECTION_HORIZONTAL:ji,DIRECTION_VERTICAL:qo,DIRECTION_ALL:gu,Manager:Ps,Input:Dr,TouchAction:yu,TouchInput:Ot,MouseInput:lo,PointerEventInput:As,TouchMouseInput:Yo,SingleTouchInput:Ir,Recognizer:qt,AttrRecognizer:qi,Tap:cc,Pan:_l,Swipe:xu,Pinch:bu,Rotate:wu,Press:Xi,on:Ss,off:yi,each:rn,merge:vi,extend:fl,assign:Gr,inherit:kn,bindFn:Es,prefixed:nc}),(typeof ir<"u"?ir:typeof self<"u"?self:{}).Hammer=Sa,(vr=function(){return Sa}.call(Ms,zr,Ms,xs))!==On&&(xs.exports=vr)}(window,document)},354:(xs,Ms,zr)=>{"use strict";zr.d(Ms,{$EB:()=>Di,$Kf:()=>id,$_I:()=>lo,B69:()=>Gt,BH$:()=>Si,Cfg:()=>ml,DXC:()=>ki,EAD:()=>rf,EZo:()=>Es,FCc:()=>sd,GJx:()=>Ai,HiM:()=>xm,Hit:()=>Xa,I46:()=>rd,I9Y:()=>Me,JeP:()=>Cn,Kzg:()=>P_,LoY:()=>ft,MBL:()=>Gl,N1A:()=>Ks,NRn:()=>Ct,Nwf:()=>Hn,O49:()=>ne,ONl:()=>af,PJ3:()=>bl,PTz:()=>fr,Pq0:()=>k,Q1f:()=>ke,Qev:()=>Ml,RiT:()=>xd,S2Q:()=>xt,THS:()=>en,Tap:()=>mm,V9B:()=>Do,Y9S:()=>Vo,YHV:()=>nM,YJl:()=>Zs,Z58:()=>Yh,ZyN:()=>If,_4j:()=>_d,aHM:()=>ce,bI3:()=>wl,bdM:()=>Fa,cj9:()=>Yp,dth:()=>Sd,eB$:()=>Fl,eHs:()=>Js,eaF:()=>Zn,gPd:()=>hr,ghU:()=>sr,hB5:()=>Rn,h_9:()=>fm,hxR:()=>Vn,iNn:()=>mn,imn:()=>lr,iyt:()=>jr,k6q:()=>Wn,kBv:()=>wn,kRr:()=>vl,kTW:()=>xa,kn4:()=>Je,lGw:()=>vo,ljd:()=>Ps,mrM:()=>ni,nCl:()=>_m,pHI:()=>wo,qBx:()=>sm,qUd:()=>ka,r6x:()=>Em,rYR:()=>jt,tz3:()=>Md,uSd:()=>om,ubm:()=>Jn,wtR:()=>oi});var vr=zr(467);const ir="137",wn={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oi={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},On=0,yr=1,nt=2,At=1,or=2,zt=3,Rn=0,rn=1,Di=2,vi=0,kn=1,Es=2,pl=3,ec=4,Ss=5,yi=100,Cs=101,jo=102,tc=103,ba=104,hu=200,nh=201,nc=202,Bv=203,fu=204,rc=205,Lp=206,ic=207,Uv=208,Hv=209,oc=210,Fp=0,rh=1,kp=2,pu=3,si=4,$o=5,dr=6,_i=7,Bt=0,Ts=1,Ds=2,ai=0,Tr=1,ji=2,qo=3,gu=4,Xo=5,Dr=301,ao=302,sc=303,ac=304,gl=306,wa=307,Ai=1e3,sr=1001,xa=1002,Vn=1003,wo=1004,ml=1005,Wn=1006,vl=1007,lo=1008,hn=1009,mu=1010,oh=1011,As=1012,Bp=1013,Ar=1014,xo=1015,Ir=1016,sh=1017,Rr=1018,Bn=1020,Ot=1021,zv=1022,Nr=1023,we=1024,Yo=1025,co=1026,Zo=1027,Gv=1028,Up=1029,vu=1030,uo=1031,Is=1033,ho=33776,li=33777,Jo=33778,Mo=33779,fo=35840,yu=35841,on=35842,Hp=35843,_u=36196,Rt=37492,Rs=37496,xn=37808,Ii=37809,yl=37810,$i=37811,qt=37812,ut=37813,Ea=37814,Or=37815,qi=37816,_l=37817,bu=37818,Xi=37819,wu=37820,xu=37821,cc=36492,Ps=2300,bl=2301,rt=2400,P=2401,F=2402,ne=1,jt=2,kt=3e3,xt=3001,Yi=3201,wl=0,ah=1,Ns=35044,xl=35048,Yv="300 es",$p=1035;class Ml{addEventListener(r,o){void 0===this._listeners&&(this._listeners={});const a=this._listeners;void 0===a[r]&&(a[r]=[]),-1===a[r].indexOf(o)&&a[r].push(o)}hasEventListener(r,o){if(void 0===this._listeners)return!1;const a=this._listeners;return void 0!==a[r]&&-1!==a[r].indexOf(o)}removeEventListener(r,o){if(void 0===this._listeners)return;const c=this._listeners[r];if(void 0!==c){const d=c.indexOf(o);-1!==d&&c.splice(d,1)}}dispatchEvent(r){if(void 0===this._listeners)return;const a=this._listeners[r.type];if(void 0!==a){r.target=this;const c=a.slice(0);for(let d=0,f=c.length;d<f;d++)c[d].call(this,r);r.target=null}}}const Kr=[];for(let h=0;h<256;h++)Kr[h]=(h<16?"0":"")+h.toString(16);let uc=1234567;const Pt=Math.PI/180,El=180/Math.PI;function Ri(){const h=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(Kr[255&h]+Kr[h>>8&255]+Kr[h>>16&255]+Kr[h>>24&255]+"-"+Kr[255&r]+Kr[r>>8&255]+"-"+Kr[r>>16&15|64]+Kr[r>>24&255]+"-"+Kr[63&o|128]+Kr[o>>8&255]+"-"+Kr[o>>16&255]+Kr[o>>24&255]+Kr[255&a]+Kr[a>>8&255]+Kr[a>>16&255]+Kr[a>>24&255]).toUpperCase()}function pn(h,r,o){return Math.max(r,Math.min(o,h))}function ch(h,r){return(h%r+r)%r}function Os(h,r,o){return(1-o)*h+o*r}function Oe(h){return!(h&h-1)&&0!==h}function Xp(h){return Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function Te(h){return Math.pow(2,Math.floor(Math.log(h)/Math.LN2))}var Yp=Object.freeze({__proto__:null,DEG2RAD:Pt,RAD2DEG:El,generateUUID:Ri,clamp:pn,euclideanModulo:ch,mapLinear:function KS(h,r,o,a,c){return a+(h-r)*(c-a)/(o-r)},inverseLerp:function eC(h,r,o){return h!==r?(o-h)/(r-h):0},lerp:Os,damp:function qp(h,r,o,a){return Os(h,r,1-Math.exp(-o*a))},pingpong:function uh(h,r=1){return r-Math.abs(ch(h,2*r)-r)},smoothstep:function $0(h,r,o){return h<=r?0:h>=o?1:(h=(h-r)/(o-r))*h*(3-2*h)},smootherstep:function q0(h,r,o){return h<=r?0:h>=o?1:(h=(h-r)/(o-r))*h*h*(h*(6*h-15)+10)},randInt:function X0(h,r){return h+Math.floor(Math.random()*(r-h+1))},randFloat:function Zv(h,r){return h+Math.random()*(r-h)},randFloatSpread:function dc(h){return h*(.5-Math.random())},seededRandom:function Y0(h){return void 0!==h&&(uc=h%2147483647),uc=16807*uc%2147483647,(uc-1)/2147483646},degToRad:function Ta(h){return h*Pt},radToDeg:function Z0(h){return h*El},isPowerOfTwo:Oe,ceilPowerOfTwo:Xp,floorPowerOfTwo:Te,setQuaternionFromProperEuler:function dh(h,r,o,a,c){const d=Math.cos,f=Math.sin,g=d(o/2),v=f(o/2),y=d((r+a)/2),w=f((r+a)/2),b=d((r-a)/2),x=f((r-a)/2),M=d((a-r)/2),C=f((a-r)/2);switch(c){case"XYX":h.set(g*w,v*b,v*x,g*y);break;case"YZY":h.set(v*x,g*w,v*b,g*y);break;case"ZXZ":h.set(v*b,v*x,g*w,g*y);break;case"XZX":h.set(g*w,v*C,v*M,g*y);break;case"YXY":h.set(v*M,g*w,v*C,g*y);break;case"ZYZ":h.set(v*C,v*M,g*w,g*y);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}});class Me{constructor(r=0,o=0){this.x=r,this.y=o}get width(){return this.x}set width(r){this.x=r}get height(){return this.y}set height(r){this.y=r}set(r,o){return this.x=r,this.y=o,this}setScalar(r){return this.x=r,this.y=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y)}copy(r){return this.x=r.x,this.y=r.y,this}add(r,o){return void 0!==o?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,o)):(this.x+=r.x,this.y+=r.y,this)}addScalar(r){return this.x+=r,this.y+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this}sub(r,o){return void 0!==o?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,o)):(this.x-=r.x,this.y-=r.y,this)}subScalar(r){return this.x-=r,this.y-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this}multiply(r){return this.x*=r.x,this.y*=r.y,this}multiplyScalar(r){return this.x*=r,this.y*=r,this}divide(r){return this.x/=r.x,this.y/=r.y,this}divideScalar(r){return this.multiplyScalar(1/r)}applyMatrix3(r){const o=this.x,a=this.y,c=r.elements;return this.x=c[0]*o+c[3]*a+c[6],this.y=c[1]*o+c[4]*a+c[7],this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this}clampLength(r,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(r){return this.x*r.x+this.y*r.y}cross(r){return this.x*r.y-this.y*r.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const o=this.x-r.x,a=this.y-r.y;return o*o+a*a}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this}lerpVectors(r,o,a){return this.x=r.x+(o.x-r.x)*a,this.y=r.y+(o.y-r.y)*a,this}equals(r){return r.x===this.x&&r.y===this.y}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r}fromBufferAttribute(r,o,a){return void 0!==a&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(o),this.y=r.getY(o),this}rotateAround(r,o){const a=Math.cos(o),c=Math.sin(o),d=this.x-r.x,f=this.y-r.y;return this.x=d*a-f*c+r.x,this.y=d*c+f*a+r.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Me.prototype.isVector2=!0;class Wr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(r,o,a,c,d,f,g,v,y){const w=this.elements;return w[0]=r,w[1]=c,w[2]=g,w[3]=o,w[4]=d,w[5]=v,w[6]=a,w[7]=f,w[8]=y,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(r){const o=this.elements,a=r.elements;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this}extractBasis(r,o,a){return r.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}setFromMatrix4(r){const o=r.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(r){return this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,o){const a=r.elements,c=o.elements,d=this.elements,f=a[0],g=a[3],v=a[6],y=a[1],w=a[4],b=a[7],x=a[2],M=a[5],C=a[8],D=c[0],R=c[3],T=c[6],E=c[1],L=c[4],I=c[7],V=c[2],z=c[5],j=c[8];return d[0]=f*D+g*E+v*V,d[3]=f*R+g*L+v*z,d[6]=f*T+g*I+v*j,d[1]=y*D+w*E+b*V,d[4]=y*R+w*L+b*z,d[7]=y*T+w*I+b*j,d[2]=x*D+M*E+C*V,d[5]=x*R+M*L+C*z,d[8]=x*T+M*I+C*j,this}multiplyScalar(r){const o=this.elements;return o[0]*=r,o[3]*=r,o[6]*=r,o[1]*=r,o[4]*=r,o[7]*=r,o[2]*=r,o[5]*=r,o[8]*=r,this}determinant(){const r=this.elements,o=r[0],a=r[1],c=r[2],d=r[3],f=r[4],g=r[5],v=r[6],y=r[7],w=r[8];return o*f*w-o*g*y-a*d*w+a*g*v+c*d*y-c*f*v}invert(){const r=this.elements,o=r[0],a=r[1],c=r[2],d=r[3],f=r[4],g=r[5],v=r[6],y=r[7],w=r[8],b=w*f-g*y,x=g*v-w*d,M=y*d-f*v,C=o*b+a*x+c*M;if(0===C)return this.set(0,0,0,0,0,0,0,0,0);const D=1/C;return r[0]=b*D,r[1]=(c*y-w*a)*D,r[2]=(g*a-c*f)*D,r[3]=x*D,r[4]=(w*o-c*v)*D,r[5]=(c*d-g*o)*D,r[6]=M*D,r[7]=(a*v-y*o)*D,r[8]=(f*o-a*d)*D,this}transpose(){let r;const o=this.elements;return r=o[1],o[1]=o[3],o[3]=r,r=o[2],o[2]=o[6],o[6]=r,r=o[5],o[5]=o[7],o[7]=r,this}getNormalMatrix(r){return this.setFromMatrix4(r).invert().transpose()}transposeIntoArray(r){const o=this.elements;return r[0]=o[0],r[1]=o[3],r[2]=o[6],r[3]=o[1],r[4]=o[4],r[5]=o[7],r[6]=o[2],r[7]=o[5],r[8]=o[8],this}setUvTransform(r,o,a,c,d,f,g){const v=Math.cos(d),y=Math.sin(d);return this.set(a*v,a*y,-a*(v*f+y*g)+f+r,-c*y,c*v,-c*(-y*f+v*g)+g+o,0,0,1),this}scale(r,o){const a=this.elements;return a[0]*=r,a[3]*=r,a[6]*=r,a[1]*=o,a[4]*=o,a[7]*=o,this}rotate(r){const o=Math.cos(r),a=Math.sin(r),c=this.elements,d=c[0],f=c[3],g=c[6],v=c[1],y=c[4],w=c[7];return c[0]=o*d+a*v,c[3]=o*f+a*y,c[6]=o*g+a*w,c[1]=-a*d+o*v,c[4]=-a*f+o*y,c[7]=-a*g+o*w,this}translate(r,o){const a=this.elements;return a[0]+=r*a[2],a[3]+=r*a[5],a[6]+=r*a[8],a[1]+=o*a[2],a[4]+=o*a[5],a[7]+=o*a[8],this}equals(r){const o=this.elements,a=r.elements;for(let c=0;c<9;c++)if(o[c]!==a[c])return!1;return!0}fromArray(r,o=0){for(let a=0;a<9;a++)this.elements[a]=r[a+o];return this}toArray(r=[],o=0){const a=this.elements;return r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2],r[o+3]=a[3],r[o+4]=a[4],r[o+5]=a[5],r[o+6]=a[6],r[o+7]=a[7],r[o+8]=a[8],r}clone(){return(new this.constructor).fromArray(this.elements)}}function Jv(h){for(let r=h.length-1;r>=0;--r)if(h[r]>65535)return!0;return!1}function Ls(h){return document.createElementNS("http://www.w3.org/1999/xhtml",h)}Wr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Qv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Pi={h:0,s:0,l:0},hh={h:0,s:0,l:0};function Fs(h,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?h+6*(r-h)*o:o<.5?r:o<2/3?h+6*(r-h)*(2/3-o):h}function fc(h){return h<.04045?.0773993808*h:Math.pow(.9478672986*h+.0521327014,2.4)}function ci(h){return h<.0031308?12.92*h:1.055*Math.pow(h,.41666)-.055}let Sl,ke=(()=>{class h{constructor(o,a,c){return void 0===a&&void 0===c?this.set(o):this.setRGB(o,a,c)}set(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}setScalar(o){return this.r=o,this.g=o,this.b=o,this}setHex(o){return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,this}setRGB(o,a,c){return this.r=o,this.g=a,this.b=c,this}setHSL(o,a,c){if(o=ch(o,1),a=pn(a,0,1),c=pn(c,0,1),0===a)this.r=this.g=this.b=c;else{const d=c<=.5?c*(1+a):c+a-c*a,f=2*c-d;this.r=Fs(f,d,o+1/3),this.g=Fs(f,d,o),this.b=Fs(f,d,o-1/3)}return this}setStyle(o){function a(d){void 0!==d&&parseFloat(d)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}let c;if(c=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){let d;const g=c[2];switch(c[1]){case"rgb":case"rgba":if(d=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,a(d[4]),this;if(d=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,a(d[4]),this;break;case"hsl":case"hsla":if(d=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const v=parseFloat(d[1])/360,y=parseInt(d[2],10)/100,w=parseInt(d[3],10)/100;return a(d[4]),this.setHSL(v,y,w)}}}else if(c=/^\#([A-Fa-f\d]+)$/.exec(o)){const d=c[1],f=d.length;if(3===f)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(6===f)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}return o&&o.length>0?this.setColorName(o):this}setColorName(o){const a=Qv[o.toLowerCase()];return void 0!==a?this.setHex(a):console.warn("THREE.Color: Unknown color "+o),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}copySRGBToLinear(o){return this.r=fc(o.r),this.g=fc(o.g),this.b=fc(o.b),this}copyLinearToSRGB(o){return this.r=ci(o.r),this.g=ci(o.g),this.b=ci(o.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(o){const a=this.r,c=this.g,d=this.b,f=Math.max(a,c,d),g=Math.min(a,c,d);let v,y;const w=(g+f)/2;if(g===f)v=0,y=0;else{const b=f-g;switch(y=w<=.5?b/(f+g):b/(2-f-g),f){case a:v=(c-d)/b+(c<d?6:0);break;case c:v=(d-a)/b+2;break;case d:v=(a-c)/b+4}v/=6}return o.h=v,o.s=y,o.l=w,o}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(o,a,c){return this.getHSL(Pi),Pi.h+=o,Pi.s+=a,Pi.l+=c,this.setHSL(Pi.h,Pi.s,Pi.l),this}add(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}addColors(o,a){return this.r=o.r+a.r,this.g=o.g+a.g,this.b=o.b+a.b,this}addScalar(o){return this.r+=o,this.g+=o,this.b+=o,this}sub(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}multiply(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}multiplyScalar(o){return this.r*=o,this.g*=o,this.b*=o,this}lerp(o,a){return this.r+=(o.r-this.r)*a,this.g+=(o.g-this.g)*a,this.b+=(o.b-this.b)*a,this}lerpColors(o,a,c){return this.r=o.r+(a.r-o.r)*c,this.g=o.g+(a.g-o.g)*c,this.b=o.b+(a.b-o.b)*c,this}lerpHSL(o,a){this.getHSL(Pi),o.getHSL(hh);const c=Os(Pi.h,hh.h,a),d=Os(Pi.s,hh.s,a),f=Os(Pi.l,hh.l,a);return this.setHSL(c,d,f),this}equals(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}fromArray(o,a=0){return this.r=o[a],this.g=o[a+1],this.b=o[a+2],this}toArray(o=[],a=0){return o[a]=this.r,o[a+1]=this.g,o[a+2]=this.b,o}fromBufferAttribute(o,a){return this.r=o.getX(a),this.g=o.getY(a),this.b=o.getZ(a),!0===o.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return h.NAMES=Qv,h})();ke.prototype.isColor=!0,ke.prototype.r=1,ke.prototype.g=1,ke.prototype.b=1;class Qo{static getDataURL(r){if(/^data:/i.test(r.src)||typeof HTMLCanvasElement>"u")return r.src;let o;if(r instanceof HTMLCanvasElement)o=r;else{void 0===Sl&&(Sl=Ls("canvas")),Sl.width=r.width,Sl.height=r.height;const a=Sl.getContext("2d");r instanceof ImageData?a.putImageData(r,0,0):a.drawImage(r,0,0,r.width,r.height),o=Sl}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",r),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(r){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const o=Ls("canvas");o.width=r.width,o.height=r.height;const a=o.getContext("2d");a.drawImage(r,0,0,r.width,r.height);const c=a.getImageData(0,0,r.width,r.height),d=c.data;for(let f=0;f<d.length;f++)d[f]=255*fc(d[f]/255);return a.putImageData(c,0,0),o}if(r.data){const o=r.data.slice(0);for(let a=0;a<o.length;a++)o[a]=o instanceof Uint8Array||o instanceof Uint8ClampedArray?Math.floor(255*fc(o[a]/255)):fc(o[a]);return{data:o,width:r.width,height:r.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),r}}let fh=0;class hr extends Ml{constructor(r=hr.DEFAULT_IMAGE,o=hr.DEFAULT_MAPPING,a=sr,c=sr,d=Wn,f=lo,g=Nr,v=hn,y=1,w=kt){super(),Object.defineProperty(this,"id",{value:fh++}),this.uuid=Ri(),this.name="",this.image=r,this.mipmaps=[],this.mapping=o,this.wrapS=a,this.wrapT=c,this.magFilter=d,this.minFilter=f,this.anisotropy=y,this.format=g,this.internalFormat=null,this.type=v,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=w,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(r){return this.name=r.name,this.image=r.image,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.internalFormat=r.internalFormat,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this.userData=JSON.parse(JSON.stringify(r.userData)),this}toJSON(r){const o=void 0===r||"string"==typeof r;if(!o&&void 0!==r.textures[this.uuid])return r.textures[this.uuid];const a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const c=this.image;if(void 0===c.uuid&&(c.uuid=Ri()),!o&&void 0===r.images[c.uuid]){let d;if(Array.isArray(c)){d=[];for(let f=0,g=c.length;f<g;f++)d.push(Kv(c[f].isDataTexture?c[f].image:c[f]))}else d=Kv(c);r.images[c.uuid]={uuid:c.uuid,url:d}}a.image=c.uuid}return"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),o||(r.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(r){if(300!==this.mapping)return r;if(r.applyMatrix3(this.matrix),r.x<0||r.x>1)switch(this.wrapS){case Ai:r.x=r.x-Math.floor(r.x);break;case sr:r.x=r.x<0?0:1;break;case xa:r.x=1===Math.abs(Math.floor(r.x)%2)?Math.ceil(r.x)-r.x:r.x-Math.floor(r.x)}if(r.y<0||r.y>1)switch(this.wrapT){case Ai:r.y=r.y-Math.floor(r.y);break;case sr:r.y=r.y<0?0:1;break;case xa:r.y=1===Math.abs(Math.floor(r.y)%2)?Math.ceil(r.y)-r.y:r.y-Math.floor(r.y)}return this.flipY&&(r.y=1-r.y),r}set needsUpdate(r){!0===r&&this.version++}}function Kv(h){return typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap?Qo.getDataURL(h):h.data?{data:Array.prototype.slice.call(h.data),width:h.width,height:h.height,type:h.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}hr.DEFAULT_IMAGE=void 0,hr.DEFAULT_MAPPING=300,hr.prototype.isTexture=!0;class Mn{constructor(r=0,o=0,a=0,c=1){this.x=r,this.y=o,this.z=a,this.w=c}get width(){return this.z}set width(r){this.z=r}get height(){return this.w}set height(r){this.w=r}set(r,o,a,c){return this.x=r,this.y=o,this.z=a,this.w=c,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setW(r){return this.w=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}add(r,o){return void 0!==o?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,o)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this.w=r.w+o.w,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this.w+=r.w*o,this}sub(r,o){return void 0!==o?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,o)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this.w=r.w-o.w,this}multiply(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}applyMatrix4(r){const o=this.x,a=this.y,c=this.z,d=this.w,f=r.elements;return this.x=f[0]*o+f[4]*a+f[8]*c+f[12]*d,this.y=f[1]*o+f[5]*a+f[9]*c+f[13]*d,this.z=f[2]*o+f[6]*a+f[10]*c+f[14]*d,this.w=f[3]*o+f[7]*a+f[11]*c+f[15]*d,this}divideScalar(r){return this.multiplyScalar(1/r)}setAxisAngleFromQuaternion(r){this.w=2*Math.acos(r.w);const o=Math.sqrt(1-r.w*r.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/o,this.y=r.y/o,this.z=r.z/o),this}setAxisAngleFromRotationMatrix(r){let o,a,c,d;const v=r.elements,y=v[0],w=v[4],b=v[8],x=v[1],M=v[5],C=v[9],D=v[2],R=v[6],T=v[10];if(Math.abs(w-x)<.01&&Math.abs(b-D)<.01&&Math.abs(C-R)<.01){if(Math.abs(w+x)<.1&&Math.abs(b+D)<.1&&Math.abs(C+R)<.1&&Math.abs(y+M+T-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const L=(y+1)/2,I=(M+1)/2,V=(T+1)/2,z=(w+x)/4,j=(b+D)/4,J=(C+R)/4;return L>I&&L>V?L<.01?(a=0,c=.707106781,d=.707106781):(a=Math.sqrt(L),c=z/a,d=j/a):I>V?I<.01?(a=.707106781,c=0,d=.707106781):(c=Math.sqrt(I),a=z/c,d=J/c):V<.01?(a=.707106781,c=.707106781,d=0):(d=Math.sqrt(V),a=j/d,c=J/d),this.set(a,c,d,o),this}let E=Math.sqrt((R-C)*(R-C)+(b-D)*(b-D)+(x-w)*(x-w));return Math.abs(E)<.001&&(E=1),this.x=(R-C)/E,this.y=(b-D)/E,this.z=(x-w)/E,this.w=Math.acos((y+M+T-1)/2),this}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this.w=Math.max(r.w,Math.min(o.w,this.w)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this.w=Math.max(r,Math.min(o,this.w)),this}clampLength(r,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this.w+=(r.w-this.w)*o,this}lerpVectors(r,o,a){return this.x=r.x+(o.x-r.x)*a,this.y=r.y+(o.y-r.y)*a,this.z=r.z+(o.z-r.z)*a,this.w=r.w+(o.w-r.w)*a,this}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this.w=r[o+3],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r[o+3]=this.w,r}fromBufferAttribute(r,o,a){return void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this.w=r.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Mn.prototype.isVector4=!0;class Eo extends Ml{constructor(r,o,a={}){super(),this.width=r,this.height=o,this.depth=1,this.scissor=new Mn(0,0,r,o),this.scissorTest=!1,this.viewport=new Mn(0,0,r,o),this.texture=new hr(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:r,height:o,depth:1},this.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,this.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,this.texture.minFilter=void 0!==a.minFilter?a.minFilter:Wn,this.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,this.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,this.depthTexture=void 0!==a.depthTexture?a.depthTexture:null}setTexture(r){r.image={width:this.width,height:this.height,depth:this.depth},this.texture=r}setSize(r,o,a=1){(this.width!==r||this.height!==o||this.depth!==a)&&(this.width=r,this.height=o,this.depth=a,this.texture.image.width=r,this.texture.image.height=o,this.texture.image.depth=a,this.dispose()),this.viewport.set(0,0,r,o),this.scissor.set(0,0,r,o)}clone(){return(new this.constructor).copy(this)}copy(r){return this.width=r.width,this.height=r.height,this.depth=r.depth,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.texture.image=Object.assign({},r.texture.image),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Eo.prototype.isWebGLRenderTarget=!0,class Zi extends Eo{constructor(r,o,a){super(r,o);const c=this.texture;this.texture=[];for(let d=0;d<a;d++)this.texture[d]=c.clone()}setSize(r,o,a=1){if(this.width!==r||this.height!==o||this.depth!==a){this.width=r,this.height=o,this.depth=a;for(let c=0,d=this.texture.length;c<d;c++)this.texture[c].image.width=r,this.texture[c].image.height=o,this.texture[c].image.depth=a;this.dispose()}return this.viewport.set(0,0,r,o),this.scissor.set(0,0,r,o),this}copy(r){this.dispose(),this.width=r.width,this.height=r.height,this.depth=r.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.texture.length=0;for(let o=0,a=r.texture.length;o<a;o++)this.texture[o]=r.texture[o].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Eu extends Eo{constructor(r,o,a={}){super(r,o,a),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===a.ignoreDepth||a.ignoreDepth,this.useRenderToTexture=void 0!==a.useRenderToTexture&&a.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(r){return super.copy.call(this,r),this.samples=r.samples,this.useRenderToTexture=r.useRenderToTexture,this.useRenderbuffer=r.useRenderbuffer,this}}Eu.prototype.isWebGLMultisampleRenderTarget=!0;class fr{constructor(r=0,o=0,a=0,c=1){this._x=r,this._y=o,this._z=a,this._w=c}static slerp(r,o,a,c){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),a.slerpQuaternions(r,o,c)}static slerpFlat(r,o,a,c,d,f,g){let v=a[c+0],y=a[c+1],w=a[c+2],b=a[c+3];const x=d[f+0],M=d[f+1],C=d[f+2],D=d[f+3];if(0===g)return r[o+0]=v,r[o+1]=y,r[o+2]=w,void(r[o+3]=b);if(1===g)return r[o+0]=x,r[o+1]=M,r[o+2]=C,void(r[o+3]=D);if(b!==D||v!==x||y!==M||w!==C){let R=1-g;const T=v*x+y*M+w*C+b*D,E=T>=0?1:-1,L=1-T*T;if(L>Number.EPSILON){const V=Math.sqrt(L),z=Math.atan2(V,T*E);R=Math.sin(R*z)/V,g=Math.sin(g*z)/V}const I=g*E;if(v=v*R+x*I,y=y*R+M*I,w=w*R+C*I,b=b*R+D*I,R===1-g){const V=1/Math.sqrt(v*v+y*y+w*w+b*b);v*=V,y*=V,w*=V,b*=V}}r[o]=v,r[o+1]=y,r[o+2]=w,r[o+3]=b}static multiplyQuaternionsFlat(r,o,a,c,d,f){const g=a[c],v=a[c+1],y=a[c+2],w=a[c+3],b=d[f],x=d[f+1],M=d[f+2],C=d[f+3];return r[o]=g*C+w*b+v*M-y*x,r[o+1]=v*C+w*x+y*b-g*M,r[o+2]=y*C+w*M+g*x-v*b,r[o+3]=w*C-g*b-v*x-y*M,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,o,a,c){return this._x=r,this._y=o,this._z=a,this._w=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,o){if(!r||!r.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const a=r._x,c=r._y,d=r._z,f=r._order,g=Math.cos,v=Math.sin,y=g(a/2),w=g(c/2),b=g(d/2),x=v(a/2),M=v(c/2),C=v(d/2);switch(f){case"XYZ":this._x=x*w*b+y*M*C,this._y=y*M*b-x*w*C,this._z=y*w*C+x*M*b,this._w=y*w*b-x*M*C;break;case"YXZ":this._x=x*w*b+y*M*C,this._y=y*M*b-x*w*C,this._z=y*w*C-x*M*b,this._w=y*w*b+x*M*C;break;case"ZXY":this._x=x*w*b-y*M*C,this._y=y*M*b+x*w*C,this._z=y*w*C+x*M*b,this._w=y*w*b-x*M*C;break;case"ZYX":this._x=x*w*b-y*M*C,this._y=y*M*b+x*w*C,this._z=y*w*C-x*M*b,this._w=y*w*b+x*M*C;break;case"YZX":this._x=x*w*b+y*M*C,this._y=y*M*b+x*w*C,this._z=y*w*C-x*M*b,this._w=y*w*b-x*M*C;break;case"XZY":this._x=x*w*b-y*M*C,this._y=y*M*b-x*w*C,this._z=y*w*C+x*M*b,this._w=y*w*b+x*M*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+f)}return!1!==o&&this._onChangeCallback(),this}setFromAxisAngle(r,o){const a=o/2,c=Math.sin(a);return this._x=r.x*c,this._y=r.y*c,this._z=r.z*c,this._w=Math.cos(a),this._onChangeCallback(),this}setFromRotationMatrix(r){const o=r.elements,a=o[0],c=o[4],d=o[8],f=o[1],g=o[5],v=o[9],y=o[2],w=o[6],b=o[10],x=a+g+b;if(x>0){const M=.5/Math.sqrt(x+1);this._w=.25/M,this._x=(w-v)*M,this._y=(d-y)*M,this._z=(f-c)*M}else if(a>g&&a>b){const M=2*Math.sqrt(1+a-g-b);this._w=(w-v)/M,this._x=.25*M,this._y=(c+f)/M,this._z=(d+y)/M}else if(g>b){const M=2*Math.sqrt(1+g-a-b);this._w=(d-y)/M,this._x=(c+f)/M,this._y=.25*M,this._z=(v+w)/M}else{const M=2*Math.sqrt(1+b-a-g);this._w=(f-c)/M,this._x=(d+y)/M,this._y=(v+w)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(r,o){let a=r.dot(o)+1;return a<Number.EPSILON?(a=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=a):(this._x=0,this._y=-r.z,this._z=r.y,this._w=a)):(this._x=r.y*o.z-r.z*o.y,this._y=r.z*o.x-r.x*o.z,this._z=r.x*o.y-r.y*o.x,this._w=a),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(pn(this.dot(r),-1,1)))}rotateTowards(r,o){const a=this.angleTo(r);if(0===a)return this;const c=Math.min(1,o/a);return this.slerp(r,c),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r,o){return void 0!==o?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,o)):this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,o){const a=r._x,c=r._y,d=r._z,f=r._w,g=o._x,v=o._y,y=o._z,w=o._w;return this._x=a*w+f*g+c*y-d*v,this._y=c*w+f*v+d*g-a*y,this._z=d*w+f*y+a*v-c*g,this._w=f*w-a*g-c*v-d*y,this._onChangeCallback(),this}slerp(r,o){if(0===o)return this;if(1===o)return this.copy(r);const a=this._x,c=this._y,d=this._z,f=this._w;let g=f*r._w+a*r._x+c*r._y+d*r._z;if(g<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,g=-g):this.copy(r),g>=1)return this._w=f,this._x=a,this._y=c,this._z=d,this;const v=1-g*g;if(v<=Number.EPSILON){const M=1-o;return this._w=M*f+o*this._w,this._x=M*a+o*this._x,this._y=M*c+o*this._y,this._z=M*d+o*this._z,this.normalize(),this._onChangeCallback(),this}const y=Math.sqrt(v),w=Math.atan2(y,g),b=Math.sin((1-o)*w)/y,x=Math.sin(o*w)/y;return this._w=f*b+this._w*x,this._x=a*b+this._x*x,this._y=c*b+this._y*x,this._z=d*b+this._z*x,this._onChangeCallback(),this}slerpQuaternions(r,o,a){return this.copy(r).slerp(o,a)}random(){const r=Math.random(),o=Math.sqrt(1-r),a=Math.sqrt(r),c=2*Math.PI*Math.random(),d=2*Math.PI*Math.random();return this.set(o*Math.cos(c),a*Math.sin(d),a*Math.cos(d),o*Math.sin(c))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,o=0){return this._x=r[o],this._y=r[o+1],this._z=r[o+2],this._w=r[o+3],this._onChangeCallback(),this}toArray(r=[],o=0){return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._w,r}fromBufferAttribute(r,o){return this._x=r.getX(o),this._y=r.getY(o),this._z=r.getZ(o),this._w=r.getW(o),this}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}}fr.prototype.isQuaternion=!0;class k{constructor(r=0,o=0,a=0){this.x=r,this.y=o,this.z=a}set(r,o,a){return void 0===a&&(a=this.z),this.x=r,this.y=o,this.z=a,this}setScalar(r){return this.x=r,this.y=r,this.z=r,this}setX(r){return this.x=r,this}setY(r){return this.y=r,this}setZ(r){return this.z=r,this}setComponent(r,o){switch(r){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+r)}return this}getComponent(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}add(r,o){return void 0!==o?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,o)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)}addScalar(r){return this.x+=r,this.y+=r,this.z+=r,this}addVectors(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this}addScaledVector(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o,this}sub(r,o){return void 0!==o?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,o)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)}subScalar(r){return this.x-=r,this.y-=r,this.z-=r,this}subVectors(r,o){return this.x=r.x-o.x,this.y=r.y-o.y,this.z=r.z-o.z,this}multiply(r,o){return void 0!==o?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,o)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)}multiplyScalar(r){return this.x*=r,this.y*=r,this.z*=r,this}multiplyVectors(r,o){return this.x=r.x*o.x,this.y=r.y*o.y,this.z=r.z*o.z,this}applyEuler(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(So.setFromEuler(r))}applyAxisAngle(r,o){return this.applyQuaternion(So.setFromAxisAngle(r,o))}applyMatrix3(r){const o=this.x,a=this.y,c=this.z,d=r.elements;return this.x=d[0]*o+d[3]*a+d[6]*c,this.y=d[1]*o+d[4]*a+d[7]*c,this.z=d[2]*o+d[5]*a+d[8]*c,this}applyNormalMatrix(r){return this.applyMatrix3(r).normalize()}applyMatrix4(r){const o=this.x,a=this.y,c=this.z,d=r.elements,f=1/(d[3]*o+d[7]*a+d[11]*c+d[15]);return this.x=(d[0]*o+d[4]*a+d[8]*c+d[12])*f,this.y=(d[1]*o+d[5]*a+d[9]*c+d[13])*f,this.z=(d[2]*o+d[6]*a+d[10]*c+d[14])*f,this}applyQuaternion(r){const o=this.x,a=this.y,c=this.z,d=r.x,f=r.y,g=r.z,v=r.w,y=v*o+f*c-g*a,w=v*a+g*o-d*c,b=v*c+d*a-f*o,x=-d*o-f*a-g*c;return this.x=y*v+x*-d+w*-g-b*-f,this.y=w*v+x*-f+b*-d-y*-g,this.z=b*v+x*-g+y*-f-w*-d,this}project(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}unproject(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}transformDirection(r){const o=this.x,a=this.y,c=this.z,d=r.elements;return this.x=d[0]*o+d[4]*a+d[8]*c,this.y=d[1]*o+d[5]*a+d[9]*c,this.z=d[2]*o+d[6]*a+d[10]*c,this.normalize()}divide(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}divideScalar(r){return this.multiplyScalar(1/r)}min(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}max(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}clamp(r,o){return this.x=Math.max(r.x,Math.min(o.x,this.x)),this.y=Math.max(r.y,Math.min(o.y,this.y)),this.z=Math.max(r.z,Math.min(o.z,this.z)),this}clampScalar(r,o){return this.x=Math.max(r,Math.min(o,this.x)),this.y=Math.max(r,Math.min(o,this.y)),this.z=Math.max(r,Math.min(o,this.z)),this}clampLength(r,o){const a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(r,Math.min(o,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(r){return this.x*r.x+this.y*r.y+this.z*r.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(r){return this.normalize().multiplyScalar(r)}lerp(r,o){return this.x+=(r.x-this.x)*o,this.y+=(r.y-this.y)*o,this.z+=(r.z-this.z)*o,this}lerpVectors(r,o,a){return this.x=r.x+(o.x-r.x)*a,this.y=r.y+(o.y-r.y)*a,this.z=r.z+(o.z-r.z)*a,this}cross(r,o){return void 0!==o?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,o)):this.crossVectors(this,r)}crossVectors(r,o){const a=r.x,c=r.y,d=r.z,f=o.x,g=o.y,v=o.z;return this.x=c*v-d*g,this.y=d*f-a*v,this.z=a*g-c*f,this}projectOnVector(r){const o=r.lengthSq();if(0===o)return this.set(0,0,0);const a=r.dot(this)/o;return this.copy(r).multiplyScalar(a)}projectOnPlane(r){return ph.copy(this).projectOnVector(r),this.sub(ph)}reflect(r){return this.sub(ph.copy(r).multiplyScalar(2*this.dot(r)))}angleTo(r){const o=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===o)return Math.PI/2;const a=this.dot(r)/o;return Math.acos(pn(a,-1,1))}distanceTo(r){return Math.sqrt(this.distanceToSquared(r))}distanceToSquared(r){const o=this.x-r.x,a=this.y-r.y,c=this.z-r.z;return o*o+a*a+c*c}manhattanDistanceTo(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}setFromSpherical(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}setFromSphericalCoords(r,o,a){const c=Math.sin(o)*r;return this.x=c*Math.sin(a),this.y=Math.cos(o)*r,this.z=c*Math.cos(a),this}setFromCylindrical(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}setFromCylindricalCoords(r,o,a){return this.x=r*Math.sin(o),this.y=a,this.z=r*Math.cos(o),this}setFromMatrixPosition(r){const o=r.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(r){const o=this.setFromMatrixColumn(r,0).length(),a=this.setFromMatrixColumn(r,1).length(),c=this.setFromMatrixColumn(r,2).length();return this.x=o,this.y=a,this.z=c,this}setFromMatrixColumn(r,o){return this.fromArray(r.elements,4*o)}setFromMatrix3Column(r,o){return this.fromArray(r.elements,3*o)}equals(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}fromArray(r,o=0){return this.x=r[o],this.y=r[o+1],this.z=r[o+2],this}toArray(r=[],o=0){return r[o]=this.x,r[o+1]=this.y,r[o+2]=this.z,r}fromBufferAttribute(r,o,a){return void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(o),this.y=r.getY(o),this.z=r.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const r=2*(Math.random()-.5),o=Math.random()*Math.PI*2,a=Math.sqrt(1-r**2);return this.x=a*Math.cos(o),this.y=a*Math.sin(o),this.z=r,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}k.prototype.isVector3=!0;const ph=new k,So=new fr;class Ct{constructor(r=new k(1/0,1/0,1/0),o=new k(-1/0,-1/0,-1/0)){this.min=r,this.max=o}set(r,o){return this.min.copy(r),this.max.copy(o),this}setFromArray(r){let o=1/0,a=1/0,c=1/0,d=-1/0,f=-1/0,g=-1/0;for(let v=0,y=r.length;v<y;v+=3){const w=r[v],b=r[v+1],x=r[v+2];w<o&&(o=w),b<a&&(a=b),x<c&&(c=x),w>d&&(d=w),b>f&&(f=b),x>g&&(g=x)}return this.min.set(o,a,c),this.max.set(d,f,g),this}setFromBufferAttribute(r){let o=1/0,a=1/0,c=1/0,d=-1/0,f=-1/0,g=-1/0;for(let v=0,y=r.count;v<y;v++){const w=r.getX(v),b=r.getY(v),x=r.getZ(v);w<o&&(o=w),b<a&&(a=b),x<c&&(c=x),w>d&&(d=w),b>f&&(f=b),x>g&&(g=x)}return this.min.set(o,a,c),this.max.set(d,f,g),this}setFromPoints(r){this.makeEmpty();for(let o=0,a=r.length;o<a;o++)this.expandByPoint(r[o]);return this}setFromCenterAndSize(r,o){const a=Da.copy(o).multiplyScalar(.5);return this.min.copy(r).sub(a),this.max.copy(r).add(a),this}setFromObject(r,o=!1){return this.makeEmpty(),this.expandByObject(r,o)}clone(){return(new this.constructor).copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,o=!1){r.updateWorldMatrix(!1,!1);const a=r.geometry;if(void 0!==a)if(o&&null!=a.attributes&&void 0!==a.attributes.position){const d=a.attributes.position;for(let f=0,g=d.count;f<g;f++)Da.fromBufferAttribute(d,f).applyMatrix4(r.matrixWorld),this.expandByPoint(Da)}else null===a.boundingBox&&a.computeBoundingBox(),Su.copy(a.boundingBox),Su.applyMatrix4(r.matrixWorld),this.union(Su);const c=r.children;for(let d=0,f=c.length;d<f;d++)this.expandByObject(c[d],o);return this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,o){return o.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)}intersectsSphere(r){return this.clampPoint(r.center,Da),Da.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let o,a;return r.normal.x>0?(o=r.normal.x*this.min.x,a=r.normal.x*this.max.x):(o=r.normal.x*this.max.x,a=r.normal.x*this.min.x),r.normal.y>0?(o+=r.normal.y*this.min.y,a+=r.normal.y*this.max.y):(o+=r.normal.y*this.max.y,a+=r.normal.y*this.min.y),r.normal.z>0?(o+=r.normal.z*this.min.z,a+=r.normal.z*this.max.z):(o+=r.normal.z*this.max.z,a+=r.normal.z*this.min.z),o<=-r.constant&&a>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(pc),Cu.subVectors(this.max,pc),ks.subVectors(r.a,pc),Vs.subVectors(r.b,pc),ui.subVectors(r.c,pc),an.subVectors(Vs,ks),Aa.subVectors(ui,Vs),Bs.subVectors(ks,ui);let o=[0,-an.z,an.y,0,-Aa.z,Aa.y,0,-Bs.z,Bs.y,an.z,0,-an.x,Aa.z,0,-Aa.x,Bs.z,0,-Bs.x,-an.y,an.x,0,-Aa.y,Aa.x,0,-Bs.y,Bs.x,0];return!(!gh(o,ks,Vs,ui,Cu)||(o=[1,0,0,0,1,0,0,0,1],!gh(o,ks,Vs,ui,Cu)))&&(Ia.crossVectors(an,Aa),o=[Ia.x,Ia.y,Ia.z],gh(o,ks,Vs,ui,Cu))}clampPoint(r,o){return o.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return Da.copy(r).clamp(this.min,this.max).sub(r).length()}getBoundingSphere(r){return this.getCenter(r.center),r.radius=.5*this.getSize(Da).length(),r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()||(bi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),bi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),bi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),bi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),bi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),bi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),bi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),bi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(bi)),this}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}Ct.prototype.isBox3=!0;const bi=[new k,new k,new k,new k,new k,new k,new k,new k],Da=new k,Su=new Ct,ks=new k,Vs=new k,ui=new k,an=new k,Aa=new k,Bs=new k,pc=new k,Cu=new k,Ia=new k,Ra=new k;function gh(h,r,o,a,c){for(let d=0,f=h.length-3;d<=f;d+=3){Ra.fromArray(h,d);const g=c.x*Math.abs(Ra.x)+c.y*Math.abs(Ra.y)+c.z*Math.abs(Ra.z),v=r.dot(Ra),y=o.dot(Ra),w=a.dot(Ra);if(Math.max(-Math.max(v,y,w),Math.min(v,y,w))>g)return!1}return!0}const Q0=new Ct,mh=new k,vh=new k,Zp=new k;class jr{constructor(r=new k,o=-1){this.center=r,this.radius=o}set(r,o){return this.center.copy(r),this.radius=o,this}setFromPoints(r,o){const a=this.center;void 0!==o?a.copy(o):Q0.setFromPoints(r).getCenter(a);let c=0;for(let d=0,f=r.length;d<f;d++)c=Math.max(c,a.distanceToSquared(r[d]));return this.radius=Math.sqrt(c),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const o=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=o*o}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,o){const a=this.center.distanceToSquared(r);return o.copy(r),a>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){Zp.subVectors(r,this.center);const o=Zp.lengthSq();if(o>this.radius*this.radius){const a=Math.sqrt(o),c=.5*(a-this.radius);this.center.add(Zp.multiplyScalar(c/a)),this.radius+=c}return this}union(r){return!0===this.center.equals(r.center)?vh.set(0,0,1).multiplyScalar(r.radius):vh.subVectors(r.center,this.center).normalize().multiplyScalar(r.radius),this.expandByPoint(mh.copy(r.center).add(vh)),this.expandByPoint(mh.copy(r.center).sub(vh)),this}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Us=new k,yh=new k,_h=new k,Pa=new k,Jp=new k,bh=new k,wh=new k;class Cl{constructor(r=new k,o=new k(0,0,-1)){this.origin=r,this.direction=o}set(r,o){return this.origin.copy(r),this.direction.copy(o),this}copy(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this}at(r,o){return o.copy(this.direction).multiplyScalar(r).add(this.origin)}lookAt(r){return this.direction.copy(r).sub(this.origin).normalize(),this}recast(r){return this.origin.copy(this.at(r,Us)),this}closestPointToPoint(r,o){o.subVectors(r,this.origin);const a=o.dot(this.direction);return a<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(a).add(this.origin)}distanceToPoint(r){return Math.sqrt(this.distanceSqToPoint(r))}distanceSqToPoint(r){const o=Us.subVectors(r,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(r):(Us.copy(this.direction).multiplyScalar(o).add(this.origin),Us.distanceToSquared(r))}distanceSqToSegment(r,o,a,c){yh.copy(r).add(o).multiplyScalar(.5),_h.copy(o).sub(r).normalize(),Pa.copy(this.origin).sub(yh);const d=.5*r.distanceTo(o),f=-this.direction.dot(_h),g=Pa.dot(this.direction),v=-Pa.dot(_h),y=Pa.lengthSq(),w=Math.abs(1-f*f);let b,x,M,C;if(w>0)if(b=f*v-g,x=f*g-v,C=d*w,b>=0)if(x>=-C)if(x<=C){const D=1/w;b*=D,x*=D,M=b*(b+f*x+2*g)+x*(f*b+x+2*v)+y}else x=d,b=Math.max(0,-(f*x+g)),M=-b*b+x*(x+2*v)+y;else x=-d,b=Math.max(0,-(f*x+g)),M=-b*b+x*(x+2*v)+y;else x<=-C?(b=Math.max(0,-(-f*d+g)),x=b>0?-d:Math.min(Math.max(-d,-v),d),M=-b*b+x*(x+2*v)+y):x<=C?(b=0,x=Math.min(Math.max(-d,-v),d),M=x*(x+2*v)+y):(b=Math.max(0,-(f*d+g)),x=b>0?d:Math.min(Math.max(-d,-v),d),M=-b*b+x*(x+2*v)+y);else x=f>0?-d:d,b=Math.max(0,-(f*x+g)),M=-b*b+x*(x+2*v)+y;return a&&a.copy(this.direction).multiplyScalar(b).add(this.origin),c&&c.copy(_h).multiplyScalar(x).add(yh),M}intersectSphere(r,o){Us.subVectors(r.center,this.origin);const a=Us.dot(this.direction),c=Us.dot(Us)-a*a,d=r.radius*r.radius;if(c>d)return null;const f=Math.sqrt(d-c),g=a-f,v=a+f;return g<0&&v<0?null:this.at(g<0?v:g,o)}intersectsSphere(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius}distanceToPlane(r){const o=r.normal.dot(this.direction);if(0===o)return 0===r.distanceToPoint(this.origin)?0:null;const a=-(this.origin.dot(r.normal)+r.constant)/o;return a>=0?a:null}intersectPlane(r,o){const a=this.distanceToPlane(r);return null===a?null:this.at(a,o)}intersectsPlane(r){const o=r.distanceToPoint(this.origin);return 0===o||r.normal.dot(this.direction)*o<0}intersectBox(r,o){let a,c,d,f,g,v;const y=1/this.direction.x,w=1/this.direction.y,b=1/this.direction.z,x=this.origin;return y>=0?(a=(r.min.x-x.x)*y,c=(r.max.x-x.x)*y):(a=(r.max.x-x.x)*y,c=(r.min.x-x.x)*y),w>=0?(d=(r.min.y-x.y)*w,f=(r.max.y-x.y)*w):(d=(r.max.y-x.y)*w,f=(r.min.y-x.y)*w),a>f||d>c||((d>a||a!=a)&&(a=d),(f<c||c!=c)&&(c=f),b>=0?(g=(r.min.z-x.z)*b,v=(r.max.z-x.z)*b):(g=(r.max.z-x.z)*b,v=(r.min.z-x.z)*b),a>v||g>c)||((g>a||a!=a)&&(a=g),(v<c||c!=c)&&(c=v),c<0)?null:this.at(a>=0?a:c,o)}intersectsBox(r){return null!==this.intersectBox(r,Us)}intersectTriangle(r,o,a,c,d){Jp.subVectors(o,r),bh.subVectors(a,r),wh.crossVectors(Jp,bh);let g,f=this.direction.dot(wh);if(f>0){if(c)return null;g=1}else{if(!(f<0))return null;g=-1,f=-f}Pa.subVectors(this.origin,r);const v=g*this.direction.dot(bh.crossVectors(Pa,bh));if(v<0)return null;const y=g*this.direction.dot(Jp.cross(Pa));if(y<0||v+y>f)return null;const w=-g*Pa.dot(wh);return w<0?null:this.at(w/f,d)}applyMatrix4(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this}equals(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Je{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(r,o,a,c,d,f,g,v,y,w,b,x,M,C,D,R){const T=this.elements;return T[0]=r,T[4]=o,T[8]=a,T[12]=c,T[1]=d,T[5]=f,T[9]=g,T[13]=v,T[2]=y,T[6]=w,T[10]=b,T[14]=x,T[3]=M,T[7]=C,T[11]=D,T[15]=R,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Je).fromArray(this.elements)}copy(r){const o=this.elements,a=r.elements;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],this}copyPosition(r){const o=this.elements,a=r.elements;return o[12]=a[12],o[13]=a[13],o[14]=a[14],this}setFromMatrix3(r){const o=r.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(r,o,a){return r.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(r,o,a){return this.set(r.x,o.x,a.x,0,r.y,o.y,a.y,0,r.z,o.z,a.z,0,0,0,0,1),this}extractRotation(r){const o=this.elements,a=r.elements,c=1/gc.setFromMatrixColumn(r,0).length(),d=1/gc.setFromMatrixColumn(r,1).length(),f=1/gc.setFromMatrixColumn(r,2).length();return o[0]=a[0]*c,o[1]=a[1]*c,o[2]=a[2]*c,o[3]=0,o[4]=a[4]*d,o[5]=a[5]*d,o[6]=a[6]*d,o[7]=0,o[8]=a[8]*f,o[9]=a[9]*f,o[10]=a[10]*f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(r){r&&r.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const o=this.elements,a=r.x,c=r.y,d=r.z,f=Math.cos(a),g=Math.sin(a),v=Math.cos(c),y=Math.sin(c),w=Math.cos(d),b=Math.sin(d);if("XYZ"===r.order){const x=f*w,M=f*b,C=g*w,D=g*b;o[0]=v*w,o[4]=-v*b,o[8]=y,o[1]=M+C*y,o[5]=x-D*y,o[9]=-g*v,o[2]=D-x*y,o[6]=C+M*y,o[10]=f*v}else if("YXZ"===r.order){const x=v*w,M=v*b,C=y*w,D=y*b;o[0]=x+D*g,o[4]=C*g-M,o[8]=f*y,o[1]=f*b,o[5]=f*w,o[9]=-g,o[2]=M*g-C,o[6]=D+x*g,o[10]=f*v}else if("ZXY"===r.order){const x=v*w,M=v*b,C=y*w,D=y*b;o[0]=x-D*g,o[4]=-f*b,o[8]=C+M*g,o[1]=M+C*g,o[5]=f*w,o[9]=D-x*g,o[2]=-f*y,o[6]=g,o[10]=f*v}else if("ZYX"===r.order){const x=f*w,M=f*b,C=g*w,D=g*b;o[0]=v*w,o[4]=C*y-M,o[8]=x*y+D,o[1]=v*b,o[5]=D*y+x,o[9]=M*y-C,o[2]=-y,o[6]=g*v,o[10]=f*v}else if("YZX"===r.order){const x=f*v,M=f*y,C=g*v,D=g*y;o[0]=v*w,o[4]=D-x*b,o[8]=C*b+M,o[1]=b,o[5]=f*w,o[9]=-g*w,o[2]=-y*w,o[6]=M*b+C,o[10]=x-D*b}else if("XZY"===r.order){const x=f*v,M=f*y,C=g*v,D=g*y;o[0]=v*w,o[4]=-b,o[8]=y*w,o[1]=x*b+D,o[5]=f*w,o[9]=M*b-C,o[2]=C*b-M,o[6]=g*w,o[10]=D*b+x}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(r){return this.compose(K0,r,ew)}lookAt(r,o,a){const c=this.elements;return Ke.subVectors(r,o),0===Ke.lengthSq()&&(Ke.z=1),Ke.normalize(),_r.crossVectors(a,Ke),0===_r.lengthSq()&&(1===Math.abs(a.z)?Ke.x+=1e-4:Ke.z+=1e-4,Ke.normalize(),_r.crossVectors(a,Ke)),_r.normalize(),Tu.crossVectors(Ke,_r),c[0]=_r.x,c[4]=Tu.x,c[8]=Ke.x,c[1]=_r.y,c[5]=Tu.y,c[9]=Ke.y,c[2]=_r.z,c[6]=Tu.z,c[10]=Ke.z,this}multiply(r,o){return void 0!==o?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,o)):this.multiplyMatrices(this,r)}premultiply(r){return this.multiplyMatrices(r,this)}multiplyMatrices(r,o){const a=r.elements,c=o.elements,d=this.elements,f=a[0],g=a[4],v=a[8],y=a[12],w=a[1],b=a[5],x=a[9],M=a[13],C=a[2],D=a[6],R=a[10],T=a[14],E=a[3],L=a[7],I=a[11],V=a[15],z=c[0],j=c[4],J=c[8],he=c[12],oe=c[1],N=c[5],q=c[9],K=c[13],ie=c[2],le=c[6],te=c[10],ve=c[14],Ie=c[3],Ze=c[7],_e=c[11],De=c[15];return d[0]=f*z+g*oe+v*ie+y*Ie,d[4]=f*j+g*N+v*le+y*Ze,d[8]=f*J+g*q+v*te+y*_e,d[12]=f*he+g*K+v*ve+y*De,d[1]=w*z+b*oe+x*ie+M*Ie,d[5]=w*j+b*N+x*le+M*Ze,d[9]=w*J+b*q+x*te+M*_e,d[13]=w*he+b*K+x*ve+M*De,d[2]=C*z+D*oe+R*ie+T*Ie,d[6]=C*j+D*N+R*le+T*Ze,d[10]=C*J+D*q+R*te+T*_e,d[14]=C*he+D*K+R*ve+T*De,d[3]=E*z+L*oe+I*ie+V*Ie,d[7]=E*j+L*N+I*le+V*Ze,d[11]=E*J+L*q+I*te+V*_e,d[15]=E*he+L*K+I*ve+V*De,this}multiplyScalar(r){const o=this.elements;return o[0]*=r,o[4]*=r,o[8]*=r,o[12]*=r,o[1]*=r,o[5]*=r,o[9]*=r,o[13]*=r,o[2]*=r,o[6]*=r,o[10]*=r,o[14]*=r,o[3]*=r,o[7]*=r,o[11]*=r,o[15]*=r,this}determinant(){const r=this.elements,o=r[0],a=r[4],c=r[8],d=r[12],f=r[1],g=r[5],v=r[9],y=r[13],w=r[2],b=r[6],x=r[10],M=r[14];return r[3]*(+d*v*b-c*y*b-d*g*x+a*y*x+c*g*M-a*v*M)+r[7]*(+o*v*M-o*y*x+d*f*x-c*f*M+c*y*w-d*v*w)+r[11]*(+o*y*b-o*g*M-d*f*b+a*f*M+d*g*w-a*y*w)+r[15]*(-c*g*w-o*v*b+o*g*x+c*f*b-a*f*x+a*v*w)}transpose(){const r=this.elements;let o;return o=r[1],r[1]=r[4],r[4]=o,o=r[2],r[2]=r[8],r[8]=o,o=r[6],r[6]=r[9],r[9]=o,o=r[3],r[3]=r[12],r[12]=o,o=r[7],r[7]=r[13],r[13]=o,o=r[11],r[11]=r[14],r[14]=o,this}setPosition(r,o,a){const c=this.elements;return r.isVector3?(c[12]=r.x,c[13]=r.y,c[14]=r.z):(c[12]=r,c[13]=o,c[14]=a),this}invert(){const r=this.elements,o=r[0],a=r[1],c=r[2],d=r[3],f=r[4],g=r[5],v=r[6],y=r[7],w=r[8],b=r[9],x=r[10],M=r[11],C=r[12],D=r[13],R=r[14],T=r[15],E=b*R*y-D*x*y+D*v*M-g*R*M-b*v*T+g*x*T,L=C*x*y-w*R*y-C*v*M+f*R*M+w*v*T-f*x*T,I=w*D*y-C*b*y+C*g*M-f*D*M-w*g*T+f*b*T,V=C*b*v-w*D*v-C*g*x+f*D*x+w*g*R-f*b*R,z=o*E+a*L+c*I+d*V;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/z;return r[0]=E*j,r[1]=(D*x*d-b*R*d-D*c*M+a*R*M+b*c*T-a*x*T)*j,r[2]=(g*R*d-D*v*d+D*c*y-a*R*y-g*c*T+a*v*T)*j,r[3]=(b*v*d-g*x*d-b*c*y+a*x*y+g*c*M-a*v*M)*j,r[4]=L*j,r[5]=(w*R*d-C*x*d+C*c*M-o*R*M-w*c*T+o*x*T)*j,r[6]=(C*v*d-f*R*d-C*c*y+o*R*y+f*c*T-o*v*T)*j,r[7]=(f*x*d-w*v*d+w*c*y-o*x*y-f*c*M+o*v*M)*j,r[8]=I*j,r[9]=(C*b*d-w*D*d-C*a*M+o*D*M+w*a*T-o*b*T)*j,r[10]=(f*D*d-C*g*d+C*a*y-o*D*y-f*a*T+o*g*T)*j,r[11]=(w*g*d-f*b*d-w*a*y+o*b*y+f*a*M-o*g*M)*j,r[12]=V*j,r[13]=(w*D*c-C*b*c+C*a*x-o*D*x-w*a*R+o*b*R)*j,r[14]=(C*g*c-f*D*c-C*a*v+o*D*v+f*a*R-o*g*R)*j,r[15]=(f*b*c-w*g*c+w*a*v-o*b*v-f*a*x+o*g*x)*j,this}scale(r){const o=this.elements,a=r.x,c=r.y,d=r.z;return o[0]*=a,o[4]*=c,o[8]*=d,o[1]*=a,o[5]*=c,o[9]*=d,o[2]*=a,o[6]*=c,o[10]*=d,o[3]*=a,o[7]*=c,o[11]*=d,this}getMaxScaleOnAxis(){const r=this.elements;return Math.sqrt(Math.max(r[0]*r[0]+r[1]*r[1]+r[2]*r[2],r[4]*r[4]+r[5]*r[5]+r[6]*r[6],r[8]*r[8]+r[9]*r[9]+r[10]*r[10]))}makeTranslation(r,o,a){return this.set(1,0,0,r,0,1,0,o,0,0,1,a,0,0,0,1),this}makeRotationX(r){const o=Math.cos(r),a=Math.sin(r);return this.set(1,0,0,0,0,o,-a,0,0,a,o,0,0,0,0,1),this}makeRotationY(r){const o=Math.cos(r),a=Math.sin(r);return this.set(o,0,a,0,0,1,0,0,-a,0,o,0,0,0,0,1),this}makeRotationZ(r){const o=Math.cos(r),a=Math.sin(r);return this.set(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(r,o){const a=Math.cos(o),c=Math.sin(o),d=1-a,f=r.x,g=r.y,v=r.z,y=d*f,w=d*g;return this.set(y*f+a,y*g-c*v,y*v+c*g,0,y*g+c*v,w*g+a,w*v-c*f,0,y*v-c*g,w*v+c*f,d*v*v+a,0,0,0,0,1),this}makeScale(r,o,a){return this.set(r,0,0,0,0,o,0,0,0,0,a,0,0,0,0,1),this}makeShear(r,o,a,c,d,f){return this.set(1,a,d,0,r,1,f,0,o,c,1,0,0,0,0,1),this}compose(r,o,a){const c=this.elements,d=o._x,f=o._y,g=o._z,v=o._w,y=d+d,w=f+f,b=g+g,x=d*y,M=d*w,C=d*b,D=f*w,R=f*b,T=g*b,E=v*y,L=v*w,I=v*b,V=a.x,z=a.y,j=a.z;return c[0]=(1-(D+T))*V,c[1]=(M+I)*V,c[2]=(C-L)*V,c[3]=0,c[4]=(M-I)*z,c[5]=(1-(x+T))*z,c[6]=(R+E)*z,c[7]=0,c[8]=(C+L)*j,c[9]=(R-E)*j,c[10]=(1-(x+D))*j,c[11]=0,c[12]=r.x,c[13]=r.y,c[14]=r.z,c[15]=1,this}decompose(r,o,a){const c=this.elements;let d=gc.set(c[0],c[1],c[2]).length();const f=gc.set(c[4],c[5],c[6]).length(),g=gc.set(c[8],c[9],c[10]).length();this.determinant()<0&&(d=-d),r.x=c[12],r.y=c[13],r.z=c[14],ln.copy(this);const y=1/d,w=1/f,b=1/g;return ln.elements[0]*=y,ln.elements[1]*=y,ln.elements[2]*=y,ln.elements[4]*=w,ln.elements[5]*=w,ln.elements[6]*=w,ln.elements[8]*=b,ln.elements[9]*=b,ln.elements[10]*=b,o.setFromRotationMatrix(ln),a.x=d,a.y=f,a.z=g,this}makePerspective(r,o,a,c,d,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const g=this.elements,y=2*d/(a-c),w=(o+r)/(o-r),b=(a+c)/(a-c),x=-(f+d)/(f-d),M=-2*f*d/(f-d);return g[0]=2*d/(o-r),g[4]=0,g[8]=w,g[12]=0,g[1]=0,g[5]=y,g[9]=b,g[13]=0,g[2]=0,g[6]=0,g[10]=x,g[14]=M,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(r,o,a,c,d,f){const g=this.elements,v=1/(o-r),y=1/(a-c),w=1/(f-d),b=(o+r)*v,x=(a+c)*y,M=(f+d)*w;return g[0]=2*v,g[4]=0,g[8]=0,g[12]=-b,g[1]=0,g[5]=2*y,g[9]=0,g[13]=-x,g[2]=0,g[6]=0,g[10]=-2*w,g[14]=-M,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(r){const o=this.elements,a=r.elements;for(let c=0;c<16;c++)if(o[c]!==a[c])return!1;return!0}fromArray(r,o=0){for(let a=0;a<16;a++)this.elements[a]=r[a+o];return this}toArray(r=[],o=0){const a=this.elements;return r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2],r[o+3]=a[3],r[o+4]=a[4],r[o+5]=a[5],r[o+6]=a[6],r[o+7]=a[7],r[o+8]=a[8],r[o+9]=a[9],r[o+10]=a[10],r[o+11]=a[11],r[o+12]=a[12],r[o+13]=a[13],r[o+14]=a[14],r[o+15]=a[15],r}}Je.prototype.isMatrix4=!0;const gc=new k,ln=new Je,K0=new k(0,0,0),ew=new k(1,1,1),_r=new k,Tu=new k,Ke=new k,di=new Je,Ut=new fr;class Yn{constructor(r=0,o=0,a=0,c=Yn.DefaultOrder){this._x=r,this._y=o,this._z=a,this._order=c}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get order(){return this._order}set order(r){this._order=r,this._onChangeCallback()}set(r,o,a,c=this._order){return this._x=r,this._y=o,this._z=a,this._order=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this}setFromRotationMatrix(r,o=this._order,a=!0){const c=r.elements,d=c[0],f=c[4],g=c[8],v=c[1],y=c[5],w=c[9],b=c[2],x=c[6],M=c[10];switch(o){case"XYZ":this._y=Math.asin(pn(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-w,M),this._z=Math.atan2(-f,d)):(this._x=Math.atan2(x,y),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(g,M),this._z=Math.atan2(v,y)):(this._y=Math.atan2(-b,d),this._z=0);break;case"ZXY":this._x=Math.asin(pn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-b,M),this._z=Math.atan2(-f,y)):(this._y=0,this._z=Math.atan2(v,d));break;case"ZYX":this._y=Math.asin(-pn(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(x,M),this._z=Math.atan2(v,d)):(this._x=0,this._z=Math.atan2(-f,y));break;case"YZX":this._z=Math.asin(pn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(-w,y),this._y=Math.atan2(-b,d)):(this._x=0,this._y=Math.atan2(g,M));break;case"XZY":this._z=Math.asin(-pn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(x,y),this._y=Math.atan2(g,d)):(this._x=Math.atan2(-w,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,!0===a&&this._onChangeCallback(),this}setFromQuaternion(r,o,a){return di.makeRotationFromQuaternion(r),this.setFromRotationMatrix(di,o,a)}setFromVector3(r,o=this._order){return this.set(r.x,r.y,r.z,o)}reorder(r){return Ut.setFromEuler(this),this.setFromQuaternion(Ut,r)}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order}fromArray(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this._onChangeCallback(),this}toArray(r=[],o=0){return r[o]=this._x,r[o+1]=this._y,r[o+2]=this._z,r[o+3]=this._order,r}toVector3(r){return r?r.set(this._x,this._y,this._z):new k(this._x,this._y,this._z)}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}}Yn.prototype.isEuler=!0,Yn.DefaultOrder="XYZ",Yn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Lr{constructor(){this.mask=1}set(r){this.mask=1<<r>>>0}enable(r){this.mask|=1<<r}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r}disable(r){this.mask&=~(1<<r)}disableAll(){this.mask=0}test(r){return!!(this.mask&r.mask)}isEnabled(r){return!!(this.mask&1<<r)}}let Na=0;const ei=new k,Tl=new fr,Ko=new Je,Dl=new k,Du=new k,tw=new k,Au=new fr,ey=new k(1,0,0),xh=new k(0,1,0),Qp=new k(0,0,1),Mh={type:"added"},nw={type:"removed"};class Gt extends Ml{constructor(){super(),Object.defineProperty(this,"id",{value:Na++}),this.uuid=Ri(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DefaultUp.clone();const r=new k,o=new Yn,a=new fr,c=new k(1,1,1);o._onChange(function d(){a.setFromEuler(o,!1)}),a._onChange(function f(){o.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new Je},normalMatrix:{value:new Wr}}),this.matrix=new Je,this.matrixWorld=new Je,this.matrixAutoUpdate=Gt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Lr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(r){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(r),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(r){return this.quaternion.premultiply(r),this}setRotationFromAxisAngle(r,o){this.quaternion.setFromAxisAngle(r,o)}setRotationFromEuler(r){this.quaternion.setFromEuler(r,!0)}setRotationFromMatrix(r){this.quaternion.setFromRotationMatrix(r)}setRotationFromQuaternion(r){this.quaternion.copy(r)}rotateOnAxis(r,o){return Tl.setFromAxisAngle(r,o),this.quaternion.multiply(Tl),this}rotateOnWorldAxis(r,o){return Tl.setFromAxisAngle(r,o),this.quaternion.premultiply(Tl),this}rotateX(r){return this.rotateOnAxis(ey,r)}rotateY(r){return this.rotateOnAxis(xh,r)}rotateZ(r){return this.rotateOnAxis(Qp,r)}translateOnAxis(r,o){return ei.copy(r).applyQuaternion(this.quaternion),this.position.add(ei.multiplyScalar(o)),this}translateX(r){return this.translateOnAxis(ey,r)}translateY(r){return this.translateOnAxis(xh,r)}translateZ(r){return this.translateOnAxis(Qp,r)}localToWorld(r){return r.applyMatrix4(this.matrixWorld)}worldToLocal(r){return r.applyMatrix4(Ko.copy(this.matrixWorld).invert())}lookAt(r,o,a){r.isVector3?Dl.copy(r):Dl.set(r,o,a);const c=this.parent;this.updateWorldMatrix(!0,!1),Du.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ko.lookAt(Du,Dl,this.up):Ko.lookAt(Dl,Du,this.up),this.quaternion.setFromRotationMatrix(Ko),c&&(Ko.extractRotation(c.matrixWorld),Tl.setFromRotationMatrix(Ko),this.quaternion.premultiply(Tl.invert()))}add(r){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(null!==r.parent&&r.parent.remove(r),r.parent=this,this.children.push(r),r.dispatchEvent(Mh)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)}remove(r){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.remove(arguments[a]);return this}const o=this.children.indexOf(r);return-1!==o&&(r.parent=null,this.children.splice(o,1),r.dispatchEvent(nw)),this}removeFromParent(){const r=this.parent;return null!==r&&r.remove(this),this}clear(){for(let r=0;r<this.children.length;r++){const o=this.children[r];o.parent=null,o.dispatchEvent(nw)}return this.children.length=0,this}attach(r){return this.updateWorldMatrix(!0,!1),Ko.copy(this.matrixWorld).invert(),null!==r.parent&&(r.parent.updateWorldMatrix(!0,!1),Ko.multiply(r.parent.matrixWorld)),r.applyMatrix4(Ko),this.add(r),r.updateWorldMatrix(!1,!0),this}getObjectById(r){return this.getObjectByProperty("id",r)}getObjectByName(r){return this.getObjectByProperty("name",r)}getObjectByProperty(r,o){if(this[r]===o)return this;for(let a=0,c=this.children.length;a<c;a++){const f=this.children[a].getObjectByProperty(r,o);if(void 0!==f)return f}}getWorldPosition(r){return this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Du,r,tw),r}getWorldScale(r){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Du,Au,r),r}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return r.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(r){r(this);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverse(r)}traverseVisible(r){if(!1===this.visible)return;r(this);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].traverseVisible(r)}traverseAncestors(r){const o=this.parent;null!==o&&(r(o),o.traverseAncestors(r))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);const o=this.children;for(let a=0,c=o.length;a<c;a++)o[a].updateMatrixWorld(r)}updateWorldMatrix(r,o){const a=this.parent;if(!0===r&&null!==a&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o){const c=this.children;for(let d=0,f=c.length;d<f;d++)c[d].updateWorldMatrix(!1,!0)}}toJSON(r){const o=void 0===r||"string"==typeof r,a={};o&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},a.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const c={};function d(g,v){return void 0===g[v.uuid]&&(g[v.uuid]=v.toJSON(r)),v.uuid}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),!0===this.castShadow&&(c.castShadow=!0),!0===this.receiveShadow&&(c.receiveShadow=!0),!1===this.visible&&(c.visible=!1),!1===this.frustumCulled&&(c.frustumCulled=!1),0!==this.renderOrder&&(c.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(c.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&(c.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=d(r.geometries,this.geometry);const g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes){const v=g.shapes;if(Array.isArray(v))for(let y=0,w=v.length;y<w;y++)d(r.shapes,v[y]);else d(r.shapes,v)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(d(r.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const g=[];for(let v=0,y=this.material.length;v<y;v++)g.push(d(r.materials,this.material[v]));c.material=g}else c.material=d(r.materials,this.material);if(this.children.length>0){c.children=[];for(let g=0;g<this.children.length;g++)c.children.push(this.children[g].toJSON(r).object)}if(this.animations.length>0){c.animations=[];for(let g=0;g<this.animations.length;g++)c.animations.push(d(r.animations,this.animations[g]))}if(o){const g=f(r.geometries),v=f(r.materials),y=f(r.textures),w=f(r.images),b=f(r.shapes),x=f(r.skeletons),M=f(r.animations);g.length>0&&(a.geometries=g),v.length>0&&(a.materials=v),y.length>0&&(a.textures=y),w.length>0&&(a.images=w),b.length>0&&(a.shapes=b),x.length>0&&(a.skeletons=x),M.length>0&&(a.animations=M)}return a.object=c,a;function f(g){const v=[];for(const y in g){const w=g[y];delete w.metadata,v.push(w)}return v}}clone(r){return(new this.constructor).copy(this,r)}copy(r,o=!0){if(this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.rotation.order=r.rotation.order,this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.userData=JSON.parse(JSON.stringify(r.userData)),!0===o)for(let a=0;a<r.children.length;a++)this.add(r.children[a].clone());return this}}Gt.DefaultUp=new k(0,1,0),Gt.DefaultMatrixAutoUpdate=!0,Gt.prototype.isObject3D=!0;const Co=new k,To=new k,Eh=new k,es=new k,po=new k,mc=new k,Sh=new k,vc=new k,Kp=new k,Iu=new k;class ar{constructor(r=new k,o=new k,a=new k){this.a=r,this.b=o,this.c=a}static getNormal(r,o,a,c){c.subVectors(a,o),Co.subVectors(r,o),c.cross(Co);const d=c.lengthSq();return d>0?c.multiplyScalar(1/Math.sqrt(d)):c.set(0,0,0)}static getBarycoord(r,o,a,c,d){Co.subVectors(c,o),To.subVectors(a,o),Eh.subVectors(r,o);const f=Co.dot(Co),g=Co.dot(To),v=Co.dot(Eh),y=To.dot(To),w=To.dot(Eh),b=f*y-g*g;if(0===b)return d.set(-2,-1,-1);const x=1/b,M=(y*v-g*w)*x,C=(f*w-g*v)*x;return d.set(1-M-C,C,M)}static containsPoint(r,o,a,c){return this.getBarycoord(r,o,a,c,es),es.x>=0&&es.y>=0&&es.x+es.y<=1}static getUV(r,o,a,c,d,f,g,v){return this.getBarycoord(r,o,a,c,es),v.set(0,0),v.addScaledVector(d,es.x),v.addScaledVector(f,es.y),v.addScaledVector(g,es.z),v}static isFrontFacing(r,o,a,c){return Co.subVectors(a,o),To.subVectors(r,o),Co.cross(To).dot(c)<0}set(r,o,a){return this.a.copy(r),this.b.copy(o),this.c.copy(a),this}setFromPointsAndIndices(r,o,a,c){return this.a.copy(r[o]),this.b.copy(r[a]),this.c.copy(r[c]),this}setFromAttributeAndIndices(r,o,a,c){return this.a.fromBufferAttribute(r,o),this.b.fromBufferAttribute(r,a),this.c.fromBufferAttribute(r,c),this}clone(){return(new this.constructor).copy(this)}copy(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this}getArea(){return Co.subVectors(this.c,this.b),To.subVectors(this.a,this.b),.5*Co.cross(To).length()}getMidpoint(r){return r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(r){return ar.getNormal(this.a,this.b,this.c,r)}getPlane(r){return r.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(r,o){return ar.getBarycoord(r,this.a,this.b,this.c,o)}getUV(r,o,a,c,d){return ar.getUV(r,this.a,this.b,this.c,o,a,c,d)}containsPoint(r){return ar.containsPoint(r,this.a,this.b,this.c)}isFrontFacing(r){return ar.isFrontFacing(this.a,this.b,this.c,r)}intersectsBox(r){return r.intersectsTriangle(this)}closestPointToPoint(r,o){const a=this.a,c=this.b,d=this.c;let f,g;po.subVectors(c,a),mc.subVectors(d,a),vc.subVectors(r,a);const v=po.dot(vc),y=mc.dot(vc);if(v<=0&&y<=0)return o.copy(a);Kp.subVectors(r,c);const w=po.dot(Kp),b=mc.dot(Kp);if(w>=0&&b<=w)return o.copy(c);const x=v*b-w*y;if(x<=0&&v>=0&&w<=0)return f=v/(v-w),o.copy(a).addScaledVector(po,f);Iu.subVectors(r,d);const M=po.dot(Iu),C=mc.dot(Iu);if(C>=0&&M<=C)return o.copy(d);const D=M*y-v*C;if(D<=0&&y>=0&&C<=0)return g=y/(y-C),o.copy(a).addScaledVector(mc,g);const R=w*C-M*b;if(R<=0&&b-w>=0&&M-C>=0)return Sh.subVectors(d,c),g=(b-w)/(b-w+(M-C)),o.copy(c).addScaledVector(Sh,g);const T=1/(R+D+x);return f=D*T,g=x*T,o.copy(a).addScaledVector(po,f).addScaledVector(mc,g)}equals(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}let Ni=0;class lr extends Ml{constructor(){super(),Object.defineProperty(this,"id",{value:Ni++}),this.uuid=Ri(),this.name="",this.type="Material",this.fog=!0,this.blending=kn,this.side=Rn,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fu,this.blendDst=rc,this.blendEquation=yi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=pu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(r){this._alphaTest>0!=r>0&&this.version++,this._alphaTest=r}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(r){if(void 0!==r)for(const o in r){const a=r[o];if(void 0===a){console.warn("THREE.Material: '"+o+"' parameter is undefined.");continue}if("shading"===o){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===a;continue}const c=this[o];void 0!==c?c&&c.isColor?c.set(a):c&&c.isVector3&&a&&a.isVector3?c.copy(a):this[o]=a:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}}toJSON(r){const o=void 0===r||"string"==typeof r;o&&(r={textures:{},images:{}});const a={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function c(d){const f=[];for(const g in d){const v=d[g];delete v.metadata,f.push(v)}return f}if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),void 0!==this.roughness&&(a.roughness=this.roughness),void 0!==this.metalness&&(a.metalness=this.metalness),void 0!==this.sheen&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(a.shininess=this.shininess),void 0!==this.clearcoat&&(a.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(r).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(r).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(r).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(r).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(r).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(r).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(r).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(r).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(r).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(r).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(r).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(r).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(r).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(r).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(r).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(r).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(r).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(r).uuid,void 0!==this.combine&&(a.combine=this.combine)),void 0!==this.envMapIntensity&&(a.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(a.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(r).uuid),void 0!==this.transmission&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(r).uuid),void 0!==this.thickness&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(r).uuid),void 0!==this.attenuationDistance&&(a.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(a.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(a.size=this.size),null!==this.shadowSide&&(a.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==kn&&(a.blending=this.blending),this.side!==Rn&&(a.side=this.side),this.vertexColors&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),!0===this.transparent&&(a.transparent=this.transparent),a.depthFunc=this.depthFunc,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.colorWrite=this.colorWrite,a.stencilWrite=this.stencilWrite,a.stencilWriteMask=this.stencilWriteMask,a.stencilFunc=this.stencilFunc,a.stencilRef=this.stencilRef,a.stencilFuncMask=this.stencilFuncMask,a.stencilFail=this.stencilFail,a.stencilZFail=this.stencilZFail,a.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(a.rotation=this.rotation),!0===this.polygonOffset&&(a.polygonOffset=!0),0!==this.polygonOffsetFactor&&(a.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(a.linewidth=this.linewidth),void 0!==this.dashSize&&(a.dashSize=this.dashSize),void 0!==this.gapSize&&(a.gapSize=this.gapSize),void 0!==this.scale&&(a.scale=this.scale),!0===this.dithering&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(a.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(a.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(a.wireframe=this.wireframe),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(a.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(a.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(a.flatShading=this.flatShading),!1===this.visible&&(a.visible=!1),!1===this.toneMapped&&(a.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),o){const d=c(r.textures),f=c(r.images);d.length>0&&(a.textures=d),f.length>0&&(a.images=f)}return a}clone(){return(new this.constructor).copy(this)}copy(r){this.name=r.name,this.fog=r.fog,this.blending=r.blending,this.side=r.side,this.vertexColors=r.vertexColors,this.opacity=r.opacity,this.transparent=r.transparent,this.blendSrc=r.blendSrc,this.blendDst=r.blendDst,this.blendEquation=r.blendEquation,this.blendSrcAlpha=r.blendSrcAlpha,this.blendDstAlpha=r.blendDstAlpha,this.blendEquationAlpha=r.blendEquationAlpha,this.depthFunc=r.depthFunc,this.depthTest=r.depthTest,this.depthWrite=r.depthWrite,this.stencilWriteMask=r.stencilWriteMask,this.stencilFunc=r.stencilFunc,this.stencilRef=r.stencilRef,this.stencilFuncMask=r.stencilFuncMask,this.stencilFail=r.stencilFail,this.stencilZFail=r.stencilZFail,this.stencilZPass=r.stencilZPass,this.stencilWrite=r.stencilWrite;const o=r.clippingPlanes;let a=null;if(null!==o){const c=o.length;a=new Array(c);for(let d=0;d!==c;++d)a[d]=o[d].clone()}return this.clippingPlanes=a,this.clipIntersection=r.clipIntersection,this.clipShadows=r.clipShadows,this.shadowSide=r.shadowSide,this.colorWrite=r.colorWrite,this.precision=r.precision,this.polygonOffset=r.polygonOffset,this.polygonOffsetFactor=r.polygonOffsetFactor,this.polygonOffsetUnits=r.polygonOffsetUnits,this.dithering=r.dithering,this.alphaTest=r.alphaTest,this.alphaToCoverage=r.alphaToCoverage,this.premultipliedAlpha=r.premultipliedAlpha,this.visible=r.visible,this.toneMapped=r.toneMapped,this.userData=JSON.parse(JSON.stringify(r.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(r){!0===r&&this.version++}}lr.prototype.isMaterial=!0;class Do extends lr{constructor(r){super(),this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}Do.prototype.isMeshBasicMaterial=!0;const Un=new k,Ch=new Me;class en{constructor(r,o,a){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=r,this.itemSize=o,this.count=void 0!==r?r.length/o:0,this.normalized=!0===a,this.usage=Ns,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(r){!0===r&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this}copyAt(r,o,a){r*=this.itemSize,a*=o.itemSize;for(let c=0,d=this.itemSize;c<d;c++)this.array[r+c]=o.array[a+c];return this}copyArray(r){return this.array.set(r),this}copyColorsArray(r){const o=this.array;let a=0;for(let c=0,d=r.length;c<d;c++){let f=r[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),f=new ke),o[a++]=f.r,o[a++]=f.g,o[a++]=f.b}return this}copyVector2sArray(r){const o=this.array;let a=0;for(let c=0,d=r.length;c<d;c++){let f=r[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),f=new Me),o[a++]=f.x,o[a++]=f.y}return this}copyVector3sArray(r){const o=this.array;let a=0;for(let c=0,d=r.length;c<d;c++){let f=r[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),f=new k),o[a++]=f.x,o[a++]=f.y,o[a++]=f.z}return this}copyVector4sArray(r){const o=this.array;let a=0;for(let c=0,d=r.length;c<d;c++){let f=r[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),f=new Mn),o[a++]=f.x,o[a++]=f.y,o[a++]=f.z,o[a++]=f.w}return this}applyMatrix3(r){if(2===this.itemSize)for(let o=0,a=this.count;o<a;o++)Ch.fromBufferAttribute(this,o),Ch.applyMatrix3(r),this.setXY(o,Ch.x,Ch.y);else if(3===this.itemSize)for(let o=0,a=this.count;o<a;o++)Un.fromBufferAttribute(this,o),Un.applyMatrix3(r),this.setXYZ(o,Un.x,Un.y,Un.z);return this}applyMatrix4(r){for(let o=0,a=this.count;o<a;o++)Un.x=this.getX(o),Un.y=this.getY(o),Un.z=this.getZ(o),Un.applyMatrix4(r),this.setXYZ(o,Un.x,Un.y,Un.z);return this}applyNormalMatrix(r){for(let o=0,a=this.count;o<a;o++)Un.x=this.getX(o),Un.y=this.getY(o),Un.z=this.getZ(o),Un.applyNormalMatrix(r),this.setXYZ(o,Un.x,Un.y,Un.z);return this}transformDirection(r){for(let o=0,a=this.count;o<a;o++)Un.x=this.getX(o),Un.y=this.getY(o),Un.z=this.getZ(o),Un.transformDirection(r),this.setXYZ(o,Un.x,Un.y,Un.z);return this}set(r,o=0){return this.array.set(r,o),this}getX(r){return this.array[r*this.itemSize]}setX(r,o){return this.array[r*this.itemSize]=o,this}getY(r){return this.array[r*this.itemSize+1]}setY(r,o){return this.array[r*this.itemSize+1]=o,this}getZ(r){return this.array[r*this.itemSize+2]}setZ(r,o){return this.array[r*this.itemSize+2]=o,this}getW(r){return this.array[r*this.itemSize+3]}setW(r,o){return this.array[r*this.itemSize+3]=o,this}setXY(r,o,a){return this.array[0+(r*=this.itemSize)]=o,this.array[r+1]=a,this}setXYZ(r,o,a,c){return this.array[0+(r*=this.itemSize)]=o,this.array[r+1]=a,this.array[r+2]=c,this}setXYZW(r,o,a,c,d){return this.array[0+(r*=this.itemSize)]=o,this.array[r+1]=a,this.array[r+2]=c,this.array[r+3]=d,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(r.name=this.name),this.usage!==Ns&&(r.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(r.updateRange=this.updateRange),r}}en.prototype.isBufferAttribute=!0;class Ru extends en{constructor(r,o,a){super(new Uint16Array(r),o,a)}}class Th extends en{constructor(r,o,a){super(new Uint32Array(r),o,a)}}(class Dh extends en{constructor(r,o,a){super(new Uint16Array(r),o,a)}}).prototype.isFloat16BufferAttribute=!0;class $e extends en{constructor(r,o,a){super(new Float32Array(r),o,a)}}let aw=0;const gn=new Je,Ah=new Gt,_c=new k,ti=new Ct,Pu=new Ct,$r=new k;class ft extends Ml{constructor(){super(),Object.defineProperty(this,"id",{value:aw++}),this.uuid=Ri(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(r){return this.index=Array.isArray(r)?new(Jv(r)?Th:Ru)(r,1):r,this}getAttribute(r){return this.attributes[r]}setAttribute(r,o){return this.attributes[r]=o,this}deleteAttribute(r){return delete this.attributes[r],this}hasAttribute(r){return void 0!==this.attributes[r]}addGroup(r,o,a=0){this.groups.push({start:r,count:o,materialIndex:a})}clearGroups(){this.groups=[]}setDrawRange(r,o){this.drawRange.start=r,this.drawRange.count=o}applyMatrix4(r){const o=this.attributes.position;void 0!==o&&(o.applyMatrix4(r),o.needsUpdate=!0);const a=this.attributes.normal;if(void 0!==a){const d=(new Wr).getNormalMatrix(r);a.applyNormalMatrix(d),a.needsUpdate=!0}const c=this.attributes.tangent;return void 0!==c&&(c.transformDirection(r),c.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(r){return gn.makeRotationFromQuaternion(r),this.applyMatrix4(gn),this}rotateX(r){return gn.makeRotationX(r),this.applyMatrix4(gn),this}rotateY(r){return gn.makeRotationY(r),this.applyMatrix4(gn),this}rotateZ(r){return gn.makeRotationZ(r),this.applyMatrix4(gn),this}translate(r,o,a){return gn.makeTranslation(r,o,a),this.applyMatrix4(gn),this}scale(r,o,a){return gn.makeScale(r,o,a),this.applyMatrix4(gn),this}lookAt(r){return Ah.lookAt(r),Ah.updateMatrix(),this.applyMatrix4(Ah.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_c).negate(),this.translate(_c.x,_c.y,_c.z),this}setFromPoints(r){const o=[];for(let a=0,c=r.length;a<c;a++){const d=r[a];o.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new $e(o,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ct);const r=this.attributes.position,o=this.morphAttributes.position;if(r&&r.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));if(void 0!==r){if(this.boundingBox.setFromBufferAttribute(r),o)for(let a=0,c=o.length;a<c;a++)ti.setFromBufferAttribute(o[a]),this.morphTargetsRelative?($r.addVectors(this.boundingBox.min,ti.min),this.boundingBox.expandByPoint($r),$r.addVectors(this.boundingBox.max,ti.max),this.boundingBox.expandByPoint($r)):(this.boundingBox.expandByPoint(ti.min),this.boundingBox.expandByPoint(ti.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new jr);const r=this.attributes.position,o=this.morphAttributes.position;if(r&&r.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new k,1/0);if(r){const a=this.boundingSphere.center;if(ti.setFromBufferAttribute(r),o)for(let d=0,f=o.length;d<f;d++)Pu.setFromBufferAttribute(o[d]),this.morphTargetsRelative?($r.addVectors(ti.min,Pu.min),ti.expandByPoint($r),$r.addVectors(ti.max,Pu.max),ti.expandByPoint($r)):(ti.expandByPoint(Pu.min),ti.expandByPoint(Pu.max));ti.getCenter(a);let c=0;for(let d=0,f=r.count;d<f;d++)$r.fromBufferAttribute(r,d),c=Math.max(c,a.distanceToSquared($r));if(o)for(let d=0,f=o.length;d<f;d++){const g=o[d],v=this.morphTargetsRelative;for(let y=0,w=g.count;y<w;y++)$r.fromBufferAttribute(g,y),v&&(_c.fromBufferAttribute(r,y),$r.add(_c)),c=Math.max(c,a.distanceToSquared($r))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const r=this.index,o=this.attributes;if(null===r||void 0===o.position||void 0===o.normal||void 0===o.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const a=r.array,c=o.position.array,d=o.normal.array,f=o.uv.array,g=c.length/3;void 0===o.tangent&&this.setAttribute("tangent",new en(new Float32Array(4*g),4));const v=o.tangent.array,y=[],w=[];for(let oe=0;oe<g;oe++)y[oe]=new k,w[oe]=new k;const b=new k,x=new k,M=new k,C=new Me,D=new Me,R=new Me,T=new k,E=new k;function L(oe,N,q){b.fromArray(c,3*oe),x.fromArray(c,3*N),M.fromArray(c,3*q),C.fromArray(f,2*oe),D.fromArray(f,2*N),R.fromArray(f,2*q),x.sub(b),M.sub(b),D.sub(C),R.sub(C);const K=1/(D.x*R.y-R.x*D.y);isFinite(K)&&(T.copy(x).multiplyScalar(R.y).addScaledVector(M,-D.y).multiplyScalar(K),E.copy(M).multiplyScalar(D.x).addScaledVector(x,-R.x).multiplyScalar(K),y[oe].add(T),y[N].add(T),y[q].add(T),w[oe].add(E),w[N].add(E),w[q].add(E))}let I=this.groups;0===I.length&&(I=[{start:0,count:a.length}]);for(let oe=0,N=I.length;oe<N;++oe){const q=I[oe],K=q.start;for(let le=K,te=K+q.count;le<te;le+=3)L(a[le+0],a[le+1],a[le+2])}const V=new k,z=new k,j=new k,J=new k;function he(oe){j.fromArray(d,3*oe),J.copy(j);const N=y[oe];V.copy(N),V.sub(j.multiplyScalar(j.dot(N))).normalize(),z.crossVectors(J,N);const K=z.dot(w[oe])<0?-1:1;v[4*oe]=V.x,v[4*oe+1]=V.y,v[4*oe+2]=V.z,v[4*oe+3]=K}for(let oe=0,N=I.length;oe<N;++oe){const q=I[oe],K=q.start;for(let le=K,te=K+q.count;le<te;le+=3)he(a[le+0]),he(a[le+1]),he(a[le+2])}}computeVertexNormals(){const r=this.index,o=this.getAttribute("position");if(void 0!==o){let a=this.getAttribute("normal");if(void 0===a)a=new en(new Float32Array(3*o.count),3),this.setAttribute("normal",a);else for(let x=0,M=a.count;x<M;x++)a.setXYZ(x,0,0,0);const c=new k,d=new k,f=new k,g=new k,v=new k,y=new k,w=new k,b=new k;if(r)for(let x=0,M=r.count;x<M;x+=3){const C=r.getX(x+0),D=r.getX(x+1),R=r.getX(x+2);c.fromBufferAttribute(o,C),d.fromBufferAttribute(o,D),f.fromBufferAttribute(o,R),w.subVectors(f,d),b.subVectors(c,d),w.cross(b),g.fromBufferAttribute(a,C),v.fromBufferAttribute(a,D),y.fromBufferAttribute(a,R),g.add(w),v.add(w),y.add(w),a.setXYZ(C,g.x,g.y,g.z),a.setXYZ(D,v.x,v.y,v.z),a.setXYZ(R,y.x,y.y,y.z)}else for(let x=0,M=o.count;x<M;x+=3)c.fromBufferAttribute(o,x+0),d.fromBufferAttribute(o,x+1),f.fromBufferAttribute(o,x+2),w.subVectors(f,d),b.subVectors(c,d),w.cross(b),a.setXYZ(x+0,w.x,w.y,w.z),a.setXYZ(x+1,w.x,w.y,w.z),a.setXYZ(x+2,w.x,w.y,w.z);this.normalizeNormals(),a.needsUpdate=!0}}merge(r,o){if(!r||!r.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",r);void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const a=this.attributes;for(const c in a){if(void 0===r.attributes[c])continue;const f=a[c].array,g=r.attributes[c],v=g.array,y=g.itemSize*o,w=Math.min(v.length,f.length-y);for(let b=0,x=y;b<w;b++,x++)f[x]=v[b]}return this}normalizeNormals(){const r=this.attributes.normal;for(let o=0,a=r.count;o<a;o++)$r.fromBufferAttribute(r,o),$r.normalize(),r.setXYZ(o,$r.x,$r.y,$r.z)}toNonIndexed(){function r(g,v){const y=g.array,w=g.itemSize,b=g.normalized,x=new y.constructor(v.length*w);let M=0,C=0;for(let D=0,R=v.length;D<R;D++){M=g.isInterleavedBufferAttribute?v[D]*g.data.stride+g.offset:v[D]*w;for(let T=0;T<w;T++)x[C++]=y[M++]}return new en(x,w,b)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new ft,a=this.index.array,c=this.attributes;for(const g in c){const y=r(c[g],a);o.setAttribute(g,y)}const d=this.morphAttributes;for(const g in d){const v=[],y=d[g];for(let w=0,b=y.length;w<b;w++){const M=r(y[w],a);v.push(M)}o.morphAttributes[g]=v}o.morphTargetsRelative=this.morphTargetsRelative;const f=this.groups;for(let g=0,v=f.length;g<v;g++){const y=f[g];o.addGroup(y.start,y.count,y.materialIndex)}return o}toJSON(){const r={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),Object.keys(this.userData).length>0&&(r.userData=this.userData),void 0!==this.parameters){const v=this.parameters;for(const y in v)void 0!==v[y]&&(r[y]=v[y]);return r}r.data={attributes:{}};const o=this.index;null!==o&&(r.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const a=this.attributes;for(const v in a)r.data.attributes[v]=a[v].toJSON(r.data);const c={};let d=!1;for(const v in this.morphAttributes){const y=this.morphAttributes[v],w=[];for(let b=0,x=y.length;b<x;b++)w.push(y[b].toJSON(r.data));w.length>0&&(c[v]=w,d=!0)}d&&(r.data.morphAttributes=c,r.data.morphTargetsRelative=this.morphTargetsRelative);const f=this.groups;f.length>0&&(r.data.groups=JSON.parse(JSON.stringify(f)));const g=this.boundingSphere;return null!==g&&(r.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),r}clone(){return(new this.constructor).copy(this)}copy(r){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=r.name;const a=r.index;null!==a&&this.setIndex(a.clone(o));const c=r.attributes;for(const y in c)this.setAttribute(y,c[y].clone(o));const d=r.morphAttributes;for(const y in d){const w=[],b=d[y];for(let x=0,M=b.length;x<M;x++)w.push(b[x].clone(o));this.morphAttributes[y]=w}this.morphTargetsRelative=r.morphTargetsRelative;const f=r.groups;for(let y=0,w=f.length;y<w;y++){const b=f[y];this.addGroup(b.start,b.count,b.materialIndex)}const g=r.boundingBox;null!==g&&(this.boundingBox=g.clone());const v=r.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.drawRange.start=r.drawRange.start,this.drawRange.count=r.drawRange.count,this.userData=r.userData,void 0!==r.parameters&&(this.parameters=Object.assign({},r.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ft.prototype.isBufferGeometry=!0;const ty=new Je,bc=new Cl,eg=new jr,ns=new k,Ao=new k,cn=new k,Re=new k,tt=new k,cr=new k,Oi=new k,Fr=new k,hi=new k,Hs=new Me,En=new Me,br=new Me,Ji=new k,ht=new k;class Zn extends Gt{constructor(r=new ft,o=new Do){super(),this.type="Mesh",this.geometry=r,this.material=o,this.updateMorphTargets()}copy(r){return super.copy(r),void 0!==r.morphTargetInfluences&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),void 0!==r.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this.material=r.material,this.geometry=r.geometry,this}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const o=r.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,f=c.length;d<f;d++){const g=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=d}}}}else{const o=r.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(r,o){const a=this.geometry,c=this.material,d=this.matrixWorld;if(void 0===c||(null===a.boundingSphere&&a.computeBoundingSphere(),eg.copy(a.boundingSphere),eg.applyMatrix4(d),!1===r.ray.intersectsSphere(eg))||(ty.copy(d).invert(),bc.copy(r.ray).applyMatrix4(ty),null!==a.boundingBox&&!1===bc.intersectsBox(a.boundingBox)))return;let f;if(a.isBufferGeometry){const g=a.index,v=a.attributes.position,y=a.morphAttributes.position,w=a.morphTargetsRelative,b=a.attributes.uv,x=a.attributes.uv2,M=a.groups,C=a.drawRange;if(null!==g)if(Array.isArray(c))for(let D=0,R=M.length;D<R;D++){const T=M[D],E=c[T.materialIndex];for(let V=Math.max(T.start,C.start),z=Math.min(g.count,Math.min(T.start+T.count,C.start+C.count));V<z;V+=3){const j=g.getX(V),J=g.getX(V+1),he=g.getX(V+2);f=zs(this,E,r,bc,v,y,w,b,x,j,J,he),f&&(f.faceIndex=Math.floor(V/3),f.face.materialIndex=T.materialIndex,o.push(f))}}else for(let T=Math.max(0,C.start),E=Math.min(g.count,C.start+C.count);T<E;T+=3){const L=g.getX(T),I=g.getX(T+1),V=g.getX(T+2);f=zs(this,c,r,bc,v,y,w,b,x,L,I,V),f&&(f.faceIndex=Math.floor(T/3),o.push(f))}else if(void 0!==v)if(Array.isArray(c))for(let D=0,R=M.length;D<R;D++){const T=M[D],E=c[T.materialIndex];for(let V=Math.max(T.start,C.start),z=Math.min(v.count,Math.min(T.start+T.count,C.start+C.count));V<z;V+=3)f=zs(this,E,r,bc,v,y,w,b,x,V,V+1,V+2),f&&(f.faceIndex=Math.floor(V/3),f.face.materialIndex=T.materialIndex,o.push(f))}else for(let T=Math.max(0,C.start),E=Math.min(v.count,C.start+C.count);T<E;T+=3)f=zs(this,c,r,bc,v,y,w,b,x,T,T+1,T+2),f&&(f.faceIndex=Math.floor(T/3),o.push(f))}else a.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function zs(h,r,o,a,c,d,f,g,v,y,w,b){ns.fromBufferAttribute(c,y),Ao.fromBufferAttribute(c,w),cn.fromBufferAttribute(c,b);const x=h.morphTargetInfluences;if(d&&x){Oi.set(0,0,0),Fr.set(0,0,0),hi.set(0,0,0);for(let C=0,D=d.length;C<D;C++){const R=x[C],T=d[C];0!==R&&(Re.fromBufferAttribute(T,y),tt.fromBufferAttribute(T,w),cr.fromBufferAttribute(T,b),f?(Oi.addScaledVector(Re,R),Fr.addScaledVector(tt,R),hi.addScaledVector(cr,R)):(Oi.addScaledVector(Re.sub(ns),R),Fr.addScaledVector(tt.sub(Ao),R),hi.addScaledVector(cr.sub(cn),R)))}ns.add(Oi),Ao.add(Fr),cn.add(hi)}h.isSkinnedMesh&&(h.boneTransform(y,ns),h.boneTransform(w,Ao),h.boneTransform(b,cn));const M=function ny(h,r,o,a,c,d,f,g){let v;if(v=r.side===rn?a.intersectTriangle(f,d,c,!0,g):a.intersectTriangle(c,d,f,r.side!==Di,g),null===v)return null;ht.copy(g),ht.applyMatrix4(h.matrixWorld);const y=o.ray.origin.distanceTo(ht);return y<o.near||y>o.far?null:{distance:y,point:ht.clone(),object:h}}(h,r,o,a,ns,Ao,cn,Ji);if(M){g&&(Hs.fromBufferAttribute(g,y),En.fromBufferAttribute(g,w),br.fromBufferAttribute(g,b),M.uv=ar.getUV(Ji,ns,Ao,cn,Hs,En,br,new Me)),v&&(Hs.fromBufferAttribute(v,y),En.fromBufferAttribute(v,w),br.fromBufferAttribute(v,b),M.uv2=ar.getUV(Ji,ns,Ao,cn,Hs,En,br,new Me));const C={a:y,b:w,c:b,normal:new k,materialIndex:0};ar.getNormal(ns,Ao,cn,C.normal),M.face=C}return M}Zn.prototype.isMesh=!0;class mn extends ft{constructor(r=1,o=1,a=1,c=1,d=1,f=1){super(),this.type="BoxGeometry",this.parameters={width:r,height:o,depth:a,widthSegments:c,heightSegments:d,depthSegments:f};const g=this;c=Math.floor(c),d=Math.floor(d),f=Math.floor(f);const v=[],y=[],w=[],b=[];let x=0,M=0;function C(D,R,T,E,L,I,V,z,j,J,he){const oe=I/j,N=V/J,q=I/2,K=V/2,ie=z/2,le=j+1,te=J+1;let ve=0,Ie=0;const Ze=new k;for(let _e=0;_e<te;_e++){const De=_e*N-K;for(let Ge=0;Ge<le;Ge++)Ze[D]=(Ge*oe-q)*E,Ze[R]=De*L,Ze[T]=ie,y.push(Ze.x,Ze.y,Ze.z),Ze[D]=0,Ze[R]=0,Ze[T]=z>0?1:-1,w.push(Ze.x,Ze.y,Ze.z),b.push(Ge/j),b.push(1-_e/J),ve+=1}for(let _e=0;_e<J;_e++)for(let De=0;De<j;De++){const et=x+De+le*(_e+1),at=x+(De+1)+le*(_e+1),me=x+(De+1)+le*_e;v.push(x+De+le*_e,et,me),v.push(et,at,me),Ie+=6}g.addGroup(M,Ie,he),M+=Ie,x+=ve}C("z","y","x",-1,-1,a,o,r,f,d,0),C("z","y","x",1,-1,a,o,-r,f,d,1),C("x","z","y",1,1,r,a,o,c,f,2),C("x","z","y",1,-1,r,a,-o,c,f,3),C("x","y","z",1,-1,r,o,a,c,d,4),C("x","y","z",-1,-1,r,o,-a,c,d,5),this.setIndex(v),this.setAttribute("position",new $e(y,3)),this.setAttribute("normal",new $e(w,3)),this.setAttribute("uv",new $e(b,2))}static fromJSON(r){return new mn(r.width,r.height,r.depth,r.widthSegments,r.heightSegments,r.depthSegments)}}function rs(h){const r={};for(const o in h){r[o]={};for(const a in h[o]){const c=h[o][a];r[o][a]=c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture||c.isQuaternion)?c.clone():Array.isArray(c)?c.slice():c}}return r}function wr(h){const r={};for(let o=0;o<h.length;o++){const a=rs(h[o]);for(const c in a)r[c]=a[c]}return r}const Gs={clone:rs,merge:wr};class wi extends lr{constructor(r){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}copy(r){return super.copy(r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=rs(r.uniforms),this.defines=Object.assign({},r.defines),this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.extensions=Object.assign({},r.extensions),this.glslVersion=r.glslVersion,this}toJSON(r){const o=super.toJSON(r);o.glslVersion=this.glslVersion,o.uniforms={};for(const c in this.uniforms){const f=this.uniforms[c].value;o.uniforms[c]=f&&f.isTexture?{type:"t",value:f.toJSON(r).uuid}:f&&f.isColor?{type:"c",value:f.getHex()}:f&&f.isVector2?{type:"v2",value:f.toArray()}:f&&f.isVector3?{type:"v3",value:f.toArray()}:f&&f.isVector4?{type:"v4",value:f.toArray()}:f&&f.isMatrix3?{type:"m3",value:f.toArray()}:f&&f.isMatrix4?{type:"m4",value:f.toArray()}:{value:f}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;const a={};for(const c in this.extensions)!0===this.extensions[c]&&(a[c]=!0);return Object.keys(a).length>0&&(o.extensions=a),o}}wi.prototype.isShaderMaterial=!0;class Al extends Gt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Je,this.projectionMatrix=new Je,this.projectionMatrixInverse=new Je}copy(r,o){return super.copy(r,o),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this.projectionMatrixInverse.copy(r.projectionMatrixInverse),this}getWorldDirection(r){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return r.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(r){super.updateMatrixWorld(r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(r,o){super.updateWorldMatrix(r,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Al.prototype.isCamera=!0;class Jn extends Al{constructor(r=50,o=1,a=.1,c=2e3){super(),this.type="PerspectiveCamera",this.fov=r,this.zoom=1,this.near=a,this.far=c,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(r,o){return super.copy(r,o),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=null===r.view?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this}setFocalLength(r){const o=.5*this.getFilmHeight()/r;this.fov=2*El*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const r=Math.tan(.5*Pt*this.fov);return.5*this.getFilmHeight()/r}getEffectiveFOV(){return 2*El*Math.atan(Math.tan(.5*Pt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(r,o,a,c,d,f){this.aspect=r/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=this.near;let o=r*Math.tan(.5*Pt*this.fov)/this.zoom,a=2*o,c=this.aspect*a,d=-.5*c;const f=this.view;if(null!==this.view&&this.view.enabled){const v=f.fullWidth,y=f.fullHeight;d+=f.offsetX*c/v,o-=f.offsetY*a/y,c*=f.width/v,a*=f.height/y}const g=this.filmOffset;0!==g&&(d+=r*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,o,o-a,r,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const o=super.toJSON(r);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}Jn.prototype.isPerspectiveCamera=!0;class Il extends Gt{constructor(r,o,a){if(super(),this.type="CubeCamera",!0!==a.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=a;const c=new Jn(90,1,r,o);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new k(1,0,0)),this.add(c);const d=new Jn(90,1,r,o);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new k(-1,0,0)),this.add(d);const f=new Jn(90,1,r,o);f.layers=this.layers,f.up.set(0,0,1),f.lookAt(new k(0,1,0)),this.add(f);const g=new Jn(90,1,r,o);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new k(0,-1,0)),this.add(g);const v=new Jn(90,1,r,o);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new k(0,0,1)),this.add(v);const y=new Jn(90,1,r,o);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new k(0,0,-1)),this.add(y)}update(r,o){null===this.parent&&this.updateMatrixWorld();const a=this.renderTarget,[c,d,f,g,v,y]=this.children,w=r.xr.enabled,b=r.getRenderTarget();r.xr.enabled=!1;const x=a.texture.generateMipmaps;a.texture.generateMipmaps=!1,r.setRenderTarget(a,0),r.render(o,c),r.setRenderTarget(a,1),r.render(o,d),r.setRenderTarget(a,2),r.render(o,f),r.setRenderTarget(a,3),r.render(o,g),r.setRenderTarget(a,4),r.render(o,v),a.texture.generateMipmaps=x,r.setRenderTarget(a,5),r.render(o,y),r.setRenderTarget(b),r.xr.enabled=w,a.texture.needsPMREMUpdate=!0}}class Li extends hr{constructor(r,o,a,c,d,f,g,v,y,w){super(r=void 0!==r?r:[],o=void 0!==o?o:Dr,a,c,d,f,g,v,y,w),this.flipY=!1}get images(){return this.image}set images(r){this.image=r}}Li.prototype.isCubeTexture=!0;class wc extends Eo{constructor(r,o,a){Number.isInteger(o)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),o=a),super(r,r,o),this.texture=new Li(void 0,(o=o||{}).mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,this.texture.minFilter=void 0!==o.minFilter?o.minFilter:Wn}fromEquirectangularTexture(r,o){this.texture.type=o.type,this.texture.format=Nr,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const a_uniforms={tEquirect:{value:null}},a_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",c=new mn(5,5,5),d=new wi({name:"CubemapFromEquirect",uniforms:rs(a_uniforms),vertexShader:a_vertexShader,fragmentShader:a_fragmentShader,side:rn,blending:vi});d.uniforms.tEquirect.value=o;const f=new Zn(c,d),g=o.minFilter;return o.minFilter===lo&&(o.minFilter=Wn),new Il(1,10,this).update(r,f),o.minFilter=g,f.geometry.dispose(),f.material.dispose(),this}clear(r,o,a,c){const d=r.getRenderTarget();for(let f=0;f<6;f++)r.setRenderTarget(this,f),r.clear(o,a,c);r.setRenderTarget(d)}}wc.prototype.isWebGLCubeRenderTarget=!0;const La=new k,xr=new k,tg=new Wr;class Qn{constructor(r=new k(1,0,0),o=0){this.normal=r,this.constant=o}set(r,o){return this.normal.copy(r),this.constant=o,this}setComponents(r,o,a,c){return this.normal.set(r,o,a),this.constant=c,this}setFromNormalAndCoplanarPoint(r,o){return this.normal.copy(r),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(r,o,a){const c=La.subVectors(a,o).cross(xr.subVectors(r,o)).normalize();return this.setFromNormalAndCoplanarPoint(c,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,o){return o.copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)}intersectLine(r,o){const a=r.delta(La),c=this.normal.dot(a);if(0===c)return 0===this.distanceToPoint(r.start)?o.copy(r.start):null;const d=-(r.start.dot(this.normal)+this.constant)/c;return d<0||d>1?null:o.copy(a).multiplyScalar(d).add(r.start)}intersectsLine(r){const o=this.distanceToPoint(r.start),a=this.distanceToPoint(r.end);return o<0&&a>0||a<0&&o>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,o){const a=o||tg.getNormalMatrix(r),c=this.coplanarPoint(La).applyMatrix4(r),d=this.normal.applyMatrix3(a).normalize();return this.constant=-c.dot(d),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Qn.prototype.isPlane=!0;const Mr=new jr,xc=new k;class is{constructor(r=new Qn,o=new Qn,a=new Qn,c=new Qn,d=new Qn,f=new Qn){this.planes=[r,o,a,c,d,f]}set(r,o,a,c,d,f){const g=this.planes;return g[0].copy(r),g[1].copy(o),g[2].copy(a),g[3].copy(c),g[4].copy(d),g[5].copy(f),this}copy(r){const o=this.planes;for(let a=0;a<6;a++)o[a].copy(r.planes[a]);return this}setFromProjectionMatrix(r){const o=this.planes,a=r.elements,c=a[0],d=a[1],f=a[2],g=a[3],v=a[4],y=a[5],w=a[6],b=a[7],x=a[8],M=a[9],C=a[10],D=a[11],R=a[12],T=a[13],E=a[14],L=a[15];return o[0].setComponents(g-c,b-v,D-x,L-R).normalize(),o[1].setComponents(g+c,b+v,D+x,L+R).normalize(),o[2].setComponents(g+d,b+y,D+M,L+T).normalize(),o[3].setComponents(g-d,b-y,D-M,L-T).normalize(),o[4].setComponents(g-f,b-w,D-C,L-E).normalize(),o[5].setComponents(g+f,b+w,D+C,L+E).normalize(),this}intersectsObject(r){const o=r.geometry;return null===o.boundingSphere&&o.computeBoundingSphere(),Mr.copy(o.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(Mr)}intersectsSprite(r){return Mr.center.set(0,0,0),Mr.radius=.7071067811865476,Mr.applyMatrix4(r.matrixWorld),this.intersectsSphere(Mr)}intersectsSphere(r){const o=this.planes,a=r.center,c=-r.radius;for(let d=0;d<6;d++)if(o[d].distanceToPoint(a)<c)return!1;return!0}intersectsBox(r){const o=this.planes;for(let a=0;a<6;a++){const c=o[a];if(xc.x=c.normal.x>0?r.max.x:r.min.x,xc.y=c.normal.y>0?r.max.y:r.min.y,xc.z=c.normal.z>0?r.max.z:r.min.z,c.distanceToPoint(xc)<0)return!1}return!0}containsPoint(r){const o=this.planes;for(let a=0;a<6;a++)if(o[a].distanceToPoint(r)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ou(){let h=null,r=!1,o=null,a=null;function c(d,f){o(d,f),a=h.requestAnimationFrame(c)}return{start:function(){!0!==r&&null!==o&&(a=h.requestAnimationFrame(c),r=!0)},stop:function(){h.cancelAnimationFrame(a),r=!1},setAnimationLoop:function(d){o=d},setContext:function(d){h=d}}}function Io(h,r){const o=r.isWebGL2,a=new WeakMap;return{get:function f(y){return y.isInterleavedBufferAttribute&&(y=y.data),a.get(y)},remove:function g(y){y.isInterleavedBufferAttribute&&(y=y.data);const w=a.get(y);w&&(h.deleteBuffer(w.buffer),a.delete(y))},update:function v(y,w){if(y.isGLBufferAttribute){const x=a.get(y);return void((!x||x.version<y.version)&&a.set(y,{buffer:y.buffer,type:y.type,bytesPerElement:y.elementSize,version:y.version}))}y.isInterleavedBufferAttribute&&(y=y.data);const b=a.get(y);void 0===b?a.set(y,function c(y,w){const b=y.array,x=y.usage,M=h.createBuffer();h.bindBuffer(w,M),h.bufferData(w,b,x),y.onUploadCallback();let C=5126;return b instanceof Float32Array?C=5126:b instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):b instanceof Uint16Array?y.isFloat16BufferAttribute?o?C=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):C=5123:b instanceof Int16Array?C=5122:b instanceof Uint32Array?C=5125:b instanceof Int32Array?C=5124:b instanceof Int8Array?C=5120:(b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&(C=5121),{buffer:M,type:C,bytesPerElement:b.BYTES_PER_ELEMENT,version:y.version}}(y,w)):b.version<y.version&&(function d(y,w,b){const x=w.array,M=w.updateRange;h.bindBuffer(b,y),-1===M.count?h.bufferSubData(b,0,x):(o?h.bufferSubData(b,M.offset*x.BYTES_PER_ELEMENT,x,M.offset,M.count):h.bufferSubData(b,M.offset*x.BYTES_PER_ELEMENT,x.subarray(M.offset,M.offset+M.count)),M.count=-1)}(b.buffer,y,w),b.version=y.version)}}}class Fa extends ft{constructor(r=1,o=1,a=1,c=1){super(),this.type="PlaneGeometry",this.parameters={width:r,height:o,widthSegments:a,heightSegments:c};const d=r/2,f=o/2,g=Math.floor(a),v=Math.floor(c),y=g+1,w=v+1,b=r/g,x=o/v,M=[],C=[],D=[],R=[];for(let T=0;T<w;T++){const E=T*x-f;for(let L=0;L<y;L++)C.push(L*b-d,-E,0),D.push(0,0,1),R.push(L/g),R.push(1-T/v)}for(let T=0;T<v;T++)for(let E=0;E<g;E++){const I=E+y*(T+1),V=E+1+y*(T+1),z=E+1+y*T;M.push(E+y*T,I,z),M.push(I,V,z)}this.setIndex(M),this.setAttribute("position",new $e(C,3)),this.setAttribute("normal",new $e(D,3)),this.setAttribute("uv",new $e(R,2))}static fromJSON(r){return new Fa(r.width,r.height,r.widthSegments,r.heightSegments)}}const Yt={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Be={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wr},uv2Transform:{value:new Wr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wr}}},qs={basic:{uniforms:wr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:Yt.meshbasic_vert,fragmentShader:Yt.meshbasic_frag},lambert:{uniforms:wr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.fog,Be.lights,{emissive:{value:new ke(0)}}]),vertexShader:Yt.meshlambert_vert,fragmentShader:Yt.meshlambert_frag},phong:{uniforms:wr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:Yt.meshphong_vert,fragmentShader:Yt.meshphong_frag},standard:{uniforms:wr([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag},toon:{uniforms:wr([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new ke(0)}}]),vertexShader:Yt.meshtoon_vert,fragmentShader:Yt.meshtoon_frag},matcap:{uniforms:wr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:Yt.meshmatcap_vert,fragmentShader:Yt.meshmatcap_frag},points:{uniforms:wr([Be.points,Be.fog]),vertexShader:Yt.points_vert,fragmentShader:Yt.points_frag},dashed:{uniforms:wr([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yt.linedashed_vert,fragmentShader:Yt.linedashed_frag},depth:{uniforms:wr([Be.common,Be.displacementmap]),vertexShader:Yt.depth_vert,fragmentShader:Yt.depth_frag},normal:{uniforms:wr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:Yt.meshnormal_vert,fragmentShader:Yt.meshnormal_frag},sprite:{uniforms:wr([Be.sprite,Be.fog]),vertexShader:Yt.sprite_vert,fragmentShader:Yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wr},t2D:{value:null}},vertexShader:Yt.background_vert,fragmentShader:Yt.background_frag},cube:{uniforms:wr([Be.envmap,{opacity:{value:1}}]),vertexShader:Yt.cube_vert,fragmentShader:Yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yt.equirect_vert,fragmentShader:Yt.equirect_frag},distanceRGBA:{uniforms:wr([Be.common,Be.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yt.distanceRGBA_vert,fragmentShader:Yt.distanceRGBA_frag},shadow:{uniforms:wr([Be.lights,Be.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:Yt.shadow_vert,fragmentShader:Yt.shadow_frag}};function AC(h,r,o,a,c,d){const f=new ke(0);let v,y,g=!0===c?0:1,w=null,b=0,x=null;function C(D,R){o.buffers.color.setClear(D.r,D.g,D.b,R,d)}return{getClearColor:function(){return f},setClearColor:function(D,R=1){f.set(D),g=R,C(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(D){g=D,C(f,g)},render:function M(D,R){let T=!1,E=!0===R.isScene?R.background:null;E&&E.isTexture&&(E=r.get(E));const L=h.xr,I=L.getSession&&L.getSession();I&&"additive"===I.environmentBlendMode&&(E=null),null===E?C(f,g):E&&E.isColor&&(C(E,1),T=!0),(h.autoClear||T)&&h.clear(h.autoClearColor,h.autoClearDepth,h.autoClearStencil),E&&(E.isCubeTexture||E.mapping===gl)?(void 0===y&&(y=new Zn(new mn(1,1,1),new wi({name:"BackgroundCubeMaterial",uniforms:rs(qs.cube.uniforms),vertexShader:qs.cube.vertexShader,fragmentShader:qs.cube.fragmentShader,side:rn,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(V,z,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(y)),y.material.uniforms.envMap.value=E,y.material.uniforms.flipEnvMap.value=E.isCubeTexture&&!1===E.isRenderTargetTexture?-1:1,(w!==E||b!==E.version||x!==h.toneMapping)&&(y.material.needsUpdate=!0,w=E,b=E.version,x=h.toneMapping),D.unshift(y,y.geometry,y.material,0,0,null)):E&&E.isTexture&&(void 0===v&&(v=new Zn(new Fa(2,2),new wi({name:"BackgroundMaterial",uniforms:rs(qs.background.uniforms),vertexShader:qs.background.vertexShader,fragmentShader:qs.background.fragmentShader,side:Rn,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(v)),v.material.uniforms.t2D.value=E,!0===E.matrixAutoUpdate&&E.updateMatrix(),v.material.uniforms.uvTransform.value.copy(E.matrix),(w!==E||b!==E.version||x!==h.toneMapping)&&(v.material.needsUpdate=!0,w=E,b=E.version,x=h.toneMapping),D.unshift(v,v.geometry,v.material,0,0,null))}}}function yg(h,r,o,a){const c=h.getParameter(34921),d=a.isWebGL2?null:r.get("OES_vertex_array_object"),f=a.isWebGL2||null!==d,g={},v=D(null);let y=v;function x(K){return a.isWebGL2?h.bindVertexArray(K):d.bindVertexArrayOES(K)}function M(K){return a.isWebGL2?h.deleteVertexArray(K):d.deleteVertexArrayOES(K)}function D(K){const ie=[],le=[],te=[];for(let ve=0;ve<c;ve++)ie[ve]=0,le[ve]=0,te[ve]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ie,enabledAttributes:le,attributeDivisors:te,object:K,attributes:{},index:null}}function E(){const K=y.newAttributes;for(let ie=0,le=K.length;ie<le;ie++)K[ie]=0}function L(K){I(K,0)}function I(K,ie){const te=y.enabledAttributes,ve=y.attributeDivisors;y.newAttributes[K]=1,0===te[K]&&(h.enableVertexAttribArray(K),te[K]=1),ve[K]!==ie&&((a.isWebGL2?h:r.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,ie),ve[K]=ie)}function V(){const K=y.newAttributes,ie=y.enabledAttributes;for(let le=0,te=ie.length;le<te;le++)ie[le]!==K[le]&&(h.disableVertexAttribArray(le),ie[le]=0)}function z(K,ie,le,te,ve,Ie){!0!==a.isWebGL2||5124!==le&&5125!==le?h.vertexAttribPointer(K,ie,le,te,ve,Ie):h.vertexAttribIPointer(K,ie,le,ve,Ie)}function N(){q(),y!==v&&(y=v,x(y.object))}function q(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:function w(K,ie,le,te,ve){let Ie=!1;if(f){const Ze=function C(K,ie,le){const te=!0===le.wireframe;let ve=g[K.id];void 0===ve&&(ve={},g[K.id]=ve);let Ie=ve[ie.id];void 0===Ie&&(Ie={},ve[ie.id]=Ie);let Ze=Ie[te];return void 0===Ze&&(Ze=D(function b(){return a.isWebGL2?h.createVertexArray():d.createVertexArrayOES()}()),Ie[te]=Ze),Ze}(te,le,ie);y!==Ze&&(y=Ze,x(y.object)),Ie=function R(K,ie){const le=y.attributes,te=K.attributes;let ve=0;for(const Ie in te){const Ze=le[Ie],_e=te[Ie];if(void 0===Ze||Ze.attribute!==_e||Ze.data!==_e.data)return!0;ve++}return y.attributesNum!==ve||y.index!==ie}(te,ve),Ie&&function T(K,ie){const le={},te=K.attributes;let ve=0;for(const Ie in te){const Ze=te[Ie],_e={};_e.attribute=Ze,Ze.data&&(_e.data=Ze.data),le[Ie]=_e,ve++}y.attributes=le,y.attributesNum=ve,y.index=ie}(te,ve)}else{const Ze=!0===ie.wireframe;(y.geometry!==te.id||y.program!==le.id||y.wireframe!==Ze)&&(y.geometry=te.id,y.program=le.id,y.wireframe=Ze,Ie=!0)}!0===K.isInstancedMesh&&(Ie=!0),null!==ve&&o.update(ve,34963),Ie&&(function j(K,ie,le,te){if(!1===a.isWebGL2&&(K.isInstancedMesh||te.isInstancedBufferGeometry)&&null===r.get("ANGLE_instanced_arrays"))return;E();const ve=te.attributes,Ie=le.getAttributes(),Ze=ie.defaultAttributeValues;for(const _e in Ie){const De=Ie[_e];if(De.location>=0){let Ge=ve[_e];if(void 0===Ge&&("instanceMatrix"===_e&&K.instanceMatrix&&(Ge=K.instanceMatrix),"instanceColor"===_e&&K.instanceColor&&(Ge=K.instanceColor)),void 0!==Ge){const et=Ge.normalized,at=Ge.itemSize,me=o.get(Ge);if(void 0===me)continue;const Vt=me.buffer,ot=me.type,Mt=me.bytesPerElement;if(Ge.isInterleavedBufferAttribute){const Ye=Ge.data,Ht=Ye.stride,yt=Ge.offset;if(Ye&&Ye.isInstancedInterleavedBuffer){for(let Ee=0;Ee<De.locationSize;Ee++)I(De.location+Ee,Ye.meshPerAttribute);!0!==K.isInstancedMesh&&void 0===te._maxInstanceCount&&(te._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let Ee=0;Ee<De.locationSize;Ee++)L(De.location+Ee);h.bindBuffer(34962,Vt);for(let Ee=0;Ee<De.locationSize;Ee++)z(De.location+Ee,at/De.locationSize,ot,et,Ht*Mt,(yt+at/De.locationSize*Ee)*Mt)}else{if(Ge.isInstancedBufferAttribute){for(let Ye=0;Ye<De.locationSize;Ye++)I(De.location+Ye,Ge.meshPerAttribute);!0!==K.isInstancedMesh&&void 0===te._maxInstanceCount&&(te._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let Ye=0;Ye<De.locationSize;Ye++)L(De.location+Ye);h.bindBuffer(34962,Vt);for(let Ye=0;Ye<De.locationSize;Ye++)z(De.location+Ye,at/De.locationSize,ot,et,at*Mt,at/De.locationSize*Ye*Mt)}}else if(void 0!==Ze){const et=Ze[_e];if(void 0!==et)switch(et.length){case 2:h.vertexAttrib2fv(De.location,et);break;case 3:h.vertexAttrib3fv(De.location,et);break;case 4:h.vertexAttrib4fv(De.location,et);break;default:h.vertexAttrib1fv(De.location,et)}}}}V()}(K,ie,le,te),null!==ve&&h.bindBuffer(34963,o.get(ve).buffer))},reset:N,resetDefaultState:q,dispose:function J(){N();for(const K in g){const ie=g[K];for(const le in ie){const te=ie[le];for(const ve in te)M(te[ve].object),delete te[ve];delete ie[le]}delete g[K]}},releaseStatesOfGeometry:function he(K){if(void 0===g[K.id])return;const ie=g[K.id];for(const le in ie){const te=ie[le];for(const ve in te)M(te[ve].object),delete te[ve];delete ie[le]}delete g[K.id]},releaseStatesOfProgram:function oe(K){for(const ie in g){const le=g[ie];if(void 0===le[K.id])continue;const te=le[K.id];for(const ve in te)M(te[ve].object),delete te[ve];delete le[K.id]}},initAttributes:E,enableAttribute:L,disableUnusedAttributes:V}}function Uu(h,r,o,a){const c=a.isWebGL2;let d;this.setMode=function f(y){d=y},this.render=function g(y,w){h.drawArrays(d,y,w),o.update(w,d,1)},this.renderInstances=function v(y,w,b){if(0===b)return;let x,M;if(c)x=h,M="drawArraysInstanced";else if(x=r.get("ANGLE_instanced_arrays"),M="drawArraysInstancedANGLE",null===x)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");x[M](d,y,w,b),o.update(w,d,b)}}function Gw(h,r,o){let a;function d(j){if("highp"===j){if(h.getShaderPrecisionFormat(35633,36338).precision>0&&h.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";j="mediump"}return"mediump"===j&&h.getShaderPrecisionFormat(35633,36337).precision>0&&h.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const f=typeof WebGL2RenderingContext<"u"&&h instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&h instanceof WebGL2ComputeRenderingContext;let g=void 0!==o.precision?o.precision:"highp";const v=d(g);v!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",v,"instead."),g=v);const y=f||r.has("WEBGL_draw_buffers"),w=!0===o.logarithmicDepthBuffer,b=h.getParameter(34930),x=h.getParameter(35660),M=h.getParameter(3379),C=h.getParameter(34076),D=h.getParameter(34921),R=h.getParameter(36347),T=h.getParameter(36348),E=h.getParameter(36349),L=x>0,I=f||r.has("OES_texture_float");return{isWebGL2:f,drawBuffers:y,getMaxAnisotropy:function c(){if(void 0!==a)return a;if(!0===r.has("EXT_texture_filter_anisotropic")){const j=r.get("EXT_texture_filter_anisotropic");a=h.getParameter(j.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:d,precision:g,logarithmicDepthBuffer:w,maxTextures:b,maxVertexTextures:x,maxTextureSize:M,maxCubemapSize:C,maxAttributes:D,maxVertexUniforms:R,maxVaryings:T,maxFragmentUniforms:E,vertexTextures:L,floatFragmentTextures:I,floatVertexTextures:L&&I,maxSamples:f?h.getParameter(36183):0}}function Hu(h){const r=this;let o=null,a=0,c=!1,d=!1;const f=new Qn,g=new Wr,v={value:null,needsUpdate:!1};function y(){v.value!==o&&(v.value=o,v.needsUpdate=a>0),r.numPlanes=a,r.numIntersection=0}function w(b,x,M,C){const D=null!==b?b.length:0;let R=null;if(0!==D){if(R=v.value,!0!==C||null===R){const T=M+4*D,E=x.matrixWorldInverse;g.getNormalMatrix(E),(null===R||R.length<T)&&(R=new Float32Array(T));for(let L=0,I=M;L!==D;++L,I+=4)f.copy(b[L]).applyMatrix4(E,g),f.normal.toArray(R,I),R[I+3]=f.constant}v.value=R,v.needsUpdate=!0}return r.numPlanes=D,r.numIntersection=0,R}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(b,x,M){const C=0!==b.length||x||0!==a||c;return c=x,o=w(b,M,0),a=b.length,C},this.beginShadows=function(){d=!0,w(null)},this.endShadows=function(){d=!1,y()},this.setState=function(b,x,M){const C=b.clippingPlanes,D=b.clipIntersection,R=b.clipShadows,T=h.get(b);if(!c||null===C||0===C.length||d&&!R)d?w(null):y();else{const E=d?0:a,L=4*E;let I=T.clippingState||null;v.value=I,I=w(C,x,L,M);for(let V=0;V!==L;++V)I[V]=o[V];T.clippingState=I,this.numIntersection=D?this.numPlanes:0,this.numPlanes+=E}}}function _g(h){let r=new WeakMap;function o(f,g){return g===sc?f.mapping=Dr:g===ac&&(f.mapping=ao),f}function c(f){const g=f.target;g.removeEventListener("dispose",c);const v=r.get(g);void 0!==v&&(r.delete(g),v.dispose())}return{get:function a(f){if(f&&f.isTexture&&!1===f.isRenderTargetTexture){const g=f.mapping;if(g===sc||g===ac){if(r.has(f))return o(r.get(f).texture,f.mapping);{const v=f.image;if(v&&v.height>0){const y=new wc(v.height/2);return y.fromEquirectangularTexture(h,f),r.set(f,y),f.addEventListener("dispose",c),o(y.texture,f.mapping)}return null}}}return f},dispose:function d(){r=new WeakMap}}}qs.physical={uniforms:wr([qs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Me(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag};class ka extends Al{constructor(r=-1,o=1,a=1,c=-1,d=.1,f=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=r,this.right=o,this.top=a,this.bottom=c,this.near=d,this.far=f,this.updateProjectionMatrix()}copy(r,o){return super.copy(r,o),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=null===r.view?null:Object.assign({},r.view),this}setViewOffset(r,o,a,c,d,f){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=o,this.view.offsetX=a,this.view.offsetY=c,this.view.width=d,this.view.height=f,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const r=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),a=(this.right+this.left)/2,c=(this.top+this.bottom)/2;let d=a-r,f=a+r,g=c+o,v=c-o;if(null!==this.view&&this.view.enabled){const y=(this.right-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,f=d+y*this.view.width,g-=w*this.view.offsetY,v=g-w*this.view.height}this.projectionMatrix.makeOrthographic(d,f,g,v,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(r){const o=super.toJSON(r);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}ka.prototype.isOrthographicCamera=!0;class Oh extends wi{constructor(r){super(r),this.type="RawShaderMaterial"}}Oh.prototype.isRawShaderMaterial=!0;const ls=Math.pow(2,8),Oo=[.125,.215,.35,.446,.526,.582],Cy=5+Oo.length,zu=new ka,{_lodPlanes:Cc,_sizeLods:Gu,_sigmas:Tc}=Fh(),Ty=new ke;let Lh=null;const Va=(1+Math.sqrt(5))/2,Nl=1/Va,bg=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,Va,Nl),new k(0,Va,-Nl),new k(Nl,0,Va),new k(-Nl,0,Va),new k(Va,Nl,0),new k(-Va,Nl,0)];class Dy{constructor(r){this._renderer=r,this._pingPongRenderTarget=null,this._blurMaterial=function Ay(h){const r=new Float32Array(h),o=new k(0,1,0);return new Oh({name:"SphericalGaussianBlur",defines:{n:h},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:vi,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(r,o=0,a=.1,c=100){Lh=this._renderer.getRenderTarget();const d=this._allocateTargets();return this._sceneToCubeUV(r,a,c,d),o>0&&this._blur(d,0,0,o),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(r,o=null){return this._fromTexture(r,o)}fromCubemap(r,o=null){return this._fromTexture(r,o)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Ol(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=wg(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let r=0;r<Cc.length;r++)Cc[r].dispose()}_cleanup(r){this._renderer.setRenderTarget(Lh),r.scissorTest=!1,kh(r,0,0,r.width,r.height)}_fromTexture(r,o){Lh=this._renderer.getRenderTarget();const a=o||this._allocateTargets(r);return this._textureToCubeUV(r,a),this._applyPMREM(a),this._cleanup(a),a}_allocateTargets(r){const o={magFilter:Wn,minFilter:Wn,generateMipmaps:!1,type:Ir,format:Nr,encoding:kt,depthBuffer:!1},a=Ba(o);return a.depthBuffer=!r,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Ba(o)),a}_compileMaterial(r){const o=new Zn(Cc[0],r);this._renderer.compile(o,zu)}_sceneToCubeUV(r,o,a,c){const g=new Jn(90,1,o,a),v=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],w=this._renderer,b=w.autoClear,x=w.toneMapping;w.getClearColor(Ty),w.toneMapping=ai,w.autoClear=!1;const M=new Do({name:"PMREM.Background",side:rn,depthWrite:!1,depthTest:!1}),C=new Zn(new mn,M);let D=!1;const R=r.background;R?R.isColor&&(M.color.copy(R),r.background=null,D=!0):(M.color.copy(Ty),D=!0);for(let T=0;T<6;T++){const E=T%3;0===E?(g.up.set(0,v[T],0),g.lookAt(y[T],0,0)):1===E?(g.up.set(0,0,v[T]),g.lookAt(0,y[T],0)):(g.up.set(0,v[T],0),g.lookAt(0,0,y[T])),kh(c,E*ls,T>2?ls:0,ls,ls),w.setRenderTarget(c),D&&w.render(C,g),w.render(r,g)}C.geometry.dispose(),C.material.dispose(),w.toneMapping=x,w.autoClear=b,r.background=R}_textureToCubeUV(r,o){const a=this._renderer,c=r.mapping===Dr||r.mapping===ao;c?(null===this._cubemapShader&&(this._cubemapShader=Ol()),this._cubemapShader.uniforms.flipEnvMap.value=!1===r.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=wg());const d=c?this._cubemapShader:this._equirectShader,f=new Zn(Cc[0],d),g=d.uniforms;g.envMap.value=r,c||g.texelSize.value.set(1/r.image.width,1/r.image.height),kh(o,0,0,3*ls,2*ls),a.setRenderTarget(o),a.render(f,zu)}_applyPMREM(r){const o=this._renderer,a=o.autoClear;o.autoClear=!1;for(let c=1;c<Cy;c++){const d=Math.sqrt(Tc[c]*Tc[c]-Tc[c-1]*Tc[c-1]);this._blur(r,c-1,c,d,bg[(c-1)%bg.length])}o.autoClear=a}_blur(r,o,a,c,d){const f=this._pingPongRenderTarget;this._halfBlur(r,f,o,a,c,"latitudinal",d),this._halfBlur(f,r,a,a,c,"longitudinal",d)}_halfBlur(r,o,a,c,d,f,g){const v=this._renderer,y=this._blurMaterial;"latitudinal"!==f&&"longitudinal"!==f&&console.error("blur direction must be either latitudinal or longitudinal!");const b=new Zn(Cc[c],y),x=y.uniforms,M=Gu[a]-1,C=isFinite(d)?Math.PI/(2*M):2*Math.PI/39,D=d/C,R=isFinite(d)?1+Math.floor(3*D):20;R>20&&console.warn(`sigmaRadians, ${d}, is too large and will clip, as it requested ${R} samples when the maximum is set to 20`);const T=[];let E=0;for(let z=0;z<20;++z){const j=z/D,J=Math.exp(-j*j/2);T.push(J),0===z?E+=J:z<R&&(E+=2*J)}for(let z=0;z<T.length;z++)T[z]=T[z]/E;x.envMap.value=r.texture,x.samples.value=R,x.weights.value=T,x.latitudinal.value="latitudinal"===f,g&&(x.poleAxis.value=g),x.dTheta.value=C,x.mipInt.value=8-a;const L=Gu[c];kh(o,3*Math.max(0,ls-2*L),(0===c?0:2*ls)+2*L*(c>4?c-8+4:0),3*L,2*L),v.setRenderTarget(o),v.render(b,zu)}}function Fh(){const h=[],r=[],o=[];let a=8;for(let c=0;c<Cy;c++){const d=Math.pow(2,a);r.push(d);let f=1/d;c>4?f=Oo[c-8+4-1]:0===c&&(f=0),o.push(f);const g=1/(d-1),v=-g/2,y=1+g/2,w=[v,v,y,v,y,y,v,v,y,y,v,y],b=6,x=6,M=3,C=2,D=1,R=new Float32Array(M*x*b),T=new Float32Array(C*x*b),E=new Float32Array(D*x*b);for(let I=0;I<b;I++){const V=I%3*2/3-1,z=I>2?0:-1;R.set([V,z,0,V+2/3,z,0,V+2/3,z+1,0,V,z,0,V+2/3,z+1,0,V,z+1,0],M*x*I),T.set(w,C*x*I),E.set([I,I,I,I,I,I],D*x*I)}const L=new ft;L.setAttribute("position",new en(R,M)),L.setAttribute("uv",new en(T,C)),L.setAttribute("faceIndex",new en(E,D)),h.push(L),a>4&&a--}return{_lodPlanes:h,_sizeLods:r,_sigmas:o}}function Ba(h){const r=new Eo(3*ls,3*ls,h);return r.texture.mapping=gl,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function kh(h,r,o,a,c){h.viewport.set(r,o,a,c),h.scissor.set(r,o,a,c)}function wg(){const h=new Me(1,1);return new Oh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:h}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:vi,depthTest:!1,depthWrite:!1})}function Ol(){return new Oh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:vi,depthTest:!1,depthWrite:!1})}function kr(h){let r=new WeakMap,o=null;function d(g){const v=g.target;v.removeEventListener("dispose",d);const y=r.get(v);void 0!==y&&(r.delete(v),y.dispose())}return{get:function a(g){if(g&&g.isTexture){const v=g.mapping,y=v===sc||v===ac,w=v===Dr||v===ao;if(y||w){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let b=r.get(g);return null===o&&(o=new Dy(h)),b=y?o.fromEquirectangular(g,b):o.fromCubemap(g,b),r.set(g,b),b.texture}if(r.has(g))return r.get(g).texture;{const b=g.image;if(y&&b&&b.height>0||w&&b&&function c(g){let v=0;for(let w=0;w<6;w++)void 0!==g[w]&&v++;return 6===v}(b)){null===o&&(o=new Dy(h));const x=y?o.fromEquirectangular(g):o.fromCubemap(g);return r.set(g,x),g.addEventListener("dispose",d),x.texture}return null}}}return g},dispose:function f(){r=new WeakMap,null!==o&&(o.dispose(),o=null)}}}function Ww(h){const r={};function o(a){if(void 0!==r[a])return r[a];let c;switch(a){case"WEBGL_depth_texture":c=h.getExtension("WEBGL_depth_texture")||h.getExtension("MOZ_WEBGL_depth_texture")||h.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=h.getExtension("WEBGL_compressed_texture_s3tc")||h.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||h.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=h.getExtension("WEBGL_compressed_texture_pvrtc")||h.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=h.getExtension(a)}return r[a]=c,c}return{has:function(a){return null!==o(a)},init:function(a){a.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(a){const c=o(a);return null===c&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),c}}}function Er(h,r,o,a){const c={},d=new WeakMap;function f(b){const x=b.target;null!==x.index&&r.remove(x.index);for(const C in x.attributes)r.remove(x.attributes[C]);x.removeEventListener("dispose",f),delete c[x.id];const M=d.get(x);M&&(r.remove(M),d.delete(x)),a.releaseStatesOfGeometry(x),!0===x.isInstancedBufferGeometry&&delete x._maxInstanceCount,o.memory.geometries--}function y(b){const x=[],M=b.index,C=b.attributes.position;let D=0;if(null!==M){const E=M.array;D=M.version;for(let L=0,I=E.length;L<I;L+=3){const V=E[L+0],z=E[L+1],j=E[L+2];x.push(V,z,z,j,j,V)}}else{D=C.version;for(let L=0,I=C.array.length/3-1;L<I;L+=3){const V=L+0,z=L+1,j=L+2;x.push(V,z,z,j,j,V)}}const R=new(Jv(x)?Th:Ru)(x,1);R.version=D;const T=d.get(b);T&&r.remove(T),d.set(b,R)}return{get:function g(b,x){return!0===c[x.id]||(x.addEventListener("dispose",f),c[x.id]=!0,o.memory.geometries++),x},update:function v(b){const x=b.attributes;for(const C in x)r.update(x[C],34962);const M=b.morphAttributes;for(const C in M){const D=M[C];for(let R=0,T=D.length;R<T;R++)r.update(D[R],34962)}},getWireframeAttribute:function w(b){const x=d.get(b);if(x){const M=b.index;null!==M&&x.version<M.version&&y(b)}else y(b);return d.get(b)}}}function xg(h,r,o,a){const c=a.isWebGL2;let d,g,v;this.setMode=function f(x){d=x},this.setIndex=function y(x){g=x.type,v=x.bytesPerElement},this.render=function w(x,M){h.drawElements(d,M,g,x*v),o.update(M,d,1)},this.renderInstances=function b(x,M,C){if(0===C)return;let D,R;if(c)D=h,R="drawElementsInstanced";else if(D=r.get("ANGLE_instanced_arrays"),R="drawElementsInstancedANGLE",null===D)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");D[R](d,M,g,x*v,C),o.update(M,d,C)}}function jw(h){const o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function c(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function a(d,f,g){switch(o.calls++,f){case 4:o.triangles+=g*(d/3);break;case 1:o.lines+=g*(d/2);break;case 3:o.lines+=g*(d-1);break;case 2:o.lines+=g*d;break;case 0:o.points+=g*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",f)}}}}class Vh extends hr{constructor(r=null,o=1,a=1,c=1){super(null),this.image={data:r,width:o,height:a,depth:c},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function Wu(h,r){return h[0]-r[0]}function $w(h,r){return Math.abs(r[1])-Math.abs(h[1])}function Mg(h,r){let o=1;const a=r.isInterleavedBufferAttribute?r.data.array:r.array;a instanceof Int8Array?o=127:a instanceof Int16Array?o=32767:a instanceof Int32Array?o=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",a),h.divideScalar(o)}function Eg(h,r,o){const a={},c=new Float32Array(8),d=new WeakMap,f=new k,g=[];for(let y=0;y<8;y++)g[y]=[y,0];return{update:function v(y,w,b,x){const M=y.morphTargetInfluences;if(!0===r.isWebGL2){const C=w.morphAttributes.position.length;let D=d.get(w);if(void 0===D||D.count!==C){let q=function(){oe.dispose(),d.delete(w),w.removeEventListener("dispose",q)};void 0!==D&&D.texture.dispose();const E=void 0!==w.morphAttributes.normal,L=w.morphAttributes.position,I=w.morphAttributes.normal||[],z=!0===E?2:1;let j=w.attributes.position.count*z,J=1;j>r.maxTextureSize&&(J=Math.ceil(j/r.maxTextureSize),j=r.maxTextureSize);const he=new Float32Array(j*J*4*C),oe=new Vh(he,j,J,C);oe.format=Nr,oe.type=xo,oe.needsUpdate=!0;const N=4*z;for(let K=0;K<C;K++){const ie=L[K],le=I[K],te=j*J*4*K;for(let ve=0;ve<ie.count;ve++){f.fromBufferAttribute(ie,ve),!0===ie.normalized&&Mg(f,ie);const Ie=ve*N;he[te+Ie+0]=f.x,he[te+Ie+1]=f.y,he[te+Ie+2]=f.z,he[te+Ie+3]=0,!0===E&&(f.fromBufferAttribute(le,ve),!0===le.normalized&&Mg(f,le),he[te+Ie+4]=f.x,he[te+Ie+5]=f.y,he[te+Ie+6]=f.z,he[te+Ie+7]=0)}}D={count:C,texture:oe,size:new Me(j,J)},d.set(w,D),w.addEventListener("dispose",q)}let R=0;for(let E=0;E<M.length;E++)R+=M[E];const T=w.morphTargetsRelative?1:1-R;x.getUniforms().setValue(h,"morphTargetBaseInfluence",T),x.getUniforms().setValue(h,"morphTargetInfluences",M),x.getUniforms().setValue(h,"morphTargetsTexture",D.texture,o),x.getUniforms().setValue(h,"morphTargetsTextureSize",D.size)}else{const C=void 0===M?0:M.length;let D=a[w.id];if(void 0===D||D.length!==C){D=[];for(let I=0;I<C;I++)D[I]=[I,0];a[w.id]=D}for(let I=0;I<C;I++){const V=D[I];V[0]=I,V[1]=M[I]}D.sort($w);for(let I=0;I<8;I++)I<C&&D[I][1]?(g[I][0]=D[I][0],g[I][1]=D[I][1]):(g[I][0]=Number.MAX_SAFE_INTEGER,g[I][1]=0);g.sort(Wu);const R=w.morphAttributes.position,T=w.morphAttributes.normal;let E=0;for(let I=0;I<8;I++){const V=g[I],z=V[0],j=V[1];z!==Number.MAX_SAFE_INTEGER&&j?(R&&w.getAttribute("morphTarget"+I)!==R[z]&&w.setAttribute("morphTarget"+I,R[z]),T&&w.getAttribute("morphNormal"+I)!==T[z]&&w.setAttribute("morphNormal"+I,T[z]),c[I]=j,E+=j):(R&&!0===w.hasAttribute("morphTarget"+I)&&w.deleteAttribute("morphTarget"+I),T&&!0===w.hasAttribute("morphNormal"+I)&&w.deleteAttribute("morphNormal"+I),c[I]=0)}const L=w.morphTargetsRelative?1:1-E;x.getUniforms().setValue(h,"morphTargetBaseInfluence",L),x.getUniforms().setValue(h,"morphTargetInfluences",c)}}}}function Bh(h,r,o,a){let c=new WeakMap;function g(v){const y=v.target;y.removeEventListener("dispose",g),o.remove(y.instanceMatrix),null!==y.instanceColor&&o.remove(y.instanceColor)}return{update:function d(v){const y=a.render.frame,b=r.get(v,v.geometry);return c.get(b)!==y&&(r.update(b),c.set(b,y)),v.isInstancedMesh&&(!1===v.hasEventListener("dispose",g)&&v.addEventListener("dispose",g),o.update(v.instanceMatrix,34962),null!==v.instanceColor&&o.update(v.instanceColor,34962)),b},dispose:function f(){c=new WeakMap}}}Vh.prototype.isDataTexture2DArray=!0;class Sg extends hr{constructor(r=null,o=1,a=1,c=1){super(null),this.image={data:r,width:o,height:a,depth:c},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Sg.prototype.isDataTexture3D=!0;const Iy=new hr,Ry=new Vh,Py=new Sg,Cg=new Li,Ny=[],Tg=[],Oy=new Float32Array(16),Ly=new Float32Array(9),qw=new Float32Array(4);function Ll(h,r,o){const a=h[0];if(a<=0||a>0)return h;const c=r*o;let d=Ny[c];if(void 0===d&&(d=new Float32Array(c),Ny[c]=d),0!==r){a.toArray(d,0);for(let f=1,g=0;f!==r;++f)g+=o,h[f].toArray(d,g)}return d}function fi(h,r){if(h.length!==r.length)return!1;for(let o=0,a=h.length;o<a;o++)if(h[o]!==r[o])return!1;return!0}function vn(h,r){for(let o=0,a=r.length;o<a;o++)h[o]=r[o]}function Dg(h,r){let o=Tg[r];void 0===o&&(o=new Int32Array(r),Tg[r]=o);for(let a=0;a!==r;++a)o[a]=h.allocateTextureUnit();return o}function Fy(h,r){const o=this.cache;o[0]!==r&&(h.uniform1f(this.addr,r),o[0]=r)}function IC(h,r){const o=this.cache;if(void 0!==r.x)(o[0]!==r.x||o[1]!==r.y)&&(h.uniform2f(this.addr,r.x,r.y),o[0]=r.x,o[1]=r.y);else{if(fi(o,r))return;h.uniform2fv(this.addr,r),vn(o,r)}}function Ag(h,r){const o=this.cache;if(void 0!==r.x)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z)&&(h.uniform3f(this.addr,r.x,r.y,r.z),o[0]=r.x,o[1]=r.y,o[2]=r.z);else if(void 0!==r.r)(o[0]!==r.r||o[1]!==r.g||o[2]!==r.b)&&(h.uniform3f(this.addr,r.r,r.g,r.b),o[0]=r.r,o[1]=r.g,o[2]=r.b);else{if(fi(o,r))return;h.uniform3fv(this.addr,r),vn(o,r)}}function cs(h,r){const o=this.cache;if(void 0!==r.x)(o[0]!==r.x||o[1]!==r.y||o[2]!==r.z||o[3]!==r.w)&&(h.uniform4f(this.addr,r.x,r.y,r.z,r.w),o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=r.w);else{if(fi(o,r))return;h.uniform4fv(this.addr,r),vn(o,r)}}function ky(h,r){const o=this.cache,a=r.elements;if(void 0===a){if(fi(o,r))return;h.uniformMatrix2fv(this.addr,!1,r),vn(o,r)}else{if(fi(o,a))return;qw.set(a),h.uniformMatrix2fv(this.addr,!1,qw),vn(o,a)}}function Dc(h,r){const o=this.cache,a=r.elements;if(void 0===a){if(fi(o,r))return;h.uniformMatrix3fv(this.addr,!1,r),vn(o,r)}else{if(fi(o,a))return;Ly.set(a),h.uniformMatrix3fv(this.addr,!1,Ly),vn(o,a)}}function Xw(h,r){const o=this.cache,a=r.elements;if(void 0===a){if(fi(o,r))return;h.uniformMatrix4fv(this.addr,!1,r),vn(o,r)}else{if(fi(o,a))return;Oy.set(a),h.uniformMatrix4fv(this.addr,!1,Oy),vn(o,a)}}function Yw(h,r){const o=this.cache;o[0]!==r&&(h.uniform1i(this.addr,r),o[0]=r)}function Vy(h,r){const o=this.cache;fi(o,r)||(h.uniform2iv(this.addr,r),vn(o,r))}function RC(h,r){const o=this.cache;fi(o,r)||(h.uniform3iv(this.addr,r),vn(o,r))}function PC(h,r){const o=this.cache;fi(o,r)||(h.uniform4iv(this.addr,r),vn(o,r))}function NC(h,r){const o=this.cache;o[0]!==r&&(h.uniform1ui(this.addr,r),o[0]=r)}function OC(h,r){const o=this.cache;fi(o,r)||(h.uniform2uiv(this.addr,r),vn(o,r))}function LC(h,r){const o=this.cache;fi(o,r)||(h.uniform3uiv(this.addr,r),vn(o,r))}function Zw(h,r){const o=this.cache;fi(o,r)||(h.uniform4uiv(this.addr,r),vn(o,r))}function Ac(h,r,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(h.uniform1i(this.addr,c),a[0]=c),o.safeSetTexture2D(r||Iy,c)}function Ki(h,r,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(h.uniform1i(this.addr,c),a[0]=c),o.setTexture3D(r||Py,c)}function By(h,r,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(h.uniform1i(this.addr,c),a[0]=c),o.safeSetTextureCube(r||Cg,c)}function Jw(h,r,o){const a=this.cache,c=o.allocateTextureUnit();a[0]!==c&&(h.uniform1i(this.addr,c),a[0]=c),o.setTexture2DArray(r||Ry,c)}function Nn(h,r){h.uniform1fv(this.addr,r)}function Qw(h,r){const o=Ll(r,this.size,2);h.uniform2fv(this.addr,o)}function Rg(h,r){const o=Ll(r,this.size,3);h.uniform3fv(this.addr,o)}function ju(h,r){const o=Ll(r,this.size,4);h.uniform4fv(this.addr,o)}function Kw(h,r){const o=Ll(r,this.size,4);h.uniformMatrix2fv(this.addr,!1,o)}function Uy(h,r){const o=Ll(r,this.size,9);h.uniformMatrix3fv(this.addr,!1,o)}function Hy(h,r){const o=Ll(r,this.size,16);h.uniformMatrix4fv(this.addr,!1,o)}function Uh(h,r){h.uniform1iv(this.addr,r)}function Hh(h,r){h.uniform2iv(this.addr,r)}function Pg(h,r){h.uniform3iv(this.addr,r)}function ex(h,r){h.uniform4iv(this.addr,r)}function tx(h,r){h.uniform1uiv(this.addr,r)}function nx(h,r){h.uniform2uiv(this.addr,r)}function zy(h,r){h.uniform3uiv(this.addr,r)}function rx(h,r){h.uniform4uiv(this.addr,r)}function ix(h,r,o){const a=r.length,c=Dg(o,a);h.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.safeSetTexture2D(r[d]||Iy,c[d])}function Fi(h,r,o){const a=r.length,c=Dg(o,a);h.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTexture3D(r[d]||Py,c[d])}function Ng(h,r,o){const a=r.length,c=Dg(o,a);h.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.safeSetTextureCube(r[d]||Cg,c[d])}function Gy(h,r,o){const a=r.length,c=Dg(o,a);h.uniform1iv(this.addr,c);for(let d=0;d!==a;++d)o.setTexture2DArray(r[d]||Ry,c[d])}function pi(h,r,o){this.id=h,this.addr=o,this.cache=[],this.setValue=function Ig(h){switch(h){case 5126:return Fy;case 35664:return IC;case 35665:return Ag;case 35666:return cs;case 35674:return ky;case 35675:return Dc;case 35676:return Xw;case 5124:case 35670:return Yw;case 35667:case 35671:return Vy;case 35668:case 35672:return RC;case 35669:case 35673:return PC;case 5125:return NC;case 36294:return OC;case 36295:return LC;case 36296:return Zw;case 35678:case 36198:case 36298:case 36306:case 35682:return Ac;case 35679:case 36299:case 36307:return Ki;case 35680:case 36300:case 36308:case 36293:return By;case 36289:case 36303:case 36311:case 36292:return Jw}}(r.type)}function Ic(h,r,o){this.id=h,this.addr=o,this.cache=[],this.size=r.size,this.setValue=function Og(h){switch(h){case 5126:return Nn;case 35664:return Qw;case 35665:return Rg;case 35666:return ju;case 35674:return Kw;case 35675:return Uy;case 35676:return Hy;case 5124:case 35670:return Uh;case 35667:case 35671:return Hh;case 35668:case 35672:return Pg;case 35669:case 35673:return ex;case 5125:return tx;case 36294:return nx;case 36295:return zy;case 36296:return rx;case 35678:case 36198:case 36298:case 36306:case 35682:return ix;case 35679:case 36299:case 36307:return Fi;case 35680:case 36300:case 36308:case 36293:return Ng;case 36289:case 36303:case 36311:case 36292:return Gy}}(r.type)}function Lg(h){this.id=h,this.seq=[],this.map={}}Ic.prototype.updateCache=function(h){const r=this.cache;h instanceof Float32Array&&r.length!==h.length&&(this.cache=new Float32Array(h.length)),vn(r,h)},Lg.prototype.setValue=function(h,r,o){const a=this.seq;for(let c=0,d=a.length;c!==d;++c){const f=a[c];f.setValue(h,r[f.id],o)}};const zh=/(\w+)(\])?(\[|\.)?/g;function Wy(h,r){h.seq.push(r),h.map[r.id]=r}function jy(h,r,o){const a=h.name,c=a.length;for(zh.lastIndex=0;;){const d=zh.exec(a);let g=d[1];const y=d[3];if("]"===d[2]&&(g|=0),void 0===y||"["===y&&zh.lastIndex+2===c){Wy(o,void 0===y?new pi(g,h,r):new Ic(g,h,r));break}{let b=o.map[g];void 0===b&&(b=new Lg(g),Wy(o,b)),o=b}}}function Ha(h,r){this.seq=[],this.map={};const o=h.getProgramParameter(r,35718);for(let a=0;a<o;++a){const c=h.getActiveUniform(r,a);jy(c,h.getUniformLocation(r,c.name),this)}}function Fg(h,r,o){const a=h.createShader(r);return h.shaderSource(a,o),h.compileShader(a),a}Ha.prototype.setValue=function(h,r,o,a){const c=this.map[r];void 0!==c&&c.setValue(h,o,a)},Ha.prototype.setOptional=function(h,r,o){const a=r[o];void 0!==a&&this.setValue(h,o,a)},Ha.upload=function(h,r,o,a){for(let c=0,d=r.length;c!==d;++c){const f=r[c],g=o[f.id];!1!==g.needsUpdate&&f.setValue(h,g.value,a)}},Ha.seqWithValue=function(h,r){const o=[];for(let a=0,c=h.length;a!==c;++a){const d=h[a];d.id in r&&o.push(d)}return o};let ox=0;function qy(h,r,o){const a=h.getShaderParameter(r,35713),c=h.getShaderInfoLog(r).trim();return a&&""===c?"":o.toUpperCase()+"\n\n"+c+"\n\n"+function $y(h){const r=h.split("\n");for(let o=0;o<r.length;o++)r[o]=o+1+": "+r[o];return r.join("\n")}(h.getShaderSource(r))}function ax(h,r){const o=function sx(h){switch(h){case kt:return["Linear","( value )"];case xt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",h),["Linear","( value )"]}}(r);return"vec4 "+h+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function lx(h,r){let o;switch(r){case Tr:o="Linear";break;case ji:o="Reinhard";break;case qo:o="OptimizedCineon";break;case gu:o="ACESFilmic";break;case Xo:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),o="Linear"}return"vec3 "+h+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function za(h){return""!==h}function kg(h,r){return h.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function Vg(h,r){return h.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const Jy=/^[ \t]*#include +<([\w\d./]+)>/gm;function Gh(h){return h.replace(Jy,cx)}function cx(h,r){const o=Yt[r];if(void 0===o)throw new Error("Can not resolve #include <"+r+">");return Gh(o)}const ux=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,dx=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qy(h){return h.replace(dx,hx).replace(ux,Ky)}function Ky(h,r,o,a){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),hx(0,r,o,a)}function hx(h,r,o,a){let c="";for(let d=parseInt(r);d<parseInt(o);d++)c+=a.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return c}function Bg(h){let r="precision "+h.precision+" float;\nprecision "+h.precision+" int;";return"highp"===h.precision?r+="\n#define HIGH_PRECISION":"mediump"===h.precision?r+="\n#define MEDIUM_PRECISION":"lowp"===h.precision&&(r+="\n#define LOW_PRECISION"),r}function e_(h,r,o,a){const c=h.getContext(),d=o.defines;let f=o.vertexShader,g=o.fragmentShader;const v=function fx(h){let r="SHADOWMAP_TYPE_BASIC";return h.shadowMapType===At?r="SHADOWMAP_TYPE_PCF":h.shadowMapType===or?r="SHADOWMAP_TYPE_PCF_SOFT":h.shadowMapType===zt&&(r="SHADOWMAP_TYPE_VSM"),r}(o),y=function px(h){let r="ENVMAP_TYPE_CUBE";if(h.envMap)switch(h.envMapMode){case Dr:case ao:r="ENVMAP_TYPE_CUBE";break;case gl:case wa:r="ENVMAP_TYPE_CUBE_UV"}return r}(o),w=function FC(h){let r="ENVMAP_MODE_REFLECTION";if(h.envMap)switch(h.envMapMode){case ao:case wa:r="ENVMAP_MODE_REFRACTION"}return r}(o),b=function gx(h){let r="ENVMAP_BLENDING_NONE";if(h.envMap)switch(h.combine){case Bt:r="ENVMAP_BLENDING_MULTIPLY";break;case Ts:r="ENVMAP_BLENDING_MIX";break;case Ds:r="ENVMAP_BLENDING_ADD"}return r}(o),x=o.isWebGL2?"":function Xy(h){return[h.extensionDerivatives||h.envMapCubeUV||h.bumpMap||h.tangentSpaceNormalMap||h.clearcoatNormalMap||h.flatShading||"physical"===h.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(h.extensionFragDepth||h.logarithmicDepthBuffer)&&h.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",h.extensionDrawBuffers&&h.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(h.extensionShaderTextureLOD||h.envMap||h.transmission)&&h.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(za).join("\n")}(o),M=function Yy(h){const r=[];for(const o in h){const a=h[o];!1!==a&&r.push("#define "+o+" "+a)}return r.join("\n")}(d),C=c.createProgram();let D,R,T=o.glslVersion?"#version "+o.glslVersion+"\n":"";o.isRawShaderMaterial?(D=[M].filter(za).join("\n"),D.length>0&&(D+="\n"),R=[x,M].filter(za).join("\n"),R.length>0&&(R+="\n")):(D=[Bg(o),"#define SHADER_NAME "+o.shaderName,M,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+w:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.morphTargets&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargets&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+v:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(za).join("\n"),R=[x,Bg(o),"#define SHADER_NAME "+o.shaderName,M,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+y:"",o.envMap?"#define "+w:"",o.envMap?"#define "+b:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularColorMap?"#define USE_SPECULARCOLORMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEENCOLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+v:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(o.extensionShaderTextureLOD||o.envMap)&&o.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==ai?"#define TONE_MAPPING":"",o.toneMapping!==ai?Yt.tonemapping_pars_fragment:"",o.toneMapping!==ai?lx("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.transparent?"":"#define OPAQUE",Yt.encodings_pars_fragment,ax("linearToOutputTexel",o.outputEncoding),o.depthPacking?"#define DEPTH_PACKING "+o.depthPacking:"","\n"].filter(za).join("\n")),f=Gh(f),f=kg(f,o),f=Vg(f,o),g=Gh(g),g=kg(g,o),g=Vg(g,o),f=Qy(f),g=Qy(g),o.isWebGL2&&!0!==o.isRawShaderMaterial&&(T="#version 300 es\n",D=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+D,R=["#define varying in",o.glslVersion===Yv?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===Yv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+R);const L=T+R+g,I=Fg(c,35633,T+D+f),V=Fg(c,35632,L);if(c.attachShader(C,I),c.attachShader(C,V),void 0!==o.index0AttributeName?c.bindAttribLocation(C,0,o.index0AttributeName):!0===o.morphTargets&&c.bindAttribLocation(C,0,"position"),c.linkProgram(C),h.debug.checkShaderErrors){const J=c.getProgramInfoLog(C).trim(),he=c.getShaderInfoLog(I).trim(),oe=c.getShaderInfoLog(V).trim();let N=!0,q=!0;if(!1===c.getProgramParameter(C,35714)){N=!1;const K=qy(c,I,"vertex"),ie=qy(c,V,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(C,35715)+"\n\nProgram Info Log: "+J+"\n"+K+"\n"+ie)}else""!==J?console.warn("THREE.WebGLProgram: Program Info Log:",J):(""===he||""===oe)&&(q=!1);q&&(this.diagnostics={runnable:N,programLog:J,vertexShader:{log:he,prefix:D},fragmentShader:{log:oe,prefix:R}})}let z,j;return c.deleteShader(I),c.deleteShader(V),this.getUniforms=function(){return void 0===z&&(z=new Ha(c,C)),z},this.getAttributes=function(){return void 0===j&&(j=function Zy(h,r){const o={},a=h.getProgramParameter(r,35721);for(let c=0;c<a;c++){const d=h.getActiveAttrib(r,c),f=d.name;let g=1;35674===d.type&&(g=2),35675===d.type&&(g=3),35676===d.type&&(g=4),o[f]={type:d.type,location:h.getAttribLocation(r,f),locationSize:g}}return o}(c,C)),j},this.destroy=function(){a.releaseStatesOfProgram(this),c.deleteProgram(C),this.program=void 0},this.name=o.shaderName,this.id=ox++,this.cacheKey=r,this.usedTimes=1,this.program=C,this.vertexShader=I,this.fragmentShader=V,this}let Ug=0;class mx{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(r){const a=r.fragmentShader,c=this._getShaderStage(r.vertexShader),d=this._getShaderStage(a),f=this._getShaderCacheForMaterial(r);return!1===f.has(c)&&(f.add(c),c.usedTimes++),!1===f.has(d)&&(f.add(d),d.usedTimes++),this}remove(r){const o=this.materialCache.get(r);for(const a of o)a.usedTimes--,0===a.usedTimes&&this.shaderCache.delete(a);return this.materialCache.delete(r),this}getVertexShaderID(r){return this._getShaderStage(r.vertexShader).id}getFragmentShaderID(r){return this._getShaderStage(r.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(r){const o=this.materialCache;return!1===o.has(r)&&o.set(r,new Set),o.get(r)}_getShaderStage(r){const o=this.shaderCache;if(!1===o.has(r)){const a=new Ga;o.set(r,a)}return o.get(r)}}class Ga{constructor(){this.id=Ug++,this.usedTimes=0}}function Wh(h,r,o,a,c,d,f){const g=new Lr,v=new mx,y=[],w=c.isWebGL2,b=c.logarithmicDepthBuffer,x=c.floatVertexTextures,M=c.maxVertexUniforms,C=c.vertexTextures;let D=c.precision;const R={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function E(N,q,K,ie,le){const te=ie.fog,Ie=(N.isMeshStandardMaterial?o:r).get(N.envMap||(N.isMeshStandardMaterial?ie.environment:null)),Ze=R[N.type],_e=le.isSkinnedMesh?function T(N){const K=N.skeleton.bones;if(x)return 1024;{const le=Math.floor((M-20)/4),te=Math.min(le,K.length);return te<K.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+K.length+" bones. This GPU supports "+te+"."),0):te}}(le):0;let De,Ge,et,at;if(null!==N.precision&&(D=c.getMaxPrecision(N.precision),D!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",D,"instead.")),Ze){const Ye=qs[Ze];De=Ye.vertexShader,Ge=Ye.fragmentShader}else De=N.vertexShader,Ge=N.fragmentShader,v.update(N),et=v.getVertexShaderID(N),at=v.getFragmentShaderID(N);const me=h.getRenderTarget(),ot=N.clearcoat>0;return{isWebGL2:w,shaderID:Ze,shaderName:N.type,vertexShader:De,fragmentShader:Ge,defines:N.defines,customVertexShaderID:et,customFragmentShaderID:at,isRawShaderMaterial:!0===N.isRawShaderMaterial,glslVersion:N.glslVersion,precision:D,instancing:!0===le.isInstancedMesh,instancingColor:!0===le.isInstancedMesh&&null!==le.instanceColor,supportsVertexTextures:C,outputEncoding:null===me?h.outputEncoding:!0===me.isXRRenderTarget?me.texture.encoding:kt,map:!!N.map,matcap:!!N.matcap,envMap:!!Ie,envMapMode:Ie&&Ie.mapping,envMapCubeUV:!!Ie&&(Ie.mapping===gl||Ie.mapping===wa),lightMap:!!N.lightMap,aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,objectSpaceNormalMap:N.normalMapType===ah,tangentSpaceNormalMap:N.normalMapType===wl,decodeVideoTexture:!!N.map&&!0===N.map.isVideoTexture&&N.map.encoding===xt,clearcoat:ot,clearcoatMap:ot&&!!N.clearcoatMap,clearcoatRoughnessMap:ot&&!!N.clearcoatRoughnessMap,clearcoatNormalMap:ot&&!!N.clearcoatNormalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,specularIntensityMap:!!N.specularIntensityMap,specularColorMap:!!N.specularColorMap,transparent:N.transparent,alphaMap:!!N.alphaMap,alphaTest:N.alphaTest>0,gradientMap:!!N.gradientMap,sheen:N.sheen>0,sheenColorMap:!!N.sheenColorMap,sheenRoughnessMap:!!N.sheenRoughnessMap,transmission:N.transmission>0,transmissionMap:!!N.transmissionMap,thicknessMap:!!N.thicknessMap,combine:N.combine,vertexTangents:!!N.normalMap&&!!le.geometry&&!!le.geometry.attributes.tangent,vertexColors:N.vertexColors,vertexAlphas:!0===N.vertexColors&&!!le.geometry&&!!le.geometry.attributes.color&&4===le.geometry.attributes.color.itemSize,vertexUvs:!!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatMap||N.clearcoatRoughnessMap||N.clearcoatNormalMap||N.displacementMap||N.transmissionMap||N.thicknessMap||N.specularIntensityMap||N.specularColorMap||N.sheenColorMap||N.sheenRoughnessMap),uvsVertexOnly:!(N.map||N.bumpMap||N.normalMap||N.specularMap||N.alphaMap||N.emissiveMap||N.roughnessMap||N.metalnessMap||N.clearcoatNormalMap||N.transmission>0||N.transmissionMap||N.thicknessMap||N.specularIntensityMap||N.specularColorMap||N.sheen>0||N.sheenColorMap||N.sheenRoughnessMap||!N.displacementMap),fog:!!te,useFog:N.fog,fogExp2:te&&te.isFogExp2,flatShading:!!N.flatShading,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:b,skinning:!0===le.isSkinnedMesh&&_e>0,maxBones:_e,useVertexTexture:x,morphTargets:!!le.geometry&&!!le.geometry.morphAttributes.position,morphNormals:!!le.geometry&&!!le.geometry.morphAttributes.normal,morphTargetsCount:le.geometry&&le.geometry.morphAttributes.position?le.geometry.morphAttributes.position.length:0,numDirLights:q.directional.length,numPointLights:q.point.length,numSpotLights:q.spot.length,numRectAreaLights:q.rectArea.length,numHemiLights:q.hemi.length,numDirLightShadows:q.directionalShadowMap.length,numPointLightShadows:q.pointShadowMap.length,numSpotLightShadows:q.spotShadowMap.length,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:N.dithering,shadowMapEnabled:h.shadowMap.enabled&&K.length>0,shadowMapType:h.shadowMap.type,toneMapping:N.toneMapped?h.toneMapping:ai,physicallyCorrectLights:h.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===Di,flipSided:N.side===rn,depthPacking:void 0!==N.depthPacking&&N.depthPacking,index0AttributeName:N.index0AttributeName,extensionDerivatives:N.extensions&&N.extensions.derivatives,extensionFragDepth:N.extensions&&N.extensions.fragDepth,extensionDrawBuffers:N.extensions&&N.extensions.drawBuffers,extensionShaderTextureLOD:N.extensions&&N.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||a.has("EXT_shader_texture_lod"),customProgramCacheKey:N.customProgramCacheKey()}},getProgramCacheKey:function L(N){const q=[];if(N.shaderID?q.push(N.shaderID):(q.push(N.customVertexShaderID),q.push(N.customFragmentShaderID)),void 0!==N.defines)for(const K in N.defines)q.push(K),q.push(N.defines[K]);return!1===N.isRawShaderMaterial&&(function I(N,q){N.push(q.precision),N.push(q.outputEncoding),N.push(q.envMapMode),N.push(q.combine),N.push(q.vertexUvs),N.push(q.fogExp2),N.push(q.sizeAttenuation),N.push(q.maxBones),N.push(q.morphTargetsCount),N.push(q.numDirLights),N.push(q.numPointLights),N.push(q.numSpotLights),N.push(q.numHemiLights),N.push(q.numRectAreaLights),N.push(q.numDirLightShadows),N.push(q.numPointLightShadows),N.push(q.numSpotLightShadows),N.push(q.shadowMapType),N.push(q.toneMapping),N.push(q.numClippingPlanes),N.push(q.numClipIntersection)}(q,N),function V(N,q){g.disableAll(),q.isWebGL2&&g.enable(0),q.supportsVertexTextures&&g.enable(1),q.instancing&&g.enable(2),q.instancingColor&&g.enable(3),q.map&&g.enable(4),q.matcap&&g.enable(5),q.envMap&&g.enable(6),q.envMapCubeUV&&g.enable(7),q.lightMap&&g.enable(8),q.aoMap&&g.enable(9),q.emissiveMap&&g.enable(10),q.bumpMap&&g.enable(11),q.normalMap&&g.enable(12),q.objectSpaceNormalMap&&g.enable(13),q.tangentSpaceNormalMap&&g.enable(14),q.clearcoat&&g.enable(15),q.clearcoatMap&&g.enable(16),q.clearcoatRoughnessMap&&g.enable(17),q.clearcoatNormalMap&&g.enable(18),q.displacementMap&&g.enable(19),q.specularMap&&g.enable(20),q.roughnessMap&&g.enable(21),q.metalnessMap&&g.enable(22),q.gradientMap&&g.enable(23),q.alphaMap&&g.enable(24),q.alphaTest&&g.enable(25),q.vertexColors&&g.enable(26),q.vertexAlphas&&g.enable(27),q.vertexUvs&&g.enable(28),q.vertexTangents&&g.enable(29),q.uvsVertexOnly&&g.enable(30),q.fog&&g.enable(31),N.push(g.mask),g.disableAll(),q.useFog&&g.enable(0),q.flatShading&&g.enable(1),q.logarithmicDepthBuffer&&g.enable(2),q.skinning&&g.enable(3),q.useVertexTexture&&g.enable(4),q.morphTargets&&g.enable(5),q.morphNormals&&g.enable(6),q.premultipliedAlpha&&g.enable(7),q.shadowMapEnabled&&g.enable(8),q.physicallyCorrectLights&&g.enable(9),q.doubleSided&&g.enable(10),q.flipSided&&g.enable(11),q.depthPacking&&g.enable(12),q.dithering&&g.enable(13),q.specularIntensityMap&&g.enable(14),q.specularColorMap&&g.enable(15),q.transmission&&g.enable(16),q.transmissionMap&&g.enable(17),q.thicknessMap&&g.enable(18),q.sheen&&g.enable(19),q.sheenColorMap&&g.enable(20),q.sheenRoughnessMap&&g.enable(21),q.decodeVideoTexture&&g.enable(22),q.transparent&&g.enable(23),N.push(g.mask)}(q,N),q.push(h.outputEncoding)),q.push(N.customProgramCacheKey),q.join()},getUniforms:function z(N){const q=R[N.type];let K;return K=q?Gs.clone(qs[q].uniforms):N.uniforms,K},acquireProgram:function j(N,q){let K;for(let ie=0,le=y.length;ie<le;ie++){const te=y[ie];if(te.cacheKey===q){K=te,++K.usedTimes;break}}return void 0===K&&(K=new e_(h,q,N,d),y.push(K)),K},releaseProgram:function J(N){if(0==--N.usedTimes){const q=y.indexOf(N);y[q]=y[y.length-1],y.pop(),N.destroy()}},releaseShaderCache:function he(N){v.remove(N)},programs:y,dispose:function oe(){v.dispose()}}}function vx(){let h=new WeakMap;return{get:function r(d){let f=h.get(d);return void 0===f&&(f={},h.set(d,f)),f},remove:function o(d){h.delete(d)},update:function a(d,f,g){h.get(d)[f]=g},dispose:function c(){h=new WeakMap}}}function t_(h,r){return h.groupOrder!==r.groupOrder?h.groupOrder-r.groupOrder:h.renderOrder!==r.renderOrder?h.renderOrder-r.renderOrder:h.material.id!==r.material.id?h.material.id-r.material.id:h.z!==r.z?h.z-r.z:h.id-r.id}function us(h,r){return h.groupOrder!==r.groupOrder?h.groupOrder-r.groupOrder:h.renderOrder!==r.renderOrder?h.renderOrder-r.renderOrder:h.z!==r.z?r.z-h.z:h.id-r.id}function yx(){const h=[];let r=0;const o=[],a=[],c=[];function f(b,x,M,C,D,R){let T=h[r];return void 0===T?(T={id:b.id,object:b,geometry:x,material:M,groupOrder:C,renderOrder:b.renderOrder,z:D,group:R},h[r]=T):(T.id=b.id,T.object=b,T.geometry=x,T.material=M,T.groupOrder=C,T.renderOrder=b.renderOrder,T.z=D,T.group=R),r++,T}return{opaque:o,transmissive:a,transparent:c,init:function d(){r=0,o.length=0,a.length=0,c.length=0},push:function g(b,x,M,C,D,R){const T=f(b,x,M,C,D,R);M.transmission>0?a.push(T):!0===M.transparent?c.push(T):o.push(T)},unshift:function v(b,x,M,C,D,R){const T=f(b,x,M,C,D,R);M.transmission>0?a.unshift(T):!0===M.transparent?c.unshift(T):o.unshift(T)},finish:function w(){for(let b=r,x=h.length;b<x;b++){const M=h[b];if(null===M.id)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}},sort:function y(b,x){o.length>1&&o.sort(b||t_),a.length>1&&a.sort(x||us),c.length>1&&c.sort(x||us)}}}function kC(){let h=new WeakMap;return{get:function r(a,c){let d;return!1===h.has(a)?(d=new yx,h.set(a,[d])):c>=h.get(a).length?(d=new yx,h.get(a).push(d)):d=h.get(a)[c],d},dispose:function o(){h=new WeakMap}}}function n_(){const h={};return{get:function(r){if(void 0!==h[r.id])return h[r.id];let o;switch(r.type){case"DirectionalLight":o={direction:new k,color:new ke};break;case"SpotLight":o={position:new k,direction:new k,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new k,color:new ke,distance:0,decay:0};break;case"HemisphereLight":o={direction:new k,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":o={color:new ke,position:new k,halfWidth:new k,halfHeight:new k}}return h[r.id]=o,o}}}let bx=0;function VC(h,r){return(r.castShadow?1:0)-(h.castShadow?1:0)}function BC(h,r){const o=new n_,a=function _x(){const h={};return{get:function(r){if(void 0!==h[r.id])return h[r.id];let o;switch(r.type){case"DirectionalLight":case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return h[r.id]=o,o}}}(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let w=0;w<9;w++)c.probe.push(new k);const d=new k,f=new Je,g=new Je;return{setup:function v(w,b){let x=0,M=0,C=0;for(let he=0;he<9;he++)c.probe[he].set(0,0,0);let D=0,R=0,T=0,E=0,L=0,I=0,V=0,z=0;w.sort(VC);const j=!0!==b?Math.PI:1;for(let he=0,oe=w.length;he<oe;he++){const N=w[he],q=N.color,K=N.intensity,ie=N.distance,le=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)x+=q.r*K*j,M+=q.g*K*j,C+=q.b*K*j;else if(N.isLightProbe)for(let te=0;te<9;te++)c.probe[te].addScaledVector(N.sh.coefficients[te],K);else if(N.isDirectionalLight){const te=o.get(N);if(te.color.copy(N.color).multiplyScalar(N.intensity*j),N.castShadow){const ve=N.shadow,Ie=a.get(N);Ie.shadowBias=ve.bias,Ie.shadowNormalBias=ve.normalBias,Ie.shadowRadius=ve.radius,Ie.shadowMapSize=ve.mapSize,c.directionalShadow[D]=Ie,c.directionalShadowMap[D]=le,c.directionalShadowMatrix[D]=N.shadow.matrix,I++}c.directional[D]=te,D++}else if(N.isSpotLight){const te=o.get(N);if(te.position.setFromMatrixPosition(N.matrixWorld),te.color.copy(q).multiplyScalar(K*j),te.distance=ie,te.coneCos=Math.cos(N.angle),te.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),te.decay=N.decay,N.castShadow){const ve=N.shadow,Ie=a.get(N);Ie.shadowBias=ve.bias,Ie.shadowNormalBias=ve.normalBias,Ie.shadowRadius=ve.radius,Ie.shadowMapSize=ve.mapSize,c.spotShadow[T]=Ie,c.spotShadowMap[T]=le,c.spotShadowMatrix[T]=N.shadow.matrix,z++}c.spot[T]=te,T++}else if(N.isRectAreaLight){const te=o.get(N);te.color.copy(q).multiplyScalar(K),te.halfWidth.set(.5*N.width,0,0),te.halfHeight.set(0,.5*N.height,0),c.rectArea[E]=te,E++}else if(N.isPointLight){const te=o.get(N);if(te.color.copy(N.color).multiplyScalar(N.intensity*j),te.distance=N.distance,te.decay=N.decay,N.castShadow){const ve=N.shadow,Ie=a.get(N);Ie.shadowBias=ve.bias,Ie.shadowNormalBias=ve.normalBias,Ie.shadowRadius=ve.radius,Ie.shadowMapSize=ve.mapSize,Ie.shadowCameraNear=ve.camera.near,Ie.shadowCameraFar=ve.camera.far,c.pointShadow[R]=Ie,c.pointShadowMap[R]=le,c.pointShadowMatrix[R]=N.shadow.matrix,V++}c.point[R]=te,R++}else if(N.isHemisphereLight){const te=o.get(N);te.skyColor.copy(N.color).multiplyScalar(K*j),te.groundColor.copy(N.groundColor).multiplyScalar(K*j),c.hemi[L]=te,L++}}E>0&&(r.isWebGL2||!0===h.has("OES_texture_float_linear")?(c.rectAreaLTC1=Be.LTC_FLOAT_1,c.rectAreaLTC2=Be.LTC_FLOAT_2):!0===h.has("OES_texture_half_float_linear")?(c.rectAreaLTC1=Be.LTC_HALF_1,c.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=x,c.ambient[1]=M,c.ambient[2]=C;const J=c.hash;(J.directionalLength!==D||J.pointLength!==R||J.spotLength!==T||J.rectAreaLength!==E||J.hemiLength!==L||J.numDirectionalShadows!==I||J.numPointShadows!==V||J.numSpotShadows!==z)&&(c.directional.length=D,c.spot.length=T,c.rectArea.length=E,c.point.length=R,c.hemi.length=L,c.directionalShadow.length=I,c.directionalShadowMap.length=I,c.pointShadow.length=V,c.pointShadowMap.length=V,c.spotShadow.length=z,c.spotShadowMap.length=z,c.directionalShadowMatrix.length=I,c.pointShadowMatrix.length=V,c.spotShadowMatrix.length=z,J.directionalLength=D,J.pointLength=R,J.spotLength=T,J.rectAreaLength=E,J.hemiLength=L,J.numDirectionalShadows=I,J.numPointShadows=V,J.numSpotShadows=z,c.version=bx++)},setupView:function y(w,b){let x=0,M=0,C=0,D=0,R=0;const T=b.matrixWorldInverse;for(let E=0,L=w.length;E<L;E++){const I=w[E];if(I.isDirectionalLight){const V=c.directional[x];V.direction.setFromMatrixPosition(I.matrixWorld),d.setFromMatrixPosition(I.target.matrixWorld),V.direction.sub(d),V.direction.transformDirection(T),x++}else if(I.isSpotLight){const V=c.spot[C];V.position.setFromMatrixPosition(I.matrixWorld),V.position.applyMatrix4(T),V.direction.setFromMatrixPosition(I.matrixWorld),d.setFromMatrixPosition(I.target.matrixWorld),V.direction.sub(d),V.direction.transformDirection(T),C++}else if(I.isRectAreaLight){const V=c.rectArea[D];V.position.setFromMatrixPosition(I.matrixWorld),V.position.applyMatrix4(T),g.identity(),f.copy(I.matrixWorld),f.premultiply(T),g.extractRotation(f),V.halfWidth.set(.5*I.width,0,0),V.halfHeight.set(0,.5*I.height,0),V.halfWidth.applyMatrix4(g),V.halfHeight.applyMatrix4(g),D++}else if(I.isPointLight){const V=c.point[M];V.position.setFromMatrixPosition(I.matrixWorld),V.position.applyMatrix4(T),M++}else if(I.isHemisphereLight){const V=c.hemi[R];V.direction.setFromMatrixPosition(I.matrixWorld),V.direction.transformDirection(T),V.direction.normalize(),R++}}},state:c}}function $u(h,r){const o=new BC(h,r),a=[],c=[];return{init:function d(){a.length=0,c.length=0},state:{lightsArray:a,shadowsArray:c,lights:o},setupLights:function v(b){o.setup(a,b)},setupLightsView:function y(b){o.setupView(a,b)},pushLight:function f(b){a.push(b)},pushShadow:function g(b){c.push(b)}}}function wx(h,r){let o=new WeakMap;return{get:function a(d,f=0){let g;return!1===o.has(d)?(g=new $u(h,r),o.set(d,[g])):f>=o.get(d).length?(g=new $u(h,r),o.get(d).push(g)):g=o.get(d)[f],g},dispose:function c(){o=new WeakMap}}}class qu extends lr{constructor(r){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(r)}copy(r){return super.copy(r),this.depthPacking=r.depthPacking,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this}}qu.prototype.isMeshDepthMaterial=!0;class Xu extends lr{constructor(r){super(),this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(r)}copy(r){return super.copy(r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this}}Xu.prototype.isMeshDistanceMaterial=!0;const Rc="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Hg="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function jh(h,r,o){let a=new is;const c=new Me,d=new Me,f=new Mn,g=new qu({depthPacking:Yi}),v=new Xu,y={},w=o.maxTextureSize,b={0:rn,1:Rn,2:Di},x=new wi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:Rc,fragmentShader:Hg}),M=x.clone();M.defines.HORIZONTAL_PASS=1;const C=new ft;C.setAttribute("position",new en(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const D=new Zn(C,x),R=this;function T(I,V){const z=r.update(D);x.defines.VSM_SAMPLES!==I.blurSamples&&(x.defines.VSM_SAMPLES=I.blurSamples,M.defines.VSM_SAMPLES=I.blurSamples,x.needsUpdate=!0,M.needsUpdate=!0),x.uniforms.shadow_pass.value=I.map.texture,x.uniforms.resolution.value=I.mapSize,x.uniforms.radius.value=I.radius,h.setRenderTarget(I.mapPass),h.clear(),h.renderBufferDirect(V,null,z,x,D,null),M.uniforms.shadow_pass.value=I.mapPass.texture,M.uniforms.resolution.value=I.mapSize,M.uniforms.radius.value=I.radius,h.setRenderTarget(I.map),h.clear(),h.renderBufferDirect(V,null,z,M,D,null)}function E(I,V,z,j,J,he,oe){let N=null;const q=!0===j.isPointLight?I.customDistanceMaterial:I.customDepthMaterial;if(N=void 0!==q?q:!0===j.isPointLight?v:g,h.localClippingEnabled&&!0===z.clipShadows&&0!==z.clippingPlanes.length||z.displacementMap&&0!==z.displacementScale||z.alphaMap&&z.alphaTest>0){const K=N.uuid,ie=z.uuid;let le=y[K];void 0===le&&(le={},y[K]=le);let te=le[ie];void 0===te&&(te=N.clone(),le[ie]=te),N=te}return N.visible=z.visible,N.wireframe=z.wireframe,N.side=oe===zt?null!==z.shadowSide?z.shadowSide:z.side:null!==z.shadowSide?z.shadowSide:b[z.side],N.alphaMap=z.alphaMap,N.alphaTest=z.alphaTest,N.clipShadows=z.clipShadows,N.clippingPlanes=z.clippingPlanes,N.clipIntersection=z.clipIntersection,N.displacementMap=z.displacementMap,N.displacementScale=z.displacementScale,N.displacementBias=z.displacementBias,N.wireframeLinewidth=z.wireframeLinewidth,N.linewidth=z.linewidth,!0===j.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(j.matrixWorld),N.nearDistance=J,N.farDistance=he),N}function L(I,V,z,j,J){if(!1===I.visible)return;if(I.layers.test(V.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&J===zt)&&(!I.frustumCulled||a.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,I.matrixWorld);const N=r.update(I),q=I.material;if(Array.isArray(q)){const K=N.groups;for(let ie=0,le=K.length;ie<le;ie++){const te=K[ie],ve=q[te.materialIndex];if(ve&&ve.visible){const Ie=E(I,0,ve,j,z.near,z.far,J);h.renderBufferDirect(z,null,N,Ie,I,te)}}}else if(q.visible){const K=E(I,0,q,j,z.near,z.far,J);h.renderBufferDirect(z,null,N,K,I,null)}}const oe=I.children;for(let N=0,q=oe.length;N<q;N++)L(oe[N],V,z,j,J)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=At,this.render=function(I,V,z){if(!1===R.enabled||!1===R.autoUpdate&&!1===R.needsUpdate||0===I.length)return;const j=h.getRenderTarget(),J=h.getActiveCubeFace(),he=h.getActiveMipmapLevel(),oe=h.state;oe.setBlending(vi),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);for(let N=0,q=I.length;N<q;N++){const K=I[N],ie=K.shadow;if(void 0===ie){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(!1===ie.autoUpdate&&!1===ie.needsUpdate)continue;c.copy(ie.mapSize);const le=ie.getFrameExtents();if(c.multiply(le),d.copy(ie.mapSize),(c.x>w||c.y>w)&&(c.x>w&&(d.x=Math.floor(w/le.x),c.x=d.x*le.x,ie.mapSize.x=d.x),c.y>w&&(d.y=Math.floor(w/le.y),c.y=d.y*le.y,ie.mapSize.y=d.y)),null===ie.map&&!ie.isPointLightShadow&&this.type===zt){const ve={minFilter:Wn,magFilter:Wn,format:Nr};ie.map=new Eo(c.x,c.y,ve),ie.map.texture.name=K.name+".shadowMap",ie.mapPass=new Eo(c.x,c.y,ve),ie.camera.updateProjectionMatrix()}null===ie.map&&(ie.map=new Eo(c.x,c.y,{minFilter:Vn,magFilter:Vn,format:Nr}),ie.map.texture.name=K.name+".shadowMap",ie.camera.updateProjectionMatrix()),h.setRenderTarget(ie.map),h.clear();const te=ie.getViewportCount();for(let ve=0;ve<te;ve++){const Ie=ie.getViewport(ve);f.set(d.x*Ie.x,d.y*Ie.y,d.x*Ie.z,d.y*Ie.w),oe.viewport(f),ie.updateMatrices(K,ve),a=ie.getFrustum(),L(V,z,ie.camera,K,this.type)}!ie.isPointLightShadow&&this.type===zt&&T(ie,z),ie.needsUpdate=!1}R.needsUpdate=!1,h.setRenderTarget(j,J,he)}}function Yu(h,r,o){const a=o.isWebGL2,g=new function c(){let Z=!1;const Qe=new Mn;let Xe=null;const wt=new Mn(0,0,0,0);return{setMask:function(Se){Xe!==Se&&!Z&&(h.colorMask(Se,Se,Se,Se),Xe=Se)},setLocked:function(Se){Z=Se},setClear:function(Se,gt,Zt,er,Ui){!0===Ui&&(Se*=er,gt*=er,Zt*=er),Qe.set(Se,gt,Zt,er),!1===wt.equals(Qe)&&(h.clearColor(Se,gt,Zt,er),wt.copy(Qe))},reset:function(){Z=!1,Xe=null,wt.set(-1,0,0,0)}}},v=new function d(){let Z=!1,Qe=null,Xe=null,wt=null;return{setTest:function(Se){Se?me(2929):Vt(2929)},setMask:function(Se){Qe!==Se&&!Z&&(h.depthMask(Se),Qe=Se)},setFunc:function(Se){if(Xe!==Se){if(Se)switch(Se){case Fp:h.depthFunc(512);break;case rh:h.depthFunc(519);break;case kp:h.depthFunc(513);break;case pu:h.depthFunc(515);break;case si:h.depthFunc(514);break;case $o:h.depthFunc(518);break;case dr:h.depthFunc(516);break;case _i:h.depthFunc(517);break;default:h.depthFunc(515)}else h.depthFunc(515);Xe=Se}},setLocked:function(Se){Z=Se},setClear:function(Se){wt!==Se&&(h.clearDepth(Se),wt=Se)},reset:function(){Z=!1,Qe=null,Xe=null,wt=null}}},y=new function f(){let Z=!1,Qe=null,Xe=null,wt=null,Se=null,gt=null,Zt=null,er=null,Ui=null;return{setTest:function(Sr){Z||(Sr?me(2960):Vt(2960))},setMask:function(Sr){Qe!==Sr&&!Z&&(h.stencilMask(Sr),Qe=Sr)},setFunc:function(Sr,la,ca){(Xe!==Sr||wt!==la||Se!==ca)&&(h.stencilFunc(Sr,la,ca),Xe=Sr,wt=la,Se=ca)},setOp:function(Sr,la,ca){(gt!==Sr||Zt!==la||er!==ca)&&(h.stencilOp(Sr,la,ca),gt=Sr,Zt=la,er=ca)},setLocked:function(Sr){Z=Sr},setClear:function(Sr){Ui!==Sr&&(h.clearStencil(Sr),Ui=Sr)},reset:function(){Z=!1,Qe=null,Xe=null,wt=null,Se=null,gt=null,Zt=null,er=null,Ui=null}}};let w={},b={},x=new WeakMap,M=[],C=null,D=!1,R=null,T=null,E=null,L=null,I=null,V=null,z=null,j=!1,J=null,he=null,oe=null,N=null,q=null;const K=h.getParameter(35661);let ie=!1,le=0;const te=h.getParameter(7938);-1!==te.indexOf("WebGL")?(le=parseFloat(/^WebGL (\d)/.exec(te)[1]),ie=le>=1):-1!==te.indexOf("OpenGL ES")&&(le=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),ie=le>=2);let ve=null,Ie={};const Ze=h.getParameter(3088),_e=h.getParameter(2978),De=(new Mn).fromArray(Ze),Ge=(new Mn).fromArray(_e);function et(Z,Qe,Xe){const wt=new Uint8Array(4),Se=h.createTexture();h.bindTexture(Z,Se),h.texParameteri(Z,10241,9728),h.texParameteri(Z,10240,9728);for(let gt=0;gt<Xe;gt++)h.texImage2D(Qe+gt,0,6408,1,1,0,6408,5121,wt);return Se}const at={};function me(Z){!0!==w[Z]&&(h.enable(Z),w[Z]=!0)}function Vt(Z){!1!==w[Z]&&(h.disable(Z),w[Z]=!1)}at[3553]=et(3553,3553,1),at[34067]=et(34067,34069,6),g.setClear(0,0,0,1),v.setClear(1),y.setClear(0),me(2929),v.setFunc(pu),Ne(!1),qe(yr),me(2884),Ee(vi);const Ht={[yi]:32774,[Cs]:32778,[jo]:32779};if(a)Ht[tc]=32775,Ht[ba]=32776;else{const Z=r.get("EXT_blend_minmax");null!==Z&&(Ht[tc]=Z.MIN_EXT,Ht[ba]=Z.MAX_EXT)}const yt={[hu]:0,[nh]:1,[nc]:768,[fu]:770,[oc]:776,[Uv]:774,[Lp]:772,[Bv]:769,[rc]:771,[Hv]:775,[ic]:773};function Ee(Z,Qe,Xe,wt,Se,gt,Zt,er){if(Z!==vi){if(!1===D&&(me(3042),D=!0),Z===Ss)Se=Se||Qe,gt=gt||Xe,Zt=Zt||wt,(Qe!==T||Se!==I)&&(h.blendEquationSeparate(Ht[Qe],Ht[Se]),T=Qe,I=Se),(Xe!==E||wt!==L||gt!==V||Zt!==z)&&(h.blendFuncSeparate(yt[Xe],yt[wt],yt[gt],yt[Zt]),E=Xe,L=wt,V=gt,z=Zt),R=Z,j=null;else if(Z!==R||er!==j){if((T!==yi||I!==yi)&&(h.blendEquation(32774),T=yi,I=yi),er)switch(Z){case kn:h.blendFuncSeparate(1,771,1,771);break;case Es:h.blendFunc(1,1);break;case pl:h.blendFuncSeparate(0,769,0,1);break;case ec:h.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z)}else switch(Z){case kn:h.blendFuncSeparate(770,771,1,771);break;case Es:h.blendFunc(770,1);break;case pl:h.blendFuncSeparate(0,769,0,1);break;case ec:h.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z)}E=null,L=null,V=null,z=null,R=Z,j=er}}else!0===D&&(Vt(3042),D=!1)}function Ne(Z){J!==Z&&(h.frontFace(Z?2304:2305),J=Z)}function qe(Z){Z!==On?(me(2884),Z!==he&&h.cullFace(Z===yr?1029:Z===nt?1028:1032)):Vt(2884),he=Z}function _t(Z,Qe,Xe){Z?(me(32823),(N!==Qe||q!==Xe)&&(h.polygonOffset(Qe,Xe),N=Qe,q=Xe)):Vt(32823)}function tn(Z){void 0===Z&&(Z=33984+K-1),ve!==Z&&(h.activeTexture(Z),ve=Z)}return{buffers:{color:g,depth:v,stencil:y},enable:me,disable:Vt,bindFramebuffer:function ot(Z,Qe){return b[Z]!==Qe&&(h.bindFramebuffer(Z,Qe),b[Z]=Qe,a&&(36009===Z&&(b[36160]=Qe),36160===Z&&(b[36009]=Qe)),!0)},drawBuffers:function Mt(Z,Qe){let Xe=M,wt=!1;if(Z)if(Xe=x.get(Qe),void 0===Xe&&(Xe=[],x.set(Qe,Xe)),Z.isWebGLMultipleRenderTargets){const Se=Z.texture;if(Xe.length!==Se.length||36064!==Xe[0]){for(let gt=0,Zt=Se.length;gt<Zt;gt++)Xe[gt]=36064+gt;Xe.length=Se.length,wt=!0}}else 36064!==Xe[0]&&(Xe[0]=36064,wt=!0);else 1029!==Xe[0]&&(Xe[0]=1029,wt=!0);wt&&(o.isWebGL2?h.drawBuffers(Xe):r.get("WEBGL_draw_buffers").drawBuffersWEBGL(Xe))},useProgram:function Ye(Z){return C!==Z&&(h.useProgram(Z),C=Z,!0)},setBlending:Ee,setMaterial:function Fe(Z,Qe){Z.side===Di?Vt(2884):me(2884);let Xe=Z.side===rn;Qe&&(Xe=!Xe),Ne(Xe),Z.blending===kn&&!1===Z.transparent?Ee(vi):Ee(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.premultipliedAlpha),v.setFunc(Z.depthFunc),v.setTest(Z.depthTest),v.setMask(Z.depthWrite),g.setMask(Z.colorWrite);const wt=Z.stencilWrite;y.setTest(wt),wt&&(y.setMask(Z.stencilWriteMask),y.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),y.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),_t(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),!0===Z.alphaToCoverage?me(32926):Vt(32926)},setFlipSided:Ne,setCullFace:qe,setLineWidth:function je(Z){Z!==oe&&(ie&&h.lineWidth(Z),oe=Z)},setPolygonOffset:_t,setScissorTest:function Et(Z){Z?me(3089):Vt(3089)},activeTexture:tn,bindTexture:function zn(Z,Qe){null===ve&&tn();let Xe=Ie[ve];void 0===Xe&&(Xe={type:void 0,texture:void 0},Ie[ve]=Xe),(Xe.type!==Z||Xe.texture!==Qe)&&(h.bindTexture(Z,Qe||at[Z]),Xe.type=Z,Xe.texture=Qe)},unbindTexture:function yn(){const Z=Ie[ve];void 0!==Z&&void 0!==Z.type&&(h.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)},compressedTexImage2D:function G(){try{h.compressedTexImage2D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texImage2D:function dt(){try{h.texImage2D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texImage3D:function st(){try{h.texImage3D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texStorage2D:function it(){try{h.texStorage2D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texStorage3D:function be(){try{h.texStorage3D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texSubImage2D:function B(){try{h.texSubImage2D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texSubImage3D:function ye(){try{h.texSubImage3D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},compressedTexSubImage2D:function Le(){try{h.compressedTexSubImage2D.apply(h,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},scissor:function We(Z){!1===De.equals(Z)&&(h.scissor(Z.x,Z.y,Z.z,Z.w),De.copy(Z))},viewport:function Ue(Z){!1===Ge.equals(Z)&&(h.viewport(Z.x,Z.y,Z.z,Z.w),Ge.copy(Z))},reset:function Tt(){h.disable(3042),h.disable(2884),h.disable(2929),h.disable(32823),h.disable(3089),h.disable(2960),h.disable(32926),h.blendEquation(32774),h.blendFunc(1,0),h.blendFuncSeparate(1,0,1,0),h.colorMask(!0,!0,!0,!0),h.clearColor(0,0,0,0),h.depthMask(!0),h.depthFunc(513),h.clearDepth(1),h.stencilMask(4294967295),h.stencilFunc(519,0,4294967295),h.stencilOp(7680,7680,7680),h.clearStencil(0),h.cullFace(1029),h.frontFace(2305),h.polygonOffset(0,0),h.activeTexture(33984),h.bindFramebuffer(36160,null),!0===a&&(h.bindFramebuffer(36009,null),h.bindFramebuffer(36008,null)),h.useProgram(null),h.lineWidth(1),h.scissor(0,0,h.canvas.width,h.canvas.height),h.viewport(0,0,h.canvas.width,h.canvas.height),w={},ve=null,Ie={},b={},x=new WeakMap,M=[],C=null,D=!1,R=null,T=null,E=null,L=null,I=null,V=null,z=null,j=!1,J=null,he=null,oe=null,N=null,q=null,De.set(0,0,h.canvas.width,h.canvas.height),Ge.set(0,0,h.canvas.width,h.canvas.height),g.reset(),v.reset(),y.reset()}}}function $h(h,r,o,a,c,d,f){const g=c.isWebGL2,v=c.maxTextures,y=c.maxCubemapSize,w=c.maxTextureSize,b=c.maxSamples,M=r.has("WEBGL_multisampled_render_to_texture")?r.get("WEBGL_multisampled_render_to_texture"):void 0,C=new WeakMap;let D,R=!1;try{R=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function T(G,B){return R?new OffscreenCanvas(G,B):Ls("canvas")}function E(G,B,ye,Le){let it=1;if((G.width>Le||G.height>Le)&&(it=Le/Math.max(G.width,G.height)),it<1||!0===B){if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const be=B?Te:Math.floor,dt=be(it*G.width),st=be(it*G.height);void 0===D&&(D=T(dt,st));const We=ye?T(dt,st):D;return We.width=dt,We.height=st,We.getContext("2d").drawImage(G,0,0,dt,st),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+dt+"x"+st+")."),We}return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G}return G}function L(G){return Oe(G.width)&&Oe(G.height)}function V(G,B){return G.generateMipmaps&&B&&G.minFilter!==Vn&&G.minFilter!==Wn}function z(G){h.generateMipmap(G)}function j(G,B,ye,Le,it=!1){if(!1===g)return B;if(null!==G){if(void 0!==h[G])return h[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let be=B;return 6403===B&&(5126===ye&&(be=33326),5131===ye&&(be=33325),5121===ye&&(be=33321)),33319===B&&(5126===ye&&(be=33328),5131===ye&&(be=33327),5121===ye&&(be=33323)),6408===B&&(5126===ye&&(be=34836),5131===ye&&(be=34842),5121===ye&&(be=Le===xt&&!1===it?35907:32856),32819===ye&&(be=32854),32820===ye&&(be=32855)),(33325===be||33326===be||33327===be||33328===be||34842===be||34836===be)&&r.get("EXT_color_buffer_float"),be}function J(G,B,ye){return!0===V(G,ye)||G.isFramebufferTexture&&G.minFilter!==Vn&&G.minFilter!==Wn?Math.log2(Math.max(B.width,B.height))+1:void 0!==G.mipmaps&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?B.mipmaps.length:1}function he(G){return G===Vn||G===wo||G===ml?9728:9729}function oe(G){const B=G.target;B.removeEventListener("dispose",oe),function q(G){const B=a.get(G);void 0!==B.__webglInit&&(h.deleteTexture(B.__webglTexture),a.remove(G))}(B),B.isVideoTexture&&C.delete(B),f.memory.textures--}function N(G){const B=G.target;B.removeEventListener("dispose",N),function K(G){const B=G.texture,ye=a.get(G),Le=a.get(B);if(G){if(void 0!==Le.__webglTexture&&(h.deleteTexture(Le.__webglTexture),f.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let it=0;it<6;it++)h.deleteFramebuffer(ye.__webglFramebuffer[it]),ye.__webglDepthbuffer&&h.deleteRenderbuffer(ye.__webglDepthbuffer[it]);else h.deleteFramebuffer(ye.__webglFramebuffer),ye.__webglDepthbuffer&&h.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&h.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer&&h.deleteRenderbuffer(ye.__webglColorRenderbuffer),ye.__webglDepthRenderbuffer&&h.deleteRenderbuffer(ye.__webglDepthRenderbuffer);if(G.isWebGLMultipleRenderTargets)for(let it=0,be=B.length;it<be;it++){const dt=a.get(B[it]);dt.__webglTexture&&(h.deleteTexture(dt.__webglTexture),f.memory.textures--),a.remove(B[it])}a.remove(B),a.remove(G)}}(B)}let ie=0;function ve(G,B){const ye=a.get(G);if(G.isVideoTexture&&function je(G){const B=f.render.frame;C.get(G)!==B&&(C.set(G,B),G.update())}(G),G.version>0&&ye.__version!==G.version){const Le=G.image;if(void 0===Le)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Le.complete)return void me(ye,G,B);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}o.activeTexture(33984+B),o.bindTexture(3553,ye.__webglTexture)}function _e(G,B){const ye=a.get(G);G.version>0&&ye.__version!==G.version?function Vt(G,B,ye){if(6!==B.image.length)return;at(G,B),o.activeTexture(33984+ye),o.bindTexture(34067,G.__webglTexture),h.pixelStorei(37440,B.flipY),h.pixelStorei(37441,B.premultiplyAlpha),h.pixelStorei(3317,B.unpackAlignment),h.pixelStorei(37443,0);const Le=B&&(B.isCompressedTexture||B.image[0].isCompressedTexture),it=B.image[0]&&B.image[0].isDataTexture,be=[];for(let Se=0;Se<6;Se++)be[Se]=Le||it?it?B.image[Se].image:B.image[Se]:E(B.image[Se],!1,!0,y),be[Se]=_t(B,be[Se]);const dt=be[0],st=L(dt)||g,We=d.convert(B.format,B.encoding),Ue=d.convert(B.type),Tt=j(B.internalFormat,We,Ue,B.encoding),Z=g&&!0!==B.isVideoTexture,Qe=void 0===G.__version;let wt,Xe=J(B,dt,st);if(et(34067,B,st),Le){Z&&Qe&&o.texStorage2D(34067,Xe,Tt,dt.width,dt.height);for(let Se=0;Se<6;Se++){wt=be[Se].mipmaps;for(let gt=0;gt<wt.length;gt++){const Zt=wt[gt];B.format!==Nr?null!==We?Z?o.compressedTexSubImage2D(34069+Se,gt,0,0,Zt.width,Zt.height,We,Zt.data):o.compressedTexImage2D(34069+Se,gt,Tt,Zt.width,Zt.height,0,Zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Z?o.texSubImage2D(34069+Se,gt,0,0,Zt.width,Zt.height,We,Ue,Zt.data):o.texImage2D(34069+Se,gt,Tt,Zt.width,Zt.height,0,We,Ue,Zt.data)}}}else{wt=B.mipmaps,Z&&Qe&&(wt.length>0&&Xe++,o.texStorage2D(34067,Xe,Tt,be[0].width,be[0].height));for(let Se=0;Se<6;Se++)if(it){Z?o.texSubImage2D(34069+Se,0,0,0,be[Se].width,be[Se].height,We,Ue,be[Se].data):o.texImage2D(34069+Se,0,Tt,be[Se].width,be[Se].height,0,We,Ue,be[Se].data);for(let gt=0;gt<wt.length;gt++){const er=wt[gt].image[Se].image;Z?o.texSubImage2D(34069+Se,gt+1,0,0,er.width,er.height,We,Ue,er.data):o.texImage2D(34069+Se,gt+1,Tt,er.width,er.height,0,We,Ue,er.data)}}else{Z?o.texSubImage2D(34069+Se,0,0,0,We,Ue,be[Se]):o.texImage2D(34069+Se,0,Tt,We,Ue,be[Se]);for(let gt=0;gt<wt.length;gt++){const Zt=wt[gt];Z?o.texSubImage2D(34069+Se,gt+1,0,0,We,Ue,Zt.image[Se]):o.texImage2D(34069+Se,gt+1,Tt,We,Ue,Zt.image[Se])}}}V(B,st)&&z(34067),G.__version=B.version,B.onUpdate&&B.onUpdate(B)}(ye,G,B):(o.activeTexture(33984+B),o.bindTexture(34067,ye.__webglTexture))}const De={[Ai]:10497,[sr]:33071,[xa]:33648},Ge={[Vn]:9728,[wo]:9984,[ml]:9986,[Wn]:9729,[vl]:9985,[lo]:9987};function et(G,B,ye){if(ye?(h.texParameteri(G,10242,De[B.wrapS]),h.texParameteri(G,10243,De[B.wrapT]),(32879===G||35866===G)&&h.texParameteri(G,32882,De[B.wrapR]),h.texParameteri(G,10240,Ge[B.magFilter]),h.texParameteri(G,10241,Ge[B.minFilter])):(h.texParameteri(G,10242,33071),h.texParameteri(G,10243,33071),(32879===G||35866===G)&&h.texParameteri(G,32882,33071),(B.wrapS!==sr||B.wrapT!==sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),h.texParameteri(G,10240,he(B.magFilter)),h.texParameteri(G,10241,he(B.minFilter)),B.minFilter!==Vn&&B.minFilter!==Wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===r.has("EXT_texture_filter_anisotropic")){const Le=r.get("EXT_texture_filter_anisotropic");if(B.type===xo&&!1===r.has("OES_texture_float_linear")||!1===g&&B.type===Ir&&!1===r.has("OES_texture_half_float_linear"))return;(B.anisotropy>1||a.get(B).__currentAnisotropy)&&(h.texParameterf(G,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,c.getMaxAnisotropy())),a.get(B).__currentAnisotropy=B.anisotropy)}}function at(G,B){void 0===G.__webglInit&&(G.__webglInit=!0,B.addEventListener("dispose",oe),G.__webglTexture=h.createTexture(),f.memory.textures++)}function me(G,B,ye){let Le=3553;B.isDataTexture2DArray&&(Le=35866),B.isDataTexture3D&&(Le=32879),at(G,B),o.activeTexture(33984+ye),o.bindTexture(Le,G.__webglTexture),h.pixelStorei(37440,B.flipY),h.pixelStorei(37441,B.premultiplyAlpha),h.pixelStorei(3317,B.unpackAlignment),h.pixelStorei(37443,0);const it=function I(G){return!g&&(G.wrapS!==sr||G.wrapT!==sr||G.minFilter!==Vn&&G.minFilter!==Wn)}(B)&&!1===L(B.image);let be=E(B.image,it,!1,w);be=_t(B,be);const dt=L(be)||g,st=d.convert(B.format,B.encoding);let Tt,We=d.convert(B.type),Ue=j(B.internalFormat,st,We,B.encoding,B.isVideoTexture);et(Le,B,dt);const Z=B.mipmaps,Qe=g&&!0!==B.isVideoTexture,Xe=void 0===G.__version,wt=J(B,be,dt);if(B.isDepthTexture)Ue=6402,g?Ue=B.type===xo?36012:B.type===Ar?33190:B.type===Bn?35056:33189:B.type===xo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===co&&6402===Ue&&B.type!==As&&B.type!==Ar&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=As,We=d.convert(B.type)),B.format===Zo&&6402===Ue&&(Ue=34041,B.type!==Bn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Bn,We=d.convert(B.type))),Qe&&Xe?o.texStorage2D(3553,1,Ue,be.width,be.height):o.texImage2D(3553,0,Ue,be.width,be.height,0,st,We,null);else if(B.isDataTexture)if(Z.length>0&&dt){Qe&&Xe&&o.texStorage2D(3553,wt,Ue,Z[0].width,Z[0].height);for(let Se=0,gt=Z.length;Se<gt;Se++)Tt=Z[Se],Qe?o.texSubImage2D(3553,0,0,0,Tt.width,Tt.height,st,We,Tt.data):o.texImage2D(3553,Se,Ue,Tt.width,Tt.height,0,st,We,Tt.data);B.generateMipmaps=!1}else Qe?(Xe&&o.texStorage2D(3553,wt,Ue,be.width,be.height),o.texSubImage2D(3553,0,0,0,be.width,be.height,st,We,be.data)):o.texImage2D(3553,0,Ue,be.width,be.height,0,st,We,be.data);else if(B.isCompressedTexture){Qe&&Xe&&o.texStorage2D(3553,wt,Ue,Z[0].width,Z[0].height);for(let Se=0,gt=Z.length;Se<gt;Se++)Tt=Z[Se],B.format!==Nr?null!==st?Qe?o.compressedTexSubImage2D(3553,Se,0,0,Tt.width,Tt.height,st,Tt.data):o.compressedTexImage2D(3553,Se,Ue,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qe?o.texSubImage2D(3553,Se,0,0,Tt.width,Tt.height,st,We,Tt.data):o.texImage2D(3553,Se,Ue,Tt.width,Tt.height,0,st,We,Tt.data)}else if(B.isDataTexture2DArray)Qe?(Xe&&o.texStorage3D(35866,wt,Ue,be.width,be.height,be.depth),o.texSubImage3D(35866,0,0,0,0,be.width,be.height,be.depth,st,We,be.data)):o.texImage3D(35866,0,Ue,be.width,be.height,be.depth,0,st,We,be.data);else if(B.isDataTexture3D)Qe?(Xe&&o.texStorage3D(32879,wt,Ue,be.width,be.height,be.depth),o.texSubImage3D(32879,0,0,0,0,be.width,be.height,be.depth,st,We,be.data)):o.texImage3D(32879,0,Ue,be.width,be.height,be.depth,0,st,We,be.data);else if(B.isFramebufferTexture)Qe&&Xe?o.texStorage2D(3553,wt,Ue,be.width,be.height):o.texImage2D(3553,0,Ue,be.width,be.height,0,st,We,null);else if(Z.length>0&&dt){Qe&&Xe&&o.texStorage2D(3553,wt,Ue,Z[0].width,Z[0].height);for(let Se=0,gt=Z.length;Se<gt;Se++)Tt=Z[Se],Qe?o.texSubImage2D(3553,Se,0,0,st,We,Tt):o.texImage2D(3553,Se,Ue,st,We,Tt);B.generateMipmaps=!1}else Qe?(Xe&&o.texStorage2D(3553,wt,Ue,be.width,be.height),o.texSubImage2D(3553,0,0,0,st,We,be)):o.texImage2D(3553,0,Ue,st,We,be);V(B,dt)&&z(Le),G.__version=B.version,B.onUpdate&&B.onUpdate(B)}function ot(G,B,ye,Le,it){const be=d.convert(ye.format,ye.encoding),dt=d.convert(ye.type),st=j(ye.internalFormat,be,dt,ye.encoding);a.get(B).__hasExternalTextures||(32879===it||35866===it?o.texImage3D(it,0,st,B.width,B.height,B.depth,0,be,dt,null):o.texImage2D(it,0,st,B.width,B.height,0,be,dt,null)),o.bindFramebuffer(36160,G),B.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,Le,it,a.get(ye).__webglTexture,0,qe(B)):h.framebufferTexture2D(36160,Le,it,a.get(ye).__webglTexture,0),o.bindFramebuffer(36160,null)}function Mt(G,B,ye){if(h.bindRenderbuffer(36161,G),B.depthBuffer&&!B.stencilBuffer){let Le=33189;if(ye||B.useRenderToTexture){const it=B.depthTexture;it&&it.isDepthTexture&&(it.type===xo?Le=36012:it.type===Ar&&(Le=33190));const be=qe(B);B.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,be,Le,B.width,B.height):h.renderbufferStorageMultisample(36161,be,Le,B.width,B.height)}else h.renderbufferStorage(36161,Le,B.width,B.height);h.framebufferRenderbuffer(36160,36096,36161,G)}else if(B.depthBuffer&&B.stencilBuffer){const Le=qe(B);ye&&B.useRenderbuffer?h.renderbufferStorageMultisample(36161,Le,35056,B.width,B.height):B.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,Le,35056,B.width,B.height):h.renderbufferStorage(36161,34041,B.width,B.height),h.framebufferRenderbuffer(36160,33306,36161,G)}else{const Le=!0===B.isWebGLMultipleRenderTargets?B.texture[0]:B.texture,it=d.convert(Le.format,Le.encoding),be=d.convert(Le.type),dt=j(Le.internalFormat,it,be,Le.encoding),st=qe(B);ye&&B.useRenderbuffer?h.renderbufferStorageMultisample(36161,st,dt,B.width,B.height):B.useRenderToTexture?M.renderbufferStorageMultisampleEXT(36161,st,dt,B.width,B.height):h.renderbufferStorage(36161,dt,B.width,B.height)}h.bindRenderbuffer(36161,null)}function Ht(G){const B=a.get(G),ye=!0===G.isWebGLCubeRenderTarget;if(G.depthTexture&&!B.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");!function Ye(G,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,G),!B.depthTexture||!B.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!a.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),ve(B.depthTexture,0);const Le=a.get(B.depthTexture).__webglTexture,it=qe(B);if(B.depthTexture.format===co)B.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,36096,3553,Le,0,it):h.framebufferTexture2D(36160,36096,3553,Le,0);else{if(B.depthTexture.format!==Zo)throw new Error("Unknown depthTexture format");B.useRenderToTexture?M.framebufferTexture2DMultisampleEXT(36160,33306,3553,Le,0,it):h.framebufferTexture2D(36160,33306,3553,Le,0)}}(B.__webglFramebuffer,G)}else if(ye){B.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)o.bindFramebuffer(36160,B.__webglFramebuffer[Le]),B.__webglDepthbuffer[Le]=h.createRenderbuffer(),Mt(B.__webglDepthbuffer[Le],G,!1)}else o.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=h.createRenderbuffer(),Mt(B.__webglDepthbuffer,G,!1);o.bindFramebuffer(36160,null)}function qe(G){return g&&(G.useRenderbuffer||G.useRenderToTexture)?Math.min(b,G.samples):0}function _t(G,B){const ye=G.encoding,Le=G.format,it=G.type;return!0===G.isCompressedTexture||!0===G.isVideoTexture||G.format===$p||ye!==kt&&(ye===xt?!1===g?!0===r.has("EXT_sRGB")&&Le===Nr?(G.format=$p,G.minFilter=Wn,G.generateMipmaps=!1):B=Qo.sRGBToLinear(B):(Le!==Nr||it!==hn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ye)),B}let Et=!1,tn=!1;this.allocateTextureUnit=function te(){const G=ie;return G>=v&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+v),ie+=1,G},this.resetTextureUnits=function le(){ie=0},this.setTexture2D=ve,this.setTexture2DArray=function Ie(G,B){const ye=a.get(G);G.version>0&&ye.__version!==G.version?me(ye,G,B):(o.activeTexture(33984+B),o.bindTexture(35866,ye.__webglTexture))},this.setTexture3D=function Ze(G,B){const ye=a.get(G);G.version>0&&ye.__version!==G.version?me(ye,G,B):(o.activeTexture(33984+B),o.bindTexture(32879,ye.__webglTexture))},this.setTextureCube=_e,this.rebindTextures=function yt(G,B,ye){const Le=a.get(G);void 0!==B&&ot(Le.__webglFramebuffer,G,G.texture,36064,3553),void 0!==ye&&Ht(G)},this.setupRenderTarget=function Ee(G){const B=G.texture,ye=a.get(G),Le=a.get(B);G.addEventListener("dispose",N),!0!==G.isWebGLMultipleRenderTargets&&(void 0===Le.__webglTexture&&(Le.__webglTexture=h.createTexture()),Le.__version=B.version,f.memory.textures++);const it=!0===G.isWebGLCubeRenderTarget,be=!0===G.isWebGLMultipleRenderTargets,dt=B.isDataTexture3D||B.isDataTexture2DArray,st=L(G)||g;if(it){ye.__webglFramebuffer=[];for(let We=0;We<6;We++)ye.__webglFramebuffer[We]=h.createFramebuffer()}else if(ye.__webglFramebuffer=h.createFramebuffer(),be)if(c.drawBuffers){const We=G.texture;for(let Ue=0,Tt=We.length;Ue<Tt;Ue++){const Z=a.get(We[Ue]);void 0===Z.__webglTexture&&(Z.__webglTexture=h.createTexture(),f.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(G.useRenderbuffer)if(g){ye.__webglMultisampledFramebuffer=h.createFramebuffer(),ye.__webglColorRenderbuffer=h.createRenderbuffer(),h.bindRenderbuffer(36161,ye.__webglColorRenderbuffer);const We=d.convert(B.format,B.encoding),Ue=d.convert(B.type),Tt=j(B.internalFormat,We,Ue,B.encoding),Z=qe(G);h.renderbufferStorageMultisample(36161,Z,Tt,G.width,G.height),o.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer),h.framebufferRenderbuffer(36160,36064,36161,ye.__webglColorRenderbuffer),h.bindRenderbuffer(36161,null),G.depthBuffer&&(ye.__webglDepthRenderbuffer=h.createRenderbuffer(),Mt(ye.__webglDepthRenderbuffer,G,!0)),o.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(it){o.bindTexture(34067,Le.__webglTexture),et(34067,B,st);for(let We=0;We<6;We++)ot(ye.__webglFramebuffer[We],G,B,36064,34069+We);V(B,st)&&z(34067),o.unbindTexture()}else if(be){const We=G.texture;for(let Ue=0,Tt=We.length;Ue<Tt;Ue++){const Z=We[Ue],Qe=a.get(Z);o.bindTexture(3553,Qe.__webglTexture),et(3553,Z,st),ot(ye.__webglFramebuffer,G,Z,36064+Ue,3553),V(Z,st)&&z(3553)}o.unbindTexture()}else{let We=3553;dt&&(g?We=B.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),o.bindTexture(We,Le.__webglTexture),et(We,B,st),ot(ye.__webglFramebuffer,G,B,36064,We),V(B,st)&&z(We),o.unbindTexture()}G.depthBuffer&&Ht(G)},this.updateRenderTargetMipmap=function Fe(G){const B=L(G)||g,ye=!0===G.isWebGLMultipleRenderTargets?G.texture:[G.texture];for(let Le=0,it=ye.length;Le<it;Le++){const be=ye[Le];if(V(be,B)){const dt=G.isWebGLCubeRenderTarget?34067:3553,st=a.get(be).__webglTexture;o.bindTexture(dt,st),z(dt),o.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ne(G){if(G.useRenderbuffer)if(g){const B=G.width,ye=G.height;let Le=16384;const it=[36064],be=G.stencilBuffer?33306:36096;G.depthBuffer&&it.push(be),G.ignoreDepthForMultisampleCopy||(G.depthBuffer&&(Le|=256),G.stencilBuffer&&(Le|=1024));const dt=a.get(G);o.bindFramebuffer(36008,dt.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,dt.__webglFramebuffer),G.ignoreDepthForMultisampleCopy&&(h.invalidateFramebuffer(36008,[be]),h.invalidateFramebuffer(36009,[be])),h.blitFramebuffer(0,0,B,ye,0,0,B,ye,Le,9728),h.invalidateFramebuffer(36008,it),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,dt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=Ht,this.setupFrameBufferTexture=ot,this.safeSetTexture2D=function zn(G,B){G&&G.isWebGLRenderTarget&&(!1===Et&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Et=!0),G=G.texture),ve(G,B)},this.safeSetTextureCube=function yn(G,B){G&&G.isWebGLCubeRenderTarget&&(!1===tn&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),tn=!0),G=G.texture),_e(G,B)}}function Pc(h,r,o){const a=o.isWebGL2;return{convert:function c(d,f=null){let g;if(d===hn)return 5121;if(d===sh)return 32819;if(d===Rr)return 32820;if(d===mu)return 5120;if(d===oh)return 5122;if(d===As)return 5123;if(d===Bp)return 5124;if(d===Ar)return 5125;if(d===xo)return 5126;if(d===Ir)return a?5131:(g=r.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(d===Ot)return 6406;if(d===Nr)return 6408;if(d===we)return 6409;if(d===Yo)return 6410;if(d===co)return 6402;if(d===Zo)return 34041;if(d===Gv)return 6403;if(d===zv)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(d===$p)return g=r.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(d===Up)return 36244;if(d===vu)return 33319;if(d===uo)return 33320;if(d===Is)return 36249;if(d===ho||d===li||d===Jo||d===Mo)if(f===xt){if(g=r.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(d===ho)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===li)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===Jo)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===Mo)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=r.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(d===ho)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===li)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===Jo)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===Mo)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(d===fo||d===yu||d===on||d===Hp){if(g=r.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(d===fo)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===yu)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===on)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===Hp)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(d===_u)return g=r.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===Rt||d===Rs){if(g=r.get("WEBGL_compressed_texture_etc"),null===g)return null;if(d===Rt)return f===xt?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(d===Rs)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(d===xn||d===Ii||d===yl||d===$i||d===qt||d===ut||d===Ea||d===Or||d===qi||d===_l||d===bu||d===Xi||d===wu||d===xu){if(g=r.get("WEBGL_compressed_texture_astc"),null===g)return null;if(d===xn)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===Ii)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===yl)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===$i)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===qt)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===ut)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===Ea)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===Or)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===qi)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===_l)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===bu)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===Xi)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===wu)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===xu)return f===xt?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(d===cc){if(g=r.get("EXT_texture_compression_bptc"),null===g)return null;if(d===cc)return f===xt?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}return d===Bn?a?34042:(g=r.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class qh extends Jn{constructor(r=[]){super(),this.cameras=r}}qh.prototype.isArrayCamera=!0;class Zs extends Gt{constructor(){super(),this.type="Group"}}Zs.prototype.isGroup=!0;const Xh={type:"move"};class r_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Zs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Zs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Zs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(r){return null!==this._targetRay&&this._targetRay.dispatchEvent(r),null!==this._grip&&this._grip.dispatchEvent(r),null!==this._hand&&this._hand.dispatchEvent(r),this}disconnect(r){return this.dispatchEvent({type:"disconnected",data:r}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(r,o,a){let c=null,d=null,f=null;const g=this._targetRay,v=this._grip,y=this._hand;if(r&&"visible-blurred"!==o.session.visibilityState)if(null!==g&&(c=o.getPose(r.targetRaySpace,a),null!==c&&(g.matrix.fromArray(c.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),c.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(c.linearVelocity)):g.hasLinearVelocity=!1,c.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(c.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(Xh))),y&&r.hand){f=!0;for(const D of r.hand.values()){const R=o.getJointPose(D,a);if(void 0===y.joints[D.jointName]){const E=new Zs;E.matrixAutoUpdate=!1,E.visible=!1,y.joints[D.jointName]=E,y.add(E)}const T=y.joints[D.jointName];null!==R&&(T.matrix.fromArray(R.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.jointRadius=R.radius),T.visible=null!==R}const x=y.joints["index-finger-tip"].position.distanceTo(y.joints["thumb-tip"].position),M=.02,C=.005;y.inputState.pinching&&x>M+C?(y.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:r.handedness,target:this})):!y.inputState.pinching&&x<=M-C&&(y.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:r.handedness,target:this}))}else null!==v&&r.gripSpace&&(d=o.getPose(r.gripSpace,a),null!==d&&(v.matrix.fromArray(d.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),d.linearVelocity?(v.hasLinearVelocity=!0,v.linearVelocity.copy(d.linearVelocity)):v.hasLinearVelocity=!1,d.angularVelocity?(v.hasAngularVelocity=!0,v.angularVelocity.copy(d.angularVelocity)):v.hasAngularVelocity=!1));return null!==g&&(g.visible=null!==c),null!==v&&(v.visible=null!==d),null!==y&&(y.visible=null!==f),this}}class Zu extends hr{constructor(r,o,a,c,d,f,g,v,y,w){if((w=void 0!==w?w:co)!==co&&w!==Zo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===a&&w===co&&(a=As),void 0===a&&w===Zo&&(a=Bn),super(null,c,d,f,g,v,w,a,y),this.image={width:r,height:o},this.magFilter=void 0!==g?g:Vn,this.minFilter=void 0!==v?v:Vn,this.flipY=!1,this.generateMipmaps=!1}}Zu.prototype.isDepthTexture=!0;class Ju extends Ml{constructor(r,o){super();const a=this;let c=null,d=1,f=null,g="local-floor";const v=r.extensions.has("WEBGL_multisampled_render_to_texture");let y=null,w=null,b=null,x=null,M=!1,C=null;const D=o.getContextAttributes();let R=null,T=null;const E=[],L=new Map,I=new Jn;I.layers.enable(1),I.viewport=new Mn;const V=new Jn;V.layers.enable(2),V.viewport=new Mn;const z=[I,V],j=new qh;j.layers.enable(1),j.layers.enable(2);let J=null,he=null;function oe(_e){const De=L.get(_e.inputSource);De&&De.dispatchEvent({type:_e.type,data:_e.inputSource})}function N(){L.forEach(function(_e,De){_e.disconnect(De)}),L.clear(),J=null,he=null,r.setRenderTarget(R),x=null,b=null,w=null,c=null,T=null,Ze.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function q(_e){const De=c.inputSources;for(let Ge=0;Ge<E.length;Ge++)L.set(De[Ge],E[Ge]);for(let Ge=0;Ge<_e.removed.length;Ge++){const et=_e.removed[Ge],at=L.get(et);at&&(at.dispatchEvent({type:"disconnected",data:et}),L.delete(et))}for(let Ge=0;Ge<_e.added.length;Ge++){const et=_e.added[Ge],at=L.get(et);at&&at.dispatchEvent({type:"connected",data:et})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_e){let De=E[_e];return void 0===De&&(De=new r_,E[_e]=De),De.getTargetRaySpace()},this.getControllerGrip=function(_e){let De=E[_e];return void 0===De&&(De=new r_,E[_e]=De),De.getGripSpace()},this.getHand=function(_e){let De=E[_e];return void 0===De&&(De=new r_,E[_e]=De),De.getHandSpace()},this.setFramebufferScaleFactor=function(_e){d=_e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_e){g=_e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f},this.getBaseLayer=function(){return null!==b?b:x},this.getBinding=function(){return w},this.getFrame=function(){return C},this.getSession=function(){return c},this.setSession=function(){var _e=(0,vr.A)(function*(De){if(c=De,null!==c){if(R=r.getRenderTarget(),c.addEventListener("select",oe),c.addEventListener("selectstart",oe),c.addEventListener("selectend",oe),c.addEventListener("squeeze",oe),c.addEventListener("squeezestart",oe),c.addEventListener("squeezeend",oe),c.addEventListener("end",N),c.addEventListener("inputsourceschange",q),!0!==D.xrCompatible&&(yield o.makeXRCompatible()),void 0===c.renderState.layers||!1===r.capabilities.isWebGL2)x=new XRWebGLLayer(c,o,{antialias:void 0!==c.renderState.layers||D.antialias,alpha:D.alpha,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:d}),c.updateRenderState({baseLayer:x}),T=new Eo(x.framebufferWidth,x.framebufferHeight,{format:Nr,type:hn,encoding:r.outputEncoding});else{M=D.antialias;let Ge=null,et=null,at=null;D.depth&&(at=D.stencil?35056:33190,Ge=D.stencil?Zo:co,et=D.stencil?Bn:As);const me={colorFormat:r.outputEncoding===xt?35907:32856,depthFormat:at,scaleFactor:d};w=new XRWebGLBinding(c,o),b=w.createProjectionLayer(me),c.updateRenderState({layers:[b]}),T=M?new Eu(b.textureWidth,b.textureHeight,{format:Nr,type:hn,depthTexture:new Zu(b.textureWidth,b.textureHeight,et,void 0,void 0,void 0,void 0,void 0,void 0,Ge),stencilBuffer:D.stencil,ignoreDepth:b.ignoreDepthValues,useRenderToTexture:v,encoding:r.outputEncoding}):new Eo(b.textureWidth,b.textureHeight,{format:Nr,type:hn,depthTexture:new Zu(b.textureWidth,b.textureHeight,et,void 0,void 0,void 0,void 0,void 0,void 0,Ge),stencilBuffer:D.stencil,ignoreDepth:b.ignoreDepthValues,encoding:r.outputEncoding})}T.isXRRenderTarget=!0,this.setFoveation(1),f=yield c.requestReferenceSpace(g),Ze.setContext(c),Ze.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"})}});return function(De){return _e.apply(this,arguments)}}();const K=new k,ie=new k;function te(_e,De){null===De?_e.matrixWorld.copy(_e.matrix):_e.matrixWorld.multiplyMatrices(De.matrixWorld,_e.matrix),_e.matrixWorldInverse.copy(_e.matrixWorld).invert()}this.updateCamera=function(_e){if(null===c)return;j.near=V.near=I.near=_e.near,j.far=V.far=I.far=_e.far,(J!==j.near||he!==j.far)&&(c.updateRenderState({depthNear:j.near,depthFar:j.far}),J=j.near,he=j.far);const De=_e.parent,Ge=j.cameras;te(j,De);for(let at=0;at<Ge.length;at++)te(Ge[at],De);j.matrixWorld.decompose(j.position,j.quaternion,j.scale),_e.position.copy(j.position),_e.quaternion.copy(j.quaternion),_e.scale.copy(j.scale),_e.matrix.copy(j.matrix),_e.matrixWorld.copy(j.matrixWorld);const et=_e.children;for(let at=0,me=et.length;at<me;at++)et[at].updateMatrixWorld(!0);2===Ge.length?function le(_e,De,Ge){K.setFromMatrixPosition(De.matrixWorld),ie.setFromMatrixPosition(Ge.matrixWorld);const et=K.distanceTo(ie),at=De.projectionMatrix.elements,me=Ge.projectionMatrix.elements,Vt=at[14]/(at[10]-1),ot=at[14]/(at[10]+1),Mt=(at[9]+1)/at[5],Ye=(at[9]-1)/at[5],Ht=(at[8]-1)/at[0],yt=(me[8]+1)/me[0],Ee=Vt*Ht,Fe=Vt*yt,Ne=et/(-Ht+yt),qe=Ne*-Ht;De.matrixWorld.decompose(_e.position,_e.quaternion,_e.scale),_e.translateX(qe),_e.translateZ(Ne),_e.matrixWorld.compose(_e.position,_e.quaternion,_e.scale),_e.matrixWorldInverse.copy(_e.matrixWorld).invert();const je=Vt+Ne,_t=ot+Ne;_e.projectionMatrix.makePerspective(Ee-qe,Fe+(et-qe),Mt*ot/_t*je,Ye*ot/_t*je,je,_t)}(j,I,V):j.projectionMatrix.copy(I.projectionMatrix)},this.getCamera=function(){return j},this.getFoveation=function(){return null!==b?b.fixedFoveation:null!==x?x.fixedFoveation:void 0},this.setFoveation=function(_e){null!==b&&(b.fixedFoveation=_e),null!==x&&void 0!==x.fixedFoveation&&(x.fixedFoveation=_e)};let ve=null;const Ze=new Ou;Ze.setAnimationLoop(function Ie(_e,De){if(y=De.getViewerPose(f),C=De,null!==y){const et=y.views;null!==x&&(r.setRenderTargetFramebuffer(T,x.framebuffer),r.setRenderTarget(T));let at=!1;et.length!==j.cameras.length&&(j.cameras.length=0,at=!0);for(let me=0;me<et.length;me++){const Vt=et[me];let ot=null;if(null!==x)ot=x.getViewport(Vt);else{const Ye=w.getViewSubImage(b,Vt);ot=Ye.viewport,0===me&&(r.setRenderTargetTextures(T,Ye.colorTexture,b.ignoreDepthValues?void 0:Ye.depthStencilTexture),r.setRenderTarget(T))}const Mt=z[me];Mt.matrix.fromArray(Vt.transform.matrix),Mt.projectionMatrix.fromArray(Vt.projectionMatrix),Mt.viewport.set(ot.x,ot.y,ot.width,ot.height),0===me&&j.matrix.copy(Mt.matrix),!0===at&&j.cameras.push(Mt)}}const Ge=c.inputSources;for(let et=0;et<E.length;et++)E[et].update(Ge[et],De,f);ve&&ve(_e,De),C=null}),this.setAnimationLoop=function(_e){ve=_e},this.dispose=function(){}}}function xx(h){function a(T,E){T.opacity.value=E.opacity,E.color&&T.diffuse.value.copy(E.color),E.emissive&&T.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(T.map.value=E.map),E.alphaMap&&(T.alphaMap.value=E.alphaMap),E.specularMap&&(T.specularMap.value=E.specularMap),E.alphaTest>0&&(T.alphaTest.value=E.alphaTest);const L=h.get(E).envMap;let I,V;L&&(T.envMap.value=L,T.flipEnvMap.value=L.isCubeTexture&&!1===L.isRenderTargetTexture?-1:1,T.reflectivity.value=E.reflectivity,T.ior.value=E.ior,T.refractionRatio.value=E.refractionRatio),E.lightMap&&(T.lightMap.value=E.lightMap,T.lightMapIntensity.value=E.lightMapIntensity),E.aoMap&&(T.aoMap.value=E.aoMap,T.aoMapIntensity.value=E.aoMapIntensity),E.map?I=E.map:E.specularMap?I=E.specularMap:E.displacementMap?I=E.displacementMap:E.normalMap?I=E.normalMap:E.bumpMap?I=E.bumpMap:E.roughnessMap?I=E.roughnessMap:E.metalnessMap?I=E.metalnessMap:E.alphaMap?I=E.alphaMap:E.emissiveMap?I=E.emissiveMap:E.clearcoatMap?I=E.clearcoatMap:E.clearcoatNormalMap?I=E.clearcoatNormalMap:E.clearcoatRoughnessMap?I=E.clearcoatRoughnessMap:E.specularIntensityMap?I=E.specularIntensityMap:E.specularColorMap?I=E.specularColorMap:E.transmissionMap?I=E.transmissionMap:E.thicknessMap?I=E.thicknessMap:E.sheenColorMap?I=E.sheenColorMap:E.sheenRoughnessMap&&(I=E.sheenRoughnessMap),void 0!==I&&(I.isWebGLRenderTarget&&(I=I.texture),!0===I.matrixAutoUpdate&&I.updateMatrix(),T.uvTransform.value.copy(I.matrix)),E.aoMap?V=E.aoMap:E.lightMap&&(V=E.lightMap),void 0!==V&&(V.isWebGLRenderTarget&&(V=V.texture),!0===V.matrixAutoUpdate&&V.updateMatrix(),T.uv2Transform.value.copy(V.matrix))}function b(T,E){T.roughness.value=E.roughness,T.metalness.value=E.metalness,E.roughnessMap&&(T.roughnessMap.value=E.roughnessMap),E.metalnessMap&&(T.metalnessMap.value=E.metalnessMap),E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap),E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale,E.side===rn&&(T.bumpScale.value*=-1)),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale),E.side===rn&&T.normalScale.value.negate()),E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias),h.get(E).envMap&&(T.envMapIntensity.value=E.envMapIntensity)}return{refreshFogUniforms:function r(T,E){T.fogColor.value.copy(E.color),E.isFog?(T.fogNear.value=E.near,T.fogFar.value=E.far):E.isFogExp2&&(T.fogDensity.value=E.density)},refreshMaterialUniforms:function o(T,E,L,I,V){E.isMeshBasicMaterial?a(T,E):E.isMeshLambertMaterial?(a(T,E),function v(T,E){E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap)}(T,E)):E.isMeshToonMaterial?(a(T,E),function w(T,E){E.gradientMap&&(T.gradientMap.value=E.gradientMap),E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap),E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale,E.side===rn&&(T.bumpScale.value*=-1)),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale),E.side===rn&&T.normalScale.value.negate()),E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)}(T,E)):E.isMeshPhongMaterial?(a(T,E),function y(T,E){T.specular.value.copy(E.specular),T.shininess.value=Math.max(E.shininess,1e-4),E.emissiveMap&&(T.emissiveMap.value=E.emissiveMap),E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale,E.side===rn&&(T.bumpScale.value*=-1)),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale),E.side===rn&&T.normalScale.value.negate()),E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)}(T,E)):E.isMeshStandardMaterial?(a(T,E),E.isMeshPhysicalMaterial?function x(T,E,L){b(T,E),T.ior.value=E.ior,E.sheen>0&&(T.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),T.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(T.sheenColorMap.value=E.sheenColorMap),E.sheenRoughnessMap&&(T.sheenRoughnessMap.value=E.sheenRoughnessMap)),E.clearcoat>0&&(T.clearcoat.value=E.clearcoat,T.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(T.clearcoatMap.value=E.clearcoatMap),E.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap),E.clearcoatNormalMap&&(T.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),T.clearcoatNormalMap.value=E.clearcoatNormalMap,E.side===rn&&T.clearcoatNormalScale.value.negate())),E.transmission>0&&(T.transmission.value=E.transmission,T.transmissionSamplerMap.value=L.texture,T.transmissionSamplerSize.value.set(L.width,L.height),E.transmissionMap&&(T.transmissionMap.value=E.transmissionMap),T.thickness.value=E.thickness,E.thicknessMap&&(T.thicknessMap.value=E.thicknessMap),T.attenuationDistance.value=E.attenuationDistance,T.attenuationColor.value.copy(E.attenuationColor)),T.specularIntensity.value=E.specularIntensity,T.specularColor.value.copy(E.specularColor),E.specularIntensityMap&&(T.specularIntensityMap.value=E.specularIntensityMap),E.specularColorMap&&(T.specularColorMap.value=E.specularColorMap)}(T,E,V):b(T,E)):E.isMeshMatcapMaterial?(a(T,E),function M(T,E){E.matcap&&(T.matcap.value=E.matcap),E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale,E.side===rn&&(T.bumpScale.value*=-1)),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale),E.side===rn&&T.normalScale.value.negate()),E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)}(T,E)):E.isMeshDepthMaterial?(a(T,E),function C(T,E){E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)}(T,E)):E.isMeshDistanceMaterial?(a(T,E),function D(T,E){E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias),T.referencePosition.value.copy(E.referencePosition),T.nearDistance.value=E.nearDistance,T.farDistance.value=E.farDistance}(T,E)):E.isMeshNormalMaterial?(a(T,E),function R(T,E){E.bumpMap&&(T.bumpMap.value=E.bumpMap,T.bumpScale.value=E.bumpScale,E.side===rn&&(T.bumpScale.value*=-1)),E.normalMap&&(T.normalMap.value=E.normalMap,T.normalScale.value.copy(E.normalScale),E.side===rn&&T.normalScale.value.negate()),E.displacementMap&&(T.displacementMap.value=E.displacementMap,T.displacementScale.value=E.displacementScale,T.displacementBias.value=E.displacementBias)}(T,E)):E.isLineBasicMaterial?(function c(T,E){T.diffuse.value.copy(E.color),T.opacity.value=E.opacity}(T,E),E.isLineDashedMaterial&&function d(T,E){T.dashSize.value=E.dashSize,T.totalSize.value=E.dashSize+E.gapSize,T.scale.value=E.scale}(T,E)):E.isPointsMaterial?function f(T,E,L,I){let V;T.diffuse.value.copy(E.color),T.opacity.value=E.opacity,T.size.value=E.size*L,T.scale.value=.5*I,E.map&&(T.map.value=E.map),E.alphaMap&&(T.alphaMap.value=E.alphaMap),E.alphaTest>0&&(T.alphaTest.value=E.alphaTest),E.map?V=E.map:E.alphaMap&&(V=E.alphaMap),void 0!==V&&(!0===V.matrixAutoUpdate&&V.updateMatrix(),T.uvTransform.value.copy(V.matrix))}(T,E,L,I):E.isSpriteMaterial?function g(T,E){let L;T.diffuse.value.copy(E.color),T.opacity.value=E.opacity,T.rotation.value=E.rotation,E.map&&(T.map.value=E.map),E.alphaMap&&(T.alphaMap.value=E.alphaMap),E.alphaTest>0&&(T.alphaTest.value=E.alphaTest),E.map?L=E.map:E.alphaMap&&(L=E.alphaMap),void 0!==L&&(!0===L.matrixAutoUpdate&&L.updateMatrix(),T.uvTransform.value.copy(L.matrix))}(T,E):E.isShadowMaterial?(T.color.value.copy(E.color),T.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}}}function Cn(h={}){const r=void 0!==h.canvas?h.canvas:function i_(){const h=Ls("canvas");return h.style.display="block",h}(),o=void 0!==h.context?h.context:null,a=void 0!==h.alpha&&h.alpha,c=void 0===h.depth||h.depth,d=void 0===h.stencil||h.stencil,f=void 0!==h.antialias&&h.antialias,g=void 0===h.premultipliedAlpha||h.premultipliedAlpha,v=void 0!==h.preserveDrawingBuffer&&h.preserveDrawingBuffer,y=void 0!==h.powerPreference?h.powerPreference:"default",w=void 0!==h.failIfMajorPerformanceCaveat&&h.failIfMajorPerformanceCaveat;let b=null,x=null;const M=[],C=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=kt,this.physicallyCorrectLights=!1,this.toneMapping=ai,this.toneMappingExposure=1;const D=this;let R=!1,T=0,E=0,L=null,I=-1,V=null;const z=new Mn,j=new Mn;let J=null,he=r.width,oe=r.height,N=1,q=null,K=null;const ie=new Mn(0,0,he,oe),le=new Mn(0,0,he,oe);let te=!1;const ve=new is;let Ie=!1,Ze=!1,_e=null;const De=new Je,Ge=new k,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function at(){return null===L?N:1}let ot,Mt,Ye,Ht,yt,Ee,Fe,Ne,qe,je,_t,Et,tn,zn,yn,G,B,ye,Le,it,be,dt,st,me=o;function Vt(U,re){for(let ge=0;ge<U.length;ge++){const Ce=r.getContext(U[ge],re);if(null!==Ce)return Ce}return null}try{const U={alpha:!0,depth:c,stencil:d,antialias:f,premultipliedAlpha:g,preserveDrawingBuffer:v,powerPreference:y,failIfMajorPerformanceCaveat:w};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${ir}`),r.addEventListener("webglcontextlost",Tt,!1),r.addEventListener("webglcontextrestored",Z,!1),null===me){const re=["webgl2","webgl","experimental-webgl"];if(!0===D.isWebGL1Renderer&&re.shift(),me=Vt(re,U),null===me)throw Vt(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===me.getShaderPrecisionFormat&&(me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}function We(){ot=new Ww(me),Mt=new Gw(me,ot,h),ot.init(Mt),dt=new Pc(me,ot,Mt),Ye=new Yu(me,ot,Mt),Ht=new jw(me),yt=new vx,Ee=new $h(me,ot,Ye,yt,Mt,dt,Ht),Fe=new _g(D),Ne=new kr(D),qe=new Io(me,Mt),st=new yg(me,ot,qe,Mt),je=new Er(me,qe,Ht,st),_t=new Bh(me,je,qe,Ht),Le=new Eg(me,Mt,Ee),G=new Hu(yt),Et=new Wh(D,Fe,Ne,ot,Mt,st,G),tn=new xx(yt),zn=new kC,yn=new wx(ot,Mt),ye=new AC(D,Fe,Ye,_t,a,g),B=new jh(D,_t,Mt),it=new Uu(me,ot,Ht,Mt),be=new xg(me,ot,Ht,Mt),Ht.programs=Et.programs,D.capabilities=Mt,D.extensions=ot,D.properties=yt,D.renderLists=zn,D.shadowMap=B,D.state=Ye,D.info=Ht}We();const Ue=new Ju(D,me);function Tt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function Z(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const U=Ht.autoReset,re=B.enabled,ge=B.autoUpdate,ue=B.needsUpdate,Ce=B.type;We(),Ht.autoReset=U,B.enabled=re,B.autoUpdate=ge,B.needsUpdate=ue,B.type=Ce}function Qe(U){const re=U.target;re.removeEventListener("dispose",Qe),function Xe(U){(function wt(U){const re=yt.get(U).programs;void 0!==re&&(re.forEach(function(ge){Et.releaseProgram(ge)}),U.isShaderMaterial&&Et.releaseShaderCache(U))})(U),yt.remove(U)}(re)}this.xr=Ue,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){const U=ot.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=ot.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(U){void 0!==U&&(N=U,this.setSize(he,oe,!1))},this.getSize=function(U){return U.set(he,oe)},this.setSize=function(U,re,ge){Ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(he=U,oe=re,r.width=Math.floor(U*N),r.height=Math.floor(re*N),!1!==ge&&(r.style.width=U+"px",r.style.height=re+"px"),this.setViewport(0,0,U,re))},this.getDrawingBufferSize=function(U){return U.set(he*N,oe*N).floor()},this.setDrawingBufferSize=function(U,re,ge){he=U,oe=re,N=ge,r.width=Math.floor(U*ge),r.height=Math.floor(re*ge),this.setViewport(0,0,U,re)},this.getCurrentViewport=function(U){return U.copy(z)},this.getViewport=function(U){return U.copy(ie)},this.setViewport=function(U,re,ge,ue){U.isVector4?ie.set(U.x,U.y,U.z,U.w):ie.set(U,re,ge,ue),Ye.viewport(z.copy(ie).multiplyScalar(N).floor())},this.getScissor=function(U){return U.copy(le)},this.setScissor=function(U,re,ge,ue){U.isVector4?le.set(U.x,U.y,U.z,U.w):le.set(U,re,ge,ue),Ye.scissor(j.copy(le).multiplyScalar(N).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(U){Ye.setScissorTest(te=U)},this.setOpaqueSort=function(U){q=U},this.setTransparentSort=function(U){K=U},this.getClearColor=function(U){return U.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(U,re,ge){let ue=0;(void 0===U||U)&&(ue|=16384),(void 0===re||re)&&(ue|=256),(void 0===ge||ge)&&(ue|=1024),me.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Tt,!1),r.removeEventListener("webglcontextrestored",Z,!1),zn.dispose(),yn.dispose(),yt.dispose(),Fe.dispose(),Ne.dispose(),_t.dispose(),st.dispose(),Et.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",Zt),Ue.removeEventListener("sessionend",er),_e&&(_e.dispose(),_e=null),Ui.stop()},this.renderBufferDirect=function(U,re,ge,ue,Ce,Nt){null===re&&(re=et);const Lt=Ce.isMesh&&Ce.matrixWorld.determinant()<0,Jt=function nb(U,re,ge,ue,Ce){!0!==re.isScene&&(re=et),Ee.resetTextureUnits();const Nt=re.fog,Jt=null===L?D.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:kt,$t=(ue.isMeshStandardMaterial?Ne:Fe).get(ue.envMap||(ue.isMeshStandardMaterial?re.environment:null)),_n=!0===ue.vertexColors&&!!ge.attributes.color&&4===ge.attributes.color.itemSize,nn=!!ue.normalMap&&!!ge.attributes.tangent,dn=!!ge.morphAttributes.position,Cr=!!ge.morphAttributes.normal,Yc=ge.morphAttributes.position?ge.morphAttributes.position.length:0,Od=ue.toneMapped?D.toneMapping:ai,bn=yt.get(ue),ua=x.state.lights;!0!==Ie||!0!==Ze&&U===V||G.setState(ue,U,U===V&&ue.id===I);let qr=!1;ue.version===bn.__version?(bn.needsLights&&bn.lightsStateVersion!==ua.state.version||bn.outputEncoding!==Jt||Ce.isInstancedMesh&&!1===bn.instancing||!Ce.isInstancedMesh&&!0===bn.instancing||Ce.isSkinnedMesh&&!1===bn.skinning||!Ce.isSkinnedMesh&&!0===bn.skinning||bn.envMap!==$t||ue.fog&&bn.fog!==Nt||void 0!==bn.numClippingPlanes&&(bn.numClippingPlanes!==G.numPlanes||bn.numIntersection!==G.numIntersection)||bn.vertexAlphas!==_n||bn.vertexTangents!==nn||bn.morphTargets!==dn||bn.morphNormals!==Cr||bn.toneMapping!==Od||!0===Mt.isWebGL2&&bn.morphTargetsCount!==Yc)&&(qr=!0):(qr=!0,bn.__version=ue.version);let da=bn.currentProgram;!0===qr&&(da=Nd(ue,re,Ce));let Bm=!1,ms=!1,Hi=!1;const Pr=da.getUniforms(),Ld=bn.uniforms;if(Ye.useProgram(da.program)&&(Bm=!0,ms=!0,Hi=!0),ue.id!==I&&(I=ue.id,ms=!0),Bm||V!==U){if(Pr.setValue(me,"projectionMatrix",U.projectionMatrix),Mt.logarithmicDepthBuffer&&Pr.setValue(me,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),V!==U&&(V=U,ms=!0,Hi=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshStandardMaterial||ue.envMap){const vs=Pr.map.cameraPosition;void 0!==vs&&vs.setValue(me,Ge.setFromMatrixPosition(U.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Pr.setValue(me,"isOrthographic",!0===U.isOrthographicCamera),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.isShadowMaterial||Ce.isSkinnedMesh)&&Pr.setValue(me,"viewMatrix",U.matrixWorldInverse)}if(Ce.isSkinnedMesh){Pr.setOptional(me,Ce,"bindMatrix"),Pr.setOptional(me,Ce,"bindMatrixInverse");const vs=Ce.skeleton;vs&&(Mt.floatVertexTextures?(null===vs.boneTexture&&vs.computeBoneTexture(),Pr.setValue(me,"boneTexture",vs.boneTexture,Ee),Pr.setValue(me,"boneTextureSize",vs.boneTextureSize)):Pr.setOptional(me,vs,"boneMatrices"))}return ge&&(void 0!==ge.morphAttributes.position||void 0!==ge.morphAttributes.normal)&&Le.update(Ce,ge,ue,da),(ms||bn.receiveShadow!==Ce.receiveShadow)&&(bn.receiveShadow=Ce.receiveShadow,Pr.setValue(me,"receiveShadow",Ce.receiveShadow)),ms&&(Pr.setValue(me,"toneMappingExposure",D.toneMappingExposure),bn.needsLights&&function rb(U,re){U.ambientLightColor.needsUpdate=re,U.lightProbe.needsUpdate=re,U.directionalLights.needsUpdate=re,U.directionalLightShadows.needsUpdate=re,U.pointLights.needsUpdate=re,U.pointLightShadows.needsUpdate=re,U.spotLights.needsUpdate=re,U.spotLightShadows.needsUpdate=re,U.rectAreaLights.needsUpdate=re,U.hemisphereLights.needsUpdate=re}(Ld,Hi),Nt&&ue.fog&&tn.refreshFogUniforms(Ld,Nt),tn.refreshMaterialUniforms(Ld,ue,N,oe,_e),Ha.upload(me,bn.uniformsList,Ld,Ee)),ue.isShaderMaterial&&!0===ue.uniformsNeedUpdate&&(Ha.upload(me,bn.uniformsList,Ld,Ee),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Pr.setValue(me,"center",Ce.center),Pr.setValue(me,"modelViewMatrix",Ce.modelViewMatrix),Pr.setValue(me,"normalMatrix",Ce.normalMatrix),Pr.setValue(me,"modelMatrix",Ce.matrixWorld),da}(U,re,ge,ue,Ce);Ye.setMaterial(ue,Lt);let $t=ge.index;const _n=ge.attributes.position;if(null===$t){if(void 0===_n||0===_n.count)return}else if(0===$t.count)return;let nn=1;!0===ue.wireframe&&($t=je.getWireframeAttribute(ge),nn=2),st.setup(Ce,ue,Jt,ge,$t);let dn,Cr=it;null!==$t&&(dn=qe.get($t),Cr=be,Cr.setIndex(dn));const Yc=null!==$t?$t.count:_n.count,Od=ge.drawRange.start*nn,bn=ge.drawRange.count*nn,ua=null!==Nt?Nt.start*nn:0,qr=null!==Nt?Nt.count*nn:1/0,da=Math.max(Od,ua),Bm=Math.min(Yc,Od+bn,ua+qr)-1,ms=Math.max(0,Bm-da+1);if(0!==ms){if(Ce.isMesh)!0===ue.wireframe?(Ye.setLineWidth(ue.wireframeLinewidth*at()),Cr.setMode(1)):Cr.setMode(4);else if(Ce.isLine){let Hi=ue.linewidth;void 0===Hi&&(Hi=1),Ye.setLineWidth(Hi*at()),Cr.setMode(Ce.isLineSegments?1:Ce.isLineLoop?2:3)}else Ce.isPoints?Cr.setMode(0):Ce.isSprite&&Cr.setMode(4);if(Ce.isInstancedMesh)Cr.renderInstances(da,ms,Ce.count);else if(ge.isInstancedBufferGeometry){const Hi=Math.min(ge.instanceCount,ge._maxInstanceCount);Cr.renderInstances(da,ms,Hi)}else Cr.render(da,ms)}},this.compile=function(U,re){x=yn.get(U),x.init(),C.push(x),U.traverseVisible(function(ge){ge.isLight&&ge.layers.test(re.layers)&&(x.pushLight(ge),ge.castShadow&&x.pushShadow(ge))}),x.setupLights(D.physicallyCorrectLights),U.traverse(function(ge){const ue=ge.material;if(ue)if(Array.isArray(ue))for(let Ce=0;Ce<ue.length;Ce++)Nd(ue[Ce],U,ge);else Nd(ue,U,ge)}),C.pop(),x=null};let Se=null;function Zt(){Ui.stop()}function er(){Ui.start()}const Ui=new Ou;function Sr(U,re,ge,ue){if(!1===U.visible)return;if(U.layers.test(re.layers))if(U.isGroup)ge=U.renderOrder;else if(U.isLOD)!0===U.autoUpdate&&U.update(re);else if(U.isLight)x.pushLight(U),U.castShadow&&x.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ve.intersectsSprite(U)){ue&&Ge.setFromMatrixPosition(U.matrixWorld).applyMatrix4(De);const Lt=_t.update(U),Jt=U.material;Jt.visible&&b.push(U,Lt,Jt,ge,Ge.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==Ht.render.frame&&(U.skeleton.update(),U.skeleton.frame=Ht.render.frame),!U.frustumCulled||ve.intersectsObject(U))){ue&&Ge.setFromMatrixPosition(U.matrixWorld).applyMatrix4(De);const Lt=_t.update(U),Jt=U.material;if(Array.isArray(Jt)){const $t=Lt.groups;for(let _n=0,nn=$t.length;_n<nn;_n++){const dn=$t[_n],Cr=Jt[dn.materialIndex];Cr&&Cr.visible&&b.push(U,Lt,Cr,ge,Ge.z,dn)}}else Jt.visible&&b.push(U,Lt,Jt,ge,Ge.z,null)}const Nt=U.children;for(let Lt=0,Jt=Nt.length;Lt<Jt;Lt++)Sr(Nt[Lt],re,ge,ue)}function la(U,re,ge,ue){const Ce=U.opaque,Nt=U.transmissive,Lt=U.transparent;x.setupLightsView(ge),Nt.length>0&&function ca(U,re,ge){null===_e&&(_e=new(!0===f&&!0===Mt.isWebGL2?Eu:Eo)(1024,1024,{generateMipmaps:!0,type:null!==dt.convert(Ir)?Ir:hn,minFilter:lo,magFilter:Vn,wrapS:sr,wrapT:sr,useRenderToTexture:ot.has("WEBGL_multisampled_render_to_texture")}));const ue=D.getRenderTarget();D.setRenderTarget(_e),D.clear();const Ce=D.toneMapping;D.toneMapping=ai,Pd(U,re,ge),D.toneMapping=Ce,Ee.updateMultisampleRenderTarget(_e),Ee.updateRenderTargetMipmap(_e),D.setRenderTarget(ue)}(Ce,re,ge),ue&&Ye.viewport(z.copy(ue)),Ce.length>0&&Pd(Ce,re,ge),Nt.length>0&&Pd(Nt,re,ge),Lt.length>0&&Pd(Lt,re,ge)}function Pd(U,re,ge){const ue=!0===re.isScene?re.overrideMaterial:null;for(let Ce=0,Nt=U.length;Ce<Nt;Ce++){const Lt=U[Ce],Jt=Lt.object,$t=Lt.geometry,_n=null===ue?Lt.material:ue,nn=Lt.group;Jt.layers.test(ge.layers)&&tb(Jt,re,ge,$t,_n,nn)}}function tb(U,re,ge,ue,Ce,Nt){U.onBeforeRender(D,re,ge,ue,Ce,Nt),U.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),Ce.onBeforeRender(D,re,ge,ue,U,Nt),!0===Ce.transparent&&Ce.side===Di?(Ce.side=rn,Ce.needsUpdate=!0,D.renderBufferDirect(ge,re,ue,Ce,U,Nt),Ce.side=Rn,Ce.needsUpdate=!0,D.renderBufferDirect(ge,re,ue,Ce,U,Nt),Ce.side=Di):D.renderBufferDirect(ge,re,ue,Ce,U,Nt),U.onAfterRender(D,re,ge,ue,Ce,Nt)}function Nd(U,re,ge){!0!==re.isScene&&(re=et);const ue=yt.get(U),Ce=x.state.lights,Lt=Ce.state.version,Jt=Et.getParameters(U,Ce.state,x.state.shadowsArray,re,ge),$t=Et.getProgramCacheKey(Jt);let _n=ue.programs;ue.environment=U.isMeshStandardMaterial?re.environment:null,ue.fog=re.fog,ue.envMap=(U.isMeshStandardMaterial?Ne:Fe).get(U.envMap||ue.environment),void 0===_n&&(U.addEventListener("dispose",Qe),_n=new Map,ue.programs=_n);let nn=_n.get($t);if(void 0!==nn){if(ue.currentProgram===nn&&ue.lightsStateVersion===Lt)return Vm(U,Jt),nn}else Jt.uniforms=Et.getUniforms(U),U.onBuild(ge,Jt,D),U.onBeforeCompile(Jt,D),nn=Et.acquireProgram(Jt,$t),_n.set($t,nn),ue.uniforms=Jt.uniforms;const dn=ue.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||!0===U.clipping)&&(dn.clippingPlanes=G.uniform),Vm(U,Jt),ue.needsLights=function ib(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&!0===U.lights}(U),ue.lightsStateVersion=Lt,ue.needsLights&&(dn.ambientLightColor.value=Ce.state.ambient,dn.lightProbe.value=Ce.state.probe,dn.directionalLights.value=Ce.state.directional,dn.directionalLightShadows.value=Ce.state.directionalShadow,dn.spotLights.value=Ce.state.spot,dn.spotLightShadows.value=Ce.state.spotShadow,dn.rectAreaLights.value=Ce.state.rectArea,dn.ltc_1.value=Ce.state.rectAreaLTC1,dn.ltc_2.value=Ce.state.rectAreaLTC2,dn.pointLights.value=Ce.state.point,dn.pointLightShadows.value=Ce.state.pointShadow,dn.hemisphereLights.value=Ce.state.hemi,dn.directionalShadowMap.value=Ce.state.directionalShadowMap,dn.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,dn.spotShadowMap.value=Ce.state.spotShadowMap,dn.spotShadowMatrix.value=Ce.state.spotShadowMatrix,dn.pointShadowMap.value=Ce.state.pointShadowMap,dn.pointShadowMatrix.value=Ce.state.pointShadowMatrix);const Cr=nn.getUniforms(),Yc=Ha.seqWithValue(Cr.seq,dn);return ue.currentProgram=nn,ue.uniformsList=Yc,nn}function Vm(U,re){const ge=yt.get(U);ge.outputEncoding=re.outputEncoding,ge.instancing=re.instancing,ge.skinning=re.skinning,ge.morphTargets=re.morphTargets,ge.morphNormals=re.morphNormals,ge.morphTargetsCount=re.morphTargetsCount,ge.numClippingPlanes=re.numClippingPlanes,ge.numIntersection=re.numClipIntersection,ge.vertexAlphas=re.vertexAlphas,ge.vertexTangents=re.vertexTangents,ge.toneMapping=re.toneMapping}Ui.setAnimationLoop(function gt(U){Se&&Se(U)}),typeof window<"u"&&Ui.setContext(window),this.setAnimationLoop=function(U){Se=U,Ue.setAnimationLoop(U),null===U?Ui.stop():Ui.start()},Ue.addEventListener("sessionstart",Zt),Ue.addEventListener("sessionend",er),this.render=function(U,re){if(void 0===re||!0===re.isCamera){if(!0!==R){if(!0===U.autoUpdate&&U.updateMatrixWorld(),null===re.parent&&re.updateMatrixWorld(),!0===Ue.enabled&&!0===Ue.isPresenting&&(!0===Ue.cameraAutoUpdate&&Ue.updateCamera(re),re=Ue.getCamera()),!0===U.isScene&&U.onBeforeRender(D,U,re,L),x=yn.get(U,C.length),x.init(),C.push(x),De.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),ve.setFromProjectionMatrix(De),Ze=this.localClippingEnabled,Ie=G.init(this.clippingPlanes,Ze,re),b=zn.get(U,M.length),b.init(),M.push(b),Sr(U,re,0,D.sortObjects),b.finish(),!0===D.sortObjects&&b.sort(q,K),!0===Ie&&G.beginShadows(),B.render(x.state.shadowsArray,U,re),!0===Ie&&G.endShadows(),!0===this.info.autoReset&&this.info.reset(),ye.render(b,U),x.setupLights(D.physicallyCorrectLights),re.isArrayCamera){const ue=re.cameras;for(let Ce=0,Nt=ue.length;Ce<Nt;Ce++){const Lt=ue[Ce];la(b,U,Lt,Lt.viewport)}}else la(b,U,re);null!==L&&(Ee.updateMultisampleRenderTarget(L),Ee.updateRenderTargetMipmap(L)),!0===U.isScene&&U.onAfterRender(D,U,re),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1),st.resetDefaultState(),I=-1,V=null,C.pop(),x=C.length>0?C[C.length-1]:null,M.pop(),b=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(U,re,ge){yt.get(U.texture).__webglTexture=re,yt.get(U.depthTexture).__webglTexture=ge;const ue=yt.get(U);ue.__hasExternalTextures=!0,ue.__hasExternalTextures&&(ue.__autoAllocateDepthBuffer=void 0===ge,ue.__autoAllocateDepthBuffer||U.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),U.useRenderToTexture=!1,U.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(U,re){const ge=yt.get(U);ge.__webglFramebuffer=re,ge.__useDefaultFramebuffer=void 0===re},this.setRenderTarget=function(U,re=0,ge=0){L=U,T=re,E=ge;let ue=!0;if(U){const $t=yt.get(U);void 0!==$t.__useDefaultFramebuffer?(Ye.bindFramebuffer(36160,null),ue=!1):void 0===$t.__webglFramebuffer?Ee.setupRenderTarget(U):$t.__hasExternalTextures&&Ee.rebindTextures(U,yt.get(U.texture).__webglTexture,yt.get(U.depthTexture).__webglTexture)}let Ce=null,Nt=!1,Lt=!1;if(U){const $t=U.texture;($t.isDataTexture3D||$t.isDataTexture2DArray)&&(Lt=!0);const _n=yt.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Ce=_n[re],Nt=!0):Ce=U.useRenderbuffer?yt.get(U).__webglMultisampledFramebuffer:_n,z.copy(U.viewport),j.copy(U.scissor),J=U.scissorTest}else z.copy(ie).multiplyScalar(N).floor(),j.copy(le).multiplyScalar(N).floor(),J=te;if(Ye.bindFramebuffer(36160,Ce)&&Mt.drawBuffers&&ue&&Ye.drawBuffers(U,Ce),Ye.viewport(z),Ye.scissor(j),Ye.setScissorTest(J),Nt){const $t=yt.get(U.texture);me.framebufferTexture2D(36160,36064,34069+re,$t.__webglTexture,ge)}else if(Lt){const $t=yt.get(U.texture);me.framebufferTextureLayer(36160,36064,$t.__webglTexture,ge||0,re||0)}I=-1},this.readRenderTargetPixels=function(U,re,ge,ue,Ce,Nt,Lt){if(!U||!U.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Jt=yt.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&void 0!==Lt&&(Jt=Jt[Lt]),Jt){Ye.bindFramebuffer(36160,Jt);try{const $t=U.texture,_n=$t.format,nn=$t.type;if(_n!==Nr&&dt.convert(_n)!==me.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const dn=nn===Ir&&(ot.has("EXT_color_buffer_half_float")||Mt.isWebGL2&&ot.has("EXT_color_buffer_float"));if(!(nn===hn||dt.convert(nn)===me.getParameter(35738)||nn===xo&&(Mt.isWebGL2||ot.has("OES_texture_float")||ot.has("WEBGL_color_buffer_float"))||dn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===me.checkFramebufferStatus(36160)?re>=0&&re<=U.width-ue&&ge>=0&&ge<=U.height-Ce&&me.readPixels(re,ge,ue,Ce,dt.convert(_n),dt.convert(nn),Nt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const $t=null!==L?yt.get(L).__webglFramebuffer:null;Ye.bindFramebuffer(36160,$t)}}},this.copyFramebufferToTexture=function(U,re,ge=0){if(!0!==re.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const ue=Math.pow(2,-ge),Ce=Math.floor(re.image.width*ue),Nt=Math.floor(re.image.height*ue);Ee.setTexture2D(re,0),me.copyTexSubImage2D(3553,ge,0,0,U.x,U.y,Ce,Nt),Ye.unbindTexture()},this.copyTextureToTexture=function(U,re,ge,ue=0){const Ce=re.image.width,Nt=re.image.height,Lt=dt.convert(ge.format),Jt=dt.convert(ge.type);Ee.setTexture2D(ge,0),me.pixelStorei(37440,ge.flipY),me.pixelStorei(37441,ge.premultiplyAlpha),me.pixelStorei(3317,ge.unpackAlignment),re.isDataTexture?me.texSubImage2D(3553,ue,U.x,U.y,Ce,Nt,Lt,Jt,re.image.data):re.isCompressedTexture?me.compressedTexSubImage2D(3553,ue,U.x,U.y,re.mipmaps[0].width,re.mipmaps[0].height,Lt,re.mipmaps[0].data):me.texSubImage2D(3553,ue,U.x,U.y,Lt,Jt,re.image),0===ue&&ge.generateMipmaps&&me.generateMipmap(3553),Ye.unbindTexture()},this.copyTextureToTexture3D=function(U,re,ge,ue,Ce=0){if(D.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Nt=U.max.x-U.min.x+1,Lt=U.max.y-U.min.y+1,Jt=U.max.z-U.min.z+1,$t=dt.convert(ue.format),_n=dt.convert(ue.type);let nn;if(ue.isDataTexture3D)Ee.setTexture3D(ue,0),nn=32879;else{if(!ue.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ee.setTexture2DArray(ue,0),nn=35866}me.pixelStorei(37440,ue.flipY),me.pixelStorei(37441,ue.premultiplyAlpha),me.pixelStorei(3317,ue.unpackAlignment);const dn=me.getParameter(3314),Cr=me.getParameter(32878),Yc=me.getParameter(3316),Od=me.getParameter(3315),bn=me.getParameter(32877),ua=ge.isCompressedTexture?ge.mipmaps[0]:ge.image;me.pixelStorei(3314,ua.width),me.pixelStorei(32878,ua.height),me.pixelStorei(3316,U.min.x),me.pixelStorei(3315,U.min.y),me.pixelStorei(32877,U.min.z),ge.isDataTexture||ge.isDataTexture3D?me.texSubImage3D(nn,Ce,re.x,re.y,re.z,Nt,Lt,Jt,$t,_n,ua.data):ge.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),me.compressedTexSubImage3D(nn,Ce,re.x,re.y,re.z,Nt,Lt,Jt,$t,ua.data)):me.texSubImage3D(nn,Ce,re.x,re.y,re.z,Nt,Lt,Jt,$t,_n,ua),me.pixelStorei(3314,dn),me.pixelStorei(32878,Cr),me.pixelStorei(3316,Yc),me.pixelStorei(3315,Od),me.pixelStorei(32877,bn),0===Ce&&ue.generateMipmaps&&me.generateMipmap(nn),Ye.unbindTexture()},this.initTexture=function(U){Ee.setTexture2D(U,0),Ye.unbindTexture()},this.resetState=function(){T=0,E=0,L=null,Ye.reset(),st.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Cn.prototype.isWebGLRenderer=!0,class Mx extends Cn{}.prototype.isWebGL1Renderer=!0;class Nc{constructor(r,o=25e-5){this.name="",this.color=new ke(r),this.density=o}clone(){return new Nc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Nc.prototype.isFogExp2=!0;class Qu{constructor(r,o=1,a=1e3){this.name="",this.color=new ke(r),this.near=o,this.far=a}clone(){return new Qu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Qu.prototype.isFog=!0;class Yh extends Gt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(r,o){return super.copy(r,o),null!==r.background&&(this.background=r.background.clone()),null!==r.environment&&(this.environment=r.environment.clone()),null!==r.fog&&(this.fog=r.fog.clone()),null!==r.overrideMaterial&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this}toJSON(r){const o=super.toJSON(r);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),o}}Yh.prototype.isScene=!0;class Fl{constructor(r,o){this.array=r,this.stride=o,this.count=void 0!==r?r.length/o:0,this.usage=Ns,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ri()}onUploadCallback(){}set needsUpdate(r){!0===r&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.usage=r.usage,this}copyAt(r,o,a){r*=this.stride,a*=o.stride;for(let c=0,d=this.stride;c<d;c++)this.array[r+c]=o.array[a+c];return this}set(r,o=0){return this.array.set(r,o),this}clone(r){void 0===r.arrayBuffers&&(r.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ri()),void 0===r.arrayBuffers[this.array.buffer._uuid]&&(r.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(r.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(o,this.stride);return a.setUsage(this.usage),a}onUpload(r){return this.onUploadCallback=r,this}toJSON(r){return void 0===r.arrayBuffers&&(r.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ri()),void 0===r.arrayBuffers[this.array.buffer._uuid]&&(r.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Fl.prototype.isInterleavedBuffer=!0;const $n=new k;class Js{constructor(r,o,a,c=!1){this.name="",this.data=r,this.itemSize=o,this.offset=a,this.normalized=!0===c}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(r){this.data.needsUpdate=r}applyMatrix4(r){for(let o=0,a=this.data.count;o<a;o++)$n.x=this.getX(o),$n.y=this.getY(o),$n.z=this.getZ(o),$n.applyMatrix4(r),this.setXYZ(o,$n.x,$n.y,$n.z);return this}applyNormalMatrix(r){for(let o=0,a=this.count;o<a;o++)$n.x=this.getX(o),$n.y=this.getY(o),$n.z=this.getZ(o),$n.applyNormalMatrix(r),this.setXYZ(o,$n.x,$n.y,$n.z);return this}transformDirection(r){for(let o=0,a=this.count;o<a;o++)$n.x=this.getX(o),$n.y=this.getY(o),$n.z=this.getZ(o),$n.transformDirection(r),this.setXYZ(o,$n.x,$n.y,$n.z);return this}setX(r,o){return this.data.array[r*this.data.stride+this.offset]=o,this}setY(r,o){return this.data.array[r*this.data.stride+this.offset+1]=o,this}setZ(r,o){return this.data.array[r*this.data.stride+this.offset+2]=o,this}setW(r,o){return this.data.array[r*this.data.stride+this.offset+3]=o,this}getX(r){return this.data.array[r*this.data.stride+this.offset]}getY(r){return this.data.array[r*this.data.stride+this.offset+1]}getZ(r){return this.data.array[r*this.data.stride+this.offset+2]}getW(r){return this.data.array[r*this.data.stride+this.offset+3]}setXY(r,o,a){return this.data.array[(r=r*this.data.stride+this.offset)+0]=o,this.data.array[r+1]=a,this}setXYZ(r,o,a,c){return this.data.array[(r=r*this.data.stride+this.offset)+0]=o,this.data.array[r+1]=a,this.data.array[r+2]=c,this}setXYZW(r,o,a,c,d){return this.data.array[(r=r*this.data.stride+this.offset)+0]=o,this.data.array[r+1]=a,this.data.array[r+2]=c,this.data.array[r+3]=d,this}clone(r){if(void 0===r){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return new en(new this.array.constructor(o),this.itemSize,this.normalized)}return void 0===r.interleavedBuffers&&(r.interleavedBuffers={}),void 0===r.interleavedBuffers[this.data.uuid]&&(r.interleavedBuffers[this.data.uuid]=this.data.clone(r)),new Js(r.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(r){if(void 0===r){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let a=0;a<this.count;a++){const c=a*this.data.stride+this.offset;for(let d=0;d<this.itemSize;d++)o.push(this.data.array[c+d])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}return void 0===r.interleavedBuffers&&(r.interleavedBuffers={}),void 0===r.interleavedBuffers[this.data.uuid]&&(r.interleavedBuffers[this.data.uuid]=this.data.toJSON(r)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Js.prototype.isInterleavedBufferAttribute=!0;class Ku extends lr{constructor(r){super(),this.type="SpriteMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.rotation=r.rotation,this.sizeAttenuation=r.sizeAttenuation,this}}let Oc;Ku.prototype.isSpriteMaterial=!0;const Zh=new k,ed=new k,ds=new k,Lc=new Me,Wa=new Me,Jh=new Je,Qh=new k,Fc=new k,kc=new k,td=new Me,Vc=new Me,zg=new Me;function nd(h,r,o,a,c,d){Lc.subVectors(h,o).addScalar(.5).multiply(a),void 0!==c?(Wa.x=d*Lc.x-c*Lc.y,Wa.y=c*Lc.x+d*Lc.y):Wa.copy(Lc),h.copy(r),h.x+=Wa.x,h.y+=Wa.y,h.applyMatrix4(Jh)}(class Kh extends Gt{constructor(r){if(super(),this.type="Sprite",void 0===Oc){Oc=new ft;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Fl(o,5);Oc.setIndex([0,1,2,0,2,3]),Oc.setAttribute("position",new Js(a,3,0,!1)),Oc.setAttribute("uv",new Js(a,2,3,!1))}this.geometry=Oc,this.material=void 0!==r?r:new Ku,this.center=new Me(.5,.5)}raycast(r,o){null===r.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ed.setFromMatrixScale(this.matrixWorld),Jh.copy(r.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(r.camera.matrixWorldInverse,this.matrixWorld),ds.setFromMatrixPosition(this.modelViewMatrix),r.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ed.multiplyScalar(-ds.z);const a=this.material.rotation;let c,d;0!==a&&(d=Math.cos(a),c=Math.sin(a));const f=this.center;nd(Qh.set(-.5,-.5,0),ds,f,ed,c,d),nd(Fc.set(.5,-.5,0),ds,f,ed,c,d),nd(kc.set(.5,.5,0),ds,f,ed,c,d),td.set(0,0),Vc.set(1,0),zg.set(1,1);let g=r.ray.intersectTriangle(Qh,Fc,kc,!1,Zh);if(null===g&&(nd(Fc.set(-.5,.5,0),ds,f,ed,c,d),Vc.set(0,1),g=r.ray.intersectTriangle(Qh,kc,Fc,!1,Zh),null===g))return;const v=r.ray.origin.distanceTo(Zh);v<r.near||v>r.far||o.push({distance:v,point:Zh.clone(),uv:ar.getUV(Zh,Qh,Fc,kc,td,Vc,zg,new Me),face:null,object:this})}copy(r){return super.copy(r),void 0!==r.center&&this.center.copy(r.center),this.material=r.material,this}}).prototype.isSprite=!0;const o_=new k,s_=new Mn,Ex=new Mn,tf=new k,nf=new Je;class rd extends Zn{constructor(r,o){super(r,o),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Je,this.bindMatrixInverse=new Je}copy(r){return super.copy(r),this.bindMode=r.bindMode,this.bindMatrix.copy(r.bindMatrix),this.bindMatrixInverse.copy(r.bindMatrixInverse),this.skeleton=r.skeleton,this}bind(r,o){this.skeleton=r,void 0===o&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const r=new Mn,o=this.geometry.attributes.skinWeight;for(let a=0,c=o.count;a<c;a++){r.x=o.getX(a),r.y=o.getY(a),r.z=o.getZ(a),r.w=o.getW(a);const d=1/r.manhattanLength();d!==1/0?r.multiplyScalar(d):r.set(1,0,0,0),o.setXYZW(a,r.x,r.y,r.z,r.w)}}updateMatrixWorld(r){super.updateMatrixWorld(r),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(r,o){const a=this.skeleton,c=this.geometry;s_.fromBufferAttribute(c.attributes.skinIndex,r),Ex.fromBufferAttribute(c.attributes.skinWeight,r),o_.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let d=0;d<4;d++){const f=Ex.getComponent(d);if(0!==f){const g=s_.getComponent(d);nf.multiplyMatrices(a.bones[g].matrixWorld,a.boneInverses[g]),o.addScaledVector(tf.copy(o_).applyMatrix4(nf),f)}}return o.applyMatrix4(this.bindMatrixInverse)}}rd.prototype.isSkinnedMesh=!0;class id extends Gt{constructor(){super(),this.type="Bone"}}id.prototype.isBone=!0;class Vl extends hr{constructor(r=null,o=1,a=1,c,d,f,g,v,y=Vn,w=Vn,b,x){super(null,f,g,v,y,w,c,d,b,x),this.image={data:r,width:o,height:a},this.magFilter=y,this.minFilter=w,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Vl.prototype.isDataTexture=!0;const Gg=new Je,Sx=new Je;class rf{constructor(r=[],o=[]){this.uuid=Ri(),this.bones=r.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const r=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(16*r.length),0===o.length)this.calculateInverses();else if(r.length!==o.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let a=0,c=this.bones.length;a<c;a++)this.boneInverses.push(new Je)}}calculateInverses(){this.boneInverses.length=0;for(let r=0,o=this.bones.length;r<o;r++){const a=new Je;this.bones[r]&&a.copy(this.bones[r].matrixWorld).invert(),this.boneInverses.push(a)}}pose(){for(let r=0,o=this.bones.length;r<o;r++){const a=this.bones[r];a&&a.matrixWorld.copy(this.boneInverses[r]).invert()}for(let r=0,o=this.bones.length;r<o;r++){const a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}update(){const r=this.bones,o=this.boneInverses,a=this.boneMatrices,c=this.boneTexture;for(let d=0,f=r.length;d<f;d++)Gg.multiplyMatrices(r[d]?r[d].matrixWorld:Sx,o[d]),Gg.toArray(a,16*d);null!==c&&(c.needsUpdate=!0)}clone(){return new rf(this.bones,this.boneInverses)}computeBoneTexture(){let r=Math.sqrt(4*this.bones.length);r=Xp(r),r=Math.max(r,4);const o=new Float32Array(r*r*4);o.set(this.boneMatrices);const a=new Vl(o,r,r,Nr,xo);return a.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=a,this.boneTextureSize=r,this}getBoneByName(r){for(let o=0,a=this.bones.length;o<a;o++){const c=this.bones[o];if(c.name===r)return c}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(r,o){this.uuid=r.uuid;for(let a=0,c=r.bones.length;a<c;a++){const d=r.bones[a];let f=o[d];void 0===f&&(console.warn("THREE.Skeleton: No bone found with UUID:",d),f=new id),this.bones.push(f),this.boneInverses.push((new Je).fromArray(r.boneInverses[a]))}return this.init(),this}toJSON(){const r={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};r.uuid=this.uuid;const o=this.bones,a=this.boneInverses;for(let c=0,d=o.length;c<d;c++)r.bones.push(o[c].uuid),r.boneInverses.push(a[c].toArray());return r}}class Uc extends en{constructor(r,o,a,c=1){"number"==typeof a&&(c=a,a=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(r,o,a),this.meshPerAttribute=c}copy(r){return super.copy(r),this.meshPerAttribute=r.meshPerAttribute,this}toJSON(){const r=super.toJSON();return r.meshPerAttribute=this.meshPerAttribute,r.isInstancedBufferAttribute=!0,r}}Uc.prototype.isInstancedBufferAttribute=!0;const a_=new Je,l_=new Je,Lo=[],Qs=new Zn;(class c_ extends Zn{constructor(r,o,a){super(r,o),this.instanceMatrix=new Uc(new Float32Array(16*a),16),this.instanceColor=null,this.count=a,this.frustumCulled=!1}copy(r){return super.copy(r),this.instanceMatrix.copy(r.instanceMatrix),null!==r.instanceColor&&(this.instanceColor=r.instanceColor.clone()),this.count=r.count,this}getColorAt(r,o){o.fromArray(this.instanceColor.array,3*r)}getMatrixAt(r,o){o.fromArray(this.instanceMatrix.array,16*r)}raycast(r,o){const a=this.matrixWorld,c=this.count;if(Qs.geometry=this.geometry,Qs.material=this.material,void 0!==Qs.material)for(let d=0;d<c;d++){this.getMatrixAt(d,a_),l_.multiplyMatrices(a,a_),Qs.matrixWorld=l_,Qs.raycast(r,Lo);for(let f=0,g=Lo.length;f<g;f++){const v=Lo[f];v.instanceId=d,v.object=this,o.push(v)}Lo.length=0}}setColorAt(r,o){null===this.instanceColor&&(this.instanceColor=new Uc(new Float32Array(3*this.instanceMatrix.count),3)),o.toArray(this.instanceColor.array,3*r)}setMatrixAt(r,o){o.toArray(this.instanceMatrix.array,16*r)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class ni extends lr{constructor(r){super(),this.type="LineBasicMaterial",this.color=new ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this}}ni.prototype.isLineBasicMaterial=!0;const Cx=new k,Tx=new k,Dx=new Je,u_=new Cl,od=new jr;class Ks extends Gt{constructor(r=new ft,o=new ni){super(),this.type="Line",this.geometry=r,this.material=o,this.updateMorphTargets()}copy(r){return super.copy(r),this.material=r.material,this.geometry=r.geometry,this}computeLineDistances(){const r=this.geometry;if(r.isBufferGeometry)if(null===r.index){const o=r.attributes.position,a=[0];for(let c=1,d=o.count;c<d;c++)Cx.fromBufferAttribute(o,c-1),Tx.fromBufferAttribute(o,c),a[c]=a[c-1],a[c]+=Cx.distanceTo(Tx);r.setAttribute("lineDistance",new $e(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else r.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(r,o){const a=this.geometry,c=this.matrixWorld,d=r.params.Line.threshold,f=a.drawRange;if(null===a.boundingSphere&&a.computeBoundingSphere(),od.copy(a.boundingSphere),od.applyMatrix4(c),od.radius+=d,!1===r.ray.intersectsSphere(od))return;Dx.copy(c).invert(),u_.copy(r.ray).applyMatrix4(Dx);const g=d/((this.scale.x+this.scale.y+this.scale.z)/3),v=g*g,y=new k,w=new k,b=new k,x=new k,M=this.isLineSegments?2:1;if(a.isBufferGeometry){const C=a.index,R=a.attributes.position;if(null!==C)for(let L=Math.max(0,f.start),I=Math.min(C.count,f.start+f.count)-1;L<I;L+=M){const V=C.getX(L),z=C.getX(L+1);if(y.fromBufferAttribute(R,V),w.fromBufferAttribute(R,z),u_.distanceSqToSegment(y,w,x,b)>v)continue;x.applyMatrix4(this.matrixWorld);const J=r.ray.origin.distanceTo(x);J<r.near||J>r.far||o.push({distance:J,point:b.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}else for(let L=Math.max(0,f.start),I=Math.min(R.count,f.start+f.count)-1;L<I;L+=M){if(y.fromBufferAttribute(R,L),w.fromBufferAttribute(R,L+1),u_.distanceSqToSegment(y,w,x,b)>v)continue;x.applyMatrix4(this.matrixWorld);const z=r.ray.origin.distanceTo(x);z<r.near||z>r.far||o.push({distance:z,point:b.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else a.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const o=r.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,f=c.length;d<f;d++){const g=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=d}}}}else{const o=r.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ks.prototype.isLine=!0;const d_=new k,h_=new k;class ki extends Ks{constructor(r,o){super(r,o),this.type="LineSegments"}computeLineDistances(){const r=this.geometry;if(r.isBufferGeometry)if(null===r.index){const o=r.attributes.position,a=[];for(let c=0,d=o.count;c<d;c+=2)d_.fromBufferAttribute(o,c),h_.fromBufferAttribute(o,c+1),a[c]=0===c?0:a[c-1],a[c+1]=a[c]+d_.distanceTo(h_);r.setAttribute("lineDistance",new $e(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else r.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ki.prototype.isLineSegments=!0;class sd extends Ks{constructor(r,o){super(r,o),this.type="LineLoop"}}sd.prototype.isLineLoop=!0;class Si extends lr{constructor(r){super(),this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.alphaMap=r.alphaMap,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this}}Si.prototype.isPointsMaterial=!0;const Hc=new Je,sf=new Cl,ad=new jr,ld=new k;class af extends Gt{constructor(r=new ft,o=new Si){super(),this.type="Points",this.geometry=r,this.material=o,this.updateMorphTargets()}copy(r){return super.copy(r),this.material=r.material,this.geometry=r.geometry,this}raycast(r,o){const a=this.geometry,c=this.matrixWorld,d=r.params.Points.threshold,f=a.drawRange;if(null===a.boundingSphere&&a.computeBoundingSphere(),ad.copy(a.boundingSphere),ad.applyMatrix4(c),ad.radius+=d,!1===r.ray.intersectsSphere(ad))return;Hc.copy(c).invert(),sf.copy(r.ray).applyMatrix4(Hc);const g=d/((this.scale.x+this.scale.y+this.scale.z)/3),v=g*g;if(a.isBufferGeometry){const y=a.index,b=a.attributes.position;if(null!==y)for(let C=Math.max(0,f.start),D=Math.min(y.count,f.start+f.count);C<D;C++){const R=y.getX(C);ld.fromBufferAttribute(b,R),Ax(ld,R,v,c,r,o,this)}else for(let C=Math.max(0,f.start),D=Math.min(b.count,f.start+f.count);C<D;C++)ld.fromBufferAttribute(b,C),Ax(ld,C,v,c,r,o,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const r=this.geometry;if(r.isBufferGeometry){const o=r.morphAttributes,a=Object.keys(o);if(a.length>0){const c=o[a[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let d=0,f=c.length;d<f;d++){const g=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=d}}}}else{const o=r.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Ax(h,r,o,a,c,d,f){const g=sf.distanceSqToPoint(h);if(g<o){const v=new k;sf.closestPointToPoint(h,v),v.applyMatrix4(a);const y=c.ray.origin.distanceTo(v);if(y<c.near||y>c.far)return;d.push({distance:y,distanceToRay:Math.sqrt(g),point:v,index:r,face:null,object:f})}}af.prototype.isPoints=!0,class UC extends hr{constructor(r,o,a,c,d,f,g,v,y){super(r,o,a,c,d,f,g,v,y),this.minFilter=void 0!==f?f:Wn,this.magFilter=void 0!==d?d:Wn,this.generateMipmaps=!1;const w=this;"requestVideoFrameCallback"in r&&r.requestVideoFrameCallback(function b(){w.needsUpdate=!0,r.requestVideoFrameCallback(b)})}clone(){return new this.constructor(this.image).copy(this)}update(){const r=this.image;"requestVideoFrameCallback"in r==0&&r.readyState>=r.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class Wg extends hr{constructor(r,o,a){super({width:r,height:o}),this.format=a,this.magFilter=Vn,this.minFilter=Vn,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class lf extends hr{constructor(r,o,a,c,d,f,g,v,y,w,b,x){super(null,f,g,v,y,w,c,d,b,x),this.image={width:o,height:a},this.mipmaps=r,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class HC extends hr{constructor(r,o,a,c,d,f,g,v,y){super(r,o,a,c,d,f,g,v,y),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new k,new k,new k,new ar;class mo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(r,o){const a=this.getUtoTmapping(r);return this.getPoint(a,o)}getPoints(r=5){const o=[];for(let a=0;a<=r;a++)o.push(this.getPoint(a/r));return o}getSpacedPoints(r=5){const o=[];for(let a=0;a<=r;a++)o.push(this.getPointAt(a/r));return o}getLength(){const r=this.getLengths();return r[r.length-1]}getLengths(r=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let a,c=this.getPoint(0),d=0;o.push(0);for(let f=1;f<=r;f++)a=this.getPoint(f/r),d+=a.distanceTo(c),o.push(d),c=a;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(r,o){const a=this.getLengths();let c=0;const d=a.length;let f;f=o||r*a[d-1];let y,g=0,v=d-1;for(;g<=v;)if(c=Math.floor(g+(v-g)/2),y=a[c]-f,y<0)g=c+1;else{if(!(y>0)){v=c;break}v=c-1}if(c=v,a[c]===f)return c/(d-1);const w=a[c];return(c+(f-w)/(a[c+1]-w))/(d-1)}getTangent(r,o){let c=r-1e-4,d=r+1e-4;c<0&&(c=0),d>1&&(d=1);const f=this.getPoint(c),g=this.getPoint(d),v=o||(f.isVector2?new Me:new k);return v.copy(g).sub(f).normalize(),v}getTangentAt(r,o){const a=this.getUtoTmapping(r);return this.getTangent(a,o)}computeFrenetFrames(r,o){const a=new k,c=[],d=[],f=[],g=new k,v=new Je;for(let M=0;M<=r;M++)c[M]=this.getTangentAt(M/r,new k);d[0]=new k,f[0]=new k;let y=Number.MAX_VALUE;const w=Math.abs(c[0].x),b=Math.abs(c[0].y),x=Math.abs(c[0].z);w<=y&&(y=w,a.set(1,0,0)),b<=y&&(y=b,a.set(0,1,0)),x<=y&&a.set(0,0,1),g.crossVectors(c[0],a).normalize(),d[0].crossVectors(c[0],g),f[0].crossVectors(c[0],d[0]);for(let M=1;M<=r;M++){if(d[M]=d[M-1].clone(),f[M]=f[M-1].clone(),g.crossVectors(c[M-1],c[M]),g.length()>Number.EPSILON){g.normalize();const C=Math.acos(pn(c[M-1].dot(c[M]),-1,1));d[M].applyMatrix4(v.makeRotationAxis(g,C))}f[M].crossVectors(c[M],d[M])}if(!0===o){let M=Math.acos(pn(d[0].dot(d[r]),-1,1));M/=r,c[0].dot(g.crossVectors(d[0],d[r]))>0&&(M=-M);for(let C=1;C<=r;C++)d[C].applyMatrix4(v.makeRotationAxis(c[C],M*C)),f[C].crossVectors(c[C],d[C])}return{tangents:c,normals:d,binormals:f}}clone(){return(new this.constructor).copy(this)}copy(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}toJSON(){const r={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r}fromJSON(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}}class ud extends mo{constructor(r=0,o=0,a=1,c=1,d=0,f=2*Math.PI,g=!1,v=0){super(),this.type="EllipseCurve",this.aX=r,this.aY=o,this.xRadius=a,this.yRadius=c,this.aStartAngle=d,this.aEndAngle=f,this.aClockwise=g,this.aRotation=v}getPoint(r,o){const a=o||new Me,c=2*Math.PI;let d=this.aEndAngle-this.aStartAngle;const f=Math.abs(d)<Number.EPSILON;for(;d<0;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=f?0:c),!0===this.aClockwise&&!f&&(d===c?d=-c:d-=c);const g=this.aStartAngle+r*d;let v=this.aX+this.xRadius*Math.cos(g),y=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation){const w=Math.cos(this.aRotation),b=Math.sin(this.aRotation),x=v-this.aX,M=y-this.aY;v=x*w-M*b+this.aX,y=x*b+M*w+this.aY}return a.set(v,y)}copy(r){return super.copy(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}toJSON(){const r=super.toJSON();return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r}fromJSON(r){return super.fromJSON(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}}ud.prototype.isEllipseCurve=!0;class dd extends ud{constructor(r,o,a,c,d,f){super(r,o,a,a,c,d,f),this.type="ArcCurve"}}function $g(){let h=0,r=0,o=0,a=0;function c(d,f,g,v){h=d,r=g,o=-3*d+3*f-2*g-v,a=2*d-2*f+g+v}return{initCatmullRom:function(d,f,g,v,y){c(f,g,y*(g-d),y*(v-f))},initNonuniformCatmullRom:function(d,f,g,v,y,w,b){let x=(f-d)/y-(g-d)/(y+w)+(g-f)/w,M=(g-f)/w-(v-f)/(w+b)+(v-g)/b;x*=w,M*=w,c(f,g,x,M)},calc:function(d){const f=d*d;return h+r*d+o*f+a*(f*d)}}}dd.prototype.isArcCurve=!0;const zc=new k,qg=new $g,$a=new $g,hd=new $g;class p_ extends mo{constructor(r=[],o=!1,a="centripetal",c=.5){super(),this.type="CatmullRomCurve3",this.points=r,this.closed=o,this.curveType=a,this.tension=c}getPoint(r,o=new k){const a=o,c=this.points,d=c.length,f=(d-(this.closed?0:1))*r;let y,w,g=Math.floor(f),v=f-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/d)+1)*d:0===v&&g===d-1&&(g=d-2,v=1),this.closed||g>0?y=c[(g-1)%d]:(zc.subVectors(c[0],c[1]).add(c[0]),y=zc);const b=c[g%d],x=c[(g+1)%d];if(this.closed||g+2<d?w=c[(g+2)%d]:(zc.subVectors(c[d-1],c[d-2]).add(c[d-1]),w=zc),"centripetal"===this.curveType||"chordal"===this.curveType){const M="chordal"===this.curveType?.5:.25;let C=Math.pow(y.distanceToSquared(b),M),D=Math.pow(b.distanceToSquared(x),M),R=Math.pow(x.distanceToSquared(w),M);D<1e-4&&(D=1),C<1e-4&&(C=D),R<1e-4&&(R=D),qg.initNonuniformCatmullRom(y.x,b.x,x.x,w.x,C,D,R),$a.initNonuniformCatmullRom(y.y,b.y,x.y,w.y,C,D,R),hd.initNonuniformCatmullRom(y.z,b.z,x.z,w.z,C,D,R)}else"catmullrom"===this.curveType&&(qg.initCatmullRom(y.x,b.x,x.x,w.x,this.tension),$a.initCatmullRom(y.y,b.y,x.y,w.y,this.tension),hd.initCatmullRom(y.z,b.z,x.z,w.z,this.tension));return a.set(qg.calc(v),$a.calc(v),hd.calc(v)),a}copy(r){super.copy(r),this.points=[];for(let o=0,a=r.points.length;o<a;o++)this.points.push(r.points[o].clone());return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}toJSON(){const r=super.toJSON();r.points=[];for(let o=0,a=this.points.length;o<a;o++)r.points.push(this.points[o].toArray());return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r}fromJSON(r){super.fromJSON(r),this.points=[];for(let o=0,a=r.points.length;o<a;o++){const c=r.points[o];this.points.push((new k).fromArray(c))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}}function ea(h,r,o,a,c){const d=.5*(a-r),f=.5*(c-o),g=h*h;return(2*o-2*a+d+f)*(h*g)+(-3*o+3*a-2*d-f)*g+d*h+o}function fd(h,r,o,a){return function g_(h,r){const o=1-h;return o*o*r}(h,r)+function Ix(h,r){return 2*(1-h)*h*r}(h,o)+function Rx(h,r){return h*h*r}(h,a)}function ta(h,r,o,a,c){return function Px(h,r){const o=1-h;return o*o*o*r}(h,r)+function m_(h,r){const o=1-h;return 3*o*o*h*r}(h,o)+function zC(h,r){return 3*(1-h)*h*h*r}(h,a)+function GC(h,r){return h*h*h*r}(h,c)}p_.prototype.isCatmullRomCurve3=!0;class Xg extends mo{constructor(r=new Me,o=new Me,a=new Me,c=new Me){super(),this.type="CubicBezierCurve",this.v0=r,this.v1=o,this.v2=a,this.v3=c}getPoint(r,o=new Me){const a=o,c=this.v0,d=this.v1,f=this.v2,g=this.v3;return a.set(ta(r,c.x,d.x,f.x,g.x),ta(r,c.y,d.y,f.y,g.y)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}Xg.prototype.isCubicBezierCurve=!0;class v_ extends mo{constructor(r=new k,o=new k,a=new k,c=new k){super(),this.type="CubicBezierCurve3",this.v0=r,this.v1=o,this.v2=a,this.v3=c}getPoint(r,o=new k){const a=o,c=this.v0,d=this.v1,f=this.v2,g=this.v3;return a.set(ta(r,c.x,d.x,f.x,g.x),ta(r,c.y,d.y,f.y,g.y),ta(r,c.z,d.z,f.z,g.z)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}}v_.prototype.isCubicBezierCurve3=!0;class pf extends mo{constructor(r=new Me,o=new Me){super(),this.type="LineCurve",this.v1=r,this.v2=o}getPoint(r,o=new Me){const a=o;return 1===r?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(r).add(this.v1)),a}getPointAt(r,o){return this.getPoint(r,o)}getTangent(r,o){const a=o||new Me;return a.copy(this.v2).sub(this.v1).normalize(),a}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}pf.prototype.isLineCurve=!0;class Yg extends mo{constructor(r=new Me,o=new Me,a=new Me){super(),this.type="QuadraticBezierCurve",this.v0=r,this.v1=o,this.v2=a}getPoint(r,o=new Me){const a=o,c=this.v0,d=this.v1,f=this.v2;return a.set(fd(r,c.x,d.x,f.x),fd(r,c.y,d.y,f.y)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}Yg.prototype.isQuadraticBezierCurve=!0;class Zg extends mo{constructor(r=new k,o=new k,a=new k){super(),this.type="QuadraticBezierCurve3",this.v0=r,this.v1=o,this.v2=a}getPoint(r,o=new k){const a=o,c=this.v0,d=this.v1,f=this.v2;return a.set(fd(r,c.x,d.x,f.x),fd(r,c.y,d.y,f.y),fd(r,c.z,d.z,f.z)),a}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}}Zg.prototype.isQuadraticBezierCurve3=!0;class Jg extends mo{constructor(r=[]){super(),this.type="SplineCurve",this.points=r}getPoint(r,o=new Me){const a=o,c=this.points,d=(c.length-1)*r,f=Math.floor(d),g=d-f,v=c[0===f?f:f-1],y=c[f],w=c[f>c.length-2?c.length-1:f+1],b=c[f>c.length-3?c.length-1:f+2];return a.set(ea(g,v.x,y.x,w.x,b.x),ea(g,v.y,y.y,w.y,b.y)),a}copy(r){super.copy(r),this.points=[];for(let o=0,a=r.points.length;o<a;o++)this.points.push(r.points[o].clone());return this}toJSON(){const r=super.toJSON();r.points=[];for(let o=0,a=this.points.length;o<a;o++)r.points.push(this.points[o].toArray());return r}fromJSON(r){super.fromJSON(r),this.points=[];for(let o=0,a=r.points.length;o<a;o++){const c=r.points[o];this.points.push((new Me).fromArray(c))}return this}}Jg.prototype.isSplineCurve=!0;var Qg=Object.freeze({__proto__:null,ArcCurve:dd,CatmullRomCurve3:p_,CubicBezierCurve:Xg,CubicBezierCurve3:v_,EllipseCurve:ud,LineCurve:pf,LineCurve3:class y_ extends mo{constructor(r=new k,o=new k){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=r,this.v2=o}getPoint(r,o=new k){const a=o;return 1===r?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(r).add(this.v1)),a}getPointAt(r,o){return this.getPoint(r,o)}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}},QuadraticBezierCurve:Yg,QuadraticBezierCurve3:Zg,SplineCurve:Jg});class Nx extends mo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(r){this.curves.push(r)}closePath(){const r=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);r.equals(o)||this.curves.push(new pf(o,r))}getPoint(r,o){const a=r*this.getLength(),c=this.getCurveLengths();let d=0;for(;d<c.length;){if(c[d]>=a){const f=c[d]-a,g=this.curves[d],v=g.getLength();return g.getPointAt(0===v?0:1-f/v,o)}d++}return null}getLength(){const r=this.getCurveLengths();return r[r.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const r=[];let o=0;for(let a=0,c=this.curves.length;a<c;a++)o+=this.curves[a].getLength(),r.push(o);return this.cacheLengths=r,r}getSpacedPoints(r=40){const o=[];for(let a=0;a<=r;a++)o.push(this.getPoint(a/r));return this.autoClose&&o.push(o[0]),o}getPoints(r=12){const o=[];let a;for(let c=0,d=this.curves;c<d.length;c++){const f=d[c],v=f.getPoints(f&&f.isEllipseCurve?2*r:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?r*f.points.length:r);for(let y=0;y<v.length;y++){const w=v[y];a&&a.equals(w)||(o.push(w),a=w)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(r){super.copy(r),this.curves=[];for(let o=0,a=r.curves.length;o<a;o++)this.curves.push(r.curves[o].clone());return this.autoClose=r.autoClose,this}toJSON(){const r=super.toJSON();r.autoClose=this.autoClose,r.curves=[];for(let o=0,a=this.curves.length;o<a;o++)r.curves.push(this.curves[o].toJSON());return r}fromJSON(r){super.fromJSON(r),this.autoClose=r.autoClose,this.curves=[];for(let o=0,a=r.curves.length;o<a;o++){const c=r.curves[o];this.curves.push((new Qg[c.type]).fromJSON(c))}return this}}class gf extends Nx{constructor(r){super(),this.type="Path",this.currentPoint=new Me,r&&this.setFromPoints(r)}setFromPoints(r){this.moveTo(r[0].x,r[0].y);for(let o=1,a=r.length;o<a;o++)this.lineTo(r[o].x,r[o].y);return this}moveTo(r,o){return this.currentPoint.set(r,o),this}lineTo(r,o){const a=new pf(this.currentPoint.clone(),new Me(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}quadraticCurveTo(r,o,a,c){const d=new Yg(this.currentPoint.clone(),new Me(r,o),new Me(a,c));return this.curves.push(d),this.currentPoint.set(a,c),this}bezierCurveTo(r,o,a,c,d,f){const g=new Xg(this.currentPoint.clone(),new Me(r,o),new Me(a,c),new Me(d,f));return this.curves.push(g),this.currentPoint.set(d,f),this}splineThru(r){const o=[this.currentPoint.clone()].concat(r),a=new Jg(o);return this.curves.push(a),this.currentPoint.copy(r[r.length-1]),this}arc(r,o,a,c,d,f){return this.absarc(r+this.currentPoint.x,o+this.currentPoint.y,a,c,d,f),this}absarc(r,o,a,c,d,f){return this.absellipse(r,o,a,a,c,d,f),this}ellipse(r,o,a,c,d,f,g,v){return this.absellipse(r+this.currentPoint.x,o+this.currentPoint.y,a,c,d,f,g,v),this}absellipse(r,o,a,c,d,f,g,v){const y=new ud(r,o,a,c,d,f,g,v);if(this.curves.length>0){const b=y.getPoint(0);b.equals(this.currentPoint)||this.lineTo(b.x,b.y)}this.curves.push(y);const w=y.getPoint(1);return this.currentPoint.copy(w),this}copy(r){return super.copy(r),this.currentPoint.copy(r.currentPoint),this}toJSON(){const r=super.toJSON();return r.currentPoint=this.currentPoint.toArray(),r}fromJSON(r){return super.fromJSON(r),this.currentPoint.fromArray(r.currentPoint),this}}class Fo extends gf{constructor(r){super(r),this.uuid=Ri(),this.type="Shape",this.holes=[]}getPointsHoles(r){const o=[];for(let a=0,c=this.holes.length;a<c;a++)o[a]=this.holes[a].getPoints(r);return o}extractPoints(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}}copy(r){super.copy(r),this.holes=[];for(let o=0,a=r.holes.length;o<a;o++)this.holes.push(r.holes[o].clone());return this}toJSON(){const r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let o=0,a=this.holes.length;o<a;o++)r.holes.push(this.holes[o].toJSON());return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let o=0,a=r.holes.length;o<a;o++){const c=r.holes[o];this.holes.push((new gf).fromJSON(c))}return this}}function Ox(h,r,o,a,c){let d,f;if(c===function Bx(h,r,o,a){let c=0;for(let d=r,f=o-a;d<o;d+=a)c+=(h[f]-h[d])*(h[d+1]+h[f+1]),f=d;return c}(h,r,o,a)>0)for(d=r;d<o;d+=a)f=na(d,h[d],h[d+1],f);else for(d=o-a;d>=r;d-=a)f=na(d,h[d],h[d+1],f);return f&&pd(f,f.next)&&(Ul(f),f=f.next),f}function hs(h,r){if(!h)return h;r||(r=h);let a,o=h;do{if(a=!1,o.steiner||!pd(o,o.next)&&0!==un(o.prev,o,o.next))o=o.next;else{if(Ul(o),o=r=o.prev,o===o.next)break;a=!0}}while(a||o!==r);return r}function mf(h,r,o,a,c,d,f){if(!h)return;!f&&d&&function b_(h,r,o,a){let c=h;do{null===c.z&&(c.z=em(c.x,c.y,r,o,a)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next}while(c!==h);c.prevZ.nextZ=null,c.prevZ=null,function Fx(h){let r,o,a,c,d,f,g,v,y=1;do{for(o=h,h=null,d=null,f=0;o;){for(f++,a=o,g=0,r=0;r<y&&(g++,a=a.nextZ,a);r++);for(v=y;g>0||v>0&&a;)0!==g&&(0===v||!a||o.z<=a.z)?(c=o,o=o.nextZ,g--):(c=a,a=a.nextZ,v--),d?d.nextZ=c:h=c,c.prevZ=d,d=c;o=a}d.nextZ=null,y*=2}while(f>1)}(c)}(h,a,c,d);let v,y,g=h;for(;h.prev!==h.next;)if(v=h.prev,y=h.next,d?$C(h,a,c,d):jC(h))r.push(v.i/o),r.push(h.i/o),r.push(y.i/o),Ul(h),h=y.next,g=y.next;else if((h=y)===g){f?1===f?mf(h=qC(hs(h),r,o),r,o,a,c,d,2):2===f&&XC(h,r,o,a,c,d):mf(hs(h),r,o,a,c,d,1);break}}function jC(h){const r=h.prev,o=h,a=h.next;if(un(r,o,a)>=0)return!1;let c=h.next.next;for(;c!==h.prev;){if(ko(r.x,r.y,o.x,o.y,a.x,a.y,c.x,c.y)&&un(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function $C(h,r,o,a){const c=h.prev,d=h,f=h.next;if(un(c,d,f)>=0)return!1;const y=c.x>d.x?c.x>f.x?c.x:f.x:d.x>f.x?d.x:f.x,w=c.y>d.y?c.y>f.y?c.y:f.y:d.y>f.y?d.y:f.y,b=em(c.x<d.x?c.x<f.x?c.x:f.x:d.x<f.x?d.x:f.x,c.y<d.y?c.y<f.y?c.y:f.y:d.y<f.y?d.y:f.y,r,o,a),x=em(y,w,r,o,a);let M=h.prevZ,C=h.nextZ;for(;M&&M.z>=b&&C&&C.z<=x;){if(M!==h.prev&&M!==h.next&&ko(c.x,c.y,d.x,d.y,f.x,f.y,M.x,M.y)&&un(M.prev,M,M.next)>=0||(M=M.prevZ,C!==h.prev&&C!==h.next&&ko(c.x,c.y,d.x,d.y,f.x,f.y,C.x,C.y)&&un(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;M&&M.z>=b;){if(M!==h.prev&&M!==h.next&&ko(c.x,c.y,d.x,d.y,f.x,f.y,M.x,M.y)&&un(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;C&&C.z<=x;){if(C!==h.prev&&C!==h.next&&ko(c.x,c.y,d.x,d.y,f.x,f.y,C.x,C.y)&&un(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function qC(h,r,o){let a=h;do{const c=a.prev,d=a.next.next;!pd(c,d)&&kx(c,a,a.next,d)&&Gc(c,d)&&Gc(d,c)&&(r.push(c.i/o),r.push(a.i/o),r.push(d.i/o),Ul(a),Ul(a.next),a=h=d),a=a.next}while(a!==h);return hs(a)}function XC(h,r,o,a,c,d){let f=h;do{let g=f.next.next;for(;g!==f.prev;){if(f.i!==g.i&&eo(f,g)){let v=Vx(f,g);return f=hs(f,f.next),v=hs(v,v.next),mf(f,r,o,a,c,d),void mf(v,r,o,a,c,d)}g=g.next}f=f.next}while(f!==h)}function vf(h,r){return h.x-r.x}function yf(h,r){if(r=function Kg(h,r){let o=r;const a=h.x,c=h.y;let f,d=-1/0;do{if(c<=o.y&&c>=o.next.y&&o.next.y!==o.y){const x=o.x+(c-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(x<=a&&x>d){if(d=x,x===a){if(c===o.y)return o;if(c===o.next.y)return o.next}f=o.x<o.next.x?o:o.next}}o=o.next}while(o!==r);if(!f)return null;if(a===d)return f;const g=f,v=f.x,y=f.y;let b,w=1/0;o=f;do{a>=o.x&&o.x>=v&&a!==o.x&&ko(c<y?a:d,c,v,y,c<y?d:a,c,o.x,o.y)&&(b=Math.abs(c-o.y)/(a-o.x),Gc(o,h)&&(b<w||b===w&&(o.x>f.x||o.x===f.x&&__(f,o)))&&(f=o,w=b)),o=o.next}while(o!==g);return f}(h,r),r){const o=Vx(r,h);hs(r,r.next),hs(o,o.next)}}function __(h,r){return un(h.prev,h,r.prev)<0&&un(r.next,h,h.next)<0}function em(h,r,o,a,c){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=32767*(h-o)*c)|h<<8))|h<<4))|h<<2))|h<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-a)*c)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function w_(h){let r=h,o=h;do{(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next}while(r!==h);return o}function ko(h,r,o,a,c,d,f,g){return(c-f)*(r-g)-(h-f)*(d-g)>=0&&(h-f)*(a-g)-(o-f)*(r-g)>=0&&(o-f)*(d-g)-(c-f)*(a-g)>=0}function eo(h,r){return h.next.i!==r.i&&h.prev.i!==r.i&&!function YC(h,r){let o=h;do{if(o.i!==h.i&&o.next.i!==h.i&&o.i!==r.i&&o.next.i!==r.i&&kx(o,o.next,h,r))return!0;o=o.next}while(o!==h);return!1}(h,r)&&(Gc(h,r)&&Gc(r,h)&&function x_(h,r){let o=h,a=!1;const c=(h.x+r.x)/2,d=(h.y+r.y)/2;do{o.y>d!=o.next.y>d&&o.next.y!==o.y&&c<(o.next.x-o.x)*(d-o.y)/(o.next.y-o.y)+o.x&&(a=!a),o=o.next}while(o!==h);return a}(h,r)&&(un(h.prev,h,r.prev)||un(h,r.prev,r))||pd(h,r)&&un(h.prev,h,h.next)>0&&un(r.prev,r,r.next)>0)}function un(h,r,o){return(r.y-h.y)*(o.x-r.x)-(r.x-h.x)*(o.y-r.y)}function pd(h,r){return h.x===r.x&&h.y===r.y}function kx(h,r,o,a){const c=tm(un(h,r,o)),d=tm(un(h,r,a)),f=tm(un(o,a,h)),g=tm(un(o,a,r));return!!(c!==d&&f!==g||0===c&&_f(h,o,r)||0===d&&_f(h,a,r)||0===f&&_f(o,h,a)||0===g&&_f(o,r,a))}function _f(h,r,o){return r.x<=Math.max(h.x,o.x)&&r.x>=Math.min(h.x,o.x)&&r.y<=Math.max(h.y,o.y)&&r.y>=Math.min(h.y,o.y)}function tm(h){return h>0?1:h<0?-1:0}function Gc(h,r){return un(h.prev,h,h.next)<0?un(h,r,h.next)>=0&&un(h,h.prev,r)>=0:un(h,r,h.prev)<0||un(h,h.next,r)<0}function Vx(h,r){const o=new gd(h.i,h.x,h.y),a=new gd(r.i,r.x,r.y),c=h.next,d=r.prev;return h.next=r,r.prev=h,o.next=c,c.prev=o,a.next=o,o.prev=a,d.next=a,a.prev=d,a}function na(h,r,o,a){const c=new gd(h,r,o);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function Ul(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function gd(h,r,o){this.i=h,this.x=r,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Vi{static area(r){const o=r.length;let a=0;for(let c=o-1,d=0;d<o;c=d++)a+=r[c].x*r[d].y-r[d].x*r[c].y;return.5*a}static isClockWise(r){return Vi.area(r)<0}static triangulateShape(r,o){const a=[],c=[],d=[];bf(r),nm(a,r);let f=r.length;o.forEach(bf);for(let v=0;v<o.length;v++)c.push(f),f+=o[v].length,nm(a,o[v]);const g=function(h,r,o=2){const a=r&&r.length,c=a?r[0]*o:h.length;let d=Ox(h,0,c,o,!0);const f=[];if(!d||d.next===d.prev)return f;let g,v,y,w,b,x,M;if(a&&(d=function Lx(h,r,o,a){const c=[];let d,f,g,v,y;for(d=0,f=r.length;d<f;d++)g=r[d]*a,v=d<f-1?r[d+1]*a:h.length,y=Ox(h,g,v,a,!1),y===y.next&&(y.steiner=!0),c.push(w_(y));for(c.sort(vf),d=0;d<c.length;d++)yf(c[d],o),o=hs(o,o.next);return o}(h,r,d,o)),h.length>80*o){g=y=h[0],v=w=h[1];for(let C=o;C<c;C+=o)b=h[C],x=h[C+1],b<g&&(g=b),x<v&&(v=x),b>y&&(y=b),x>w&&(w=x);M=Math.max(y-g,w-v),M=0!==M?1/M:0}return mf(d,f,o,g,v,M),f}(a,c);for(let v=0;v<g.length;v+=3)d.push(g.slice(v,v+3));return d}}function bf(h){const r=h.length;r>2&&h[r-1].equals(h[0])&&h.pop()}function nm(h,r){for(let o=0;o<r.length;o++)h.push(r[o].x),h.push(r[o].y)}class fs extends ft{constructor(r=new Fo([new Me(.5,.5),new Me(-.5,.5),new Me(-.5,-.5),new Me(.5,-.5)]),o={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:o},r=Array.isArray(r)?r:[r];const a=this,c=[],d=[];for(let g=0,v=r.length;g<v;g++)f(r[g]);function f(g){const v=[],y=void 0!==o.curveSegments?o.curveSegments:12,w=void 0!==o.steps?o.steps:1;let b=void 0!==o.depth?o.depth:1,x=void 0===o.bevelEnabled||o.bevelEnabled,M=void 0!==o.bevelThickness?o.bevelThickness:.2,C=void 0!==o.bevelSize?o.bevelSize:M-.1,D=void 0!==o.bevelOffset?o.bevelOffset:0,R=void 0!==o.bevelSegments?o.bevelSegments:3;const T=o.extrudePath,E=void 0!==o.UVGenerator?o.UVGenerator:wf;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),b=o.amount);let L,V,z,j,J,I=!1;T&&(L=T.getSpacedPoints(w),I=!0,x=!1,V=T.computeFrenetFrames(w,!1),z=new k,j=new k,J=new k),x||(R=0,M=0,C=0,D=0);const he=g.extractPoints(y);let oe=he.shape;const N=he.holes;if(!Vi.isClockWise(oe)){oe=oe.reverse();for(let Ee=0,Fe=N.length;Ee<Fe;Ee++){const Ne=N[Ee];Vi.isClockWise(Ne)&&(N[Ee]=Ne.reverse())}}const K=Vi.triangulateShape(oe,N),ie=oe;for(let Ee=0,Fe=N.length;Ee<Fe;Ee++)oe=oe.concat(N[Ee]);function le(Ee,Fe,Ne){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fe.clone().multiplyScalar(Ne).add(Ee)}const te=oe.length,ve=K.length;function Ie(Ee,Fe,Ne){let qe,je,_t;const Et=Ee.x-Fe.x,tn=Ee.y-Fe.y,zn=Ne.x-Ee.x,yn=Ne.y-Ee.y,G=Et*Et+tn*tn;if(Math.abs(Et*yn-tn*zn)>Number.EPSILON){const ye=Math.sqrt(G),Le=Math.sqrt(zn*zn+yn*yn),it=Fe.x-tn/ye,be=Fe.y+Et/ye,We=((Ne.x-yn/Le-it)*yn-(Ne.y+zn/Le-be)*zn)/(Et*yn-tn*zn);qe=it+Et*We-Ee.x,je=be+tn*We-Ee.y;const Ue=qe*qe+je*je;if(Ue<=2)return new Me(qe,je);_t=Math.sqrt(Ue/2)}else{let ye=!1;Et>Number.EPSILON?zn>Number.EPSILON&&(ye=!0):Et<-Number.EPSILON?zn<-Number.EPSILON&&(ye=!0):Math.sign(tn)===Math.sign(yn)&&(ye=!0),ye?(qe=-tn,je=Et,_t=Math.sqrt(G)):(qe=Et,je=tn,_t=Math.sqrt(G/2))}return new Me(qe/_t,je/_t)}const Ze=[];for(let Ee=0,Fe=ie.length,Ne=Fe-1,qe=Ee+1;Ee<Fe;Ee++,Ne++,qe++)Ne===Fe&&(Ne=0),qe===Fe&&(qe=0),Ze[Ee]=Ie(ie[Ee],ie[Ne],ie[qe]);const _e=[];let De,Ge=Ze.concat();for(let Ee=0,Fe=N.length;Ee<Fe;Ee++){const Ne=N[Ee];De=[];for(let qe=0,je=Ne.length,_t=je-1,Et=qe+1;qe<je;qe++,_t++,Et++)_t===je&&(_t=0),Et===je&&(Et=0),De[qe]=Ie(Ne[qe],Ne[_t],Ne[Et]);_e.push(De),Ge=Ge.concat(De)}for(let Ee=0;Ee<R;Ee++){const Fe=Ee/R,Ne=M*Math.cos(Fe*Math.PI/2),qe=C*Math.sin(Fe*Math.PI/2)+D;for(let je=0,_t=ie.length;je<_t;je++){const Et=le(ie[je],Ze[je],qe);ot(Et.x,Et.y,-Ne)}for(let je=0,_t=N.length;je<_t;je++){const Et=N[je];De=_e[je];for(let tn=0,zn=Et.length;tn<zn;tn++){const yn=le(Et[tn],De[tn],qe);ot(yn.x,yn.y,-Ne)}}}const et=C+D;for(let Ee=0;Ee<te;Ee++){const Fe=x?le(oe[Ee],Ge[Ee],et):oe[Ee];I?(j.copy(V.normals[0]).multiplyScalar(Fe.x),z.copy(V.binormals[0]).multiplyScalar(Fe.y),J.copy(L[0]).add(j).add(z),ot(J.x,J.y,J.z)):ot(Fe.x,Fe.y,0)}for(let Ee=1;Ee<=w;Ee++)for(let Fe=0;Fe<te;Fe++){const Ne=x?le(oe[Fe],Ge[Fe],et):oe[Fe];I?(j.copy(V.normals[Ee]).multiplyScalar(Ne.x),z.copy(V.binormals[Ee]).multiplyScalar(Ne.y),J.copy(L[Ee]).add(j).add(z),ot(J.x,J.y,J.z)):ot(Ne.x,Ne.y,b/w*Ee)}for(let Ee=R-1;Ee>=0;Ee--){const Fe=Ee/R,Ne=M*Math.cos(Fe*Math.PI/2),qe=C*Math.sin(Fe*Math.PI/2)+D;for(let je=0,_t=ie.length;je<_t;je++){const Et=le(ie[je],Ze[je],qe);ot(Et.x,Et.y,b+Ne)}for(let je=0,_t=N.length;je<_t;je++){const Et=N[je];De=_e[je];for(let tn=0,zn=Et.length;tn<zn;tn++){const yn=le(Et[tn],De[tn],qe);I?ot(yn.x,yn.y+L[w-1].y,L[w-1].x+Ne):ot(yn.x,yn.y,b+Ne)}}}function Vt(Ee,Fe){let Ne=Ee.length;for(;--Ne>=0;){const qe=Ne;let je=Ne-1;je<0&&(je=Ee.length-1);for(let _t=0,Et=w+2*R;_t<Et;_t++){const tn=te*_t,zn=te*(_t+1);Ye(Fe+qe+tn,Fe+je+tn,Fe+je+zn,Fe+qe+zn)}}}function ot(Ee,Fe,Ne){v.push(Ee),v.push(Fe),v.push(Ne)}function Mt(Ee,Fe,Ne){Ht(Ee),Ht(Fe),Ht(Ne);const qe=c.length/3,je=E.generateTopUV(a,c,qe-3,qe-2,qe-1);yt(je[0]),yt(je[1]),yt(je[2])}function Ye(Ee,Fe,Ne,qe){Ht(Ee),Ht(Fe),Ht(qe),Ht(Fe),Ht(Ne),Ht(qe);const je=c.length/3,_t=E.generateSideWallUV(a,c,je-6,je-3,je-2,je-1);yt(_t[0]),yt(_t[1]),yt(_t[3]),yt(_t[1]),yt(_t[2]),yt(_t[3])}function Ht(Ee){c.push(v[3*Ee+0]),c.push(v[3*Ee+1]),c.push(v[3*Ee+2])}function yt(Ee){d.push(Ee.x),d.push(Ee.y)}(function at(){const Ee=c.length/3;if(x){let Fe=0,Ne=te*Fe;for(let qe=0;qe<ve;qe++){const je=K[qe];Mt(je[2]+Ne,je[1]+Ne,je[0]+Ne)}Fe=w+2*R,Ne=te*Fe;for(let qe=0;qe<ve;qe++){const je=K[qe];Mt(je[0]+Ne,je[1]+Ne,je[2]+Ne)}}else{for(let Fe=0;Fe<ve;Fe++){const Ne=K[Fe];Mt(Ne[2],Ne[1],Ne[0])}for(let Fe=0;Fe<ve;Fe++){const Ne=K[Fe];Mt(Ne[0]+te*w,Ne[1]+te*w,Ne[2]+te*w)}}a.addGroup(Ee,c.length/3-Ee,0)})(),function me(){const Ee=c.length/3;let Fe=0;Vt(ie,Fe),Fe+=ie.length;for(let Ne=0,qe=N.length;Ne<qe;Ne++){const je=N[Ne];Vt(je,Fe),Fe+=je.length}a.addGroup(Ee,c.length/3-Ee,1)}()}this.setAttribute("position",new $e(c,3)),this.setAttribute("uv",new $e(d,2)),this.computeVertexNormals()}toJSON(){const r=super.toJSON();return function Ux(h,r,o){if(o.shapes=[],Array.isArray(h))for(let a=0,c=h.length;a<c;a++)o.shapes.push(h[a].uuid);else o.shapes.push(h.uuid);return void 0!==r.extrudePath&&(o.options.extrudePath=r.extrudePath.toJSON()),o}(this.parameters.shapes,this.parameters.options,r)}static fromJSON(r,o){const a=[];for(let d=0,f=r.shapes.length;d<f;d++)a.push(o[r.shapes[d]]);const c=r.options.extrudePath;return void 0!==c&&(r.options.extrudePath=(new Qg[c.type]).fromJSON(c)),new fs(a,r.options)}}const wf={generateTopUV:function(h,r,o,a,c){const g=r[3*a],v=r[3*a+1],y=r[3*c],w=r[3*c+1];return[new Me(r[3*o],r[3*o+1]),new Me(g,v),new Me(y,w)]},generateSideWallUV:function(h,r,o,a,c,d){const f=r[3*o],g=r[3*o+1],v=r[3*o+2],y=r[3*a],w=r[3*a+1],b=r[3*a+2],x=r[3*c],M=r[3*c+1],C=r[3*c+2],D=r[3*d],R=r[3*d+1],T=r[3*d+2];return Math.abs(g-w)<Math.abs(f-y)?[new Me(f,1-v),new Me(y,1-b),new Me(x,1-C),new Me(D,1-T)]:[new Me(g,1-v),new Me(w,1-b),new Me(M,1-C),new Me(R,1-T)]}};class yd extends ft{constructor(r=new Fo([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),o=12){super(),this.type="ShapeGeometry",this.parameters={shapes:r,curveSegments:o};const a=[],c=[],d=[],f=[];let g=0,v=0;if(!1===Array.isArray(r))y(r);else for(let w=0;w<r.length;w++)y(r[w]),this.addGroup(g,v,w),g+=v,v=0;function y(w){const b=c.length/3,x=w.extractPoints(o);let M=x.shape;const C=x.holes;!1===Vi.isClockWise(M)&&(M=M.reverse());for(let R=0,T=C.length;R<T;R++){const E=C[R];!0===Vi.isClockWise(E)&&(C[R]=E.reverse())}const D=Vi.triangulateShape(M,C);for(let R=0,T=C.length;R<T;R++)M=M.concat(C[R]);for(let R=0,T=M.length;R<T;R++){const E=M[R];c.push(E.x,E.y,0),d.push(0,0,1),f.push(E.x,E.y)}for(let R=0,T=D.length;R<T;R++){const E=D[R];a.push(E[0]+b,E[1]+b,E[2]+b),v+=3}}this.setIndex(a),this.setAttribute("position",new $e(c,3)),this.setAttribute("normal",new $e(d,3)),this.setAttribute("uv",new $e(f,2))}toJSON(){const r=super.toJSON();return function M_(h,r){if(r.shapes=[],Array.isArray(h))for(let o=0,a=h.length;o<a;o++)r.shapes.push(h[o].uuid);else r.shapes.push(h.uuid);return r}(this.parameters.shapes,r)}static fromJSON(r,o){const a=[];for(let c=0,d=r.shapes.length;c<d;c++)a.push(o[r.shapes[c]]);return new yd(a,r.curveSegments)}}(class im extends lr{constructor(r){super(),this.type="ShadowMaterial",this.color=new ke(0),this.transparent=!0,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this}}).prototype.isShadowMaterial=!0;class _d extends lr{constructor(r){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this}}_d.prototype.isMeshStandardMaterial=!0;class om extends _d{constructor(r){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(r)}get sheen(){return this._sheen}set sheen(r){this._sheen>0!=r>0&&this.version++,this._sheen=r}get clearcoat(){return this._clearcoat}set clearcoat(r){this._clearcoat>0!=r>0&&this.version++,this._clearcoat=r}get transmission(){return this._transmission}set transmission(r){this._transmission>0!=r>0&&this.version++,this._transmission=r}copy(r){return super.copy(r),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=r.clearcoat,this.clearcoatMap=r.clearcoatMap,this.clearcoatRoughness=r.clearcoatRoughness,this.clearcoatRoughnessMap=r.clearcoatRoughnessMap,this.clearcoatNormalMap=r.clearcoatNormalMap,this.clearcoatNormalScale.copy(r.clearcoatNormalScale),this.ior=r.ior,this.sheen=r.sheen,this.sheenColor.copy(r.sheenColor),this.sheenColorMap=r.sheenColorMap,this.sheenRoughness=r.sheenRoughness,this.sheenRoughnessMap=r.sheenRoughnessMap,this.transmission=r.transmission,this.transmissionMap=r.transmissionMap,this.thickness=r.thickness,this.thicknessMap=r.thicknessMap,this.attenuationDistance=r.attenuationDistance,this.attenuationColor.copy(r.attenuationColor),this.specularIntensity=r.specularIntensity,this.specularIntensityMap=r.specularIntensityMap,this.specularColor.copy(r.specularColor),this.specularColorMap=r.specularColorMap,this}}om.prototype.isMeshPhysicalMaterial=!0;(class Hx extends lr{constructor(r){super(),this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.flatShading=r.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class bd extends lr{constructor(r){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.gradientMap=r.gradientMap,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;class sm extends lr{constructor(r){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.flatShading=r.flatShading,this}}sm.prototype.isMeshNormalMaterial=!0;(class am extends lr{constructor(r){super(),this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(r)}copy(r){return super.copy(r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class lm extends lr{constructor(r){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wl,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(r)}copy(r){return super.copy(r),this.defines={MATCAP:""},this.color.copy(r.color),this.matcap=r.matcap,this.map=r.map,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalMapType=r.normalMapType,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.alphaMap=r.alphaMap,this.flatShading=r.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class cm extends ni{constructor(r){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}copy(r){return super.copy(r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this}}).prototype.isLineDashedMaterial=!0;const qn={arraySlice:function(h,r,o){return qn.isTypedArray(h)?new h.constructor(h.subarray(r,void 0!==o?o:h.length)):h.slice(r,o)},convertArray:function(h,r,o){return!h||!o&&h.constructor===r?h:"number"==typeof r.BYTES_PER_ELEMENT?new r(h):Array.prototype.slice.call(h)},isTypedArray:function(h){return ArrayBuffer.isView(h)&&!(h instanceof DataView)},getKeyframeOrder:function(h){const o=h.length,a=new Array(o);for(let c=0;c!==o;++c)a[c]=c;return a.sort(function r(c,d){return h[c]-h[d]}),a},sortedArray:function(h,r,o){const a=h.length,c=new h.constructor(a);for(let d=0,f=0;f!==a;++d){const g=o[d]*r;for(let v=0;v!==r;++v)c[f++]=h[g+v]}return c},flattenJSON:function(h,r,o,a){let c=1,d=h[0];for(;void 0!==d&&void 0===d[a];)d=h[c++];if(void 0===d)return;let f=d[a];if(void 0!==f)if(Array.isArray(f))do{f=d[a],void 0!==f&&(r.push(d.time),o.push.apply(o,f)),d=h[c++]}while(void 0!==d);else if(void 0!==f.toArray)do{f=d[a],void 0!==f&&(r.push(d.time),f.toArray(o,o.length)),d=h[c++]}while(void 0!==d);else do{f=d[a],void 0!==f&&(r.push(d.time),o.push(f)),d=h[c++]}while(void 0!==d)},subclip:function(h,r,o,a,c=30){const d=h.clone();d.name=r;const f=[];for(let v=0;v<d.tracks.length;++v){const y=d.tracks[v],w=y.getValueSize(),b=[],x=[];for(let M=0;M<y.times.length;++M){const C=y.times[M]*c;if(!(C<o||C>=a)){b.push(y.times[M]);for(let D=0;D<w;++D)x.push(y.values[M*w+D])}}0!==b.length&&(y.times=qn.convertArray(b,y.times.constructor),y.values=qn.convertArray(x,y.values.constructor),f.push(y))}d.tracks=f;let g=1/0;for(let v=0;v<d.tracks.length;++v)g>d.tracks[v].times[0]&&(g=d.tracks[v].times[0]);for(let v=0;v<d.tracks.length;++v)d.tracks[v].shift(-1*g);return d.resetDuration(),d},makeClipAdditive:function(h,r=0,o=h,a=30){a<=0&&(a=30);const c=o.tracks.length,d=r/a;for(let f=0;f<c;++f){const g=o.tracks[f],v=g.ValueTypeName;if("bool"===v||"string"===v)continue;const y=h.tracks.find(function(T){return T.name===g.name&&T.ValueTypeName===v});if(void 0===y)continue;let w=0;const b=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=b/3);let x=0;const M=y.getValueSize();y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=M/3);const C=g.times.length-1;let D;if(d<=g.times[0])D=qn.arraySlice(g.values,w,b-w);else if(d>=g.times[C]){const T=C*b+w;D=qn.arraySlice(g.values,T,T+b-w)}else{const T=g.createInterpolant(),E=w,L=b-w;T.evaluate(d),D=qn.arraySlice(T.resultBuffer,E,L)}"quaternion"===v&&(new fr).fromArray(D).normalize().conjugate().toArray(D);const R=y.times.length;for(let T=0;T<R;++T){const E=T*M+x;if("quaternion"===v)fr.multiplyQuaternionsFlat(y.values,E,D,0,y.values,E);else{const L=M-2*x;for(let I=0;I<L;++I)y.values[E+I]-=D[I]}}}return h.blendMode=2501,h}};class vo{constructor(r,o,a,c){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=void 0!==c?c:new o.constructor(a),this.sampleValues=o,this.valueSize=a,this.settings=null,this.DefaultSettings_={}}evaluate(r){const o=this.parameterPositions;let a=this._cachedIndex,c=o[a],d=o[a-1];e:{t:{let f;n:{r:if(!(r<c)){for(let g=a+2;;){if(void 0===c){if(r<d)break r;return a=o.length,this._cachedIndex=a,this.afterEnd_(a-1,r,d)}if(a===g)break;if(d=c,c=o[++a],r<c)break t}f=o.length;break n}if(r>=d)break e;{const g=o[1];r<g&&(a=2,d=g);for(let v=a-2;;){if(void 0===d)return this._cachedIndex=0,this.beforeStart_(0,r,c);if(a===v)break;if(c=d,d=o[--a-1],r>=d)break t}f=a,a=0}}for(;a<f;){const g=a+f>>>1;r<o[g]?f=g:a=g+1}if(c=o[a],d=o[a-1],void 0===d)return this._cachedIndex=0,this.beforeStart_(0,r,c);if(void 0===c)return a=o.length,this._cachedIndex=a,this.afterEnd_(a-1,d,r)}this._cachedIndex=a,this.intervalChanged_(a,d,c)}return this.interpolate_(a,d,r,c)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(r){const o=this.resultBuffer,a=this.sampleValues,c=this.valueSize,d=r*c;for(let f=0;f!==c;++f)o[f]=a[d+f];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}vo.prototype.beforeStart_=vo.prototype.copySampleValue_,vo.prototype.afterEnd_=vo.prototype.copySampleValue_;class wd extends vo{constructor(r,o,a,c){super(r,o,a,c),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rt,endingEnd:rt}}intervalChanged_(r,o,a){const c=this.parameterPositions;let d=r-2,f=r+1,g=c[d],v=c[f];if(void 0===g)switch(this.getSettings_().endingStart){case P:d=r,g=2*o-a;break;case F:d=c.length-2,g=o+c[d]-c[d+1];break;default:d=r,g=a}if(void 0===v)switch(this.getSettings_().endingEnd){case P:f=r,v=2*a-o;break;case F:f=1,v=a+c[1]-c[0];break;default:f=r-1,v=o}const y=.5*(a-o),w=this.valueSize;this._weightPrev=y/(o-g),this._weightNext=y/(v-a),this._offsetPrev=d*w,this._offsetNext=f*w}interpolate_(r,o,a,c){const d=this.resultBuffer,f=this.sampleValues,g=this.valueSize,v=r*g,y=v-g,w=this._offsetPrev,b=this._offsetNext,x=this._weightPrev,M=this._weightNext,C=(a-o)/(c-o),D=C*C,R=D*C,T=-x*R+2*x*D-x*C,E=(1+x)*R+(-1.5-2*x)*D+(-.5+x)*C+1,L=(-1-M)*R+(1.5+M)*D+.5*C,I=M*R-M*D;for(let V=0;V!==g;++V)d[V]=T*f[w+V]+E*f[y+V]+L*f[v+V]+I*f[b+V];return d}}class dm extends vo{constructor(r,o,a,c){super(r,o,a,c)}interpolate_(r,o,a,c){const d=this.resultBuffer,f=this.sampleValues,g=this.valueSize,v=r*g,y=v-g,w=(a-o)/(c-o),b=1-w;for(let x=0;x!==g;++x)d[x]=f[y+x]*b+f[v+x]*w;return d}}class hm extends vo{constructor(r,o,a,c){super(r,o,a,c)}interpolate_(r){return this.copySampleValue_(r-1)}}class Bi{constructor(r,o,a,c){if(void 0===r)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+r);this.name=r,this.times=qn.convertArray(o,this.TimeBufferType),this.values=qn.convertArray(a,this.ValueBufferType),this.setInterpolation(c||this.DefaultInterpolation)}static toJSON(r){const o=r.constructor;let a;if(o.toJSON!==this.toJSON)a=o.toJSON(r);else{a={name:r.name,times:qn.convertArray(r.times,Array),values:qn.convertArray(r.values,Array)};const c=r.getInterpolation();c!==r.DefaultInterpolation&&(a.interpolation=c)}return a.type=r.ValueTypeName,a}InterpolantFactoryMethodDiscrete(r){return new hm(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodLinear(r){return new dm(this.times,this.values,this.getValueSize(),r)}InterpolantFactoryMethodSmooth(r){return new wd(this.times,this.values,this.getValueSize(),r)}setInterpolation(r){let o;switch(r){case Ps:o=this.InterpolantFactoryMethodDiscrete;break;case bl:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){const a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(r===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ps;case this.InterpolantFactoryMethodLinear:return bl;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(r){if(0!==r){const o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]+=r}return this}scale(r){if(1!==r){const o=this.times;for(let a=0,c=o.length;a!==c;++a)o[a]*=r}return this}trim(r,o){const a=this.times,c=a.length;let d=0,f=c-1;for(;d!==c&&a[d]<r;)++d;for(;-1!==f&&a[f]>o;)--f;if(++f,0!==d||f!==c){d>=f&&(f=Math.max(f,1),d=f-1);const g=this.getValueSize();this.times=qn.arraySlice(a,d,f),this.values=qn.arraySlice(this.values,d*g,f*g)}return this}validate(){let r=!0;const o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),r=!1);const a=this.times,c=this.values,d=a.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",this),r=!1);let f=null;for(let g=0;g!==d;g++){const v=a[g];if("number"==typeof v&&isNaN(v)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,v),r=!1;break}if(null!==f&&f>v){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,v,f),r=!1;break}f=v}if(void 0!==c&&qn.isTypedArray(c))for(let g=0,v=c.length;g!==v;++g){const y=c[g];if(isNaN(y)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,y),r=!1;break}}return r}optimize(){const r=qn.arraySlice(this.times),o=qn.arraySlice(this.values),a=this.getValueSize(),c=2302===this.getInterpolation(),d=r.length-1;let f=1;for(let g=1;g<d;++g){let v=!1;const y=r[g];if(y!==r[g+1]&&(1!==g||y!==r[0]))if(c)v=!0;else{const b=g*a,x=b-a,M=b+a;for(let C=0;C!==a;++C){const D=o[b+C];if(D!==o[x+C]||D!==o[M+C]){v=!0;break}}}if(v){if(g!==f){r[f]=r[g];const b=g*a,x=f*a;for(let M=0;M!==a;++M)o[x+M]=o[b+M]}++f}}if(d>0){r[f]=r[d];for(let g=d*a,v=f*a,y=0;y!==a;++y)o[v+y]=o[g+y];++f}return f!==r.length?(this.times=qn.arraySlice(r,0,f),this.values=qn.arraySlice(o,0,f*a)):(this.times=r,this.values=o),this}clone(){const r=qn.arraySlice(this.times,0),o=qn.arraySlice(this.values,0),c=new(0,this.constructor)(this.name,r,o);return c.createInterpolant=this.createInterpolant,c}}Bi.prototype.TimeBufferType=Float32Array,Bi.prototype.ValueBufferType=Float32Array,Bi.prototype.DefaultInterpolation=bl;class zl extends Bi{}zl.prototype.ValueTypeName="bool",zl.prototype.ValueBufferType=Array,zl.prototype.DefaultInterpolation=Ps,zl.prototype.InterpolantFactoryMethodLinear=void 0,zl.prototype.InterpolantFactoryMethodSmooth=void 0;class Tf extends Bi{}Tf.prototype.ValueTypeName="color";class Xa extends Bi{}Xa.prototype.ValueTypeName="number";class zx extends vo{constructor(r,o,a,c){super(r,o,a,c)}interpolate_(r,o,a,c){const d=this.resultBuffer,f=this.sampleValues,g=this.valueSize,v=(a-o)/(c-o);let y=r*g;for(let w=y+g;y!==w;y+=4)fr.slerpFlat(d,0,f,y-g,f,y,v);return d}}class Gl extends Bi{InterpolantFactoryMethodLinear(r){return new zx(this.times,this.values,this.getValueSize(),r)}}Gl.prototype.ValueTypeName="quaternion",Gl.prototype.DefaultInterpolation=bl,Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends Bi{}jc.prototype.ValueTypeName="string",jc.prototype.ValueBufferType=Array,jc.prototype.DefaultInterpolation=Ps,jc.prototype.InterpolantFactoryMethodLinear=void 0,jc.prototype.InterpolantFactoryMethodSmooth=void 0;class xd extends Bi{}xd.prototype.ValueTypeName="vector";class Md{constructor(r,o=-1,a,c=2500){this.name=r,this.tracks=a,this.duration=o,this.blendMode=c,this.uuid=Ri(),this.duration<0&&this.resetDuration()}static parse(r){const o=[],a=r.tracks,c=1/(r.fps||1);for(let f=0,g=a.length;f!==g;++f)o.push(S_(a[f]).scale(c));const d=new this(r.name,r.duration,o,r.blendMode);return d.uuid=r.uuid,d}static toJSON(r){const o=[],a=r.tracks,c={name:r.name,duration:r.duration,tracks:o,uuid:r.uuid,blendMode:r.blendMode};for(let d=0,f=a.length;d!==f;++d)o.push(Bi.toJSON(a[d]));return c}static CreateFromMorphTargetSequence(r,o,a,c){const d=o.length,f=[];for(let g=0;g<d;g++){let v=[],y=[];v.push((g+d-1)%d,g,(g+1)%d),y.push(0,1,0);const w=qn.getKeyframeOrder(v);v=qn.sortedArray(v,1,w),y=qn.sortedArray(y,1,w),!c&&0===v[0]&&(v.push(d),y.push(y[0])),f.push(new Xa(".morphTargetInfluences["+o[g].name+"]",v,y).scale(1/a))}return new this(r,-1,f)}static findByName(r,o){let a=r;Array.isArray(r)||(a=r.geometry&&r.geometry.animations||r.animations);for(let c=0;c<a.length;c++)if(a[c].name===o)return a[c];return null}static CreateClipsFromMorphTargetSequences(r,o,a){const c={},d=/^([\w-]*?)([\d]+)$/;for(let g=0,v=r.length;g<v;g++){const y=r[g],w=y.name.match(d);if(w&&w.length>1){const b=w[1];let x=c[b];x||(c[b]=x=[]),x.push(y)}}const f=[];for(const g in c)f.push(this.CreateFromMorphTargetSequence(g,c[g],o,a));return f}static parseAnimation(r,o){if(!r)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const a=function(b,x,M,C,D){if(0!==M.length){const R=[],T=[];qn.flattenJSON(M,R,T,C),0!==R.length&&D.push(new b(x,R,T))}},c=[],d=r.name||"default",f=r.fps||30,g=r.blendMode;let v=r.length||-1;const y=r.hierarchy||[];for(let b=0;b<y.length;b++){const x=y[b].keys;if(x&&0!==x.length)if(x[0].morphTargets){const M={};let C;for(C=0;C<x.length;C++)if(x[C].morphTargets)for(let D=0;D<x[C].morphTargets.length;D++)M[x[C].morphTargets[D]]=-1;for(const D in M){const R=[],T=[];for(let E=0;E!==x[C].morphTargets.length;++E){const L=x[C];R.push(L.time),T.push(L.morphTarget===D?1:0)}c.push(new Xa(".morphTargetInfluence["+D+"]",R,T))}v=M.length*(f||1)}else{const M=".bones["+o[b].name+"]";a(xd,M+".position",x,"pos",c),a(Gl,M+".quaternion",x,"rot",c),a(xd,M+".scale",x,"scl",c)}}return 0===c.length?null:new this(d,v,c,g)}resetDuration(){let o=0;for(let a=0,c=this.tracks.length;a!==c;++a){const d=this.tracks[a];o=Math.max(o,d.times[d.times.length-1])}return this.duration=o,this}trim(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this}validate(){let r=!0;for(let o=0;o<this.tracks.length;o++)r=r&&this.tracks[o].validate();return r}optimize(){for(let r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this}clone(){const r=[];for(let o=0;o<this.tracks.length;o++)r.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,r,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function S_(h){if(void 0===h.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const r=function E_(h){switch(h.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xa;case"vector":case"vector2":case"vector3":case"vector4":return xd;case"color":return Tf;case"quaternion":return Gl;case"bool":case"boolean":return zl;case"string":return jc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+h)}(h.type);if(void 0===h.times){const o=[],a=[];qn.flattenJSON(h.keys,o,a,"value"),h.times=o,h.values=a}return void 0!==r.parse?r.parse(h):new r(h.name,h.times,h.values,h.interpolation)}const mt={enabled:!1,files:{},add:function(h,r){!1!==this.enabled&&(this.files[h]=r)},get:function(h){if(!1!==this.enabled)return this.files[h]},remove:function(h){delete this.files[h]},clear:function(){this.files={}}};const fm=new class xe{constructor(r,o,a){const c=this;let v,d=!1,f=0,g=0;const y=[];this.onStart=void 0,this.onLoad=r,this.onProgress=o,this.onError=a,this.itemStart=function(w){g++,!1===d&&void 0!==c.onStart&&c.onStart(w,f,g),d=!0},this.itemEnd=function(w){f++,void 0!==c.onProgress&&c.onProgress(w,f,g),f===g&&(d=!1,void 0!==c.onLoad&&c.onLoad())},this.itemError=function(w){void 0!==c.onError&&c.onError(w)},this.resolveURL=function(w){return v?v(w):w},this.setURLModifier=function(w){return v=w,this},this.addHandler=function(w,b){return y.push(w,b),this},this.removeHandler=function(w){const b=y.indexOf(w);return-1!==b&&y.splice(b,2),this},this.getHandler=function(w){for(let b=0,x=y.length;b<x;b+=2){const M=y[b],C=y[b+1];if(M.global&&(M.lastIndex=0),M.test(w))return C}return null}}};class ce{constructor(r){this.manager=void 0!==r?r:fm,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(r,o){const a=this;return new Promise(function(c,d){a.load(r,c,o,d)})}parse(){}setCrossOrigin(r){return this.crossOrigin=r,this}setWithCredentials(r){return this.withCredentials=r,this}setPath(r){return this.path=r,this}setResourcePath(r){return this.resourcePath=r,this}setRequestHeader(r){return this.requestHeader=r,this}}const ps={};class Vo extends ce{constructor(r){super(r)}load(r,o,a,c){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const d=mt.get(r);if(void 0!==d)return this.manager.itemStart(r),setTimeout(()=>{o&&o(d),this.manager.itemEnd(r)},0),d;if(void 0!==ps[r])return void ps[r].push({onLoad:o,onProgress:a,onError:c});ps[r]=[],ps[r].push({onLoad:o,onProgress:a,onError:c});const f=new Request(r,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,v=this.responseType;fetch(f).then(y=>{if(200===y.status||0===y.status){if(0===y.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===y.body.getReader)return y;const w=ps[r],b=y.body.getReader(),x=y.headers.get("Content-Length"),M=x?parseInt(x):0,C=0!==M;let D=0;const R=new ReadableStream({start(T){!function E(){b.read().then(({done:L,value:I})=>{if(L)T.close();else{D+=I.byteLength;const V=new ProgressEvent("progress",{lengthComputable:C,loaded:D,total:M});for(let z=0,j=w.length;z<j;z++){const J=w[z];J.onProgress&&J.onProgress(V)}T.enqueue(I),E()}})}()}});return new Response(R)}throw Error(`fetch for "${y.url}" responded with ${y.status}: ${y.statusText}`)}).then(y=>{switch(v){case"arraybuffer":return y.arrayBuffer();case"blob":return y.blob();case"document":return y.text().then(w=>(new DOMParser).parseFromString(w,g));case"json":return y.json();default:if(void 0===g)return y.text();{const b=/charset="?([^;"\s]*)"?/i.exec(g),x=b&&b[1]?b[1].toLowerCase():void 0,M=new TextDecoder(x);return y.arrayBuffer().then(C=>M.decode(C))}}}).then(y=>{mt.add(r,y);const w=ps[r];delete ps[r];for(let b=0,x=w.length;b<x;b++){const M=w[b];M.onLoad&&M.onLoad(y)}}).catch(y=>{const w=ps[r];if(void 0===w)throw this.manager.itemError(r),y;delete ps[r];for(let b=0,x=w.length;b<x;b++){const M=w[b];M.onError&&M.onError(y)}this.manager.itemError(r)}).finally(()=>{this.manager.itemEnd(r)}),this.manager.itemStart(r)}setResponseType(r){return this.responseType=r,this}setMimeType(r){return this.mimeType=r,this}}class ia extends ce{constructor(r){super(r)}load(r,o,a,c){void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const d=this,f=mt.get(r);if(void 0!==f)return d.manager.itemStart(r),setTimeout(function(){o&&o(f),d.manager.itemEnd(r)},0),f;const g=Ls("img");function v(){w(),mt.add(r,this),o&&o(this),d.manager.itemEnd(r)}function y(b){w(),c&&c(b),d.manager.itemError(r),d.manager.itemEnd(r)}function w(){g.removeEventListener("load",v,!1),g.removeEventListener("error",y,!1)}return g.addEventListener("load",v,!1),g.addEventListener("error",y,!1),"data:"!==r.substr(0,5)&&void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),d.manager.itemStart(r),g.src=r,g}}class gm extends ce{constructor(r){super(r)}load(r,o,a,c){const d=new Li,f=new ia(this.manager);f.setCrossOrigin(this.crossOrigin),f.setPath(this.path);let g=0;function v(y){f.load(r[y],function(w){d.images[y]=w,g++,6===g&&(d.needsUpdate=!0,o&&o(d))},void 0,c)}for(let y=0;y<r.length;++y)v(y);return d}}class mm extends ce{constructor(r){super(r)}load(r,o,a,c){const d=new hr,f=new ia(this.manager);return f.setCrossOrigin(this.crossOrigin),f.setPath(this.path),f.load(r,function(g){d.image=g,d.needsUpdate=!0,void 0!==o&&o(d)},a,c),d}}class yo extends Gt{constructor(r,o=1){super(),this.type="Light",this.color=new ke(r),this.intensity=o}dispose(){}copy(r){return super.copy(r),this.color.copy(r.color),this.intensity=r.intensity,this}toJSON(r){const o=super.toJSON(r);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}yo.prototype.isLight=!0;class Sd extends yo{constructor(r,o,a){super(r,a),this.type="HemisphereLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.groundColor=new ke(o)}copy(r){return yo.prototype.copy.call(this,r),this.groundColor.copy(r.groundColor),this}}Sd.prototype.isHemisphereLight=!0;const Df=new Je,vm=new k,Af=new k;class ym{constructor(r){this.camera=r,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new Je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new is,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(r){const o=this.camera,a=this.matrix;vm.setFromMatrixPosition(r.matrixWorld),o.position.copy(vm),Af.setFromMatrixPosition(r.target.matrixWorld),o.lookAt(Af),o.updateMatrixWorld(),Df.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Df),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(o.projectionMatrix),a.multiply(o.matrixWorldInverse)}getViewport(r){return this._viewports[r]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const r={};return 0!==this.bias&&(r.bias=this.bias),0!==this.normalBias&&(r.normalBias=this.normalBias),1!==this.radius&&(r.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}class C_ extends ym{constructor(){super(new Jn(50,1,.5,500)),this.focus=1}updateMatrices(r){const o=this.camera,a=2*El*r.angle*this.focus,c=this.mapSize.width/this.mapSize.height,d=r.distance||o.far;(a!==o.fov||c!==o.aspect||d!==o.far)&&(o.fov=a,o.aspect=c,o.far=d,o.updateProjectionMatrix()),super.updateMatrices(r)}copy(r){return super.copy(r),this.focus=r.focus,this}}C_.prototype.isSpotLightShadow=!0;class _m extends yo{constructor(r,o,a=0,c=Math.PI/3,d=0,f=1){super(r,o),this.type="SpotLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.target=new Gt,this.distance=a,this.angle=c,this.penumbra=d,this.decay=f,this.shadow=new C_}get power(){return this.intensity*Math.PI}set power(r){this.intensity=r/Math.PI}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}_m.prototype.isSpotLight=!0;const bm=new Je,Cd=new k,wm=new k;class T_ extends ym{constructor(){super(new Jn(90,1,.5,500)),this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(r,o=0){const a=this.camera,c=this.matrix,d=r.distance||a.far;d!==a.far&&(a.far=d,a.updateProjectionMatrix()),Cd.setFromMatrixPosition(r.matrixWorld),a.position.copy(Cd),wm.copy(a.position),wm.add(this._cubeDirections[o]),a.up.copy(this._cubeUps[o]),a.lookAt(wm),a.updateMatrixWorld(),c.makeTranslation(-Cd.x,-Cd.y,-Cd.z),bm.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bm)}}T_.prototype.isPointLightShadow=!0;class xm extends yo{constructor(r,o,a=0,c=1){super(r,o),this.type="PointLight",this.distance=a,this.decay=c,this.shadow=new T_}get power(){return 4*this.intensity*Math.PI}set power(r){this.intensity=r/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}xm.prototype.isPointLight=!0;class Mm extends ym{constructor(){super(new ka(-5,5,5,-5,.5,500))}}Mm.prototype.isDirectionalLightShadow=!0;class If extends yo{constructor(r,o){super(r,o),this.type="DirectionalLight",this.position.copy(Gt.DefaultUp),this.updateMatrix(),this.target=new Gt,this.shadow=new Mm}dispose(){this.shadow.dispose()}copy(r){return super.copy(r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}If.prototype.isDirectionalLight=!0;(class D_ extends yo{constructor(r,o){super(r,o),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class A_ extends yo{constructor(r,o,a=10,c=10){super(r,o),this.type="RectAreaLight",this.width=a,this.height=c}get power(){return this.intensity*this.width*this.height*Math.PI}set power(r){this.intensity=r/(this.width*this.height*Math.PI)}copy(r){return super.copy(r),this.width=r.width,this.height=r.height,this}toJSON(r){const o=super.toJSON(r);return o.object.width=this.width,o.object.height=this.height,o}}).prototype.isRectAreaLight=!0;class Ci{constructor(){this.coefficients=[];for(let r=0;r<9;r++)this.coefficients.push(new k)}set(r){for(let o=0;o<9;o++)this.coefficients[o].copy(r[o]);return this}zero(){for(let r=0;r<9;r++)this.coefficients[r].set(0,0,0);return this}getAt(r,o){const a=r.x,c=r.y,d=r.z,f=this.coefficients;return o.copy(f[0]).multiplyScalar(.282095),o.addScaledVector(f[1],.488603*c),o.addScaledVector(f[2],.488603*d),o.addScaledVector(f[3],.488603*a),o.addScaledVector(f[4],a*c*1.092548),o.addScaledVector(f[5],c*d*1.092548),o.addScaledVector(f[6],.315392*(3*d*d-1)),o.addScaledVector(f[7],a*d*1.092548),o.addScaledVector(f[8],.546274*(a*a-c*c)),o}getIrradianceAt(r,o){const a=r.x,c=r.y,d=r.z,f=this.coefficients;return o.copy(f[0]).multiplyScalar(.886227),o.addScaledVector(f[1],1.023328*c),o.addScaledVector(f[2],1.023328*d),o.addScaledVector(f[3],1.023328*a),o.addScaledVector(f[4],.858086*a*c),o.addScaledVector(f[5],.858086*c*d),o.addScaledVector(f[6],.743125*d*d-.247708),o.addScaledVector(f[7],.858086*a*d),o.addScaledVector(f[8],.429043*(a*a-c*c)),o}add(r){for(let o=0;o<9;o++)this.coefficients[o].add(r.coefficients[o]);return this}addScaledSH(r,o){for(let a=0;a<9;a++)this.coefficients[a].addScaledVector(r.coefficients[a],o);return this}scale(r){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(r);return this}lerp(r,o){for(let a=0;a<9;a++)this.coefficients[a].lerp(r.coefficients[a],o);return this}equals(r){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(r.coefficients[o]))return!1;return!0}copy(r){return this.set(r.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(r,o=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].fromArray(r,o+3*c);return this}toArray(r=[],o=0){const a=this.coefficients;for(let c=0;c<9;c++)a[c].toArray(r,o+3*c);return r}static getBasisAt(r,o){const a=r.x,c=r.y,d=r.z;o[0]=.282095,o[1]=.488603*c,o[2]=.488603*d,o[3]=.488603*a,o[4]=1.092548*a*c,o[5]=1.092548*c*d,o[6]=.315392*(3*d*d-1),o[7]=1.092548*a*d,o[8]=.546274*(a*a-c*c)}}Ci.prototype.isSphericalHarmonics3=!0;class Rf extends yo{constructor(r=new Ci,o=1){super(void 0,o),this.sh=r}copy(r){return super.copy(r),this.sh.copy(r.sh),this}fromJSON(r){return this.intensity=r.intensity,this.sh.fromArray(r.sh),this}toJSON(r){const o=super.toJSON(r);return o.object.sh=this.sh.toArray(),o}}Rf.prototype.isLightProbe=!0;class Em{static decodeText(r){if(typeof TextDecoder<"u")return(new TextDecoder).decode(r);let o="";for(let a=0,c=r.length;a<c;a++)o+=String.fromCharCode(r[a]);try{return decodeURIComponent(escape(o))}catch{return o}}static extractUrlBase(r){const o=r.lastIndexOf("/");return-1===o?"./":r.substr(0,o+1)}static resolveURL(r,o){return"string"!=typeof r||""===r?"":(/^https?:\/\//i.test(o)&&/^\//.test(r)&&(o=o.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(r)||/^data:.*,.*$/i.test(r)||/^blob:.*$/i.test(r)?r:o+r)}}(class Pf extends ft{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(r){return super.copy(r),this.instanceCount=r.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const r=super.toJSON(this);return r.instanceCount=this.instanceCount,r.isInstancedBufferGeometry=!0,r}}).prototype.isInstancedBufferGeometry=!0;class P_ extends ce{constructor(r){super(r),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(r){return this.options=r,this}load(r,o,a,c){void 0===r&&(r=""),void 0!==this.path&&(r=this.path+r),r=this.manager.resolveURL(r);const d=this,f=mt.get(r);if(void 0!==f)return d.manager.itemStart(r),setTimeout(function(){o&&o(f),d.manager.itemEnd(r)},0),f;const g={};g.credentials="anonymous"===this.crossOrigin?"same-origin":"include",g.headers=this.requestHeader,fetch(r,g).then(function(v){return v.blob()}).then(function(v){return createImageBitmap(v,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(v){mt.add(r,v),o&&o(v),d.manager.itemEnd(r)}).catch(function(v){c&&c(v),d.manager.itemError(r),d.manager.itemEnd(r)}),d.manager.itemStart(r)}}let Nf;P_.prototype.isImageBitmapLoader=!0;class jx extends ce{constructor(r){super(r)}load(r,o,a,c){const d=this,f=new Vo(this.manager);f.setResponseType("arraybuffer"),f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(r,function(g){try{const v=g.slice(0);(void 0===Nf&&(Nf=new(window.AudioContext||window.webkitAudioContext)),Nf).decodeAudioData(v,function(w){o(w)})}catch(v){c?c(v):console.error(v),d.manager.itemError(r)}},a,c)}}(class $x extends Rf{constructor(r,o,a=1){super(void 0,a);const c=(new ke).set(r),d=(new ke).set(o),f=new k(c.r,c.g,c.b),g=new k(d.r,d.g,d.b),v=Math.sqrt(Math.PI),y=v*Math.sqrt(.75);this.sh.coefficients[0].copy(f).add(g).multiplyScalar(v),this.sh.coefficients[1].copy(f).sub(g).multiplyScalar(y)}}).prototype.isHemisphereLightProbe=!0,class qx extends Rf{constructor(r,o=1){super(void 0,o);const a=(new ke).set(r);this.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class Zx{constructor(r,o,a){let c,d,f;switch(this.binding=r,this.valueSize=a,o){case"quaternion":c=this._slerp,d=this._slerpAdditive,f=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*a),this._workIndex=5;break;case"string":case"bool":c=this._select,d=this._select,f=this._setAdditiveIdentityOther,this.buffer=new Array(5*a);break;default:c=this._lerp,d=this._lerpAdditive,f=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*a)}this._mixBufferRegion=c,this._mixBufferRegionAdditive=d,this._setIdentity=f,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(r,o){const a=this.buffer,c=this.valueSize,d=r*c+c;let f=this.cumulativeWeight;if(0===f){for(let g=0;g!==c;++g)a[d+g]=a[g];f=o}else f+=o,this._mixBufferRegion(a,d,0,o/f,c);this.cumulativeWeight=f}accumulateAdditive(r){const o=this.buffer,a=this.valueSize,c=a*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(o,c,0,r,a),this.cumulativeWeightAdditive+=r}apply(r){const o=this.valueSize,a=this.buffer,c=r*o+o,d=this.cumulativeWeight,f=this.cumulativeWeightAdditive,g=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,d<1&&this._mixBufferRegion(a,c,o*this._origIndex,1-d,o),f>0&&this._mixBufferRegionAdditive(a,c,this._addIndex*o,1,o);for(let v=o,y=o+o;v!==y;++v)if(a[v]!==a[v+o]){g.setValue(a,c);break}}saveOriginalState(){const o=this.buffer,a=this.valueSize,c=a*this._origIndex;this.binding.getValue(o,c);for(let d=a,f=c;d!==f;++d)o[d]=o[c+d%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const r=this._addIndex*this.valueSize,o=r+this.valueSize;for(let a=r;a<o;a++)this.buffer[a]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const r=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let a=0;a<this.valueSize;a++)this.buffer[o+a]=this.buffer[r+a]}_select(r,o,a,c,d){if(c>=.5)for(let f=0;f!==d;++f)r[o+f]=r[a+f]}_slerp(r,o,a,c){fr.slerpFlat(r,o,r,o,r,a,c)}_slerpAdditive(r,o,a,c,d){const f=this._workIndex*d;fr.multiplyQuaternionsFlat(r,f,r,o,r,a),fr.slerpFlat(r,o,r,o,r,f,c)}_lerp(r,o,a,c,d){const f=1-c;for(let g=0;g!==d;++g){const v=o+g;r[v]=r[v]*f+r[a+g]*c}}_lerpAdditive(r,o,a,c,d){for(let f=0;f!==d;++f){const g=o+f;r[g]=r[g]+r[a+f]*c}}}const Td="\\[\\]\\.:\\/",Jx=new RegExp("["+Td+"]","g"),Wl="[^"+Td+"]",k_="[^"+Td.replace("\\.","")+"]",$c=/((?:WC+[\/:])*)/.source.replace("WC",Wl),Dd=/(WCOD+)?/.source.replace("WCOD",k_),Am=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wl),Ad=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wl),V_=new RegExp("^"+$c+Dd+Am+Ad+"$"),B_=["material","materials","bones"];class Qx{constructor(r,o,a){const c=a||Hn.parseTrackName(o);this._targetGroup=r,this._bindings=r.subscribe_(o,c)}getValue(r,o){this.bind();const c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(r,o)}setValue(r,o){const a=this._bindings;for(let c=this._targetGroup.nCachedObjects_,d=a.length;c!==d;++c)a[c].setValue(r,o)}bind(){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=r.length;o!==a;++o)r[o].bind()}unbind(){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=r.length;o!==a;++o)r[o].unbind()}}let Hn=(()=>{class h{constructor(o,a,c){this.path=a,this.parsedPath=c||h.parseTrackName(a),this.node=h.findNode(o,this.parsedPath.nodeName)||o,this.rootNode=o,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(o,a,c){return o&&o.isAnimationObjectGroup?new h.Composite(o,a,c):new h(o,a,c)}static sanitizeNodeName(o){return o.replace(/\s/g,"_").replace(Jx,"")}static parseTrackName(o){const a=V_.exec(o);if(!a)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const c={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},d=c.nodeName&&c.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){const f=c.nodeName.substring(d+1);-1!==B_.indexOf(f)&&(c.nodeName=c.nodeName.substring(0,d),c.objectName=f)}if(null===c.propertyName||0===c.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return c}static findNode(o,a){if(!a||""===a||"."===a||-1===a||a===o.name||a===o.uuid)return o;if(o.skeleton){const c=o.skeleton.getBoneByName(a);if(void 0!==c)return c}if(o.children){const c=function(f){for(let g=0;g<f.length;g++){const v=f[g];if(v.name===a||v.uuid===a)return v;const y=c(v.children);if(y)return y}return null},d=c(o.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(o,a){o[a]=this.targetObject[this.propertyName]}_getValue_array(o,a){const c=this.resolvedProperty;for(let d=0,f=c.length;d!==f;++d)o[a++]=c[d]}_getValue_arrayElement(o,a){o[a]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(o,a){this.resolvedProperty.toArray(o,a)}_setValue_direct(o,a){this.targetObject[this.propertyName]=o[a]}_setValue_direct_setNeedsUpdate(o,a){this.targetObject[this.propertyName]=o[a],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(o,a){this.targetObject[this.propertyName]=o[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(o,a){const c=this.resolvedProperty;for(let d=0,f=c.length;d!==f;++d)c[d]=o[a++]}_setValue_array_setNeedsUpdate(o,a){const c=this.resolvedProperty;for(let d=0,f=c.length;d!==f;++d)c[d]=o[a++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(o,a){const c=this.resolvedProperty;for(let d=0,f=c.length;d!==f;++d)c[d]=o[a++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(o,a){this.resolvedProperty[this.propertyIndex]=o[a]}_setValue_arrayElement_setNeedsUpdate(o,a){this.resolvedProperty[this.propertyIndex]=o[a],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(o,a){this.resolvedProperty[this.propertyIndex]=o[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(o,a){this.resolvedProperty.fromArray(o,a)}_setValue_fromArray_setNeedsUpdate(o,a){this.resolvedProperty.fromArray(o,a),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(o,a){this.resolvedProperty.fromArray(o,a),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(o,a){this.bind(),this.getValue(o,a)}_setValue_unbound(o,a){this.bind(),this.setValue(o,a)}bind(){let o=this.node;const a=this.parsedPath,c=a.objectName,d=a.propertyName;let f=a.propertyIndex;if(o||(o=h.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(c){let w=a.objectIndex;switch(c){case"materials":if(!o.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!o.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);o=o.material.materials;break;case"bones":if(!o.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);o=o.skeleton.bones;for(let b=0;b<o.length;b++)if(o[b].name===w){w=b;break}break;default:if(void 0===o[c])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);o=o[c]}if(void 0!==w){if(void 0===o[w])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);o=o[w]}}const g=o[d];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+a.nodeName+"."+d+" but it wasn't found.",o);let v=this.Versioning.None;this.targetObject=o,void 0!==o.needsUpdate?v=this.Versioning.NeedsUpdate:void 0!==o.matrixWorldNeedsUpdate&&(v=this.Versioning.MatrixWorldNeedsUpdate);let y=this.BindingType.Direct;if(void 0!==f){if("morphTargetInfluences"===d){if(!o.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!o.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!o.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==o.morphTargetDictionary[f]&&(f=o.morphTargetDictionary[f])}y=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=f}else void 0!==g.fromArray&&void 0!==g.toArray?(y=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(y=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=d;this.getValue=this.GetterByBindingType[y],this.setValue=this.SetterByBindingTypeAndVersioning[y][v]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return h.Composite=Qx,h})();Hn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Hn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Hn.prototype.GetterByBindingType=[Hn.prototype._getValue_direct,Hn.prototype._getValue_array,Hn.prototype._getValue_arrayElement,Hn.prototype._getValue_toArray],Hn.prototype.SetterByBindingTypeAndVersioning=[[Hn.prototype._setValue_direct,Hn.prototype._setValue_direct_setNeedsUpdate,Hn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_array,Hn.prototype._setValue_array_setNeedsUpdate,Hn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_arrayElement,Hn.prototype._setValue_arrayElement_setNeedsUpdate,Hn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hn.prototype._setValue_fromArray,Hn.prototype._setValue_fromArray_setNeedsUpdate,Hn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eM{constructor(r,o,a=null,c=o.blendMode){this._mixer=r,this._clip=o,this._localRoot=a,this.blendMode=c;const d=o.tracks,f=d.length,g=new Array(f),v={endingStart:rt,endingEnd:rt};for(let y=0;y!==f;++y){const w=d[y].createInterpolant(null);g[y]=w,w.settings=v}this._interpolantSettings=v,this._interpolants=g,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(r){return this._startTime=r,this}setLoop(r,o){return this.loop=r,this.repetitions=o,this}setEffectiveWeight(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(r){return this._scheduleFading(r,0,1)}fadeOut(r){return this._scheduleFading(r,1,0)}crossFadeFrom(r,o,a){if(r.fadeOut(o),this.fadeIn(o),a){const c=this._clip.duration,d=r._clip.duration,g=c/d;r.warp(1,d/c,o),this.warp(g,1,o)}return this}crossFadeTo(r,o,a){return r.crossFadeFrom(this,o,a)}stopFading(){const r=this._weightInterpolant;return null!==r&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}setEffectiveTimeScale(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(r){return this.timeScale=this._clip.duration/r,this.stopWarping()}syncWith(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()}halt(r){return this.warp(this._effectiveTimeScale,0,r)}warp(r,o,a){const c=this._mixer,d=c.time,f=this.timeScale;let g=this._timeScaleInterpolant;null===g&&(g=c._lendControlInterpolant(),this._timeScaleInterpolant=g);const v=g.parameterPositions,y=g.sampleValues;return v[0]=d,v[1]=d+a,y[0]=r/f,y[1]=o/f,this}stopWarping(){const r=this._timeScaleInterpolant;return null!==r&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(r,o,a,c){if(!this.enabled)return void this._updateWeight(r);const d=this._startTime;if(null!==d){const v=(r-d)*a;if(v<0||0===a)return;this._startTime=null,o=a*v}o*=this._updateTimeScale(r);const f=this._updateTime(o),g=this._updateWeight(r);if(g>0){const v=this._interpolants,y=this._propertyBindings;if(2501===this.blendMode)for(let w=0,b=v.length;w!==b;++w)v[w].evaluate(f),y[w].accumulateAdditive(g);else for(let w=0,b=v.length;w!==b;++w)v[w].evaluate(f),y[w].accumulate(c,g)}}_updateWeight(r){let o=0;if(this.enabled){o=this.weight;const a=this._weightInterpolant;if(null!==a){const c=a.evaluate(r)[0];o*=c,r>a.parameterPositions[1]&&(this.stopFading(),0===c&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(r){let o=0;if(!this.paused){o=this.timeScale;const a=this._timeScaleInterpolant;null!==a&&(o*=a.evaluate(r)[0],r>a.parameterPositions[1]&&(this.stopWarping(),0===o?this.paused=!0:this.timeScale=o))}return this._effectiveTimeScale=o,o}_updateTime(r){const o=this._clip.duration,a=this.loop;let c=this.time+r,d=this._loopCount;const f=2202===a;if(0===r)return-1===d||!f||1&~d?c:o-c;if(2200===a){-1===d&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=o)c=o;else{if(!(c<0)){this.time=c;break e}c=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:r<0?-1:1})}}else{if(-1===d&&(r>=0?(d=0,this._setEndings(!0,0===this.repetitions,f)):this._setEndings(0===this.repetitions,!0,f)),c>=o||c<0){const g=Math.floor(c/o);c-=o*g,d+=Math.abs(g);const v=this.repetitions-d;if(v<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c=r>0?o:0,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:r>0?1:-1});else{if(1===v){const y=r<0;this._setEndings(y,!y,f)}else this._setEndings(!1,!1,f);this._loopCount=d,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=c;if(f&&!(1&~d))return o-c}return c}_setEndings(r,o,a){const c=this._interpolantSettings;a?(c.endingStart=P,c.endingEnd=P):(c.endingStart=r?this.zeroSlopeAtStart?P:rt:F,c.endingEnd=o?this.zeroSlopeAtEnd?P:rt:F)}_scheduleFading(r,o,a){const c=this._mixer,d=c.time;let f=this._weightInterpolant;null===f&&(f=c._lendControlInterpolant(),this._weightInterpolant=f);const g=f.parameterPositions,v=f.sampleValues;return g[0]=d,v[0]=o,g[1]=d+r,v[1]=a,this}}(class U_ extends Ml{constructor(r){super(),this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(r,o){const a=r._localRoot||this._root,c=r._clip.tracks,d=c.length,f=r._propertyBindings,g=r._interpolants,v=a.uuid,y=this._bindingsByRootAndName;let w=y[v];void 0===w&&(w={},y[v]=w);for(let b=0;b!==d;++b){const x=c[b],M=x.name;let C=w[M];if(void 0!==C)++C.referenceCount,f[b]=C;else{if(C=f[b],void 0!==C){null===C._cacheIndex&&(++C.referenceCount,this._addInactiveBinding(C,v,M));continue}C=new Zx(Hn.create(a,M,o&&o._propertyBindings[b].binding.parsedPath),x.ValueTypeName,x.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,v,M),f[b]=C}g[b].resultBuffer=C.buffer}}_activateAction(r){if(!this._isActiveAction(r)){if(null===r._cacheIndex){const a=(r._localRoot||this._root).uuid,c=r._clip.uuid,d=this._actionsByClip[c];this._bindAction(r,d&&d.knownActions[0]),this._addInactiveAction(r,c,a)}const o=r._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];0==d.useCount++&&(this._lendBinding(d),d.saveOriginalState())}this._lendAction(r)}}_deactivateAction(r){if(this._isActiveAction(r)){const o=r._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];0==--d.useCount&&(d.restoreOriginalState(),this._takeBackBinding(d))}this._takeBackAction(r)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}}_isActiveAction(r){const o=r._cacheIndex;return null!==o&&o<this._nActiveActions}_addInactiveAction(r,o,a){const c=this._actions,d=this._actionsByClip;let f=d[o];if(void 0===f)f={knownActions:[r],actionByRoot:{}},r._byClipCacheIndex=0,d[o]=f;else{const g=f.knownActions;r._byClipCacheIndex=g.length,g.push(r)}r._cacheIndex=c.length,c.push(r),f.actionByRoot[a]=r}_removeInactiveAction(r){const o=this._actions,a=o[o.length-1],c=r._cacheIndex;a._cacheIndex=c,o[c]=a,o.pop(),r._cacheIndex=null;const d=r._clip.uuid,f=this._actionsByClip,g=f[d],v=g.knownActions,y=v[v.length-1],w=r._byClipCacheIndex;y._byClipCacheIndex=w,v[w]=y,v.pop(),r._byClipCacheIndex=null,delete g.actionByRoot[(r._localRoot||this._root).uuid],0===v.length&&delete f[d],this._removeInactiveBindingsForAction(r)}_removeInactiveBindingsForAction(r){const o=r._propertyBindings;for(let a=0,c=o.length;a!==c;++a){const d=o[a];0==--d.referenceCount&&this._removeInactiveBinding(d)}}_lendAction(r){const o=this._actions,a=r._cacheIndex,c=this._nActiveActions++,d=o[c];r._cacheIndex=c,o[c]=r,d._cacheIndex=a,o[a]=d}_takeBackAction(r){const o=this._actions,a=r._cacheIndex,c=--this._nActiveActions,d=o[c];r._cacheIndex=c,o[c]=r,d._cacheIndex=a,o[a]=d}_addInactiveBinding(r,o,a){const c=this._bindingsByRootAndName,d=this._bindings;let f=c[o];void 0===f&&(f={},c[o]=f),f[a]=r,r._cacheIndex=d.length,d.push(r)}_removeInactiveBinding(r){const o=this._bindings,a=r.binding,c=a.rootNode.uuid,d=a.path,f=this._bindingsByRootAndName,g=f[c],v=o[o.length-1],y=r._cacheIndex;v._cacheIndex=y,o[y]=v,o.pop(),delete g[d],0===Object.keys(g).length&&delete f[c]}_lendBinding(r){const o=this._bindings,a=r._cacheIndex,c=this._nActiveBindings++,d=o[c];r._cacheIndex=c,o[c]=r,d._cacheIndex=a,o[a]=d}_takeBackBinding(r){const o=this._bindings,a=r._cacheIndex,c=--this._nActiveBindings,d=o[c];r._cacheIndex=c,o[c]=r,d._cacheIndex=a,o[a]=d}_lendControlInterpolant(){const r=this._controlInterpolants,o=this._nActiveControlInterpolants++;let a=r[o];return void 0===a&&(a=new dm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=o,r[o]=a),a}_takeBackControlInterpolant(r){const o=this._controlInterpolants,a=r.__cacheIndex,c=--this._nActiveControlInterpolants,d=o[c];r.__cacheIndex=c,o[c]=r,d.__cacheIndex=a,o[a]=d}clipAction(r,o,a){const c=o||this._root,d=c.uuid;let f="string"==typeof r?Md.findByName(c,r):r;const g=null!==f?f.uuid:r,v=this._actionsByClip[g];let y=null;if(void 0===a&&(a=null!==f?f.blendMode:2500),void 0!==v){const b=v.actionByRoot[d];if(void 0!==b&&b.blendMode===a)return b;y=v.knownActions[0],null===f&&(f=y._clip)}if(null===f)return null;const w=new eM(this,f,o,a);return this._bindAction(w,y),this._addInactiveAction(w,g,d),w}existingAction(r,o){const a=o||this._root,c=a.uuid,d="string"==typeof r?Md.findByName(a,r):r,g=this._actionsByClip[d?d.uuid:r];return void 0!==g&&g.actionByRoot[c]||null}stopAllAction(){const r=this._actions;for(let a=this._nActiveActions-1;a>=0;--a)r[a].stop();return this}update(r){const o=this._actions,a=this._nActiveActions,c=this.time+=r*=this.timeScale,d=Math.sign(r),f=this._accuIndex^=1;for(let y=0;y!==a;++y)o[y]._update(c,r,d,f);const g=this._bindings,v=this._nActiveBindings;for(let y=0;y!==v;++y)g[y].apply(f);return this}setTime(r){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(r)}getRoot(){return this._root}uncacheClip(r){const o=this._actions,a=r.uuid,c=this._actionsByClip,d=c[a];if(void 0!==d){const f=d.knownActions;for(let g=0,v=f.length;g!==v;++g){const y=f[g];this._deactivateAction(y);const w=y._cacheIndex,b=o[o.length-1];y._cacheIndex=null,y._byClipCacheIndex=null,b._cacheIndex=w,o[w]=b,o.pop(),this._removeInactiveBindingsForAction(y)}delete c[a]}}uncacheRoot(r){const o=r.uuid,a=this._actionsByClip;for(const f in a){const v=a[f].actionByRoot[o];void 0!==v&&(this._deactivateAction(v),this._removeInactiveAction(v))}const d=this._bindingsByRootAndName[o];if(void 0!==d)for(const f in d){const g=d[f];g.restoreOriginalState(),this._removeInactiveBinding(g)}}uncacheAction(r,o){const a=this.existingAction(r,o);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class qc{constructor(r){"string"==typeof r&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),r=arguments[1]),this.value=r}clone(){return new qc(void 0===this.value.clone?this.value:this.value.clone())}}(class tM extends Fl{constructor(r,o,a=1){super(r,o),this.meshPerAttribute=a}copy(r){return super.copy(r),this.meshPerAttribute=r.meshPerAttribute,this}clone(r){const o=super.clone(r);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(r){const o=super.toJSON(r);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}).prototype.isInstancedInterleavedBuffer=!0;class nM{constructor(r=1,o=0,a=0){return this.radius=r,this.phi=o,this.theta=a,this}set(r,o,a){return this.radius=r,this.phi=o,this.theta=a,this}copy(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(r){return this.setFromCartesianCoords(r.x,r.y,r.z)}setFromCartesianCoords(r,o,a){return this.radius=Math.sqrt(r*r+o*o+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(r,a),this.phi=Math.acos(pn(o/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Im=new Me;class jl{constructor(r=new Me(1/0,1/0),o=new Me(-1/0,-1/0)){this.min=r,this.max=o}set(r,o){return this.min.copy(r),this.max.copy(o),this}setFromPoints(r){this.makeEmpty();for(let o=0,a=r.length;o<a;o++)this.expandByPoint(r[o]);return this}setFromCenterAndSize(r,o){const a=Im.copy(o).multiplyScalar(.5);return this.min.copy(r).sub(a),this.max.copy(r).add(a),this}clone(){return(new this.constructor).copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(r){return this.isEmpty()?r.set(0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y}getParameter(r,o){return o.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)}clampPoint(r,o){return o.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return Im.copy(r).clamp(this.min,this.max).sub(r).length()}intersect(r){return this.min.max(r.min),this.max.min(r.max),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}jl.prototype.isBox2=!0;const Ka=new k,Vf=new Je,Xc=new Je;function z_(h){const r=[];h&&h.isBone&&r.push(h);for(let o=0;o<h.children.length;o++)r.push.apply(r,z_(h.children[o]));return r}const Y_=new Float32Array(1);new Int32Array(Y_.buffer),mo.create=function(h,r){return console.log("THREE.Curve.create() has been deprecated"),h.prototype=Object.create(mo.prototype),h.prototype.constructor=h,h.prototype.getPoint=r,h},gf.prototype.fromPoints=function(h){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(h)},class rM extends ki{constructor(r=10,o=10,a=4473924,c=8947848){a=new ke(a),c=new ke(c);const d=o/2,f=r/o,g=r/2,v=[],y=[];for(let x=0,M=0,C=-g;x<=o;x++,C+=f){v.push(-g,0,C,g,0,C),v.push(C,0,-g,C,0,g);const D=x===d?a:c;D.toArray(y,M),M+=3,D.toArray(y,M),M+=3,D.toArray(y,M),M+=3,D.toArray(y,M),M+=3}const w=new ft;w.setAttribute("position",new $e(v,3)),w.setAttribute("color",new $e(y,3)),super(w,new ni({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class Pm extends ki{constructor(r){const o=z_(r),a=new ft,c=[],d=[],f=new ke(0,0,1),g=new ke(0,1,0);for(let y=0;y<o.length;y++){const w=o[y];w.parent&&w.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),d.push(f.r,f.g,f.b),d.push(g.r,g.g,g.b))}a.setAttribute("position",new $e(c,3)),a.setAttribute("color",new $e(d,3)),super(a,new ni({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=r,this.bones=o,this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(r){const o=this.bones,a=this.geometry,c=a.getAttribute("position");Xc.copy(this.root.matrixWorld).invert();for(let d=0,f=0;d<o.length;d++){const g=o[d];g.parent&&g.parent.isBone&&(Vf.multiplyMatrices(Xc,g.matrixWorld),Ka.setFromMatrixPosition(Vf),c.setXYZ(f,Ka.x,Ka.y,Ka.z),Vf.multiplyMatrices(Xc,g.parent.matrixWorld),Ka.setFromMatrixPosition(Vf),c.setXYZ(f+1,Ka.x,Ka.y,Ka.z),f+=2)}a.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(r)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ce.prototype.extractUrlBase=function(h){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Em.extractUrlBase(h)},ce.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},jl.prototype.center=function(h){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(h)},jl.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},jl.prototype.isIntersectionBox=function(h){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(h)},jl.prototype.size=function(h){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(h)},Ct.prototype.center=function(h){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(h)},Ct.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ct.prototype.isIntersectionBox=function(h){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(h)},Ct.prototype.isIntersectionSphere=function(h){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(h)},Ct.prototype.size=function(h){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(h)},jr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},is.prototype.setFromMatrix=function(h){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(h)},Wr.prototype.flattenToArrayOffset=function(h,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(h,r)},Wr.prototype.multiplyVector3=function(h){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),h.applyMatrix3(this)},Wr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Wr.prototype.applyToBufferAttribute=function(h){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),h.applyMatrix3(this)},Wr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Wr.prototype.getInverse=function(h){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(h).invert()},Je.prototype.extractPosition=function(h){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(h)},Je.prototype.flattenToArrayOffset=function(h,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(h,r)},Je.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new k).setFromMatrixColumn(this,3)},Je.prototype.setRotationFromQuaternion=function(h){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(h)},Je.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Je.prototype.multiplyVector3=function(h){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),h.applyMatrix4(this)},Je.prototype.multiplyVector4=function(h){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),h.applyMatrix4(this)},Je.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Je.prototype.rotateAxis=function(h){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),h.transformDirection(this)},Je.prototype.crossVector=function(h){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),h.applyMatrix4(this)},Je.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Je.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Je.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Je.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Je.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Je.prototype.applyToBufferAttribute=function(h){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),h.applyMatrix4(this)},Je.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Je.prototype.makeFrustum=function(h,r,o,a,c,d){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(h,r,a,o,c,d)},Je.prototype.getInverse=function(h){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(h).invert()},Qn.prototype.isIntersectionLine=function(h){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(h)},fr.prototype.multiplyVector3=function(h){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),h.applyQuaternion(this)},fr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Cl.prototype.isIntersectionBox=function(h){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(h)},Cl.prototype.isIntersectionPlane=function(h){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(h)},Cl.prototype.isIntersectionSphere=function(h){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(h)},ar.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ar.prototype.barycoordFromPoint=function(h,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(h,r)},ar.prototype.midpoint=function(h){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(h)},ar.prototypenormal=function(h){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(h)},ar.prototype.plane=function(h){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(h)},ar.barycoordFromPoint=function(h,r,o,a,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ar.getBarycoord(h,r,o,a,c)},ar.normal=function(h,r,o,a){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ar.getNormal(h,r,o,a)},Fo.prototype.extractAllPoints=function(h){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(h)},Fo.prototype.extrude=function(h){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new fs(this,h)},Fo.prototype.makeGeometry=function(h){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new yd(this,h)},Me.prototype.fromAttribute=function(h,r,o){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(h,r,o)},Me.prototype.distanceToManhattan=function(h){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(h)},Me.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},k.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},k.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},k.prototype.getPositionFromMatrix=function(h){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(h)},k.prototype.getScaleFromMatrix=function(h){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(h)},k.prototype.getColumnFromMatrix=function(h,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,h)},k.prototype.applyProjection=function(h){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(h)},k.prototype.fromAttribute=function(h,r,o){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(h,r,o)},k.prototype.distanceToManhattan=function(h){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(h)},k.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Mn.prototype.fromAttribute=function(h,r,o){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(h,r,o)},Mn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Gt.prototype.getChildByName=function(h){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(h)},Gt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Gt.prototype.translate=function(h,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,h)},Gt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Gt.prototype.applyMatrix=function(h){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(h)},Object.defineProperties(Gt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(h){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=h}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Zn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Zn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),rd.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Jn.prototype.setLens=function(h,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==r&&(this.filmGauge=r),this.setFocalLength(h)},Object.defineProperties(yo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(h){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=h}},shadowCameraLeft:{set:function(h){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=h}},shadowCameraRight:{set:function(h){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=h}},shadowCameraTop:{set:function(h){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=h}},shadowCameraBottom:{set:function(h){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=h}},shadowCameraNear:{set:function(h){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=h}},shadowCameraFar:{set:function(h){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=h}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(h){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=h}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(h){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=h}},shadowMapHeight:{set:function(h){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=h}}}),Object.defineProperties(en.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===xl},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(xl)}}}),en.prototype.setDynamic=function(h){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===h?xl:Ns),this},en.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},en.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ft.prototype.addIndex=function(h){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(h)},ft.prototype.addAttribute=function(h,r){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?"index"===h?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(r),this):this.setAttribute(h,r):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(h,new en(arguments[1],arguments[2])))},ft.prototype.addDrawCall=function(h,r,o){void 0!==o&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(h,r)},ft.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ft.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ft.prototype.removeAttribute=function(h){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(h)},ft.prototype.applyMatrix=function(h){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(h)},Object.defineProperties(ft.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Fl.prototype.setDynamic=function(h){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===h?xl:Ns),this},Fl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},fs.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},fs.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},fs.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Yh.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},qc.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(lr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ke}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(h){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===h}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(h){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=h}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(wi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(h){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=h}}}),Cn.prototype.clearTarget=function(h,r,o,a){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(h),this.clear(r,o,a)},Cn.prototype.animate=function(h){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(h)},Cn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Cn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Cn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Cn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Cn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Cn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Cn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Cn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Cn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Cn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Cn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Cn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Cn.prototype.enableScissorTest=function(h){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(h)},Cn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Cn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Cn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Cn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Cn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Cn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Cn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Cn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Cn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Cn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Cn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(h){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=h}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(h){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=h}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(h){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===h?xt:kt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(jh.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Eo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(h){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=h}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(h){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=h}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(h){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=h}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(h){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=h}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(h){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=h}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(h){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=h}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(h){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=h}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(h){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=h}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(h){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=h}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(h){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=h}}}),class Tm extends Gt{constructor(r){super(),this.type="Audio",this.listener=r,this.context=r.context,this.gain=this.context.createGain(),this.gain.connect(r.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this}setMediaElementSource(r){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(r),this.connect(),this}setMediaStreamSource(r){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(r),this.connect(),this}setBuffer(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this}play(r=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+r;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let r=1,o=this.filters.length;r<o;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let r=1,o=this.filters.length;r<o;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(r){return r||(r=[]),!0===this._connected?(this.disconnect(),this.filters=r.slice(),this.connect()):this.filters=r.slice(),this}setDetune(r){if(this.detune=r,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(r){return this.setFilters(r?[r]:[])}setPlaybackRate(r){if(!1!==this.hasPlaybackControl)return this.playbackRate=r,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(r){if(!1!==this.hasPlaybackControl)return this.loop=r,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(r){return this.loopStart=r,this}setLoopEnd(r){return this.loopEnd=r,this}getVolume(){return this.gain.gain.value}setVolume(r){return this.gain.gain.setTargetAtTime(r,this.context.currentTime,.01),this}}.prototype.load=function(h){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const r=this;return(new jx).load(h,function(a){r.setBuffer(a)}),this},Il.prototype.updateCubeMap=function(h,r){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(h,r)},Il.prototype.clear=function(h,r,o,a){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(h,r,o,a)},Qo.crossOrigin=void 0,Qo.loadTexture=function(h,r,o,a){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const c=new mm;c.setCrossOrigin(this.crossOrigin);const d=c.load(h,o,void 0,a);return r&&(d.mapping=r),d},Qo.loadTextureCube=function(h,r,o,a){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const c=new gm;c.setCrossOrigin(this.crossOrigin);const d=c.load(h,o,void 0,a);return r&&(d.mapping=r),d},Qo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Qo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ir}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ir)},467:(xs,Ms,zr)=>{"use strict";function vr(wn,oi,On,yr,nt,so,Dt){try{var At=wn[so](Dt),or=At.value}catch(zt){return void On(zt)}At.done?oi(or):Promise.resolve(or).then(yr,nt)}function ir(wn){return function(){var oi=this,On=arguments;return new Promise(function(yr,nt){var so=wn.apply(oi,On);function Dt(or){vr(so,yr,nt,Dt,At,"next",or)}function At(or){vr(so,yr,nt,Dt,At,"throw",or)}Dt(void 0)})}}zr.d(Ms,{A:()=>ir})}},xs=>{xs(xs.s=818)}]);