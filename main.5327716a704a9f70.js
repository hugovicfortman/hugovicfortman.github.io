var Ob=Math.pow;(self.webpackChunkvictor_fortman=self.webpackChunkvictor_fortman||[]).push([[179],{946:(Yt,et,Q)=>{"use strict";Q.d(et,{E:()=>Ae});var C=Q(655),l=Q(2340),qe=Q(2096),ke=Q(520);const pe=l.N.configUrl;let Ae=(()=>{class Ie{constructor(Se){this.http=Se}loadConfig(){return new Promise((Se,oe)=>{window.caches&&window.caches.match(pe).then(ye=>(0,C.mG)(this,void 0,void 0,function*(){ye?(console.log("config loaded from cache"),Se(ye.json())):((yield window.caches.open("vf-local")).add(pe),this.http.get(pe).toPromise().then(Ne=>{console.log("config loaded from server"),Se(Ne)}))})).catch(ye=>console.log(ye))}).then(Se=>{this.config=Se})}}return Ie.\u0275fac=function(Se){return new(Se||Ie)(qe.LFG(ke.eN))},Ie.\u0275prov=qe.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},652:(Yt,et,Q)=>{"use strict";Q.d(et,{y:()=>Ae});var C=Q(8929),l=Q(5877),qe=Q(2096),ke=Q(6719),pe=Q(8766);let Ae=(()=>{class Ie{constructor(Se,oe){this.locale=Se,this.util=oe,this.preference=l.bb,this.preferenceChangedSource=new C.xQ,this.preferenceChanged$=this.preferenceChangedSource.asObservable(),Se.setDefaultLang(this.preference.Language),Se.use(this.preference.Language)}getPreference(){return this.preference}setPreference(Se,oe){return void 0!==this.preference[Se]?(this.preference[Se]=oe,void this.preferenceChangedSource.next(this.preference)):void console.warn("Unidentified preference settings. Not persisted")}toggleLightMode(){const Se=l.DZ.indexOf(l.DZ.find(ye=>ye.name===this.preference.LightMode))+1;this.setLightMode(l.DZ[Se>=l.DZ.length?0:Se].name)}setLightMode(Se){const oe=l.DZ.find(ye=>ye.name===Se);this.util.isNullOrUndefined(oe)||(this.preference.LightMode=oe.name,l.DZ.forEach(ye=>document.body.classList.remove(ye.longCode)),document.body.classList.add(oe.longCode),this.preferenceChangedSource.next(this.preference))}toggleLanguages(){const Se=l.a2.indexOf(l.a2.find(ye=>ye.code===this.preference.Language))+1;this.setLanguage(l.a2[Se>=l.a2.length?0:Se].code)}setLanguage(Se){const oe=l.a2.find(ye=>ye.code===Se);this.util.isNullOrUndefined(oe)||(this.preference.Language=oe.code,document.documentElement.lang=oe.code,this.locale.use(Se),this.preferenceChangedSource.next(this.preference))}toggleBackdropMode(){const Se=l.E2.indexOf(l.E2.find(ye=>ye.name===this.preference.BackdropMode))+1;this.setBackdropMode(l.E2[Se>=l.E2.length?0:Se].name)}setBackdropMode(Se){const oe=l.E2.find(ye=>ye.name===Se);this.util.isNullOrUndefined(oe)||(this.preference.BackdropMode=oe.name,this.util.globalFunction("switchBackdropMode",oe.code),this.preferenceChangedSource.next(this.preference))}setMenuMode(Se){const oe=l.HW.find(ye=>ye.name===Se);this.util.isNullOrUndefined(oe)||(this.preference.MenuMode=oe.name,this.preferenceChangedSource.next(this.preference))}removeDarkMode(){this.util.globalFunction("removeDarkMode")}}return Ie.\u0275fac=function(Se){return new(Se||Ie)(qe.LFG(ke.sK),qe.LFG(pe.t))},Ie.\u0275prov=qe.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})()},8766:(Yt,et,Q)=>{"use strict";Q.d(et,{t:()=>l});var C=Q(2096);let l=(()=>{class qe{constructor(){}click(pe){pe instanceof HTMLElement&&pe.click()}range(pe){const Ae=new Array(pe);for(let Ie=0;Ie<pe;Ie++)Ae[Ie]=Ie+1;return Ae}stringContainsAny(pe,Ae){for(const Ie of Ae)if(-1!==pe.indexOf(Ie.toString()))return!0;return!1}stringIndexOfAny(pe,Ae){for(const Ie of Ae)if(-1!==pe.indexOf(Ie.toString()))return pe.indexOf(Ie.toString());return-1}arrayIndexOfMatchedString(pe,Ae){for(let Ie=0;Ie<pe.length;Ie++)if(-1!==Ae.indexOf(pe[Ie]))return Ie;return-1}arrayMatchedString(pe,Ae){for(let Ie=0;Ie<pe.length;Ie++)if(-1!==Ae.indexOf(pe[Ie]))return pe[Ie];return null}set_var(pe,Ae){document.body.setAttribute(pe,Ae)}get_var(pe){return document.body.getAttribute(pe)}isNullOrUndefined(pe){return null==pe||void 0===pe}globalFunction(pe,...Ae){return window[pe](Ae)}}return qe.\u0275fac=function(pe){return new(pe||qe)},qe.\u0275prov=C.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})()},4466:(Yt,et,Q)=>{"use strict";Q.d(et,{m:()=>qe});var C=Q(9808),l=Q(2096);let qe=(()=>{class ke{}return ke.\u0275fac=function(Ae){return new(Ae||ke)},ke.\u0275mod=l.oAB({type:ke}),ke.\u0275inj=l.cJS({imports:[[C.ez]]}),ke})()},2340:(Yt,et,Q)=>{"use strict";Q.d(et,{N:()=>C});const C={production:!0,configUrl:"https://victorfortman.com/assets/config/"}},7304:(Yt,et,Q)=>{"use strict";var C=Q(9808),l=Q(2096);class qe extends C.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends qe{static makeCurrent(){(0,C.HT)(new ke)}onAndCancel(P,g,R){return P.addEventListener(g,R,!1),()=>{P.removeEventListener(g,R,!1)}}dispatchEvent(P,g){P.dispatchEvent(g)}remove(P){P.parentNode&&P.parentNode.removeChild(P)}createElement(P,g){return(g=g||this.getDefaultDocument()).createElement(P)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(P){return P.nodeType===Node.ELEMENT_NODE}isShadowRoot(P){return P instanceof DocumentFragment}getGlobalEventTarget(P,g){return"window"===g?window:"document"===g?P:"body"===g?P.body:null}getBaseHref(P){const g=function Ae(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==g?null:function Be(b){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",b);const P=Ie.pathname;return"/"===P.charAt(0)?P:`/${P}`}(g)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(P){return(0,C.Mx)(document.cookie,P)}}let Ie,pe=null;const Se=new l.OlP("TRANSITION_ID"),ye=[{provide:l.ip1,useFactory:function oe(b,P,g){return()=>{g.get(l.CZH).donePromise.then(()=>{const R=(0,C.q)(),W=P.querySelectorAll(`style[ng-transition="${b}"]`);for(let he=0;he<W.length;he++)R.remove(W[he])})}},deps:[Se,C.K0,l.zs3],multi:!0}];class Re{static init(){(0,l.VLi)(new Re)}addToWindow(P){l.dqk.getAngularTestability=(R,W=!0)=>{const he=P.findTestabilityInTree(R,W);if(null==he)throw new Error("Could not find testability for element.");return he},l.dqk.getAllAngularTestabilities=()=>P.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>P.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(R=>{const W=l.dqk.getAllAngularTestabilities();let he=W.length,Ke=!1;const _n=function(dn){Ke=Ke||dn,he--,0==he&&R(Ke)};W.forEach(function(dn){dn.whenStable(_n)})})}findTestabilityInTree(P,g,R){if(null==g)return null;const W=P.getTestability(g);return null!=W?W:R?(0,C.q)().isShadowRoot(g)?this.findTestabilityInTree(P,g.host,!0):this.findTestabilityInTree(P,g.parentElement,!0):null}}let Ne=(()=>{class b{build(){return new XMLHttpRequest}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();function an(b,P){"undefined"!=typeof COMPILED&&COMPILED||((l.dqk.ng=l.dqk.ng||{})[b]=P)}const Pt=(()=>({ApplicationRef:l.z2F,NgZone:l.R0b}))();function fn(b){return(0,l.Tjo)(b)}const Ct=[{provide:l.ip1,useFactory:function mt(b){return an("probe",fn),an("coreTokens",Object.assign(Object.assign({},Pt),function $e(b){return b.reduce((P,g)=>(P[g.name]=g.token,P),{})}(b||[]))),()=>fn},deps:[[l.PXZ,new l.FiY]],multi:!0}],ut=new l.OlP("EventManagerPlugins");let St=(()=>{class b{constructor(g,R){this._zone=R,this._eventNameToPlugin=new Map,g.forEach(W=>W.manager=this),this._plugins=g.slice().reverse()}addEventListener(g,R,W){return this._findPluginFor(R).addEventListener(g,R,W)}addGlobalEventListener(g,R,W){return this._findPluginFor(R).addGlobalEventListener(g,R,W)}getZone(){return this._zone}_findPluginFor(g){const R=this._eventNameToPlugin.get(g);if(R)return R;const W=this._plugins;for(let he=0;he<W.length;he++){const Ke=W[he];if(Ke.supports(g))return this._eventNameToPlugin.set(g,Ke),Ke}throw new Error(`No event manager plugin found for event ${g}`)}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(ut),l.LFG(l.R0b))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();class kt{constructor(P){this._doc=P}addGlobalEventListener(P,g,R){const W=(0,C.q)().getGlobalEventTarget(this._doc,P);if(!W)throw new Error(`Unsupported event target ${W} for event ${g}`);return this.addEventListener(W,g,R)}}let Bt=(()=>{class b{constructor(){this._stylesSet=new Set}addStyles(g){const R=new Set;g.forEach(W=>{this._stylesSet.has(W)||(this._stylesSet.add(W),R.add(W))}),this.onStylesAdded(R)}onStylesAdded(g){}getAllStyles(){return Array.from(this._stylesSet)}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})(),hn=(()=>{class b extends Bt{constructor(g){super(),this._doc=g,this._hostNodes=new Map,this._hostNodes.set(g.head,[])}_addStylesToHost(g,R,W){g.forEach(he=>{const Ke=this._doc.createElement("style");Ke.textContent=he,W.push(R.appendChild(Ke))})}addHost(g){const R=[];this._addStylesToHost(this._stylesSet,g,R),this._hostNodes.set(g,R)}removeHost(g){const R=this._hostNodes.get(g);R&&R.forEach(Pi),this._hostNodes.delete(g)}onStylesAdded(g){this._hostNodes.forEach((R,W)=>{this._addStylesToHost(g,W,R)})}ngOnDestroy(){this._hostNodes.forEach(g=>g.forEach(Pi))}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.K0))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();function Pi(b){(0,C.q)().remove(b)}const di={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xi=/%COMP%/g;function vi(b,P,g){for(let R=0;R<P.length;R++){let W=P[R];Array.isArray(W)?vi(b,W,g):(W=W.replace(xi,b),g.push(W))}return g}function jt(b){return P=>{if("__ngUnwrap__"===P)return b;!1===b(P)&&(P.preventDefault(),P.returnValue=!1)}}let Xn=(()=>{class b{constructor(g,R,W){this.eventManager=g,this.sharedStylesHost=R,this.appId=W,this.rendererByCompId=new Map,this.defaultRenderer=new ei(g)}createRenderer(g,R){if(!g||!R)return this.defaultRenderer;switch(R.encapsulation){case l.ifc.Emulated:{let W=this.rendererByCompId.get(R.id);return W||(W=new pr(this.eventManager,this.sharedStylesHost,R,this.appId),this.rendererByCompId.set(R.id,W)),W.applyToHost(g),W}case 1:case l.ifc.ShadowDom:return new Xi(this.eventManager,this.sharedStylesHost,g,R);default:if(!this.rendererByCompId.has(R.id)){const W=vi(R.id,R.styles,[]);this.sharedStylesHost.addStyles(W),this.rendererByCompId.set(R.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(St),l.LFG(hn),l.LFG(l.AFp))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();class ei{constructor(P){this.eventManager=P,this.data=Object.create(null)}destroy(){}createElement(P,g){return g?document.createElementNS(di[g]||g,P):document.createElement(P)}createComment(P){return document.createComment(P)}createText(P){return document.createTextNode(P)}appendChild(P,g){P.appendChild(g)}insertBefore(P,g,R){P&&P.insertBefore(g,R)}removeChild(P,g){P&&P.removeChild(g)}selectRootElement(P,g){let R="string"==typeof P?document.querySelector(P):P;if(!R)throw new Error(`The selector "${P}" did not match any elements`);return g||(R.textContent=""),R}parentNode(P){return P.parentNode}nextSibling(P){return P.nextSibling}setAttribute(P,g,R,W){if(W){g=W+":"+g;const he=di[W];he?P.setAttributeNS(he,g,R):P.setAttribute(g,R)}else P.setAttribute(g,R)}removeAttribute(P,g,R){if(R){const W=di[R];W?P.removeAttributeNS(W,g):P.removeAttribute(`${R}:${g}`)}else P.removeAttribute(g)}addClass(P,g){P.classList.add(g)}removeClass(P,g){P.classList.remove(g)}setStyle(P,g,R,W){W&(l.JOm.DashCase|l.JOm.Important)?P.style.setProperty(g,R,W&l.JOm.Important?"important":""):P.style[g]=R}removeStyle(P,g,R){R&l.JOm.DashCase?P.style.removeProperty(g):P.style[g]=""}setProperty(P,g,R){P[g]=R}setValue(P,g){P.nodeValue=g}listen(P,g,R){return"string"==typeof P?this.eventManager.addGlobalEventListener(P,g,jt(R)):this.eventManager.addEventListener(P,g,jt(R))}}class pr extends ei{constructor(P,g,R,W){super(P),this.component=R;const he=vi(W+"-"+R.id,R.styles,[]);g.addStyles(he),this.contentAttr=function pi(b){return"_ngcontent-%COMP%".replace(xi,b)}(W+"-"+R.id),this.hostAttr=function _r(b){return"_nghost-%COMP%".replace(xi,b)}(W+"-"+R.id)}applyToHost(P){super.setAttribute(P,this.hostAttr,"")}createElement(P,g){const R=super.createElement(P,g);return super.setAttribute(R,this.contentAttr,""),R}}class Xi extends ei{constructor(P,g,R,W){super(P),this.sharedStylesHost=g,this.hostEl=R,this.shadowRoot=R.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const he=vi(W.id,W.styles,[]);for(let Ke=0;Ke<he.length;Ke++){const _n=document.createElement("style");_n.textContent=he[Ke],this.shadowRoot.appendChild(_n)}}nodeOrShadowRoot(P){return P===this.hostEl?this.shadowRoot:P}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(P,g){return super.appendChild(this.nodeOrShadowRoot(P),g)}insertBefore(P,g,R){return super.insertBefore(this.nodeOrShadowRoot(P),g,R)}removeChild(P,g){return super.removeChild(this.nodeOrShadowRoot(P),g)}parentNode(P){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(P)))}}let Er=(()=>{class b extends kt{constructor(g){super(g)}supports(g){return!0}addEventListener(g,R,W){return g.addEventListener(R,W,!1),()=>this.removeEventListener(g,R,W)}removeEventListener(g,R,W){return g.removeEventListener(R,W)}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.K0))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();const ss={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Gi=new l.OlP("HammerGestureConfig"),lr=new l.OlP("HammerLoader");let os=(()=>{class b{constructor(){this.events=[],this.overrides={}}buildHammer(g){const R=new Hammer(g,this.options);R.get("pinch").set({enable:!0}),R.get("rotate").set({enable:!0});for(const W in this.overrides)R.get(W).set(this.overrides[W]);return R}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})();const Te=[{provide:ut,useClass:(()=>{class b extends kt{constructor(g,R,W,he){super(g),this._config=R,this.console=W,this.loader=he,this._loaderPromise=null}supports(g){return!(!ss.hasOwnProperty(g.toLowerCase())&&!this.isCustomEvent(g)||!window.Hammer&&!this.loader)}addEventListener(g,R,W){const he=this.manager.getZone();if(R=R.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();let Ke=!1,_n=()=>{Ke=!0};return this._loaderPromise.then(()=>{window.Hammer?Ke||(_n=this.addEventListener(g,R,W)):_n=()=>{}}).catch(()=>{_n=()=>{}}),()=>{_n()}}return he.runOutsideAngular(()=>{const Ke=this._config.buildHammer(g),_n=function(dn){he.runGuarded(function(){W(dn)})};return Ke.on(R,_n),()=>{Ke.off(R,_n),"function"==typeof Ke.destroy&&Ke.destroy()}})}isCustomEvent(g){return this._config.events.indexOf(g)>-1}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.K0),l.LFG(Gi),l.LFG(l.c2e),l.LFG(lr,8))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})(),multi:!0,deps:[C.K0,Gi,l.c2e,[new l.FiY,lr]]},{provide:Gi,useClass:os,deps:[]}],de=Te;let ve=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({providers:Te}),b})();const ee=["alt","control","meta","shift"],Ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},on={alt:b=>b.altKey,control:b=>b.ctrlKey,meta:b=>b.metaKey,shift:b=>b.shiftKey};let bn=(()=>{class b extends kt{constructor(g){super(g)}supports(g){return null!=b.parseEventName(g)}addEventListener(g,R,W){const he=b.parseEventName(R),Ke=b.eventCallback(he.fullKey,W,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,C.q)().onAndCancel(g,he.domEventName,Ke))}static parseEventName(g){const R=g.toLowerCase().split("."),W=R.shift();if(0===R.length||"keydown"!==W&&"keyup"!==W)return null;const he=b._normalizeKey(R.pop());let Ke="";if(ee.forEach(dn=>{const Pr=R.indexOf(dn);Pr>-1&&(R.splice(Pr,1),Ke+=dn+".")}),Ke+=he,0!=R.length||0===he.length)return null;const _n={};return _n.domEventName=W,_n.fullKey=Ke,_n}static getEventFullKey(g){let R="",W=function wn(b){let P=b.key;if(null==P){if(P=b.keyIdentifier,null==P)return"Unidentified";P.startsWith("U+")&&(P=String.fromCharCode(parseInt(P.substring(2),16)),3===b.location&&nt.hasOwnProperty(P)&&(P=nt[P]))}return Ce[P]||P}(g);return W=W.toLowerCase()," "===W?W="space":"."===W&&(W="dot"),ee.forEach(he=>{he!=W&&on[he](g)&&(R+=he+".")}),R+=W,R}static eventCallback(g,R,W){return he=>{b.getEventFullKey(he)===g&&W.runGuarded(()=>R(he))}}static _normalizeKey(g){return"esc"===g?"escape":g}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.K0))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac}),b})(),Hn=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275prov=(0,l.Yz7)({factory:function(){return(0,l.LFG)(Nn)},token:b,providedIn:"root"}),b})(),Nn=(()=>{class b extends Hn{constructor(g){super(),this._doc=g}sanitize(g,R){if(null==R)return null;switch(g){case l.q3G.NONE:return R;case l.q3G.HTML:return(0,l.qzn)(R,"HTML")?(0,l.z3N)(R):(0,l.EiD)(this._doc,String(R)).toString();case l.q3G.STYLE:return(0,l.qzn)(R,"Style")?(0,l.z3N)(R):R;case l.q3G.SCRIPT:if((0,l.qzn)(R,"Script"))return(0,l.z3N)(R);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(R),(0,l.qzn)(R,"URL")?(0,l.z3N)(R):(0,l.mCW)(String(R));case l.q3G.RESOURCE_URL:if((0,l.qzn)(R,"ResourceURL"))return(0,l.z3N)(R);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${g} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(g){return(0,l.JVY)(g)}bypassSecurityTrustStyle(g){return(0,l.L6k)(g)}bypassSecurityTrustScript(g){return(0,l.eBb)(g)}bypassSecurityTrustUrl(g){return(0,l.LAX)(g)}bypassSecurityTrustResourceUrl(g){return(0,l.pB0)(g)}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.K0))},b.\u0275prov=(0,l.Yz7)({factory:function(){return function Ki(b){return new Nn(b.get(C.K0))}((0,l.LFG)(l.gxx))},token:b,providedIn:"root"}),b})();const as=[{provide:l.Tiy,useExisting:Hn},{provide:Hn,useClass:Nn,deps:[C.K0]}],ur=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:C.bD},{provide:l.g9A,useValue:function vo(){ke.makeCurrent(),Re.init()},multi:!0},{provide:C.K0,useFactory:function cr(){return(0,l.RDi)(document),document},deps:[]}]),Ds=[as,{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ai(){return new l.qLn},deps:[]},{provide:ut,useClass:Er,multi:!0,deps:[C.K0,l.R0b,l.Lbi]},{provide:ut,useClass:bn,multi:!0,deps:[C.K0]},de,{provide:Xn,useClass:Xn,deps:[St,hn,l.AFp]},{provide:l.FYo,useExisting:Xn},{provide:Bt,useExisting:hn},{provide:hn,useClass:hn,deps:[C.K0]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:St,useClass:St,deps:[ut,l.R0b]},{provide:C.JF,useClass:Ne,deps:[]},Ct];let Uo=(()=>{class b{constructor(g){if(g)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(g){return{ngModule:b,providers:[{provide:l.AFp,useValue:g.appId},{provide:Se,useExisting:l.AFp},ye]}}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(b,12))},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({providers:Ds,imports:[C.ez,l.hGG]}),b})();"undefined"!=typeof window&&window;var hi=Q(3075),Dt=Q(520),Kt=Q(6719);class Qn{constructor(P,g="/assets/i18n/",R=".json"){this.http=P,this.prefix=g,this.suffix=R}getTranslation(P){return this.http.get(`${this.prefix}${P}${this.suffix}`)}}var Qi=Q(4466),yi=Q(652),kn=Q(8766),ki=Q(4406),Si=Q(655),hr=Q(2916),er=Q(6688),un=Q(7043),sr=Q(4850);function Wi(b,P,g,R){return(0,un.m)(g)&&(R=g,g=void 0),R?Wi(b,P,g).pipe((0,sr.U)(W=>(0,er.k)(W)?R(...W):R(W))):new hr.y(W=>{Sr(b,P,function he(Ke){W.next(arguments.length>1?Array.prototype.slice.call(arguments):Ke)},W,g)})}function Sr(b,P,g,R,W){let he;if(function qs(b){return b&&"function"==typeof b.addEventListener&&"function"==typeof b.removeEventListener}(b)){const Ke=b;b.addEventListener(P,g,W),he=()=>Ke.removeEventListener(P,g,W)}else if(function Cr(b){return b&&"function"==typeof b.on&&"function"==typeof b.off}(b)){const Ke=b;b.on(P,g),he=()=>Ke.off(P,g)}else if(function Ci(b){return b&&"function"==typeof b.addListener&&"function"==typeof b.removeListener}(b)){const Ke=b;b.addListener(P,g),he=()=>Ke.removeListener(P,g)}else{if(!b||!b.length)throw new TypeError("Invalid event target");for(let Ke=0,_n=b.length;Ke<_n;Ke++)Sr(b[Ke],P,g,R,W)}R.add(he)}let Zi=(()=>{class b{constructor(g,R){this.viewportScroller=g,this.util=R}getScroll(g=document){const R=this.getCurrentScroll(g),W=this.getMaxScroll(g);let he=R/Math.max(W,1);return he=Math.max(he,0),he=Math.min(he,1),100*he}getScrollAsStream(g=document){let R;return R=g instanceof Document?Wi(window,"scroll").pipe((0,sr.U)(W=>this.getScroll(g))):Wi(g,"scroll").pipe((0,sr.U)(W=>this.getScroll(g))),R}getScrollBoundaries(g){const R=document.querySelector("#"+g),W=new li(0,0);return R instanceof HTMLElement&&(W.Top=R.offsetTop/document.body.offsetHeight*100,W.Bottom=(R.offsetTop+R.getBoundingClientRect().height)/document.body.offsetHeight*100),W}scrollTo(g){return(0,Si.mG)(this,void 0,void 0,function*(){return this.util.set_var("autoScrolling",!0),new Promise((R,W)=>{this.viewportScroller.scrollToAnchor(g),setTimeout(()=>{this.util.set_var("autoScrolling",!1),R(this.getScroll(document))},1e3)})})}getRelativePosition(g){return g.offsetTop/document.body.offsetHeight*100}getCurrentScroll(g){return g instanceof Document?window.pageYOffset:g.scrollTop}getMaxScroll(g){return g instanceof Document?Math.max(g.body.scrollHeight,g.body.offsetHeight,g.body.clientHeight,g.documentElement.scrollHeight,g.documentElement.offsetHeight,g.documentElement.clientHeight)-g.documentElement.clientHeight:g.scrollHeight-g.clientHeight}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(C.EM),l.LFG(kn.t))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class li{constructor(P,g){this.Top=P,this.Bottom=g}}let bs=(()=>{class b{constructor(g,R,W,he){this.elementScrollService=g,this.router=R,this.util=W,this.preferenceService=he,this.togglingNav=null,this.pageScroll=0}ngOnInit(){this.defaultRouteNames=this.getDefaultRouteNames(),this.elementScrollService.getScrollAsStream().subscribe(g=>{this.pageScroll=g,this.monitorDefaultRouteSections(g),this.lastSection=this.thisSection}),this.router.events.subscribe(g=>{g instanceof ki.m2&&(this.IsInvalidRoute="/404"===g.url,setTimeout(()=>{this.preferenceService.setMenuMode(this.isDefaultRoute?"available":"retracted")},500)),this.folded=!0}),this.scrollToCurrentRouteSection(),this.folded=!0}toggleNavFolding(){null===this.togglingNav&&(this.togglingNav=setTimeout(()=>{this.folded=!this.folded,this.togglingNav=null},0))}scrollTo(g){this.elementScrollService.scrollTo(g).then(R=>{})}clickTarget(g){g.preventDefault(),this.util.click(g.target)}getAllRoutes(){return this.router.config.filter(g=>!["**","404"].includes(g.path))}getDefaultRouteNames(){return this.getAllRoutes().find(g=>""===g.path).children.filter(g=>![""].includes(g.path)).map(g=>g.path)}get isDefaultRoute(){return this.util.stringContainsAny(this.router.url,this.defaultRouteNames)}monitorDefaultRouteSections(g){if(this.util.stringContainsAny(this.router.url,this.defaultRouteNames))for(let R=0;R<this.defaultRouteNames.length;R++){const W=this.defaultRouteNames[R],he=this.elementScrollService.getScrollBoundaries(W);g>he.Top+1&&g<he.Bottom&&-1===this.router.url.indexOf(W)&&(this.thisSection=W,this.scrollingWithin||"true"===this.util.get_var("autoScrolling")||this.router.navigateByUrl("/"+W))}this.scrollingWithin=this.thisSection===this.lastSection}scrollToCurrentRouteSection(){if(this.util.stringContainsAny(window.location.href,this.defaultRouteNames)){if(this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)===this.defaultRouteNames[0])return;window.addEventListener("load",this.handleWindowLoad),this.util.set_var("defaultSection",this.util.arrayMatchedString(this.defaultRouteNames,window.location.href)),this.util.set_var("autoScrolling",!0)}}handleWindowLoad(){window.removeEventListener("load",this.handleWindowLoad);const g=document.body.getAttribute("defaultSection");if(void 0!==g){const R=document.querySelector('[data-details="'+g+'"]');null!=R&&R.click()}}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(Zi),l.Y36(ki.F0),l.Y36(kn.t),l.Y36(yi.y))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-main-nav"]],inputs:{mode:"mode"},decls:27,vars:26,consts:[[1,"top"],[1,"nav","text-white","text-always-white"],["data-details","home","routerLink","/home","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","profile","routerLink","/profile","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","projects","routerLink","/projects","routerLinkActive","active",1,"nav-item",3,"click","tap"],[1,"nav-extender",3,"click","tap"],["data-details","contact","routerLink","/contact","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","skills","routerLink","/skills","routerLinkActive","active",1,"nav-item",3,"click","tap"],["data-details","resume","routerLink","/resume","routerLinkActive","active",1,"nav-item",3,"click","tap"],[3,"click","tap"],[1,"fa","fa-chevron-up"]],template:function(g,R){1&g&&(l.TgZ(0,"aside",0),l.TgZ(1,"ul",1),l.TgZ(2,"li",2),l.NdJ("click",function(){return R.scrollTo("home")})("tap",function(he){return R.clickTarget(he)}),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"li",3),l.NdJ("click",function(){return R.scrollTo("profile")})("tap",function(he){return R.clickTarget(he)}),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"li",4),l.NdJ("click",function(){return R.scrollTo("projects")})("tap",function(he){return R.clickTarget(he)}),l._uU(9),l.ALo(10,"translate"),l.qZA(),l.TgZ(11,"li",5),l.NdJ("click",function(){return R.toggleNavFolding()})("tap",function(he){return R.clickTarget(he)}),l.TgZ(12,"span"),l._uU(13,"\u23f7"),l.qZA(),l.TgZ(14,"span"),l._uU(15,"\u23f6"),l.qZA(),l.qZA(),l.TgZ(16,"li",6),l.NdJ("click",function(){return R.scrollTo("contact")})("tap",function(he){return R.clickTarget(he)}),l._uU(17),l.ALo(18,"translate"),l.qZA(),l.TgZ(19,"li",7),l.NdJ("click",function(){return R.scrollTo("skills")})("tap",function(he){return R.clickTarget(he)}),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.TgZ(22,"li",8),l.NdJ("click",function(){return R.scrollTo("resume")})("tap",function(he){return R.clickTarget(he)}),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.qZA(),l.TgZ(25,"div",9),l.NdJ("click",function(){return R.scrollTo("wrapper")})("tap",function(he){return R.clickTarget(he)}),l._UZ(26,"i",10),l.qZA(),l.qZA()),2&g&&(l.xp6(1),l.ekj("collapsed",!R.folded),l.xp6(2),l.hij(" ",l.lcZ(4,14,"MENU.HOME")," "),l.xp6(3),l.hij(" ",l.lcZ(7,16,"MENU.PROFILE")," "),l.xp6(3),l.hij(" ",l.lcZ(10,18,"MENU.PROJECTS")," "),l.xp6(3),l.ekj("d-none",!R.folded),l.xp6(2),l.ekj("d-none",R.folded),l.xp6(3),l.hij(" ",l.lcZ(18,20,"MENU.CONTACT")," "),l.xp6(3),l.hij(" ",l.lcZ(21,22,"MENU.SKILLS")," "),l.xp6(3),l.hij(" ",l.lcZ(24,24,"MENU.RESUME")," "),l.xp6(2),l.Tol("top-scroller"+(R.pageScroll>20?"":" hide")))},directives:[ki.rH,ki.Od],pipes:[Kt.X$],styles:[".nav[_ngcontent-%COMP%]{list-style-type:none;text-align:center;margin:0;padding:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#c8c8e14d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%], .top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{color:#fafafe!important;background-color:#575a7080;border:1px dashed #575a7080}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#9696af4d;color:#ddd}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding:0;-webkit-user-select:none;user-select:none;font-weight:700;font-size:smaller;display:flex;height:58px;justify-content:space-around;overflow:hidden}.top[_ngcontent-%COMP%]   .nav.collapsed[_ngcontent-%COMP%]{height:120px;border:1px dashed #777;border-top:0}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:block;cursor:pointer;list-style-type:none;line-height:58px;min-width:70px;max-width:calc(80px + 2vw);padding:0 2px;text-align:center}.top[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-extender[_ngcontent-%COMP%]{width:18px;line-height:58px;padding:1px;border:1px dashed #777;cursor:pointer}.top-scroller[_ngcontent-%COMP%]{background-color:#77777750;position:fixed;bottom:10px;right:24px;height:58px;width:58px;border:1px dashed #99999950;z-index:1;font-size:30px;text-align:center;vertical-align:middle;line-height:45px;color:#777;cursor:pointer}"]}),b})();var us=Q(5877);function Tr(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"span",23),l.NdJ("click",function(){return l.CHM(g),l.oxw().toggleFullscreenMode()})("tap",function(W){return l.CHM(g),l.oxw().clickTarget(W)}),l._UZ(1,"span",24),l.qZA()}if(2&b){const g=l.oxw();l.ekj("active",g.IsFullScreen)}}function j(b,P){if(1&b&&(l.TgZ(0,"span",25),l.ALo(1,"translate"),l._UZ(2,"i"),l.qZA()),2&b){const g=P.$implicit,R=l.oxw();l.Udp("display",R.preference.Language!=g.code?"none":""),l.s9C("title",l.lcZ(1,6,"LANGUAGES."+g.name)),l.xp6(2),l.Gre("flag ",g.ico,"")}}function ne(b,P){if(1&b&&(l.TgZ(0,"span",26),l.ALo(1,"translate"),l._UZ(2,"i"),l.qZA()),2&b){const g=P.$implicit,R=l.oxw();l.Udp("display",R.preference.LightMode!=g.name?"none":""),l.s9C("title",l.lcZ(1,6,"MENU."+g.desc)),l.xp6(2),l.Gre("fa ",g.ico,"")}}function ge(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"li",27),l.NdJ("click",function(){const he=l.CHM(g).$implicit;return l.oxw().setLanguage(he.code)})("tap",function(){const he=l.CHM(g).$implicit;return l.oxw().setLanguage(he.code)}),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"translate"),l.TgZ(4,"span",28),l._UZ(5,"i"),l.qZA(),l.qZA()}if(2&b){const g=P.$implicit,R=l.oxw();l.ekj("active",R.preference.Language==g.code),l.s9C("title",l.lcZ(1,7,"LANGUAGES."+g.name)),l.xp6(2),l.hij("",l.lcZ(3,9,"LANGUAGES."+g.name)," "),l.xp6(3),l.Gre("flag ",g.ico,"")}}function Fe(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"li",27),l.NdJ("click",function(){const he=l.CHM(g).$implicit;return l.oxw().setLightMode(he.name)})("tap",function(){const he=l.CHM(g).$implicit;return l.oxw().setLightMode(he.name)}),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"translate"),l.TgZ(4,"span",29),l._UZ(5,"i"),l.qZA(),l.qZA()}if(2&b){const g=P.$implicit,R=l.oxw();l.ekj("active",R.preference.LightMode==g.name),l.s9C("title",l.lcZ(1,7,"MENU."+g.desc)),l.xp6(2),l.hij(" ",l.lcZ(3,9,"MENU."+g.code)," "),l.xp6(3),l.Gre("fa ",g.ico,"")}}function dt(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"li",27),l.NdJ("click",function(){const he=l.CHM(g).$implicit;return l.oxw().setBackdropMode(he.name)})("tap",function(){const he=l.CHM(g).$implicit;return l.oxw().setBackdropMode(he.name)}),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"translate"),l.TgZ(4,"span",29),l._UZ(5,"i"),l.qZA(),l.qZA()}if(2&b){const g=P.$implicit,R=l.oxw();l.ekj("active",R.preference.BackdropMode==g.name),l.s9C("title",l.lcZ(1,7,"MENU."+g.desc)),l.xp6(2),l.hij(" ",l.lcZ(3,9,"MENU."+g.code)," "),l.xp6(3),l.Gre("fa ",g.ico,"")}}function Ut(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"button",30),l.NdJ("click",function(){return l.CHM(g),l.oxw().toggleBackdropMode()}),l._uU(1,"BackdropMode!"),l.qZA()}}let Bn=(()=>{class b{constructor(g,R){this.preferenceService=g,this.util=R,this.IsDrawn=!1,this.IsFullScreen=!1,this.backdropModes=us.E2,this.languages=us.a2,this.lightModes=us.DZ}ngOnInit(){this.preference=this.preferenceService.getPreference()}toggleDrawer(){!0===this.IsDrawn?this.drawerPull():this.drawerPush()}toggleFullscreenMode(){const g=window.document,R=g.documentElement;var W=R.requestFullscreen;g.fullscreenElement?(g.exitFullscreen.call(g).then().catch(Ke=>console.log(Ke)),this.IsFullScreen=!1):(W.call(R).then().catch(Ke=>console.log(Ke)),this.IsFullScreen=!0)}drawerPull(){this.IsDrawn=!0}drawerPush(){this.IsDrawn=!1}setLightMode(g){this.preferenceService.setLightMode(g)}toggleLightMode(){this.preferenceService.toggleLightMode()}setLanguage(g){this.preferenceService.setLanguage(g)}toggleLanguages(){this.preferenceService.toggleLanguages()}setBackdropMode(g){this.preferenceService.setBackdropMode(g)}toggleBackdropMode(){this.preferenceService.toggleBackdropMode()}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(yi.y),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-preference-menu"]],decls:41,vars:23,consts:[[1,"menu-drawer","top",3,"panRight"],[1,"drawer-backdrop","show-drawn",3,"click","tap"],[1,"text-center","text-white","text-always-white","drawer-header"],[1,"drawer-header-inner"],["class","toggle-fullscreen hide-drawn",3,"active","click","tap",4,"ngIf"],[1,"d-none","d-sm-block","drawer-opener","hide-drawn",3,"click","tap"],[1,"d-flex","justify-content-around","drawer-toggle-inner","hide-drawn"],["class","hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["class","text-glow hide-drawn",3,"display","title",4,"ngFor","ngForOf"],["title","Preference",1,"hide-drawn"],[1,"fa","fa-bars"],["title","close menu",1,"show-drawn","drawer-closer",3,"click","tap"],[1,"fa","fa-close"],[1,"d-sm-none","drawer-handle","text-glow",3,"panLeft"],[1,"fa","fa-chevron-left"],[1,"menu","py-2","list-block","text-white","text-always-white"],[1,"menu-item","list-item","my-1","py-2"],[1,"list-inline","py-2"],[3,"title","active","click","tap",4,"ngFor","ngForOf"],["title","Toggle Fullscreen",1,"text-center",3,"click","tap"],[1,"text-glow","mx-2",2,"height","30px","font-size","2em"],[1,"fa"],["style","width:150px;height:30px;background-color:orange;position:fixed;top:100px;left:100px;",3,"click",4,"ngIf"],[1,"toggle-fullscreen","hide-drawn",3,"click","tap"],[1,"fa","fa-compress"],[1,"hide-drawn",3,"title"],[1,"text-glow","hide-drawn",3,"title"],[3,"title","click","tap"],[1,"float-right","mx-2"],[1,"float-right","text-glow","mx-2"],[2,"width","150px","height","30px","background-color","orange","position","fixed","top","100px","left","100px",3,"click"]],template:function(g,R){1&g&&(l.TgZ(0,"aside",0),l.NdJ("panRight",function(){return R.drawerPush()}),l.TgZ(1,"div",1),l.NdJ("click",function(){return R.drawerPush()})("tap",function(){return R.drawerPush()}),l.qZA(),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.YNc(4,Tr,2,2,"span",4),l.TgZ(5,"div",5),l.NdJ("click",function(){return R.drawerPull()})("tap",function(){return R.drawerPull()}),l.TgZ(6,"div",6),l.YNc(7,j,3,8,"span",7),l.YNc(8,ne,3,8,"span",8),l.TgZ(9,"span",9),l._UZ(10,"i",10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"span",11),l.NdJ("click",function(){return R.drawerPush()})("tap",function(){return R.drawerPush()}),l._UZ(12,"i",12),l.qZA(),l.TgZ(13,"div",13),l.NdJ("panLeft",function(){return R.drawerPull()}),l._UZ(14,"i",14),l.qZA(),l.qZA(),l.TgZ(15,"h3"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.qZA(),l.TgZ(18,"ul",15),l.TgZ(19,"li",16),l._uU(20),l.ALo(21,"translate"),l.TgZ(22,"ul",17),l.YNc(23,ge,6,11,"li",18),l.qZA(),l.qZA(),l.TgZ(24,"li",16),l._uU(25),l.ALo(26,"translate"),l.TgZ(27,"ul",17),l.YNc(28,Fe,6,11,"li",18),l.qZA(),l.qZA(),l.TgZ(29,"li",16),l._uU(30),l.ALo(31,"translate"),l.TgZ(32,"ul",17),l.YNc(33,dt,6,11,"li",18),l.qZA(),l.qZA(),l.TgZ(34,"li",16),l._uU(35," Toggle Fullscreen "),l.TgZ(36,"ul",17),l.TgZ(37,"li",19),l.NdJ("click",function(){return R.toggleFullscreenMode()})("tap",function(he){return R.clickTarget(he)}),l.TgZ(38,"span",20),l._UZ(39,"i",21),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(40,Ut,2,0,"button",22),l.qZA()),2&g&&(l.uIk("drawn",R.IsDrawn)("light-mode",R.preference.LightMode),l.xp6(4),l.Q6J("ngIf",R.IsFullScreen),l.xp6(3),l.Q6J("ngForOf",R.languages),l.xp6(1),l.Q6J("ngForOf",R.lightModes),l.xp6(8),l.Oqu(l.lcZ(17,15,"MENU.PREFERENCE")),l.xp6(4),l.hij(" ",l.lcZ(21,17,"MENU.LANGUAGE")," "),l.xp6(3),l.Q6J("ngForOf",R.languages),l.xp6(2),l.hij(" ",l.lcZ(26,19,"MENU.LIGHTINGMODE")," "),l.xp6(3),l.Q6J("ngForOf",R.lightModes),l.xp6(2),l.hij(" ",l.lcZ(31,21,"MENU.BACKDROPMODE")," "),l.xp6(3),l.Q6J("ngForOf",R.backdropModes),l.xp6(6),l.Tol(R.IsFullScreen?"fa-compress":"fa-expand"),l.xp6(1),l.Q6J("ngIf",!1))},directives:[C.O5,C.sg],pipes:[Kt.X$],styles:['.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:4px 4px 4px 10px;transition:all .2s ease}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#448}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#3f355f8e}.menu-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:before{content:" ";display:inline-block;width:4px;height:4px}[light-mode=dark][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#1a1a1a}[light-mode=bright][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#272770}[light-mode][_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:hover{background-color:#3a335a}.menu-item[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{content:" ";display:inline-block;width:10px;height:10px;background-color:#afc8fff2;border-radius:50%;margin-right:10px;box-shadow:1px 1px 2px #777}.menu[_ngcontent-%COMP%]{list-style-type:none;padding-left:10px}.menu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:not(:first){border-top:1px dashed #77777780}.menu-drawer[_ngcontent-%COMP%]{width:320px;height:100vh;padding:8px;margin-right:-320px;transition:margin .2s ease}[light-mode=dark].menu-drawer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].menu-drawer[_ngcontent-%COMP%]{background-color:#203070}[drawn=true].menu-drawer[_ngcontent-%COMP%]{margin-right:0}.drawer-handle[_ngcontent-%COMP%]{position:absolute;left:-25px;top:75px;width:15px;border-top-left-radius:4px;border-bottom-left-radius:4px}[light-mode=dark][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#202020}[light-mode=bright][_ngcontent-%COMP%]   .drawer-handle[_ngcontent-%COMP%]{background-color:#203070}.drawer-opener[_ngcontent-%COMP%]{position:absolute;left:-150px;width:125px;transition:background-color .2s ease;cursor:pointer}[drawn=true][_ngcontent-%COMP%]   .drawer-closer[_ngcontent-%COMP%]{position:absolute;cursor:pointer;left:10px;width:40px;height:40px;line-height:40px;background-color:#80808066}[drawn=true][_ngcontent-%COMP%]   .hide-drawn[_ngcontent-%COMP%], .show-drawn[_ngcontent-%COMP%]{display:none}[drawn=true][_ngcontent-%COMP%]   .show-drawn[_ngcontent-%COMP%]{display:initial}[light-mode=dark][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f2f2f}[light-mode=bright][_ngcontent-%COMP%]   .drawer-opener[_ngcontent-%COMP%]:hover{background-color:#2f3f7f}.drawer-toggle-inner[_ngcontent-%COMP%]{width:100%}.drawer-header[_ngcontent-%COMP%]{line-height:50px;padding:5px;border:1px dashed #777777;z-index:100}.drawer-header-inner[_ngcontent-%COMP%]{position:relative}[drawn=true][_ngcontent-%COMP%]   .drawer-backdrop[_ngcontent-%COMP%]{background-color:#0000004d;position:fixed;top:0px;left:0px;width:100%;height:100vh;z-index:-1}.toggle-fullscreen[_ngcontent-%COMP%]{position:absolute;right:450px;padding:0 15px;cursor:pointer}.toggle-fullscreen.active[_ngcontent-%COMP%]{animation:highlight 1s ease;animation-iteration-count:5}.toggle-fullscreen[_ngcontent-%COMP%]:hover{background-color:#99772231}@keyframes highlight{0%{background-color:#99772231}50%{background-color:#bb9a22a6}to{background-color:#99772231}}']}),b})();function Ti(b,P){if(1&b&&l._UZ(0,"app-main-nav",9),2&b){const g=l.oxw();l.Tol(g.preference.LightMode+"-mode"),l.Q6J("mode","top")}}let gi=(()=>{class b{constructor(g,R){this.preferenceService=g,this.util=R,this.title="Victor Fortman",this.fullCard=!0,this.doorsClosed=!0,this.foreground=document.querySelector("#foreground"),this.toggleCard=function(){this.fullCard=!this.fullCard},this.toggleForeground=function(W){this.doorsClosed=!this.doorsClosed,this.foreground.className=this.doorsClosed||W?"door-opened":"door-closed"},this.init=function(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(W=>{this.preference=W})}}ngOnInit(){this.init()}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(yi.y),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-root"]],decls:12,vars:4,consts:[["id","wrapper",1,"pt-5"],["role","header","aria-roledescription","header"],[1,"header-content"],["role","icon",1,"d-sm-inline-block"],["src","../assets/ico/VF_ICO128.ico","alt","Victor Fortman"],[1,"top-nav"],[3,"class","mode",4,"ngIf"],["role","preference-menu"],["role","body"],[3,"mode"]],template:function(g,R){1&g&&(l.TgZ(0,"div"),l.TgZ(1,"div",0),l.TgZ(2,"header",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l._UZ(5,"img",4),l.qZA(),l.TgZ(6,"nav",5),l.YNc(7,Ti,1,3,"app-main-nav",6),l.qZA(),l.qZA(),l.TgZ(8,"div",7),l._UZ(9,"app-preference-menu"),l.qZA(),l.qZA(),l.TgZ(10,"div",8),l._UZ(11,"router-outlet"),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.xp6(1),l.uIk("backdrop-mode",R.preference.BackdropMode)("menu-mode",R.preference.MenuMode),l.xp6(1),l.uIk("light-mode",R.preference.LightMode),l.xp6(5),l.Q6J("ngIf",!0))},directives:[C.O5,bs,Bn,ki.lC],styles:["[role=header][_ngcontent-%COMP%]{position:fixed;top:0px;left:0px;height:75px;width:100%;padding:8px;z-index:900;transition:all 1s ease}[role=header][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=header][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}[role=header][_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{border:1px dashed #777777;height:60px}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]{height:58px;width:58px;text-align:center;line-height:58px;vertical-align:middle}[role=header][_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block}.top-nav[_ngcontent-%COMP%]{max-width:320px;display:inline-block}[role=preference-menu][_ngcontent-%COMP%]{position:fixed;right:0px;top:0px}[menu-mode=retracted][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%], [backdrop-mode=interactive][_ngcontent-%COMP%]   [role=header][_ngcontent-%COMP%]{margin-top:-80px}[backdrop-mode=interactive][_ngcontent-%COMP%]   [role=body][_ngcontent-%COMP%]{display:none}"]}),b})();Q(8929),Q(1086);var Ho=Q(6686),Za=Q(2268);new class ja extends Za.v{flush(P){this.active=!0,this.scheduled=void 0;const{actions:g}=this;let R,W=-1,he=g.length;P=P||g.shift();do{if(R=P.execute(P.state,P.delay))break}while(++W<he&&(P=g.shift()));if(this.active=!1,R){for(;++W<he&&(P=g.shift());)P.unsubscribe();throw R}}}(class Wa extends Ho.o{constructor(P,g){super(P,g),this.scheduler=P,this.work=g}requestAsyncId(P,g,R=0){return null!==R&&R>0?super.requestAsyncId(P,g,R):(P.actions.push(this),P.scheduled||(P.scheduled=requestAnimationFrame(()=>P.flush(null))))}recycleAsyncId(P,g,R=0){if(null!==R&&R>0||null===R&&this.delay>0)return super.recycleAsyncId(P,g,R);0===P.actions.length&&(cancelAnimationFrame(g),P.scheduled=void 0)}});let xa=1;const zo=Promise.resolve(),qa={};function ea(b){return b in qa&&(delete qa[b],!0)}const Bs={setImmediate(b){const P=xa++;return qa[P]=!0,zo.then(()=>ea(P)&&b()),P},clearImmediate(b){ea(b)}};new class $s extends Za.v{flush(P){this.active=!0,this.scheduled=void 0;const{actions:g}=this;let R,W=-1,he=g.length;P=P||g.shift();do{if(R=P.execute(P.state,P.delay))break}while(++W<he&&(P=g.shift()));if(this.active=!1,R){for(;++W<he&&(P=g.shift());)P.unsubscribe();throw R}}}(class Gr extends Ho.o{constructor(P,g){super(P,g),this.scheduler=P,this.work=g}requestAsyncId(P,g,R=0){return null!==R&&R>0?super.requestAsyncId(P,g,R):(P.actions.push(this),P.scheduled||(P.scheduled=Bs.setImmediate(P.flush.bind(P,null))))}recycleAsyncId(P,g,R=0){if(null!==R&&R>0||null===R&&this.delay>0)return super.recycleAsyncId(P,g,R);0===P.actions.length&&(Bs.clearImmediate(g),P.scheduled=void 0)}});let Tt;Q(2654),new Za.v(Ho.o),Q(826),Q(9054),Q(2866),Q(2198),Q(1059);try{Tt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(b){Tt=!1}let Vi=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({}),b})(),Go=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({}),b})(),re=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({}),b})(),Hs=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({imports:[[Go,Vi,re],Go,re]}),b})();Q(6053),Q(1221),Q(2986),Q(3489);let Sa=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({}),b})();Q(5254),Q(591),Q(2994),Q(1709);let Do=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({imports:[[Hs]]}),b})(),Xa=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({imports:[[C.ez,Hs,Sa,Go,Do],Do]}),b})(),_i=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-home"]],inputs:{LightMode:"LightMode"},decls:8,vars:7,consts:[[1,"container-fluid","d-flex","justify-content-center","text-center","introduction"],[1,"text-white","text-always-white","introduction-text","text-on-glass"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h1"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"h2"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(3),l.Oqu(l.lcZ(4,3,"GREETINGS.HI")),l.xp6(3),l.Oqu(l.lcZ(7,5,"INTRO.WHOAMI")))},pipes:[Kt.X$],styles:[".introduction[_ngcontent-%COMP%]{padding-top:75px;height:calc(100vh - 125px)}.introduction-text[_ngcontent-%COMP%]{margin-top:calc(25vh - 50px)}.introduction-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:calc(1vw + 60px);font-weight:700}.introduction-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:calc(1vw + 36px);font-weight:600}"]}),b})();const Ws=[{linkID:1,mediaName:"LinkedIn",mediaURI:"https://linkedin.com",profileName:"Victor Fortman",profileURI:"https://linkedin.com/in/hugovicfortman",fontAwesomeIcon:"fa-linkedin-square"},{linkID:2,mediaName:"Github",mediaURI:"https://github.com",profileName:"Victor Fortman",profileURI:"https://github.com/hugovicfortman",fontAwesomeIcon:"fa-github-square"},{linkID:2,mediaName:"Telegram",mediaURI:"https://telegram.org/",profileName:"Victor Fortman",profileURI:"https://t.me/hugovicfortman",fontAwesomeIcon:"fa-telegram-square"}];let Po=(()=>{class b{constructor(){}getAllLinks(){return Ws}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function T(b,P){if(1&b){const g=l.EpF();l.TgZ(0,"span",2),l.TgZ(1,"a",3),l.NdJ("tap",function(W){return l.CHM(g),l.oxw().clickTarget(W)}),l._UZ(2,"i"),l.qZA(),l.qZA()}if(2&b){const g=P.$implicit;l.xp6(1),l.s9C("href",g.profileURI,l.LSH),l.s9C("title",g.mediaName),l.xp6(1),l.Gre("fa ",g.fontAwesomeIcon,"")}}let x=(()=>{class b{constructor(g,R){this.socialLinksService=g,this.util=R}ngOnInit(){this.getAllSocialLinks()}getAllSocialLinks(){this.socialLinks=this.socialLinksService.getAllLinks()}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(Po),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-social-links"]],decls:2,vars:1,consts:[[1,"social-bridge"],["class","social-links",4,"ngFor","ngForOf"],[1,"social-links"],["rel","noreferrer noopener","target","_blank",3,"href","title","tap"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.YNc(1,T,3,5,"span",1),l.qZA()),2&g&&(l.xp6(1),l.Q6J("ngForOf",R.socialLinks))},directives:[C.sg],styles:[".social-bridge[_ngcontent-%COMP%]{width:100%;margin:0 -15px;height:3em;line-height:3em}.social-links[_ngcontent-%COMP%]{display:inline-block;margin:15px;font-size:1.5em;animation:float 11s ease infinite}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;border-radius:4px;padding:0 2.5px;cursor:pointer;color:#bbb;transition:color .3s ease font-size .3 ease}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#777;font-weight:700}"]}),b})(),_=(()=>{class b{constructor(g,R){this.elementScrollService=g,this.util=R}ngOnInit(){}scrollTo(g){this.elementScrollService.scrollTo(g)}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(Zi),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-about"]],inputs:{LightMode:"LightMode"},decls:47,vars:28,consts:[[1,"container-fluid","text-white","pt-2","px-2","paper-section-wrap-outer","paper-top"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"col-lg-4","text-justify"],[1,"mb-2","d-flex","align-items-center","justify-content-center",2,"height","200px"],[1,"profile-image"],[1,"profile-image-inner"],[1,"small"],[1,"fa","fa-globe"],[1,"col-lg-7","text-justify","pt-5"],[1,"text-center","pt-4"],["type","button","routerLink","/resume",1,"btn","btn-default","mx-2",3,"click","tap"],[1,"col-lg-1","text-center","lh-200"],[1,"text-center"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"blockquote"),l._uU(8),l.ALo(9,"translate"),l._UZ(10,"br"),l.TgZ(11,"small"),l._uU(12),l.ALo(13,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",2),l.TgZ(15,"div",4),l.TgZ(16,"div",5),l.TgZ(17,"div",2),l.TgZ(18,"div",6),l.TgZ(19,"div",7),l.TgZ(20,"div",8),l._UZ(21,"div",9),l.qZA(),l.qZA(),l.TgZ(22,"dl"),l.TgZ(23,"dt",10),l._uU(24),l.ALo(25,"translate"),l.qZA(),l.TgZ(26,"dd"),l._uU(27),l.ALo(28,"translate"),l.qZA(),l.TgZ(29,"dt",10),l._uU(30),l.ALo(31,"translate"),l.qZA(),l.TgZ(32,"dd"),l._uU(33),l.ALo(34,"translate"),l._UZ(35,"i",11),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"div",12),l.TgZ(37,"p"),l._uU(38),l.ALo(39,"translate"),l.qZA(),l.TgZ(40,"div",13),l.TgZ(41,"button",14),l.NdJ("click",function(){return R.scrollTo("resume")})("tap",function(he){return R.clickTarget(he)}),l._uU(42),l.ALo(43,"translate"),l.qZA(),l.qZA(),l.qZA(),l._UZ(44,"div",15),l.qZA(),l.TgZ(45,"div",16),l._UZ(46,"app-social-links"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(5),l.Oqu(l.lcZ(6,10,"PAGES.PROFILE.HEADER")),l.xp6(3),l.hij(' "',l.lcZ(9,12,"PAGES.PROFILE.QUOTE.TEXT"),'" '),l.xp6(4),l.hij("- ",l.lcZ(13,14,"PAGES.PROFILE.QUOTE.AUTHOR"),""),l.xp6(12),l.hij("",l.lcZ(25,16,"PAGES.PROFILE.SPECS.CONTENT.NAMEKEY"),":"),l.xp6(3),l.Oqu(l.lcZ(28,18,"PAGES.PROFILE.SPECS.CONTENT.NAMEVALUE")),l.xp6(3),l.hij("",l.lcZ(31,20,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONKEY"),":"),l.xp6(3),l.hij("",l.lcZ(34,22,"PAGES.PROFILE.SPECS.CONTENT.LOCATIONVALUE")," "),l.xp6(5),l.Oqu(l.lcZ(39,24,"PAGES.PROFILE.ABOUT.CONTENT")),l.xp6(4),l.Oqu(l.lcZ(43,26,"PAGES.PROFILE.ACTIONS.VIEWRESUME")))},directives:[ki.rH,x],pipes:[Kt.X$],styles:[".lh-200[_ngcontent-%COMP%]{line-height:200px}.profile-image[_ngcontent-%COMP%]{padding:10px;background-color:#7d7d7d80;width:180px;height:180px;overflow:hidden;border-radius:50%;display:inline-block;vertical-align:middle}.profile-image-inner[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:50%;background-image:url(red_hoodie.c377c6db48866e10.svg);background-size:contain}[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#ddd}"]}),b})();function F(b,P){if(1&b&&(l.TgZ(0,"a",17),l.ALo(1,"translate"),l._uU(2),l.ALo(3,"translate"),l.qZA()),2&b){const g=l.oxw().$implicit;l.s9C("href",l.lcZ(1,2,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".LIVE"),l.LSH),l.xp6(2),l.Oqu(l.lcZ(3,4,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWLIVE"))}}function z(b,P){if(1&b&&(l.TgZ(0,"div",10),l._UZ(1,"img",11),l.ALo(2,"translate"),l.ALo(3,"translate"),l.TgZ(4,"div",12),l.TgZ(5,"aside"),l.TgZ(6,"h3"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",13),l.TgZ(10,"article"),l.TgZ(11,"h3"),l._uU(12),l.ALo(13,"translate"),l.qZA(),l.TgZ(14,"p"),l._uU(15),l.ALo(16,"translate"),l.qZA(),l.TgZ(17,"div",14),l.YNc(18,F,4,6,"a",15),l.ALo(19,"translate"),l.TgZ(20,"a",16),l.ALo(21,"translate"),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&b){const g=P.$implicit;l.xp6(1),l.s9C("src",l.lcZ(2,8,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".IMAGE"),l.LSH),l.s9C("alt",l.lcZ(3,10,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".TITLE")),l.xp6(6),l.Oqu(l.lcZ(8,12,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".TITLE")),l.xp6(5),l.Oqu(l.lcZ(13,14,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".TITLE")),l.xp6(3),l.hij(" ",l.lcZ(16,16,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".DESCRIPTION")," "),l.xp6(3),l.Q6J("ngIf",1==l.lcZ(19,18,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".ISLIVE")),l.xp6(2),l.s9C("href",l.lcZ(21,20,"PAGES.FEATUREDPROJECTS.CONTENT.PROJECTS."+g+".SOURCE"),l.LSH),l.xp6(2),l.Oqu(l.lcZ(23,22,"PAGES.FEATUREDPROJECTS.CONTENT.ACTIONS.VIEWSOURCE"))}}function J(b,P){if(1&b&&(l.TgZ(0,"div",2),l.TgZ(1,"div",18),l.TgZ(2,"h3"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"div",2),l.TgZ(6,"div",19),l.TgZ(7,"p"),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",20),l._UZ(11,"img",21),l.ALo(12,"translate"),l.ALo(13,"translate"),l._UZ(14,"br"),l.TgZ(15,"p",22),l.TgZ(16,"a",23),l.ALo(17,"translate"),l._uU(18,"Google Developer Profile"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&b){const g=P.$implicit;l.xp6(3),l.Oqu(l.lcZ(4,5,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".TITLE")),l.xp6(5),l.Oqu(l.lcZ(9,7,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".DESCRIPTION")),l.xp6(3),l.s9C("src",l.lcZ(12,9,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".IMAGE"),l.LSH),l.s9C("alt",l.lcZ(13,11,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".TITLE")),l.xp6(5),l.s9C("href",l.lcZ(17,13,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING.SUBJECT."+g+".GDP"),l.LSH)}}const ue=function(){return[0,1,2,3]},we=function(){return[0]};let Ve=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-featured-projects"]],inputs:{LightMode:"LightMode"},decls:21,vars:14,consts:[[1,"container-fluid","text-always-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"text-on-glass"],[1,"foldable"],[1,"col-lg-12","py-3","d-flex","project-card-holder"],["class","mb-2 project-card",4,"ngFor","ngForOf"],[1,"text-center","mt-2"],["class","row",4,"ngFor","ngForOf"],[1,"mb-2","project-card"],[1,"img","project-img",3,"src","alt"],[1,"project-nametag"],[1,"project-description"],[1,"text-center","mt-1","px-3"],["target","_blank","referrerpolicy","no-referrer","class","btn btn-default btn-block",3,"href",4,"ngIf"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-primary","btn-block",3,"href"],["target","_blank","referrerpolicy","no-referrer",1,"btn","btn-default","btn-block",3,"href"],[1,"col-md-6","text-center","my-4"],[1,"col-md-8","offset-md-2","d-flex","align-items-center"],[1,"col-md-6","text-center","my-5","py-5"],["height","128","width","128",3,"src","alt"],[1,"mt-3"],[3,"href"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2",4),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"div",2),l.TgZ(9,"div",6),l.YNc(10,z,24,24,"div",7),l.qZA(),l.qZA(),l.TgZ(11,"div",8),l.TgZ(12,"small",4),l._uU(13),l.ALo(14,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",2),l.TgZ(16,"div",3),l.TgZ(17,"h2",4),l._uU(18),l.ALo(19,"translate"),l.qZA(),l.qZA(),l.qZA(),l.YNc(20,J,19,15,"div",9),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(5),l.Oqu(l.lcZ(6,6,"PAGES.FEATUREDPROJECTS.HEADER")),l.xp6(5),l.Q6J("ngForOf",l.DdM(12,ue)),l.xp6(3),l.Oqu(l.lcZ(14,8,"PAGES.FEATUREDPROJECTS.CONTENT.THISWEBSITE")),l.xp6(5),l.Oqu(l.lcZ(19,10,"PAGES.FEATUREDPROJECTS.CONTENT.LEARNING")),l.xp6(2),l.Q6J("ngForOf",l.DdM(13,we)))},directives:[C.sg,C.O5],pipes:[Kt.X$],styles:['[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%], [light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#14141433}.paper-section-wrap-outer[_ngcontent-%COMP%]:before{content:" ";display:block;height:500%;position:absolute;left:0px;right:0px;z-index:-1;background-image:url(light-inside-library.89bfc4d14f742839.jpg);background-attachment:fixed}.project-card-holder[_ngcontent-%COMP%]{justify-content:space-around;flex-wrap:wrap}.project-card[_ngcontent-%COMP%]{background-color:#2d3d77;height:235px;width:235px;box-shadow:2px 2px 4px #222;margin:auto;position:relative}.project-card[_ngcontent-%COMP%]:hover{box-shadow:4px 1px 16px #000}.project-card[_ngcontent-%COMP%]:not(:hover)   .project-description[_ngcontent-%COMP%], .project-card[_ngcontent-%COMP%]:hover   .project-nametag[_ngcontent-%COMP%]{opacity:0}.project-img[_ngcontent-%COMP%]{height:235px;width:235px}.project-description[_ngcontent-%COMP%], .project-nametag[_ngcontent-%COMP%]{position:absolute;top:0%;height:100%;width:100%;transition:opacity .3s ease}.project-nametag[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{height:100%;width:100%;padding:15px;display:flex;justify-content:center;align-items:center;background:radial-gradient(circle,rgba(0,0,0,0) 0%,rgba(0,0,0,.75) 100%)}.project-description[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#141414e6;padding:15px}']}),b})(),Jt=(()=>{class b{constructor(g){this.util=g}ngOnInit(){}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-contact"]],inputs:{LightMode:"LightMode"},decls:48,vars:10,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"container"],[1,"row","py-3"],[1,"col-md-6","text-left"],[1,"p-3"],[1,"list-unstyled"],[1,"my-3"],["href","https://www.linkedin.com/in/hugovicfortman","rel","noreferrer noopener","target","_blank","title","LinkedIn",3,"tap"],[1,"text-left","media-banner","d-inline-block","mr-3"],[1,"fa","fa-linkedin","float-right"],[1,"media-username","d-inline-block"],["href","https://twitter.com/hugovicfortman","rel","noreferrer noopener","target","_blank","title","Twitter",3,"tap"],[1,"fa","fa-twitter","float-right"],[1,"fa","fa-skype","float-right"],[1,"col-md-6","text-center"],[1,"media-block","mt-5"],["href","https://t.me/hugovicfortman","rel","noreferrer noopener","target","_blank","title","Telegram"],[1,"telegram-button","p-3"],[1,"m-4"],[1,"fa","fa-telegram"],[1,"p-2","m-2"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",4),l.TgZ(8,"div",2),l.TgZ(9,"div",5),l.TgZ(10,"div",6),l.TgZ(11,"div",7),l.TgZ(12,"div",8),l.TgZ(13,"div",9),l.TgZ(14,"h3"),l._uU(15),l.ALo(16,"translate"),l.qZA(),l.TgZ(17,"div"),l.TgZ(18,"ul",10),l.TgZ(19,"li",11),l.TgZ(20,"a",12),l.NdJ("tap",function(he){return R.clickTarget(he)}),l.TgZ(21,"span",13),l._uU(22,"LinkedIn"),l._UZ(23,"i",14),l.qZA(),l.qZA(),l.TgZ(24,"span",15),l._uU(25," hugovicfortman"),l.qZA(),l.qZA(),l.TgZ(26,"li",11),l.TgZ(27,"a",16),l.NdJ("tap",function(he){return R.clickTarget(he)}),l.TgZ(28,"span",13),l._uU(29,"Twitter"),l._UZ(30,"i",17),l.qZA(),l.qZA(),l.TgZ(31,"span",15),l._uU(32,"@hugovicfortman"),l.qZA(),l.qZA(),l.TgZ(33,"li",11),l.TgZ(34,"span",13),l._uU(35,"Skype"),l._UZ(36,"i",18),l.qZA(),l.TgZ(37,"span",15),l._uU(38," hugovicfortman"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(39,"div",19),l.TgZ(40,"div",20),l.TgZ(41,"a",21),l.TgZ(42,"div",22),l.TgZ(43,"span",23),l._UZ(44,"i",24),l.qZA(),l.TgZ(45,"h3",25),l._uU(46),l.ALo(47,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(5),l.Oqu(l.lcZ(6,4,"PAGES.CONTACT.HEADER")),l.xp6(10),l.Oqu(l.lcZ(16,6,"PAGES.CONTACT.GETCONNECTED")),l.xp6(31),l.Oqu(l.lcZ(47,8,"PAGES.CONTACT.REACHOUT")))},pipes:[Kt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}.media-banner[_ngcontent-%COMP%]{width:100px;background-color:#2d3d77;line-height:1.2rem;padding:5px 10px;color:#cfcfcf}.media-username[_ngcontent-%COMP%]{width:200px;padding:5px}.telegram-button[_ngcontent-%COMP%]{background-color:#2d3d77;vertical-align:center;color:#cfcfcf}.media-block[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem}.media-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important}"]}),b})();function Sn(b,P){if(1&b&&(l.TgZ(0,"span",2),l._UZ(1,"i"),l.qZA()),2&b){const g=P.$implicit,R=l.oxw();l.xp6(1),l.Tol(R.myClass+(g>R.score?" "+R.offClass:""))}}let rn=(()=>{class b{constructor(g){this.util=g,this.IconClasses={star:"star"},this.DefaultMax=5,this.DefaultScore=0,this.myClass="fa fa-@type",this.offClass="text-dark"}ngOnInit(){this.myClass=this.myClass.replace("@type",()=>((null==this.type||void 0===this.type)&&(this.type="star"),void 0!==this.IconClasses[this.type]?this.IconClasses[this.type]:this.IconClasses.star)),this.setRating()}setRating(){(null==this.max||void 0===this.max)&&(this.max=this.DefaultMax),(null==this.score||void 0===this.score)&&(this.score=this.DefaultScore),this.score>this.max?this.score=this.max:this.score<0&&(this.score=0),this.Hits=this.util.range(this.max)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-rating"]],inputs:{type:"type",mode:"mode",max:"max",score:"score"},decls:2,vars:1,consts:[[1,"float-right","d-flex","justify-content-around","app-rating"],["class","d-inline-block",4,"ngFor","ngForOf"],[1,"d-inline-block"]],template:function(g,R){1&g&&(l.TgZ(0,"em",0),l.YNc(1,Sn,2,2,"span",1),l.qZA()),2&g&&(l.xp6(1),l.Q6J("ngForOf",R.Hits))},directives:[C.sg],styles:[".app-rating[_ngcontent-%COMP%]{min-width:100px}"]}),b})(),yn=(()=>{class b{constructor(){this.skills=[{name:"HTML(5)",max:5,score:5},{name:"CSS(3)",max:5,score:5},{name:"JavaScript",max:5,score:5},{name:"C#",max:5,score:5},{name:"VB",max:5,score:5},{name:"Python",max:5,score:4},{name:"Angular",max:5,score:5},{name:"SCSS",max:5,score:4},{name:"Dart",max:5,score:4},{name:"C++",max:5,score:3},{name:"React",max:5,score:2},{name:"Rust",max:5,score:1}]}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-skills"]],inputs:{LightMode:"LightMode"},decls:139,vars:38,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-md-6"],[1,"skills-deck"],[1,"skills-stack"],[1,"language-stack","stack"],[1,"stack-item"],[1,"framework-stack","stack"],[1,"tool-stack","stack"],[1,"col-md-5"],[3,"type","max","score","mode"],[1,"d-block"],[1,"col-md-5","offset-md-1"],["aria-hidden","true",1,"fa","fa-institution"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",2),l.TgZ(8,"div",4),l.TgZ(9,"h3",5),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"div",6),l.TgZ(13,"div",7),l.TgZ(14,"div",8),l.TgZ(15,"div",9),l.TgZ(16,"ul"),l.TgZ(17,"li"),l._uU(18,"Business Intelligence"),l.qZA(),l.TgZ(19,"li"),l._uU(20,"Full Stack Web Development "),l.TgZ(21,"ul"),l.TgZ(22,"li"),l._uU(23,"Front End Development"),l.qZA(),l.TgZ(24,"li"),l._uU(25,"API Development"),l.qZA(),l.TgZ(26,"li"),l._uU(27,"Back End Development"),l.qZA(),l.TgZ(28,"li"),l._uU(29,"Database Development"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"li"),l._uU(31,"UI and Graphics Design"),l.qZA(),l.TgZ(32,"li"),l._uU(33,"Mobile Development"),l.qZA(),l.TgZ(34,"li"),l._uU(35,"RPA Development"),l.qZA(),l.TgZ(36,"li"),l._uU(37,"Version Control"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"div",8),l.TgZ(39,"div",10),l.TgZ(40,"div",11),l.TgZ(41,"span",12),l._uU(42,"C#"),l.qZA(),l.TgZ(43,"span",12),l._uU(44,"CSS3"),l.qZA(),l.TgZ(45,"span",12),l._uU(46,"Dart"),l.qZA(),l.TgZ(47,"span",12),l._uU(48,"HTML5"),l.qZA(),l.TgZ(49,"span",12),l._uU(50,"JavaScript"),l.qZA(),l.TgZ(51,"span",12),l._uU(52,"Php"),l.qZA(),l.TgZ(53,"span",12),l._uU(54,"Python"),l.qZA(),l.TgZ(55,"span",12),l._uU(56,"SQL"),l.qZA(),l.TgZ(57,"span",12),l._uU(58,"TypeScript"),l.qZA(),l.TgZ(59,"span",12),l._uU(60,"VB"),l.qZA(),l.qZA(),l.TgZ(61,"div",13),l.TgZ(62,"span",12),l._uU(63,".netcore"),l.qZA(),l.TgZ(64,"span",12),l._uU(65,"Angular 2+"),l.qZA(),l.TgZ(66,"span",12),l._uU(67,"aspnetmvc"),l.qZA(),l.TgZ(68,"span",12),l._uU(69,"Django"),l.qZA(),l.TgZ(70,"span",12),l._uU(71,"Flask"),l.qZA(),l.TgZ(72,"span",12),l._uU(73,"Flutter"),l.qZA(),l.TgZ(74,"span",12),l._uU(75,"WordPress"),l.qZA(),l.qZA(),l.TgZ(76,"div",14),l.TgZ(77,"span",12),l._uU(78,"Android Studio"),l.qZA(),l.TgZ(79,"span",12),l._uU(80,"Blender"),l.qZA(),l.TgZ(81,"span",12),l._uU(82,"Excel"),l.qZA(),l.TgZ(83,"span",12),l._uU(84,"Git"),l.qZA(),l.TgZ(85,"span",12),l._uU(86,"GitHub"),l.qZA(),l.TgZ(87,"span",12),l._uU(88,"Illustrator"),l.qZA(),l.TgZ(89,"span",12),l._uU(90,"MSSQL"),l.qZA(),l.TgZ(91,"span",12),l._uU(92,"MySql"),l.qZA(),l.TgZ(93,"span",12),l._uU(94,"Photoshop"),l.qZA(),l.TgZ(95,"span",12),l._uU(96,"Power BI"),l.qZA(),l.TgZ(97,"span",12),l._uU(98,"UiPath Studio"),l.qZA(),l.TgZ(99,"span",12),l._uU(100,"TFS"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(101,"div",2),l.TgZ(102,"div",4),l.TgZ(103,"h3",5),l._uU(104),l.ALo(105,"translate"),l.qZA(),l.TgZ(106,"div",6),l.TgZ(107,"div",7),l.TgZ(108,"div",15),l.TgZ(109,"div"),l.TgZ(110,"strong"),l._uU(111),l.ALo(112,"translate"),l.qZA(),l._UZ(113,"app-rating",16),l.TgZ(114,"small",17),l._uU(115,"Mother Tongue"),l.qZA(),l.qZA(),l.TgZ(116,"div"),l.TgZ(117,"strong"),l._uU(118),l.ALo(119,"translate"),l.qZA(),l._UZ(120,"app-rating",16),l.TgZ(121,"small",17),l._uU(122,"National Language"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(123,"div",18),l.TgZ(124,"div"),l.TgZ(125,"strong"),l._uU(126),l.ALo(127,"translate"),l.qZA(),l._UZ(128,"app-rating",16),l.TgZ(129,"small",17),l._uU(130,"Professional - DELF B2 Certified \xa0"),l._UZ(131,"i",19),l.qZA(),l.qZA(),l.TgZ(132,"div"),l.TgZ(133,"strong"),l._uU(134),l.ALo(135,"translate"),l.qZA(),l._UZ(136,"app-rating",16),l.TgZ(137,"small",17),l._uU(138,"Sehr Klein"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(5),l.Oqu(l.lcZ(6,24,"PAGES.SKILLS.HEADER")),l.xp6(5),l.Oqu(l.lcZ(11,26,"PAGES.SKILLS.TECHNICAL")),l.xp6(94),l.Oqu(l.lcZ(105,28,"PAGES.SKILLS.LANGUAGES")),l.xp6(7),l.Oqu(l.lcZ(112,30,"LANGUAGES.IGBO")),l.xp6(2),l.Q6J("type","star")("max",5)("score",5)("mode","static"),l.xp6(5),l.Oqu(l.lcZ(119,32,"LANGUAGES.ENGLISH")),l.xp6(2),l.Q6J("type","star")("max",5)("score",5)("mode","static"),l.xp6(6),l.Oqu(l.lcZ(127,34,"LANGUAGES.FRENCH")),l.xp6(2),l.Q6J("type","star")("max",5)("score",4)("mode","static"),l.xp6(6),l.Oqu(l.lcZ(135,36,"LANGUAGES.GERMAN")),l.xp6(2),l.Q6J("type","star")("max",5)("score",2)("mode","static"))},directives:[rn],pipes:[Kt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#373738}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#ccc}.stack-item[_ngcontent-%COMP%]{background-color:#575a704d;padding:5px;margin:2px;display:inline-block}.skills-stack[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-width:100%}.stack[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap}"]}),b})(),ci=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-tools"]],inputs:{LightMode:"LightMode"},decls:2,vars:0,template:function(g,R){1&g&&(l.TgZ(0,"p"),l._uU(1,"tools works!"),l.qZA())},styles:[""]}),b})();var Ss=Q(946);let Io=(()=>{class b{constructor(g,R){this.http=g,this.configService=R}downloadFile(g){return this.http.get(`${this.configService.config.url.cors}${this.configService.config.url.github}CV/raw/main/public/${g}/Victor_Okafor.pdf&btoken=${this.configService.config.btoken}`,{responseType:"blob"})}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(Dt.eN),l.LFG(Ss.E))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var Lo=Q(9441);function Ka(b,P){if(1&b&&(l.TgZ(0,"div",12),l.TgZ(1,"div",13),l.TgZ(2,"strong",14),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"em"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.TgZ(8,"div",15),l.TgZ(9,"strong",14),l._uU(10),l.ALo(11,"translate"),l.qZA(),l._UZ(12,"p",16),l.ALo(13,"translate"),l.qZA(),l.qZA()),2&b){const g=P.$implicit;l.xp6(3),l.Oqu(l.lcZ(4,4,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".COMPANY")),l.xp6(3),l.Oqu(l.lcZ(7,6,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".ACTIVEYEAR")),l.xp6(4),l.Oqu(l.lcZ(11,8,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".ROLE")),l.xp6(2),l.Q6J("innerHTML",l.lcZ(13,10,"PAGES.RESUME.EXPERIENCE.CONTENT."+g+".DESCRIPTION"),l.oJD)}}function ns(b,P){if(1&b&&(l.TgZ(0,"div",12),l.TgZ(1,"div",13),l.TgZ(2,"strong",14),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"em"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.TgZ(8,"div",15),l.TgZ(9,"strong",14),l._uU(10),l.ALo(11,"translate"),l.qZA(),l._UZ(12,"p",16),l.ALo(13,"translate"),l.qZA(),l.qZA()),2&b){const g=P.$implicit;l.xp6(3),l.Oqu(l.lcZ(4,4,"PAGES.RESUME.EDUCATION.CONTENT."+g+".SCHOOLNAME")),l.xp6(3),l.Oqu(l.lcZ(7,6,"PAGES.RESUME.EDUCATION.CONTENT."+g+".ACTIVEYEAR")),l.xp6(4),l.Oqu(l.lcZ(11,8,"PAGES.RESUME.EDUCATION.CONTENT."+g+".DEGREE")),l.xp6(2),l.Q6J("innerHTML",l.lcZ(13,10,"PAGES.RESUME.EDUCATION.CONTENT."+g+".DESCRIPTION"),l.oJD)}}const sa=function(){return[0,1,2,4,5,6]},Qa=function(){return[0,1]};let Pc=(()=>{class b{constructor(g,R,W){this.fileService=g,this.preferenceService=R,this.util=W,this.IsDownloading=!1}ngOnInit(){}downloadCV(){if(this.IsDownloading)return;this.IsDownloading=!0;const g=this.preferenceService.getPreference().Language;this.fileService.downloadFile(g).subscribe(R=>{const W=new Blob([R],{type:"application/pdf; charset=utf-8"});Lo.saveAs(W,"VictorFortman.pdf"),this.IsDownloading=!1},R=>{console.log("Error downloading the file"),this.IsDownloading=!1},()=>{})}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(Io),l.Y36(yi.y),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-cv"]],inputs:{LightMode:"LightMode"},decls:28,vars:17,consts:[[1,"container-fluid","text-white","px-2","paper-section-wrap-outer"],[1,"px-3","py-5","paper-section-wrap-inner"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"foldable"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],["class","row py-3",4,"ngFor","ngForOf"],[1,"col-md-12","text-center","my-3"],[1,"btn","btn-primary",3,"click","tap"],[1,"fa","fa-download"],[1,"row","py-3"],[1,"col-lg-4","text-left"],[1,"d-block","py-2"],[1,"col-lg-8","text-left"],[1,"small",3,"innerHTML"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",4),l.TgZ(8,"div",2),l.TgZ(9,"div",5),l.TgZ(10,"h3",6),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"div",7),l.YNc(14,Ka,14,12,"div",8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",2),l.TgZ(16,"div",5),l.TgZ(17,"h3",6),l._uU(18),l.ALo(19,"translate"),l.qZA(),l.TgZ(20,"div",7),l.YNc(21,ns,14,12,"div",8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"div",2),l.TgZ(23,"div",9),l.TgZ(24,"button",10),l.NdJ("click",function(){return R.downloadCV()})("tap",function(he){return R.clickTarget(he)}),l._uU(25),l.ALo(26,"translate"),l._UZ(27,"i",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(5),l.Oqu(l.lcZ(6,7,"PAGES.RESUME.HEADER")),l.xp6(6),l.Oqu(l.lcZ(12,9,"PAGES.RESUME.EXPERIENCE.HEADER")),l.xp6(3),l.Q6J("ngForOf",l.DdM(15,sa)),l.xp6(4),l.Oqu(l.lcZ(19,11,"PAGES.RESUME.EDUCATION.HEADER")),l.xp6(3),l.Q6J("ngForOf",l.DdM(16,Qa)),l.xp6(4),l.hij(" ",l.lcZ(26,13,"PAGES.RESUME.DOWNLOADSUMMARY")," "))},directives:[C.sg],pipes:[Kt.X$],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#30355a}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#efefef}"]}),b})(),tn=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-awards"]],inputs:{LightMode:"LightMode"},decls:24,vars:1,consts:[[1,"container-fluid","text-white","px-2",2,"background-color","#373738","margin-top","-10px"],[1,"px-3","py-5",2,"border","1px dashed #777777","border-top","none","border-bottom","none"],[1,"row"],[1,"col-md-12","text-center","mt-5","mb-3"],[1,"col-md-8","offset-md-2","py-3"],[1,"pb-2"],[1,"container"],[1,"row","py-3"],[1,"col-lg-6","text-left"],[1,"d-block","py-2"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"h2"),l._uU(5,"Skills"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",2),l.TgZ(7,"div",4),l.TgZ(8,"h3",5),l._uU(9,"Technical"),l.qZA(),l.TgZ(10,"div",6),l.TgZ(11,"div",7),l.TgZ(12,"div",8),l.TgZ(13,"strong",9),l._uU(14,"FUTO"),l.qZA(),l.TgZ(15,"em"),l._uU(16,"Sep 2010 - Dec 2015"),l.qZA(),l.qZA(),l._UZ(17,"div",8),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",2),l.TgZ(19,"div",4),l.TgZ(20,"h3",5),l._uU(21,"Languages"),l.qZA(),l.TgZ(22,"div",6),l._UZ(23,"div",7),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&l.uIk("light-mode",R.LightMode)},styles:[""]}),b})(),xl=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-progress"]],decls:7,vars:0,consts:[["id","loader",1,"loader"],[1,"loader-inner"],[1,"loader-dot"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"span",2),l._UZ(3,"span",2),l._UZ(4,"span",2),l._UZ(5,"span",2),l._UZ(6,"span",2),l.qZA(),l.qZA())},styles:[".loader[_ngcontent-%COMP%]{background-color:#fff;padding:5px;width:350px;overflow-x:hidden;justify-content:stretch;white-space:nowrap;-webkit-user-select:none;user-select:none}.loader-dot[_ngcontent-%COMP%]{border-radius:50%;width:8px;height:8px;margin:2px;background-color:#249;display:inline-block;position:relative;transition:all ease 2s;animation:accordion 4s ease infinite}.loader-inner[_ngcontent-%COMP%]{animation:marquee ease-in-out infinite 4s}@keyframes marquee{0%{margin-left:-50%}50%{margin-left:40%}to{margin-left:200%}}@keyframes accordion{0%{margin-left:3%}20%{margin-left:2%}40%{margin-left:0%}60%{margin-left:0%}80%{margin-left:100%}to{margin-left:100%}}"]}),b})();function bl(b,P){1&b&&(l.TgZ(0,"div",2),l.TgZ(1,"div",13),l._UZ(2,"app-progress"),l.qZA(),l.qZA())}let to=(()=>{class b{constructor(g,R){this.elementScrollService=g,this.util=R}ngOnInit(){}scrollTo(g){this.elementScrollService.scrollTo(g)}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(Zi),l.Y36(kn.t))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-footer"]],inputs:{LightMode:"LightMode"},decls:51,vars:2,consts:[[1,"container-fluid","text-white","text-always-white","pb-2","px-2","paper-section-wrap-outer","paper-bottom"],[1,"p-3","paper-section-wrap-inner"],[1,"row"],[1,"col-md-8","offset-md-2","text-center","mt-5","mb-3"],[1,"col-md-8"],[1,"text-left","d-flex"],[1,"list-unstyled"],["routerLink","/home",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/profile",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/projects",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/contact",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/skills",1,"nav-link","text-always-white",3,"click","tap"],["routerLink","/resume",1,"nav-link","text-always-white",3,"click","tap"],[1,"col-md-4"],[1,"text-justify","small"],["class","row",4,"ngIf"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",2),l.TgZ(5,"div",4),l.TgZ(6,"h2"),l._uU(7,"Victor Fortman"),l.qZA(),l.TgZ(8,"nav",5),l.TgZ(9,"ul",6),l.TgZ(10,"li"),l.TgZ(11,"a",7),l.NdJ("click",function(){return R.scrollTo("home")})("tap",function(he){return R.clickTarget(he)}),l._uU(12,"Home"),l.qZA(),l.qZA(),l.TgZ(13,"li"),l.TgZ(14,"a",8),l.NdJ("click",function(){return R.scrollTo("profile")})("tap",function(he){return R.clickTarget(he)}),l._uU(15,"Profile"),l.qZA(),l.qZA(),l.TgZ(16,"li"),l.TgZ(17,"a",9),l.NdJ("click",function(){return R.scrollTo("projects")})("tap",function(he){return R.clickTarget(he)}),l._uU(18,"Projects"),l.qZA(),l.qZA(),l.TgZ(19,"li"),l.TgZ(20,"a",10),l.NdJ("click",function(){return R.scrollTo("contact")})("tap",function(he){return R.clickTarget(he)}),l._uU(21,"Contact"),l.qZA(),l.qZA(),l.TgZ(22,"li"),l.TgZ(23,"a",11),l.NdJ("click",function(){return R.scrollTo("skills")})("tap",function(he){return R.clickTarget(he)}),l._uU(24,"Skills"),l.qZA(),l.qZA(),l.TgZ(25,"li"),l.TgZ(26,"a",12),l.NdJ("click",function(){return R.scrollTo("resume")})("tap",function(he){return R.clickTarget(he)}),l._uU(27,"Resume"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",13),l.TgZ(29,"h5"),l._uU(30,"Resources"),l.qZA(),l.TgZ(31,"dl",14),l.TgZ(32,"dt"),l._uU(33,"Flag Sprites"),l.qZA(),l.TgZ(34,"dd"),l._uU(35,"https://flag-sprites.com/"),l.qZA(),l.qZA(),l.TgZ(36,"dl",14),l.TgZ(37,"dt"),l._uU(38,"Avatar"),l.qZA(),l.TgZ(39,"dd"),l._uU(40,"https://www.cartoonify.de/"),l.qZA(),l.qZA(),l.TgZ(41,"dl",14),l.TgZ(42,"dt"),l._uU(43,"Backdrop Image"),l.qZA(),l.TgZ(44,"dd"),l._uU(45,"Andrew Neel "),l.TgZ(46,"small"),l._uU(47,"on Pexels"),l.qZA(),l.qZA(),l.TgZ(48,"dd"),l._uU(49,"https://www.pexels.com/@andrew"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(50,bl,3,0,"div",15),l.qZA(),l.qZA()),2&g&&(l.uIk("light-mode",R.LightMode),l.xp6(50),l.Q6J("ngIf",!1))},directives:[ki.yS,C.O5,xl],styles:["[light-mode=dark].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#222}[light-mode=bright].paper-section-wrap-outer[_ngcontent-%COMP%]{background-color:#2d3d77}"]}),b})();function sc(b,P){if(1&b&&l._UZ(0,"app-about",12),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function Oo(b,P){if(1&b&&l._UZ(0,"app-featured-projects",13),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function po(b,P){if(1&b&&l._UZ(0,"app-contact",14),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function oc(b,P){if(1&b&&l._UZ(0,"app-skills",15),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function ii(b,P){if(1&b&&l._UZ(0,"app-tools",16),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function Pn(b,P){if(1&b&&l._UZ(0,"app-cv",17),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function Lh(b,P){if(1&b&&l._UZ(0,"app-awards",16),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}function ac(b,P){if(1&b&&l._UZ(0,"app-footer",16),2&b){const g=l.oxw();l.Q6J("LightMode",g.preference.LightMode)}}const el=[{path:"",component:(()=>{class b{constructor(g,R,W){this.preferenceService=g,this.util=R,this.elementScrollService=W}ngOnInit(){this.preference=this.preferenceService.getPreference(),this.preferenceService.preferenceChanged$.subscribe(g=>{this.preference=g})}scrollTo(g){this.elementScrollService.scrollTo(g).then(R=>{})}clickTarget(g){this.util.click(g.target)}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(yi.y),l.Y36(kn.t),l.Y36(Zi))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-main"]],decls:15,vars:10,consts:[["id","home",1,"doc-section",3,"LightMode"],["routerLink","/profile",1,"d-flex","justify-content-end","align-content-center","jacket-sleeve",3,"click","tap"],[1,"p-2","d-inline-block","mx-3","jacket-sleeve-outer"],[1,"jacket-sleeve-inner","d-inline-block","p-2"],[1,"fa","fa-chevron-down"],[1,"jacket"],["id","profile","class","doc-section",3,"LightMode",4,"ngIf"],["id","projects","class","doc-section",3,"LightMode",4,"ngIf"],["id","contact","class","doc-section",3,"LightMode",4,"ngIf"],["id","skills","class","doc-section",3,"LightMode",4,"ngIf"],["class","doc-section",3,"LightMode",4,"ngIf"],["id","resume","class","doc-section",3,"LightMode",4,"ngIf"],["id","profile",1,"doc-section",3,"LightMode"],["id","projects",1,"doc-section",3,"LightMode"],["id","contact",1,"doc-section",3,"LightMode"],["id","skills",1,"doc-section",3,"LightMode"],[1,"doc-section",3,"LightMode"],["id","resume",1,"doc-section",3,"LightMode"]],template:function(g,R){1&g&&(l.TgZ(0,"main"),l._UZ(1,"app-home",0),l.TgZ(2,"div",1),l.NdJ("click",function(){return R.scrollTo("profile")})("tap",function(he){return R.clickTarget(he)}),l.TgZ(3,"span",2),l.TgZ(4,"span",3),l._UZ(5,"i",4),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"article",5),l.YNc(7,sc,1,1,"app-about",6),l.YNc(8,Oo,1,1,"app-featured-projects",7),l.YNc(9,po,1,1,"app-contact",8),l.YNc(10,oc,1,1,"app-skills",9),l.YNc(11,ii,1,1,"app-tools",10),l.YNc(12,Pn,1,1,"app-cv",11),l.YNc(13,Lh,1,1,"app-awards",10),l.YNc(14,ac,1,1,"app-footer",10),l.qZA(),l.qZA()),2&g&&(l.xp6(1),l.Q6J("LightMode",R.preference.LightMode),l.xp6(1),l.uIk("light-mode",R.preference.LightMode),l.xp6(5),l.Q6J("ngIf",!0),l.xp6(1),l.Q6J("ngIf",!0),l.xp6(1),l.Q6J("ngIf",!0),l.xp6(1),l.Q6J("ngIf",!0),l.xp6(1),l.Q6J("ngIf",!1),l.xp6(1),l.Q6J("ngIf",!0),l.xp6(1),l.Q6J("ngIf",!1),l.xp6(1),l.Q6J("ngIf",!0))},directives:[_i,ki.rH,C.O5,_,Ve,Jt,yn,ci,Pc,tn,to],styles:[".jacket[_ngcontent-%COMP%]{box-shadow:0 -4px 4px #1e1e1e80}.jacket-sleeve[_ngcontent-%COMP%]{height:75px;animation:radiate 4s ease infinite;cursor:pointer;z-index:1000}[light-mode=dark][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#333}[light-mode=bright][_ngcontent-%COMP%]   .jacket-sleeve-outer[_ngcontent-%COMP%]{background-color:#2d3d77}.jacket-sleeve-outer[_ngcontent-%COMP%]{width:75px;height:75px}.jacket-sleeve-inner[_ngcontent-%COMP%]{font-size:30px;text-align:center;vertical-align:middle;height:60px;width:60px;line-height:45px;border:1px dashed #777777;color:#777}"]}),b})(),children:[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:_i},{path:"profile",component:_},{path:"projects",component:Ve},{path:"contact",component:Jt},{path:"resume",component:Pc},{path:"skills",component:yn}]},{path:"apps",component:(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-apps"]],decls:1,vars:0,template:function(g,R){1&g&&l._UZ(0,"router-outlet")},directives:[ki.lC],styles:[""]}),b})(),children:[{path:"calendar",loadChildren:()=>Q.e(781).then(Q.bind(Q,2781)).then(b=>b.CalendarModule)}],canActivate:[(()=>{class b{constructor(g){this.router=g}canActivate(g,R){return new Promise((W,he)=>{W(!0)})}}return b.\u0275fac=function(g){return new(g||b)(l.LFG(ki.F0))},b.\u0275prov=l.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()]},{path:"404",component:(()=>{class b{constructor(g,R){this.preferenceService=g,this.router=R,this.preference=this.preferenceService.getPreference()}ngOnInit(){}navigateBack(){window.history.back()}navigateHome(){this.preferenceService.setBackdropMode("background"),this.router.navigateByUrl("/home")}}return b.\u0275fac=function(g){return new(g||b)(l.Y36(yi.y),l.Y36(ki.F0))},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-not-found"]],decls:11,vars:1,consts:[["role","sign-404",1,"sign-404"],[1,"msg-404","text-center","text-white","text-always-white"],[1,"banner-404"],[1,"btn","btn-link",3,"click","tap"]],template:function(g,R){1&g&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h1",2),l._uU(3,"Sorry"),l.qZA(),l.TgZ(4,"p"),l._uU(5,"The resource you are looking for is not found."),l.qZA(),l.TgZ(6,"div"),l.TgZ(7,"a",3),l.NdJ("click",function(){return R.navigateHome()})("tap",function(){return R.navigateHome()}),l._uU(8,"Go to Homepage"),l.qZA(),l.TgZ(9,"a",3),l.NdJ("click",function(){return R.navigateBack()})("tap",function(){return R.navigateBack()}),l._uU(10,"Navigate Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&g&&l.uIk("light-mode",R.preference.LightMode)},styles:["[role=sign-404][_ngcontent-%COMP%]{padding:7px}[role=sign-404][light-mode=dark][_ngcontent-%COMP%]{background-color:#222;box-shadow:0 2px 4px #222}[role=sign-404][light-mode=bright][_ngcontent-%COMP%]{background-color:#2d3d77;box-shadow:0 2px 4px #96c8dc66}.msg-404[_ngcontent-%COMP%]{min-height:100px;width:calc(300px + 10vw);padding:15px;border:1px dashed #777777}.banner-404[_ngcontent-%COMP%]{font-weight:bolder;font-size:xx-large;display:inline-block}.sign-404[_ngcontent-%COMP%]{position:fixed;top:0px;left:calc(50% - 150px - 5vw);margin-top:calc(50vh - 75px)}"]}),b})()},{path:"**",redirectTo:"/404"}];let _d=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b}),b.\u0275inj=l.cJS({imports:[[C.ez,ki.Bz.forRoot(el,{anchorScrolling:"enabled",relativeLinkResolution:"legacy"})],ki.Bz]}),b})();const Rr=b=>new Qn(b),Sl=b=>()=>b.loadConfig();let Ta=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275mod=l.oAB({type:b,bootstrap:[gi]}),b.\u0275inj=l.cJS({providers:[{provide:l.ip1,useFactory:Sl,deps:[Ss.E],multi:!0}],imports:[[Qi.m,Uo,hi.u5,Xa,ve,_d,Dt.JF,Kt.aw.forRoot({loader:{provide:Kt.Zw,useFactory:Rr,deps:[Dt.eN]}})]]}),b})();var _u=Q(2340),Ic=Q(2329),Cs={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var b=document.createElement("canvas");return!(!window.WebGLRenderingContext||!b.getContext("webgl")&&!b.getContext("experimental-webgl"))}catch(P){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var b=document.createElement("div");return b.id="webgl-error-message",b.style.fontFamily="monospace",b.style.fontSize="13px",b.style.fontWeight="normal",b.style.textAlign="center",b.style.background="#fff",b.style.color="#000",b.style.padding="1.5em",b.style.width="400px",b.style.margin="5em auto 0",this.webgl||(b.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),b},addGetWebGLMessage:function(b){var P=void 0!==(b=b||{}).parent?b.parent:document.body,g=void 0!==b.id?b.id:"oldie",R=Cs.getWebGLErrorMessage();R.id=g,P.appendChild(R)}};const Zs=Cs,tl=function(){function b(){this.arenaCache=[],this.preloadStyleContent="canvas.preload{position:fixed;top:0;left:0;z-index:-1}",this.setArena=function(P){return console.log(P)},this.getArenaIndex=function(){return[]}}return b.prototype.init=function(P){this.container=P,this.initialize()},b.prototype.initialize=function(){var P=this;if(Zs.webgl){var g=document.createElement("style");g.innerHTML=this.preloadStyleContent,document.body.appendChild(g),Ic.tEQ.onProgress=function(W,he,Ke){console.log("loading manager progress triggered"),P.incomingArena.loaded=he===Ke},this.currentArena=void 0}else{var R=Zs.getWebGLErrorMessage();this.container.appendChild(R)}},b.prototype.setup=function(){var P=this;return new Promise(function(g,R){Q.e(819).then(Q.bind(Q,5819)).then(function(W){var he=0;P.loadArena(he,W.getArena(he,P.container)),P.transition();var Ke=Array.from(Array(W.getArenaCount()).keys());P.setArena=function(_n){_n in Ke&&_n!=he&&(P.loadArena(_n,W.getArena(_n,P.container)),P.transition(),he=_n)},P.getArenaIndex=function(){return W.getArenaIndex()}}).then(function(){return g()}).catch(function(){return R()})})},b.prototype.finishLoading=function(P){return new Promise(function(g,R){if(P.needsLoading)var W=0,Ke=setInterval(function(){P.loaded?(clearInterval(Ke),g()):(W+=500)>=P.loadingTimeout&&(clearInterval(Ke),R())},500);else g()})},b.prototype.loadArena=function(P,g){null==this.arenaCache[P]?(this.incomingArena=g,this.arenaCache[P]=g):(this.incomingArena=this.arenaCache[P],console.log("retrieval"))},b.prototype.transition=function(){var P=this;void 0!==this.incomingArena&&(void 0!==this.currentArena&&(this.outgoingArena=this.currentArena),this.currentArena=this.incomingArena,this.currentArena.init(),console.log(this.currentArena),this.currentArena.canvas().classList.add("preload"),this.finishLoading(this.incomingArena).then(function(){void 0!==P.outgoingArena&&P.outgoingArena.packup(),P.fadeOutArena(P.outgoingArena,1).then(function(g){g&&P.outgoingArena.destroy(),P.currentArena.canvas().classList.remove("preload")})}).catch(function(g){return console.log(g)}))},b.prototype.fadeOutArena=function(P,g){return console.log("fadeout called on outgoing Arena"),null!=P?this.fadeOut(P.canvas(),g):(console.log("no outgoing Arena"),new Promise(function(R){return R(!1)}))},b.prototype.fadeOut=function(P,g){var R=Number(P.style.opacity)||1;return new Promise(function(W){var he=R,Ke=setInterval(function(){he>0?P.style.opacity="".concat(he-=R/60):(clearInterval(Ke),P.style.opacity="0",console.log("outgoing Arena faded out"),W(!0))},g/60)})},b}();Q(5386),_u.N.production&&(0,l.G48)();const xd=document.querySelector("#scenery"),Cl=new tl;Cl.init(xd),window.setScenery(Cl),Cl.setup().then(()=>window.removeDarkMode()),ur().bootstrapModule(Ta).catch(b=>console.log(b))},5877:(Yt,et,Q)=>{"use strict";Q.d(et,{E2:()=>l,HW:()=>qe,DZ:()=>ke,a2:()=>pe,bb:()=>Ae});const l=[{name:"background",code:"BACKGROUND",longCode:"background-mode",desc:"BACKGROUNDMODE",ico:"fa-briefcase"},{name:"interactive",code:"INTERACTIVE",longCode:"interactive-mode",desc:"INTERACTIVEMODE",ico:"fa-binoculars"}],qe=[{name:"retracted",code:"RETRACTED"},{name:"available",code:"AVAILABLE"}],ke=[{name:"bright",code:"DAY",longCode:"bright-mode",desc:"DAYMODE",ico:"fa-sun-o"},{name:"dark",code:"NIGHT",longCode:"dark-mode",desc:"NIGHTMODE",ico:"fa-moon-o"}],pe=[{name:"GERMAN",code:"de",ico:"flag-de"},{name:"ENGLISH",code:"en",ico:"flag-gb"},{name:"FRENCH",code:"fr",ico:"flag-fr"}],Ae={MenuMode:"retracted",LightMode:"dark",Language:((Ie="en")=>{for(const Be of navigator.languages){const Se=Be.split("-")[0],oe=pe.find(ye=>ye.code===Se);if(null!=oe)return oe.code}return Ie})("en"),BackdropMode:"background",Calendar:{Timezone:"Africa/Onicha",AvailableDays:"weekdays",AvailableHours:[8,16]}}},6719:(Yt,et,Q)=>{"use strict";Q.d(et,{Zw:()=>di,aw:()=>Te,X$:()=>Xe,sK:()=>lr});var C=Q(2096),l=Q(2916);function qe(de){return!!de&&(de instanceof l.y||"function"==typeof de.lift&&"function"==typeof de.subscribe)}var ke=Q(1086),pe=Q(567),Ae=Q(1221),Ie=Q(8514),Be=Q(8929),Se=Q(6686),ye=Q(2268);const Ne=new class Re extends ye.v{}(class oe extends Se.o{constructor(ve,ee){super(ve,ee),this.scheduler=ve,this.work=ee}schedule(ve,ee=0){return ee>0?super.schedule(ve,ee):(this.delay=ee,this.state=ve,this.scheduler.flush(this),this)}execute(ve,ee){return ee>0||this.closed?super.execute(ve,ee):this._execute(ve,ee)}requestAsyncId(ve,ee,fe=0){return null!==fe&&fe>0||null===fe&&this.delay>0?super.requestAsyncId(ve,ee,fe):ve.flush(this)}});var it=Q(2654),rt=Q(3489),Ge=Q(8896);function an({error:de,subscriber:ve}){ve.error(de)}class Pt{constructor(ve,ee,fe){this.kind=ve,this.value=ee,this.error=fe,this.hasValue="N"===ve}observe(ve){switch(this.kind){case"N":return ve.next&&ve.next(this.value);case"E":return ve.error&&ve.error(this.error);case"C":return ve.complete&&ve.complete()}}do(ve,ee,fe){switch(this.kind){case"N":return ve&&ve(this.value);case"E":return ee&&ee(this.error);case"C":return fe&&fe()}}accept(ve,ee,fe){return ve&&"function"==typeof ve.next?this.observe(ve):this.do(ve,ee,fe)}toObservable(){switch(this.kind){case"N":return(0,ke.of)(this.value);case"E":return function Ft(de,ve){return new l.y(ve?ee=>ve.schedule(an,0,{error:de,subscriber:ee}):ee=>ee.error(de))}(this.error);case"C":return(0,Ge.c)()}throw new Error("unexpected notification kind value")}static createNext(ve){return void 0!==ve?new Pt("N",ve):Pt.undefinedValueNotification}static createError(ve){return new Pt("E",void 0,ve)}static createComplete(){return Pt.completeNotification}}Pt.completeNotification=new Pt("C"),Pt.undefinedValueNotification=new Pt("N",void 0);class fn extends rt.L{constructor(ve,ee,fe=0){super(ve),this.scheduler=ee,this.delay=fe}static dispatch(ve){const{notification:ee,destination:fe}=ve;ee.observe(fe),this.unsubscribe()}scheduleMessage(ve){this.destination.add(this.scheduler.schedule(fn.dispatch,this.delay,new mt(ve,this.destination)))}_next(ve){this.scheduleMessage(Pt.createNext(ve))}_error(ve){this.scheduleMessage(Pt.createError(ve)),this.unsubscribe()}_complete(){this.scheduleMessage(Pt.createComplete()),this.unsubscribe()}}class mt{constructor(ve,ee){this.notification=ve,this.destination=ee}}var $e=Q(5279),tt=Q(5283);class Rt extends Be.xQ{constructor(ve=Number.POSITIVE_INFINITY,ee=Number.POSITIVE_INFINITY,fe){super(),this.scheduler=fe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ve<1?1:ve,this._windowTime=ee<1?1:ee,ee===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ve){const ee=this._events;ee.push(ve),ee.length>this._bufferSize&&ee.shift(),super.next(ve)}nextTimeWindow(ve){this._events.push(new Ct(this._getNow(),ve)),this._trimBufferThenGetEvents(),super.next(ve)}_subscribe(ve){const ee=this._infiniteTimeWindow,fe=ee?this._events:this._trimBufferThenGetEvents(),Ce=this.scheduler,nt=fe.length;let ft;if(this.closed)throw new $e.N;if(this.isStopped||this.hasError?ft=it.w.EMPTY:(this.observers.push(ve),ft=new tt.W(this,ve)),Ce&&ve.add(ve=new fn(ve,Ce)),ee)for(let Lt=0;Lt<nt&&!ve.closed;Lt++)ve.next(fe[Lt]);else for(let Lt=0;Lt<nt&&!ve.closed;Lt++)ve.next(fe[Lt].value);return this.hasError?ve.error(this.thrownError):this.isStopped&&ve.complete(),ft}_getNow(){return(this.scheduler||Ne).now()}_trimBufferThenGetEvents(){const ve=this._getNow(),ee=this._bufferSize,fe=this._windowTime,Ce=this._events,nt=Ce.length;let ft=0;for(;ft<nt&&!(ve-Ce[ft].time<fe);)ft++;return nt>ee&&(ft=Math.max(ft,nt-ee)),ft>0&&Ce.splice(0,ft),Ce}}class Ct{constructor(ve,ee){this.time=ve,this.value=ee}}function ut(de,ve,ee){let fe;return fe=de&&"object"==typeof de?de:{bufferSize:de,windowTime:ve,refCount:!1,scheduler:ee},Ce=>Ce.lift(function St({bufferSize:de=Number.POSITIVE_INFINITY,windowTime:ve=Number.POSITIVE_INFINITY,refCount:ee,scheduler:fe}){let Ce,ft,nt=0,Lt=!1,Kn=!1;return function(on){nt++,(!Ce||Lt)&&(Lt=!1,Ce=new Rt(de,ve,fe),ft=on.subscribe({next(wn){Ce.next(wn)},error(wn){Lt=!0,Ce.error(wn)},complete(){Kn=!0,ft=void 0,Ce.complete()}}));const bn=Ce.subscribe(this);this.add(()=>{nt--,bn.unsubscribe(),ft&&!Kn&&ee&&0===nt&&(ft.unsubscribe(),ft=void 0,Ce=void 0)})}}(fe))}var kt=Q(2986),Bt=Q(4850),hn=Q(1406),Pi=Q(7545);class di{}let xi=(()=>{class de extends di{getTranslation(ee){return(0,ke.of)({})}}return de.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=C.n5z(de)))(fe||de)}}(),de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})();class $n{}let ir=(()=>{class de{handle(ee){return ee.key}}return de.\u0275fac=function(ee){return new(ee||de)},de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})();function ys(de,ve){if(de===ve)return!0;if(null===de||null===ve)return!1;if(de!=de&&ve!=ve)return!0;let Ce,nt,ft,ee=typeof de;if(ee==typeof ve&&"object"==ee){if(!Array.isArray(de)){if(Array.isArray(ve))return!1;for(nt in ft=Object.create(null),de){if(!ys(de[nt],ve[nt]))return!1;ft[nt]=!0}for(nt in ve)if(!(nt in ft)&&void 0!==ve[nt])return!1;return!0}if(!Array.isArray(ve))return!1;if((Ce=de.length)==ve.length){for(nt=0;nt<Ce;nt++)if(!ys(de[nt],ve[nt]))return!1;return!0}}return!1}function pi(de){return null!=de}function _r(de){return de&&"object"==typeof de&&!Array.isArray(de)}function vi(de,ve){let ee=Object.assign({},de);return _r(de)&&_r(ve)&&Object.keys(ve).forEach(fe=>{_r(ve[fe])?fe in de?ee[fe]=vi(de[fe],ve[fe]):Object.assign(ee,{[fe]:ve[fe]}):Object.assign(ee,{[fe]:ve[fe]})}),ee}class jt{}let Fn=(()=>{class de extends jt{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(ee,fe){let Ce;return Ce="string"==typeof ee?this.interpolateString(ee,fe):"function"==typeof ee?this.interpolateFunction(ee,fe):ee,Ce}getValue(ee,fe){let Ce="string"==typeof fe?fe.split("."):[fe];fe="";do{fe+=Ce.shift(),!pi(ee)||!pi(ee[fe])||"object"!=typeof ee[fe]&&Ce.length?Ce.length?fe+=".":ee=void 0:(ee=ee[fe],fe="")}while(Ce.length);return ee}interpolateFunction(ee,fe){return ee(fe)}interpolateString(ee,fe){return fe?ee.replace(this.templateMatcher,(Ce,nt)=>{let ft=this.getValue(fe,nt);return pi(ft)?ft:Ce}):ee}}return de.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=C.n5z(de)))(fe||de)}}(),de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})();class Xn{}let ei=(()=>{class de extends Xn{compile(ee,fe){return ee}compileTranslations(ee,fe){return ee}}return de.\u0275fac=function(){let ve;return function(fe){return(ve||(ve=C.n5z(de)))(fe||de)}}(),de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})();class Oi{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new C.vpe,this.onLangChange=new C.vpe,this.onDefaultLangChange=new C.vpe}}const An=new C.OlP("USE_STORE"),$i=new C.OlP("USE_DEFAULT_LANG"),pr=new C.OlP("DEFAULT_LANGUAGE"),Xi=new C.OlP("USE_EXTEND");let lr=(()=>{class de{constructor(ee,fe,Ce,nt,ft,Lt=!0,Kn=!1,ri=!1,on){this.store=ee,this.currentLoader=fe,this.compiler=Ce,this.parser=nt,this.missingTranslationHandler=ft,this.useDefaultLang=Lt,this.isolate=Kn,this.extend=ri,this.pending=!1,this._onTranslationChange=new C.vpe,this._onLangChange=new C.vpe,this._onDefaultLangChange=new C.vpe,this._langs=[],this._translations={},this._translationRequests={},on&&this.setDefaultLang(on)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(ee){this.isolate?this._defaultLang=ee:this.store.defaultLang=ee}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(ee){this.isolate?this._currentLang=ee:this.store.currentLang=ee}get langs(){return this.isolate?this._langs:this.store.langs}set langs(ee){this.isolate?this._langs=ee:this.store.langs=ee}get translations(){return this.isolate?this._translations:this.store.translations}set translations(ee){this.isolate?this._translations=ee:this.store.translations=ee}setDefaultLang(ee){if(ee===this.defaultLang)return;let fe=this.retrieveTranslations(ee);void 0!==fe?(null==this.defaultLang&&(this.defaultLang=ee),fe.pipe((0,kt.q)(1)).subscribe(Ce=>{this.changeDefaultLang(ee)})):this.changeDefaultLang(ee)}getDefaultLang(){return this.defaultLang}use(ee){if(ee===this.currentLang)return(0,ke.of)(this.translations[ee]);let fe=this.retrieveTranslations(ee);return void 0!==fe?(this.currentLang||(this.currentLang=ee),fe.pipe((0,kt.q)(1)).subscribe(Ce=>{this.changeLang(ee)}),fe):(this.changeLang(ee),(0,ke.of)(this.translations[ee]))}retrieveTranslations(ee){let fe;return(void 0===this.translations[ee]||this.extend)&&(this._translationRequests[ee]=this._translationRequests[ee]||this.getTranslation(ee),fe=this._translationRequests[ee]),fe}getTranslation(ee){this.pending=!0;const fe=this.currentLoader.getTranslation(ee).pipe(ut(1),(0,kt.q)(1));return this.loadingTranslations=fe.pipe((0,Bt.U)(Ce=>this.compiler.compileTranslations(Ce,ee)),ut(1),(0,kt.q)(1)),this.loadingTranslations.subscribe({next:Ce=>{this.translations[ee]=this.extend&&this.translations[ee]?Object.assign(Object.assign({},Ce),this.translations[ee]):Ce,this.updateLangs(),this.pending=!1},error:Ce=>{this.pending=!1}}),fe}setTranslation(ee,fe,Ce=!1){fe=this.compiler.compileTranslations(fe,ee),this.translations[ee]=(Ce||this.extend)&&this.translations[ee]?vi(this.translations[ee],fe):fe,this.updateLangs(),this.onTranslationChange.emit({lang:ee,translations:this.translations[ee]})}getLangs(){return this.langs}addLangs(ee){ee.forEach(fe=>{-1===this.langs.indexOf(fe)&&this.langs.push(fe)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(ee,fe,Ce){let nt;if(fe instanceof Array){let ft={},Lt=!1;for(let Kn of fe)ft[Kn]=this.getParsedResult(ee,Kn,Ce),qe(ft[Kn])&&(Lt=!0);if(Lt){const Kn=fe.map(ri=>qe(ft[ri])?ft[ri]:(0,ke.of)(ft[ri]));return(0,pe.D)(Kn).pipe((0,Bt.U)(ri=>{let on={};return ri.forEach((bn,wn)=>{on[fe[wn]]=bn}),on}))}return ft}if(ee&&(nt=this.parser.interpolate(this.parser.getValue(ee,fe),Ce)),void 0===nt&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(nt=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],fe),Ce)),void 0===nt){let ft={key:fe,translateService:this};void 0!==Ce&&(ft.interpolateParams=Ce),nt=this.missingTranslationHandler.handle(ft)}return void 0!==nt?nt:fe}get(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,hn.b)(Ce=>qe(Ce=this.getParsedResult(Ce,ee,fe))?Ce:(0,ke.of)(Ce)));{let Ce=this.getParsedResult(this.translations[this.currentLang],ee,fe);return qe(Ce)?Ce:(0,ke.of)(Ce)}}getStreamOnTranslationChange(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,Ie.P)(()=>this.get(ee,fe)),this.onTranslationChange.pipe((0,Pi.w)(Ce=>{const nt=this.getParsedResult(Ce.translations,ee,fe);return"function"==typeof nt.subscribe?nt:(0,ke.of)(nt)})))}stream(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');return(0,Ae.z)((0,Ie.P)(()=>this.get(ee,fe)),this.onLangChange.pipe((0,Pi.w)(Ce=>{const nt=this.getParsedResult(Ce.translations,ee,fe);return qe(nt)?nt:(0,ke.of)(nt)})))}instant(ee,fe){if(!pi(ee)||!ee.length)throw new Error('Parameter "key" required');let Ce=this.getParsedResult(this.translations[this.currentLang],ee,fe);if(qe(Ce)){if(ee instanceof Array){let nt={};return ee.forEach((ft,Lt)=>{nt[ee[Lt]]=ee[Lt]}),nt}return ee}return Ce}set(ee,fe,Ce=this.currentLang){this.translations[Ce][ee]=this.compiler.compile(fe,Ce),this.updateLangs(),this.onTranslationChange.emit({lang:Ce,translations:this.translations[Ce]})}changeLang(ee){this.currentLang=ee,this.onLangChange.emit({lang:ee,translations:this.translations[ee]}),null==this.defaultLang&&this.changeDefaultLang(ee)}changeDefaultLang(ee){this.defaultLang=ee,this.onDefaultLangChange.emit({lang:ee,translations:this.translations[ee]})}reloadLang(ee){return this.resetLang(ee),this.getTranslation(ee)}resetLang(ee){this._translationRequests[ee]=void 0,this.translations[ee]=void 0}getBrowserLang(){if("undefined"==typeof window||void 0===window.navigator)return;let ee=window.navigator.languages?window.navigator.languages[0]:null;return ee=ee||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,void 0!==ee?(-1!==ee.indexOf("-")&&(ee=ee.split("-")[0]),-1!==ee.indexOf("_")&&(ee=ee.split("_")[0]),ee):void 0}getBrowserCultureLang(){if("undefined"==typeof window||void 0===window.navigator)return;let ee=window.navigator.languages?window.navigator.languages[0]:null;return ee=ee||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,ee}}return de.\u0275fac=function(ee){return new(ee||de)(C.LFG(Oi),C.LFG(di),C.LFG(Xn),C.LFG(jt),C.LFG($n),C.LFG($i),C.LFG(An),C.LFG(Xi),C.LFG(pr))},de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})(),Xe=(()=>{class de{constructor(ee,fe){this.translate=ee,this._ref=fe,this.value=""}updateValue(ee,fe,Ce){let nt=ft=>{this.value=void 0!==ft?ft:ee,this.lastKey=ee,this._ref.markForCheck()};if(Ce){let ft=this.translate.getParsedResult(Ce,ee,fe);qe(ft.subscribe)?ft.subscribe(nt):nt(ft)}this.translate.get(ee,fe).subscribe(nt)}transform(ee,...fe){if(!ee||!ee.length)return ee;if(ys(ee,this.lastKey)&&ys(fe,this.lastParams))return this.value;let Ce;if(pi(fe[0])&&fe.length)if("string"==typeof fe[0]&&fe[0].length){let nt=fe[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Ce=JSON.parse(nt)}catch(ft){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${fe[0]}`)}}else"object"==typeof fe[0]&&!Array.isArray(fe[0])&&(Ce=fe[0]);return this.lastKey=ee,this.lastParams=fe,this.updateValue(ee,Ce),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(nt=>{this.lastKey&&nt.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(ee,Ce,nt.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(nt=>{this.lastKey&&(this.lastKey=null,this.updateValue(ee,Ce,nt.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(ee,Ce))})),this.value}_dispose(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return de.\u0275fac=function(ee){return new(ee||de)(C.Y36(lr,16),C.Y36(C.sBO,16))},de.\u0275pipe=C.Yjl({name:"translate",type:de,pure:!1}),de.\u0275prov=C.Yz7({token:de,factory:de.\u0275fac}),de})(),Te=(()=>{class de{static forRoot(ee={}){return{ngModule:de,providers:[ee.loader||{provide:di,useClass:xi},ee.compiler||{provide:Xn,useClass:ei},ee.parser||{provide:jt,useClass:Fn},ee.missingTranslationHandler||{provide:$n,useClass:ir},Oi,{provide:An,useValue:ee.isolate},{provide:$i,useValue:ee.useDefaultLang},{provide:Xi,useValue:ee.extend},{provide:pr,useValue:ee.defaultLanguage},lr]}}static forChild(ee={}){return{ngModule:de,providers:[ee.loader||{provide:di,useClass:xi},ee.compiler||{provide:Xn,useClass:ei},ee.parser||{provide:jt,useClass:Fn},ee.missingTranslationHandler||{provide:$n,useClass:ir},{provide:An,useValue:ee.isolate},{provide:$i,useValue:ee.useDefaultLang},{provide:Xi,useValue:ee.extend},{provide:pr,useValue:ee.defaultLanguage},lr]}}}return de.\u0275fac=function(ee){return new(ee||de)},de.\u0275mod=C.oAB({type:de}),de.\u0275inj=C.cJS({}),de})()},9441:function(Yt,et){var l;void 0!==(l=function(){"use strict";function ke(Se,oe,ye){var Re=new XMLHttpRequest;Re.open("GET",Se),Re.responseType="blob",Re.onload=function(){Be(Re.response,oe,ye)},Re.onerror=function(){console.error("could not download file")},Re.send()}function pe(Se){var oe=new XMLHttpRequest;oe.open("HEAD",Se,!1);try{oe.send()}catch(ye){}return 200<=oe.status&&299>=oe.status}function Ae(Se){try{Se.dispatchEvent(new MouseEvent("click"))}catch(ye){var oe=document.createEvent("MouseEvents");oe.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Se.dispatchEvent(oe)}}var Ie="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Be=Ie.saveAs||("object"!=typeof window||window!==Ie?function(){}:"download"in HTMLAnchorElement.prototype?function(Se,oe,ye){var Re=Ie.URL||Ie.webkitURL,Ne=document.createElement("a");Ne.download=oe=oe||Se.name||"download",Ne.rel="noopener","string"==typeof Se?(Ne.href=Se,Ne.origin===location.origin?Ae(Ne):pe(Ne.href)?ke(Se,oe,ye):Ae(Ne,Ne.target="_blank")):(Ne.href=Re.createObjectURL(Se),setTimeout(function(){Re.revokeObjectURL(Ne.href)},4e4),setTimeout(function(){Ae(Ne)},0))}:"msSaveOrOpenBlob"in navigator?function(Se,oe,ye){if(oe=oe||Se.name||"download","string"!=typeof Se)navigator.msSaveOrOpenBlob(function qe(Se,oe){return void 0===oe?oe={autoBom:!1}:"object"!=typeof oe&&(console.warn("Deprecated: Expected third argument to be a object"),oe={autoBom:!oe}),oe.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Se.type)?new Blob(["\ufeff",Se],{type:Se.type}):Se}(Se,ye),oe);else if(pe(Se))ke(Se,oe,ye);else{var Re=document.createElement("a");Re.href=Se,Re.target="_blank",setTimeout(function(){Ae(Re)})}}:function(Se,oe,ye,Re){if((Re=Re||open("","_blank"))&&(Re.document.title=Re.document.body.innerText="downloading..."),"string"==typeof Se)return ke(Se,oe,ye);var Ne="application/octet-stream"===Se.type,it=/constructor/i.test(Ie.HTMLElement)||Ie.safari,rt=/CriOS\/[\d]+/.test(navigator.userAgent);if((rt||Ne&&it)&&"object"==typeof FileReader){var Ge=new FileReader;Ge.onloadend=function(){var Ot=Ge.result;Ot=rt?Ot:Ot.replace(/^data:[^;]*;/,"data:attachment/file;"),Re?Re.location.href=Ot:location=Ot,Re=null},Ge.readAsDataURL(Se)}else{var Ft=Ie.URL||Ie.webkitURL,an=Ft.createObjectURL(Se);Re?Re.location=an:location.href=an,Re=null,setTimeout(function(){Ft.revokeObjectURL(an)},4e4)}});Ie.saveAs=Be.saveAs=Be,Yt.exports=Be}.apply(et,[]))&&(Yt.exports=l)},5386:(Yt,et,Q)=>{var C;!function(l,qe,ke,pe){"use strict";var Ge,Ae=["","webkit","Moz","MS","ms","o"],Ie=qe.createElement("div"),Se=Math.round,oe=Math.abs,ye=Date.now;function Re(j,ne,ge){return setTimeout(Pt(j,ge),ne)}function Ne(j,ne,ge){return!!Array.isArray(j)&&(it(j,ge[ne],ge),!0)}function it(j,ne,ge){var Fe;if(j)if(j.forEach)j.forEach(ne,ge);else if(j.length!==pe)for(Fe=0;Fe<j.length;)ne.call(ge,j[Fe],Fe,j),Fe++;else for(Fe in j)j.hasOwnProperty(Fe)&&ne.call(ge,j[Fe],Fe,j)}function rt(j,ne,ge){var Fe="DEPRECATED METHOD: "+ne+"\n"+ge+" AT \n";return function(){var dt=new Error("get-stack-trace"),Ut=dt&&dt.stack?dt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Bn=l.console&&(l.console.warn||l.console.log);return Bn&&Bn.call(l.console,Fe,Ut),j.apply(this,arguments)}}Ge="function"!=typeof Object.assign?function(ne){if(ne===pe||null===ne)throw new TypeError("Cannot convert undefined or null to object");for(var ge=Object(ne),Fe=1;Fe<arguments.length;Fe++){var dt=arguments[Fe];if(dt!==pe&&null!==dt)for(var Ut in dt)dt.hasOwnProperty(Ut)&&(ge[Ut]=dt[Ut])}return ge}:Object.assign;var Ft=rt(function(ne,ge,Fe){for(var dt=Object.keys(ge),Ut=0;Ut<dt.length;)(!Fe||Fe&&ne[dt[Ut]]===pe)&&(ne[dt[Ut]]=ge[dt[Ut]]),Ut++;return ne},"extend","Use `assign`."),an=rt(function(ne,ge){return Ft(ne,ge,!0)},"merge","Use `assign`.");function Ot(j,ne,ge){var dt,Fe=ne.prototype;(dt=j.prototype=Object.create(Fe)).constructor=j,dt._super=Fe,ge&&Ge(dt,ge)}function Pt(j,ne){return function(){return j.apply(ne,arguments)}}function Ui(j,ne){return"function"==typeof j?j.apply(ne&&ne[0]||pe,ne):j}function Mr(j,ne){return j===pe?ne:j}function fn(j,ne,ge){it(Rt(ne),function(Fe){j.addEventListener(Fe,ge,!1)})}function mt(j,ne,ge){it(Rt(ne),function(Fe){j.removeEventListener(Fe,ge,!1)})}function $e(j,ne){for(;j;){if(j==ne)return!0;j=j.parentNode}return!1}function tt(j,ne){return j.indexOf(ne)>-1}function Rt(j){return j.trim().split(/\s+/g)}function Ct(j,ne,ge){if(j.indexOf&&!ge)return j.indexOf(ne);for(var Fe=0;Fe<j.length;){if(ge&&j[Fe][ge]==ne||!ge&&j[Fe]===ne)return Fe;Fe++}return-1}function ut(j){return Array.prototype.slice.call(j,0)}function St(j,ne,ge){for(var Fe=[],dt=[],Ut=0;Ut<j.length;){var Bn=ne?j[Ut][ne]:j[Ut];Ct(dt,Bn)<0&&Fe.push(j[Ut]),dt[Ut]=Bn,Ut++}return ge&&(Fe=ne?Fe.sort(function(gi,Ln){return gi[ne]>Ln[ne]}):Fe.sort()),Fe}function kt(j,ne){for(var ge,Fe,dt=ne[0].toUpperCase()+ne.slice(1),Ut=0;Ut<Ae.length;){if((Fe=(ge=Ae[Ut])?ge+dt:ne)in j)return Fe;Ut++}return pe}var Bt=1;function Pi(j){var ne=j.ownerDocument||j;return ne.defaultView||ne.parentWindow||l}var xi="ontouchstart"in l,Or=kt(l,"PointerEvent")!==pe,$n=xi&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ir="touch",pi="mouse",lr=["x","y"],os=["clientX","clientY"];function Xe(j,ne){var ge=this;this.manager=j,this.callback=ne,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(Fe){Ui(j.options.enable,[j])&&ge.handler(Fe)},this.init()}function Te(j,ne,ge){var Fe=ge.pointers.length,dt=ge.changedPointers.length,Ut=1&ne&&Fe-dt==0,Bn=12&ne&&Fe-dt==0;ge.isFirst=!!Ut,ge.isFinal=!!Bn,Ut&&(j.session={}),ge.eventType=ne,function de(j,ne){var ge=j.session,Fe=ne.pointers,dt=Fe.length;ge.firstInput||(ge.firstInput=fe(ne)),dt>1&&!ge.firstMultiple?ge.firstMultiple=fe(ne):1===dt&&(ge.firstMultiple=!1);var Ut=ge.firstInput,Bn=ge.firstMultiple,Ti=Bn?Bn.center:Ut.center,gi=ne.center=Ce(Fe);ne.timeStamp=ye(),ne.deltaTime=ne.timeStamp-Ut.timeStamp,ne.angle=Kn(Ti,gi),ne.distance=Lt(Ti,gi),function ve(j,ne){var ge=ne.center,Fe=j.offsetDelta||{},dt=j.prevDelta||{},Ut=j.prevInput||{};(1===ne.eventType||4===Ut.eventType)&&(dt=j.prevDelta={x:Ut.deltaX||0,y:Ut.deltaY||0},Fe=j.offsetDelta={x:ge.x,y:ge.y}),ne.deltaX=dt.x+(ge.x-Fe.x),ne.deltaY=dt.y+(ge.y-Fe.y)}(ge,ne),ne.offsetDirection=ft(ne.deltaX,ne.deltaY);var Ln=nt(ne.deltaTime,ne.deltaX,ne.deltaY);ne.overallVelocityX=Ln.x,ne.overallVelocityY=Ln.y,ne.overallVelocity=oe(Ln.x)>oe(Ln.y)?Ln.x:Ln.y,ne.scale=Bn?function on(j,ne){return Lt(ne[0],ne[1],os)/Lt(j[0],j[1],os)}(Bn.pointers,Fe):1,ne.rotation=Bn?function ri(j,ne){return Kn(ne[1],ne[0],os)+Kn(j[1],j[0],os)}(Bn.pointers,Fe):0,ne.maxPointers=ge.prevInput?ne.pointers.length>ge.prevInput.maxPointers?ne.pointers.length:ge.prevInput.maxPointers:ne.pointers.length,function ee(j,ne){var dt,Ut,Bn,Ti,ge=j.lastInterval||ne,Fe=ne.timeStamp-ge.timeStamp;if(8!=ne.eventType&&(Fe>25||ge.velocity===pe)){var gi=ne.deltaX-ge.deltaX,Ln=ne.deltaY-ge.deltaY,ds=nt(Fe,gi,Ln);Ut=ds.x,Bn=ds.y,dt=oe(ds.x)>oe(ds.y)?ds.x:ds.y,Ti=ft(gi,Ln),j.lastInterval=ne}else dt=ge.velocity,Ut=ge.velocityX,Bn=ge.velocityY,Ti=ge.direction;ne.velocity=dt,ne.velocityX=Ut,ne.velocityY=Bn,ne.direction=Ti}(ge,ne);var ds=j.element;$e(ne.srcEvent.target,ds)&&(ds=ne.srcEvent.target),ne.target=ds}(j,ge),j.emit("hammer.input",ge),j.recognize(ge),j.session.prevInput=ge}function fe(j){for(var ne=[],ge=0;ge<j.pointers.length;)ne[ge]={clientX:Se(j.pointers[ge].clientX),clientY:Se(j.pointers[ge].clientY)},ge++;return{timeStamp:ye(),pointers:ne,center:Ce(ne),deltaX:j.deltaX,deltaY:j.deltaY}}function Ce(j){var ne=j.length;if(1===ne)return{x:Se(j[0].clientX),y:Se(j[0].clientY)};for(var ge=0,Fe=0,dt=0;dt<ne;)ge+=j[dt].clientX,Fe+=j[dt].clientY,dt++;return{x:Se(ge/ne),y:Se(Fe/ne)}}function nt(j,ne,ge){return{x:ne/j||0,y:ge/j||0}}function ft(j,ne){return j===ne?1:oe(j)>=oe(ne)?j<0?2:4:ne<0?8:16}function Lt(j,ne,ge){ge||(ge=lr);var Fe=ne[ge[0]]-j[ge[0]],dt=ne[ge[1]]-j[ge[1]];return Math.sqrt(Fe*Fe+dt*dt)}function Kn(j,ne,ge){return ge||(ge=lr),180*Math.atan2(ne[ge[1]]-j[ge[1]],ne[ge[0]]-j[ge[0]])/Math.PI}Xe.prototype={handler:function(){},init:function(){this.evEl&&fn(this.element,this.evEl,this.domHandler),this.evTarget&&fn(this.target,this.evTarget,this.domHandler),this.evWin&&fn(Pi(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&mt(this.element,this.evEl,this.domHandler),this.evTarget&&mt(this.target,this.evTarget,this.domHandler),this.evWin&&mt(Pi(this.element),this.evWin,this.domHandler)}};var bn={mousedown:1,mousemove:2,mouseup:4},wn="mousedown",Hn="mousemove mouseup";function Ki(){this.evEl=wn,this.evWin=Hn,this.pressed=!1,Xe.apply(this,arguments)}Ot(Ki,Xe,{handler:function(ne){var ge=bn[ne.type];1&ge&&0===ne.button&&(this.pressed=!0),2&ge&&1!==ne.which&&(ge=4),this.pressed&&(4&ge&&(this.pressed=!1),this.callback(this.manager,ge,{pointers:[ne],changedPointers:[ne],pointerType:pi,srcEvent:ne}))}});var Nn={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},vo={2:ir,3:"pen",4:pi,5:"kinect"},ai="pointerdown",cr="pointermove pointerup pointercancel";function ti(){this.evEl=ai,this.evWin=cr,Xe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}l.MSPointerEvent&&!l.PointerEvent&&(ai="MSPointerDown",cr="MSPointerMove MSPointerUp MSPointerCancel"),Ot(ti,Xe,{handler:function(ne){var ge=this.store,Fe=!1,dt=ne.type.toLowerCase().replace("ms",""),Ut=Nn[dt],Bn=vo[ne.pointerType]||ne.pointerType,Ti=Bn==ir,gi=Ct(ge,ne.pointerId,"pointerId");1&Ut&&(0===ne.button||Ti)?gi<0&&(ge.push(ne),gi=ge.length-1):12&Ut&&(Fe=!0),!(gi<0)&&(ge[gi]=ne,this.callback(this.manager,Ut,{pointers:ge,changedPointers:[ne],pointerType:Bn,srcEvent:ne}),Fe&&ge.splice(gi,1))}});var Yr={touchstart:1,touchmove:2,touchend:4,touchcancel:8},_s="touchstart",xs="touchstart touchmove touchend touchcancel";function as(){this.evTarget=_s,this.evWin=xs,this.started=!1,Xe.apply(this,arguments)}function ur(j,ne){var ge=ut(j.touches),Fe=ut(j.changedTouches);return 12&ne&&(ge=St(ge.concat(Fe),"identifier",!0)),[ge,Fe]}Ot(as,Xe,{handler:function(ne){var ge=Yr[ne.type];if(1===ge&&(this.started=!0),this.started){var Fe=ur.call(this,ne,ge);12&ge&&Fe[0].length-Fe[1].length==0&&(this.started=!1),this.callback(this.manager,ge,{pointers:Fe[0],changedPointers:Fe[1],pointerType:ir,srcEvent:ne})}}});var Ds={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Uo="touchstart touchmove touchend touchcancel";function Nr(){this.evTarget=Uo,this.targetIds={},Xe.apply(this,arguments)}function Fs(j,ne){var ge=ut(j.touches),Fe=this.targetIds;if(3&ne&&1===ge.length)return Fe[ge[0].identifier]=!0,[ge,ge];var dt,Ut,Bn=ut(j.changedTouches),Ti=[],gi=this.target;if(Ut=ge.filter(function(Ln){return $e(Ln.target,gi)}),1===ne)for(dt=0;dt<Ut.length;)Fe[Ut[dt].identifier]=!0,dt++;for(dt=0;dt<Bn.length;)Fe[Bn[dt].identifier]&&Ti.push(Bn[dt]),12&ne&&delete Fe[Bn[dt].identifier],dt++;return Ti.length?[St(Ut.concat(Ti),"identifier",!0),Ti]:void 0}function Hr(){Xe.apply(this,arguments);var j=Pt(this.handler,this);this.touch=new Nr(this.manager,j),this.mouse=new Ki(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}function rr(j,ne){1&j?(this.primaryTouch=ne.changedPointers[0].identifier,Ni.call(this,ne)):12&j&&Ni.call(this,ne)}function Ni(j){var ne=j.changedPointers[0];if(ne.identifier===this.primaryTouch){var ge={x:ne.clientX,y:ne.clientY};this.lastTouches.push(ge);var Fe=this.lastTouches;setTimeout(function(){var Ut=Fe.indexOf(ge);Ut>-1&&Fe.splice(Ut,1)},2500)}}function Fr(j){for(var ne=j.srcEvent.clientX,ge=j.srcEvent.clientY,Fe=0;Fe<this.lastTouches.length;Fe++){var dt=this.lastTouches[Fe],Ut=Math.abs(ne-dt.x),Bn=Math.abs(ge-dt.y);if(Ut<=25&&Bn<=25)return!0}return!1}Ot(Nr,Xe,{handler:function(ne){var ge=Ds[ne.type],Fe=Fs.call(this,ne,ge);!Fe||this.callback(this.manager,ge,{pointers:Fe[0],changedPointers:Fe[1],pointerType:ir,srcEvent:ne})}}),Ot(Hr,Xe,{handler:function(ne,ge,Fe){var Ut=Fe.pointerType==pi;if(!(Ut&&Fe.sourceCapabilities&&Fe.sourceCapabilities.firesTouchEvents)){if(Fe.pointerType==ir)rr.call(this,ge,Fe);else if(Ut&&Fr.call(this,Fe))return;this.callback(ne,ge,Fe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Xr=kt(Ie.style,"touchAction"),Rs=Xr!==pe,Yi="compute",dr="manipulation",Fi="none",gr="pan-x",Kr="pan-y",mr=function Ji(){if(!Rs)return!1;var j={},ne=l.CSS&&l.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(ge){j[ge]=!ne||l.CSS.supports("touch-action",ge)}),j}();function ls(j,ne){this.manager=j,this.set(ne)}function kn(j){this.options=Ge({},this.defaults,j||{}),this.id=function hn(){return Bt++}(),this.manager=null,this.options.enable=Mr(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ki(j){return 16&j?"cancel":8&j?"end":4&j?"move":2&j?"start":""}function Si(j){return 16==j?"down":8==j?"up":2==j?"left":4==j?"right":""}function hr(j,ne){var ge=ne.manager;return ge?ge.get(j):j}function er(){kn.apply(this,arguments)}function un(){er.apply(this,arguments),this.pX=null,this.pY=null}function sr(){er.apply(this,arguments)}function zr(){kn.apply(this,arguments),this._timer=null,this._input=null}function Wi(){er.apply(this,arguments)}function Sr(){er.apply(this,arguments)}function Ci(){kn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Cr(j,ne){return(ne=ne||{}).recognizers=Mr(ne.recognizers,Cr.defaults.preset),new li(j,ne)}function li(j,ne){this.options=Ge({},Cr.defaults,ne||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=function Ee(j){return new(j.options.inputClass||(Or?ti:$n?Nr:xi?Hr:Ki))(j,Te)}(this),this.touchAction=new ls(this,this.options.touchAction),bs(this,!0),it(this.options.recognizers,function(ge){var Fe=this.add(new ge[0](ge[1]));ge[2]&&Fe.recognizeWith(ge[2]),ge[3]&&Fe.requireFailure(ge[3])},this)}function bs(j,ne){var Fe,ge=j.element;ge.style&&(it(j.options.cssProps,function(dt,Ut){Fe=kt(ge.style,Ut),ne?(j.oldCssProps[Fe]=ge.style[Fe],ge.style[Fe]=dt):ge.style[Fe]=j.oldCssProps[Fe]||""}),ne||(j.oldCssProps={}))}ls.prototype={set:function(j){j==Yi&&(j=this.compute()),Rs&&this.manager.element.style&&mr[j]&&(this.manager.element.style[Xr]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return it(this.manager.recognizers,function(ne){Ui(ne.options.enable,[ne])&&(j=j.concat(ne.getTouchAction()))}),function cs(j){if(tt(j,Fi))return Fi;var ne=tt(j,gr),ge=tt(j,Kr);return ne&&ge?Fi:ne||ge?ne?gr:Kr:tt(j,dr)?dr:"auto"}(j.join(" "))},preventDefaults:function(j){var ne=j.srcEvent,ge=j.offsetDirection;if(!this.manager.session.prevented){var Fe=this.actions,dt=tt(Fe,Fi)&&!mr[Fi],Ut=tt(Fe,Kr)&&!mr[Kr],Bn=tt(Fe,gr)&&!mr[gr];if(dt&&1===j.pointers.length&&j.distance<2&&j.deltaTime<250)return;return Bn&&Ut||!(dt||Ut&&6&ge||Bn&&24&ge)?void 0:this.preventSrc(ne)}ne.preventDefault()},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}},kn.prototype={defaults:{},set:function(j){return Ge(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(Ne(j,"recognizeWith",this))return this;var ne=this.simultaneous;return ne[(j=hr(j,this)).id]||(ne[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return Ne(j,"dropRecognizeWith",this)||(j=hr(j,this),delete this.simultaneous[j.id]),this},requireFailure:function(j){if(Ne(j,"requireFailure",this))return this;var ne=this.requireFail;return-1===Ct(ne,j=hr(j,this))&&(ne.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(Ne(j,"dropRequireFailure",this))return this;j=hr(j,this);var ne=Ct(this.requireFail,j);return ne>-1&&this.requireFail.splice(ne,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){var ne=this,ge=this.state;function Fe(dt){ne.manager.emit(dt,j)}ge<8&&Fe(ne.options.event+ki(ge)),Fe(ne.options.event),j.additionalEvent&&Fe(j.additionalEvent),ge>=8&&Fe(ne.options.event+ki(ge))},tryEmit:function(j){if(this.canEmit())return this.emit(j);this.state=32},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(33&this.requireFail[j].state))return!1;j++}return!0},recognize:function(j){var ne=Ge({},j);if(!Ui(this.options.enable,[this,ne]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(ne),30&this.state&&this.tryEmit(ne)},process:function(j){},getTouchAction:function(){},reset:function(){}},Ot(er,kn,{defaults:{pointers:1},attrTest:function(j){var ne=this.options.pointers;return 0===ne||j.pointers.length===ne},process:function(j){var ne=this.state,ge=j.eventType,Fe=6&ne,dt=this.attrTest(j);return Fe&&(8&ge||!dt)?16|ne:Fe||dt?4&ge?8|ne:2&ne?4|ne:2:32}}),Ot(un,er,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var j=this.options.direction,ne=[];return 6&j&&ne.push(Kr),24&j&&ne.push(gr),ne},directionTest:function(j){var ne=this.options,ge=!0,Fe=j.distance,dt=j.direction,Ut=j.deltaX,Bn=j.deltaY;return dt&ne.direction||(6&ne.direction?(dt=0===Ut?1:Ut<0?2:4,ge=Ut!=this.pX,Fe=Math.abs(j.deltaX)):(dt=0===Bn?1:Bn<0?8:16,ge=Bn!=this.pY,Fe=Math.abs(j.deltaY))),j.direction=dt,ge&&Fe>ne.threshold&&dt&ne.direction},attrTest:function(j){return er.prototype.attrTest.call(this,j)&&(2&this.state||!(2&this.state)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var ne=Si(j.direction);ne&&(j.additionalEvent=this.options.event+ne),this._super.emit.call(this,j)}}),Ot(sr,er,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Fi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||2&this.state)},emit:function(j){1!==j.scale&&(j.additionalEvent=this.options.event+(j.scale<1?"in":"out")),this._super.emit.call(this,j)}}),Ot(zr,kn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(j){var ne=this.options,ge=j.pointers.length===ne.pointers,Fe=j.distance<ne.threshold,dt=j.deltaTime>ne.time;if(this._input=j,!Fe||!ge||12&j.eventType&&!dt)this.reset();else if(1&j.eventType)this.reset(),this._timer=Re(function(){this.state=8,this.tryEmit()},ne.time,this);else if(4&j.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(j){8===this.state&&(j&&4&j.eventType?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=ye(),this.manager.emit(this.options.event,this._input)))}}),Ot(Wi,er,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Fi]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||2&this.state)}}),Ot(Sr,er,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return un.prototype.getTouchAction.call(this)},attrTest:function(j){var ge,ne=this.options.direction;return 30&ne?ge=j.overallVelocity:6&ne?ge=j.overallVelocityX:24&ne&&(ge=j.overallVelocityY),this._super.attrTest.call(this,j)&&ne&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&oe(ge)>this.options.velocity&&4&j.eventType},emit:function(j){var ne=Si(j.offsetDirection);ne&&this.manager.emit(this.options.event+ne,j),this.manager.emit(this.options.event,j)}}),Ot(Ci,kn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[dr]},process:function(j){var ne=this.options,ge=j.pointers.length===ne.pointers,Fe=j.distance<ne.threshold,dt=j.deltaTime<ne.time;if(this.reset(),1&j.eventType&&0===this.count)return this.failTimeout();if(Fe&&dt&&ge){if(4!=j.eventType)return this.failTimeout();var Ut=!this.pTime||j.timeStamp-this.pTime<ne.interval,Bn=!this.pCenter||Lt(this.pCenter,j.center)<ne.posThreshold;if(this.pTime=j.timeStamp,this.pCenter=j.center,Bn&&Ut?this.count+=1:this.count=1,this._input=j,0==this.count%ne.taps)return this.hasRequireFailures()?(this._timer=Re(function(){this.state=8,this.tryEmit()},ne.interval,this),2):8}return 32},failTimeout:function(){return this._timer=Re(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Cr.VERSION="2.0.7",Cr.defaults={domEvents:!1,touchAction:Yi,enable:!0,inputTarget:null,inputClass:null,preset:[[Wi,{enable:!1}],[sr,{enable:!1},["rotate"]],[Sr,{direction:6}],[un,{direction:6},["swipe"]],[Ci],[Ci,{event:"doubletap",taps:2},["tap"]],[zr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},li.prototype={set:function(j){return Ge(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?2:1},recognize:function(j){var ne=this.session;if(!ne.stopped){this.touchAction.preventDefaults(j);var ge,Fe=this.recognizers,dt=ne.curRecognizer;(!dt||dt&&8&dt.state)&&(dt=ne.curRecognizer=null);for(var Ut=0;Ut<Fe.length;)ge=Fe[Ut],2===ne.stopped||dt&&ge!=dt&&!ge.canRecognizeWith(dt)?ge.reset():ge.recognize(j),!dt&&14&ge.state&&(dt=ne.curRecognizer=ge),Ut++}},get:function(j){if(j instanceof kn)return j;for(var ne=this.recognizers,ge=0;ge<ne.length;ge++)if(ne[ge].options.event==j)return ne[ge];return null},add:function(j){if(Ne(j,"add",this))return this;var ne=this.get(j.options.event);return ne&&this.remove(ne),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(Ne(j,"remove",this))return this;if(j=this.get(j)){var ne=this.recognizers,ge=Ct(ne,j);-1!==ge&&(ne.splice(ge,1),this.touchAction.update())}return this},on:function(j,ne){if(j!==pe&&ne!==pe){var ge=this.handlers;return it(Rt(j),function(Fe){ge[Fe]=ge[Fe]||[],ge[Fe].push(ne)}),this}},off:function(j,ne){if(j!==pe){var ge=this.handlers;return it(Rt(j),function(Fe){ne?ge[Fe]&&ge[Fe].splice(Ct(ge[Fe],ne),1):delete ge[Fe]}),this}},emit:function(j,ne){this.options.domEvents&&function us(j,ne){var ge=qe.createEvent("Event");ge.initEvent(j,!0,!0),ge.gesture=ne,ne.target.dispatchEvent(ge)}(j,ne);var ge=this.handlers[j]&&this.handlers[j].slice();if(ge&&ge.length){ne.type=j,ne.preventDefault=function(){ne.srcEvent.preventDefault()};for(var Fe=0;Fe<ge.length;)ge[Fe](ne),Fe++}},destroy:function(){this.element&&bs(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},Ge(Cr,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:li,Input:Xe,TouchAction:ls,TouchInput:Nr,MouseInput:Ki,PointerEventInput:ti,TouchMouseInput:Hr,SingleTouchInput:as,Recognizer:kn,AttrRecognizer:er,Tap:Ci,Pan:un,Swipe:Sr,Pinch:sr,Rotate:Wi,Press:zr,on:fn,off:mt,each:it,merge:an,extend:Ft,assign:Ge,inherit:Ot,bindFn:Pt,prefixed:kt}),(void 0!==l?l:"undefined"!=typeof self?self:{}).Hammer=Cr,(C=function(){return Cr}.call(et,Q,et,Yt))!==pe&&(Yt.exports=C)}(window,document)},591:(Yt,et,Q)=>{"use strict";Q.d(et,{X:()=>qe});var C=Q(8929),l=Q(5279);class qe extends C.xQ{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const Ae=super._subscribe(pe);return Ae&&!Ae.closed&&pe.next(this._value),Ae}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.N;return this._value}next(pe){super.next(this._value=pe)}}},1869:(Yt,et,Q)=>{"use strict";Q.d(et,{d:()=>l});var C=Q(3489);class l extends C.L{constructor(ke,pe,Ae){super(),this.parent=ke,this.outerValue=pe,this.outerIndex=Ae,this.index=0}_next(ke){this.parent.notifyNext(this.outerValue,ke,this.outerIndex,this.index++,this)}_error(ke){this.parent.notifyError(ke,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},2916:(Yt,et,Q)=>{"use strict";Q.d(et,{y:()=>ye});var C=Q(3489),qe=Q(7668),ke=Q(3292),Ae=Q(3821),Ie=Q(7876);var oe=Q(2830);let ye=(()=>{class Ne{constructor(rt){this._isScalar=!1,rt&&(this._subscribe=rt)}lift(rt){const Ge=new Ne;return Ge.source=this,Ge.operator=rt,Ge}subscribe(rt,Ge,Ft){const{operator:an}=this,Ot=function pe(Ne,it,rt){if(Ne){if(Ne instanceof C.L)return Ne;if(Ne[qe.b])return Ne[qe.b]()}return Ne||it||rt?new C.L(Ne,it,rt):new C.L(ke.c)}(rt,Ge,Ft);if(Ot.add(an?an.call(Ot,this.source):this.source||oe.v.useDeprecatedSynchronousErrorHandling&&!Ot.syncErrorThrowable?this._subscribe(Ot):this._trySubscribe(Ot)),oe.v.useDeprecatedSynchronousErrorHandling&&Ot.syncErrorThrowable&&(Ot.syncErrorThrowable=!1,Ot.syncErrorThrown))throw Ot.syncErrorValue;return Ot}_trySubscribe(rt){try{return this._subscribe(rt)}catch(Ge){oe.v.useDeprecatedSynchronousErrorHandling&&(rt.syncErrorThrown=!0,rt.syncErrorValue=Ge),function l(Ne){for(;Ne;){const{closed:it,destination:rt,isStopped:Ge}=Ne;if(it||Ge)return!1;Ne=rt&&rt instanceof C.L?rt:null}return!0}(rt)?rt.error(Ge):console.warn(Ge)}}forEach(rt,Ge){return new(Ge=Re(Ge))((Ft,an)=>{let Ot;Ot=this.subscribe(Pt=>{try{rt(Pt)}catch(Ui){an(Ui),Ot&&Ot.unsubscribe()}},an,Ft)})}_subscribe(rt){const{source:Ge}=this;return Ge&&Ge.subscribe(rt)}[Ae.L](){return this}pipe(...rt){return 0===rt.length?this:function Se(Ne){return Ne?1===Ne.length?Ne[0]:function(rt){return Ne.reduce((Ge,Ft)=>Ft(Ge),rt)}:Ie.Z}(rt)(this)}toPromise(rt){return new(rt=Re(rt))((Ge,Ft)=>{let an;this.subscribe(Ot=>an=Ot,Ot=>Ft(Ot),()=>Ge(an))})}}return Ne.create=it=>new Ne(it),Ne})();function Re(Ne){if(Ne||(Ne=oe.v.Promise||Promise),!Ne)throw new Error("no Promise impl found");return Ne}},3292:(Yt,et,Q)=>{"use strict";Q.d(et,{c:()=>qe});var C=Q(2830),l=Q(2782);const qe={closed:!0,next(ke){},error(ke){if(C.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,l.z)(ke)},complete(){}}},826:(Yt,et,Q)=>{"use strict";Q.d(et,{L:()=>l});var C=Q(3489);class l extends C.L{notifyNext(ke,pe,Ae,Ie,Be){this.destination.next(pe)}notifyError(ke,pe){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},8929:(Yt,et,Q)=>{"use strict";Q.d(et,{Yc:()=>Ie,xQ:()=>Be});var C=Q(2916),l=Q(3489),qe=Q(2654),ke=Q(5279),pe=Q(5283),Ae=Q(7668);class Ie extends l.L{constructor(ye){super(ye),this.destination=ye}}let Be=(()=>{class oe extends C.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ae.b](){return new Ie(this)}lift(Re){const Ne=new Se(this,this);return Ne.operator=Re,Ne}next(Re){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:Ne}=this,it=Ne.length,rt=Ne.slice();for(let Ge=0;Ge<it;Ge++)rt[Ge].next(Re)}}error(Re){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=Re,this.isStopped=!0;const{observers:Ne}=this,it=Ne.length,rt=Ne.slice();for(let Ge=0;Ge<it;Ge++)rt[Ge].error(Re);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:Re}=this,Ne=Re.length,it=Re.slice();for(let rt=0;rt<Ne;rt++)it[rt].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Re){if(this.closed)throw new ke.N;return super._trySubscribe(Re)}_subscribe(Re){if(this.closed)throw new ke.N;return this.hasError?(Re.error(this.thrownError),qe.w.EMPTY):this.isStopped?(Re.complete(),qe.w.EMPTY):(this.observers.push(Re),new pe.W(this,Re))}asObservable(){const Re=new C.y;return Re.source=this,Re}}return oe.create=(ye,Re)=>new Se(ye,Re),oe})();class Se extends Be{constructor(ye,Re){super(),this.destination=ye,this.source=Re}next(ye){const{destination:Re}=this;Re&&Re.next&&Re.next(ye)}error(ye){const{destination:Re}=this;Re&&Re.error&&this.destination.error(ye)}complete(){const{destination:ye}=this;ye&&ye.complete&&this.destination.complete()}_subscribe(ye){const{source:Re}=this;return Re?this.source.subscribe(ye):qe.w.EMPTY}}},5283:(Yt,et,Q)=>{"use strict";Q.d(et,{W:()=>l});var C=Q(2654);class l extends C.w{constructor(ke,pe){super(),this.subject=ke,this.subscriber=pe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,pe=ke.observers;if(this.subject=null,!pe||0===pe.length||ke.isStopped||ke.closed)return;const Ae=pe.indexOf(this.subscriber);-1!==Ae&&pe.splice(Ae,1)}}},3489:(Yt,et,Q)=>{"use strict";Q.d(et,{L:()=>Ie});var C=Q(7043),l=Q(3292),qe=Q(2654),ke=Q(7668),pe=Q(2830),Ae=Q(2782);class Ie extends qe.w{constructor(oe,ye,Re){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l.c;break;case 1:if(!oe){this.destination=l.c;break}if("object"==typeof oe){oe instanceof Ie?(this.syncErrorThrowable=oe.syncErrorThrowable,this.destination=oe,oe.add(this)):(this.syncErrorThrowable=!0,this.destination=new Be(this,oe));break}default:this.syncErrorThrowable=!0,this.destination=new Be(this,oe,ye,Re)}}[ke.b](){return this}static create(oe,ye,Re){const Ne=new Ie(oe,ye,Re);return Ne.syncErrorThrowable=!1,Ne}next(oe){this.isStopped||this._next(oe)}error(oe){this.isStopped||(this.isStopped=!0,this._error(oe))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(oe){this.destination.next(oe)}_error(oe){this.destination.error(oe),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:oe}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=oe,this}}class Be extends Ie{constructor(oe,ye,Re,Ne){super(),this._parentSubscriber=oe;let it,rt=this;(0,C.m)(ye)?it=ye:ye&&(it=ye.next,Re=ye.error,Ne=ye.complete,ye!==l.c&&(rt=Object.create(ye),(0,C.m)(rt.unsubscribe)&&this.add(rt.unsubscribe.bind(rt)),rt.unsubscribe=this.unsubscribe.bind(this))),this._context=rt,this._next=it,this._error=Re,this._complete=Ne}next(oe){if(!this.isStopped&&this._next){const{_parentSubscriber:ye}=this;pe.v.useDeprecatedSynchronousErrorHandling&&ye.syncErrorThrowable?this.__tryOrSetError(ye,this._next,oe)&&this.unsubscribe():this.__tryOrUnsub(this._next,oe)}}error(oe){if(!this.isStopped){const{_parentSubscriber:ye}=this,{useDeprecatedSynchronousErrorHandling:Re}=pe.v;if(this._error)Re&&ye.syncErrorThrowable?(this.__tryOrSetError(ye,this._error,oe),this.unsubscribe()):(this.__tryOrUnsub(this._error,oe),this.unsubscribe());else if(ye.syncErrorThrowable)Re?(ye.syncErrorValue=oe,ye.syncErrorThrown=!0):(0,Ae.z)(oe),this.unsubscribe();else{if(this.unsubscribe(),Re)throw oe;(0,Ae.z)(oe)}}}complete(){if(!this.isStopped){const{_parentSubscriber:oe}=this;if(this._complete){const ye=()=>this._complete.call(this._context);pe.v.useDeprecatedSynchronousErrorHandling&&oe.syncErrorThrowable?(this.__tryOrSetError(oe,ye),this.unsubscribe()):(this.__tryOrUnsub(ye),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(oe,ye){try{oe.call(this._context,ye)}catch(Re){if(this.unsubscribe(),pe.v.useDeprecatedSynchronousErrorHandling)throw Re;(0,Ae.z)(Re)}}__tryOrSetError(oe,ye,Re){if(!pe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ye.call(this._context,Re)}catch(Ne){return pe.v.useDeprecatedSynchronousErrorHandling?(oe.syncErrorValue=Ne,oe.syncErrorThrown=!0,!0):((0,Ae.z)(Ne),!0)}return!1}_unsubscribe(){const{_parentSubscriber:oe}=this;this._context=null,this._parentSubscriber=null,oe.unsubscribe()}}},2654:(Yt,et,Q)=>{"use strict";Q.d(et,{w:()=>Ae});var C=Q(6688),l=Q(7830),qe=Q(7043);const pe=(()=>{function Be(Se){return Error.call(this),this.message=Se?`${Se.length} errors occurred during unsubscription:\n${Se.map((oe,ye)=>`${ye+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Se,this}return Be.prototype=Object.create(Error.prototype),Be})();class Ae{constructor(Se){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Se&&(this._unsubscribe=Se)}unsubscribe(){let Se;if(this.closed)return;let{_parentOrParents:oe,_unsubscribe:ye,_subscriptions:Re}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,oe instanceof Ae)oe.remove(this);else if(null!==oe)for(let Ne=0;Ne<oe.length;++Ne)oe[Ne].remove(this);if((0,qe.m)(ye))try{ye.call(this)}catch(Ne){Se=Ne instanceof pe?Ie(Ne.errors):[Ne]}if((0,C.k)(Re)){let Ne=-1,it=Re.length;for(;++Ne<it;){const rt=Re[Ne];if((0,l.K)(rt))try{rt.unsubscribe()}catch(Ge){Se=Se||[],Ge instanceof pe?Se=Se.concat(Ie(Ge.errors)):Se.push(Ge)}}}if(Se)throw new pe(Se)}add(Se){let oe=Se;if(!Se)return Ae.EMPTY;switch(typeof Se){case"function":oe=new Ae(Se);case"object":if(oe===this||oe.closed||"function"!=typeof oe.unsubscribe)return oe;if(this.closed)return oe.unsubscribe(),oe;if(!(oe instanceof Ae)){const Ne=oe;oe=new Ae,oe._subscriptions=[Ne]}break;default:throw new Error("unrecognized teardown "+Se+" added to Subscription.")}let{_parentOrParents:ye}=oe;if(null===ye)oe._parentOrParents=this;else if(ye instanceof Ae){if(ye===this)return oe;oe._parentOrParents=[ye,this]}else{if(-1!==ye.indexOf(this))return oe;ye.push(this)}const Re=this._subscriptions;return null===Re?this._subscriptions=[oe]:Re.push(oe),oe}remove(Se){const oe=this._subscriptions;if(oe){const ye=oe.indexOf(Se);-1!==ye&&oe.splice(ye,1)}}}var Be;function Ie(Be){return Be.reduce((Se,oe)=>Se.concat(oe instanceof pe?oe.errors:oe),[])}Ae.EMPTY=((Be=new Ae).closed=!0,Be)},2830:(Yt,et,Q)=>{"use strict";Q.d(et,{v:()=>l});let C=!1;const l={Promise:void 0,set useDeprecatedSynchronousErrorHandling(qe){if(qe){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else C&&console.log("RxJS: Back to a better error behavior. Thank you. <3");C=qe},get useDeprecatedSynchronousErrorHandling(){return C}}},1762:(Yt,et,Q)=>{"use strict";Q.d(et,{c:()=>pe,N:()=>Ae});var C=Q(8929),l=Q(2916),qe=Q(2654),ke=Q(4327);class pe extends l.y{constructor(ye,Re){super(),this.source=ye,this.subjectFactory=Re,this._refCount=0,this._isComplete=!1}_subscribe(ye){return this.getSubject().subscribe(ye)}getSubject(){const ye=this._subject;return(!ye||ye.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ye=this._connection;return ye||(this._isComplete=!1,ye=this._connection=new qe.w,ye.add(this.source.subscribe(new Ie(this.getSubject(),this))),ye.closed&&(this._connection=null,ye=qe.w.EMPTY)),ye}refCount(){return(0,ke.x)()(this)}}const Ae=(()=>{const oe=pe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:oe._subscribe},_isComplete:{value:oe._isComplete,writable:!0},getSubject:{value:oe.getSubject},connect:{value:oe.connect},refCount:{value:oe.refCount}}})();class Ie extends C.Yc{constructor(ye,Re){super(ye),this.connectable=Re}_error(ye){this._unsubscribe(),super._error(ye)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ye=this.connectable;if(ye){this.connectable=null;const Re=ye._connection;ye._refCount=0,ye._subject=null,ye._connection=null,Re&&Re.unsubscribe()}}}},6053:(Yt,et,Q)=>{"use strict";Q.d(et,{aj:()=>Ie});var C=Q(2866),l=Q(6688),qe=Q(826),ke=Q(9054),pe=Q(3009);const Ae={};function Ie(...oe){let ye=null,Re=null;return(0,C.K)(oe[oe.length-1])&&(Re=oe.pop()),"function"==typeof oe[oe.length-1]&&(ye=oe.pop()),1===oe.length&&(0,l.k)(oe[0])&&(oe=oe[0]),(0,pe.n)(oe,Re).lift(new Be(ye))}class Be{constructor(ye){this.resultSelector=ye}call(ye,Re){return Re.subscribe(new Se(ye,this.resultSelector))}}class Se extends qe.L{constructor(ye,Re){super(ye),this.resultSelector=Re,this.active=0,this.values=[],this.observables=[]}_next(ye){this.values.push(Ae),this.observables.push(ye)}_complete(){const ye=this.observables,Re=ye.length;if(0===Re)this.destination.complete();else{this.active=Re,this.toRespond=Re;for(let Ne=0;Ne<Re;Ne++){const it=ye[Ne];this.add((0,ke.D)(this,it,it,Ne))}}}notifyComplete(ye){0==(this.active-=1)&&this.destination.complete()}notifyNext(ye,Re,Ne,it,rt){const Ge=this.values,an=this.toRespond?Ge[Ne]===Ae?--this.toRespond:this.toRespond:0;Ge[Ne]=Re,0===an&&(this.resultSelector?this._tryResultSelector(Ge):this.destination.next(Ge.slice()))}_tryResultSelector(ye){let Re;try{Re=this.resultSelector.apply(this,ye)}catch(Ne){return void this.destination.error(Ne)}this.destination.next(Re)}}},1221:(Yt,et,Q)=>{"use strict";Q.d(et,{z:()=>ke});var C=Q(1086),l=Q(9146);function ke(...pe){return function qe(){return(0,l.J)(1)}()((0,C.of)(...pe))}},8514:(Yt,et,Q)=>{"use strict";Q.d(et,{P:()=>ke});var C=Q(2916),l=Q(5254),qe=Q(8896);function ke(pe){return new C.y(Ae=>{let Ie;try{Ie=pe()}catch(Se){return void Ae.error(Se)}return(Ie?(0,l.D)(Ie):(0,qe.c)()).subscribe(Ae)})}},8896:(Yt,et,Q)=>{"use strict";Q.d(et,{E:()=>l,c:()=>qe});var C=Q(2916);const l=new C.y(pe=>pe.complete());function qe(pe){return pe?function ke(pe){return new C.y(Ae=>pe.schedule(()=>Ae.complete()))}(pe):l}},567:(Yt,et,Q)=>{"use strict";Q.d(et,{D:()=>Ae});var C=Q(2916),l=Q(6688),qe=Q(4850),ke=Q(7830),pe=Q(5254);function Ae(...Be){if(1===Be.length){const Se=Be[0];if((0,l.k)(Se))return Ie(Se,null);if((0,ke.K)(Se)&&Object.getPrototypeOf(Se)===Object.prototype){const oe=Object.keys(Se);return Ie(oe.map(ye=>Se[ye]),oe)}}if("function"==typeof Be[Be.length-1]){const Se=Be.pop();return Ie(Be=1===Be.length&&(0,l.k)(Be[0])?Be[0]:Be,null).pipe((0,qe.U)(oe=>Se(...oe)))}return Ie(Be,null)}function Ie(Be,Se){return new C.y(oe=>{const ye=Be.length;if(0===ye)return void oe.complete();const Re=new Array(ye);let Ne=0,it=0;for(let rt=0;rt<ye;rt++){const Ge=(0,pe.D)(Be[rt]);let Ft=!1;oe.add(Ge.subscribe({next:an=>{Ft||(Ft=!0,it++),Re[rt]=an},error:an=>oe.error(an),complete:()=>{Ne++,(Ne===ye||!Ft)&&(it===ye&&oe.next(Se?Se.reduce((an,Ot,Pt)=>(an[Ot]=Re[Pt],an),{}):Re),oe.complete())}}))}})}},5254:(Yt,et,Q)=>{"use strict";Q.d(et,{D:()=>rt});var C=Q(2916),l=Q(9249),qe=Q(2654),ke=Q(3821),Ie=Q(6454),Be=Q(5430),ye=Q(8955),Re=Q(8515);function rt(Ge,Ft){return Ft?function it(Ge,Ft){if(null!=Ge){if(function oe(Ge){return Ge&&"function"==typeof Ge[ke.L]}(Ge))return function pe(Ge,Ft){return new C.y(an=>{const Ot=new qe.w;return Ot.add(Ft.schedule(()=>{const Pt=Ge[ke.L]();Ot.add(Pt.subscribe({next(Ui){Ot.add(Ft.schedule(()=>an.next(Ui)))},error(Ui){Ot.add(Ft.schedule(()=>an.error(Ui)))},complete(){Ot.add(Ft.schedule(()=>an.complete()))}}))})),Ot})}(Ge,Ft);if((0,ye.t)(Ge))return function Ae(Ge,Ft){return new C.y(an=>{const Ot=new qe.w;return Ot.add(Ft.schedule(()=>Ge.then(Pt=>{Ot.add(Ft.schedule(()=>{an.next(Pt),Ot.add(Ft.schedule(()=>an.complete()))}))},Pt=>{Ot.add(Ft.schedule(()=>an.error(Pt)))}))),Ot})}(Ge,Ft);if((0,Re.z)(Ge))return(0,Ie.r)(Ge,Ft);if(function Ne(Ge){return Ge&&"function"==typeof Ge[Be.hZ]}(Ge)||"string"==typeof Ge)return function Se(Ge,Ft){if(!Ge)throw new Error("Iterable cannot be null");return new C.y(an=>{const Ot=new qe.w;let Pt;return Ot.add(()=>{Pt&&"function"==typeof Pt.return&&Pt.return()}),Ot.add(Ft.schedule(()=>{Pt=Ge[Be.hZ](),Ot.add(Ft.schedule(function(){if(an.closed)return;let Ui,Mr;try{const fn=Pt.next();Ui=fn.value,Mr=fn.done}catch(fn){return void an.error(fn)}Mr?an.complete():(an.next(Ui),this.schedule())}))})),Ot})}(Ge,Ft)}throw new TypeError((null!==Ge&&typeof Ge||Ge)+" is not observable")}(Ge,Ft):Ge instanceof C.y?Ge:new C.y((0,l.s)(Ge))}},3009:(Yt,et,Q)=>{"use strict";Q.d(et,{n:()=>ke});var C=Q(2916),l=Q(3650),qe=Q(6454);function ke(pe,Ae){return Ae?(0,qe.r)(pe,Ae):new C.y((0,l.V)(pe))}},1086:(Yt,et,Q)=>{"use strict";Q.d(et,{of:()=>ke});var C=Q(2866),l=Q(3009),qe=Q(6454);function ke(...pe){let Ae=pe[pe.length-1];return(0,C.K)(Ae)?(pe.pop(),(0,qe.r)(pe,Ae)):(0,l.n)(pe)}},7221:(Yt,et,Q)=>{"use strict";Q.d(et,{K:()=>ke});var C=Q(826),l=Q(1869),qe=Q(9054);function ke(Ie){return function(Se){const oe=new pe(Ie),ye=Se.lift(oe);return oe.caught=ye}}class pe{constructor(Be){this.selector=Be}call(Be,Se){return Se.subscribe(new Ae(Be,this.selector,this.caught))}}class Ae extends C.L{constructor(Be,Se,oe){super(Be),this.selector=Se,this.caught=oe}error(Be){if(!this.isStopped){let Se;try{Se=this.selector(Be,this.caught)}catch(Re){return void super.error(Re)}this._unsubscribeAndRecycle();const oe=new l.d(this,void 0,void 0);this.add(oe);const ye=(0,qe.D)(this,Se,void 0,void 0,oe);ye!==oe&&this.add(ye)}}}},1406:(Yt,et,Q)=>{"use strict";Q.d(et,{b:()=>l});var C=Q(1709);function l(qe,ke){return(0,C.zg)(qe,ke,1)}},2198:(Yt,et,Q)=>{"use strict";Q.d(et,{h:()=>l});var C=Q(3489);function l(pe,Ae){return function(Be){return Be.lift(new qe(pe,Ae))}}class qe{constructor(Ae,Ie){this.predicate=Ae,this.thisArg=Ie}call(Ae,Ie){return Ie.subscribe(new ke(Ae,this.predicate,this.thisArg))}}class ke extends C.L{constructor(Ae,Ie,Be){super(Ae),this.predicate=Ie,this.thisArg=Be,this.count=0}_next(Ae){let Ie;try{Ie=this.predicate.call(this.thisArg,Ae,this.count++)}catch(Be){return void this.destination.error(Be)}Ie&&this.destination.next(Ae)}}},4850:(Yt,et,Q)=>{"use strict";Q.d(et,{U:()=>l});var C=Q(3489);function l(pe,Ae){return function(Be){if("function"!=typeof pe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Be.lift(new qe(pe,Ae))}}class qe{constructor(Ae,Ie){this.project=Ae,this.thisArg=Ie}call(Ae,Ie){return Ie.subscribe(new ke(Ae,this.project,this.thisArg))}}class ke extends C.L{constructor(Ae,Ie,Be){super(Ae),this.project=Ie,this.count=0,this.thisArg=Be||this}_next(Ae){let Ie;try{Ie=this.project.call(this.thisArg,Ae,this.count++)}catch(Be){return void this.destination.error(Be)}this.destination.next(Ie)}}},9146:(Yt,et,Q)=>{"use strict";Q.d(et,{J:()=>qe});var C=Q(1709),l=Q(5379);function qe(ke=Number.POSITIVE_INFINITY){return(0,C.zg)(l.y,ke)}},1709:(Yt,et,Q)=>{"use strict";Q.d(et,{zg:()=>Ae});var C=Q(9054),l=Q(826),qe=Q(1869),ke=Q(4850),pe=Q(5254);function Ae(Se,oe,ye=Number.POSITIVE_INFINITY){return"function"==typeof oe?Re=>Re.pipe(Ae((Ne,it)=>(0,pe.D)(Se(Ne,it)).pipe((0,ke.U)((rt,Ge)=>oe(Ne,rt,it,Ge))),ye)):("number"==typeof oe&&(ye=oe),Re=>Re.lift(new Ie(Se,ye)))}class Ie{constructor(oe,ye=Number.POSITIVE_INFINITY){this.project=oe,this.concurrent=ye}call(oe,ye){return ye.subscribe(new Be(oe,this.project,this.concurrent))}}class Be extends l.L{constructor(oe,ye,Re=Number.POSITIVE_INFINITY){super(oe),this.project=ye,this.concurrent=Re,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(oe){this.active<this.concurrent?this._tryNext(oe):this.buffer.push(oe)}_tryNext(oe){let ye;const Re=this.index++;try{ye=this.project(oe,Re)}catch(Ne){return void this.destination.error(Ne)}this.active++,this._innerSub(ye,oe,Re)}_innerSub(oe,ye,Re){const Ne=new qe.d(this,ye,Re),it=this.destination;it.add(Ne);const rt=(0,C.D)(this,oe,void 0,void 0,Ne);rt!==Ne&&it.add(rt)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(oe,ye,Re,Ne,it){this.destination.next(ye)}notifyComplete(oe){const ye=this.buffer;this.remove(oe),this.active--,ye.length>0?this._next(ye.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},4327:(Yt,et,Q)=>{"use strict";Q.d(et,{x:()=>l});var C=Q(3489);function l(){return function(Ae){return Ae.lift(new qe(Ae))}}class qe{constructor(Ae){this.connectable=Ae}call(Ae,Ie){const{connectable:Be}=this;Be._refCount++;const Se=new ke(Ae,Be),oe=Ie.subscribe(Se);return Se.closed||(Se.connection=Be.connect()),oe}}class ke extends C.L{constructor(Ae,Ie){super(Ae),this.connectable=Ie}_unsubscribe(){const{connectable:Ae}=this;if(!Ae)return void(this.connection=null);this.connectable=null;const Ie=Ae._refCount;if(Ie<=0)return void(this.connection=null);if(Ae._refCount=Ie-1,Ie>1)return void(this.connection=null);const{connection:Be}=this,Se=Ae._connection;this.connection=null,Se&&(!Be||Se===Be)&&Se.unsubscribe()}}},1059:(Yt,et,Q)=>{"use strict";Q.d(et,{O:()=>qe});var C=Q(1221),l=Q(2866);function qe(...ke){const pe=ke[ke.length-1];return(0,l.K)(pe)?(ke.pop(),Ae=>(0,C.z)(ke,Ae,pe)):Ae=>(0,C.z)(ke,Ae)}},7545:(Yt,et,Q)=>{"use strict";Q.d(et,{w:()=>Ae});var C=Q(826),l=Q(1869),qe=Q(9054),ke=Q(4850),pe=Q(5254);function Ae(Se,oe){return"function"==typeof oe?ye=>ye.pipe(Ae((Re,Ne)=>(0,pe.D)(Se(Re,Ne)).pipe((0,ke.U)((it,rt)=>oe(Re,it,Ne,rt))))):ye=>ye.lift(new Ie(Se))}class Ie{constructor(oe){this.project=oe}call(oe,ye){return ye.subscribe(new Be(oe,this.project))}}class Be extends C.L{constructor(oe,ye){super(oe),this.project=ye,this.index=0}_next(oe){let ye;const Re=this.index++;try{ye=this.project(oe,Re)}catch(Ne){return void this.destination.error(Ne)}this._innerSub(ye,oe,Re)}_innerSub(oe,ye,Re){const Ne=this.innerSubscription;Ne&&Ne.unsubscribe();const it=new l.d(this,ye,Re),rt=this.destination;rt.add(it),this.innerSubscription=(0,qe.D)(this,oe,void 0,void 0,it),this.innerSubscription!==it&&rt.add(this.innerSubscription)}_complete(){const{innerSubscription:oe}=this;(!oe||oe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(oe){this.destination.remove(oe),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(oe,ye,Re,Ne,it){this.destination.next(ye)}}},2986:(Yt,et,Q)=>{"use strict";Q.d(et,{q:()=>ke});var C=Q(3489),l=Q(4231),qe=Q(8896);function ke(Ie){return Be=>0===Ie?(0,qe.c)():Be.lift(new pe(Ie))}class pe{constructor(Be){if(this.total=Be,this.total<0)throw new l.W}call(Be,Se){return Se.subscribe(new Ae(Be,this.total))}}class Ae extends C.L{constructor(Be,Se){super(Be),this.total=Se,this.count=0}_next(Be){const Se=this.total,oe=++this.count;oe<=Se&&(this.destination.next(Be),oe===Se&&(this.destination.complete(),this.unsubscribe()))}}},2994:(Yt,et,Q)=>{"use strict";Q.d(et,{b:()=>ke});var C=Q(3489),l=Q(7876),qe=Q(7043);function ke(Ie,Be,Se){return function(ye){return ye.lift(new pe(Ie,Be,Se))}}class pe{constructor(Be,Se,oe){this.nextOrObserver=Be,this.error=Se,this.complete=oe}call(Be,Se){return Se.subscribe(new Ae(Be,this.nextOrObserver,this.error,this.complete))}}class Ae extends C.L{constructor(Be,Se,oe,ye){super(Be),this._tapNext=l.Z,this._tapError=l.Z,this._tapComplete=l.Z,this._tapError=oe||l.Z,this._tapComplete=ye||l.Z,(0,qe.m)(Se)?(this._context=this,this._tapNext=Se):Se&&(this._context=Se,this._tapNext=Se.next||l.Z,this._tapError=Se.error||l.Z,this._tapComplete=Se.complete||l.Z)}_next(Be){try{this._tapNext.call(this._context,Be)}catch(Se){return void this.destination.error(Se)}this.destination.next(Be)}_error(Be){try{this._tapError.call(this._context,Be)}catch(Se){return void this.destination.error(Se)}this.destination.error(Be)}_complete(){try{this._tapComplete.call(this._context)}catch(Be){return void this.destination.error(Be)}return this.destination.complete()}}},6454:(Yt,et,Q)=>{"use strict";Q.d(et,{r:()=>qe});var C=Q(2916),l=Q(2654);function qe(ke,pe){return new C.y(Ae=>{const Ie=new l.w;let Be=0;return Ie.add(pe.schedule(function(){Be!==ke.length?(Ae.next(ke[Be++]),Ae.closed||Ie.add(this.schedule())):Ae.complete()})),Ie})}},6686:(Yt,et,Q)=>{"use strict";Q.d(et,{o:()=>qe});var C=Q(2654);class l extends C.w{constructor(pe,Ae){super()}schedule(pe,Ae=0){return this}}class qe extends l{constructor(pe,Ae){super(pe,Ae),this.scheduler=pe,this.work=Ae,this.pending=!1}schedule(pe,Ae=0){if(this.closed)return this;this.state=pe;const Ie=this.id,Be=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Be,Ie,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(Be,this.id,Ae),this}requestAsyncId(pe,Ae,Ie=0){return setInterval(pe.flush.bind(pe,this),Ie)}recycleAsyncId(pe,Ae,Ie=0){if(null!==Ie&&this.delay===Ie&&!1===this.pending)return Ae;clearInterval(Ae)}execute(pe,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(pe,Ae);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Ae){let Be,Ie=!1;try{this.work(pe)}catch(Se){Ie=!0,Be=!!Se&&Se||new Error(Se)}if(Ie)return this.unsubscribe(),Be}_unsubscribe(){const pe=this.id,Ae=this.scheduler,Ie=Ae.actions,Be=Ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Be&&Ie.splice(Be,1),null!=pe&&(this.id=this.recycleAsyncId(Ae,pe,null)),this.delay=null}}},2268:(Yt,et,Q)=>{"use strict";Q.d(et,{v:()=>l});let C=(()=>{class qe{constructor(pe,Ae=qe.now){this.SchedulerAction=pe,this.now=Ae}schedule(pe,Ae=0,Ie){return new this.SchedulerAction(this,pe).schedule(Ie,Ae)}}return qe.now=()=>Date.now(),qe})();class l extends C{constructor(ke,pe=C.now){super(ke,()=>l.delegate&&l.delegate!==this?l.delegate.now():pe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,pe=0,Ae){return l.delegate&&l.delegate!==this?l.delegate.schedule(ke,pe,Ae):super.schedule(ke,pe,Ae)}flush(ke){const{actions:pe}=this;if(this.active)return void pe.push(ke);let Ae;this.active=!0;do{if(Ae=ke.execute(ke.state,ke.delay))break}while(ke=pe.shift());if(this.active=!1,Ae){for(;ke=pe.shift();)ke.unsubscribe();throw Ae}}}},5430:(Yt,et,Q)=>{"use strict";Q.d(et,{hZ:()=>l});const l=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(Yt,et,Q)=>{"use strict";Q.d(et,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(Yt,et,Q)=>{"use strict";Q.d(et,{b:()=>C});const C="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(Yt,et,Q)=>{"use strict";Q.d(et,{W:()=>l});const l=(()=>{function qe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return qe.prototype=Object.create(Error.prototype),qe})()},5279:(Yt,et,Q)=>{"use strict";Q.d(et,{N:()=>l});const l=(()=>{function qe(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return qe.prototype=Object.create(Error.prototype),qe})()},2782:(Yt,et,Q)=>{"use strict";function C(l){setTimeout(()=>{throw l},0)}Q.d(et,{z:()=>C})},5379:(Yt,et,Q)=>{"use strict";function C(l){return l}Q.d(et,{y:()=>C})},6688:(Yt,et,Q)=>{"use strict";Q.d(et,{k:()=>C});const C=Array.isArray||(l=>l&&"number"==typeof l.length)},8515:(Yt,et,Q)=>{"use strict";Q.d(et,{z:()=>C});const C=l=>l&&"number"==typeof l.length&&"function"!=typeof l},7043:(Yt,et,Q)=>{"use strict";function C(l){return"function"==typeof l}Q.d(et,{m:()=>C})},7830:(Yt,et,Q)=>{"use strict";function C(l){return null!==l&&"object"==typeof l}Q.d(et,{K:()=>C})},8955:(Yt,et,Q)=>{"use strict";function C(l){return!!l&&"function"!=typeof l.subscribe&&"function"==typeof l.then}Q.d(et,{t:()=>C})},2866:(Yt,et,Q)=>{"use strict";function C(l){return l&&"function"==typeof l.schedule}Q.d(et,{K:()=>C})},7876:(Yt,et,Q)=>{"use strict";function C(){}Q.d(et,{Z:()=>C})},9249:(Yt,et,Q)=>{"use strict";Q.d(et,{s:()=>ye});var C=Q(3650),l=Q(2782),ke=Q(5430),Ae=Q(3821),Be=Q(8515),Se=Q(8955),oe=Q(7830);const ye=Re=>{if(Re&&"function"==typeof Re[Ae.L])return(Re=>Ne=>{const it=Re[Ae.L]();if("function"!=typeof it.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return it.subscribe(Ne)})(Re);if((0,Be.z)(Re))return(0,C.V)(Re);if((0,Se.t)(Re))return(Re=>Ne=>(Re.then(it=>{Ne.closed||(Ne.next(it),Ne.complete())},it=>Ne.error(it)).then(null,l.z),Ne))(Re);if(Re&&"function"==typeof Re[ke.hZ])return(Re=>Ne=>{const it=Re[ke.hZ]();for(;;){const rt=it.next();if(rt.done){Ne.complete();break}if(Ne.next(rt.value),Ne.closed)break}return"function"==typeof it.return&&Ne.add(()=>{it.return&&it.return()}),Ne})(Re);{const it=`You provided ${(0,oe.K)(Re)?"an invalid object":`'${Re}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(it)}}},3650:(Yt,et,Q)=>{"use strict";Q.d(et,{V:()=>C});const C=l=>qe=>{for(let ke=0,pe=l.length;ke<pe&&!qe.closed;ke++)qe.next(l[ke]);qe.complete()}},9054:(Yt,et,Q)=>{"use strict";Q.d(et,{D:()=>ke});var C=Q(1869),l=Q(9249),qe=Q(2916);function ke(pe,Ae,Ie,Be,Se=new C.d(pe,Ie,Be)){if(!Se.closed)return Ae instanceof qe.y?Ae.subscribe(Se):(0,l.s)(Ae)(Se)}},655:(Yt,et,Q)=>{"use strict";Q.d(et,{ZT:()=>l,mG:()=>Be});var C=function(mt,$e){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,Rt){tt.__proto__=Rt}||function(tt,Rt){for(var Ct in Rt)Rt.hasOwnProperty(Ct)&&(tt[Ct]=Rt[Ct])})(mt,$e)};function l(mt,$e){function tt(){this.constructor=mt}C(mt,$e),mt.prototype=null===$e?Object.create($e):(tt.prototype=$e.prototype,new tt)}function Be(mt,$e,tt,Rt){return new(tt||(tt=Promise))(function(ut,St){function kt(Pi){try{hn(Rt.next(Pi))}catch(di){St(di)}}function Bt(Pi){try{hn(Rt.throw(Pi))}catch(di){St(di)}}function hn(Pi){Pi.done?ut(Pi.value):function Ct(ut){return ut instanceof tt?ut:new tt(function(St){St(ut)})}(Pi.value).then(kt,Bt)}hn((Rt=Rt.apply(mt,$e||[])).next())})}},9808:(Yt,et,Q)=>{"use strict";Q.d(et,{mr:()=>Ot,Ov:()=>Ut,ez:()=>ea,K0:()=>Ie,Do:()=>Ui,V_:()=>oe,Ye:()=>Mr,S$:()=>Ft,sg:()=>Si,O5:()=>un,PC:()=>bs,b0:()=>Pt,lw:()=>Be,rS:()=>gi,EM:()=>wa,JF:()=>wo,NF:()=>Ys,w_:()=>Ae,bD:()=>Bs,q:()=>qe,Mx:()=>Qi,HT:()=>pe});var C=Q(2096);let l=null;function qe(){return l}function pe(k){l||(l=k)}class Ae{}const Ie=new C.OlP("DocumentToken");let Be=(()=>{class k{historyGo(U){throw new Error("Not implemented")}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275prov=C.Yz7({token:k,factory:function(){return function Se(){return(0,C.LFG)(ye)}()},providedIn:"platform"}),k})();const oe=new C.OlP("Location Initialized");let ye=(()=>{class k extends Be{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qe().getBaseHref(this._doc)}onPopState(U){const Y=qe().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",U,!1),()=>Y.removeEventListener("popstate",U)}onHashChange(U){const Y=qe().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",U,!1),()=>Y.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,Y,xe){Re()?this._history.pushState(U,Y,xe):this.location.hash=xe}replaceState(U,Y,xe){Re()?this._history.replaceState(U,Y,xe):this.location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return k.\u0275fac=function(U){return new(U||k)(C.LFG(Ie))},k.\u0275prov=C.Yz7({token:k,factory:function(){return function Ne(){return new ye((0,C.LFG)(Ie))}()},providedIn:"platform"}),k})();function Re(){return!!window.history.pushState}function it(k,q){if(0==k.length)return q;if(0==q.length)return k;let U=0;return k.endsWith("/")&&U++,q.startsWith("/")&&U++,2==U?k+q.substring(1):1==U?k+q:k+"/"+q}function rt(k){const q=k.match(/#|\?|$/),U=q&&q.index||k.length;return k.slice(0,U-("/"===k[U-1]?1:0))+k.slice(U)}function Ge(k){return k&&"?"!==k[0]?"?"+k:k}let Ft=(()=>{class k{historyGo(U){throw new Error("Not implemented")}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275prov=C.Yz7({token:k,factory:function(){return function an(k){const q=(0,C.LFG)(Ie).location;return new Pt((0,C.LFG)(Be),q&&q.origin||"")}()},providedIn:"root"}),k})();const Ot=new C.OlP("appBaseHref");let Pt=(()=>{class k extends Ft{constructor(U,Y){if(super(),this._platformLocation=U,this._removeListenerFns=[],null==Y&&(Y=this._platformLocation.getBaseHrefFromDOM()),null==Y)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Y}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return it(this._baseHref,U)}path(U=!1){const Y=this._platformLocation.pathname+Ge(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&U?`${Y}${xe}`:Y}pushState(U,Y,xe,ze){const at=this.prepareExternalUrl(xe+Ge(ze));this._platformLocation.pushState(U,Y,at)}replaceState(U,Y,xe,ze){const at=this.prepareExternalUrl(xe+Ge(ze));this._platformLocation.replaceState(U,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var Y,xe;null===(xe=(Y=this._platformLocation).historyGo)||void 0===xe||xe.call(Y,U)}}return k.\u0275fac=function(U){return new(U||k)(C.LFG(Be),C.LFG(Ot,8))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac}),k})(),Ui=(()=>{class k extends Ft{constructor(U,Y){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(U){const Y=it(this._baseHref,U);return Y.length>0?"#"+Y:Y}pushState(U,Y,xe,ze){let at=this.prepareExternalUrl(xe+Ge(ze));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.pushState(U,Y,at)}replaceState(U,Y,xe,ze){let at=this.prepareExternalUrl(xe+Ge(ze));0==at.length&&(at=this._platformLocation.pathname),this._platformLocation.replaceState(U,Y,at)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var Y,xe;null===(xe=(Y=this._platformLocation).historyGo)||void 0===xe||xe.call(Y,U)}}return k.\u0275fac=function(U){return new(U||k)(C.LFG(Be),C.LFG(Ot,8))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac}),k})(),Mr=(()=>{class k{constructor(U,Y){this._subject=new C.vpe,this._urlChangeListeners=[],this._platformStrategy=U;const xe=this._platformStrategy.getBaseHref();this._platformLocation=Y,this._baseHref=rt($e(xe)),this._platformStrategy.onPopState(ze=>{this._subject.emit({url:this.path(!0),pop:!0,state:ze.state,type:ze.type})})}path(U=!1){return this.normalize(this._platformStrategy.path(U))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(U,Y=""){return this.path()==this.normalize(U+Ge(Y))}normalize(U){return k.stripTrailingSlash(function mt(k,q){return k&&q.startsWith(k)?q.substring(k.length):q}(this._baseHref,$e(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._platformStrategy.prepareExternalUrl(U)}go(U,Y="",xe=null){this._platformStrategy.pushState(xe,"",U,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ge(Y)),xe)}replaceState(U,Y="",xe=null){this._platformStrategy.replaceState(xe,"",U,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ge(Y)),xe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(U=0){var Y,xe;null===(xe=(Y=this._platformStrategy).historyGo)||void 0===xe||xe.call(Y,U)}onUrlChange(U){this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)}))}_notifyUrlChangeListeners(U="",Y){this._urlChangeListeners.forEach(xe=>xe(U,Y))}subscribe(U,Y,xe){return this._subject.subscribe({next:U,error:Y,complete:xe})}}return k.normalizeQueryParams=Ge,k.joinWithSlash=it,k.stripTrailingSlash=rt,k.\u0275fac=function(U){return new(U||k)(C.LFG(Ft),C.LFG(Be))},k.\u0275prov=C.Yz7({token:k,factory:function(){return function fn(){return new Mr((0,C.LFG)(Ft),(0,C.LFG)(Be))}()},providedIn:"root"}),k})();function $e(k){return k.replace(/\/index.html$/,"")}var Ct=(()=>((Ct=Ct||{})[Ct.Zero=0]="Zero",Ct[Ct.One=1]="One",Ct[Ct.Two=2]="Two",Ct[Ct.Few=3]="Few",Ct[Ct.Many=4]="Many",Ct[Ct.Other=5]="Other",Ct))();const $i=C.kL8;class hi{}let Kt=(()=>{class k extends hi{constructor(U){super(),this.locale=U}getPluralCategory(U,Y){switch($i(Y||this.locale)(U)){case Ct.Zero:return"zero";case Ct.One:return"one";case Ct.Two:return"two";case Ct.Few:return"few";case Ct.Many:return"many";default:return"other"}}}return k.\u0275fac=function(U){return new(U||k)(C.LFG(C.soG))},k.\u0275prov=C.Yz7({token:k,factory:k.\u0275fac}),k})();function Qi(k,q){q=encodeURIComponent(q);for(const U of k.split(";")){const Y=U.indexOf("="),[xe,ze]=-1==Y?[U,""]:[U.slice(0,Y),U.slice(Y+1)];if(xe.trim()===q)return decodeURIComponent(ze)}return null}class ki{constructor(q,U,Y,xe){this.$implicit=q,this.ngForOf=U,this.index=Y,this.count=xe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Si=(()=>{class k{constructor(U,Y,xe){this._viewContainer=U,this._template=Y,this._differs=xe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const Y=this._viewContainer;U.forEachOperation((xe,ze,at)=>{if(null==xe.previousIndex)Y.createEmbeddedView(this._template,new ki(xe.item,this._ngForOf,-1,-1),null===at?void 0:at);else if(null==at)Y.remove(null===ze?void 0:ze);else if(null!==ze){const Tt=Y.get(ze);Y.move(Tt,at),hr(Tt,xe)}});for(let xe=0,ze=Y.length;xe<ze;xe++){const Tt=Y.get(xe).context;Tt.index=xe,Tt.count=ze,Tt.ngForOf=this._ngForOf}U.forEachIdentityChange(xe=>{hr(Y.get(xe.currentIndex),xe)})}static ngTemplateContextGuard(U,Y){return!0}}return k.\u0275fac=function(U){return new(U||k)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),k})();function hr(k,q){k.context.$implicit=q.item}let un=(()=>{class k{constructor(U,Y){this._viewContainer=U,this._context=new sr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){zr("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){zr("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,Y){return!0}}return k.\u0275fac=function(U){return new(U||k)(C.Y36(C.s_b),C.Y36(C.Rgc))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class sr{constructor(){this.$implicit=null,this.ngIf=null}}function zr(k,q){if(q&&!q.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,C.AaK)(q)}'.`)}let bs=(()=>{class k{constructor(U,Y,xe){this._ngEl=U,this._differs=Y,this._renderer=xe,this._ngStyle=null,this._differ=null}set ngStyle(U){this._ngStyle=U,!this._differ&&U&&(this._differ=this._differs.find(U).create())}ngDoCheck(){if(this._differ){const U=this._differ.diff(this._ngStyle);U&&this._applyChanges(U)}}_setStyle(U,Y){const[xe,ze]=U.split(".");null!=(Y=null!=Y&&ze?`${Y}${ze}`:Y)?this._renderer.setStyle(this._ngEl.nativeElement,xe,Y):this._renderer.removeStyle(this._ngEl.nativeElement,xe)}_applyChanges(U){U.forEachRemovedItem(Y=>this._setStyle(Y.key,null)),U.forEachAddedItem(Y=>this._setStyle(Y.key,Y.currentValue)),U.forEachChangedItem(Y=>this._setStyle(Y.key,Y.currentValue))}}return k.\u0275fac=function(U){return new(U||k)(C.Y36(C.SBq),C.Y36(C.aQg),C.Y36(C.Qsj))},k.\u0275dir=C.lG2({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),k})();function j(k,q){return new C.vHH(2100,"")}class ne{createSubscription(q,U){return q.subscribe({next:U,error:Y=>{throw Y}})}dispose(q){q.unsubscribe()}onDestroy(q){q.unsubscribe()}}class ge{createSubscription(q,U){return q.then(U,Y=>{throw Y})}dispose(q){}onDestroy(q){}}const Fe=new ge,dt=new ne;let Ut=(()=>{class k{constructor(U){this._ref=U,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(U){return this._obj?U!==this._obj?(this._dispose(),this.transform(U)):this._latestValue:(U&&this._subscribe(U),this._latestValue)}_subscribe(U){this._obj=U,this._strategy=this._selectStrategy(U),this._subscription=this._strategy.createSubscription(U,Y=>this._updateLatestValue(U,Y))}_selectStrategy(U){if((0,C.QGY)(U))return Fe;if((0,C.F4k)(U))return dt;throw j()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(U,Y){U===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return k.\u0275fac=function(U){return new(U||k)(C.Y36(C.sBO,16))},k.\u0275pipe=C.Yjl({name:"async",type:k,pure:!1}),k})();const Ti=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let gi=(()=>{class k{transform(U){if(null==U)return null;if("string"!=typeof U)throw j();return U.replace(Ti,Y=>Y[0].toUpperCase()+Y.substr(1).toLowerCase())}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275pipe=C.Yjl({name:"titlecase",type:k,pure:!0}),k})(),ea=(()=>{class k{}return k.\u0275fac=function(U){return new(U||k)},k.\u0275mod=C.oAB({type:k}),k.\u0275inj=C.cJS({providers:[{provide:hi,useClass:Kt}]}),k})();const Bs="browser";function Ys(k){return k===Bs}let wa=(()=>{class k{}return k.\u0275prov=(0,C.Yz7)({token:k,providedIn:"root",factory:()=>new Js((0,C.LFG)(Ie),window)}),k})();class Js{constructor(q,U){this.document=q,this.window=U,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const U=function Wr(k,q){const U=k.getElementById(q)||k.getElementsByName(q)[0];if(U)return U;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const Y=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let xe=Y.currentNode;for(;xe;){const ze=xe.shadowRoot;if(ze){const at=ze.getElementById(q)||ze.querySelector(`[name="${q}"]`);if(at)return at}xe=Y.nextNode()}}return null}(this.document,q);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=q)}}scrollToElement(q){const U=q.getBoundingClientRect(),Y=U.left+this.window.pageXOffset,xe=U.top+this.window.pageYOffset,ze=this.offset();this.window.scrollTo(Y-ze[0],xe-ze[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=na(this.window.history)||na(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function na(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class wo{}},520:(Yt,et,Q)=>{"use strict";Q.d(et,{eN:()=>Bt,JF:()=>Gi});var C=Q(9808),l=Q(2096),qe=Q(1086),ke=Q(2916),pe=Q(1406),Ae=Q(2198),Ie=Q(4850);class Be{}class Se{}class oe{constructor(Ee){this.normalizedNames=new Map,this.lazyUpdate=null,Ee?this.lazyInit="string"==typeof Ee?()=>{this.headers=new Map,Ee.split("\n").forEach(Te=>{const de=Te.indexOf(":");if(de>0){const ve=Te.slice(0,de),ee=ve.toLowerCase(),fe=Te.slice(de+1).trim();this.maybeSetNormalizedName(ve,ee),this.headers.has(ee)?this.headers.get(ee).push(fe):this.headers.set(ee,[fe])}})}:()=>{this.headers=new Map,Object.keys(Ee).forEach(Te=>{let de=Ee[Te];const ve=Te.toLowerCase();"string"==typeof de&&(de=[de]),de.length>0&&(this.headers.set(ve,de),this.maybeSetNormalizedName(Te,ve))})}:this.headers=new Map}has(Ee){return this.init(),this.headers.has(Ee.toLowerCase())}get(Ee){this.init();const Te=this.headers.get(Ee.toLowerCase());return Te&&Te.length>0?Te[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ee){return this.init(),this.headers.get(Ee.toLowerCase())||null}append(Ee,Te){return this.clone({name:Ee,value:Te,op:"a"})}set(Ee,Te){return this.clone({name:Ee,value:Te,op:"s"})}delete(Ee,Te){return this.clone({name:Ee,value:Te,op:"d"})}maybeSetNormalizedName(Ee,Te){this.normalizedNames.has(Te)||this.normalizedNames.set(Te,Ee)}init(){this.lazyInit&&(this.lazyInit instanceof oe?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ee=>this.applyUpdate(Ee)),this.lazyUpdate=null))}copyFrom(Ee){Ee.init(),Array.from(Ee.headers.keys()).forEach(Te=>{this.headers.set(Te,Ee.headers.get(Te)),this.normalizedNames.set(Te,Ee.normalizedNames.get(Te))})}clone(Ee){const Te=new oe;return Te.lazyInit=this.lazyInit&&this.lazyInit instanceof oe?this.lazyInit:this,Te.lazyUpdate=(this.lazyUpdate||[]).concat([Ee]),Te}applyUpdate(Ee){const Te=Ee.name.toLowerCase();switch(Ee.op){case"a":case"s":let de=Ee.value;if("string"==typeof de&&(de=[de]),0===de.length)return;this.maybeSetNormalizedName(Ee.name,Te);const ve=("a"===Ee.op?this.headers.get(Te):void 0)||[];ve.push(...de),this.headers.set(Te,ve);break;case"d":const ee=Ee.value;if(ee){let fe=this.headers.get(Te);if(!fe)return;fe=fe.filter(Ce=>-1===ee.indexOf(Ce)),0===fe.length?(this.headers.delete(Te),this.normalizedNames.delete(Te)):this.headers.set(Te,fe)}else this.headers.delete(Te),this.normalizedNames.delete(Te)}}forEach(Ee){this.init(),Array.from(this.normalizedNames.keys()).forEach(Te=>Ee(this.normalizedNames.get(Te),this.headers.get(Te)))}}class ye{encodeKey(Ee){return rt(Ee)}encodeValue(Ee){return rt(Ee)}decodeKey(Ee){return decodeURIComponent(Ee)}decodeValue(Ee){return decodeURIComponent(Ee)}}const Ne=/%(\d[a-f0-9])/gi,it={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rt(Xe){return encodeURIComponent(Xe).replace(Ne,(Ee,Te)=>{var de;return null!==(de=it[Te])&&void 0!==de?de:Ee})}function Ge(Xe){return`${Xe}`}class Ft{constructor(Ee={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ee.encoder||new ye,Ee.fromString){if(Ee.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(Xe,Ee){const Te=new Map;return Xe.length>0&&Xe.replace(/^\?/,"").split("&").forEach(ve=>{const ee=ve.indexOf("="),[fe,Ce]=-1==ee?[Ee.decodeKey(ve),""]:[Ee.decodeKey(ve.slice(0,ee)),Ee.decodeValue(ve.slice(ee+1))],nt=Te.get(fe)||[];nt.push(Ce),Te.set(fe,nt)}),Te}(Ee.fromString,this.encoder)}else Ee.fromObject?(this.map=new Map,Object.keys(Ee.fromObject).forEach(Te=>{const de=Ee.fromObject[Te];this.map.set(Te,Array.isArray(de)?de:[de])})):this.map=null}has(Ee){return this.init(),this.map.has(Ee)}get(Ee){this.init();const Te=this.map.get(Ee);return Te?Te[0]:null}getAll(Ee){return this.init(),this.map.get(Ee)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ee,Te){return this.clone({param:Ee,value:Te,op:"a"})}appendAll(Ee){const Te=[];return Object.keys(Ee).forEach(de=>{const ve=Ee[de];Array.isArray(ve)?ve.forEach(ee=>{Te.push({param:de,value:ee,op:"a"})}):Te.push({param:de,value:ve,op:"a"})}),this.clone(Te)}set(Ee,Te){return this.clone({param:Ee,value:Te,op:"s"})}delete(Ee,Te){return this.clone({param:Ee,value:Te,op:"d"})}toString(){return this.init(),this.keys().map(Ee=>{const Te=this.encoder.encodeKey(Ee);return this.map.get(Ee).map(de=>Te+"="+this.encoder.encodeValue(de)).join("&")}).filter(Ee=>""!==Ee).join("&")}clone(Ee){const Te=new Ft({encoder:this.encoder});return Te.cloneFrom=this.cloneFrom||this,Te.updates=(this.updates||[]).concat(Ee),Te}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ee=>this.map.set(Ee,this.cloneFrom.map.get(Ee))),this.updates.forEach(Ee=>{switch(Ee.op){case"a":case"s":const Te=("a"===Ee.op?this.map.get(Ee.param):void 0)||[];Te.push(Ge(Ee.value)),this.map.set(Ee.param,Te);break;case"d":if(void 0===Ee.value){this.map.delete(Ee.param);break}{let de=this.map.get(Ee.param)||[];const ve=de.indexOf(Ge(Ee.value));-1!==ve&&de.splice(ve,1),de.length>0?this.map.set(Ee.param,de):this.map.delete(Ee.param)}}}),this.cloneFrom=this.updates=null)}}class Ot{constructor(){this.map=new Map}set(Ee,Te){return this.map.set(Ee,Te),this}get(Ee){return this.map.has(Ee)||this.map.set(Ee,Ee.defaultValue()),this.map.get(Ee)}delete(Ee){return this.map.delete(Ee),this}has(Ee){return this.map.has(Ee)}keys(){return this.map.keys()}}function Ui(Xe){return"undefined"!=typeof ArrayBuffer&&Xe instanceof ArrayBuffer}function Mr(Xe){return"undefined"!=typeof Blob&&Xe instanceof Blob}function fn(Xe){return"undefined"!=typeof FormData&&Xe instanceof FormData}class $e{constructor(Ee,Te,de,ve){let ee;if(this.url=Te,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ee.toUpperCase(),function Pt(Xe){switch(Xe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ve?(this.body=void 0!==de?de:null,ee=ve):ee=de,ee&&(this.reportProgress=!!ee.reportProgress,this.withCredentials=!!ee.withCredentials,ee.responseType&&(this.responseType=ee.responseType),ee.headers&&(this.headers=ee.headers),ee.context&&(this.context=ee.context),ee.params&&(this.params=ee.params)),this.headers||(this.headers=new oe),this.context||(this.context=new Ot),this.params){const fe=this.params.toString();if(0===fe.length)this.urlWithParams=Te;else{const Ce=Te.indexOf("?");this.urlWithParams=Te+(-1===Ce?"?":Ce<Te.length-1?"&":"")+fe}}else this.params=new Ft,this.urlWithParams=Te}serializeBody(){return null===this.body?null:Ui(this.body)||Mr(this.body)||fn(this.body)||function mt(Xe){return"undefined"!=typeof URLSearchParams&&Xe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ft?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fn(this.body)?null:Mr(this.body)?this.body.type||null:Ui(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ft?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ee={}){var Te;const de=Ee.method||this.method,ve=Ee.url||this.url,ee=Ee.responseType||this.responseType,fe=void 0!==Ee.body?Ee.body:this.body,Ce=void 0!==Ee.withCredentials?Ee.withCredentials:this.withCredentials,nt=void 0!==Ee.reportProgress?Ee.reportProgress:this.reportProgress;let ft=Ee.headers||this.headers,Lt=Ee.params||this.params;const Kn=null!==(Te=Ee.context)&&void 0!==Te?Te:this.context;return void 0!==Ee.setHeaders&&(ft=Object.keys(Ee.setHeaders).reduce((ri,on)=>ri.set(on,Ee.setHeaders[on]),ft)),Ee.setParams&&(Lt=Object.keys(Ee.setParams).reduce((ri,on)=>ri.set(on,Ee.setParams[on]),Lt)),new $e(de,ve,fe,{params:Lt,headers:ft,context:Kn,reportProgress:nt,responseType:ee,withCredentials:Ce})}}var tt=(()=>((tt=tt||{})[tt.Sent=0]="Sent",tt[tt.UploadProgress=1]="UploadProgress",tt[tt.ResponseHeader=2]="ResponseHeader",tt[tt.DownloadProgress=3]="DownloadProgress",tt[tt.Response=4]="Response",tt[tt.User=5]="User",tt))();class Rt{constructor(Ee,Te=200,de="OK"){this.headers=Ee.headers||new oe,this.status=void 0!==Ee.status?Ee.status:Te,this.statusText=Ee.statusText||de,this.url=Ee.url||null,this.ok=this.status>=200&&this.status<300}}class Ct extends Rt{constructor(Ee={}){super(Ee),this.type=tt.ResponseHeader}clone(Ee={}){return new Ct({headers:Ee.headers||this.headers,status:void 0!==Ee.status?Ee.status:this.status,statusText:Ee.statusText||this.statusText,url:Ee.url||this.url||void 0})}}class ut extends Rt{constructor(Ee={}){super(Ee),this.type=tt.Response,this.body=void 0!==Ee.body?Ee.body:null}clone(Ee={}){return new ut({body:void 0!==Ee.body?Ee.body:this.body,headers:Ee.headers||this.headers,status:void 0!==Ee.status?Ee.status:this.status,statusText:Ee.statusText||this.statusText,url:Ee.url||this.url||void 0})}}class St extends Rt{constructor(Ee){super(Ee,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ee.url||"(unknown url)"}`:`Http failure response for ${Ee.url||"(unknown url)"}: ${Ee.status} ${Ee.statusText}`,this.error=Ee.error||null}}function kt(Xe,Ee){return{body:Ee,headers:Xe.headers,context:Xe.context,observe:Xe.observe,params:Xe.params,reportProgress:Xe.reportProgress,responseType:Xe.responseType,withCredentials:Xe.withCredentials}}let Bt=(()=>{class Xe{constructor(Te){this.handler=Te}request(Te,de,ve={}){let ee;if(Te instanceof $e)ee=Te;else{let nt,ft;nt=ve.headers instanceof oe?ve.headers:new oe(ve.headers),ve.params&&(ft=ve.params instanceof Ft?ve.params:new Ft({fromObject:ve.params})),ee=new $e(Te,de,void 0!==ve.body?ve.body:null,{headers:nt,context:ve.context,params:ft,reportProgress:ve.reportProgress,responseType:ve.responseType||"json",withCredentials:ve.withCredentials})}const fe=(0,qe.of)(ee).pipe((0,pe.b)(nt=>this.handler.handle(nt)));if(Te instanceof $e||"events"===ve.observe)return fe;const Ce=fe.pipe((0,Ae.h)(nt=>nt instanceof ut));switch(ve.observe||"body"){case"body":switch(ee.responseType){case"arraybuffer":return Ce.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return nt.body}));case"blob":return Ce.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&!(nt.body instanceof Blob))throw new Error("Response is not a Blob.");return nt.body}));case"text":return Ce.pipe((0,Ie.U)(nt=>{if(null!==nt.body&&"string"!=typeof nt.body)throw new Error("Response is not a string.");return nt.body}));default:return Ce.pipe((0,Ie.U)(nt=>nt.body))}case"response":return Ce;default:throw new Error(`Unreachable: unhandled observe type ${ve.observe}}`)}}delete(Te,de={}){return this.request("DELETE",Te,de)}get(Te,de={}){return this.request("GET",Te,de)}head(Te,de={}){return this.request("HEAD",Te,de)}jsonp(Te,de){return this.request("JSONP",Te,{params:(new Ft).append(de,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Te,de={}){return this.request("OPTIONS",Te,de)}patch(Te,de,ve={}){return this.request("PATCH",Te,kt(ve,de))}post(Te,de,ve={}){return this.request("POST",Te,kt(ve,de))}put(Te,de,ve={}){return this.request("PUT",Te,kt(ve,de))}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(l.LFG(Be))},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();class hn{constructor(Ee,Te){this.next=Ee,this.interceptor=Te}handle(Ee){return this.interceptor.intercept(Ee,this.next)}}const Pi=new l.OlP("HTTP_INTERCEPTORS");let di=(()=>{class Xe{intercept(Te,de){return de.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const vi=/^\)\]\}',?\n/;let Fn=(()=>{class Xe{constructor(Te){this.xhrFactory=Te}handle(Te){if("JSONP"===Te.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ke.y(de=>{const ve=this.xhrFactory.build();if(ve.open(Te.method,Te.urlWithParams),Te.withCredentials&&(ve.withCredentials=!0),Te.headers.forEach((on,bn)=>ve.setRequestHeader(on,bn.join(","))),Te.headers.has("Accept")||ve.setRequestHeader("Accept","application/json, text/plain, */*"),!Te.headers.has("Content-Type")){const on=Te.detectContentTypeHeader();null!==on&&ve.setRequestHeader("Content-Type",on)}if(Te.responseType){const on=Te.responseType.toLowerCase();ve.responseType="json"!==on?on:"text"}const ee=Te.serializeBody();let fe=null;const Ce=()=>{if(null!==fe)return fe;const on=ve.statusText||"OK",bn=new oe(ve.getAllResponseHeaders()),wn=function jt(Xe){return"responseURL"in Xe&&Xe.responseURL?Xe.responseURL:/^X-Request-URL:/m.test(Xe.getAllResponseHeaders())?Xe.getResponseHeader("X-Request-URL"):null}(ve)||Te.url;return fe=new Ct({headers:bn,status:ve.status,statusText:on,url:wn}),fe},nt=()=>{let{headers:on,status:bn,statusText:wn,url:Hn}=Ce(),Ki=null;204!==bn&&(Ki=void 0===ve.response?ve.responseText:ve.response),0===bn&&(bn=Ki?200:0);let Nn=bn>=200&&bn<300;if("json"===Te.responseType&&"string"==typeof Ki){const vo=Ki;Ki=Ki.replace(vi,"");try{Ki=""!==Ki?JSON.parse(Ki):null}catch(ai){Ki=vo,Nn&&(Nn=!1,Ki={error:ai,text:Ki})}}Nn?(de.next(new ut({body:Ki,headers:on,status:bn,statusText:wn,url:Hn||void 0})),de.complete()):de.error(new St({error:Ki,headers:on,status:bn,statusText:wn,url:Hn||void 0}))},ft=on=>{const{url:bn}=Ce(),wn=new St({error:on,status:ve.status||0,statusText:ve.statusText||"Unknown Error",url:bn||void 0});de.error(wn)};let Lt=!1;const Kn=on=>{Lt||(de.next(Ce()),Lt=!0);let bn={type:tt.DownloadProgress,loaded:on.loaded};on.lengthComputable&&(bn.total=on.total),"text"===Te.responseType&&!!ve.responseText&&(bn.partialText=ve.responseText),de.next(bn)},ri=on=>{let bn={type:tt.UploadProgress,loaded:on.loaded};on.lengthComputable&&(bn.total=on.total),de.next(bn)};return ve.addEventListener("load",nt),ve.addEventListener("error",ft),ve.addEventListener("timeout",ft),ve.addEventListener("abort",ft),Te.reportProgress&&(ve.addEventListener("progress",Kn),null!==ee&&ve.upload&&ve.upload.addEventListener("progress",ri)),ve.send(ee),de.next({type:tt.Sent}),()=>{ve.removeEventListener("error",ft),ve.removeEventListener("abort",ft),ve.removeEventListener("load",nt),ve.removeEventListener("timeout",ft),Te.reportProgress&&(ve.removeEventListener("progress",Kn),null!==ee&&ve.upload&&ve.upload.removeEventListener("progress",ri)),ve.readyState!==ve.DONE&&ve.abort()}})}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(l.LFG(C.JF))},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})();const Xn=new l.OlP("XSRF_COOKIE_NAME"),ei=new l.OlP("XSRF_HEADER_NAME");class Oi{}let An=(()=>{class Xe{constructor(Te,de,ve){this.doc=Te,this.platform=de,this.cookieName=ve,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Te=this.doc.cookie||"";return Te!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,C.Mx)(Te,this.cookieName),this.lastCookieString=Te),this.lastToken}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(l.LFG(C.K0),l.LFG(l.Lbi),l.LFG(Xn))},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),$i=(()=>{class Xe{constructor(Te,de){this.tokenService=Te,this.headerName=de}intercept(Te,de){const ve=Te.url.toLowerCase();if("GET"===Te.method||"HEAD"===Te.method||ve.startsWith("http://")||ve.startsWith("https://"))return de.handle(Te);const ee=this.tokenService.getToken();return null!==ee&&!Te.headers.has(this.headerName)&&(Te=Te.clone({headers:Te.headers.set(this.headerName,ee)})),de.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(l.LFG(Oi),l.LFG(ei))},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),pr=(()=>{class Xe{constructor(Te,de){this.backend=Te,this.injector=de,this.chain=null}handle(Te){if(null===this.chain){const de=this.injector.get(Pi,[]);this.chain=de.reduceRight((ve,ee)=>new hn(ve,ee),this.backend)}return this.chain.handle(Te)}}return Xe.\u0275fac=function(Te){return new(Te||Xe)(l.LFG(Se),l.LFG(l.zs3))},Xe.\u0275prov=l.Yz7({token:Xe,factory:Xe.\u0275fac}),Xe})(),ss=(()=>{class Xe{static disable(){return{ngModule:Xe,providers:[{provide:$i,useClass:di}]}}static withOptions(Te={}){return{ngModule:Xe,providers:[Te.cookieName?{provide:Xn,useValue:Te.cookieName}:[],Te.headerName?{provide:ei,useValue:Te.headerName}:[]]}}}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275mod=l.oAB({type:Xe}),Xe.\u0275inj=l.cJS({providers:[$i,{provide:Pi,useExisting:$i,multi:!0},{provide:Oi,useClass:An},{provide:Xn,useValue:"XSRF-TOKEN"},{provide:ei,useValue:"X-XSRF-TOKEN"}]}),Xe})(),Gi=(()=>{class Xe{}return Xe.\u0275fac=function(Te){return new(Te||Xe)},Xe.\u0275mod=l.oAB({type:Xe}),Xe.\u0275inj=l.cJS({providers:[Bt,{provide:Be,useClass:pr},Fn,{provide:Se,useExisting:Fn}],imports:[[ss.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Xe})()},2096:(Yt,et,Q)=>{"use strict";Q.d(et,{deG:()=>Pn,tb:()=>ub,AFp:()=>ab,ip1:()=>H_,CZH:()=>Ih,hGG:()=>EM,z2F:()=>wp,sBO:()=>Qw,Sil:()=>G_,_Vd:()=>gd,EJc:()=>hb,SBq:()=>Ue,qLn:()=>Dd,vpe:()=>$l,gxx:()=>Kc,tBr:()=>Mu,XFs:()=>de,OlP:()=>ii,zs3:()=>io,ZZ4:()=>Um,aQg:()=>Vm,soG:()=>Fm,YKP:()=>xx,h0i:()=>Dh,PXZ:()=>jw,R0b:()=>va,FiY:()=>cc,Lbi:()=>cb,g9A:()=>lb,Qsj:()=>qn,FYo:()=>Mt,JOm:()=>ps,Tiy:()=>oi,q3G:()=>jr,tp0:()=>Fc,Rgc:()=>xp,dDg:()=>gb,GfV:()=>qi,s_b:()=>Im,ifc:()=>on,eFA:()=>yb,G48:()=>Kw,Gpc:()=>Ot,f3M:()=>Wm,_c5:()=>vM,VLi:()=>Gw,c2e:()=>db,zSh:()=>Qc,wAp:()=>On,vHH:()=>fn,EiD:()=>zp,mCW:()=>Su,qzn:()=>Uc,JVY:()=>cv,pB0:()=>fv,eBb:()=>dv,L6k:()=>uv,LAX:()=>hv,cg1:()=>Rm,Tjo:()=>oM,kL8:()=>m_,yhl:()=>Op,dqk:()=>Nn,sIi:()=>Fa,CqO:()=>od,QGY:()=>mh,F4k:()=>Jf,RDi:()=>xe,AaK:()=>Ge,z3N:()=>nl,qOj:()=>Bf,TTD:()=>$s,_Bn:()=>fa,xp6:()=>fg,uIk:()=>lh,Tol:()=>ar,Gre:()=>hp,ekj:()=>ap,Suo:()=>Vx,Xpm:()=>Nr,lG2:()=>Xr,Yz7:()=>An,cJS:()=>pr,oAB:()=>rr,Yjl:()=>Rs,Y36:()=>uu,_UZ:()=>du,qZA:()=>ph,TgZ:()=>sd,EpF:()=>Yf,n5z:()=>sa,LFG:()=>Ts,$8M:()=>Pc,$Z:()=>jf,NdJ:()=>Xf,CRH:()=>Hx,oxw:()=>Qf,ALo:()=>Px,lcZ:()=>Ix,Hsn:()=>ld,F$t:()=>ep,Q6J:()=>fh,s9C:()=>vh,DdM:()=>Ex,WLB:()=>Sx,iGM:()=>Bx,CHM:()=>Wo,oJD:()=>Gp,LSH:()=>jh,kYT:()=>Ni,Udp:()=>op,YNc:()=>ed,_uU:()=>dd,Oqu:()=>hd,hij:()=>xh,AsE:()=>bh,Gf:()=>Ux});var C=Q(2916),l=Q(2866),qe=Q(9146),ke=Q(3009),Ae=Q(8929),Ie=Q(2654),Be=Q(1762);class oe{constructor(i,s){this.subjectFactory=i,this.selector=s}call(i,s){const{selector:a}=this,u=this.subjectFactory(),p=a(u).subscribe(i);return p.add(s.subscribe(u)),p}}var ye=Q(4327);function Re(){return new Ae.xQ}function it(n){for(let i in n)if(n[i]===it)return i;throw Error("Could not find renamed property on target object.")}function rt(n,i){for(const s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const s=i.indexOf("\n");return-1===s?i:i.substring(0,s)}function Ft(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const an=it({__forward_ref__:it});function Ot(n){return n.__forward_ref__=Ot,n.toString=function(){return Ge(this())},n}function Pt(n){return Ui(n)?n():n}function Ui(n){return"function"==typeof n&&n.hasOwnProperty(an)&&n.__forward_ref__===Ot}class fn extends Error{constructor(i,s){super(function mt(n,i){return`NG0${Math.abs(n)}${i?": "+i:""}`}(i,s)),this.code=i}}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function tt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}function St(n,i){const s=i?` in ${i}`:"";throw new fn(-201,`No provider for ${tt(n)} found${s}`)}function jt(n,i){null==n&&function Fn(n,i,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${i} <=Actual]`))}(i,n,null,"!=")}function An(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xi(n){return Er(n,os)||Er(n,Ee)}function Er(n,i){return n.hasOwnProperty(i)?n[i]:null}function lr(n){return n&&(n.hasOwnProperty(Xe)||n.hasOwnProperty(Te))?n[Xe]:null}const os=it({\u0275prov:it}),Xe=it({\u0275inj:it}),Ee=it({ngInjectableDef:it}),Te=it({ngInjectorDef:it});var de=(()=>((de=de||{})[de.Default=0]="Default",de[de.Host=1]="Host",de[de.Self=2]="Self",de[de.SkipSelf=4]="SkipSelf",de[de.Optional=8]="Optional",de))();let ve;function fe(n){const i=ve;return ve=n,i}function Ce(n,i,s){const a=Xi(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&de.Optional?null:void 0!==i?i:void St(Ge(n),"Injector")}function ft(n){return{toString:n}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),on=(()=>{return(n=on||(on={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",on;var n})();const bn="undefined"!=typeof globalThis&&globalThis,wn="undefined"!=typeof window&&window,Hn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Nn=bn||"undefined"!=typeof global&&global||wn||Hn,cr={},ti=[],Yr=it({\u0275cmp:it}),_s=it({\u0275dir:it}),xs=it({\u0275pipe:it}),as=it({\u0275mod:it}),ur=it({\u0275fac:it}),Ds=it({__NG_ELEMENT_ID__:it});let Uo=0;function Nr(n){return ft(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ti,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||on.Emulated,id:"c",styles:n.styles||ti,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,p=n.features,y=n.pipes;return a.id+=Uo++,a.inputs=Fr(n.inputs,s),a.outputs=Fr(n.outputs),p&&p.forEach(E=>E(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(Jr):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(pn):null,a})}function Jr(n){return Yi(n)||function kr(n){return n[_s]||null}(n)}function pn(n){return function dr(n){return n[xs]||null}(n)}const Hr={};function rr(n){return ft(()=>{const i={type:n.type,bootstrap:n.bootstrap||ti,declarations:n.declarations||ti,imports:n.imports||ti,exports:n.exports||ti,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Hr[n.id]=n.type),i})}function Ni(n,i){return ft(()=>{const s=Fi(n,!0);s.declarations=i.declarations||ti,s.imports=i.imports||ti,s.exports=i.exports||ti})}function Fr(n,i){if(null==n)return cr;const s={};for(const a in n)if(n.hasOwnProperty(a)){let u=n[a],p=u;Array.isArray(u)&&(p=u[1],u=u[0]),s[u]=a,i&&(i[u]=p)}return s}const Xr=Nr;function Rs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yi(n){return n[Yr]||null}function Fi(n,i){const s=n[as]||null;if(!s&&!0===i)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return s}function Tr(n){return Array.isArray(n)&&"object"==typeof n[1]}function j(n){return Array.isArray(n)&&!0===n[1]}function ne(n){return 0!=(8&n.flags)}function ge(n){return 2==(2&n.flags)}function Fe(n){return 1==(1&n.flags)}function dt(n){return null!==n.template}function Ut(n){return 0!=(512&n[2])}function oo(n,i){return n.hasOwnProperty(ur)?n[ur]:null}class Gr{constructor(i,s,a){this.previousValue=i,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function $s(){return Ys}function Ys(n){return n.type.prototype.ngOnChanges&&(n.setInput=ta),ba}function ba(){const n=xo(this),i=null==n?void 0:n.current;if(i){const s=n.previous;if(s===cr)n.previous=i;else for(let a in i)s[a]=i[a];n.current=null,this.ngOnChanges(i)}}function ta(n,i,s,a){const u=xo(n)||function wa(n,i){return n[_o]=i}(n,{previous:cr,current:null}),p=u.current||(u.current={}),y=u.previous,E=this.declaredInputs[s],I=y[E];p[E]=new Gr(I&&I.currentValue,i,y===cr),n[a]=i}$s.ngInherit=!0;const _o="__ngSimpleChanges__";function xo(n){return n[_o]||null}const k="math";let Y;function xe(n){Y=n}function ze(){return void 0!==Y?Y:"undefined"!=typeof document?document:void 0}function Tt(n){return!!n.listen}const bi={createRenderer:(n,i)=>ze()};function vn(n){for(;Array.isArray(n);)n=n[0];return n}function V(n,i){return vn(i[n])}function O(n,i){return vn(i[n.index])}function X(n,i){return n.data[i]}function Nt(n,i){const s=i[n];return Tr(s)?s:s[0]}function Hi(n){return 4==(4&n[2])}function Br(n){return 128==(128&n[2])}function Us(n,i){return null==i?null:n[i]}function Tc(n){n[18]=0}function ml(n,i){n[5]+=i;let s=n,a=n[3];for(;null!==a&&(1===i&&1===s[5]||-1===i&&0===s[5]);)a[5]+=i,s=a,a=a[3]}const Un={lFrame:jo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vs(){return Un.bindingsEnabled}function ht(){return Un.lFrame.lView}function ni(){return Un.lFrame.tView}function Wo(n){return Un.lFrame.contextLView=n,n[8]}function or(){let n=Jl();for(;null!==n&&64===n.type;)n=n.parent;return n}function Jl(){return Un.lFrame.currentTNode}function hs(n,i){const s=Un.lFrame;s.currentTNode=n,s.isParent=i}function ao(){return Un.lFrame.isParent}function Ma(){Un.lFrame.isParent=!1}function wi(){return Un.isInCheckNoChangesMode}function Qr(n){Un.isInCheckNoChangesMode=n}function fs(){const n=Un.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function re(){return Un.lFrame.bindingIndex++}function Hs(n){const i=Un.lFrame,s=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,s}function co(n,i){const s=Un.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ea(i)}function Ea(n){Un.lFrame.currentDirectiveIndex=n}function ia(){return Un.lFrame.currentQueryIndex}function Eo(n){Un.lFrame.currentQueryIndex=n}function Zo(n){const i=n[1];return 2===i.type?i.declTNode:1===i.type?n[6]:null}function So(n,i,s){if(s&de.SkipSelf){let u=i,p=n;for(;!(u=u.parent,null!==u||s&de.Host||(u=Zo(p),null===u||(p=p[15],10&u.type))););if(null===u)return!1;i=u,n=p}const a=Un.lFrame=Sa();return a.currentTNode=i,a.lView=n,!0}function Ks(n){const i=Sa(),s=n[1];Un.lFrame=i,i.currentTNode=s.firstChild,i.lView=n,i.tView=s,i.contextLView=n,i.bindingIndex=s.bindingStartIndex,i.inI18n=!1}function Sa(){const n=Un.lFrame,i=null===n?null:n.child;return null===i?jo(n):i}function jo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function ho(){const n=Un.lFrame;return Un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const qo=ho;function Ca(){const n=ho();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Dr(){return Un.lFrame.selectedIndex}function Qs(n){Un.lFrame.selectedIndex=n}function Ii(){const n=Un.lFrame;return X(n.tView,n.selectedIndex)}function eo(n,i){for(let s=i.directiveStart,a=i.directiveEnd;s<a;s++){const p=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:G,ngOnDestroy:Z}=p;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),E&&((n.contentHooks||(n.contentHooks=[])).push(s,E),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,E)),I&&(n.viewHooks||(n.viewHooks=[])).push(-s,I),G&&((n.viewHooks||(n.viewHooks=[])).push(s,G),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,G)),null!=Z&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Z)}}function Ls(n,i,s){ts(n,i,3,s)}function Qt(n,i,s,a){(3&n[2])===s&&ts(n,i,s,a)}function Os(n,i){let s=n[2];(3&s)===i&&(s&=2047,s+=1,n[2]=s)}function ts(n,i,s,a){const p=null!=a?a:-1,y=i.length-1;let E=0;for(let I=void 0!==a?65535&n[18]:0;I<y;I++)if("number"==typeof i[I+1]){if(E=i[I],null!=a&&E>=a)break}else i[I]<0&&(n[18]+=65536),(E<p||-1==p)&&(vu(n,s,i,I),n[18]=(4294901760&n[18])+I+2),I++}function vu(n,i,s,a){const u=s[a]<0,p=s[a+1],E=n[u?-s[a]:s[a]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===i){n[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class zs{constructor(i,s,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function To(n,i,s){const a=Tt(n);let u=0;for(;u<s.length;){const p=s[u];if("number"==typeof p){if(0!==p)break;u++;const y=s[u++],E=s[u++],I=s[u++];a?n.setAttribute(i,E,I,y):i.setAttributeNS(y,E,I)}else{const y=p,E=s[++u];Ja(y)?a&&n.setProperty(i,y,E):a?n.setAttribute(i,y,E):i.setAttribute(y,E),u++}}return u}function Ao(n){return 3===n||4===n||6===n}function Ja(n){return 64===n.charCodeAt(0)}function Do(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let s=-1;for(let a=0;a<i.length;a++){const u=i[a];"number"==typeof u?s=u:0===s||nc(n,s,u,null,-1===s||2===s?i[++a]:null)}}return n}function nc(n,i,s,a,u){let p=0,y=n.length;if(-1===i)y=-1;else for(;p<n.length;){const E=n[p++];if("number"==typeof E){if(E===i){y=-1;break}if(E>i){y=p-1;break}}}for(;p<n.length;){const E=n[p];if("number"==typeof E)break;if(E===s){if(null===a)return void(null!==u&&(n[p+1]=u));if(a===n[p+1])return void(n[p+2]=u)}p++,null!==a&&p++,null!==u&&p++}-1!==y&&(n.splice(y,0,i),p=y+1),n.splice(p++,0,s),null!==a&&n.splice(p++,0,a),null!==u&&n.splice(p++,0,u)}function Rc(n){return-1!==n}function Yo(n){return 32767&n}function Ro(n,i){let s=function ic(n){return n>>16}(n),a=i;for(;s>0;)a=a[15],s--;return a}let rc=!0;function Xa(n){const i=rc;return rc=n,i}let T=0;function _(n,i){const s=z(n,i);if(-1!==s)return s;const a=i[1];a.firstCreatePass&&(n.injectorIndex=i.length,F(a.data,n),F(i,null),F(a.blueprint,null));const u=J(n,i),p=n.injectorIndex;if(Rc(u)){const y=Yo(u),E=Ro(u,i),I=E[1].data;for(let G=0;G<8;G++)i[p+G]=E[y+G]|I[y+G]}return i[p+8]=u,p}function F(n,i){n.push(0,0,0,0,0,0,0,0,i)}function z(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function J(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,u=i;for(;null!==u;){const p=u[1],y=p.type;if(a=2===y?p.declTNode:1===y?u[6]:null,null===a)return-1;if(s++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function ue(n,i,s){!function x(n,i,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Ds)&&(a=s[Ds]),null==a&&(a=s[Ds]=T++);const u=255&a;i.data[n+(u>>5)]|=1<<u}(n,i,s)}function Ve(n,i,s){if(s&de.Optional)return n;St(i,"NodeInjector")}function Jt(n,i,s,a){if(s&de.Optional&&void 0===a&&(a=null),0==(s&(de.Self|de.Host))){const u=n[9],p=fe(void 0);try{return u?u.get(i,a,s&de.Optional):Ce(i,a,s&de.Optional)}finally{fe(p)}}return Ve(a,i,s)}function Sn(n,i,s,a=de.Default,u){if(null!==n){const p=function Io(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(Ds)?n[Ds]:void 0;return"number"==typeof i?i>=0?255&i:yn:i}(s);if("function"==typeof p){if(!So(i,n,a))return a&de.Host?Ve(u,s,a):Jt(i,s,a,u);try{const y=p(a);if(null!=y||a&de.Optional)return y;St(s)}finally{qo()}}else if("number"==typeof p){let y=null,E=z(n,i),I=-1,G=a&de.Host?i[16][6]:null;for((-1===E||a&de.SkipSelf)&&(I=-1===E?J(n,i):i[E+8],-1!==I&&Ka(a,!1)?(y=i[1],E=Yo(I),i=Ro(I,i)):E=-1);-1!==E;){const Z=i[1];if(Lo(p,E,Z.data)){const se=Ai(E,i,s,y,a,G);if(se!==rn)return se}I=i[E+8],-1!==I&&Ka(a,i[1].data[E+8]===G)&&Lo(p,E,i)?(y=Z,E=Yo(I),i=Ro(I,i)):E=-1}}}return Jt(i,s,a,u)}const rn={};function yn(){return new ns(or(),ht())}function Ai(n,i,s,a,u,p){const y=i[1],E=y.data[n+8],Z=ci(E,y,s,null==a?ge(E)&&rc:a!=y&&0!=(3&E.type),u&de.Host&&p===E);return null!==Z?Ss(i,y,Z,E):rn}function ci(n,i,s,a,u){const p=n.providerIndexes,y=i.data,E=1048575&p,I=n.directiveStart,Z=p>>20,Me=u?E+Z:n.directiveEnd;for(let Oe=a?E:E+Z;Oe<Me;Oe++){const ot=y[Oe];if(Oe<I&&s===ot||Oe>=I&&ot.type===s)return Oe}if(u){const Oe=y[I];if(Oe&&dt(Oe)&&Oe.type===s)return I}return null}function Ss(n,i,s,a){let u=n[s];const p=i.data;if(function Ya(n){return n instanceof zs}(u)){const y=u;y.resolving&&function Rt(n,i){const s=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new fn(-200,`Circular dependency in DI detected for ${n}${s}`)}(tt(p[s]));const E=Xa(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?fe(y.injectImpl):null;So(n,a,de.Default);try{u=n[s]=y.factory(void 0,p,n,a),i.firstCreatePass&&s>=a.directiveStart&&function yl(n,i,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:p}=i.type.prototype;if(a){const y=Ys(i);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}u&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,u),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,p))}(s,p[s],i)}finally{null!==I&&fe(I),Xa(E),y.resolving=!1,qo()}}return u}function Lo(n,i,s){return!!(s[i+(n>>5)]&1<<n)}function Ka(n,i){return!(n&de.Self||n&de.Host&&i)}class ns{constructor(i,s){this._tNode=i,this._lView=s}get(i,s,a){return Sn(this._tNode,this._lView,i,a,s)}}function sa(n){return ft(()=>{const i=n.prototype.constructor,s=i[ur]||Qa(i),a=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==a;){const p=u[ur]||Qa(u);if(p&&p!==s)return p;u=Object.getPrototypeOf(u)}return p=>new p})}function Qa(n){return Ui(n)?()=>{const i=Qa(Pt(n));return i&&i()}:oo(n)}function Pc(n){return function we(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const s=n.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const p=s[u];if(Ao(p))break;if(0===p)u+=2;else if("number"==typeof p)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(p===i)return s[u+1];u+=2}}}return null}(or(),n)}const xl="__parameters__";function Oo(n,i,s){return ft(()=>{const a=function sc(n){return function(...s){if(n){const a=n(...s);for(const u in a)this[u]=a[u]}}}(i);function u(...p){if(this instanceof u)return a.apply(this,p),this;const y=new u(...p);return E.annotation=y,E;function E(I,G,Z){const se=I.hasOwnProperty(xl)?I[xl]:Object.defineProperty(I,xl,{value:[]})[xl];for(;se.length<=Z;)se.push(null);return(se[Z]=se[Z]||[]).push(y),I}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class ii{constructor(i,s){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=An({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Pn=new ii("AnalyzeForEntryComponents");function Cs(n,i){void 0===i&&(i=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(i===n&&(i=n.slice(0,s)),Cs(a,i)):i!==n&&i.push(a)}return i}function Zs(n,i){n.forEach(s=>Array.isArray(s)?Zs(s,i):i(s))}function Lc(n,i,s){i>=n.length?n.push(s):n.splice(i,0,s)}function tl(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function br(n,i){const s=[];for(let a=0;a<n;a++)s.push(i);return s}function W(n,i,s){let a=Ke(n,i);return a>=0?n[1|a]=s:(a=~a,function b(n,i,s,a){let u=n.length;if(u==i)n.push(s,a);else if(1===u)n.push(a,n[0]),n[0]=s;else{for(u--,n.push(n[u-1],n[u]);u>i;)n[u]=n[u-2],u--;n[i]=s,n[i+1]=a}}(n,a,i,s)),a}function he(n,i){const s=Ke(n,i);if(s>=0)return n[1|s]}function Ke(n,i){return function dn(n,i,s){let a=0,u=n.length>>s;for(;u!==a;){const p=a+(u-a>>1),y=n[p<<s];if(i===y)return p<<s;y>i?u=p:a=p+1}return~(u<<s)}(n,i,1)}const Aa={},Oc="__NG_DI_FLAG__",lc="ngTempTokenPath",Hm=/\n/gm,Ep="__source",zm=it({provide:String,useValue:it});let bu;function Sp(n){const i=bu;return bu=n,i}function Gm(n,i=de.Default){if(void 0===bu)throw new fn(203,"");return null===bu?Ce(n,void 0,i):bu.get(n,i&de.Optional?null:void 0,i)}function Ts(n,i=de.Default){return(function ee(){return ve}()||Gm)(Pt(n),i)}const Wm=Ts;function Bh(n){const i=[];for(let s=0;s<n.length;s++){const a=Pt(n[s]);if(Array.isArray(a)){if(0===a.length)throw new fn(900,"");let u,p=de.Default;for(let y=0;y<a.length;y++){const E=a[y],I=Zm(E);"number"==typeof I?-1===I?u=E.token:p|=I:u=E}i.push(Ts(u,p))}else i.push(Ts(a))}return i}function wu(n,i){return n[Oc]=i,n.prototype[Oc]=i,n}function Zm(n){return n[Oc]}const Mu=wu(Oo("Inject",n=>({token:n})),-1),cc=wu(Oo("Optional"),8),Fc=wu(Oo("SkipSelf"),4);let Ed,Sd;function Bc(n){var i;return(null===(i=function Vh(){if(void 0===Ed&&(Ed=null,Nn.trustedTypes))try{Ed=Nn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Ed}())||void 0===i?void 0:i.createHTML(n))||n}function Pp(n){var i;return(null===(i=function Hh(){if(void 0===Sd&&(Sd=null,Nn.trustedTypes))try{Sd=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Sd}())||void 0===i?void 0:i.createHTML(n))||n}class uc{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class rv extends uc{getTypeName(){return"HTML"}}class sv extends uc{getTypeName(){return"Style"}}class ov extends uc{getTypeName(){return"Script"}}class av extends uc{getTypeName(){return"URL"}}class lv extends uc{getTypeName(){return"ResourceURL"}}function nl(n){return n instanceof uc?n.changingThisBreaksApplicationSecurity:n}function Uc(n,i){const s=Op(n);if(null!=s&&s!==i){if("ResourceURL"===s&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===i}function Op(n){return n instanceof uc&&n.getTypeName()||null}function cv(n){return new rv(n)}function uv(n){return new sv(n)}function dv(n){return new ov(n)}function hv(n){return new av(n)}function fv(n){return new lv(n)}class pv{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const s=(new window.DOMParser).parseFromString(Bc(i),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(i):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class gv{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const a=this.inertDocument.createElement("body");s.appendChild(a)}}getInertBodyElement(i){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=Bc(i),s;const a=this.inertDocument.createElement("body");return a.innerHTML=Bc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(i){const s=i.attributes;for(let u=s.length-1;0<u;u--){const y=s.item(u).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&i.removeAttribute(y)}let a=i.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const vv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yv=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Su(n){return(n=String(n)).match(vv)||n.match(yv)?n:"unsafe:"+n}function Da(n){const i={};for(const s of n.split(","))i[s]=!0;return i}function Cu(...n){const i={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(i[a]=!0);return i}const kp=Da("area,br,col,hr,img,wbr"),Bp=Da("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Up=Da("rp,rt"),zh=Cu(kp,Cu(Bp,Da("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Cu(Up,Da("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Cu(Up,Bp)),Gh=Da("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wh=Da("srcset"),Vp=Cu(Gh,Wh,Da("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Da("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_v=Da("script,style,template");class xv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let s=i.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let u=this.checkClobberedElement(s,s.nextSibling);if(u){s=u;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(i){const s=i.nodeName.toLowerCase();if(!zh.hasOwnProperty(s))return this.sanitizedSomething=!0,!_v.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=i.attributes;for(let u=0;u<a.length;u++){const p=a.item(u),y=p.name,E=y.toLowerCase();if(!Vp.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=p.value;Gh[E]&&(I=Su(I)),Wh[E]&&(n=I,I=(n=String(n)).split(",").map(i=>Su(i.trim())).join(", ")),this.buf.push(" ",y,'="',Hp(I),'"')}var n;return this.buf.push(">"),!0}endElement(i){const s=i.nodeName.toLowerCase();zh.hasOwnProperty(s)&&!kp.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(i){this.buf.push(Hp(i))}checkClobberedElement(i,s){if(s&&(i.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return s}}const bv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wv=/([^\#-~ |!])/g;function Hp(n){return n.replace(/&/g,"&amp;").replace(bv,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(wv,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cd;function zp(n,i){let s=null;try{Cd=Cd||function Np(n){const i=new gv(n);return function mv(){try{return!!(new window.DOMParser).parseFromString(Bc(""),"text/html")}catch(n){return!1}}()?new pv(i):i}(n);let a=i?String(i):"";s=Cd.getInertBodyElement(a);let u=5,p=a;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,a=p,p=s.innerHTML,s=Cd.getInertBodyElement(a)}while(a!==p);return Bc((new xv).sanitizeChildren(Zh(s)||s))}finally{if(s){const a=Zh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Zh(n){return"content"in n&&function Mv(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var jr=(()=>((jr=jr||{})[jr.NONE=0]="NONE",jr[jr.HTML=1]="HTML",jr[jr.STYLE=2]="STYLE",jr[jr.SCRIPT=3]="SCRIPT",jr[jr.URL=4]="URL",jr[jr.RESOURCE_URL=5]="RESOURCE_URL",jr))();function Gp(n){const i=Td();return i?Pp(i.sanitize(jr.HTML,n)||""):Uc(n,"HTML")?Pp(nl(n)):zp(ze(),$e(n))}function jh(n){const i=Td();return i?i.sanitize(jr.URL,n)||"":Uc(n,"URL")?nl(n):Su($e(n))}function Td(){const n=ht();return n&&n[12]}const Pv="__ngContext__";function no(n,i){n[Pv]=i}function jp(n){const i=function Ad(n){return n[Pv]||null}(n);return i?Array.isArray(i)?i:i.lView:null}function $p(n){return n.ngOriginalError}function A0(n,...i){n.error(...i)}class Dd{constructor(){this._console=console}handleError(i){const s=this._findOriginalError(i),a=function T0(n){return n&&n.ngErrorLogger||A0}(i);a(this._console,"ERROR",i),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(i){let s=i&&$p(i);for(;s&&$p(s);)s=$p(s);return s||null}}const Yp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nn))();function Pa(n){return n instanceof Function?n():n}var ps=(()=>((ps=ps||{})[ps.Important=1]="Important",ps[ps.DashCase=2]="DashCase",ps))();function Ld(n,i){return undefined(n,i)}function il(n){const i=n[3];return j(i)?i[3]:i}function Nd(n){return Dl(n[13])}function Au(n){return Dl(n[4])}function Dl(n){for(;null!==n&&!j(n);)n=n[4];return n}function fc(n,i,s,a,u){if(null!=a){let p,y=!1;j(a)?p=a:Tr(a)&&(y=!0,a=a[0]);const E=vn(a);0===n&&null!==s?null==u?Xh(i,s,E):pc(i,s,E,u||null,!0):1===n&&null!==s?pc(i,s,E,u||null,!0):2===n?function sg(n,i,s){const a=Pu(n,i);a&&function ig(n,i,s,a){Tt(n)?n.removeChild(i,s,a):i.removeChild(s)}(n,a,i,s)}(i,E,y):3===n&&i.destroyNode(E),null!=p&&function Zv(n,i,s,a,u){const p=s[7];p!==vn(s)&&fc(i,n,a,p,u);for(let E=10;E<s.length;E++){const I=s[E];Iu(I[1],I,n,i,a,p)}}(i,n,p,s,u)}}function zc(n,i,s){if(Tt(n))return n.createElement(i,s);{const a=null!==s?function U(n){const i=n.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":i===k?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(i):n.createElementNS(a,i)}}function eg(n,i){const s=n[9],a=s.indexOf(i),u=i[3];1024&i[2]&&(i[2]&=-1025,ml(u,-1)),s.splice(a,1)}function Yh(n,i){if(n.length<=10)return;const s=10+i,a=n[s];if(a){const u=a[17];null!==u&&u!==n&&eg(u,a),i>0&&(n[s-1][4]=a[4]);const p=tl(n,10+i);!function Uv(n,i){Iu(n,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const y=p[19];null!==y&&y.detachView(p[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function tg(n,i){if(!(256&i[2])){const s=i[11];Tt(s)&&s.destroyNode&&Iu(n,i,s,3,null,null),function $h(n){let i=n[13];if(!i)return Ru(n[1],n);for(;i;){let s=null;if(Tr(i))s=i[13];else{const a=i[10];a&&(s=a)}if(!s){for(;i&&!i[4]&&i!==n;)Tr(i)&&Ru(i[1],i),i=i[3];null===i&&(i=n),Tr(i)&&Ru(i[1],i),s=i&&i[4]}i=s}}(i)}}function Ru(n,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function Gv(n,i){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const u=i[s[a]];if(!(u instanceof zs)){const p=s[a+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=u[p[y]],I=p[y+1];try{I.call(E)}finally{}}else try{p.call(u)}finally{}}}}(n,i),function zv(n,i){const s=n.cleanup,a=i[7];let u=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const y=s[p+1],E="function"==typeof y?y(i):vn(i[y]),I=a[u=s[p+2]],G=s[p+3];"boolean"==typeof G?E.removeEventListener(s[p],I,G):G>=0?a[u=G]():a[u=-G].unsubscribe(),p+=2}else{const y=a[u=s[p+1]];s[p].call(y)}if(null!==a){for(let p=u+1;p<a.length;p++)a[p]();i[7]=null}}(n,i),1===i[1].type&&Tt(i[11])&&i[11].destroy();const s=i[17];if(null!==s&&j(i[3])){s!==i[3]&&eg(s,i);const a=i[19];null!==a&&a.detachView(n)}}}function Jh(n,i,s){return function ng(n,i,s){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return s[0];if(2&a.flags){const u=n.data[a.directiveStart].encapsulation;if(u===on.None||u===on.Emulated)return null}return O(a,s)}(n,i.parent,s)}function pc(n,i,s,a,u){Tt(n)?n.insertBefore(i,s,a,u):i.insertBefore(s,a,u)}function Xh(n,i,s){Tt(n)?n.appendChild(i,s):i.appendChild(s)}function Kh(n,i,s,a,u){null!==a?pc(n,i,s,a,u):Xh(n,i,s)}function Pu(n,i){return Tt(n)?n.parentNode(i):i.parentNode}function Qh(n,i,s){return tf(n,i,s)}let tf=function ef(n,i,s){return 40&n.type?O(n,s):null};function rl(n,i,s,a){const u=Jh(n,a,i),p=i[11],E=Qh(a.parent||i[6],a,i);if(null!=u)if(Array.isArray(s))for(let I=0;I<s.length;I++)Kh(p,u,s[I],E,!1);else Kh(p,u,s,E,!1)}function As(n,i){if(null!==i){const s=i.type;if(3&s)return O(i,n);if(4&s)return Gc(-1,n[i.index]);if(8&s){const a=i.child;if(null!==a)return As(n,a);{const u=n[i.index];return j(u)?Gc(-1,u):vn(u)}}if(32&s)return Ld(i,n)()||vn(n[i.index]);{const a=Ns(n,i);return null!==a?Array.isArray(a)?a[0]:As(il(n[16]),a):As(n,i.next)}}return null}function Ns(n,i){return null!==i?n[16][6].projection[i.projection]:null}function Gc(n,i){const s=10+n+1;if(s<i.length){const a=i[s],u=a[1].firstChild;if(null!==u)return As(a,u)}return i[7]}function rf(n,i,s,a,u,p,y){for(;null!=s;){const E=a[s.index],I=s.type;if(y&&0===i&&(E&&no(vn(E),a),s.flags|=4),64!=(64&s.flags))if(8&I)rf(n,i,s.child,a,u,p,!1),fc(i,n,u,E,p);else if(32&I){const G=Ld(s,a);let Z;for(;Z=G();)fc(i,n,u,Z,p);fc(i,n,u,E,p)}else 16&I?og(n,i,a,s,u,p):fc(i,n,u,E,p);s=y?s.projectionNext:s.next}}function Iu(n,i,s,a,u,p){rf(s,a,n.firstChild,i,u,p,!1)}function og(n,i,s,a,u,p){const y=s[16],I=y[6].projection[a.projection];if(Array.isArray(I))for(let G=0;G<I.length;G++)fc(i,n,u,I[G],p);else rf(n,i,I,y[3],u,p,!0)}function ag(n,i,s){Tt(n)?n.setAttribute(i,"style",s):i.style.cssText=s}function sf(n,i,s){Tt(n)?""===s?n.removeAttribute(i,"class"):n.setAttribute(i,"class",s):i.className=s}function lg(n,i,s){let a=n.length;for(;;){const u=n.indexOf(i,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const p=i.length;if(u+p===a||n.charCodeAt(u+p)<=32)return u}s=u+1}}const cg="ng-template";function qv(n,i,s){let a=0;for(;a<n.length;){let u=n[a++];if(s&&"class"===u){if(u=n[a],-1!==lg(u.toLowerCase(),i,0))return!0}else if(1===u){for(;a<n.length&&"string"==typeof(u=n[a++]);)if(u.toLowerCase()===i)return!0;return!1}}return!1}function ug(n){return 4===n.type&&n.value!==cg}function $v(n,i,s){return i===(4!==n.type||s?n.value:cg)}function Yv(n,i,s){let a=4;const u=n.attrs||[],p=function Kv(n){for(let i=0;i<n.length;i++)if(Ao(n[i]))return i;return n.length}(u);let y=!1;for(let E=0;E<i.length;E++){const I=i[E];if("number"!=typeof I){if(!y)if(4&a){if(a=2|1&a,""!==I&&!$v(n,I,s)||""===I&&1===i.length){if(oa(a))return!1;y=!0}}else{const G=8&a?I:i[++E];if(8&a&&null!==n.attrs){if(!qv(n.attrs,G,s)){if(oa(a))return!1;y=!0}continue}const se=Jv(8&a?"class":I,u,ug(n),s);if(-1===se){if(oa(a))return!1;y=!0;continue}if(""!==G){let Me;Me=se>p?"":u[se+1].toLowerCase();const Oe=8&a?Me:null;if(Oe&&-1!==lg(Oe,G,0)||2&a&&G!==Me){if(oa(a))return!1;y=!0}}}}else{if(!y&&!oa(a)&&!oa(I))return!1;if(y&&oa(I))continue;y=!1,a=I|1&a}}return oa(a)||y}function oa(n){return 0==(1&n)}function Jv(n,i,s,a){if(null===i)return-1;let u=0;if(a||!s){let p=!1;for(;u<i.length;){const y=i[u];if(y===n)return u;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=i[++u];for(;"string"==typeof E;)E=i[++u];continue}if(4===y)break;if(0===y){u+=4;continue}}u+=p?1:2}return-1}return function Qv(n,i){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===i)return s;s++}return-1}(i,n)}function dg(n,i,s=!1){for(let a=0;a<i.length;a++)if(Yv(n,i[a],s))return!0;return!1}function ey(n,i){e:for(let s=0;s<i.length;s++){const a=i[s];if(n.length===a.length){for(let u=0;u<n.length;u++)if(n[u]!==a[u])continue e;return!0}}return!1}function hg(n,i){return n?":not("+i.trim()+")":i}function ty(n){let i=n[0],s=1,a=2,u="",p=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const E=n[++s];u+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&a?u+="."+y:4&a&&(u+=" "+y);else""!==u&&!oa(y)&&(i+=hg(p,u),u=""),a=y,p=p||!oa(a);s++}return""!==u&&(i+=hg(p,u)),i}const jn={};function fg(n){pg(ni(),ht(),Dr()+n,wi())}function pg(n,i,s,a){if(!a)if(3==(3&i[2])){const p=n.preOrderCheckHooks;null!==p&&Ls(i,p,s)}else{const p=n.preOrderHooks;null!==p&&Qt(i,p,0,s)}Qs(s)}function Bd(n,i){return n<<17|i<<2}function aa(n){return n>>17&32767}function af(n){return 2|n}function sl(n){return(131068&n)>>2}function lf(n,i){return-131069&n|i<<2}function cf(n){return 1|n}function Sg(n,i){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const u=s[a],p=s[a+1];if(-1!==p){const y=n.data[p];Eo(u),y.contentQueries(2,i[p],p)}}}function Ou(n,i,s,a,u,p,y,E,I,G){const Z=i.blueprint.slice();return Z[0]=u,Z[2]=140|a,Tc(Z),Z[3]=Z[15]=n,Z[8]=s,Z[10]=y||n&&n[10],Z[11]=E||n&&n[11],Z[12]=I||n&&n[12]||null,Z[9]=G||n&&n[9]||null,Z[6]=p,Z[16]=2==i.type?n[16]:Z,Z}function gc(n,i,s,a,u){let p=n.data[i];if(null===p)p=function _f(n,i,s,a,u){const p=Jl(),y=ao(),I=n.data[i]=function xy(n,i,s,a,u,p){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,s,i,a,u);return null===n.firstChild&&(n.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(n,i,s,a,u),function Kl(){return Un.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=s,p.value=a,p.attrs=u;const y=function Ht(){const n=Un.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return hs(p,!0),p}function Il(n,i,s,a){if(0===s)return-1;const u=i.length;for(let p=0;p<s;p++)i.push(a),n.blueprint.push(a),n.data.push(null);return u}function mc(n,i,s){Ks(i);try{const a=n.viewQuery;null!==a&&rs(1,a,s);const u=n.template;null!==u&&xf(n,i,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Sg(n,i),n.staticViewQueries&&rs(2,n.viewQuery,s);const p=n.components;null!==p&&function vy(n,i){for(let s=0;s<i.length;s++)Yc(n,i[s])}(i,p)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{i[2]&=-5,Ca()}}function jc(n,i,s,a){const u=i[2];if(256==(256&u))return;Ks(i);const p=wi();try{Tc(i),function Zr(n){return Un.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&xf(n,i,s,2,a);const y=3==(3&u);if(!p)if(y){const G=n.preOrderCheckHooks;null!==G&&Ls(i,G,null)}else{const G=n.preOrderHooks;null!==G&&Qt(i,G,0,null),Os(i,0)}if(function Lg(n){for(let i=Nd(n);null!==i;i=Au(i)){if(!i[2])continue;const s=i[9];for(let a=0;a<s.length;a++){const u=s[a],p=u[3];0==(1024&u[2])&&ml(p,1),u[2]|=1024}}}(i),function Ey(n){for(let i=Nd(n);null!==i;i=Au(i))for(let s=10;s<i.length;s++){const a=i[s],u=a[1];Br(a)&&jc(u,a,u.template,a[8])}}(i),null!==n.contentQueries&&Sg(n,i),!p)if(y){const G=n.contentCheckHooks;null!==G&&Ls(i,G)}else{const G=n.contentHooks;null!==G&&Qt(i,G,1),Os(i,1)}!function gy(n,i){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)Qs(~u);else{const p=u,y=s[++a],E=s[++a];co(y,p),E(2,i[p])}}}finally{Qs(-1)}}(n,i);const E=n.components;null!==E&&function my(n,i){for(let s=0;s<i.length;s++)qd(n,i[s])}(i,E);const I=n.viewQuery;if(null!==I&&rs(2,I,a),!p)if(y){const G=n.viewCheckHooks;null!==G&&Ls(i,G)}else{const G=n.viewHooks;null!==G&&Qt(i,G,2),Os(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),p||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,ml(i[3],-1))}finally{Ca()}}function yy(n,i,s,a){const u=i[10],p=!wi(),y=Hi(i);try{p&&!y&&u.begin&&u.begin(),y&&mc(n,i,a),jc(n,i,s,a)}finally{p&&!y&&u.end&&u.end()}}function xf(n,i,s,a,u){const p=Dr(),y=2&a;try{Qs(-1),y&&i.length>20&&pg(n,i,20,wi()),s(a,u)}finally{Qs(p)}}function bf(n,i,s){!Vs()||(function ku(n,i,s,a){const u=s.directiveStart,p=s.directiveEnd;n.firstCreatePass||_(s,i),no(a,i);const y=s.initialInputs;for(let E=u;E<p;E++){const I=n.data[E],G=dt(I);G&&Zd(i,s,I);const Z=Ss(i,n,E,s);no(Z,i),null!==y&&wy(0,E-u,Z,I,0,y),G&&(Nt(s.index,i)[8]=Z)}}(n,i,s,O(s,i)),128==(128&s.flags)&&function Rg(n,i,s){const a=s.directiveStart,u=s.directiveEnd,y=s.index,E=function uo(){return Un.lFrame.currentDirectiveIndex}();try{Qs(y);for(let I=a;I<u;I++){const G=n.data[I],Z=i[I];Ea(I),(null!==G.hostBindings||0!==G.hostVars||null!==G.hostAttrs)&&Bu(G,Z)}}finally{Qs(-1),Ea(E)}}(n,i,s))}function wf(n,i,s=O){const a=i.localNames;if(null!==a){let u=i.index+1;for(let p=0;p<a.length;p+=2){const y=a[p+1],E=-1===y?s(i,n):n[y];n[u++]=E}}}function Mf(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=La(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function La(n,i,s,a,u,p,y,E,I,G){const Z=20+a,se=Z+u,Me=function _y(n,i){const s=[];for(let a=0;a<i;a++)s.push(a<n?null:jn);return s}(Z,se),Oe="function"==typeof G?G():G;return Me[1]={type:n,blueprint:Me,template:s,queries:null,viewQuery:E,declTNode:i,data:Me.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Oe,incompleteFirstPass:!1}}function Dg(n,i,s,a){const u=Tf(i);null===s?u.push(a):(u.push(s),n.firstCreatePass&&Xd(n).push(a,u.length-1))}function ji(n,i,s){for(let a in n)if(n.hasOwnProperty(a)){const u=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(i,u):s[a]=[i,u]}return s}function js(n,i,s,a,u,p,y,E){const I=O(i,s);let Z,G=i.inputs;!E&&null!=G&&(Z=G[a])?(Af(n,s,Z,a,u),ge(i)&&function zd(n,i){const s=Nt(i,n);16&s[2]||(s[2]|=64)}(s,i.index)):3&i.type&&(a=function Hd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),u=null!=y?y(u,i.value||"",a):u,Tt(p)?p.setProperty(I,a,u):Ja(a)||(I.setProperty?I.setProperty(a,u):I[a]=u))}function Ll(n,i,s,a){let u=!1;if(Vs()){const p=function Uu(n,i,s){const a=n.directiveRegistry;let u=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];dg(s,y.selectors,!1)&&(u||(u=[]),ue(_(s,i),n,y.type),dt(y)?(Vu(n,s),u.unshift(y)):u.push(y))}return u}(n,i,s),y=null===a?null:{"":-1};if(null!==p){u=!0,Sf(s,n.data.length,p.length);for(let Z=0;Z<p.length;Z++){const se=p[Z];se.providersResolver&&se.providersResolver(se)}let E=!1,I=!1,G=Il(n,i,p.length,null);for(let Z=0;Z<p.length;Z++){const se=p[Z];s.mergedAttrs=Do(s.mergedAttrs,se.hostAttrs),Wd(n,s,i,G,se),Ef(G,se,y),null!==se.contentQueries&&(s.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(s.flags|=128);const Me=se.type.prototype;!E&&(Me.ngOnChanges||Me.ngOnInit||Me.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),E=!0),!I&&(Me.ngOnChanges||Me.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),I=!0),G++}!function by(n,i){const a=i.directiveEnd,u=n.data,p=i.attrs,y=[];let E=null,I=null;for(let G=i.directiveStart;G<a;G++){const Z=u[G],se=Z.inputs,Me=null===p||ug(i)?null:Ig(se,p);y.push(Me),E=ji(se,G,E),I=ji(Z.outputs,G,I)}null!==E&&(E.hasOwnProperty("class")&&(i.flags|=16),E.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=y,i.inputs=E,i.outputs=I}(n,s)}y&&function Pg(n,i,s){if(i){const a=n.localNames=[];for(let u=0;u<i.length;u+=2){const p=s[i[u+1]];if(null==p)throw new fn(-301,!1);a.push(i[u],p)}}}(s,a,y)}return s.mergedAttrs=Do(s.mergedAttrs,s.attrs),u}function _c(n,i,s,a,u,p){const y=p.hostBindings;if(y){let E=n.hostBindingOpCodes;null===E&&(E=n.hostBindingOpCodes=[]);const I=~i.index;(function qc(n){let i=n.length;for(;i>0;){const s=n[--i];if("number"==typeof s&&s<0)return s}return 0})(E)!=I&&E.push(I),E.push(a,u,y)}}function Bu(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function Vu(n,i){i.flags|=2,(n.components||(n.components=[])).push(i.index)}function Ef(n,i,s){if(s){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)s[i.exportAs[a]]=n;dt(i)&&(s[""]=n)}}function Sf(n,i,s){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+s,n.providerIndexes=i}function Wd(n,i,s,a,u){n.data[a]=u;const p=u.factory||(u.factory=oo(u.type)),y=new zs(p,dt(u),null);n.blueprint[a]=y,s[a]=y,_c(n,i,0,a,Il(n,s,u.hostVars,jn),u)}function Zd(n,i,s){const a=O(i,n),u=Mf(s),p=n[10],y=$d(n,Ou(n,u,null,s.onPush?64:16,a,i,p,p.createRenderer(a,s),null,null));n[i.index]=y}function No(n,i,s,a,u,p){const y=O(n,i);!function jd(n,i,s,a,u,p,y){if(null==p)Tt(n)?n.removeAttribute(i,u,s):i.removeAttribute(u);else{const E=null==y?$e(p):y(p,a||"",u);Tt(n)?n.setAttribute(i,u,E,s):s?i.setAttributeNS(s,u,E):i.setAttribute(u,E)}}(i[11],y,p,n.value,s,a,u)}function wy(n,i,s,a,u,p){const y=p[i];if(null!==y){const E=a.setInput;for(let I=0;I<y.length;){const G=y[I++],Z=y[I++],se=y[I++];null!==E?a.setInput(s,se,G,Z):s[Z]=se}}}function Ig(n,i){let s=null,a=0;for(;a<i.length;){const u=i[a];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===s&&(s=[]),s.push(u,n[u],i[a+1])),a+=2}else a+=2;else a+=4}return s}function Cf(n,i,s,a){return new Array(n,!0,!1,i,null,0,a,s,null,null)}function qd(n,i){const s=Nt(i,n);if(Br(s)){const a=s[1];80&s[2]?jc(a,s,a.template,s[8]):s[5]>0&&$c(s)}}function $c(n){for(let a=Nd(n);null!==a;a=Au(a))for(let u=10;u<a.length;u++){const p=a[u];if(1024&p[2]){const y=p[1];jc(y,p,y.template,p[8])}else p[5]>0&&$c(p)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const u=Nt(s[a],n);Br(u)&&u[5]>0&&$c(u)}}function Yc(n,i){const s=Nt(i,n),a=s[1];(function Og(n,i){for(let s=i.length;s<n.blueprint.length;s++)i.push(n.blueprint[s])})(a,s),mc(a,s,s[8])}function $d(n,i){return n[13]?n[14][4]=i:n[13]=i,n[14]=i,i}function Jc(n){for(;n;){n[2]|=64;const i=il(n);if(Ut(n)&&!i)return n;n=i}return null}function Jd(n,i,s){const a=i[10];a.begin&&a.begin();try{jc(n,i,n.template,s)}catch(u){throw ol(i,u),u}finally{a.end&&a.end()}}function Hu(n){!function Yd(n){for(let i=0;i<n.components.length;i++){const s=n.components[i],a=jp(s),u=a[1];yy(u,a,u.template,s)}}(n[8])}function rs(n,i,s){Eo(0),i(n,s)}const Fg=(()=>Promise.resolve(null))();function Tf(n){return n[7]||(n[7]=[])}function Xd(n){return n.cleanup||(n.cleanup=[])}function ol(n,i){const s=n[9],a=s?s.get(Dd,null):null;a&&a.handleError(i)}function Af(n,i,s,a,u){for(let p=0;p<s.length;){const y=s[p++],E=s[p++],I=i[y],G=n.data[y];null!==G.setInput?G.setInput(I,u,a,E):I[E]=u}}function Oa(n,i,s){const a=V(i,n);!function Jp(n,i,s){Tt(n)?n.setValue(i,s):i.textContent=s}(n[11],a,s)}function Jo(n,i,s){let a=s?n.styles:null,u=s?n.classes:null,p=0;if(null!==i)for(let y=0;y<i.length;y++){const E=i[y];"number"==typeof E?p=E:1==p?u=Ft(u,E):2==p&&(a=Ft(a,E+": "+i[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=u:n.classesWithoutHost=u}const Kc=new ii("INJECTOR",-1);class Wu{get(i,s=Aa){if(s===Aa){const a=new Error(`NullInjectorError: No provider for ${Ge(i)}!`);throw a.name="NullInjectorError",a}return s}}const Qc=new ii("Set Injector scope."),al={},kg={};let Rf;function Bg(){return void 0===Rf&&(Rf=new Wu),Rf}function Pf(n,i=null,s=null,a){const u=Ug(n,i,s,a);return u._resolveInjectorDefTypes(),u}function Ug(n,i=null,s=null,a){return new Kd(n,s,i||Bg(),a)}class Kd{constructor(i,s,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];s&&Zs(s,E=>this.processProvider(E,i,s)),Zs([i],E=>this.processInjectorType(E,[],p)),this.records.set(Kc,ll(void 0,this));const y=this.records.get(Qc);this.scope=null!=y?y.value:null,this.source=u||("object"==typeof i?null:Ge(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,s=Aa,a=de.Default){this.assertNotDestroyed();const u=Sp(this),p=fe(void 0);try{if(!(a&de.SkipSelf)){let E=this.records.get(i);if(void 0===E){const I=function Lf(n){return"function"==typeof n||"object"==typeof n&&n instanceof ii}(i)&&Xi(i);E=I&&this.injectableDefInScope(I)?ll(Ol(i),al):null,this.records.set(i,E)}if(null!=E)return this.hydrate(i,E)}return(a&de.Self?Bg():this.parent).get(i,s=a&de.Optional&&s===Aa?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[lc]=y[lc]||[]).unshift(Ge(i)),u)throw y;return function jm(n,i,s,a){const u=n[lc];throw i[Ep]&&u.unshift(i[Ep]),n.message=function qm(n,i,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=Ge(i);if(Array.isArray(i))u=i.map(Ge).join(" -> ");else if("object"==typeof i){let p=[];for(let y in i)if(i.hasOwnProperty(y)){let E=i[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):Ge(E)))}u=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${n.replace(Hm,"\n  ")}`}("\n"+n.message,u,s,a),n.ngTokenPath=u,n[lc]=null,n}(y,i,"R3InjectorError",this.source)}throw y}finally{fe(p),Sp(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((a,u)=>i.push(Ge(u))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fn(205,!1)}processInjectorType(i,s,a){if(!(i=Pt(i)))return!1;let u=lr(i);const p=null==u&&i.ngModule||void 0,y=void 0===p?i:p,E=-1!==a.indexOf(y);if(void 0!==p&&(u=lr(p)),null==u)return!1;if(null!=u.imports&&!E){let Z;a.push(y);try{Zs(u.imports,se=>{this.processInjectorType(se,s,a)&&(void 0===Z&&(Z=[]),Z.push(se))})}finally{}if(void 0!==Z)for(let se=0;se<Z.length;se++){const{ngModule:Me,providers:Oe}=Z[se];Zs(Oe,ot=>this.processProvider(ot,Me,Oe||ti))}}this.injectorDefTypes.add(y);const I=oo(y)||(()=>new y);this.records.set(y,ll(I,al));const G=u.providers;if(null!=G&&!E){const Z=i;Zs(G,se=>this.processProvider(se,Z,G))}return void 0!==p&&void 0!==i.providers}processProvider(i,s,a){let u=bc(i=Pt(i))?i:Pt(i&&i.provide);const p=function Nl(n,i,s){return ju(n)?ll(void 0,n.useValue):ll(Zu(n),al)}(i);if(bc(i)||!0!==i.multi)this.records.get(u);else{let y=this.records.get(u);y||(y=ll(void 0,al,!0),y.factory=()=>Bh(y.multi),this.records.set(u,y)),u=i,y.multi.push(i)}this.records.set(u,p)}hydrate(i,s){return s.value===al&&(s.value=kg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Vg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(i){if(!i.providedIn)return!1;const s=Pt(i.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Ol(n){const i=Xi(n),s=null!==i?i.factory:oo(n);if(null!==s)return s;if(n instanceof ii)throw new fn(204,!1);if(n instanceof Function)return function Qd(n){const i=n.length;if(i>0)throw br(i,"?"),new fn(204,!1);const s=function ss(n){const i=n&&(n[os]||n[Ee]);if(i){const s=function Gi(n){if(n.hasOwnProperty("name"))return n.name;const i=(""+n).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),i}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new fn(204,!1)}function Zu(n,i,s){let a;if(bc(n)){const u=Pt(n);return oo(u)||Ol(u)}if(ju(n))a=()=>Pt(n.useValue);else if(function eh(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Bh(n.deps||[]));else if(function If(n){return!(!n||!n.useExisting)}(n))a=()=>Ts(Pt(n.useExisting));else{const u=Pt(n&&(n.useClass||n.provide));if(!function th(n){return!!n.deps}(n))return oo(u)||Ol(u);a=()=>new u(...Bh(n.deps))}return a}function ll(n,i,s=!1){return{factory:n,value:i,multi:s?[]:void 0}}function ju(n){return null!==n&&"object"==typeof n&&zm in n}function bc(n){return"function"==typeof n}let io=(()=>{class n{static create(s,a){var u;if(Array.isArray(s))return Pf({name:""},a,s,"");{const p=null!==(u=s.name)&&void 0!==u?u:"";return Pf({name:p},s.parent,s.providers,p)}}}return n.THROW_IF_NOT_FOUND=Aa,n.NULL=new Wu,n.\u0275prov=An({token:n,providedIn:"any",factory:()=>Ts(Kc)}),n.__NG_ELEMENT_ID__=-1,n})();function Fl(n,i){eo(jp(n)[1],or())}function Bf(n){let i=function jg(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;i;){let u;if(dt(n))u=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new fn(903,"");u=i.\u0275dir}if(u){if(s){a.push(u);const y=n;y.inputs=Uf(n.inputs),y.declaredInputs=Uf(n.declaredInputs),y.outputs=Uf(n.outputs);const E=u.hostBindings;E&&Fy(n,E);const I=u.viewQuery,G=u.contentQueries;if(I&&Oy(n,I),G&&Ny(n,G),rt(n.inputs,u.inputs),rt(n.declaredInputs,u.declaredInputs),rt(n.outputs,u.outputs),dt(u)&&u.data.animation){const Z=n.data;Z.animation=(Z.animation||[]).concat(u.data.animation)}}const p=u.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(n),E===Bf&&(s=!1)}}i=Object.getPrototypeOf(i)}!function Ly(n){let i=0,s=null;for(let a=n.length-1;a>=0;a--){const u=n[a];u.hostVars=i+=u.hostVars,u.hostAttrs=Do(u.hostAttrs,s=Do(s,u.hostAttrs))}}(a)}function Uf(n){return n===cr?{}:n===ti?[]:n}function Oy(n,i){const s=n.viewQuery;n.viewQuery=s?(a,u)=>{i(a,u),s(a,u)}:i}function Ny(n,i){const s=n.contentQueries;n.contentQueries=s?(a,u,p)=>{i(a,u,p),s(a,u,p)}:i}function Fy(n,i){const s=n.hostBindings;n.hostBindings=s?(a,u)=>{i(a,u),s(a,u)}:i}let ah=null;function kl(){if(!ah){const n=Nn.Symbol;if(n&&n.iterator)ah=n.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<i.length;++s){const a=i[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ah=a)}}}return ah}function Fa(n){return!!tu(n)&&(Array.isArray(n)||!(n instanceof Map)&&kl()in n)}function tu(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function la(n,i,s){return n[i]=s}function gs(n,i,s){return!Object.is(n[i],s)&&(n[i]=s,!0)}function wc(n,i,s,a){const u=gs(n,i,s);return gs(n,i+1,a)||u}function lh(n,i,s,a){const u=ht();return gs(u,re(),i)&&(ni(),No(Ii(),u,n,i,s,a)),lh}function ka(n,i,s,a){return gs(n,re(),s)?i+$e(s)+a:jn}function Vl(n,i,s,a,u,p){const E=wc(n,function lo(){return Un.lFrame.bindingIndex}(),s,u);return Hs(2),E?i+$e(s)+a+$e(u)+p:jn}function ed(n,i,s,a,u,p,y,E){const I=ht(),G=ni(),Z=n+20,se=G.firstCreatePass?function ch(n,i,s,a,u,p,y,E,I){const G=i.consts,Z=gc(i,n,4,y||null,Us(G,E));Ll(i,s,Z,Us(G,I)),eo(i,Z);const se=Z.tViews=La(2,Z,a,u,p,i.directiveRegistry,i.pipeRegistry,null,i.schemas,G);return null!==i.queries&&(i.queries.template(i,Z),se.queries=i.queries.embeddedTView(Z)),Z}(Z,G,I,i,s,a,u,p,y):G.data[Z];hs(se,!1);const Me=I[11].createComment("");rl(G,I,Me,se),no(Me,I),$d(I,I[Z]=Cf(Me,I,Me,se)),Fe(se)&&bf(G,I,se),null!=y&&wf(I,se,E)}function uu(n,i=de.Default){const s=ht();return null===s?Ts(n,i):Sn(or(),s,Pt(n),i)}function jf(){throw new Error("invalid")}function fh(n,i,s){const a=ht();return gs(a,re(),i)&&js(ni(),Ii(),a,n,i,a[11],s,!1),fh}function rd(n,i,s,a,u){const y=u?"class":"style";Af(n,s,i.inputs[y],y,a)}function sd(n,i,s,a){const u=ht(),p=ni(),y=20+n,E=u[11],I=u[y]=zc(E,i,function es(){return Un.lFrame.currentNamespace}()),G=p.firstCreatePass?function sm(n,i,s,a,u,p,y){const E=i.consts,G=gc(i,n,2,u,Us(E,p));return Ll(i,s,G,Us(E,y)),null!==G.attrs&&Jo(G,G.attrs,!1),null!==G.mergedAttrs&&Jo(G,G.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,G),G}(y,p,u,0,i,s,a):p.data[y];hs(G,!0);const Z=G.mergedAttrs;null!==Z&&To(E,I,Z);const se=G.classes;null!==se&&sf(E,I,se);const Me=G.styles;null!==Me&&ag(E,I,Me),64!=(64&G.flags)&&rl(p,u,I,G),0===function vr(){return Un.lFrame.elementDepthCount}()&&no(I,u),function Ac(){Un.lFrame.elementDepthCount++}(),Fe(G)&&(bf(p,u,G),function Cg(n,i,s){if(ne(i)){const u=i.directiveEnd;for(let p=i.directiveStart;p<u;p++){const y=n.data[p];y.contentQueries&&y.contentQueries(1,s[p],p)}}}(p,G,u)),null!==a&&wf(u,G)}function ph(){let n=or();ao()?Ma():(n=n.parent,hs(n,!1));const i=n;!function mu(){Un.lFrame.elementDepthCount--}();const s=ni();s.firstCreatePass&&(eo(s,n),ne(n)&&s.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Gs(n){return 0!=(16&n.flags)}(i)&&rd(s,i,ht(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function _l(n){return 0!=(32&n.flags)}(i)&&rd(s,i,ht(),i.stylesWithoutHost,!1)}function du(n,i,s,a){sd(n,i,s,a),ph()}function Yf(){return ht()}function mh(n){return!!n&&"function"==typeof n.then}function Jf(n){return!!n&&"function"==typeof n.subscribe}const od=Jf;function Xf(n,i,s,a){const u=ht(),p=ni(),y=or();return function cm(n,i,s,a,u,p,y,E){const I=Fe(a),Z=n.firstCreatePass&&Xd(n),se=i[8],Me=Tf(i);let Oe=!0;if(3&a.type||E){const Gt=O(a,i),cn=E?E(Gt):Gt,wt=Me.length,Rn=E?Ei=>E(vn(Ei[a.index])):a.index;if(Tt(s)){let Ei=null;if(!E&&I&&(Ei=function lm(n,i,s,a){const u=n.cleanup;if(null!=u)for(let p=0;p<u.length-1;p+=2){const y=u[p];if(y===s&&u[p+1]===a){const E=i[7],I=u[p+2];return E.length>I?E[I]:null}"string"==typeof y&&(p+=2)}return null}(n,i,u,a.index)),null!==Ei)(Ei.__ngLastListenerFn__||Ei).__ngNextListenerFn__=p,Ei.__ngLastListenerFn__=p,Oe=!1;else{p=Kf(a,i,se,p,!1);const nr=s.listen(cn,u,p);Me.push(p,nr),Z&&Z.push(u,Rn,wt,wt+1)}}else p=Kf(a,i,se,p,!0),cn.addEventListener(u,p,y),Me.push(p),Z&&Z.push(u,Rn,wt,y)}else p=Kf(a,i,se,p,!1);const ot=a.outputs;let It;if(Oe&&null!==ot&&(It=ot[u])){const Gt=It.length;if(Gt)for(let cn=0;cn<Gt;cn+=2){const ya=i[It[cn]][It[cn+1]].subscribe(p),yd=Me.length;Me.push(p,ya),Z&&Z.push(u,a.index,yd,-(yd+1))}}}(p,u,u[11],y,n,i,!!s,a),Xf}function $y(n,i,s,a){try{return!1!==s(a)}catch(u){return ol(n,u),!1}}function Kf(n,i,s,a,u){return function p(y){if(y===Function)return a;const E=2&n.flags?Nt(n.index,i):i;0==(32&i[2])&&Jc(E);let I=$y(i,0,a,y),G=p.__ngNextListenerFn__;for(;G;)I=$y(i,0,G,y)&&I,G=G.__ngNextListenerFn__;return u&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Qf(n=1){return function Ql(n){return(Un.lFrame.contextLView=function ec(n,i){for(;n>0;)i=i[15],n--;return i}(n,Un.lFrame.contextLView))[8]}(n)}function um(n,i){let s=null;const a=function Xv(n){const i=n.attrs;if(null!=i){const s=i.indexOf(5);if(0==(1&s))return i[s+1]}return null}(n);for(let u=0;u<i.length;u++){const p=i[u];if("*"!==p){if(null===a?dg(n,p,!0):ey(a,p))return u}else s=u}return s}function ep(n){const i=ht()[16][6];if(!i.projection){const a=i.projection=br(n?n.length:1,null),u=a.slice();let p=i.child;for(;null!==p;){const y=n?um(p,n):0;null!==y&&(u[y]?u[y].projectionNext=p:a[y]=p,u[y]=p),p=p.next}}}function ld(n,i=0,s){const a=ht(),u=ni(),p=gc(u,20+n,16,null,s||null);null===p.projection&&(p.projection=i),Ma(),64!=(64&p.flags)&&function Wv(n,i,s){og(i[11],0,i,s,Jh(n,s,i),Qh(s.parent||i[6],s,i))}(u,a,p)}function vh(n,i,s){return tp(n,"",i,"",s),vh}function tp(n,i,s,a,u){const p=ht(),y=ka(p,i,s,a);return y!==jn&&js(ni(),Ii(),p,n,y,p[11],u,!1),tp}function Wl(n,i,s,a,u){const p=n[s+1],y=null===i;let E=a?aa(p):sl(p),I=!1;for(;0!==E&&(!1===I||y);){const Z=n[E+1];X0(n[E],i)&&(I=!0,n[E+1]=a?cf(Z):af(Z)),E=a?aa(Z):sl(Z)}I&&(n[s+1]=a?af(p):cf(p))}function X0(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Ke(n,i)>=0}const ms={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zl(n){return n.substring(ms.key,ms.keyEnd)}function jl(n,i){const s=ms.textEnd;return s===i?-1:(i=ms.keyEnd=function Ky(n,i,s){for(;i<s&&n.charCodeAt(i)>32;)i++;return i}(n,ms.key=i,s),ql(n,i,s))}function ql(n,i,s){for(;i<s&&n.charCodeAt(i)<=32;)i++;return i}function op(n,i,s){return da(n,i,s,!1),op}function ap(n,i){return da(n,i,null,!0),ap}function ar(n){ha(W,Ha,n,!0)}function Ha(n,i){for(let s=function Xy(n){return function vm(n){ms.key=0,ms.keyEnd=0,ms.value=0,ms.valueEnd=0,ms.textEnd=n.length}(n),jl(n,ql(n,0,ms.textEnd))}(i);s>=0;s=jl(i,s))W(n,Zl(i),!0)}function da(n,i,s,a){const u=ht(),p=ni(),y=Hs(2);p.firstUpdatePass&&xm(p,n,y,a),i!==jn&&gs(u,y,i)&&cd(p,p.data[Dr()],u,u[11],n,u[y+1]=function tx(n,i){return null==n||("string"==typeof i?n+=i:"object"==typeof n&&(n=Ge(nl(n)))),n}(i,s),a,y)}function ha(n,i,s,a){const u=ni(),p=Hs(2);u.firstUpdatePass&&xm(u,null,p,a);const y=ht();if(s!==jn&&gs(y,p,s)){const E=u.data[Dr()];if(dl(E,a)&&!yh(u,p)){let I=a?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(s=Ft(I,s||"")),rd(u,E,y,s,a)}else!function Mm(n,i,s,a,u,p,y,E){u===jn&&(u=ti);let I=0,G=0,Z=0<u.length?u[0]:null,se=0<p.length?p[0]:null;for(;null!==Z||null!==se;){const Me=I<u.length?u[I+1]:void 0,Oe=G<p.length?p[G+1]:void 0;let It,ot=null;Z===se?(I+=2,G+=2,Me!==Oe&&(ot=se,It=Oe)):null===se||null!==Z&&Z<se?(I+=2,ot=Z):(G+=2,ot=se,It=Oe),null!==ot&&cd(n,i,s,a,ot,It,y,E),Z=I<u.length?u[I]:null,se=G<p.length?p[G]:null}}(u,E,y,y[11],y[p+1],y[p+1]=function wm(n,i,s){if(null==s||""===s)return ti;const a=[],u=nl(s);if(Array.isArray(u))for(let p=0;p<u.length;p++)n(a,u[p],!0);else if("object"==typeof u)for(const p in u)u.hasOwnProperty(p)&&n(a,p,u[p]);else"string"==typeof u&&i(a,u);return a}(n,i,s),a,p)}}function yh(n,i){return i>=n.expandoStartIndex}function xm(n,i,s,a){const u=n.data;if(null===u[s+1]){const p=u[Dr()],y=yh(n,s);dl(p,a)&&null===i&&!y&&(i=!1),i=function t_(n,i,s,a){const u=function Mo(n){const i=Un.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let p=a?i.residualClasses:i.residualStyles;if(null===u)0===(a?i.classBindings:i.styleBindings)&&(s=_h(s=cp(null,n,i,s,a),i.attrs,a),p=null);else{const y=i.directiveStylingLast;if(-1===y||n[y]!==u)if(s=cp(u,n,i,s,a),null===p){let I=function ex(n,i,s){const a=s?i.classBindings:i.styleBindings;if(0!==sl(a))return n[aa(a)]}(n,i,a);void 0!==I&&Array.isArray(I)&&(I=cp(null,n,i,I[1],a),I=_h(I,i.attrs,a),function bm(n,i,s,a){n[aa(s?i.classBindings:i.styleBindings)]=a}(n,i,a,I))}else p=function lp(n,i,s){let a;const u=i.directiveEnd;for(let p=1+i.directiveStylingLast;p<u;p++)a=_h(a,n[p].hostAttrs,s);return _h(a,i.attrs,s)}(n,i,a)}return void 0!==p&&(a?i.residualClasses=p:i.residualStyles=p),s}(u,p,i,a),function pm(n,i,s,a,u,p){let y=p?i.classBindings:i.styleBindings,E=aa(y),I=sl(y);n[a]=s;let Z,G=!1;if(Array.isArray(s)){const se=s;Z=se[1],(null===Z||Ke(se,Z)>0)&&(G=!0)}else Z=s;if(u)if(0!==I){const Me=aa(n[E+1]);n[a+1]=Bd(Me,E),0!==Me&&(n[Me+1]=lf(n[Me+1],a)),n[E+1]=function ry(n,i){return 131071&n|i<<17}(n[E+1],a)}else n[a+1]=Bd(E,0),0!==E&&(n[E+1]=lf(n[E+1],a)),E=a;else n[a+1]=Bd(I,0),0===E?E=a:n[I+1]=lf(n[I+1],a),I=a;G&&(n[a+1]=af(n[a+1])),Wl(n,Z,a,!0),Wl(n,Z,a,!1),function Jy(n,i,s,a,u){const p=u?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof i&&Ke(p,i)>=0&&(s[a+1]=cf(s[a+1]))}(i,Z,n,a,p),y=Bd(E,I),p?i.classBindings=y:i.styleBindings=y}(u,p,i,s,y,a)}}function cp(n,i,s,a,u){let p=null;const y=s.directiveEnd;let E=s.directiveStylingLast;for(-1===E?E=s.directiveStart:E++;E<y&&(p=i[E],a=_h(a,p.hostAttrs,u),p!==n);)E++;return null!==n&&(s.directiveStylingLast=E),a}function _h(n,i,s){const a=s?1:2;let u=-1;if(null!==i)for(let p=0;p<i.length;p++){const y=i[p];"number"==typeof y?u=y:u===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),W(n,y,!!s||i[++p]))}return void 0===n?null:n}function cd(n,i,s,a,u,p,y,E){if(!(3&i.type))return;const I=n.data,G=I[E+1];ud(function vg(n){return 1==(1&n)}(G)?Em(I,i,s,u,sl(G),y):void 0)||(ud(p)||function mg(n){return 2==(2&n)}(G)&&(p=Em(I,null,s,u,E,y)),function jv(n,i,s,a,u){const p=Tt(n);if(i)u?p?n.addClass(s,a):s.classList.add(a):p?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:ps.DashCase;if(null==u)p?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const E="string"==typeof u&&u.endsWith("!important");E&&(u=u.slice(0,-10),y|=ps.Important),p?n.setStyle(s,a,u,y):s.style.setProperty(a,u,E?"important":"")}}}(a,y,V(Dr(),s),u,p))}function Em(n,i,s,a,u,p){const y=null===i;let E;for(;u>0;){const I=n[u],G=Array.isArray(I),Z=G?I[1]:I,se=null===Z;let Me=s[u+1];Me===jn&&(Me=se?ti:void 0);let Oe=se?he(Me,a):Z===a?Me:void 0;if(G&&!ud(Oe)&&(Oe=he(I,a)),ud(Oe)&&(E=Oe,y))return E;const ot=n[u+1];u=y?aa(ot):sl(ot)}if(null!==i){let I=p?i.residualClasses:i.residualStyles;null!=I&&(E=he(I,a))}return E}function ud(n){return void 0!==n}function dl(n,i){return 0!=(n.flags&(i?16:32))}function dd(n,i=""){const s=ht(),a=ni(),u=n+20,p=a.firstCreatePass?gc(a,u,1,i,null):a.data[u],y=s[u]=function Fd(n,i){return Tt(n)?n.createText(i):n.createTextNode(i)}(s[11],i);rl(a,s,y,p),hs(p,!1)}function hd(n){return xh("",n,""),hd}function xh(n,i,s){const a=ht(),u=ka(a,n,i,s);return u!==jn&&Oa(a,Dr(),u),xh}function bh(n,i,s,a,u){const p=ht(),y=Vl(p,n,i,s,a,u);return y!==jn&&Oa(p,Dr(),y),bh}function hp(n,i,s){ha(W,Ha,ka(ht(),n,i,s),!0)}const pu=void 0;var cx=["en",[["a","p"],["AM","PM"],pu],[["AM","PM"],pu,pu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pu,"{1} 'at' {0}",pu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lx(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let fd={};function Rm(n){const i=function ux(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=v_(i);if(s)return s;const a=i.split("-")[0];if(s=v_(a),s)return s;if("en"===a)return cx;throw new Error(`Missing locale data for the locale "${n}".`)}function m_(n){return Rm(n)[On.PluralCase]}function v_(n){return n in fd||(fd[n]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[n]),fd[n]}var On=(()=>((On=On||{})[On.LocaleId=0]="LocaleId",On[On.DayPeriodsFormat=1]="DayPeriodsFormat",On[On.DayPeriodsStandalone=2]="DayPeriodsStandalone",On[On.DaysFormat=3]="DaysFormat",On[On.DaysStandalone=4]="DaysStandalone",On[On.MonthsFormat=5]="MonthsFormat",On[On.MonthsStandalone=6]="MonthsStandalone",On[On.Eras=7]="Eras",On[On.FirstDayOfWeek=8]="FirstDayOfWeek",On[On.WeekendRange=9]="WeekendRange",On[On.DateFormat=10]="DateFormat",On[On.TimeFormat=11]="TimeFormat",On[On.DateTimeFormat=12]="DateTimeFormat",On[On.NumberSymbols=13]="NumberSymbols",On[On.NumberFormats=14]="NumberFormats",On[On.CurrencyCode=15]="CurrencyCode",On[On.CurrencySymbol=16]="CurrencySymbol",On[On.CurrencyName=17]="CurrencyName",On[On.Currencies=18]="Currencies",On[On.Directionality=19]="Directionality",On[On.PluralCase=20]="PluralCase",On[On.ExtraData=21]="ExtraData",On))();const gp="en-US";let y_=gp;function nn(n,i,s,a,u){if(n=Pt(n),Array.isArray(n))for(let p=0;p<n.length;p++)nn(n[p],i,s,a,u);else{const p=ni(),y=ht();let E=bc(n)?n:Pt(n.provide),I=Zu(n);const G=or(),Z=1048575&G.providerIndexes,se=G.directiveStart,Me=G.providerIndexes>>20;if(bc(n)||!n.multi){const Oe=new zs(I,u,uu),ot=In(E,i,u?Z:Z+Me,se);-1===ot?(ue(_(G,y),p,E),Vn(p,n,i.length),i.push(E),G.directiveStart++,G.directiveEnd++,u&&(G.providerIndexes+=1048576),s.push(Oe),y.push(Oe)):(s[ot]=Oe,y[ot]=Oe)}else{const Oe=In(E,i,Z+Me,se),ot=In(E,i,Z,Z+Me),It=Oe>=0&&s[Oe],Gt=ot>=0&&s[ot];if(u&&!Gt||!u&&!It){ue(_(G,y),p,E);const cn=function Vr(n,i,s,a,u){const p=new zs(n,s,uu);return p.multi=[],p.index=i,p.componentProviders=0,bt(p,u,a&&!s),p}(u?Lr:Mi,s.length,u,a,I);!u&&Gt&&(s[ot].providerFactory=cn),Vn(p,n,i.length,0),i.push(E),G.directiveStart++,G.directiveEnd++,u&&(G.providerIndexes+=1048576),s.push(cn),y.push(cn)}else Vn(p,n,Oe>-1?Oe:ot,bt(s[u?ot:Oe],I,!u&&a));!u&&a&&Gt&&s[ot].componentProviders++}}}function Vn(n,i,s,a){const u=bc(i),p=function Xo(n){return!!n.useClass}(i);if(u||p){const I=(p?Pt(i.useClass):i).prototype.ngOnDestroy;if(I){const G=n.destroyHooks||(n.destroyHooks=[]);if(!u&&i.multi){const Z=G.indexOf(s);-1===Z?G.push(s,[a,I]):G[Z+1].push(a,I)}else G.push(s,I)}}}function bt(n,i,s){return s&&n.componentProviders++,n.multi.push(i)-1}function In(n,i,s,a){for(let u=s;u<a;u++)if(i[u]===n)return u;return-1}function Mi(n,i,s,a){return ro(this.multi,[])}function Lr(n,i,s,a){const u=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ss(s,s[1],this.providerFactory.index,a);p=E.slice(0,y),ro(u,p);for(let I=y;I<E.length;I++)p.push(E[I])}else p=[],ro(u,p);return p}function ro(n,i){for(let s=0;s<n.length;s++)i.push((0,n[s])());return i}function fa(n,i=[]){return s=>{s.providersResolver=(a,u)=>function xn(n,i,s){const a=ni();if(a.firstCreatePass){const u=dt(n);nn(s,a.data,a.blueprint,u,!0),nn(i,a.data,a.blueprint,u,!1)}}(a,u?u(n):n,i)}}class pd{}class S_{resolveComponentFactory(i){throw function M_(n){const i=Error(`No component factory found for ${Ge(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let gd=(()=>{class n{}return n.NULL=new S_,n})();function C_(){return ce(or(),ht())}function ce(n,i){return new Ue(O(n,i))}let Ue=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=C_,n})();function st(n){return n instanceof Ue?n.nativeElement:n}class Mt{}let qn=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fi(){const n=ht(),s=Nt(or().index,n);return function Jn(n){return n[11]}(Tr(s)?s:n)}(),n})(),oi=(()=>{class n{}return n.\u0275prov=An({token:n,providedIn:"root",factory:()=>null}),n})();class qi{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Li=new qi("13.2.2"),Ri={};function yr(n,i,s,a,u=!1){for(;null!==s;){const p=i[s.index];if(null!==p&&a.push(vn(p)),j(p))for(let E=10;E<p.length;E++){const I=p[E],G=I[1].firstChild;null!==G&&yr(I[1],I,G,a)}const y=s.type;if(8&y)yr(n,i,s.child,a);else if(32&y){const E=Ld(s,i);let I;for(;I=E();)a.push(I)}else if(16&y){const E=Ns(i,s);if(Array.isArray(E))a.push(...E);else{const I=il(i[16]);yr(I[1],I,E,a,!0)}}s=u?s.projectionNext:s.next}return a}class pa{constructor(i,s){this._lView=i,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,s=i[1];return yr(s,i,s.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(j(i)){const s=i[8],a=s?s.indexOf(this):-1;a>-1&&(Yh(i,a),tl(s,a))}this._attachedToViewContainer=!1}tg(this._lView[1],this._lView)}onDestroy(i){Dg(this._lView[1],this._lView,null,i)}markForCheck(){Jc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Jd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function zu(n,i,s){Qr(!0);try{Jd(n,i,s)}finally{Qr(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new fn(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qp(n,i){Iu(n,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new fn(902,"");this._appRef=i}}class gu extends pa{constructor(i){super(i),this._view=i}detectChanges(){Hu(this._view)}checkNoChanges(){!function Ng(n){Qr(!0);try{Hu(n)}finally{Qr(!1)}}(this._view)}get context(){return null}}class Bi extends gd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const s=Yi(i);return new Qo(s,this.ngModule)}}function ga(n){const i=[];for(let s in n)n.hasOwnProperty(s)&&i.push({propName:n[s],templateName:s});return i}const za=new ii("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Yp});class Qo extends pd{constructor(i,s){super(),this.componentDef=i,this.ngModule=s,this.componentType=i.type,this.selector=function ny(n){return n.map(ty).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return ga(this.componentDef.inputs)}get outputs(){return ga(this.componentDef.outputs)}create(i,s,a,u){const p=(u=u||this.ngModule)?function Ah(n,i){return{get:(s,a,u)=>{const p=n.get(s,Ri,u);return p!==Ri||a===Ri?p:i.get(s,a,u)}}}(i,u.injector):i,y=p.get(Mt,bi),E=p.get(oi,null),I=y.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",Z=a?function Ag(n,i,s){if(Tt(n))return n.selectRootElement(i,s===on.ShadowDom);let a="string"==typeof i?n.querySelector(i):i;return a.textContent="",a}(I,a,this.componentDef.encapsulation):zc(y.createRenderer(null,this.componentDef),G,function vs(n){const i=n.toLowerCase();return"svg"===i?"svg":"math"===i?k:null}(G)),se=this.componentDef.onPush?576:528,Me=function kf(n,i){return{components:[],scheduler:n||Yp,clean:Fg,playerHandler:i||null,flags:0}}(),Oe=La(0,null,null,1,0,null,null,null,null,null),ot=Ou(null,Oe,Me,se,null,null,y,I,E,p);let It,Gt;Ks(ot);try{const cn=function Na(n,i,s,a,u,p){const y=s[1];s[20]=n;const I=gc(y,20,2,"#host",null),G=I.mergedAttrs=i.hostAttrs;null!==G&&(Jo(I,G,!0),null!==n&&(To(u,n,G),null!==I.classes&&sf(u,n,I.classes),null!==I.styles&&ag(u,n,I.styles)));const Z=a.createRenderer(n,i),se=Ou(s,Mf(i),null,i.onPush?64:16,s[20],I,a,Z,p||null,null);return y.firstCreatePass&&(ue(_(I,s),y,i.type),Vu(y,I),Sf(I,s.length,1)),$d(s,se),s[20]=se}(Z,this.componentDef,ot,y,I);if(Z)if(a)To(I,Z,["ng-version",Li.full]);else{const{attrs:wt,classes:Rn}=function iy(n){const i=[],s=[];let a=1,u=2;for(;a<n.length;){let p=n[a];if("string"==typeof p)2===u?""!==p&&i.push(p,n[++a]):8===u&&s.push(p);else{if(!oa(u))break;u=p}a++}return{attrs:i,classes:s}}(this.componentDef.selectors[0]);wt&&To(I,Z,wt),Rn&&Rn.length>0&&sf(I,Z,Rn.join(" "))}if(Gt=X(Oe,20),void 0!==s){const wt=Gt.projection=[];for(let Rn=0;Rn<this.ngContentSelectors.length;Rn++){const Ei=s[Rn];wt.push(null!=Ei?Array.from(Ei):null)}}It=function Zg(n,i,s,a,u){const p=s[1],y=function Fu(n,i,s){const a=or();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Wd(n,a,i,Il(n,i,1,null),s));const u=Ss(i,n,a.directiveStart,a);no(u,i);const p=O(a,i);return p&&no(p,i),u}(p,s,i);if(a.components.push(y),n[8]=y,u&&u.forEach(I=>I(y,i)),i.contentQueries){const I=or();i.contentQueries(1,y,I.directiveStart)}const E=or();return!p.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Qs(E.index),_c(s[1],E,0,E.directiveStart,E.directiveEnd,i),Bu(i,y)),y}(cn,this.componentDef,ot,Me,[Fl]),mc(Oe,ot,null)}finally{Ca()}return new md(this.componentType,It,ce(Gt,ot),ot,Gt)}}class md extends class hl{}{constructor(i,s,a,u,p){super(),this.location=a,this._rootLView=u,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new gu(u),this.componentType=i}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Dh{}class xx{}const Rh=new Map;class Mx extends Dh{constructor(i,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Bi(this);const a=Fi(i);this._bootstrapComponents=Pa(a.bootstrap),this._r3Injector=Ug(i,s,[{provide:Dh,useValue:this},{provide:gd,useValue:this.componentFactoryResolver}],Ge(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,s=io.THROW_IF_NOT_FOUND,a=de.Default){return i===io||i===Dh||i===Kc?this:this._r3Injector.get(i,s,a)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class T_ extends xx{constructor(i){super(),this.moduleType=i,null!==Fi(i)&&function Vb(n){const i=new Set;!function s(a){const u=Fi(a,!0),p=u.id;null!==p&&(function bx(n,i,s){if(i&&i!==s)throw new Error(`Duplicate module registered for ${n} - ${Ge(i)} vs ${Ge(i.name)}`)}(p,Rh.get(p),a),Rh.set(p,a));const y=Pa(u.imports);for(const E of y)i.has(E)||(i.add(E),s(E))}(n)}(i)}create(i){return new Mx(this.moduleType,i)}}function Ex(n,i,s){const a=fs()+n,u=ht();return u[a]===jn?la(u,a,s?i.call(s):i()):function Bl(n,i){return n[i]}(u,a)}function Sx(n,i,s,a,u){return function Tx(n,i,s,a,u,p,y){const E=i+s;return wc(n,E,u,p)?la(n,E+2,y?a.call(y,u,p):a(u,p)):yp(n,E+2)}(ht(),fs(),n,i,s,a,u)}function yp(n,i){const s=n[i];return s===jn?void 0:s}function Px(n,i){const s=ni();let a;const u=n+20;s.firstCreatePass?(a=function Yb(n,i){if(i)for(let s=i.length-1;s>=0;s--){const a=i[s];if(n===a.name)return a}}(i,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(u,a.onDestroy)):a=s.data[u];const p=a.factory||(a.factory=oo(a.type)),y=fe(uu);try{const E=Xa(!1),I=p();return Xa(E),function uh(n,i,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),i[s]=a}(s,ht(),u,I),I}finally{fe(y)}}function Ix(n,i,s){const a=n+20,u=ht(),p=function We(n,i){return n[i]}(u,a);return function _p(n,i){return n[1].data[i].pure}(u,a)?function Cx(n,i,s,a,u,p){const y=i+s;return gs(n,y,u)?la(n,y+1,p?a.call(p,u):a(u)):yp(n,y+1)}(u,fs(),i,p.transform,s,p):p.transform(s)}function A_(n){return i=>{setTimeout(n,void 0,i)}}const $l=class ew extends Ae.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,s,a){var u,p,y;let E=i,I=s||(()=>null),G=a;if(i&&"object"==typeof i){const se=i;E=null===(u=se.next)||void 0===u?void 0:u.bind(se),I=null===(p=se.error)||void 0===p?void 0:p.bind(se),G=null===(y=se.complete)||void 0===y?void 0:y.bind(se)}this.__isAsync&&(I=A_(I),E&&(E=A_(E)),G&&(G=A_(G)));const Z=super.subscribe({next:E,error:I,complete:G});return i instanceof Ie.w&&i.add(Z),Z}};function tw(){return this._results[kl()]()}class D_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=kl(),a=D_.prototype;a[s]||(a[s]=tw)}get changes(){return this._changes||(this._changes=new $l)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,s){return this._results.reduce(i,s)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,s){const a=this;a.dirty=!1;const u=Cs(i);(this._changesDetected=!function Ic(n,i,s){if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let u=n[a],p=i[a];if(s&&(u=s(u),p=s(p)),p!==u)return!1}return!0}(a._results,u,s))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xp=(()=>{class n{}return n.__NG_ELEMENT_ID__=rw,n})();const nw=xp,iw=class extends nw{constructor(i,s,a){super(),this._declarationLView=i,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(i){const s=this._declarationTContainer.tViews,a=Ou(this._declarationLView,s,i,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(a[19]=p.createEmbeddedView(s)),mc(s,a,i),new pa(a)}};function rw(){return Pm(or(),ht())}function Pm(n,i){return 4&n.type?new iw(i,n,ce(n,i)):null}let Im=(()=>{class n{}return n.__NG_ELEMENT_ID__=sw,n})();function sw(){return Nx(or(),ht())}const ow=Im,Lx=class extends ow{constructor(i,s,a){super(),this._lContainer=i,this._hostTNode=s,this._hostLView=a}get element(){return ce(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){const i=J(this._hostTNode,this._hostLView);if(Rc(i)){const s=Ro(i,this._hostLView),a=Yo(i);return new ns(s[1].data[a+8],s)}return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const s=Ox(this._lContainer);return null!==s&&s[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,s,a){const u=i.createEmbeddedView(s||{});return this.insert(u,a),u}createComponent(i,s,a,u,p){const y=i&&!function Ta(n){return"function"==typeof n}(i);let E;if(y)E=s;else{const se=s||{};E=se.index,a=se.injector,u=se.projectableNodes,p=se.ngModuleRef}const I=y?i:new Qo(Yi(i)),G=a||this.parentInjector;if(!p&&null==I.ngModule&&G){const se=G.get(Dh,null);se&&(p=se)}const Z=I.create(G,u,void 0,p);return this.insert(Z.hostView,E),Z}insert(i,s){const a=i._lView,u=a[1];if(function Xs(n){return j(n[3])}(a)){const Z=this.indexOf(i);if(-1!==Z)this.detach(Z);else{const se=a[3],Me=new Lx(se,se[6],se[3]);Me.detach(Me.indexOf(i))}}const p=this._adjustIndex(s),y=this._lContainer;!function Vv(n,i,s,a){const u=10+a,p=s.length;a>0&&(s[u-1][4]=i),a<p-10?(i[4]=s[u],Lc(s,10+a,i)):(s.push(i),i[4]=null),i[3]=s;const y=i[17];null!==y&&s!==y&&function Hv(n,i){const s=n[9];i[16]!==i[3][3][16]&&(n[2]=!0),null===s?n[9]=[i]:s.push(i)}(y,i);const E=i[19];null!==E&&E.insertView(n),i[2]|=128}(u,a,y,p);const E=Gc(p,y),I=a[11],G=Pu(I,y[7]);return null!==G&&function Kp(n,i,s,a,u,p){a[0]=u,a[6]=i,Iu(n,a,s,1,u,p)}(u,y[6],I,a,G,E),i.attachToViewContainerRef(),Lc(R_(y),p,i),i}move(i,s){return this.insert(i,s)}indexOf(i){const s=Ox(this._lContainer);return null!==s?s.indexOf(i):-1}remove(i){const s=this._adjustIndex(i,-1),a=Yh(this._lContainer,s);a&&(tl(R_(this._lContainer),s),tg(a[1],a))}detach(i){const s=this._adjustIndex(i,-1),a=Yh(this._lContainer,s);return a&&null!=tl(R_(this._lContainer),s)?new pa(a):null}_adjustIndex(i,s=0){return null==i?this.length+s:i}};function Ox(n){return n[8]}function R_(n){return n[8]||(n[8]=[])}function Nx(n,i){let s;const a=i[n.index];if(j(a))s=a;else{let u;if(8&n.type)u=vn(a);else{const p=i[11];u=p.createComment("");const y=O(n,i);pc(p,Pu(p,y),u,function rg(n,i){return Tt(n)?n.nextSibling(i):i.nextSibling}(p,y),!1)}i[n.index]=s=Cf(a,i,u,n),$d(i,s)}return new Lx(s,n,i)}class P_{constructor(i){this.queryList=i,this.matches=null}clone(){return new P_(this.queryList)}setDirty(){this.queryList.setDirty()}}class I_{constructor(i=[]){this.queries=i}createEmbeddedView(i){const s=i.queries;if(null!==s){const a=null!==i.contentQueries?i.contentQueries[0]:s.length,u=[];for(let p=0;p<a;p++){const y=s.getByIndex(p);u.push(this.queries[y.indexInDeclarationView].clone())}return new I_(u)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let s=0;s<this.queries.length;s++)null!==Wx(i,s).matches&&this.queries[s].setDirty()}}class Fx{constructor(i,s,a=null){this.predicate=i,this.flags=s,this.read=a}}class L_{constructor(i=[]){this.queries=i}elementStart(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,s)}elementEnd(i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(i)}embeddedTView(i){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(i,u);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new L_(s):null}template(i,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,s)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class O_{constructor(i,s=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(i,s){this.isApplyingToNode(s)&&this.matchTNode(i,s)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,s){this.elementStart(i,s)}embeddedTView(i,s){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,s),new O_(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const p=a[u];this.matchTNodeWithReadOption(i,s,cw(s,p)),this.matchTNodeWithReadOption(i,s,ci(s,i,p,!1,!1))}else a===xp?4&s.type&&this.matchTNodeWithReadOption(i,s,-1):this.matchTNodeWithReadOption(i,s,ci(s,i,a,!1,!1))}matchTNodeWithReadOption(i,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===Ue||u===Im||u===xp&&4&s.type)this.addMatch(s.index,-2);else{const p=ci(s,i,u,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(i,s){null===this.matches?this.matches=[i,s]:this.matches.push(i,s)}}function cw(n,i){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===i)return s[a+1];return null}function dw(n,i,s,a){return-1===s?function uw(n,i){return 11&n.type?ce(n,i):4&n.type?Pm(n,i):null}(i,n):-2===s?function hw(n,i,s){return s===Ue?ce(i,n):s===xp?Pm(i,n):s===Im?Nx(i,n):void 0}(n,i,a):Ss(n,n[1],s,i)}function kx(n,i,s,a){const u=i[19].queries[a];if(null===u.matches){const p=n.data,y=s.matches,E=[];for(let I=0;I<y.length;I+=2){const G=y[I];E.push(G<0?null:dw(i,p[G],y[I+1],s.metadata.read))}u.matches=E}return u.matches}function N_(n,i,s,a){const u=n.queries.getByIndex(s),p=u.matches;if(null!==p){const y=kx(n,i,u,s);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)a.push(y[E/2]);else{const G=p[E+1],Z=i[-I];for(let se=10;se<Z.length;se++){const Me=Z[se];Me[17]===Me[3]&&N_(Me[1],Me,G,a)}if(null!==Z[9]){const se=Z[9];for(let Me=0;Me<se.length;Me++){const Oe=se[Me];N_(Oe[1],Oe,G,a)}}}}}return a}function Bx(n){const i=ht(),s=ni(),a=ia();Eo(a+1);const u=Wx(s,a);if(n.dirty&&Hi(i)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const p=u.crossesNgTemplate?N_(s,i,a,[]):kx(s,i,u,a);n.reset(p,st),n.notifyOnChanges()}return!0}return!1}function Ux(n,i,s){const a=ni();a.firstCreatePass&&(Gx(a,new Fx(n,i,s),-1),2==(2&i)&&(a.staticViewQueries=!0)),zx(a,ht(),i)}function Vx(n,i,s,a){const u=ni();if(u.firstCreatePass){const p=or();Gx(u,new Fx(i,s,a),p.index),function pw(n,i){const s=n.contentQueries||(n.contentQueries=[]);i!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,i)}(u,n),2==(2&s)&&(u.staticContentQueries=!0)}zx(u,ht(),s)}function Hx(){return function fw(n,i){return n[19].queries[i].queryList}(ht(),ia())}function zx(n,i,s){const a=new D_(4==(4&s));Dg(n,i,a,a.destroy),null===i[19]&&(i[19]=new I_),i[19].queries.push(new P_(a))}function Gx(n,i,s){null===n.queries&&(n.queries=new L_),n.queries.track(new O_(i,s))}function Wx(n,i){return n.queries.getByIndex(i)}function Nm(...n){}const H_=new ii("Application Initializer");let Ih=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Nm,this.reject=Nm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const p=this.appInits[u]();if(mh(p))s.push(p);else if(od(p)){const y=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Ts(H_,8))},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();const ab=new ii("AppId"),Lw={provide:ab,useFactory:function Iw(){return`${z_()}${z_()}${z_()}`},deps:[]};function z_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lb=new ii("Platform Initializer"),cb=new ii("Platform ID"),ub=new ii("appBootstrapListener");let db=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();const Fm=new ii("LocaleId"),hb=new ii("DefaultCurrencyCode");class Ow{constructor(i,s){this.ngModuleFactory=i,this.componentFactories=s}}let G_=(()=>{class n{compileModuleSync(s){return new T_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=Pa(Fi(s).declarations).reduce((y,E)=>{const I=Yi(E);return I&&y.push(new Qo(I)),y},[]);return new Ow(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();const Fw=(()=>Promise.resolve(0))();function W_(n){"undefined"==typeof Zone?Fw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class va{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $l(!1),this.onMicrotaskEmpty=new $l(!1),this.onStable=new $l(!1),this.onError=new $l(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function kw(){let n=Nn.requestAnimationFrame,i=Nn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Vw(n){const i=()=>{!function Uw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j_(n),n.isCheckStableRunning=!0,Z_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,p,y,E)=>{try{return fb(n),s.invokeTask(u,p,y,E)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&i(),pb(n)}},onInvoke:(s,a,u,p,y,E,I)=>{try{return fb(n),s.invoke(u,p,y,E,I)}finally{n.shouldCoalesceRunChangeDetection&&i(),pb(n)}},onHasTask:(s,a,u,p)=>{s.hasTask(u,p),a===u&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,j_(n),Z_(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,u,p)=>(s.handleError(u,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(u)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!va.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(va.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,s,a){return this._inner.run(i,s,a)}runTask(i,s,a,u){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+u,i,Bw,Nm,Nm);try{return p.runTask(y,s,a)}finally{p.cancelTask(y)}}runGuarded(i,s,a){return this._inner.runGuarded(i,s,a)}runOutsideAngular(i){return this._outer.run(i)}}const Bw={};function Z_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pb(n){n._nesting--,Z_(n)}class Hw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $l,this.onMicrotaskEmpty=new $l,this.onStable=new $l,this.onError=new $l}run(i,s,a){return i.apply(s,a)}runGuarded(i,s,a){return i.apply(s,a)}runOutsideAngular(i){return i()}runTask(i,s,a,u){return i.apply(s,a)}}let gb=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{va.assertNotInAngularZone(),W_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())W_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,u){return[]}}return n.\u0275fac=function(s){return new(s||n)(Ts(va))},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})(),mb=(()=>{class n{constructor(){this._applications=new Map,q_.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return q_.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();class zw{addToWindow(i){}findTestabilityInTree(i,s,a){return null}}function Gw(n){q_=n}let pl,q_=new zw;const vb=new ii("AllowMultipleToken");class jw{constructor(i,s){this.name=i,this.token=s}}function yb(n,i,s=[]){const a=`Platform: ${i}`,u=new ii(a);return(p=[])=>{let y=_b();if(!y||y.injector.get(vb,!1))if(n)n(s.concat(p).concat({provide:u,useValue:!0}));else{const E=s.concat(p).concat({provide:u,useValue:!0},{provide:Qc,useValue:"platform"});!function qw(n){if(pl&&!pl.destroyed&&!pl.injector.get(vb,!1))throw new fn(400,"");pl=n.get(xb);const i=n.get(lb,null);i&&i.forEach(s=>s())}(io.create({providers:E,name:a}))}return function $w(n){const i=_b();if(!i)throw new fn(401,"");return i}()}}function _b(){return pl&&!pl.destroyed?pl:null}let xb=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const E=function Yw(n,i){let s;return s="noop"===n?new Hw:("zone.js"===n?void 0:n)||new va({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),I=[{provide:va,useValue:E}];return E.run(()=>{const G=io.create({providers:I,parent:this.injector,name:s.moduleType.name}),Z=s.create(G),se=Z.injector.get(Dd,null);if(!se)throw new fn(402,"");return E.runOutsideAngular(()=>{const Me=E.onError.subscribe({next:Oe=>{se.handleError(Oe)}});Z.onDestroy(()=>{$_(this._modules,Z),Me.unsubscribe()})}),function Jw(n,i,s){try{const a=s();return mh(a)?a.catch(u=>{throw i.runOutsideAngular(()=>n.handleError(u)),u}):a}catch(a){throw i.runOutsideAngular(()=>n.handleError(a)),a}}(se,E,()=>{const Me=Z.injector.get(Ih);return Me.runInitializers(),Me.donePromise.then(()=>(function px(n){jt(n,"Expected localeId to be defined"),"string"==typeof n&&(y_=n.toLowerCase().replace(/_/g,"-"))}(Z.injector.get(Fm,gp)||gp),this._moduleDoBootstrap(Z),Z))})})}bootstrapModule(s,a=[]){const u=bb({},a);return function Ww(n,i,s){const a=new T_(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,u))}_moduleDoBootstrap(s){const a=s.injector.get(wp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new fn(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fn(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Ts(io))},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();function bb(n,i){return Array.isArray(i)?i.reduce(bb,n):Object.assign(Object.assign({},n),i)}let wp=(()=>{class n{constructor(s,a,u,p,y){this._zone=s,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new C.y(G=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{G.next(this._stable),G.complete()})}),I=new C.y(G=>{let Z;this._zone.runOutsideAngular(()=>{Z=this._zone.onStable.subscribe(()=>{va.assertNotInAngularZone(),W_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,G.next(!0))})})});const se=this._zone.onUnstable.subscribe(()=>{va.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{G.next(!1)}))});return()=>{Z.unsubscribe(),se.unsubscribe()}});this.isStable=function pe(...n){let i=Number.POSITIVE_INFINITY,s=null,a=n[n.length-1];return(0,l.K)(a)?(s=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(i=n.pop())):"number"==typeof a&&(i=n.pop()),null===s&&1===n.length&&n[0]instanceof C.y?n[0]:(0,qe.J)(i)((0,ke.n)(n,s))}(E,I.pipe(function Ne(){return n=>(0,ye.x)()(function Se(n,i){return function(a){let u;if(u="function"==typeof n?n:function(){return n},"function"==typeof i)return a.lift(new oe(u,i));const p=Object.create(a,Be.N);return p.source=a,p.subjectFactory=u,p}}(Re)(n))}()))}bootstrap(s,a){if(!this._initStatus.done)throw new fn(405,"");let u;u=s instanceof pd?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(u.componentType);const p=function Zw(n){return n.isBoundToModule}(u)?void 0:this._injector.get(Dh),E=u.create(io.NULL,[],a||u.selector,p),I=E.location.nativeElement,G=E.injector.get(gb,null),Z=G&&E.injector.get(mb);return G&&Z&&Z.registerApplication(I,G),E.onDestroy(()=>{this.detachView(E.hostView),$_(this.components,E),Z&&Z.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new fn(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;$_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(ub,[]).concat(this._bootstrapListeners).forEach(u=>u(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Ts(va),Ts(io),Ts(Dd),Ts(gd),Ts(Ih))},n.\u0275prov=An({token:n,factory:n.\u0275fac}),n})();function $_(n,i){const s=n.indexOf(i);s>-1&&n.splice(s,1)}let Mb=!0;function Kw(){Mb=!1}let Qw=(()=>{class n{}return n.__NG_ELEMENT_ID__=eM,n})();function eM(n){return function tM(n,i,s){if(ge(n)&&!s){const a=Nt(n.index,i);return new pa(a,a)}return 47&n.type?new pa(i[16],i):null}(or(),ht(),16==(16&n))}function oM(n){return null}class Ab{constructor(){}supports(i){return Fa(i)}create(i){return new lM(i)}}const aM=(n,i)=>i;class lM{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||aM}forEachItem(i){let s;for(s=this._itHead;null!==s;s=s._next)i(s)}forEachOperation(i){let s=this._itHead,a=this._removalsHead,u=0,p=null;for(;s||a;){const y=!a||s&&s.currentIndex<Rb(a,u,p)?s:a,E=Rb(y,u,p),I=y.currentIndex;if(y===a)u--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)u++;else{p||(p=[]);const G=E-u,Z=I-u;if(G!=Z){for(let Me=0;Me<G;Me++){const Oe=Me<p.length?p[Me]:p[Me]=0,ot=Oe+Me;Z<=ot&&ot<G&&(p[Me]=Oe+1)}p[y.previousIndex]=Z-G}}E!==I&&i(y,E,I)}}forEachPreviousItem(i){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachMovedItem(i){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}forEachIdentityChange(i){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)i(s)}diff(i){if(null==i&&(i=[]),!Fa(i))throw new fn(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let u,p,y,s=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let E=0;E<this.length;E++)p=i[E],y=this._trackByFn(E,p),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,p,y,E)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,y,E),a=!0),s=s._next}else u=0,function Ir(n,i){if(Array.isArray(n))for(let s=0;s<n.length;s++)i(n[s]);else{const s=n[kl()]();let a;for(;!(a=s.next()).done;)i(a.value)}}(i,E=>{y=this._trackByFn(u,E),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,E,y,u)),Object.is(s.item,E)||this._addIdentityChange(s,E)):(s=this._mismatch(s,E,y,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,s,a,u){let p;return null===i?p=this._itTail:(p=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._reinsertAfter(i,p,u)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(i.item,s)||this._addIdentityChange(i,s),this._moveAfter(i,p,u)):i=this._addAfter(new cM(s,a),p,u),i}_verifyReinsertion(i,s,a,u){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?i=this._reinsertAfter(p,i._prev,u):i.currentIndex!=u&&(i.currentIndex=u,this._addToMoves(i,u)),i}_truncate(i){for(;null!==i;){const s=i._next;this._addToRemovals(this._unlink(i)),i=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const u=i._prevRemoved,p=i._nextRemoved;return null===u?this._removalsHead=p:u._nextRemoved=p,null===p?this._removalsTail=u:p._prevRemoved=u,this._insertAfter(i,s,a),this._addToMoves(i,a),i}_moveAfter(i,s,a){return this._unlink(i),this._insertAfter(i,s,a),this._addToMoves(i,a),i}_addAfter(i,s,a){return this._insertAfter(i,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,s,a){const u=null===s?this._itHead:s._next;return i._next=u,i._prev=s,null===u?this._itTail=i:u._prev=i,null===s?this._itHead=i:s._next=i,null===this._linkedRecords&&(this._linkedRecords=new Db),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const s=i._prev,a=i._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,i}_addToMoves(i,s){return i.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Db),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,s){return i.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class cM{constructor(i,s){this.item=i,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uM{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const s=i._prevDup,a=i._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Db{constructor(){this.map=new Map}put(i){const s=i.trackById;let a=this.map.get(s);a||(a=new uM,this.map.set(s,a)),a.add(i)}get(i,s){const u=this.map.get(i);return u?u.get(i,s):null}remove(i){const s=i.trackById;return this.map.get(s).remove(i)&&this.map.delete(s),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rb(n,i,s){const a=n.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+i+u}class Pb{constructor(){}supports(i){return i instanceof Map||tu(i)}create(){return new dM}}class dM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let s;for(s=this._mapHead;null!==s;s=s._next)i(s)}forEachPreviousItem(i){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)i(s)}forEachChangedItem(i){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)i(s)}forEachAddedItem(i){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)i(s)}forEachRemovedItem(i){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)i(s)}diff(i){if(i){if(!(i instanceof Map||tu(i)))throw new fn(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,s){if(i){const a=i._prev;return s._next=i,s._prev=a,i._prev=s,a&&(a._next=s),i===this._mapHead&&(this._mapHead=s),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(i,s){if(this._records.has(i)){const u=this._records.get(i);this._maybeAddToChanges(u,s);const p=u._prev,y=u._next;return p&&(p._next=y),y&&(y._prev=p),u._next=null,u._prev=null,u}const a=new hM(i);return this._records.set(i,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,s){Object.is(s,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=s,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,s){i instanceof Map?i.forEach(s):Object.keys(i).forEach(a=>s(i[a],a))}}class hM{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ib(){return new Um([new Ab])}let Um=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Ib()),deps:[[n,new Fc,new cc]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new fn(901,"")}}return n.\u0275prov=An({token:n,providedIn:"root",factory:Ib}),n})();function Lb(){return new Vm([new Pb])}let Vm=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||Lb()),deps:[[n,new Fc,new cc]]}}find(s){const a=this.factories.find(p=>p.supports(s));if(a)return a;throw new fn(901,"")}}return n.\u0275prov=An({token:n,providedIn:"root",factory:Lb}),n})();const fM=[new Pb],gM=new Um([new Ab]),mM=new Vm(fM),vM=yb(null,"core",[{provide:cb,useValue:"unknown"},{provide:xb,deps:[io]},{provide:mb,deps:[]},{provide:db,deps:[]}]),wM=[{provide:wp,useClass:wp,deps:[va,io,Dd,gd,Ih]},{provide:za,deps:[va],useFactory:function MM(n){let i=[];return n.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(s){i.push(s)}}},{provide:Ih,useClass:Ih,deps:[[new cc,H_]]},{provide:G_,useClass:G_,deps:[]},Lw,{provide:Um,useFactory:function yM(){return gM},deps:[]},{provide:Vm,useFactory:function _M(){return mM},deps:[]},{provide:Fm,useFactory:function xM(n){return n||function bM(){return"undefined"!=typeof $localize&&$localize.locale||gp}()},deps:[[new Mu(Fm),new cc,new Fc]]},{provide:hb,useValue:"USD"}];let EM=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Ts(wp))},n.\u0275mod=rr({type:n}),n.\u0275inj=pr({providers:wM}),n})()},3075:(Yt,et,Q)=>{"use strict";Q.d(et,{u5:()=>bi});var C=Q(2096);Q(9808),Q(5254),Q(567),Q(4850);let us=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=C.oAB({type:V}),V.\u0275inj=C.cJS({}),V})(),Tt=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=C.oAB({type:V}),V.\u0275inj=C.cJS({imports:[[us]]}),V})(),bi=(()=>{class V{}return V.\u0275fac=function(L){return new(L||V)},V.\u0275mod=C.oAB({type:V}),V.\u0275inj=C.cJS({imports:[Tt]}),V})()},4406:(Yt,et,Q)=>{"use strict";Q.d(et,{m2:()=>$i,F0:()=>es,rH:()=>Ls,Od:()=>ts,yS:()=>Qt,Bz:()=>To,lC:()=>na});var C=Q(2096);const qe=(()=>{function T(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return T.prototype=Object.create(Error.prototype),T})();var ke=Q(5254),pe=Q(1086),Ae=Q(591),Ie=Q(6053),Be=Q(2916),Se=Q(1221),oe=Q(8514),ye=Q(8896),Re=Q(1762),Ne=Q(8929),it=Q(3489);function rt(T,x){let _=!1;return arguments.length>=2&&(_=!0),function(z){return z.lift(new Ge(T,x,_))}}class Ge{constructor(x,_,F=!1){this.accumulator=x,this.seed=_,this.hasSeed=F}call(x,_){return _.subscribe(new Ft(x,this.accumulator,this.seed,this.hasSeed))}}class Ft extends it.L{constructor(x,_,F,z){super(x),this.accumulator=_,this._seed=F,this.hasSeed=z,this.index=0}get seed(){return this._seed}set seed(x){this.hasSeed=!0,this._seed=x}_next(x){if(this.hasSeed)return this._tryNext(x);this.seed=x,this.destination.next(x)}_tryNext(x){const _=this.index++;let F;try{F=this.accumulator(this.seed,x,_)}catch(z){this.destination.error(z)}this.seed=F,this.destination.next(F)}}var an=Q(2198),Ot=Q(4231);function Pt(T){return function(_){return 0===T?(0,ye.c)():_.lift(new Ui(T))}}class Ui{constructor(x){if(this.total=x,this.total<0)throw new Ot.W}call(x,_){return _.subscribe(new Mr(x,this.total))}}class Mr extends it.L{constructor(x,_){super(x),this.total=_,this.ring=new Array,this.count=0}_next(x){const _=this.ring,F=this.total,z=this.count++;_.length<F?_.push(x):_[z%F]=x}_complete(){const x=this.destination;let _=this.count;if(_>0){const F=this.count>=this.total?this.total:this.count,z=this.ring;for(let J=0;J<F;J++){const ue=_++%F;x.next(z[ue])}}x.complete()}}function fn(T=tt){return x=>x.lift(new mt(T))}class mt{constructor(x){this.errorFactory=x}call(x,_){return _.subscribe(new $e(x,this.errorFactory))}}class $e extends it.L{constructor(x,_){super(x),this.errorFactory=_,this.hasValue=!1}_next(x){this.hasValue=!0,this.destination.next(x)}_complete(){if(this.hasValue)return this.destination.complete();{let x;try{x=this.errorFactory()}catch(_){x=_}this.destination.error(x)}}}function tt(){return new qe}function Rt(T=null){return x=>x.lift(new Ct(T))}class Ct{constructor(x){this.defaultValue=x}call(x,_){return _.subscribe(new ut(x,this.defaultValue))}}class ut extends it.L{constructor(x,_){super(x),this.defaultValue=_,this.isEmpty=!0}_next(x){this.isEmpty=!1,this.destination.next(x)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var St=Q(5379),Bt=Q(2986);function hn(T,x){const _=arguments.length>=2;return F=>F.pipe(T?(0,an.h)((z,J)=>T(z,J,F)):St.y,(0,Bt.q)(1),_?Rt(x):fn(()=>new qe))}var Pi=Q(2654);class xi{constructor(x){this.callback=x}call(x,_){return _.subscribe(new Or(x,this.callback))}}class Or extends it.L{constructor(x,_){super(x),this.add(new Pi.w(_))}}var $n=Q(4850),ir=Q(7545),ys=Q(1059),pi=Q(7221),_r=Q(1406),vi=Q(1709),jt=Q(2994),Fn=Q(4327),Xn=Q(9146),ei=Q(9808);class Oi{constructor(x,_){this.id=x,this.url=_}}class An extends Oi{constructor(x,_,F="imperative",z=null){super(x,_),this.navigationTrigger=F,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $i extends Oi{constructor(x,_,F){super(x,_),this.urlAfterRedirects=F}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pr extends Oi{constructor(x,_,F){super(x,_),this.reason=F}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xi extends Oi{constructor(x,_,F){super(x,_),this.error=F}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Er extends Oi{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ss extends Oi{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gi extends Oi{constructor(x,_,F,z,J){super(x,_),this.urlAfterRedirects=F,this.state=z,this.shouldActivate=J}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lr extends Oi{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class os extends Oi{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xe{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ee{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Te{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class de{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ve{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ee{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fe{constructor(x,_,F){this.routerEvent=x,this.position=_,this.anchor=F}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ce="primary";class nt{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const _=this.params[x];return Array.isArray(_)?_[0]:_}return null}getAll(x){if(this.has(x)){const _=this.params[x];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function ft(T){return new nt(T)}const Lt="ngNavigationCancelingError";function Kn(T){const x=Error("NavigationCancelingError: "+T);return x[Lt]=!0,x}function on(T,x,_){const F=_.path.split("/");if(F.length>T.length||"full"===_.pathMatch&&(x.hasChildren()||F.length<T.length))return null;const z={};for(let J=0;J<F.length;J++){const ue=F[J],we=T[J];if(ue.startsWith(":"))z[ue.substring(1)]=we;else if(ue!==we.path)return null}return{consumed:T.slice(0,F.length),posParams:z}}function wn(T,x){const _=T?Object.keys(T):void 0,F=x?Object.keys(x):void 0;if(!_||!F||_.length!=F.length)return!1;let z;for(let J=0;J<_.length;J++)if(z=_[J],!Hn(T[z],x[z]))return!1;return!0}function Hn(T,x){if(Array.isArray(T)&&Array.isArray(x)){if(T.length!==x.length)return!1;const _=[...T].sort(),F=[...x].sort();return _.every((z,J)=>F[J]===z)}return T===x}function Ki(T){return Array.prototype.concat.apply([],T)}function Nn(T){return T.length>0?T[T.length-1]:null}function ai(T,x){for(const _ in T)T.hasOwnProperty(_)&&x(T[_],_)}function cr(T){return(0,C.CqO)(T)?T:(0,C.QGY)(T)?(0,ke.D)(Promise.resolve(T)):(0,pe.of)(T)}const Yr={exact:function ur(T,x,_){if(!Ni(T.segments,x.segments)||!Fs(T.segments,x.segments,_)||T.numberOfChildren!==x.numberOfChildren)return!1;for(const F in x.children)if(!T.children[F]||!ur(T.children[F],x.children[F],_))return!1;return!0},subset:Uo},_s={exact:function as(T,x){return wn(T,x)},subset:function Ds(T,x){return Object.keys(x).length<=Object.keys(T).length&&Object.keys(x).every(_=>Hn(T[_],x[_]))},ignored:()=>!0};function xs(T,x,_){return Yr[_.paths](T.root,x.root,_.matrixParams)&&_s[_.queryParams](T.queryParams,x.queryParams)&&!("exact"===_.fragment&&T.fragment!==x.fragment)}function Uo(T,x,_){return Nr(T,x,x.segments,_)}function Nr(T,x,_,F){if(T.segments.length>_.length){const z=T.segments.slice(0,_.length);return!(!Ni(z,_)||x.hasChildren()||!Fs(z,_,F))}if(T.segments.length===_.length){if(!Ni(T.segments,_)||!Fs(T.segments,_,F))return!1;for(const z in x.children)if(!T.children[z]||!Uo(T.children[z],x.children[z],F))return!1;return!0}{const z=_.slice(0,T.segments.length),J=_.slice(T.segments.length);return!!(Ni(T.segments,z)&&Fs(T.segments,z,F)&&T.children[Ce])&&Nr(T.children[Ce],x,J,F)}}function Fs(T,x,_){return x.every((F,z)=>_s[_](T[z].parameters,F.parameters))}class Jr{constructor(x,_,F){this.root=x,this.queryParams=_,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return Yi.serialize(this)}}class pn{constructor(x,_){this.segments=x,this.children=_,this.parent=null,ai(_,(F,z)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kr(this)}}class Hr{constructor(x,_){this.path=x,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=ft(this.parameters)),this._parameterMap}toString(){return Ji(this)}}function Ni(T,x){return T.length===x.length&&T.every((_,F)=>_.path===x[F].path)}class Xr{}class Rs{parse(x){const _=new ki(x);return new Jr(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(x){const _=`/${dr(x.root,!0)}`,F=function hi(T){const x=Object.keys(T).map(_=>{const F=T[_];return Array.isArray(F)?F.map(z=>`${gr(_)}=${gr(z)}`).join("&"):`${gr(_)}=${gr(F)}`}).filter(_=>!!_);return x.length?`?${x.join("&")}`:""}(x.queryParams);return`${_}${F}${"string"==typeof x.fragment?`#${function Kr(T){return encodeURI(T)}(x.fragment)}`:""}`}}const Yi=new Rs;function kr(T){return T.segments.map(x=>Ji(x)).join("/")}function dr(T,x){if(!T.hasChildren())return kr(T);if(x){const _=T.children[Ce]?dr(T.children[Ce],!1):"",F=[];return ai(T.children,(z,J)=>{J!==Ce&&F.push(`${J}:${dr(z,!1)}`)}),F.length>0?`${_}(${F.join("//")})`:_}{const _=function Fr(T,x){let _=[];return ai(T.children,(F,z)=>{z===Ce&&(_=_.concat(x(F,z)))}),ai(T.children,(F,z)=>{z!==Ce&&(_=_.concat(x(F,z)))}),_}(T,(F,z)=>z===Ce?[dr(T.children[Ce],!1)]:[`${z}:${dr(F,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[Ce]?`${kr(T)}/${_[0]}`:`${kr(T)}/(${_.join("//")})`}}function Fi(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gr(T){return Fi(T).replace(/%3B/gi,";")}function mr(T){return Fi(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ls(T){return decodeURIComponent(T)}function cs(T){return ls(T.replace(/\+/g,"%20"))}function Ji(T){return`${mr(T.path)}${function Ps(T){return Object.keys(T).map(x=>`;${mr(x)}=${mr(T[x])}`).join("")}(T.parameters)}`}const Dt=/^[^\/()?;=#]+/;function Kt(T){const x=T.match(Dt);return x?x[0]:""}const Qn=/^[^=?&#]+/,yi=/^[^&#]+/;class ki{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(x.length>0||Object.keys(_).length>0)&&(F[Ce]=new pn(x,_)),F}parseSegment(){const x=Kt(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new Hr(ls(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const _=Kt(this.remaining);if(!_)return;this.capture(_);let F="";if(this.consumeOptional("=")){const z=Kt(this.remaining);z&&(F=z,this.capture(F))}x[ls(_)]=ls(F)}parseQueryParam(x){const _=function Qi(T){const x=T.match(Qn);return x?x[0]:""}(this.remaining);if(!_)return;this.capture(_);let F="";if(this.consumeOptional("=")){const ue=function kn(T){const x=T.match(yi);return x?x[0]:""}(this.remaining);ue&&(F=ue,this.capture(F))}const z=cs(_),J=cs(F);if(x.hasOwnProperty(z)){let ue=x[z];Array.isArray(ue)||(ue=[ue],x[z]=ue),ue.push(J)}else x[z]=J}parseParens(x){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Kt(this.remaining),z=this.remaining[F.length];if("/"!==z&&")"!==z&&";"!==z)throw new Error(`Cannot parse url '${this.url}'`);let J;F.indexOf(":")>-1?(J=F.substr(0,F.indexOf(":")),this.capture(J),this.capture(":")):x&&(J=Ce);const ue=this.parseChildren();_[J]=1===Object.keys(ue).length?ue[Ce]:new pn([],ue),this.consumeOptional("//")}return _}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class Si{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const _=this.pathFromRoot(x);return _.length>1?_[_.length-2]:null}children(x){const _=hr(x,this._root);return _?_.children.map(F=>F.value):[]}firstChild(x){const _=hr(x,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(x){const _=er(x,this._root);return _.length<2?[]:_[_.length-2].children.map(z=>z.value).filter(z=>z!==x)}pathFromRoot(x){return er(x,this._root).map(_=>_.value)}}function hr(T,x){if(T===x.value)return x;for(const _ of x.children){const F=hr(T,_);if(F)return F}return null}function er(T,x){if(T===x.value)return[x];for(const _ of x.children){const F=er(T,_);if(F.length)return F.unshift(x),F}return[]}class un{constructor(x,_){this.value=x,this.children=_}toString(){return`TreeNode(${this.value})`}}function sr(T){const x={};return T&&T.children.forEach(_=>x[_.value.outlet]=_),x}class zr extends Si{constructor(x,_){super(x),this.snapshot=_,bs(this,x)}toString(){return this.snapshot.toString()}}function Wi(T,x){const _=function Sr(T,x){const ue=new Zi([],{},{},"",{},Ce,x,null,T.root,-1,{});return new li("",new un(ue,[]))}(T,x),F=new Ae.X([new Hr("",{})]),z=new Ae.X({}),J=new Ae.X({}),ue=new Ae.X({}),we=new Ae.X(""),Ve=new Ci(F,z,ue,we,J,Ce,x,_.root);return Ve.snapshot=_.root,new zr(new un(Ve,[]),_)}class Ci{constructor(x,_,F,z,J,ue,we,Ve){this.url=x,this.params=_,this.queryParams=F,this.fragment=z,this.data=J,this.outlet=ue,this.component=we,this._futureSnapshot=Ve}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$n.U)(x=>ft(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$n.U)(x=>ft(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cr(T,x="emptyOnly"){const _=T.pathFromRoot;let F=0;if("always"!==x)for(F=_.length-1;F>=1;){const z=_[F],J=_[F-1];if(z.routeConfig&&""===z.routeConfig.path)F--;else{if(J.component)break;F--}}return function qs(T){return T.reduce((x,_)=>({params:Object.assign(Object.assign({},x.params),_.params),data:Object.assign(Object.assign({},x.data),_.data),resolve:Object.assign(Object.assign({},x.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(F))}class Zi{constructor(x,_,F,z,J,ue,we,Ve,Jt,Sn,rn){this.url=x,this.params=_,this.queryParams=F,this.fragment=z,this.data=J,this.outlet=ue,this.component=we,this.routeConfig=Ve,this._urlSegment=Jt,this._lastPathIndex=Sn,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ft(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ft(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class li extends Si{constructor(x,_){super(_),this.url=x,bs(this,_)}toString(){return us(this._root)}}function bs(T,x){x.value._routerState=T,x.children.forEach(_=>bs(T,_))}function us(T){const x=T.children.length>0?` { ${T.children.map(us).join(", ")} } `:"";return`${T.value}${x}`}function Tr(T){if(T.snapshot){const x=T.snapshot,_=T._futureSnapshot;T.snapshot=_,wn(x.queryParams,_.queryParams)||T.queryParams.next(_.queryParams),x.fragment!==_.fragment&&T.fragment.next(_.fragment),wn(x.params,_.params)||T.params.next(_.params),function bn(T,x){if(T.length!==x.length)return!1;for(let _=0;_<T.length;++_)if(!wn(T[_],x[_]))return!1;return!0}(x.url,_.url)||T.url.next(_.url),wn(x.data,_.data)||T.data.next(_.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function j(T,x){const _=wn(T.params,x.params)&&function rr(T,x){return Ni(T,x)&&T.every((_,F)=>wn(_.parameters,x[F].parameters))}(T.url,x.url);return _&&!(!T.parent!=!x.parent)&&(!T.parent||j(T.parent,x.parent))}function ge(T,x,_){if(_&&T.shouldReuseRoute(x.value,_.value.snapshot)){const F=_.value;F._futureSnapshot=x.value;const z=function Fe(T,x,_){return x.children.map(F=>{for(const z of _.children)if(T.shouldReuseRoute(F.value,z.value.snapshot))return ge(T,F,z);return ge(T,F)})}(T,x,_);return new un(F,z)}{if(T.shouldAttach(x.value)){const J=T.retrieve(x.value);if(null!==J){const ue=J.route;return ue.value._futureSnapshot=x.value,ue.children=x.children.map(we=>ge(T,we)),ue}}const F=function dt(T){return new Ci(new Ae.X(T.url),new Ae.X(T.params),new Ae.X(T.queryParams),new Ae.X(T.fragment),new Ae.X(T.data),T.outlet,T.component,T)}(x.value),z=x.children.map(J=>ge(T,J));return new un(F,z)}}function Bn(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function Ti(T){return"object"==typeof T&&null!=T&&T.outlets}function gi(T,x,_,F,z){let J={};return F&&ai(F,(ue,we)=>{J[we]=Array.isArray(ue)?ue.map(Ve=>`${Ve}`):`${ue}`}),new Jr(_.root===T?x:Ln(_.root,T,x),J,z)}function Ln(T,x,_){const F={};return ai(T.children,(z,J)=>{F[J]=z===x?_:Ln(z,x,_)}),new pn(T.segments,F)}class ds{constructor(x,_,F){if(this.isAbsolute=x,this.numberOfDoubleDots=_,this.commands=F,x&&F.length>0&&Bn(F[0]))throw new Error("Root segment cannot have matrix parameters");const z=F.find(Ti);if(z&&z!==Nn(F))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ws{constructor(x,_,F){this.segmentGroup=x,this.processChildren=_,this.index=F}}function ks(T,x,_){if(T||(T=new pn([],{})),0===T.segments.length&&T.hasChildren())return Vo(T,x,_);const F=function Ho(T,x,_){let F=0,z=x;const J={match:!1,pathIndex:0,commandIndex:0};for(;z<T.segments.length;){if(F>=_.length)return J;const ue=T.segments[z],we=_[F];if(Ti(we))break;const Ve=`${we}`,Jt=F<_.length-1?_[F+1]:null;if(z>0&&void 0===Ve)break;if(Ve&&Jt&&"object"==typeof Jt&&void 0===Jt.outlets){if(!yo(Ve,Jt,ue))return J;F+=2}else{if(!yo(Ve,{},ue))return J;F++}z++}return{match:!0,pathIndex:z,commandIndex:F}}(T,x,_),z=_.slice(F.commandIndex);if(F.match&&F.pathIndex<T.segments.length){const J=new pn(T.segments.slice(0,F.pathIndex),{});return J.children[Ce]=new pn(T.segments.slice(F.pathIndex),T.children),Vo(J,0,z)}return F.match&&0===z.length?new pn(T.segments,{}):F.match&&!T.hasChildren()?Wa(T,x,_):F.match?Vo(T,0,z):Wa(T,x,_)}function Vo(T,x,_){if(0===_.length)return new pn(T.segments,{});{const F=function Ga(T){return Ti(T[0])?T[0].outlets:{[Ce]:T}}(_),z={};return ai(F,(J,ue)=>{"string"==typeof J&&(J=[J]),null!==J&&(z[ue]=ks(T.children[ue],x,J))}),ai(T.children,(J,ue)=>{void 0===F[ue]&&(z[ue]=J)}),new pn(T.segments,z)}}function Wa(T,x,_){const F=T.segments.slice(0,x);let z=0;for(;z<_.length;){const J=_[z];if(Ti(J)){const Ve=Za(J.outlets);return new pn(F,Ve)}if(0===z&&Bn(_[0])){F.push(new Hr(T.segments[x].path,ja(_[0]))),z++;continue}const ue=Ti(J)?J.outlets[Ce]:`${J}`,we=z<_.length-1?_[z+1]:null;ue&&we&&Bn(we)?(F.push(new Hr(ue,ja(we))),z+=2):(F.push(new Hr(ue,{})),z++)}return new pn(F,{})}function Za(T){const x={};return ai(T,(_,F)=>{"string"==typeof _&&(_=[_]),null!==_&&(x[F]=Wa(new pn([],{}),0,_))}),x}function ja(T){const x={};return ai(T,(_,F)=>x[F]=`${_}`),x}function yo(T,x,_){return T==_.path&&wn(x,_.parameters)}class zo{constructor(x,_,F,z){this.routeReuseStrategy=x,this.futureState=_,this.currState=F,this.forwardEvent=z}activate(x){const _=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,F,x),Tr(this.futureState.root),this.activateChildRoutes(_,F,x)}deactivateChildRoutes(x,_,F){const z=sr(_);x.children.forEach(J=>{const ue=J.value.outlet;this.deactivateRoutes(J,z[ue],F),delete z[ue]}),ai(z,(J,ue)=>{this.deactivateRouteAndItsChildren(J,F)})}deactivateRoutes(x,_,F){const z=x.value,J=_?_.value:null;if(z===J)if(z.component){const ue=F.getContext(z.outlet);ue&&this.deactivateChildRoutes(x,_,ue.children)}else this.deactivateChildRoutes(x,_,F);else J&&this.deactivateRouteAndItsChildren(_,F)}deactivateRouteAndItsChildren(x,_){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,_):this.deactivateRouteAndOutlet(x,_)}detachAndStoreRouteSubtree(x,_){const F=_.getContext(x.value.outlet),z=F&&x.value.component?F.children:_,J=sr(x);for(const ue of Object.keys(J))this.deactivateRouteAndItsChildren(J[ue],z);if(F&&F.outlet){const ue=F.outlet.detach(),we=F.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ue,route:x,contexts:we})}}deactivateRouteAndOutlet(x,_){const F=_.getContext(x.value.outlet),z=F&&x.value.component?F.children:_,J=sr(x);for(const ue of Object.keys(J))this.deactivateRouteAndItsChildren(J[ue],z);F&&F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated(),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(x,_,F){const z=sr(_);x.children.forEach(J=>{this.activateRoutes(J,z[J.value.outlet],F),this.forwardEvent(new ee(J.value.snapshot))}),x.children.length&&this.forwardEvent(new de(x.value.snapshot))}activateRoutes(x,_,F){const z=x.value,J=_?_.value:null;if(Tr(z),z===J)if(z.component){const ue=F.getOrCreateContext(z.outlet);this.activateChildRoutes(x,_,ue.children)}else this.activateChildRoutes(x,_,F);else if(z.component){const ue=F.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const we=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),ue.children.onOutletReAttached(we.contexts),ue.attachRef=we.componentRef,ue.route=we.route.value,ue.outlet&&ue.outlet.attach(we.componentRef,we.route.value),Tr(we.route.value),this.activateChildRoutes(x,null,ue.children)}else{const we=function qa(T){for(let x=T.parent;x;x=x.parent){const _=x.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(z.snapshot),Ve=we?we.module.componentFactoryResolver:null;ue.attachRef=null,ue.route=z,ue.resolver=Ve,ue.outlet&&ue.outlet.activateWith(z,Ve),this.activateChildRoutes(x,null,ue.children)}}else this.activateChildRoutes(x,null,F)}}class ea{constructor(x,_){this.routes=x,this.module=_}}function Bs(T){return"function"==typeof T}function Gr(T){return T instanceof Jr}const _o=Symbol("INITIAL_VALUE");function xo(){return(0,ir.w)(T=>(0,Ie.aj)(T.map(x=>x.pipe((0,Bt.q)(1),(0,ys.O)(_o)))).pipe(rt((x,_)=>{let F=!1;return _.reduce((z,J,ue)=>z!==_o?z:(J===_o&&(F=!0),F||!1!==J&&ue!==_.length-1&&!Gr(J)?z:J),x)},_o),(0,an.h)(x=>x!==_o),(0,$n.U)(x=>Gr(x)?x:!0===x),(0,Bt.q)(1)))}class wa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Js,this.attachRef=null}}class Js{constructor(){this.contexts=new Map}onChildOutletCreated(x,_){const F=this.getOrCreateContext(x);F.outlet=_,this.contexts.set(x,F)}onChildOutletDestroyed(x){const _=this.getContext(x);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let _=this.getContext(x);return _||(_=new wa,this.contexts.set(x,_)),_}getContext(x){return this.contexts.get(x)||null}}let na=(()=>{class T{constructor(_,F,z,J,ue){this.parentContexts=_,this.location=F,this.resolver=z,this.changeDetector=ue,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=J||Ce,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,F){this.activated=_,this._activatedRoute=F,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,F){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const ue=(F=F||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),we=this.parentContexts.getOrCreateContext(this.name).children,Ve=new Wr(_,we,this.location.injector);this.activated=this.location.createComponent(ue,this.location.length,Ve),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(_){return new(_||T)(C.Y36(Js),C.Y36(C.s_b),C.Y36(C._Vd),C.$8M("name"),C.Y36(C.sBO))},T.\u0275dir=C.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),T})();class Wr{constructor(x,_,F){this.route=x,this.childContexts=_,this.parent=F}get(x,_){return x===Ci?this.route:x===Js?this.childContexts:this.parent.get(x,_)}}let bo=(()=>{class T{}return T.\u0275fac=function(_){return new(_||T)},T.\u0275cmp=C.Xpm({type:T,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,F){1&_&&C._UZ(0,"router-outlet")},directives:[na],encapsulation:2}),T})();function wo(T,x=""){for(let _=0;_<T.length;_++){const F=T[_];k(F,q(x,F))}}function k(T,x){T.children&&wo(T.children,x)}function q(T,x){return x?T||x.path?T&&!x.path?`${T}/`:!T&&x.path?x.path:`${T}/${x.path}`:"":T}function U(T){const x=T.children&&T.children.map(U),_=x?Object.assign(Object.assign({},T),{children:x}):Object.assign({},T);return!_.component&&(x||_.loadChildren)&&_.outlet&&_.outlet!==Ce&&(_.component=bo),_}function Y(T){return T.outlet||Ce}function xe(T,x){const _=T.filter(F=>Y(F)===x);return _.push(...T.filter(F=>Y(F)!==x)),_}const ze={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function at(T,x,_){var F;if(""===x.path)return"full"===x.pathMatch&&(T.hasChildren()||_.length>0)?Object.assign({},ze):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const J=(x.matcher||on)(_,T,x);if(!J)return Object.assign({},ze);const ue={};ai(J.posParams,(Ve,Jt)=>{ue[Jt]=Ve.path});const we=J.consumed.length>0?Object.assign(Object.assign({},ue),J.consumed[J.consumed.length-1].parameters):ue;return{matched:!0,consumedSegments:J.consumed,lastChild:J.consumed.length,parameters:we,positionalParamSegments:null!==(F=J.posParams)&&void 0!==F?F:{}}}function Tt(T,x,_,F,z="corrected"){if(_.length>0&&function vn(T,x,_){return _.some(F=>xr(T,x,F)&&Y(F)!==Ce)}(T,_,F)){const ue=new pn(x,function Vi(T,x,_,F){const z={};z[Ce]=F,F._sourceSegment=T,F._segmentIndexShift=x.length;for(const J of _)if(""===J.path&&Y(J)!==Ce){const ue=new pn([],{});ue._sourceSegment=T,ue._segmentIndexShift=x.length,z[Y(J)]=ue}return z}(T,x,F,new pn(_,T.children)));return ue._sourceSegment=T,ue._segmentIndexShift=x.length,{segmentGroup:ue,slicedSegments:[]}}if(0===_.length&&function si(T,x,_){return _.some(F=>xr(T,x,F))}(T,_,F)){const ue=new pn(T.segments,function bi(T,x,_,F,z,J){const ue={};for(const we of F)if(xr(T,_,we)&&!z[Y(we)]){const Ve=new pn([],{});Ve._sourceSegment=T,Ve._segmentIndexShift="legacy"===J?T.segments.length:x.length,ue[Y(we)]=Ve}return Object.assign(Object.assign({},z),ue)}(T,x,_,F,T.children,z));return ue._sourceSegment=T,ue._segmentIndexShift=x.length,{segmentGroup:ue,slicedSegments:_}}const J=new pn(T.segments,T.children);return J._sourceSegment=T,J._segmentIndexShift=x.length,{segmentGroup:J,slicedSegments:_}}function xr(T,x,_){return(!(T.hasChildren()||x.length>0)||"full"!==_.pathMatch)&&""===_.path}function V(T,x,_,F){return!!(Y(T)===F||F!==Ce&&xr(x,_,T))&&("**"===T.path||at(x,T,_).matched)}function O(T,x,_){return 0===x.length&&!T.children[_]}class L{constructor(x){this.segmentGroup=x||null}}class X{constructor(x){this.urlTree=x}}function We(T){return new Be.y(x=>x.error(new L(T)))}function Nt(T){return new Be.y(x=>x.error(new X(T)))}function Hi(T){return new Be.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T}'`)))}class Us{constructor(x,_,F,z,J){this.configLoader=_,this.urlSerializer=F,this.urlTree=z,this.config=J,this.allowRedirects=!0,this.ngModule=x.get(C.h0i)}apply(){const x=Tt(this.urlTree.root,[],[],this.config).segmentGroup,_=new pn(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,_,Ce).pipe((0,$n.U)(J=>this.createUrlTree(ml(J),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,pi.K)(J=>{if(J instanceof X)return this.allowRedirects=!1,this.match(J.urlTree);throw J instanceof L?this.noMatchError(J):J}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,Ce).pipe((0,$n.U)(z=>this.createUrlTree(ml(z),x.queryParams,x.fragment))).pipe((0,pi.K)(z=>{throw z instanceof L?this.noMatchError(z):z}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,_,F){const z=x.segments.length>0?new pn([],{[Ce]:x}):x;return new Jr(z,_,F)}expandSegmentGroup(x,_,F,z){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(x,_,F).pipe((0,$n.U)(J=>new pn([],J))):this.expandSegment(x,F,_,F.segments,z,!0)}expandChildren(x,_,F){const z=[];for(const J of Object.keys(F.children))"primary"===J?z.unshift(J):z.push(J);return(0,ke.D)(z).pipe((0,_r.b)(J=>{const ue=F.children[J],we=xe(_,J);return this.expandSegmentGroup(x,we,ue,J).pipe((0,$n.U)(Ve=>({segment:Ve,outlet:J})))}),rt((J,ue)=>(J[ue.outlet]=ue.segment,J),{}),function kt(T,x){const _=arguments.length>=2;return F=>F.pipe(T?(0,an.h)((z,J)=>T(z,J,F)):St.y,Pt(1),_?Rt(x):fn(()=>new qe))}())}expandSegment(x,_,F,z,J,ue){return(0,ke.D)(F).pipe((0,_r.b)(we=>this.expandSegmentAgainstRoute(x,_,F,we,z,J,ue).pipe((0,pi.K)(Jt=>{if(Jt instanceof L)return(0,pe.of)(null);throw Jt}))),hn(we=>!!we),(0,pi.K)((we,Ve)=>{if(we instanceof qe||"EmptyError"===we.name){if(O(_,z,J))return(0,pe.of)(new pn([],{}));throw new L(_)}throw we}))}expandSegmentAgainstRoute(x,_,F,z,J,ue,we){return V(z,_,J,ue)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(x,_,z,J,ue):we&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,_,F,z,J,ue):We(_):We(_)}expandSegmentAgainstRouteUsingRedirect(x,_,F,z,J,ue){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,F,z,ue):this.expandRegularSegmentAgainstRouteUsingRedirect(x,_,F,z,J,ue)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,_,F,z){const J=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Nt(J):this.lineralizeSegments(F,J).pipe((0,vi.zg)(ue=>{const we=new pn(ue,{});return this.expandSegment(x,we,_,ue,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,_,F,z,J,ue){const{matched:we,consumedSegments:Ve,lastChild:Jt,positionalParamSegments:Sn}=at(_,z,J);if(!we)return We(_);const rn=this.applyRedirectCommands(Ve,z.redirectTo,Sn);return z.redirectTo.startsWith("/")?Nt(rn):this.lineralizeSegments(z,rn).pipe((0,vi.zg)(yn=>this.expandSegment(x,_,F,yn.concat(J.slice(Jt)),ue,!1)))}matchSegmentAgainstRoute(x,_,F,z,J){if("**"===F.path)return F.loadChildren?(F._loadedConfig?(0,pe.of)(F._loadedConfig):this.configLoader.load(x.injector,F)).pipe((0,$n.U)(yn=>(F._loadedConfig=yn,new pn(z,{})))):(0,pe.of)(new pn(z,{}));const{matched:ue,consumedSegments:we,lastChild:Ve}=at(_,F,z);if(!ue)return We(_);const Jt=z.slice(Ve);return this.getChildConfig(x,F,z).pipe((0,vi.zg)(rn=>{const yn=rn.module,Ai=rn.routes,{segmentGroup:ci,slicedSegments:Ss}=Tt(_,we,Jt,Ai),Io=new pn(ci.segments,ci.children);if(0===Ss.length&&Io.hasChildren())return this.expandChildren(yn,Ai,Io).pipe((0,$n.U)(sa=>new pn(we,sa)));if(0===Ai.length&&0===Ss.length)return(0,pe.of)(new pn(we,{}));const Lo=Y(F)===J;return this.expandSegment(yn,Io,Ai,Ss,Lo?Ce:J,!0).pipe((0,$n.U)(ns=>new pn(we.concat(ns.segments),ns.children)))}))}getChildConfig(x,_,F){return _.children?(0,pe.of)(new ea(_.children,x)):_.loadChildren?void 0!==_._loadedConfig?(0,pe.of)(_._loadedConfig):this.runCanLoadGuards(x.injector,_,F).pipe((0,vi.zg)(z=>z?this.configLoader.load(x.injector,_).pipe((0,$n.U)(J=>(_._loadedConfig=J,J))):function Br(T){return new Be.y(x=>x.error(Kn(`Cannot load children because the guard of the route "path: '${T.path}'" returned false`)))}(_))):(0,pe.of)(new ea([],x))}runCanLoadGuards(x,_,F){const z=_.canLoad;if(!z||0===z.length)return(0,pe.of)(!0);const J=z.map(ue=>{const we=x.get(ue);let Ve;if(function $s(T){return T&&Bs(T.canLoad)}(we))Ve=we.canLoad(_,F);else{if(!Bs(we))throw new Error("Invalid CanLoad guard");Ve=we(_,F)}return cr(Ve)});return(0,pe.of)(J).pipe(xo(),(0,jt.b)(ue=>{if(!Gr(ue))return;const we=Kn(`Redirecting to "${this.urlSerializer.serialize(ue)}"`);throw we.url=ue,we}),(0,$n.U)(ue=>!0===ue))}lineralizeSegments(x,_){let F=[],z=_.root;for(;;){if(F=F.concat(z.segments),0===z.numberOfChildren)return(0,pe.of)(F);if(z.numberOfChildren>1||!z.children[Ce])return Hi(x.redirectTo);z=z.children[Ce]}}applyRedirectCommands(x,_,F){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),x,F)}applyRedirectCreatreUrlTree(x,_,F,z){const J=this.createSegmentGroup(x,_.root,F,z);return new Jr(J,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(x,_){const F={};return ai(x,(z,J)=>{if("string"==typeof z&&z.startsWith(":")){const we=z.substring(1);F[J]=_[we]}else F[J]=z}),F}createSegmentGroup(x,_,F,z){const J=this.createSegments(x,_.segments,F,z);let ue={};return ai(_.children,(we,Ve)=>{ue[Ve]=this.createSegmentGroup(x,we,F,z)}),new pn(J,ue)}createSegments(x,_,F,z){return _.map(J=>J.path.startsWith(":")?this.findPosParam(x,J,z):this.findOrReturn(J,F))}findPosParam(x,_,F){const z=F[_.path.substring(1)];if(!z)throw new Error(`Cannot redirect to '${x}'. Cannot find '${_.path}'.`);return z}findOrReturn(x,_){let F=0;for(const z of _){if(z.path===x.path)return _.splice(F),z;F++}return x}}function ml(T){const x={};for(const F of Object.keys(T.children)){const J=ml(T.children[F]);(J.segments.length>0||J.hasChildren())&&(x[F]=J)}return function Tc(T){if(1===T.numberOfChildren&&T.children[Ce]){const x=T.children[Ce];return new pn(T.segments.concat(x.segments),x.children)}return T}(new pn(T.segments,x))}class _t{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class vr{constructor(x,_){this.component=x,this.route=_}}function Ac(T,x,_){const F=T._root;return Go(F,x?x._root:null,_,[F.value])}function Vs(T,x,_){const F=function vl(T){if(!T)return null;for(let x=T.parent;x;x=x.parent){const _=x.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(x);return(F?F.module.injector:_).get(T)}function Go(T,x,_,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const J=sr(x);return T.children.forEach(ue=>{(function ht(T,x,_,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const J=T.value,ue=x?x.value:null,we=_?_.getContext(T.value.outlet):null;if(ue&&J.routeConfig===ue.routeConfig){const Ve=function ni(T,x,_){if("function"==typeof _)return _(T,x);switch(_){case"pathParamsChange":return!Ni(T.url,x.url);case"pathParamsOrQueryParamsChange":return!Ni(T.url,x.url)||!wn(T.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!j(T,x)||!wn(T.queryParams,x.queryParams);default:return!j(T,x)}}(ue,J,J.routeConfig.runGuardsAndResolvers);Ve?z.canActivateChecks.push(new _t(F)):(J.data=ue.data,J._resolvedData=ue._resolvedData),Go(T,x,J.component?we?we.children:null:_,F,z),Ve&&we&&we.outlet&&we.outlet.isActivated&&z.canDeactivateChecks.push(new vr(we.outlet.component,ue))}else ue&&Wo(x,we,z),z.canActivateChecks.push(new _t(F)),Go(T,null,J.component?we?we.children:null:_,F,z)})(ue,J[ue.value.outlet],_,F.concat([ue.value]),z),delete J[ue.value.outlet]}),ai(J,(ue,we)=>Wo(ue,_.getContext(we),z)),z}function Wo(T,x,_){const F=sr(T),z=T.value;ai(F,(J,ue)=>{Wo(J,z.component?x?x.children.getContext(ue):null:x,_)}),_.canDeactivateChecks.push(new vr(z.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,z))}class wi{}function Qr(T){return new Be.y(x=>x.error(T))}class lo{constructor(x,_,F,z,J,ue){this.rootComponentType=x,this.config=_,this.urlTree=F,this.url=z,this.paramsInheritanceStrategy=J,this.relativeLinkResolution=ue}recognize(){const x=Tt(this.urlTree.root,[],[],this.config.filter(ue=>void 0===ue.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,x,Ce);if(null===_)return null;const F=new Zi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ce,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new un(F,_),J=new li(this.url,z);return this.inheritParamsAndData(J._root),J}inheritParamsAndData(x){const _=x.value,F=Cr(_,this.paramsInheritanceStrategy);_.params=Object.freeze(F.params),_.data=Object.freeze(F.data),x.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(x,_,F){return 0===_.segments.length&&_.hasChildren()?this.processChildren(x,_):this.processSegment(x,_,_.segments,F)}processChildren(x,_){const F=[];for(const J of Object.keys(_.children)){const ue=_.children[J],we=xe(x,J),Ve=this.processSegmentGroup(we,ue,J);if(null===Ve)return null;F.push(...Ve)}const z=Kl(F);return function Zr(T){T.sort((x,_)=>x.value.outlet===Ce?-1:_.value.outlet===Ce?1:x.value.outlet.localeCompare(_.value.outlet))}(z),z}processSegment(x,_,F,z){for(const J of x){const ue=this.processSegmentAgainstRoute(J,_,F,z);if(null!==ue)return ue}return O(_,F,z)?[]:null}processSegmentAgainstRoute(x,_,F,z){if(x.redirectTo||!V(x,_,F,z))return null;let J,ue=[],we=[];if("**"===x.path){const Ai=F.length>0?Nn(F).parameters:{};J=new Zi(F,Ai,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ea(x),Y(x),x.component,x,co(_),uo(_)+F.length,Mo(x))}else{const Ai=at(_,x,F);if(!Ai.matched)return null;ue=Ai.consumedSegments,we=F.slice(Ai.lastChild),J=new Zi(ue,Ai.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ea(x),Y(x),x.component,x,co(_),uo(_)+ue.length,Mo(x))}const Ve=function re(T){return T.children?T.children:T.loadChildren?T._loadedConfig.routes:[]}(x),{segmentGroup:Jt,slicedSegments:Sn}=Tt(_,ue,we,Ve.filter(Ai=>void 0===Ai.redirectTo),this.relativeLinkResolution);if(0===Sn.length&&Jt.hasChildren()){const Ai=this.processChildren(Ve,Jt);return null===Ai?null:[new un(J,Ai)]}if(0===Ve.length&&0===Sn.length)return[new un(J,[])];const rn=Y(x)===z,yn=this.processSegment(Ve,Jt,Sn,rn?Ce:z);return null===yn?null:[new un(J,yn)]}}function Hs(T){const x=T.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function Kl(T){const x=[],_=new Set;for(const F of T){if(!Hs(F)){x.push(F);continue}const z=x.find(J=>F.value.routeConfig===J.value.routeConfig);void 0!==z?(z.children.push(...F.children),_.add(z)):x.push(F)}for(const F of _){const z=Kl(F.children);x.push(new un(F.value,z))}return x.filter(F=>!_.has(F))}function co(T){let x=T;for(;x._sourceSegment;)x=x._sourceSegment;return x}function uo(T){let x=T,_=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,_+=x._segmentIndexShift?x._segmentIndexShift:0;return _-1}function Ea(T){return T.data||{}}function Mo(T){return T.resolve||{}}function Ks(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}function jo(T){return(0,ir.w)(x=>{const _=T(x);return _?(0,ke.D)(_).pipe((0,$n.U)(()=>x)):(0,pe.of)(x)})}class Ca extends class qo{shouldDetach(x){return!1}store(x,_){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,_){return x.routeConfig===_.routeConfig}}{}const Ql=new C.OlP("ROUTES");class ec{constructor(x,_,F,z){this.injector=x,this.compiler=_,this.onLoadStartListener=F,this.onLoadEndListener=z}load(x,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const z=this.loadModuleFactory(_.loadChildren).pipe((0,$n.U)(J=>{this.onLoadEndListener&&this.onLoadEndListener(_);const ue=J.create(x);return new ea(Ki(ue.injector.get(Ql,void 0,C.XFs.Self|C.XFs.Optional)).map(U),ue)}),(0,pi.K)(J=>{throw _._loader$=void 0,J}));return _._loader$=new Re.c(z,()=>new Ne.xQ).pipe((0,Fn.x)()),_._loader$}loadModuleFactory(x){return cr(x()).pipe((0,vi.zg)(_=>_ instanceof C.YKP?(0,pe.of)(_):(0,ke.D)(this.compiler.compileModuleAsync(_))))}}class Qs{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,_){return x}}function Ii(T){throw T}function Co(T,x,_){return x.parse("/")}function Ms(T,x){return(0,pe.of)(null)}const $a={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ra={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{class T{constructor(_,F,z,J,ue,we,Ve){this.rootComponentType=_,this.urlSerializer=F,this.rootContexts=z,this.location=J,this.config=Ve,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ne.xQ,this.errorHandler=Ii,this.malformedUriErrorHandler=Co,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ms,afterPreactivation:Ms},this.urlHandlingStrategy=new Qs,this.routeReuseStrategy=new Ca,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ue.get(C.h0i),this.console=ue.get(C.c2e);const rn=ue.get(C.R0b);this.isNgZoneEnabled=rn instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(Ve),this.currentUrlTree=function ti(){return new Jr(new pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ec(ue,we,yn=>this.triggerEvent(new Xe(yn)),yn=>this.triggerEvent(new Ee(yn))),this.routerState=Wi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ae.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const F=this.events;return _.pipe((0,an.h)(z=>0!==z.id),(0,$n.U)(z=>Object.assign(Object.assign({},z),{extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,ir.w)(z=>{let J=!1,ue=!1;return(0,pe.of)(z).pipe((0,jt.b)(we=>{this.currentNavigation={id:we.id,initialUrl:we.currentRawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ir.w)(we=>{const Ve=this.browserUrlTree.toString(),Jt=!this.navigated||we.extractedUrl.toString()!==Ve||Ve!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Jt)&&this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return eo(we.source)&&(this.browserUrlTree=we.extractedUrl),(0,pe.of)(we).pipe((0,ir.w)(rn=>{const yn=this.transitions.getValue();return F.next(new An(rn.id,this.serializeUrl(rn.extractedUrl),rn.source,rn.restoredState)),yn!==this.transitions.getValue()?ye.E:Promise.resolve(rn)}),function Un(T,x,_,F){return(0,ir.w)(z=>function Xs(T,x,_,F,z){return new Us(T,x,_,F,z).apply()}(T,x,_,z.extractedUrl,F).pipe((0,$n.U)(J=>Object.assign(Object.assign({},z),{urlAfterRedirects:J}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jt.b)(rn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:rn.urlAfterRedirects})}),function ia(T,x,_,F,z){return(0,vi.zg)(J=>function fs(T,x,_,F,z="emptyOnly",J="legacy"){try{const ue=new lo(T,x,_,F,z,J).recognize();return null===ue?Qr(new wi):(0,pe.of)(ue)}catch(ue){return Qr(ue)}}(T,x,J.urlAfterRedirects,_(J.urlAfterRedirects),F,z).pipe((0,$n.U)(ue=>Object.assign(Object.assign({},J),{targetSnapshot:ue}))))}(this.rootComponentType,this.config,rn=>this.serializeUrl(rn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jt.b)(rn=>{if("eager"===this.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const Ai=this.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);this.setBrowserUrl(Ai,rn)}this.browserUrlTree=rn.urlAfterRedirects}const yn=new Er(rn.id,this.serializeUrl(rn.extractedUrl),this.serializeUrl(rn.urlAfterRedirects),rn.targetSnapshot);F.next(yn)}));if(Jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:yn,extractedUrl:Ai,source:ci,restoredState:Ss,extras:Io}=we,Lo=new An(yn,this.serializeUrl(Ai),ci,Ss);F.next(Lo);const Ka=Wi(Ai,this.rootComponentType).snapshot;return(0,pe.of)(Object.assign(Object.assign({},we),{targetSnapshot:Ka,urlAfterRedirects:Ai,extras:Object.assign(Object.assign({},Io),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=we.rawUrl,we.resolve(null),ye.E}),jo(we=>{const{targetSnapshot:Ve,id:Jt,extractedUrl:Sn,rawUrl:rn,extras:{skipLocationChange:yn,replaceUrl:Ai}}=we;return this.hooks.beforePreactivation(Ve,{navigationId:Jt,appliedUrlTree:Sn,rawUrlTree:rn,skipLocationChange:!!yn,replaceUrl:!!Ai})}),(0,jt.b)(we=>{const Ve=new ss(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot);this.triggerEvent(Ve)}),(0,$n.U)(we=>Object.assign(Object.assign({},we),{guards:Ac(we.targetSnapshot,we.currentSnapshot,this.rootContexts)})),function or(T,x){return(0,vi.zg)(_=>{const{targetSnapshot:F,currentSnapshot:z,guards:{canActivateChecks:J,canDeactivateChecks:ue}}=_;return 0===ue.length&&0===J.length?(0,pe.of)(Object.assign(Object.assign({},_),{guardsResult:!0})):function Jl(T,x,_,F){return(0,ke.D)(T).pipe((0,vi.zg)(z=>function Xl(T,x,_,F,z){const J=x&&x.routeConfig?x.routeConfig.canDeactivate:null;if(!J||0===J.length)return(0,pe.of)(!0);const ue=J.map(we=>{const Ve=Vs(we,x,z);let Jt;if(function ta(T){return T&&Bs(T.canDeactivate)}(Ve))Jt=cr(Ve.canDeactivate(T,x,_,F));else{if(!Bs(Ve))throw new Error("Invalid CanDeactivate guard");Jt=cr(Ve(T,x,_,F))}return Jt.pipe(hn())});return(0,pe.of)(ue).pipe(xo())}(z.component,z.route,_,x,F)),hn(z=>!0!==z,!0))}(ue,F,z,T).pipe((0,vi.zg)(we=>we&&function oo(T){return"boolean"==typeof T}(we)?function Ht(T,x,_,F){return(0,ke.D)(x).pipe((0,_r.b)(z=>(0,Se.z)(function ao(T,x){return null!==T&&x&&x(new Te(T)),(0,pe.of)(!0)}(z.route.parent,F),function hs(T,x){return null!==T&&x&&x(new ve(T)),(0,pe.of)(!0)}(z.route,F),function Ar(T,x,_){const F=x[x.length-1],J=x.slice(0,x.length-1).reverse().map(ue=>function mu(T){const x=T.routeConfig?T.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:T,guards:x}:null}(ue)).filter(ue=>null!==ue).map(ue=>(0,oe.P)(()=>{const we=ue.guards.map(Ve=>{const Jt=Vs(Ve,ue.node,_);let Sn;if(function ba(T){return T&&Bs(T.canActivateChild)}(Jt))Sn=cr(Jt.canActivateChild(F,T));else{if(!Bs(Jt))throw new Error("Invalid CanActivateChild guard");Sn=cr(Jt(F,T))}return Sn.pipe(hn())});return(0,pe.of)(we).pipe(xo())}));return(0,pe.of)(J).pipe(xo())}(T,z.path,_),function Ma(T,x,_){const F=x.routeConfig?x.routeConfig.canActivate:null;if(!F||0===F.length)return(0,pe.of)(!0);const z=F.map(J=>(0,oe.P)(()=>{const ue=Vs(J,x,_);let we;if(function Ys(T){return T&&Bs(T.canActivate)}(ue))we=cr(ue.canActivate(x,T));else{if(!Bs(ue))throw new Error("Invalid CanActivate guard");we=cr(ue(x,T))}return we.pipe(hn())}));return(0,pe.of)(z).pipe(xo())}(T,z.route,_))),hn(z=>!0!==z,!0))}(F,J,T,x):(0,pe.of)(we)),(0,$n.U)(we=>Object.assign(Object.assign({},_),{guardsResult:we})))})}(this.ngModule.injector,we=>this.triggerEvent(we)),(0,jt.b)(we=>{if(Gr(we.guardsResult)){const Jt=Kn(`Redirecting to "${this.serializeUrl(we.guardsResult)}"`);throw Jt.url=we.guardsResult,Jt}const Ve=new Gi(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.triggerEvent(Ve)}),(0,an.h)(we=>!!we.guardsResult||(this.restoreHistory(we),this.cancelNavigationTransition(we,""),!1)),jo(we=>{if(we.guards.canActivateChecks.length)return(0,pe.of)(we).pipe((0,jt.b)(Ve=>{const Jt=new lr(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot);this.triggerEvent(Jt)}),(0,ir.w)(Ve=>{let Jt=!1;return(0,pe.of)(Ve).pipe(function Eo(T,x){return(0,vi.zg)(_=>{const{targetSnapshot:F,guards:{canActivateChecks:z}}=_;if(!z.length)return(0,pe.of)(_);let J=0;return(0,ke.D)(z).pipe((0,_r.b)(ue=>function Zo(T,x,_,F){return function So(T,x,_,F){const z=Ks(T);if(0===z.length)return(0,pe.of)({});const J={};return(0,ke.D)(z).pipe((0,vi.zg)(ue=>function Sa(T,x,_,F){const z=Vs(T,x,F);return cr(z.resolve?z.resolve(x,_):z(x,_))}(T[ue],x,_,F).pipe((0,jt.b)(we=>{J[ue]=we}))),Pt(1),(0,vi.zg)(()=>Ks(J).length===z.length?(0,pe.of)(J):ye.E))}(T._resolve,T,x,F).pipe((0,$n.U)(J=>(T._resolvedData=J,T.data=Object.assign(Object.assign({},T.data),Cr(T,_).resolve),null)))}(ue.route,F,T,x)),(0,jt.b)(()=>J++),Pt(1),(0,vi.zg)(ue=>J===z.length?(0,pe.of)(_):ye.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jt.b)({next:()=>Jt=!0,complete:()=>{Jt||(this.restoreHistory(Ve),this.cancelNavigationTransition(Ve,"At least one route resolver didn't emit any value."))}}))}),(0,jt.b)(Ve=>{const Jt=new os(Ve.id,this.serializeUrl(Ve.extractedUrl),this.serializeUrl(Ve.urlAfterRedirects),Ve.targetSnapshot);this.triggerEvent(Jt)}))}),jo(we=>{const{targetSnapshot:Ve,id:Jt,extractedUrl:Sn,rawUrl:rn,extras:{skipLocationChange:yn,replaceUrl:Ai}}=we;return this.hooks.afterPreactivation(Ve,{navigationId:Jt,appliedUrlTree:Sn,rawUrlTree:rn,skipLocationChange:!!yn,replaceUrl:!!Ai})}),(0,$n.U)(we=>{const Ve=function ne(T,x,_){const F=ge(T,x._root,_?_._root:void 0);return new zr(F,x)}(this.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return Object.assign(Object.assign({},we),{targetRouterState:Ve})}),(0,jt.b)(we=>{this.currentUrlTree=we.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(we.urlAfterRedirects,we.rawUrl),this.routerState=we.targetRouterState,"deferred"===this.urlUpdateStrategy&&(we.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,we),this.browserUrlTree=we.urlAfterRedirects)}),((T,x,_)=>(0,$n.U)(F=>(new zo(x,F.targetRouterState,F.currentRouterState,_).activate(T),F)))(this.rootContexts,this.routeReuseStrategy,we=>this.triggerEvent(we)),(0,jt.b)({next(){J=!0},complete(){J=!0}}),function di(T){return x=>x.lift(new xi(T))}(()=>{var we;J||ue||this.cancelNavigationTransition(z,`Navigation ID ${z.id} is not equal to the current navigation id ${this.navigationId}`),(null===(we=this.currentNavigation)||void 0===we?void 0:we.id)===z.id&&(this.currentNavigation=null)}),(0,pi.K)(we=>{if(ue=!0,function ri(T){return T&&T[Lt]}(we)){const Ve=Gr(we.url);Ve||(this.navigated=!0,this.restoreHistory(z,!0));const Jt=new pr(z.id,this.serializeUrl(z.extractedUrl),we.message);F.next(Jt),Ve?setTimeout(()=>{const Sn=this.urlHandlingStrategy.merge(we.url,this.rawUrlTree),rn={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||eo(z.source)};this.scheduleNavigation(Sn,"imperative",null,rn,{resolve:z.resolve,reject:z.reject,promise:z.promise})},0):z.resolve(!1)}else{this.restoreHistory(z,!0);const Ve=new Xi(z.id,this.serializeUrl(z.extractedUrl),we);F.next(Ve);try{z.resolve(this.errorHandler(we))}catch(Jt){z.reject(Jt)}}return ye.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const F="popstate"===_.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{var z;const J={replaceUrl:!0},ue=(null===(z=_.state)||void 0===z?void 0:z.navigationId)?_.state:null;if(ue){const Ve=Object.assign({},ue);delete Ve.navigationId,delete Ve.\u0275routerPageId,0!==Object.keys(Ve).length&&(J.state=Ve)}const we=this.parseUrl(_.url);this.scheduleNavigation(we,F,ue,J)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){wo(_),this.config=_.map(U),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,F={}){const{relativeTo:z,queryParams:J,fragment:ue,queryParamsHandling:we,preserveFragment:Ve}=F,Jt=z||this.routerState.root,Sn=Ve?this.currentUrlTree.fragment:ue;let rn=null;switch(we){case"merge":rn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),J);break;case"preserve":rn=this.currentUrlTree.queryParams;break;default:rn=J||null}return null!==rn&&(rn=this.removeEmptyProps(rn)),function Ut(T,x,_,F,z){if(0===_.length)return gi(x.root,x.root,x,F,z);const J=function _a(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new ds(!0,0,T);let x=0,_=!1;const F=T.reduce((z,J,ue)=>{if("object"==typeof J&&null!=J){if(J.outlets){const we={};return ai(J.outlets,(Ve,Jt)=>{we[Jt]="string"==typeof Ve?Ve.split("/"):Ve}),[...z,{outlets:we}]}if(J.segmentPath)return[...z,J.segmentPath]}return"string"!=typeof J?[...z,J]:0===ue?(J.split("/").forEach((we,Ve)=>{0==Ve&&"."===we||(0==Ve&&""===we?_=!0:".."===we?x++:""!=we&&z.push(we))}),z):[...z,J]},[]);return new ds(_,x,F)}(_);if(J.toRoot())return gi(x.root,new pn([],{}),x,F,z);const ue=function Yl(T,x,_){if(T.isAbsolute)return new ws(x.root,!0,0);if(-1===_.snapshot._lastPathIndex){const J=_.snapshot._urlSegment;return new ws(J,J===x.root,0)}const F=Bn(T.commands[0])?0:1;return function gl(T,x,_){let F=T,z=x,J=_;for(;J>z;){if(J-=z,F=F.parent,!F)throw new Error("Invalid number of '../'");z=F.segments.length}return new ws(F,!1,z-J)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+F,T.numberOfDoubleDots)}(J,x,T),we=ue.processChildren?Vo(ue.segmentGroup,ue.index,J.commands):ks(ue.segmentGroup,ue.index,J.commands);return gi(ue.segmentGroup,we,x,F,z)}(Jt,this.currentUrlTree,_,rn,null!=Sn?Sn:null)}navigateByUrl(_,F={skipLocationChange:!1}){const z=Gr(_)?_:this.parseUrl(_),J=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(J,"imperative",null,F)}navigate(_,F={skipLocationChange:!1}){return function yl(T){for(let x=0;x<T.length;x++){const _=T[x];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${x}`)}}(_),this.navigateByUrl(this.createUrlTree(_,F),F)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let F;try{F=this.urlSerializer.parse(_)}catch(z){F=this.malformedUriErrorHandler(z,this.urlSerializer,_)}return F}isActive(_,F){let z;if(z=!0===F?Object.assign({},$a):!1===F?Object.assign({},ra):F,Gr(_))return xs(this.currentUrlTree,_,z);const J=this.parseUrl(_);return xs(this.currentUrlTree,J,z)}removeEmptyProps(_){return Object.keys(_).reduce((F,z)=>{const J=_[z];return null!=J&&(F[z]=J),F},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new $i(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,F,z,J,ue){var we,Ve,Jt;if(this.disposed)return Promise.resolve(!1);const Sn=this.transitions.value,rn=eo(F)&&Sn&&!eo(Sn.source),yn=Sn.rawUrl.toString()===_.toString(),Ai=Sn.id===(null===(we=this.currentNavigation)||void 0===we?void 0:we.id);if(rn&&yn&&Ai)return Promise.resolve(!0);let Ss,Io,Lo;ue?(Ss=ue.resolve,Io=ue.reject,Lo=ue.promise):Lo=new Promise((sa,Qa)=>{Ss=sa,Io=Qa});const Ka=++this.navigationId;let ns;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),ns=z&&z.\u0275routerPageId?z.\u0275routerPageId:J.replaceUrl||J.skipLocationChange?null!==(Ve=this.browserPageId)&&void 0!==Ve?Ve:0:(null!==(Jt=this.browserPageId)&&void 0!==Jt?Jt:0)+1):ns=0,this.setTransition({id:Ka,targetPageId:ns,source:F,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:J,resolve:Ss,reject:Io,promise:Lo,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Lo.catch(sa=>Promise.reject(sa))}setBrowserUrl(_,F){const z=this.urlSerializer.serialize(_),J=Object.assign(Object.assign({},F.extras.state),this.generateNgRouterState(F.id,F.targetPageId));this.location.isCurrentPathEqualTo(z)||F.extras.replaceUrl?this.location.replaceState(z,"",J):this.location.go(z,"",J)}restoreHistory(_,F=!1){var z,J;if("computed"===this.canceledNavigationResolution){const ue=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(z=this.currentNavigation)||void 0===z?void 0:z.finalUrl)||0===ue?this.currentUrlTree===(null===(J=this.currentNavigation)||void 0===J?void 0:J.finalUrl)&&0===ue&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ue)}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,F){const z=new pr(_.id,this.serializeUrl(_.extractedUrl),F);this.triggerEvent(z),_.resolve(!1)}generateNgRouterState(_,F){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:F}:{navigationId:_}}}return T.\u0275fac=function(_){C.$Z()},T.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac}),T})();function eo(T){return"imperative"!==T}let Ls=(()=>{class T{constructor(_,F,z,J,ue){this.router=_,this.route=F,this.tabIndexAttribute=z,this.renderer=J,this.el=ue,this.commands=null,this.onChanges=new Ne.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const F=this.renderer,z=this.el.nativeElement;null!==_?F.setAttribute(z,"tabindex",_):F.removeAttribute(z,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const _={skipLocationChange:Os(this.skipLocationChange),replaceUrl:Os(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Os(this.preserveFragment)})}}return T.\u0275fac=function(_){return new(_||T)(C.Y36(es),C.Y36(Ci),C.$8M("tabindex"),C.Y36(C.Qsj),C.Y36(C.SBq))},T.\u0275dir=C.lG2({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,F){1&_&&C.NdJ("click",function(){return F.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[C.TTD]}),T})(),Qt=(()=>{class T{constructor(_,F,z){this.router=_,this.route=F,this.locationStrategy=z,this.commands=null,this.href=null,this.onChanges=new Ne.xQ,this.subscription=_.events.subscribe(J=>{J instanceof $i&&this.updateTargetUrlAndHref()})}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,F,z,J,ue){if(0!==_||F||z||J||ue||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const we={skipLocationChange:Os(this.skipLocationChange),replaceUrl:Os(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,we),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Os(this.preserveFragment)})}}return T.\u0275fac=function(_){return new(_||T)(C.Y36(es),C.Y36(Ci),C.Y36(ei.S$))},T.\u0275dir=C.lG2({type:T,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,F){1&_&&C.NdJ("click",function(J){return F.onClick(J.button,J.ctrlKey,J.shiftKey,J.altKey,J.metaKey)}),2&_&&C.uIk("target",F.target)("href",F.href,C.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[C.TTD]}),T})();function Os(T){return""===T||!!T}let ts=(()=>{class T{constructor(_,F,z,J,ue,we){this.router=_,this.element=F,this.renderer=z,this.cdr=J,this.link=ue,this.linkWithHref=we,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new C.vpe,this.routerEventsSubscription=_.events.subscribe(Ve=>{Ve instanceof $i&&this.update()})}ngAfterContentInit(){(0,pe.of)(this.links.changes,this.linksWithHrefs.changes,(0,pe.of)(null)).pipe((0,Xn.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var _;null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe();const F=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(z=>!!z).map(z=>z.onChanges);this.linkInputChangesSubscription=(0,ke.D)(F).pipe((0,Xn.J)()).subscribe(z=>{this.isActive!==this.isLinkActive(this.router)(z)&&this.update()})}set routerLinkActive(_){const F=Array.isArray(_)?_:_.split(" ");this.classes=F.filter(z=>!!z)}ngOnChanges(_){this.update()}ngOnDestroy(){var _;this.routerEventsSubscription.unsubscribe(),null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this.isActive!==_&&(this.isActive=_,this.cdr.markForCheck(),this.classes.forEach(F=>{_?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),this.isActiveChange.emit(_))})}isLinkActive(_){const F=function vu(T){return!!T.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&_.isActive(z.urlTree,F)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.linkWithHref&&_(this.linkWithHref)||this.links.some(_)||this.linksWithHrefs.some(_)}}return T.\u0275fac=function(_){return new(_||T)(C.Y36(es),C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(C.sBO),C.Y36(Ls,8),C.Y36(Qt,8))},T.\u0275dir=C.lG2({type:T,selectors:[["","routerLinkActive",""]],contentQueries:function(_,F,z){if(1&_&&(C.Suo(z,Ls,5),C.Suo(z,Qt,5)),2&_){let J;C.iGM(J=C.CRH())&&(F.links=J),C.iGM(J=C.CRH())&&(F.linksWithHrefs=J)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[C.TTD]}),T})();class fo{}class Ya{preload(x,_){return(0,pe.of)(null)}}let Es=(()=>{class T{constructor(_,F,z,J){this.router=_,this.injector=z,this.preloadingStrategy=J,this.loader=new ec(z,F,Ve=>_.triggerEvent(new Xe(Ve)),Ve=>_.triggerEvent(new Ee(Ve)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,an.h)(_=>_ instanceof $i),(0,_r.b)(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(C.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,F){const z=[];for(const J of F)if(J.loadChildren&&!J.canLoad&&J._loadedConfig){const ue=J._loadedConfig;z.push(this.processRoutes(ue.module,ue.routes))}else J.loadChildren&&!J.canLoad?z.push(this.preloadConfig(_,J)):J.children&&z.push(this.processRoutes(_,J.children));return(0,ke.D)(z).pipe((0,Xn.J)(),(0,$n.U)(J=>{}))}preloadConfig(_,F){return this.preloadingStrategy.preload(F,()=>(F._loadedConfig?(0,pe.of)(F._loadedConfig):this.loader.load(_.injector,F)).pipe((0,vi.zg)(J=>(F._loadedConfig=J,this.processRoutes(J.module,J.routes)))))}}return T.\u0275fac=function(_){return new(_||T)(C.LFG(es),C.LFG(C.Sil),C.LFG(C.zs3),C.LFG(fo))},T.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac}),T})(),$o=(()=>{class T{constructor(_,F,z={}){this.router=_,this.viewportScroller=F,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof An?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof $i&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof fe&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,F){this.router.triggerEvent(new fe(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(_){C.$Z()},T.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac}),T})();const Gs=new C.OlP("ROUTER_CONFIGURATION"),_l=new C.OlP("ROUTER_FORROOT_GUARD"),Dc=[ei.Ye,{provide:Xr,useClass:Rs},{provide:es,useFactory:function Rc(T,x,_,F,z,J,ue={},we,Ve){const Jt=new es(null,T,x,_,F,z,Ki(J));return we&&(Jt.urlHandlingStrategy=we),Ve&&(Jt.routeReuseStrategy=Ve),function Yo(T,x){T.errorHandler&&(x.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(x.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(x.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(x.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(x.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(x.canceledNavigationResolution=T.canceledNavigationResolution)}(ue,Jt),ue.enableTracing&&Jt.events.subscribe(Sn=>{var rn,yn;null===(rn=console.group)||void 0===rn||rn.call(console,`Router Event: ${Sn.constructor.name}`),console.log(Sn.toString()),console.log(Sn),null===(yn=console.groupEnd)||void 0===yn||yn.call(console)}),Jt},deps:[Xr,Js,ei.Ye,C.zs3,C.Sil,Ql,Gs,[class Dr{},new C.FiY],[class ho{},new C.FiY]]},Js,{provide:Ci,useFactory:function ic(T){return T.routerState.root},deps:[es]},Es,Ya,class zs{preload(x,_){return _().pipe((0,pi.K)(()=>(0,pe.of)(null)))}},{provide:Gs,useValue:{enableTracing:!1}}];function yu(){return new C.PXZ("Router",es)}let To=(()=>{class T{constructor(_,F){}static forRoot(_,F){return{ngModule:T,providers:[Dc,nc(_),{provide:_l,useFactory:Do,deps:[[es,new C.FiY,new C.tp0]]},{provide:Gs,useValue:F||{}},{provide:ei.S$,useFactory:Ja,deps:[ei.lw,[new C.tBr(ei.mr),new C.FiY],Gs]},{provide:$o,useFactory:Ao,deps:[es,ei.EM,Gs]},{provide:fo,useExisting:F&&F.preloadingStrategy?F.preloadingStrategy:Ya},{provide:C.PXZ,multi:!0,useFactory:yu},[Ro,{provide:C.ip1,multi:!0,useFactory:rc,deps:[Ro]},{provide:_i,useFactory:Xa,deps:[Ro]},{provide:C.tb,multi:!0,useExisting:_i}]]}}static forChild(_){return{ngModule:T,providers:[nc(_)]}}}return T.\u0275fac=function(_){return new(_||T)(C.LFG(_l,8),C.LFG(es,8))},T.\u0275mod=C.oAB({type:T}),T.\u0275inj=C.cJS({}),T})();function Ao(T,x,_){return _.scrollOffset&&x.setOffset(_.scrollOffset),new $o(T,x,_)}function Ja(T,x,_={}){return _.useHash?new ei.Do(T,x):new ei.b0(T,x)}function Do(T){return"guarded"}function nc(T){return[{provide:C.deG,multi:!0,useValue:T},{provide:Ql,multi:!0,useValue:T}]}let Ro=(()=>{class T{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ne.xQ}appInitializer(){return this.injector.get(ei.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let F=null;const z=new Promise(we=>F=we),J=this.injector.get(es),ue=this.injector.get(Gs);return"disabled"===ue.initialNavigation?(J.setUpLocationChangeListener(),F(!0)):"enabled"===ue.initialNavigation||"enabledBlocking"===ue.initialNavigation?(J.hooks.afterPreactivation=()=>this.initNavigation?(0,pe.of)(null):(this.initNavigation=!0,F(!0),this.resultOfPreactivationDone),J.initialNavigation()):F(!0),z})}bootstrapListener(_){const F=this.injector.get(Gs),z=this.injector.get(Es),J=this.injector.get($o),ue=this.injector.get(es),we=this.injector.get(C.z2F);_===we.components[0]&&(("enabledNonBlocking"===F.initialNavigation||void 0===F.initialNavigation)&&ue.initialNavigation(),z.setUpPreloading(),J.init(),ue.resetRootComponentType(we.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return T.\u0275fac=function(_){return new(_||T)(C.LFG(C.zs3))},T.\u0275prov=C.Yz7({token:T,factory:T.\u0275fac}),T})();function rc(T){return T.appInitializer.bind(T)}function Xa(T){return T.bootstrapListener.bind(T)}const _i=new C.OlP("Router Initializer")},2329:(Yt,et,Q)=>{"use strict";function C(d,e,t,r,o,c,h){try{var f=d[c](h),m=f.value}catch(v){return void t(v)}f.done?e(m):Promise.resolve(m).then(r,o)}Q.d(et,{WMw:()=>Ui,m7l:()=>zl,N$j:()=>$c,ZzF:()=>Is,DvJ:()=>b,TlE:()=>ci,u9r:()=>Pn,uWy:()=>nt,Ilk:()=>Ht,tEQ:()=>im,Ox3:()=>$f,ehD:()=>Ge,pBf:()=>k,hH6:()=>ua,Wl3:()=>it,ZAu:()=>La,vmT:()=>rm,QRU:()=>ep,vpT:()=>vc,kB5:()=>yc,_C8:()=>Hl,Syv:()=>bs,NMF:()=>us,x12:()=>ol,nls:()=>rs,blk:()=>Df,ejS:()=>Jo,wem:()=>wn,D1R:()=>Nn,qyh:()=>Hn,aNw:()=>cl,Zp0:()=>ad,RsA:()=>ke,F5T:()=>Sn,M8C:()=>Un,yGw:()=>Qt,Kj0:()=>br,vBJ:()=>rn,RSm:()=>Gf,EJi:()=>Hf,Wid:()=>td,OoA:()=>ft,TyD:()=>Lt,aH4:()=>on,YLQ:()=>Kn,dUE:()=>Ba,Tme:()=>_i,iKG:()=>Rd,cPb:()=>dn,_12:()=>Nc,cek:()=>gh,woe:()=>al,UY4:()=>xc,iUV:()=>ar,_fP:()=>Zr,iLg:()=>Cc,rpg:()=>Ce,xsS:()=>zd,OdW:()=>Jc,TUv:()=>qd,aLr:()=>Ii,$V:()=>cp,PMe:()=>sd,QmN:()=>pe,IOt:()=>ws,xEZ:()=>Ar,dpR:()=>hh,z$h:()=>Ti,UlW:()=>Bn,FM8:()=>_t,Pa4:()=>re,yC1:()=>lu,CP7:()=>ji,knz:()=>Ln});const ke={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},pe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},it=0,Ge=2,Ui=2,Ce=1e3,nt=1001,ft=1002,Lt=1003,Kn=1004,on=1005,wn=1006,Hn=1007,Nn=1008,ai=1009,Yr=1012,as=1015,ur=1016,Nr=1020,pn=1023,Ni=1026,Fr=1027,bs=2300,us=2301,j=2400,ne=2401,Bn=1,Ti=2,gi=3e3,Ln=3001,ws=0,$s=35044,Ys=35048;class k{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const o=this._listeners[e];if(void 0!==o){const c=o.indexOf(t);-1!==c&&o.splice(c,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const o=r.slice(0);for(let c=0,h=o.length;c<h;c++)o[c].call(this,e);e.target=null}}}const q=[];for(let d=0;d<256;d++)q[d]=(d<16?"0":"")+d.toString(16);let U=1234567;const Y=Math.PI/180,xe=180/Math.PI;function ze(){const d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(q[255&d]+q[d>>8&255]+q[d>>16&255]+q[d>>24&255]+"-"+q[255&e]+q[e>>8&255]+"-"+q[e>>16&15|64]+q[e>>24&255]+"-"+q[63&t|128]+q[t>>8&255]+"-"+q[t>>16&255]+q[t>>24&255]+q[255&r]+q[r>>8&255]+q[r>>16&255]+q[r>>24&255]).toUpperCase()}function at(d,e,t){return Math.max(e,Math.min(t,d))}function Tt(d,e){return(d%e+e)%e}function vn(d,e,t){return(1-t)*d+t*e}function Xs(d){return 0==(d&d-1)&&0!==d}function Us(d){return Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Tc(d){return Math.pow(2,Math.floor(Math.log(d)/Math.LN2))}var Un=Object.freeze({__proto__:null,DEG2RAD:Y,RAD2DEG:xe,generateUUID:ze,clamp:at,euclideanModulo:Tt,mapLinear:function bi(d,e,t,r,o){return r+(d-e)*(o-r)/(t-e)},inverseLerp:function Vi(d,e,t){return d!==e?(t-d)/(e-d):0},lerp:vn,damp:function si(d,e,t,r){return vn(d,e,1-Math.exp(-t*r))},pingpong:function xr(d,e=1){return e-Math.abs(Tt(d,2*e)-e)},smoothstep:function V(d,e,t){return d<=e?0:d>=t?1:(d=(d-e)/(t-e))*d*(3-2*d)},smootherstep:function O(d,e,t){return d<=e?0:d>=t?1:(d=(d-e)/(t-e))*d*d*(d*(6*d-15)+10)},randInt:function L(d,e){return d+Math.floor(Math.random()*(e-d+1))},randFloat:function X(d,e){return d+Math.random()*(e-d)},randFloatSpread:function We(d){return d*(.5-Math.random())},seededRandom:function Nt(d){return void 0!==d&&(U=d%2147483647),U=16807*U%2147483647,(U-1)/2147483646},degToRad:function Hi(d){return d*Y},radToDeg:function Br(d){return d*xe},isPowerOfTwo:Xs,ceilPowerOfTwo:Us,floorPowerOfTwo:Tc,setQuaternionFromProperEuler:function ml(d,e,t,r,o){const c=Math.cos,h=Math.sin,f=c(t/2),m=h(t/2),v=c((e+r)/2),M=h((e+r)/2),w=c((e-r)/2),S=h((e-r)/2),A=c((r-e)/2),N=h((r-e)/2);switch(o){case"XYX":d.set(f*M,m*w,m*S,f*v);break;case"YZY":d.set(m*S,f*M,m*w,f*v);break;case"ZXZ":d.set(m*w,m*S,f*M,f*v);break;case"XZX":d.set(f*M,m*N,m*A,f*v);break;case"YXY":d.set(m*A,f*M,m*N,f*v);break;case"ZYZ":d.set(m*N,m*A,f*M,f*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}});class _t{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6],this.y=o[1]*t+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),o=Math.sin(t),c=this.x-e.x,h=this.y-e.y;return this.x=c*r-h*o+e.x,this.y=c*o+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}_t.prototype.isVector2=!0;class vr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,c,h,f,m,v){const M=this.elements;return M[0]=e,M[1]=o,M[2]=f,M[3]=t,M[4]=c,M[5]=m,M[6]=r,M[7]=h,M[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,c=this.elements,h=r[0],f=r[3],m=r[6],v=r[1],M=r[4],w=r[7],S=r[2],A=r[5],N=r[8],H=o[0],K=o[3],B=o[6],D=o[1],ie=o[4],$=o[7],ae=o[2],me=o[5],be=o[8];return c[0]=h*H+f*D+m*ae,c[3]=h*K+f*ie+m*me,c[6]=h*B+f*$+m*be,c[1]=v*H+M*D+w*ae,c[4]=v*K+M*ie+w*me,c[7]=v*B+M*$+w*be,c[2]=S*H+A*D+N*ae,c[5]=S*K+A*ie+N*me,c[8]=S*B+A*$+N*be,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8];return t*h*M-t*f*v-r*c*M+r*f*m+o*c*v-o*h*m}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8],w=M*h-f*v,S=f*m-M*c,A=v*c-h*m,N=t*w+r*S+o*A;if(0===N)return this.set(0,0,0,0,0,0,0,0,0);const H=1/N;return e[0]=w*H,e[1]=(o*v-M*r)*H,e[2]=(f*r-o*h)*H,e[3]=S*H,e[4]=(M*t-o*m)*H,e[5]=(o*c-f*t)*H,e[6]=A*H,e[7]=(r*m-v*t)*H,e[8]=(h*t-r*c)*H,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,o,c,h,f){const m=Math.cos(c),v=Math.sin(c);return this.set(r*m,r*v,-r*(m*h+v*f)+h+e,-o*v,o*m,-o*(-v*h+m*f)+f+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),o=this.elements,c=o[0],h=o[3],f=o[6],m=o[1],v=o[4],M=o[7];return o[0]=t*c+r*m,o[3]=t*h+r*v,o[6]=t*f+r*M,o[1]=-r*c+t*m,o[4]=-r*h+t*v,o[7]=-r*f+t*M,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<9;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Ac(d){for(let e=d.length-1;e>=0;--e)if(d[e]>65535)return!0;return!1}function vl(d){return document.createElementNS("http://www.w3.org/1999/xhtml",d)}vr.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Go={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ht={h:0,s:0,l:0},ni={h:0,s:0,l:0};function Wo(d,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?d+6*(e-d)*t:t<.5?e:t<2/3?d+6*(e-d)*(2/3-t):d}function or(d){return d<.04045?.0773993808*d:Math.pow(.9478672986*d+.0521327014,2.4)}function Jl(d){return d<.0031308?12.92*d:1.055*Math.pow(d,.41666)-.055}let hs,Ht=(()=>{class d{constructor(t,r,o){return void 0===r&&void 0===o?this.set(t):this.setRGB(t,r,o)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,o){return this.r=t,this.g=r,this.b=o,this}setHSL(t,r,o){if(t=Tt(t,1),r=at(r,0,1),o=at(o,0,1),0===r)this.r=this.g=this.b=o;else{const c=o<=.5?o*(1+r):o+r-o*r,h=2*o-c;this.r=Wo(h,c,t+1/3),this.g=Wo(h,c,t),this.b=Wo(h,c,t-1/3)}return this}setStyle(t){function r(c){void 0!==c&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let c;const f=o[2];switch(o[1]){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,r(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,r(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f)){const m=parseFloat(c[1])/360,v=parseInt(c[2],10)/100,M=parseInt(c[3],10)/100;return r(c[4]),this.setHSL(m,v,M)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const c=o[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=Go[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=or(t.r),this.g=or(t.g),this.b=or(t.b),this}copyLinearToSRGB(t){return this.r=Jl(t.r),this.g=Jl(t.g),this.b=Jl(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,o=this.g,c=this.b,h=Math.max(r,o,c),f=Math.min(r,o,c);let m,v;const M=(f+h)/2;if(f===h)m=0,v=0;else{const w=h-f;switch(v=M<=.5?w/(h+f):w/(2-h-f),h){case r:m=(o-c)/w+(o<c?6:0);break;case o:m=(c-r)/w+2;break;case c:m=(r-o)/w+4}m/=6}return t.h=m,t.s=v,t.l=M,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,o){return this.getHSL(ht),ht.h+=t,ht.s+=r,ht.l+=o,this.setHSL(ht.h,ht.s,ht.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,o){return this.r=t.r+(r.r-t.r)*o,this.g=t.g+(r.g-t.g)*o,this.b=t.b+(r.b-t.b)*o,this}lerpHSL(t,r){this.getHSL(ht),t.getHSL(ni);const o=vn(ht.h,ni.h,r),c=vn(ht.s,ni.s,r),h=vn(ht.l,ni.l,r);return this.setHSL(o,c,h),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return d.NAMES=Go,d})();Ht.prototype.isColor=!0,Ht.prototype.r=1,Ht.prototype.g=1,Ht.prototype.b=1;class ao{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===hs&&(hs=vl("canvas")),hs.width=e.width,hs.height=e.height;const r=hs.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=hs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=vl("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),c=o.data;for(let h=0;h<c.length;h++)c[h]=255*or(c[h]/255);return r.putImageData(o,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*or(t[r]/255)):or(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ma=0;class Ar extends k{constructor(e=Ar.DEFAULT_IMAGE,t=Ar.DEFAULT_MAPPING,r=nt,o=nt,c=wn,h=Nn,f=pn,m=ai,v=1,M=gi){super(),Object.defineProperty(this,"id",{value:Ma++}),this.uuid=ze(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=o,this.magFilter=c,this.minFilter=h,this.anisotropy=v,this.format=f,this.internalFormat=null,this.type=m,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=M,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const o=this.image;if(void 0===o.uuid&&(o.uuid=ze()),!t&&void 0===e.images[o.uuid]){let c;if(Array.isArray(o)){c=[];for(let h=0,f=o.length;h<f;h++)c.push(Xl(o[h].isDataTexture?o[h].image:o[h]))}else c=Xl(o);e.images[o.uuid]={uuid:o.uuid,url:c}}r.image=o.uuid}return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ce:e.x=e.x-Math.floor(e.x);break;case nt:e.x=e.x<0?0:1;break;case ft:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ce:e.y=e.y-Math.floor(e.y);break;case nt:e.y=e.y<0?0:1;break;case ft:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function Xl(d){return"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&d instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&d instanceof ImageBitmap?ao.getDataURL(d):d.data?{data:Array.prototype.slice.call(d.data),width:d.width,height:d.height,type:d.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ar.DEFAULT_IMAGE=void 0,Ar.DEFAULT_MAPPING=300,Ar.prototype.isTexture=!0;class wi{constructor(e=0,t=0,r=0,o=1){this.x=e,this.y=t,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,o){return this.x=e,this.y=t,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,c=this.w,h=e.elements;return this.x=h[0]*t+h[4]*r+h[8]*o+h[12]*c,this.y=h[1]*t+h[5]*r+h[9]*o+h[13]*c,this.z=h[2]*t+h[6]*r+h[10]*o+h[14]*c,this.w=h[3]*t+h[7]*r+h[11]*o+h[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,o,c;const h=.01,f=.1,m=e.elements,v=m[0],M=m[4],w=m[8],S=m[1],A=m[5],N=m[9],H=m[2],K=m[6],B=m[10];if(Math.abs(M-S)<h&&Math.abs(w-H)<h&&Math.abs(N-K)<h){if(Math.abs(M+S)<f&&Math.abs(w+H)<f&&Math.abs(N+K)<f&&Math.abs(v+A+B-3)<f)return this.set(1,0,0,0),this;t=Math.PI;const ie=(v+1)/2,$=(A+1)/2,ae=(B+1)/2,me=(M+S)/4,be=(w+H)/4,Le=(N+K)/4;return ie>$&&ie>ae?ie<h?(r=0,o=.707106781,c=.707106781):(r=Math.sqrt(ie),o=me/r,c=be/r):$>ae?$<h?(r=.707106781,o=0,c=.707106781):(o=Math.sqrt($),r=me/o,c=Le/o):ae<h?(r=.707106781,o=.707106781,c=0):(c=Math.sqrt(ae),r=be/c,o=Le/c),this.set(r,o,c,t),this}let D=Math.sqrt((K-N)*(K-N)+(w-H)*(w-H)+(S-M)*(S-M));return Math.abs(D)<.001&&(D=1),this.x=(K-N)/D,this.y=(w-H)/D,this.z=(S-M)/D,this.w=Math.acos((v+A+B-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}wi.prototype.isVector4=!0;class Qr extends k{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new wi(0,0,e,t),this.scissorTest=!1,this.viewport=new wi(0,0,e,t),this.texture=new Ar(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:wn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Qr.prototype.isWebGLRenderTarget=!0,class fs extends Qr{constructor(e,t,r){super(e,t);const o=this.texture;this.texture=[];for(let c=0;c<r;c++)this.texture[c]=o.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let o=0,c=this.texture.length;o<c;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class lo extends Qr{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}lo.prototype.isWebGLMultisampleRenderTarget=!0;class Zr{constructor(e=0,t=0,r=0,o=1){this._x=e,this._y=t,this._z=r,this._w=o}static slerp(e,t,r,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,o)}static slerpFlat(e,t,r,o,c,h,f){let m=r[o+0],v=r[o+1],M=r[o+2],w=r[o+3];const S=c[h+0],A=c[h+1],N=c[h+2],H=c[h+3];if(0===f)return e[t+0]=m,e[t+1]=v,e[t+2]=M,void(e[t+3]=w);if(1===f)return e[t+0]=S,e[t+1]=A,e[t+2]=N,void(e[t+3]=H);if(w!==H||m!==S||v!==A||M!==N){let K=1-f;const B=m*S+v*A+M*N+w*H,D=B>=0?1:-1,ie=1-B*B;if(ie>Number.EPSILON){const ae=Math.sqrt(ie),me=Math.atan2(ae,B*D);K=Math.sin(K*me)/ae,f=Math.sin(f*me)/ae}const $=f*D;if(m=m*K+S*$,v=v*K+A*$,M=M*K+N*$,w=w*K+H*$,K===1-f){const ae=1/Math.sqrt(m*m+v*v+M*M+w*w);m*=ae,v*=ae,M*=ae,w*=ae}}e[t]=m,e[t+1]=v,e[t+2]=M,e[t+3]=w}static multiplyQuaternionsFlat(e,t,r,o,c,h){const f=r[o],m=r[o+1],v=r[o+2],M=r[o+3],w=c[h],S=c[h+1],A=c[h+2],N=c[h+3];return e[t]=f*N+M*w+m*A-v*S,e[t+1]=m*N+M*S+v*w-f*A,e[t+2]=v*N+M*A+f*S-m*w,e[t+3]=M*N-f*w-m*S-v*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,o){return this._x=e,this._y=t,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,o=e._y,c=e._z,h=e._order,f=Math.cos,m=Math.sin,v=f(r/2),M=f(o/2),w=f(c/2),S=m(r/2),A=m(o/2),N=m(c/2);switch(h){case"XYZ":this._x=S*M*w+v*A*N,this._y=v*A*w-S*M*N,this._z=v*M*N+S*A*w,this._w=v*M*w-S*A*N;break;case"YXZ":this._x=S*M*w+v*A*N,this._y=v*A*w-S*M*N,this._z=v*M*N-S*A*w,this._w=v*M*w+S*A*N;break;case"ZXY":this._x=S*M*w-v*A*N,this._y=v*A*w+S*M*N,this._z=v*M*N+S*A*w,this._w=v*M*w-S*A*N;break;case"ZYX":this._x=S*M*w-v*A*N,this._y=v*A*w+S*M*N,this._z=v*M*N-S*A*w,this._w=v*M*w+S*A*N;break;case"YZX":this._x=S*M*w+v*A*N,this._y=v*A*w+S*M*N,this._z=v*M*N-S*A*w,this._w=v*M*w-S*A*N;break;case"XZY":this._x=S*M*w-v*A*N,this._y=v*A*w-S*M*N,this._z=v*M*N+S*A*w,this._w=v*M*w+S*A*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],o=t[4],c=t[8],h=t[1],f=t[5],m=t[9],v=t[2],M=t[6],w=t[10],S=r+f+w;if(S>0){const A=.5/Math.sqrt(S+1);this._w=.25/A,this._x=(M-m)*A,this._y=(c-v)*A,this._z=(h-o)*A}else if(r>f&&r>w){const A=2*Math.sqrt(1+r-f-w);this._w=(M-m)/A,this._x=.25*A,this._y=(o+h)/A,this._z=(c+v)/A}else if(f>w){const A=2*Math.sqrt(1+f-r-w);this._w=(c-v)/A,this._x=(o+h)/A,this._y=.25*A,this._z=(m+M)/A}else{const A=2*Math.sqrt(1+w-r-f);this._w=(h-o)/A,this._x=(c+v)/A,this._y=(m+M)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(at(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const o=Math.min(1,t/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,o=e._y,c=e._z,h=e._w,f=t._x,m=t._y,v=t._z,M=t._w;return this._x=r*M+h*f+o*v-c*m,this._y=o*M+h*m+c*f-r*v,this._z=c*M+h*v+r*m-o*f,this._w=h*M-r*f-o*m-c*v,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,o=this._y,c=this._z,h=this._w;let f=h*e._w+r*e._x+o*e._y+c*e._z;if(f<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,f=-f):this.copy(e),f>=1)return this._w=h,this._x=r,this._y=o,this._z=c,this;const m=1-f*f;if(m<=Number.EPSILON){const A=1-t;return this._w=A*h+t*this._w,this._x=A*r+t*this._x,this._y=A*o+t*this._y,this._z=A*c+t*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(m),M=Math.atan2(v,f),w=Math.sin((1-t)*M)/v,S=Math.sin(t*M)/v;return this._w=h*w+this._w*S,this._x=r*w+this._x*S,this._y=o*w+this._y*S,this._z=c*w+this._z*S,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(t*Math.cos(o),r*Math.sin(c),r*Math.cos(c),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Zr.prototype.isQuaternion=!0;class re{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Kl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Kl.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[3]*r+c[6]*o,this.y=c[1]*t+c[4]*r+c[7]*o,this.z=c[2]*t+c[5]*r+c[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,o=this.z,c=e.elements,h=1/(c[3]*t+c[7]*r+c[11]*o+c[15]);return this.x=(c[0]*t+c[4]*r+c[8]*o+c[12])*h,this.y=(c[1]*t+c[5]*r+c[9]*o+c[13])*h,this.z=(c[2]*t+c[6]*r+c[10]*o+c[14])*h,this}applyQuaternion(e){const t=this.x,r=this.y,o=this.z,c=e.x,h=e.y,f=e.z,m=e.w,v=m*t+h*o-f*r,M=m*r+f*t-c*o,w=m*o+c*r-h*t,S=-c*t-h*r-f*o;return this.x=v*m+S*-c+M*-f-w*-h,this.y=M*m+S*-h+w*-c-v*-f,this.z=w*m+S*-f+v*-h-M*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,o=this.z,c=e.elements;return this.x=c[0]*t+c[4]*r+c[8]*o,this.y=c[1]*t+c[5]*r+c[9]*o,this.z=c[2]*t+c[6]*r+c[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,o=e.y,c=e.z,h=t.x,f=t.y,m=t.z;return this.x=o*m-c*f,this.y=c*h-r*m,this.z=r*f-o*h,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Hs.copy(this).projectOnVector(e),this.sub(Hs)}reflect(e){return this.sub(Hs.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(at(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return t*t+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const o=Math.sin(t)*e;return this.x=o*Math.sin(r),this.y=Math.cos(t)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-Ob(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}re.prototype.isVector3=!0;const Hs=new re,Kl=new Zr;class Is{constructor(e=new re(1/0,1/0,1/0),t=new re(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,o=1/0,c=-1/0,h=-1/0,f=-1/0;for(let m=0,v=e.length;m<v;m+=3){const M=e[m],w=e[m+1],S=e[m+2];M<t&&(t=M),w<r&&(r=w),S<o&&(o=S),M>c&&(c=M),w>h&&(h=w),S>f&&(f=S)}return this.min.set(t,r,o),this.max.set(c,h,f),this}setFromBufferAttribute(e){let t=1/0,r=1/0,o=1/0,c=-1/0,h=-1/0,f=-1/0;for(let m=0,v=e.count;m<v;m++){const M=e.getX(m),w=e.getY(m),S=e.getZ(m);M<t&&(t=M),w<r&&(r=w),S<o&&(o=S),M>c&&(c=M),w>h&&(h=w),S>f&&(f=S)}return this.min.set(t,r,o),this.max.set(c,h,f),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=uo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const c=r.attributes.position;for(let h=0,f=c.count;h<f;h++)uo.fromBufferAttribute(c,h).applyMatrix4(e.matrixWorld),this.expandByPoint(uo)}else null===r.boundingBox&&r.computeBoundingBox(),Ea.copy(r.boundingBox),Ea.applyMatrix4(e.matrixWorld),this.union(Ea);const o=e.children;for(let c=0,h=o.length;c<h;c++)this.expandByObject(o[c],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,uo),uo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sa),jo.subVectors(this.max,Sa),Mo.subVectors(e.a,Sa),ia.subVectors(e.b,Sa),Eo.subVectors(e.c,Sa),Zo.subVectors(ia,Mo),So.subVectors(Eo,ia),Ks.subVectors(Mo,Eo);let t=[0,-Zo.z,Zo.y,0,-So.z,So.y,0,-Ks.z,Ks.y,Zo.z,0,-Zo.x,So.z,0,-So.x,Ks.z,0,-Ks.x,-Zo.y,Zo.x,0,-So.y,So.x,0,-Ks.y,Ks.x,0];return!(!Ca(t,Mo,ia,Eo,jo)||(t=[1,0,0,0,1,0,0,0,1],!Ca(t,Mo,ia,Eo,jo)))&&(ho.crossVectors(Zo,So),t=[ho.x,ho.y,ho.z],Ca(t,Mo,ia,Eo,jo))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return uo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(uo).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(co[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),co[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),co[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),co[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),co[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),co[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),co[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),co[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(co)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Is.prototype.isBox3=!0;const co=[new re,new re,new re,new re,new re,new re,new re,new re],uo=new re,Ea=new Is,Mo=new re,ia=new re,Eo=new re,Zo=new re,So=new re,Ks=new re,Sa=new re,jo=new re,ho=new re,qo=new re;function Ca(d,e,t,r,o){for(let c=0,h=d.length-3;c<=h;c+=3){qo.fromArray(d,c);const f=o.x*Math.abs(qo.x)+o.y*Math.abs(qo.y)+o.z*Math.abs(qo.z),m=e.dot(qo),v=t.dot(qo),M=r.dot(qo);if(Math.max(-Math.max(m,v,M),Math.min(m,v,M))>f)return!1}return!0}const Ql=new Is,ec=new re,Dr=new re,Qs=new re;class Ii{constructor(e=new re,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):Ql.setFromPoints(e).getCenter(r);let o=0;for(let c=0,h=e.length;c<h;c++)o=Math.max(o,r.distanceToSquared(e[c]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Qs.subVectors(e,this.center);const t=Qs.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),o=.5*(r-this.radius);this.center.add(Qs.multiplyScalar(o/r)),this.radius+=o}return this}union(e){return!0===this.center.equals(e.center)?Dr.set(0,0,1).multiplyScalar(e.radius):Dr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ec.copy(e.center).add(Dr)),this.expandByPoint(ec.copy(e.center).sub(Dr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Co=new re,Ms=new re,$a=new re,ra=new re,es=new re,yl=new re,eo=new re;class Ls{constructor(e=new re,t=new re(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Co)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Co.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Co.copy(this.direction).multiplyScalar(t).add(this.origin),Co.distanceToSquared(e))}distanceSqToSegment(e,t,r,o){Ms.copy(e).add(t).multiplyScalar(.5),$a.copy(t).sub(e).normalize(),ra.copy(this.origin).sub(Ms);const c=.5*e.distanceTo(t),h=-this.direction.dot($a),f=ra.dot(this.direction),m=-ra.dot($a),v=ra.lengthSq(),M=Math.abs(1-h*h);let w,S,A,N;if(M>0)if(w=h*m-f,S=h*f-m,N=c*M,w>=0)if(S>=-N)if(S<=N){const H=1/M;w*=H,S*=H,A=w*(w+h*S+2*f)+S*(h*w+S+2*m)+v}else S=c,w=Math.max(0,-(h*S+f)),A=-w*w+S*(S+2*m)+v;else S=-c,w=Math.max(0,-(h*S+f)),A=-w*w+S*(S+2*m)+v;else S<=-N?(w=Math.max(0,-(-h*c+f)),S=w>0?-c:Math.min(Math.max(-c,-m),c),A=-w*w+S*(S+2*m)+v):S<=N?(w=0,S=Math.min(Math.max(-c,-m),c),A=S*(S+2*m)+v):(w=Math.max(0,-(h*c+f)),S=w>0?c:Math.min(Math.max(-c,-m),c),A=-w*w+S*(S+2*m)+v);else S=h>0?-c:c,w=Math.max(0,-(h*S+f)),A=-w*w+S*(S+2*m)+v;return r&&r.copy(this.direction).multiplyScalar(w).add(this.origin),o&&o.copy($a).multiplyScalar(S).add(Ms),A}intersectSphere(e,t){Co.subVectors(e.center,this.origin);const r=Co.dot(this.direction),o=Co.dot(Co)-r*r,c=e.radius*e.radius;if(o>c)return null;const h=Math.sqrt(c-o),f=r-h,m=r+h;return f<0&&m<0?null:this.at(f<0?m:f,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,o,c,h,f,m;const v=1/this.direction.x,M=1/this.direction.y,w=1/this.direction.z,S=this.origin;return v>=0?(r=(e.min.x-S.x)*v,o=(e.max.x-S.x)*v):(r=(e.max.x-S.x)*v,o=(e.min.x-S.x)*v),M>=0?(c=(e.min.y-S.y)*M,h=(e.max.y-S.y)*M):(c=(e.max.y-S.y)*M,h=(e.min.y-S.y)*M),r>h||c>o||((c>r||r!=r)&&(r=c),(h<o||o!=o)&&(o=h),w>=0?(f=(e.min.z-S.z)*w,m=(e.max.z-S.z)*w):(f=(e.max.z-S.z)*w,m=(e.min.z-S.z)*w),r>m||f>o)||((f>r||r!=r)&&(r=f),(m<o||o!=o)&&(o=m),o<0)?null:this.at(r>=0?r:o,t)}intersectsBox(e){return null!==this.intersectBox(e,Co)}intersectTriangle(e,t,r,o,c){es.subVectors(t,e),yl.subVectors(r,e),eo.crossVectors(es,yl);let f,h=this.direction.dot(eo);if(h>0){if(o)return null;f=1}else{if(!(h<0))return null;f=-1,h=-h}ra.subVectors(this.origin,e);const m=f*this.direction.dot(yl.crossVectors(ra,yl));if(m<0)return null;const v=f*this.direction.dot(es.cross(ra));if(v<0||m+v>h)return null;const M=-f*ra.dot(eo);return M<0?null:this.at(M/h,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Qt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,o,c,h,f,m,v,M,w,S,A,N,H,K){const B=this.elements;return B[0]=e,B[4]=t,B[8]=r,B[12]=o,B[1]=c,B[5]=h,B[9]=f,B[13]=m,B[2]=v,B[6]=M,B[10]=w,B[14]=S,B[3]=A,B[7]=N,B[11]=H,B[15]=K,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Qt).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,o=1/Os.setFromMatrixColumn(e,0).length(),c=1/Os.setFromMatrixColumn(e,1).length(),h=1/Os.setFromMatrixColumn(e,2).length();return t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,t[3]=0,t[4]=r[4]*c,t[5]=r[5]*c,t[6]=r[6]*c,t[7]=0,t[8]=r[8]*h,t[9]=r[9]*h,t[10]=r[10]*h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,o=e.y,c=e.z,h=Math.cos(r),f=Math.sin(r),m=Math.cos(o),v=Math.sin(o),M=Math.cos(c),w=Math.sin(c);if("XYZ"===e.order){const S=h*M,A=h*w,N=f*M,H=f*w;t[0]=m*M,t[4]=-m*w,t[8]=v,t[1]=A+N*v,t[5]=S-H*v,t[9]=-f*m,t[2]=H-S*v,t[6]=N+A*v,t[10]=h*m}else if("YXZ"===e.order){const S=m*M,A=m*w,N=v*M,H=v*w;t[0]=S+H*f,t[4]=N*f-A,t[8]=h*v,t[1]=h*w,t[5]=h*M,t[9]=-f,t[2]=A*f-N,t[6]=H+S*f,t[10]=h*m}else if("ZXY"===e.order){const S=m*M,A=m*w,N=v*M,H=v*w;t[0]=S-H*f,t[4]=-h*w,t[8]=N+A*f,t[1]=A+N*f,t[5]=h*M,t[9]=H-S*f,t[2]=-h*v,t[6]=f,t[10]=h*m}else if("ZYX"===e.order){const S=h*M,A=h*w,N=f*M,H=f*w;t[0]=m*M,t[4]=N*v-A,t[8]=S*v+H,t[1]=m*w,t[5]=H*v+S,t[9]=A*v-N,t[2]=-v,t[6]=f*m,t[10]=h*m}else if("YZX"===e.order){const S=h*m,A=h*v,N=f*m,H=f*v;t[0]=m*M,t[4]=H-S*w,t[8]=N*w+A,t[1]=w,t[5]=h*M,t[9]=-f*M,t[2]=-v*M,t[6]=A*w+N,t[10]=S-H*w}else if("XZY"===e.order){const S=h*m,A=h*v,N=f*m,H=f*v;t[0]=m*M,t[4]=-w,t[8]=v*M,t[1]=S*w+H,t[5]=h*M,t[9]=A*w-N,t[2]=N*w-A,t[6]=f*M,t[10]=H*w+S}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(vu,e,fo)}lookAt(e,t,r){const o=this.elements;return Es.subVectors(e,t),0===Es.lengthSq()&&(Es.z=1),Es.normalize(),zs.crossVectors(r,Es),0===zs.lengthSq()&&(1===Math.abs(r.z)?Es.x+=1e-4:Es.z+=1e-4,Es.normalize(),zs.crossVectors(r,Es)),zs.normalize(),Ya.crossVectors(Es,zs),o[0]=zs.x,o[4]=Ya.x,o[8]=Es.x,o[1]=zs.y,o[5]=Ya.y,o[9]=Es.y,o[2]=zs.z,o[6]=Ya.z,o[10]=Es.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,o=t.elements,c=this.elements,h=r[0],f=r[4],m=r[8],v=r[12],M=r[1],w=r[5],S=r[9],A=r[13],N=r[2],H=r[6],K=r[10],B=r[14],D=r[3],ie=r[7],$=r[11],ae=r[15],me=o[0],be=o[4],Le=o[8],lt=o[12],Ye=o[1],te=o[5],De=o[9],He=o[13],je=o[2],Je=o[6],Ze=o[10],vt=o[14],At=o[3],gn=o[7],gt=o[11],Et=o[15];return c[0]=h*me+f*Ye+m*je+v*At,c[4]=h*be+f*te+m*Je+v*gn,c[8]=h*Le+f*De+m*Ze+v*gt,c[12]=h*lt+f*He+m*vt+v*Et,c[1]=M*me+w*Ye+S*je+A*At,c[5]=M*be+w*te+S*Je+A*gn,c[9]=M*Le+w*De+S*Ze+A*gt,c[13]=M*lt+w*He+S*vt+A*Et,c[2]=N*me+H*Ye+K*je+B*At,c[6]=N*be+H*te+K*Je+B*gn,c[10]=N*Le+H*De+K*Ze+B*gt,c[14]=N*lt+H*He+K*vt+B*Et,c[3]=D*me+ie*Ye+$*je+ae*At,c[7]=D*be+ie*te+$*Je+ae*gn,c[11]=D*Le+ie*De+$*Ze+ae*gt,c[15]=D*lt+ie*He+$*vt+ae*Et,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],o=e[8],c=e[12],h=e[1],f=e[5],m=e[9],v=e[13],M=e[2],w=e[6],S=e[10],A=e[14];return e[3]*(+c*m*w-o*v*w-c*f*S+r*v*S+o*f*A-r*m*A)+e[7]*(+t*m*A-t*v*S+c*h*S-o*h*A+o*v*M-c*m*M)+e[11]*(+t*v*w-t*f*A-c*h*w+r*h*A+c*f*M-r*v*M)+e[15]*(-o*f*M-t*m*w+t*f*S+o*h*w-r*h*S+r*m*M)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],o=e[2],c=e[3],h=e[4],f=e[5],m=e[6],v=e[7],M=e[8],w=e[9],S=e[10],A=e[11],N=e[12],H=e[13],K=e[14],B=e[15],D=w*K*v-H*S*v+H*m*A-f*K*A-w*m*B+f*S*B,ie=N*S*v-M*K*v-N*m*A+h*K*A+M*m*B-h*S*B,$=M*H*v-N*w*v+N*f*A-h*H*A-M*f*B+h*w*B,ae=N*w*m-M*H*m-N*f*S+h*H*S+M*f*K-h*w*K,me=t*D+r*ie+o*$+c*ae;if(0===me)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const be=1/me;return e[0]=D*be,e[1]=(H*S*c-w*K*c-H*o*A+r*K*A+w*o*B-r*S*B)*be,e[2]=(f*K*c-H*m*c+H*o*v-r*K*v-f*o*B+r*m*B)*be,e[3]=(w*m*c-f*S*c-w*o*v+r*S*v+f*o*A-r*m*A)*be,e[4]=ie*be,e[5]=(M*K*c-N*S*c+N*o*A-t*K*A-M*o*B+t*S*B)*be,e[6]=(N*m*c-h*K*c-N*o*v+t*K*v+h*o*B-t*m*B)*be,e[7]=(h*S*c-M*m*c+M*o*v-t*S*v-h*o*A+t*m*A)*be,e[8]=$*be,e[9]=(N*w*c-M*H*c-N*r*A+t*H*A+M*r*B-t*w*B)*be,e[10]=(h*H*c-N*f*c+N*r*v-t*H*v-h*r*B+t*f*B)*be,e[11]=(M*f*c-h*w*c-M*r*v+t*w*v+h*r*A-t*f*A)*be,e[12]=ae*be,e[13]=(M*H*o-N*w*o+N*r*S-t*H*S-M*r*K+t*w*K)*be,e[14]=(N*f*o-h*H*o-N*r*m+t*H*m+h*r*K-t*f*K)*be,e[15]=(h*w*o-M*f*o+M*r*m-t*w*m-h*r*S+t*f*S)*be,this}scale(e){const t=this.elements,r=e.x,o=e.y,c=e.z;return t[0]*=r,t[4]*=o,t[8]*=c,t[1]*=r,t[5]*=o,t[9]*=c,t[2]*=r,t[6]*=o,t[10]*=c,t[3]*=r,t[7]*=o,t[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),o=Math.sin(t),c=1-r,h=e.x,f=e.y,m=e.z,v=c*h,M=c*f;return this.set(v*h+r,v*f-o*m,v*m+o*f,0,v*f+o*m,M*f+r,M*m-o*h,0,v*m-o*f,M*m+o*h,c*m*m+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,o,c,h){return this.set(1,r,c,0,e,1,h,0,t,o,1,0,0,0,0,1),this}compose(e,t,r){const o=this.elements,c=t._x,h=t._y,f=t._z,m=t._w,v=c+c,M=h+h,w=f+f,S=c*v,A=c*M,N=c*w,H=h*M,K=h*w,B=f*w,D=m*v,ie=m*M,$=m*w,ae=r.x,me=r.y,be=r.z;return o[0]=(1-(H+B))*ae,o[1]=(A+$)*ae,o[2]=(N-ie)*ae,o[3]=0,o[4]=(A-$)*me,o[5]=(1-(S+B))*me,o[6]=(K+D)*me,o[7]=0,o[8]=(N+ie)*be,o[9]=(K-D)*be,o[10]=(1-(S+H))*be,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,r){const o=this.elements;let c=Os.set(o[0],o[1],o[2]).length();const h=Os.set(o[4],o[5],o[6]).length(),f=Os.set(o[8],o[9],o[10]).length();this.determinant()<0&&(c=-c),e.x=o[12],e.y=o[13],e.z=o[14],ts.copy(this);const v=1/c,M=1/h,w=1/f;return ts.elements[0]*=v,ts.elements[1]*=v,ts.elements[2]*=v,ts.elements[4]*=M,ts.elements[5]*=M,ts.elements[6]*=M,ts.elements[8]*=w,ts.elements[9]*=w,ts.elements[10]*=w,t.setFromRotationMatrix(ts),r.x=c,r.y=h,r.z=f,this}makePerspective(e,t,r,o,c,h){void 0===h&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const f=this.elements,v=2*c/(r-o),M=(t+e)/(t-e),w=(r+o)/(r-o),S=-(h+c)/(h-c),A=-2*h*c/(h-c);return f[0]=2*c/(t-e),f[4]=0,f[8]=M,f[12]=0,f[1]=0,f[5]=v,f[9]=w,f[13]=0,f[2]=0,f[6]=0,f[10]=S,f[14]=A,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,r,o,c,h){const f=this.elements,m=1/(t-e),v=1/(r-o),M=1/(h-c),w=(t+e)*m,S=(r+o)*v,A=(h+c)*M;return f[0]=2*m,f[4]=0,f[8]=0,f[12]=-w,f[1]=0,f[5]=2*v,f[9]=0,f[13]=-S,f[2]=0,f[6]=0,f[10]=-2*M,f[14]=-A,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let o=0;o<16;o++)if(t[o]!==r[o])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Qt.prototype.isMatrix4=!0;const Os=new re,ts=new Qt,vu=new re(0,0,0),fo=new re(1,1,1),zs=new re,Ya=new re,Es=new re,$o=new Qt,tc=new Zr;class Gs{constructor(e=0,t=0,r=0,o=Gs.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,o=this._order){return this._x=e,this._y=t,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const o=e.elements,c=o[0],h=o[4],f=o[8],m=o[1],v=o[5],M=o[9],w=o[2],S=o[6],A=o[10];switch(t){case"XYZ":this._y=Math.asin(at(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-M,A),this._z=Math.atan2(-h,c)):(this._x=Math.atan2(S,v),this._z=0);break;case"YXZ":this._x=Math.asin(-at(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(f,A),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-w,c),this._z=0);break;case"ZXY":this._x=Math.asin(at(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-w,A),this._z=Math.atan2(-h,v)):(this._y=0,this._z=Math.atan2(m,c));break;case"ZYX":this._y=Math.asin(-at(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(S,A),this._z=Math.atan2(m,c)):(this._x=0,this._z=Math.atan2(-h,v));break;case"YZX":this._z=Math.asin(at(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-M,v),this._y=Math.atan2(-w,c)):(this._x=0,this._y=Math.atan2(f,A));break;case"XZY":this._z=Math.asin(-at(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(S,v),this._y=Math.atan2(f,c)):(this._x=Math.atan2(-M,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return $o.makeRotationFromQuaternion(e),this.setFromRotationMatrix($o,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tc.setFromEuler(this),this.setFromQuaternion(tc,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new re(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Gs.prototype.isEuler=!0,Gs.DefaultOrder="XYZ",Gs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class _l{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Dc=0;const yu=new re,To=new Zr,Ao=new Qt,Ja=new re,Do=new re,nc=new re,Rc=new Zr,Yo=new re(1,0,0),ic=new re(0,1,0),Ro=new re(0,0,1),rc={type:"added"},Xa={type:"removed"};class _i extends k{constructor(){super(),Object.defineProperty(this,"id",{value:Dc++}),this.uuid=ze(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_i.DefaultUp.clone();const e=new re,t=new Gs,r=new Zr,o=new re(1,1,1);t._onChange(function c(){r.setFromEuler(t,!1)}),r._onChange(function h(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Qt},normalMatrix:{value:new vr}}),this.matrix=new Qt,this.matrixWorld=new Qt,this.matrixAutoUpdate=_i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _l,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return To.setFromAxisAngle(e,t),this.quaternion.multiply(To),this}rotateOnWorldAxis(e,t){return To.setFromAxisAngle(e,t),this.quaternion.premultiply(To),this}rotateX(e){return this.rotateOnAxis(Yo,e)}rotateY(e){return this.rotateOnAxis(ic,e)}rotateZ(e){return this.rotateOnAxis(Ro,e)}translateOnAxis(e,t){return yu.copy(e).applyQuaternion(this.quaternion),this.position.add(yu.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Yo,e)}translateY(e){return this.translateOnAxis(ic,e)}translateZ(e){return this.translateOnAxis(Ro,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ao.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Ja.copy(e):Ja.set(e,t,r);const o=this.parent;this.updateWorldMatrix(!0,!1),Do.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ao.lookAt(Do,Ja,this.up):Ao.lookAt(Ja,Do,this.up),this.quaternion.setFromRotationMatrix(Ao),o&&(Ao.extractRotation(o.matrixWorld),To.setFromRotationMatrix(Ao),this.quaternion.premultiply(To.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rc)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Xa)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Xa)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ao.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ao.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ao),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,o=this.children.length;r<o;r++){const h=this.children[r].getObjectByProperty(e,t);if(void 0!==h)return h}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Do,e,nc),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Do,Rc,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,o=t.length;r<o;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const o=this.children;for(let c=0,h=o.length;c<h;c++)o[c].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function c(f,m){return void 0===f[m.uuid]&&(f[m.uuid]=m.toJSON(e)),m.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=c(e.geometries,this.geometry);const f=this.geometry.parameters;if(void 0!==f&&void 0!==f.shapes){const m=f.shapes;if(Array.isArray(m))for(let v=0,M=m.length;v<M;v++)c(e.shapes,m[v]);else c(e.shapes,m)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const f=[];for(let m=0,v=this.material.length;m<v;m++)f.push(c(e.materials,this.material[m]));o.material=f}else o.material=c(e.materials,this.material);if(this.children.length>0){o.children=[];for(let f=0;f<this.children.length;f++)o.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let f=0;f<this.animations.length;f++)o.animations.push(c(e.animations,this.animations[f]))}if(t){const f=h(e.geometries),m=h(e.materials),v=h(e.textures),M=h(e.images),w=h(e.shapes),S=h(e.skeletons),A=h(e.animations);f.length>0&&(r.geometries=f),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),M.length>0&&(r.images=M),w.length>0&&(r.shapes=w),S.length>0&&(r.skeletons=S),A.length>0&&(r.animations=A)}return r.object=o,r;function h(f){const m=[];for(const v in f){const M=f[v];delete M.metadata,m.push(M)}return m}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}_i.DefaultUp=new re(0,1,0),_i.DefaultMatrixAutoUpdate=!0,_i.prototype.isObject3D=!0;const Ws=new re,Po=new re,T=new re,x=new re,_=new re,F=new re,z=new re,J=new re,ue=new re,we=new re;class Ve{constructor(e=new re,t=new re,r=new re){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,o){o.subVectors(r,t),Ws.subVectors(e,t),o.cross(Ws);const c=o.lengthSq();return c>0?o.multiplyScalar(1/Math.sqrt(c)):o.set(0,0,0)}static getBarycoord(e,t,r,o,c){Ws.subVectors(o,t),Po.subVectors(r,t),T.subVectors(e,t);const h=Ws.dot(Ws),f=Ws.dot(Po),m=Ws.dot(T),v=Po.dot(Po),M=Po.dot(T),w=h*v-f*f;if(0===w)return c.set(-2,-1,-1);const S=1/w,A=(v*m-f*M)*S,N=(h*M-f*m)*S;return c.set(1-A-N,N,A)}static containsPoint(e,t,r,o){return this.getBarycoord(e,t,r,o,x),x.x>=0&&x.y>=0&&x.x+x.y<=1}static getUV(e,t,r,o,c,h,f,m){return this.getBarycoord(e,t,r,o,x),m.set(0,0),m.addScaledVector(c,x.x),m.addScaledVector(h,x.y),m.addScaledVector(f,x.z),m}static isFrontFacing(e,t,r,o){return Ws.subVectors(r,t),Po.subVectors(e,t),Ws.cross(Po).dot(o)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,o){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,r,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ws.subVectors(this.c,this.b),Po.subVectors(this.a,this.b),.5*Ws.cross(Po).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ve.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ve.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,o,c){return Ve.getUV(e,this.a,this.b,this.c,t,r,o,c)}containsPoint(e){return Ve.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ve.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,o=this.b,c=this.c;let h,f;_.subVectors(o,r),F.subVectors(c,r),J.subVectors(e,r);const m=_.dot(J),v=F.dot(J);if(m<=0&&v<=0)return t.copy(r);ue.subVectors(e,o);const M=_.dot(ue),w=F.dot(ue);if(M>=0&&w<=M)return t.copy(o);const S=m*w-M*v;if(S<=0&&m>=0&&M<=0)return h=m/(m-M),t.copy(r).addScaledVector(_,h);we.subVectors(e,c);const A=_.dot(we),N=F.dot(we);if(N>=0&&A<=N)return t.copy(c);const H=A*v-m*N;if(H<=0&&v>=0&&N<=0)return f=v/(v-N),t.copy(r).addScaledVector(F,f);const K=M*N-A*w;if(K<=0&&w-M>=0&&A-N>=0)return z.subVectors(c,o),f=(w-M)/(w-M+(A-N)),t.copy(o).addScaledVector(z,f);const B=1/(K+H+S);return h=H*B,f=S*B,t.copy(r).addScaledVector(_,h).addScaledVector(F,f)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Jt=0;class Sn extends k{constructor(){super(),Object.defineProperty(this,"id",{value:Jt++}),this.uuid=ze(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=it,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const o=this[t];void 0!==o?o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function o(c){const h=[];for(const f in c){const m=c[f];delete m.metadata,h.push(m)}return h}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),this.side!==it&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const c=o(e.textures),h=o(e.images);c.length>0&&(r.textures=c),h.length>0&&(r.images=h)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const o=t.length;r=new Array(o);for(let c=0;c!==o;++c)r[c]=t[c].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Sn.prototype.isMaterial=!0;class rn extends Sn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}rn.prototype.isMeshBasicMaterial=!0;const yn=new re,Ai=new _t;class ci{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=$s,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let o=0,c=this.itemSize;o<c;o++)this.array[e+o]=t.array[r+o];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),h=new Ht),t[r++]=h.r,t[r++]=h.g,t[r++]=h.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),h=new _t),t[r++]=h.x,t[r++]=h.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),h=new re),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let o=0,c=e.length;o<c;o++){let h=e[o];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),h=new wi),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z,t[r++]=h.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix3(e),this.setXY(t,Ai.x,Ai.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)yn.fromBufferAttribute(this,t),yn.applyMatrix3(e),this.setXYZ(t,yn.x,yn.y,yn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)yn.x=this.getX(t),yn.y=this.getY(t),yn.z=this.getZ(t),yn.applyMatrix4(e),this.setXYZ(t,yn.x,yn.y,yn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)yn.x=this.getX(t),yn.y=this.getY(t),yn.z=this.getZ(t),yn.applyNormalMatrix(e),this.setXYZ(t,yn.x,yn.y,yn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)yn.x=this.getX(t),yn.y=this.getY(t),yn.z=this.getZ(t),yn.transformDirection(e),this.setXYZ(t,yn.x,yn.y,yn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,t,r,o,c){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==$s&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}ci.prototype.isBufferAttribute=!0;class ns extends ci{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Qa extends ci{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class Pc extends ci{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class tn extends ci{constructor(e,t,r){super(new Float32Array(e),t,r)}}let bl=0;const to=new Qt,sc=new _i,Oo=new re,po=new Is,oc=new Is,ii=new re;class Pn extends k{constructor(){super(),Object.defineProperty(this,"id",{value:bl++}),this.uuid=ze(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Ac(e)?Qa:ns)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const c=(new vr).getNormalMatrix(e);r.applyNormalMatrix(c),r.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(e),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return to.makeRotationFromQuaternion(e),this.applyMatrix4(to),this}rotateX(e){return to.makeRotationX(e),this.applyMatrix4(to),this}rotateY(e){return to.makeRotationY(e),this.applyMatrix4(to),this}rotateZ(e){return to.makeRotationZ(e),this.applyMatrix4(to),this}translate(e,t,r){return to.makeTranslation(e,t,r),this.applyMatrix4(to),this}scale(e,t,r){return to.makeScale(e,t,r),this.applyMatrix4(to),this}lookAt(e){return sc.lookAt(e),sc.updateMatrix(),this.applyMatrix4(sc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oo).negate(),this.translate(Oo.x,Oo.y,Oo.z),this}setFromPoints(e){const t=[];for(let r=0,o=e.length;r<o;r++){const c=e[r];t.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new tn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Is);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++)po.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(ii.addVectors(this.boundingBox.min,po.min),this.boundingBox.expandByPoint(ii),ii.addVectors(this.boundingBox.max,po.max),this.boundingBox.expandByPoint(ii)):(this.boundingBox.expandByPoint(po.min),this.boundingBox.expandByPoint(po.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ii);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new re,1/0);if(e){const r=this.boundingSphere.center;if(po.setFromBufferAttribute(e),t)for(let c=0,h=t.length;c<h;c++)oc.setFromBufferAttribute(t[c]),this.morphTargetsRelative?(ii.addVectors(po.min,oc.min),po.expandByPoint(ii),ii.addVectors(po.max,oc.max),po.expandByPoint(ii)):(po.expandByPoint(oc.min),po.expandByPoint(oc.max));po.getCenter(r);let o=0;for(let c=0,h=e.count;c<h;c++)ii.fromBufferAttribute(e,c),o=Math.max(o,r.distanceToSquared(ii));if(t)for(let c=0,h=t.length;c<h;c++){const f=t[c],m=this.morphTargetsRelative;for(let v=0,M=f.count;v<M;v++)ii.fromBufferAttribute(f,v),m&&(Oo.fromBufferAttribute(e,v),ii.add(Oo)),o=Math.max(o,r.distanceToSquared(ii))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,o=t.position.array,c=t.normal.array,h=t.uv.array,f=o.length/3;void 0===t.tangent&&this.setAttribute("tangent",new ci(new Float32Array(4*f),4));const m=t.tangent.array,v=[],M=[];for(let Ye=0;Ye<f;Ye++)v[Ye]=new re,M[Ye]=new re;const w=new re,S=new re,A=new re,N=new _t,H=new _t,K=new _t,B=new re,D=new re;function ie(Ye,te,De){w.fromArray(o,3*Ye),S.fromArray(o,3*te),A.fromArray(o,3*De),N.fromArray(h,2*Ye),H.fromArray(h,2*te),K.fromArray(h,2*De),S.sub(w),A.sub(w),H.sub(N),K.sub(N);const He=1/(H.x*K.y-K.x*H.y);!isFinite(He)||(B.copy(S).multiplyScalar(K.y).addScaledVector(A,-H.y).multiplyScalar(He),D.copy(A).multiplyScalar(H.x).addScaledVector(S,-K.x).multiplyScalar(He),v[Ye].add(B),v[te].add(B),v[De].add(B),M[Ye].add(D),M[te].add(D),M[De].add(D))}let $=this.groups;0===$.length&&($=[{start:0,count:r.length}]);for(let Ye=0,te=$.length;Ye<te;++Ye){const De=$[Ye],He=De.start;for(let Je=He,Ze=He+De.count;Je<Ze;Je+=3)ie(r[Je+0],r[Je+1],r[Je+2])}const ae=new re,me=new re,be=new re,Le=new re;function lt(Ye){be.fromArray(c,3*Ye),Le.copy(be);const te=v[Ye];ae.copy(te),ae.sub(be.multiplyScalar(be.dot(te))).normalize(),me.crossVectors(Le,te);const He=me.dot(M[Ye])<0?-1:1;m[4*Ye]=ae.x,m[4*Ye+1]=ae.y,m[4*Ye+2]=ae.z,m[4*Ye+3]=He}for(let Ye=0,te=$.length;Ye<te;++Ye){const De=$[Ye],He=De.start;for(let Je=He,Ze=He+De.count;Je<Ze;Je+=3)lt(r[Je+0]),lt(r[Je+1]),lt(r[Je+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new ci(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let S=0,A=r.count;S<A;S++)r.setXYZ(S,0,0,0);const o=new re,c=new re,h=new re,f=new re,m=new re,v=new re,M=new re,w=new re;if(e)for(let S=0,A=e.count;S<A;S+=3){const N=e.getX(S+0),H=e.getX(S+1),K=e.getX(S+2);o.fromBufferAttribute(t,N),c.fromBufferAttribute(t,H),h.fromBufferAttribute(t,K),M.subVectors(h,c),w.subVectors(o,c),M.cross(w),f.fromBufferAttribute(r,N),m.fromBufferAttribute(r,H),v.fromBufferAttribute(r,K),f.add(M),m.add(M),v.add(M),r.setXYZ(N,f.x,f.y,f.z),r.setXYZ(H,m.x,m.y,m.z),r.setXYZ(K,v.x,v.y,v.z)}else for(let S=0,A=t.count;S<A;S+=3)o.fromBufferAttribute(t,S+0),c.fromBufferAttribute(t,S+1),h.fromBufferAttribute(t,S+2),M.subVectors(h,c),w.subVectors(o,c),M.cross(w),r.setXYZ(S+0,M.x,M.y,M.z),r.setXYZ(S+1,M.x,M.y,M.z),r.setXYZ(S+2,M.x,M.y,M.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const o in r){if(void 0===e.attributes[o])continue;const h=r[o].array,f=e.attributes[o],m=f.array,v=f.itemSize*t,M=Math.min(m.length,h.length-v);for(let w=0,S=v;w<M;w++,S++)h[S]=m[w]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ii.fromBufferAttribute(e,t),ii.normalize(),e.setXYZ(t,ii.x,ii.y,ii.z)}toNonIndexed(){function e(f,m){const v=f.array,M=f.itemSize,w=f.normalized,S=new v.constructor(m.length*M);let A=0,N=0;for(let H=0,K=m.length;H<K;H++){A=f.isInterleavedBufferAttribute?m[H]*f.data.stride+f.offset:m[H]*M;for(let B=0;B<M;B++)S[N++]=v[A++]}return new ci(S,M,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Pn,r=this.index.array,o=this.attributes;for(const f in o){const v=e(o[f],r);t.setAttribute(f,v)}const c=this.morphAttributes;for(const f in c){const m=[],v=c[f];for(let M=0,w=v.length;M<w;M++){const A=e(v[M],r);m.push(A)}t.morphAttributes[f]=m}t.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let f=0,m=h.length;f<m;f++){const v=h[f];t.addGroup(v.start,v.count,v.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const v in m)void 0!==m[v]&&(e[v]=m[v]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const m in r)e.data.attributes[m]=r[m].toJSON(e.data);const o={};let c=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],M=[];for(let w=0,S=v.length;w<S;w++)M.push(v[w].toJSON(e.data));M.length>0&&(o[m]=M,c=!0)}c&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const o=e.attributes;for(const v in o)this.setAttribute(v,o[v].clone(t));const c=e.morphAttributes;for(const v in c){const M=[],w=c[v];for(let S=0,A=w.length;S<A;S++)M.push(w[S].clone(t));this.morphAttributes[v]=M}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let v=0,M=h.length;v<M;v++){const w=h[v];this.addGroup(w.start,w.count,w.materialIndex)}const f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());const m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Pn.prototype.isBufferGeometry=!0;const Lh=new Qt,ac=new Ls,Oh=new Ii,wl=new re,Ml=new re,El=new re,el=new re,_d=new re,Rr=new re,Sl=new re,Ta=new re,_u=new re,Ic=new _t,Cs=new _t,Zs=new _t,Lc=new re,tl=new re;class br extends _i{constructor(e=new Pn,t=new rn){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,o=this.material,c=this.matrixWorld;if(void 0===o||(null===r.boundingSphere&&r.computeBoundingSphere(),Oh.copy(r.boundingSphere),Oh.applyMatrix4(c),!1===e.ray.intersectsSphere(Oh))||(Lh.copy(c).invert(),ac.copy(e.ray).applyMatrix4(Lh),null!==r.boundingBox&&!1===ac.intersectsBox(r.boundingBox)))return;let h;if(r.isBufferGeometry){const f=r.index,m=r.attributes.position,v=r.morphAttributes.position,M=r.morphTargetsRelative,w=r.attributes.uv,S=r.attributes.uv2,A=r.groups,N=r.drawRange;if(null!==f)if(Array.isArray(o))for(let H=0,K=A.length;H<K;H++){const B=A[H],D=o[B.materialIndex];for(let ae=Math.max(B.start,N.start),me=Math.min(f.count,Math.min(B.start+B.count,N.start+N.count));ae<me;ae+=3){const be=f.getX(ae),Le=f.getX(ae+1),lt=f.getX(ae+2);h=Cl(this,D,e,ac,m,v,M,w,S,be,Le,lt),h&&(h.faceIndex=Math.floor(ae/3),h.face.materialIndex=B.materialIndex,t.push(h))}}else for(let B=Math.max(0,N.start),D=Math.min(f.count,N.start+N.count);B<D;B+=3){const ie=f.getX(B),$=f.getX(B+1),ae=f.getX(B+2);h=Cl(this,o,e,ac,m,v,M,w,S,ie,$,ae),h&&(h.faceIndex=Math.floor(B/3),t.push(h))}else if(void 0!==m)if(Array.isArray(o))for(let H=0,K=A.length;H<K;H++){const B=A[H],D=o[B.materialIndex];for(let ae=Math.max(B.start,N.start),me=Math.min(m.count,Math.min(B.start+B.count,N.start+N.count));ae<me;ae+=3)h=Cl(this,D,e,ac,m,v,M,w,S,ae,ae+1,ae+2),h&&(h.faceIndex=Math.floor(ae/3),h.face.materialIndex=B.materialIndex,t.push(h))}else for(let B=Math.max(0,N.start),D=Math.min(m.count,N.start+N.count);B<D;B+=3)h=Cl(this,o,e,ac,m,v,M,w,S,B,B+1,B+2),h&&(h.faceIndex=Math.floor(B/3),t.push(h))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Cl(d,e,t,r,o,c,h,f,m,v,M,w){wl.fromBufferAttribute(o,v),Ml.fromBufferAttribute(o,M),El.fromBufferAttribute(o,w);const S=d.morphTargetInfluences;if(c&&S){Sl.set(0,0,0),Ta.set(0,0,0),_u.set(0,0,0);for(let N=0,H=c.length;N<H;N++){const K=S[N],B=c[N];0!==K&&(el.fromBufferAttribute(B,v),_d.fromBufferAttribute(B,M),Rr.fromBufferAttribute(B,w),h?(Sl.addScaledVector(el,K),Ta.addScaledVector(_d,K),_u.addScaledVector(Rr,K)):(Sl.addScaledVector(el.sub(wl),K),Ta.addScaledVector(_d.sub(Ml),K),_u.addScaledVector(Rr.sub(El),K)))}wl.add(Sl),Ml.add(Ta),El.add(_u)}d.isSkinnedMesh&&(d.boneTransform(v,wl),d.boneTransform(M,Ml),d.boneTransform(w,El));const A=function xd(d,e,t,r,o,c,h,f){let m;if(m=1===e.side?r.intersectTriangle(h,c,o,!0,f):r.intersectTriangle(o,c,h,e.side!==Ge,f),null===m)return null;tl.copy(f),tl.applyMatrix4(d.matrixWorld);const v=t.ray.origin.distanceTo(tl);return v<t.near||v>t.far?null:{distance:v,point:tl.clone(),object:d}}(d,e,t,r,wl,Ml,El,Lc);if(A){f&&(Ic.fromBufferAttribute(f,v),Cs.fromBufferAttribute(f,M),Zs.fromBufferAttribute(f,w),A.uv=Ve.getUV(Lc,wl,Ml,El,Ic,Cs,Zs,new _t)),m&&(Ic.fromBufferAttribute(m,v),Cs.fromBufferAttribute(m,M),Zs.fromBufferAttribute(m,w),A.uv2=Ve.getUV(Lc,wl,Ml,El,Ic,Cs,Zs,new _t));const N={a:v,b:M,c:w,normal:new re,materialIndex:0};Ve.getNormal(wl,Ml,El,N.normal),A.face=N}return A}br.prototype.isMesh=!0;class b extends Pn{constructor(e=1,t=1,r=1,o=1,c=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:o,heightSegments:c,depthSegments:h};const f=this;o=Math.floor(o),c=Math.floor(c),h=Math.floor(h);const m=[],v=[],M=[],w=[];let S=0,A=0;function N(H,K,B,D,ie,$,ae,me,be,Le,lt){const Ye=$/be,te=ae/Le,De=$/2,He=ae/2,je=me/2,Je=be+1,Ze=Le+1;let vt=0,At=0;const gn=new re;for(let gt=0;gt<Ze;gt++){const Et=gt*te-He;for(let qt=0;qt<Je;qt++)gn[H]=(qt*Ye-De)*D,gn[K]=Et*ie,gn[B]=je,v.push(gn.x,gn.y,gn.z),gn[H]=0,gn[K]=0,gn[B]=me>0?1:-1,M.push(gn.x,gn.y,gn.z),w.push(qt/be),w.push(1-gt/Le),vt+=1}for(let gt=0;gt<Le;gt++)for(let Et=0;Et<be;Et++){const mn=S+Et+Je*(gt+1),Tn=S+(Et+1)+Je*(gt+1),ct=S+(Et+1)+Je*gt;m.push(S+Et+Je*gt,mn,ct),m.push(mn,Tn,ct),At+=6}f.addGroup(A,At,lt),A+=At,S+=vt}N("z","y","x",-1,-1,r,t,e,h,c,0),N("z","y","x",1,-1,r,t,-e,h,c,1),N("x","z","y",1,1,e,r,t,o,h,2),N("x","z","y",1,-1,e,r,-t,o,h,3),N("x","y","z",1,-1,e,t,r,o,c,4),N("x","y","z",-1,-1,e,t,-r,o,c,5),this.setIndex(m),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(M,3)),this.setAttribute("uv",new tn(w,2))}static fromJSON(e){return new b(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function P(d){const e={};for(const t in d){e[t]={};for(const r in d[t]){const o=d[t][r];e[t][r]=o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.clone():Array.isArray(o)?o.slice():o}}return e}function g(d){const e={};for(let t=0;t<d.length;t++){const r=P(d[t]);for(const o in r)e[o]=r[o]}return e}const R={clone:P,merge:g};class Ke extends Sn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=P(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const h=this.uniforms[o].value;t.uniforms[o]=h&&h.isTexture?{type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?{type:"c",value:h.getHex()}:h&&h.isVector2?{type:"v2",value:h.toArray()}:h&&h.isVector3?{type:"v3",value:h.toArray()}:h&&h.isVector4?{type:"v4",value:h.toArray()}:h&&h.isMatrix3?{type:"m3",value:h.toArray()}:h&&h.isMatrix4?{type:"m4",value:h.toArray()}:{value:h}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Ke.prototype.isShaderMaterial=!0;class _n extends _i{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Qt,this.projectionMatrix=new Qt,this.projectionMatrixInverse=new Qt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}_n.prototype.isCamera=!0;class dn extends _n{constructor(e=50,t=1,r=.1,o=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*xe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Y*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*xe*Math.atan(Math.tan(.5*Y*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,o,c,h){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Y*this.fov)/this.zoom,r=2*t,o=this.aspect*r,c=-.5*o;const h=this.view;if(null!==this.view&&this.view.enabled){const m=h.fullWidth,v=h.fullHeight;c+=h.offsetX*o/m,t-=h.offsetY*r/v,o*=h.width/m,r*=h.height/v}const f=this.filmOffset;0!==f&&(c+=e*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+o,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}dn.prototype.isPerspectiveCamera=!0;class Nh extends _i{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const o=new dn(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new re(1,0,0)),this.add(o);const c=new dn(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new re(-1,0,0)),this.add(c);const h=new dn(90,1,e,t);h.layers=this.layers,h.up.set(0,0,1),h.lookAt(new re(0,1,0)),this.add(h);const f=new dn(90,1,e,t);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new re(0,-1,0)),this.add(f);const m=new dn(90,1,e,t);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new re(0,0,1)),this.add(m);const v=new dn(90,1,e,t);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new re(0,0,-1)),this.add(v)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[o,c,h,f,m,v]=this.children,M=e.xr.enabled,w=e.getRenderTarget();e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,o),e.setRenderTarget(r,1),e.render(t,c),e.setRenderTarget(r,2),e.render(t,h),e.setRenderTarget(r,3),e.render(t,f),e.setRenderTarget(r,4),e.render(t,m),r.texture.generateMipmaps=S,e.setRenderTarget(r,5),e.render(t,v),e.setRenderTarget(w),e.xr.enabled=M,r.texture.needsPMREMUpdate=!0}}class xu extends Ar{constructor(e,t,r,o,c,h,f,m,v,M){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,o,c,h,f,m,v,M),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}xu.prototype.isCubeTexture=!0;class Fh extends Qr{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),this.texture=new xu(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:wn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=pn,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new b(5,5,5),c=new Ke({name:"CubemapFromEquirect",uniforms:P(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});c.uniforms.tEquirect.value=t;const h=new br(o,c),f=t.minFilter;return t.minFilter===Nn&&(t.minFilter=wn),new Nh(1,10,this).update(e,h),t.minFilter=f,h.geometry.dispose(),h.material.dispose(),this}clear(e,t,r,o){const c=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(t,r,o);e.setRenderTarget(c)}}Fh.prototype.isWebGLCubeRenderTarget=!0;const bd=new re,kh=new re,wd=new vr;class Al{constructor(e=new re(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,o){return this.normal.set(e,t,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const o=bd.subVectors(r,t).cross(kh.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(bd),o=this.normal.dot(r);if(0===o)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/o;return c<0||c>1?null:t.copy(r).multiplyScalar(c).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||wd.getNormalMatrix(e),o=this.coplanarPoint(bd).applyMatrix4(e),c=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Al.prototype.isPlane=!0;const Aa=new Ii,Oc=new re;class lc{constructor(e=new Al,t=new Al,r=new Al,o=new Al,c=new Al,h=new Al){this.planes=[e,t,r,o,c,h]}set(e,t,r,o,c,h){const f=this.planes;return f[0].copy(e),f[1].copy(t),f[2].copy(r),f[3].copy(o),f[4].copy(c),f[5].copy(h),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,o=r[0],c=r[1],h=r[2],f=r[3],m=r[4],v=r[5],M=r[6],w=r[7],S=r[8],A=r[9],N=r[10],H=r[11],K=r[12],B=r[13],D=r[14],ie=r[15];return t[0].setComponents(f-o,w-m,H-S,ie-K).normalize(),t[1].setComponents(f+o,w+m,H+S,ie+K).normalize(),t[2].setComponents(f+c,w+v,H+A,ie+B).normalize(),t[3].setComponents(f-c,w-v,H-A,ie-B).normalize(),t[4].setComponents(f-h,w-M,H-N,ie-D).normalize(),t[5].setComponents(f+h,w+M,H+N,ie+D).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Aa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Aa)}intersectsSprite(e){return Aa.center.set(0,0,0),Aa.radius=.7071067811865476,Aa.applyMatrix4(e.matrixWorld),this.intersectsSphere(Aa)}intersectsSphere(e){const t=this.planes,r=e.center,o=-e.radius;for(let c=0;c<6;c++)if(t[c].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const o=t[r];if(Oc.x=o.normal.x>0?e.max.x:e.min.x,Oc.y=o.normal.y>0?e.max.y:e.min.y,Oc.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Oc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Mp(){let d=null,e=!1,t=null,r=null;function o(c,h){t(c,h),r=d.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==t&&(r=d.requestAnimationFrame(o),e=!0)},stop:function(){d.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(c){t=c},setContext:function(c){d=c}}}function Hm(d,e){const t=e.isWebGL2,r=new WeakMap;return{get:function h(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)},remove:function f(v){v.isInterleavedBufferAttribute&&(v=v.data);const M=r.get(v);M&&(d.deleteBuffer(M.buffer),r.delete(v))},update:function m(v,M){if(v.isGLBufferAttribute){const S=r.get(v);return void((!S||S.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}v.isInterleavedBufferAttribute&&(v=v.data);const w=r.get(v);void 0===w?r.set(v,function o(v,M){const w=v.array,S=v.usage,A=d.createBuffer();d.bindBuffer(M,A),d.bufferData(M,w,S),v.onUploadCallback();let N=5126;return w instanceof Float32Array?N=5126:w instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):w instanceof Uint16Array?v.isFloat16BufferAttribute?t?N=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):N=5123:w instanceof Int16Array?N=5122:w instanceof Uint32Array?N=5125:w instanceof Int32Array?N=5124:w instanceof Int8Array?N=5120:(w instanceof Uint8Array||w instanceof Uint8ClampedArray)&&(N=5121),{buffer:A,type:N,bytesPerElement:w.BYTES_PER_ELEMENT,version:v.version}}(v,M)):w.version<v.version&&(function c(v,M,w){const S=M.array,A=M.updateRange;d.bindBuffer(w,v),-1===A.count?d.bufferSubData(w,0,S):(t?d.bufferSubData(w,A.offset*S.BYTES_PER_ELEMENT,S,A.offset,A.count):d.bufferSubData(w,A.offset*S.BYTES_PER_ELEMENT,S.subarray(A.offset,A.offset+A.count)),A.count=-1)}(w.buffer,v,M),w.version=v.version)}}}class Nc extends Pn{constructor(e=1,t=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:o};const c=e/2,h=t/2,f=Math.floor(r),m=Math.floor(o),v=f+1,M=m+1,w=e/f,S=t/m,A=[],N=[],H=[],K=[];for(let B=0;B<M;B++){const D=B*S-h;for(let ie=0;ie<v;ie++)N.push(ie*w-c,-D,0),H.push(0,0,1),K.push(ie/f),K.push(1-B/m)}for(let B=0;B<m;B++)for(let D=0;D<f;D++){const $=D+v*(B+1),ae=D+1+v*(B+1),me=D+1+v*B;A.push(D+v*B,$,me),A.push($,ae,me)}this.setIndex(A),this.setAttribute("position",new tn(N,3)),this.setAttribute("normal",new tn(H,3)),this.setAttribute("uv",new tn(K,2))}static fromJSON(e){return new Nc(e.width,e.height,e.widthSegments,e.heightSegments)}}const mi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Zt={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new vr},uv2Transform:{value:new vr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new _t(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new vr}}},Ra={basic:{uniforms:g([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.fog]),vertexShader:mi.meshbasic_vert,fragmentShader:mi.meshbasic_frag},lambert:{uniforms:g([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:mi.meshlambert_vert,fragmentShader:mi.meshlambert_frag},phong:{uniforms:g([Zt.common,Zt.specularmap,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:mi.meshphong_vert,fragmentShader:mi.meshphong_frag},standard:{uniforms:g([Zt.common,Zt.envmap,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.roughnessmap,Zt.metalnessmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag},toon:{uniforms:g([Zt.common,Zt.aomap,Zt.lightmap,Zt.emissivemap,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.gradientmap,Zt.fog,Zt.lights,{emissive:{value:new Ht(0)}}]),vertexShader:mi.meshtoon_vert,fragmentShader:mi.meshtoon_frag},matcap:{uniforms:g([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,Zt.fog,{matcap:{value:null}}]),vertexShader:mi.meshmatcap_vert,fragmentShader:mi.meshmatcap_frag},points:{uniforms:g([Zt.points,Zt.fog]),vertexShader:mi.points_vert,fragmentShader:mi.points_frag},dashed:{uniforms:g([Zt.common,Zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mi.linedashed_vert,fragmentShader:mi.linedashed_frag},depth:{uniforms:g([Zt.common,Zt.displacementmap]),vertexShader:mi.depth_vert,fragmentShader:mi.depth_frag},normal:{uniforms:g([Zt.common,Zt.bumpmap,Zt.normalmap,Zt.displacementmap,{opacity:{value:1}}]),vertexShader:mi.meshnormal_vert,fragmentShader:mi.meshnormal_frag},sprite:{uniforms:g([Zt.sprite,Zt.fog]),vertexShader:mi.sprite_vert,fragmentShader:mi.sprite_frag},background:{uniforms:{uvTransform:{value:new vr},t2D:{value:null}},vertexShader:mi.background_vert,fragmentShader:mi.background_frag},cube:{uniforms:g([Zt.envmap,{opacity:{value:1}}]),vertexShader:mi.cube_vert,fragmentShader:mi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mi.equirect_vert,fragmentShader:mi.equirect_frag},distanceRGBA:{uniforms:g([Zt.common,Zt.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mi.distanceRGBA_vert,fragmentShader:mi.distanceRGBA_frag},shadow:{uniforms:g([Zt.lights,Zt.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:mi.shadow_vert,fragmentShader:mi.shadow_frag}};function Yp(d,e,t,r,o,c){const h=new Ht(0);let m,v,f=!0===o?0:1,M=null,w=0,S=null;function N(H,K){t.buffers.color.setClear(H.r,H.g,H.b,K,c)}return{getClearColor:function(){return h},setClearColor:function(H,K=1){h.set(H),f=K,N(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(H){f=H,N(h,f)},render:function A(H,K){let B=!1,D=!0===K.isScene?K.background:null;D&&D.isTexture&&(D=e.get(D));const ie=d.xr,$=ie.getSession&&ie.getSession();$&&"additive"===$.environmentBlendMode&&(D=null),null===D?N(h,f):D&&D.isColor&&(N(D,1),B=!0),(d.autoClear||B)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil),D&&(D.isCubeTexture||306===D.mapping)?(void 0===v&&(v=new br(new b(1,1,1),new Ke({name:"BackgroundCubeMaterial",uniforms:P(Ra.cube.uniforms),vertexShader:Ra.cube.vertexShader,fragmentShader:Ra.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(ae,me,be){this.matrixWorld.copyPosition(be.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=D,v.material.uniforms.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,(M!==D||w!==D.version||S!==d.toneMapping)&&(v.material.needsUpdate=!0,M=D,w=D.version,S=d.toneMapping),H.unshift(v,v.geometry,v.material,0,0,null)):D&&D.isTexture&&(void 0===m&&(m=new br(new Nc(2,2),new Ke({name:"BackgroundMaterial",uniforms:P(Ra.background.uniforms),vertexShader:Ra.background.vertexShader,fragmentShader:Ra.background.fragmentShader,side:it,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(m)),m.material.uniforms.t2D.value=D,!0===D.matrixAutoUpdate&&D.updateMatrix(),m.material.uniforms.uvTransform.value.copy(D.matrix),(M!==D||w!==D.version||S!==d.toneMapping)&&(m.material.needsUpdate=!0,M=D,w=D.version,S=d.toneMapping),H.unshift(m,m.geometry,m.material,0,0,null))}}}function Fv(d,e,t,r){const o=d.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),h=r.isWebGL2||null!==c,f={},m=H(null);let v=m;function S(He){return r.isWebGL2?d.bindVertexArray(He):c.bindVertexArrayOES(He)}function A(He){return r.isWebGL2?d.deleteVertexArray(He):c.deleteVertexArrayOES(He)}function H(He){const je=[],Je=[],Ze=[];for(let vt=0;vt<o;vt++)je[vt]=0,Je[vt]=0,Ze[vt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:je,enabledAttributes:Je,attributeDivisors:Ze,object:He,attributes:{},index:null}}function D(){const He=v.newAttributes;for(let je=0,Je=He.length;je<Je;je++)He[je]=0}function ie(He){$(He,0)}function $(He,je){const Ze=v.enabledAttributes,vt=v.attributeDivisors;v.newAttributes[He]=1,0===Ze[He]&&(d.enableVertexAttribArray(He),Ze[He]=1),vt[He]!==je&&((r.isWebGL2?d:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](He,je),vt[He]=je)}function ae(){const He=v.newAttributes,je=v.enabledAttributes;for(let Je=0,Ze=je.length;Je<Ze;Je++)je[Je]!==He[Je]&&(d.disableVertexAttribArray(Je),je[Je]=0)}function me(He,je,Je,Ze,vt,At){!0!==r.isWebGL2||5124!==Je&&5125!==Je?d.vertexAttribPointer(He,je,Je,Ze,vt,At):d.vertexAttribIPointer(He,je,Je,vt,At)}function te(){De(),v!==m&&(v=m,S(v.object))}function De(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function M(He,je,Je,Ze,vt){let At=!1;if(h){const gn=function N(He,je,Je){const Ze=!0===Je.wireframe;let vt=f[He.id];void 0===vt&&(vt={},f[He.id]=vt);let At=vt[je.id];void 0===At&&(At={},vt[je.id]=At);let gn=At[Ze];return void 0===gn&&(gn=H(function w(){return r.isWebGL2?d.createVertexArray():c.createVertexArrayOES()}()),At[Ze]=gn),gn}(Ze,Je,je);v!==gn&&(v=gn,S(v.object)),At=function K(He,je){const Je=v.attributes,Ze=He.attributes;let vt=0;for(const At in Ze){const gn=Je[At],gt=Ze[At];if(void 0===gn||gn.attribute!==gt||gn.data!==gt.data)return!0;vt++}return v.attributesNum!==vt||v.index!==je}(Ze,vt),At&&function B(He,je){const Je={},Ze=He.attributes;let vt=0;for(const At in Ze){const gn=Ze[At],gt={};gt.attribute=gn,gn.data&&(gt.data=gn.data),Je[At]=gt,vt++}v.attributes=Je,v.attributesNum=vt,v.index=je}(Ze,vt)}else{const gn=!0===je.wireframe;(v.geometry!==Ze.id||v.program!==Je.id||v.wireframe!==gn)&&(v.geometry=Ze.id,v.program=Je.id,v.wireframe=gn,At=!0)}!0===He.isInstancedMesh&&(At=!0),null!==vt&&t.update(vt,34963),At&&(function be(He,je,Je,Ze){if(!1===r.isWebGL2&&(He.isInstancedMesh||Ze.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;D();const vt=Ze.attributes,At=Je.getAttributes(),gn=je.defaultAttributeValues;for(const gt in At){const Et=At[gt];if(Et.location>=0){let qt=vt[gt];if(void 0===qt&&("instanceMatrix"===gt&&He.instanceMatrix&&(qt=He.instanceMatrix),"instanceColor"===gt&&He.instanceColor&&(qt=He.instanceColor)),void 0!==qt){const mn=qt.normalized,Tn=qt.itemSize,ct=t.get(qt);if(void 0===ct)continue;const zi=ct.buffer,Mn=ct.type,Zn=ct.bytesPerElement;if(qt.isInterleavedBufferAttribute){const sn=qt.data,ui=sn.stride,zn=qt.offset;if(sn&&sn.isInstancedInterleavedBuffer){for(let xt=0;xt<Et.locationSize;xt++)$(Et.location+xt,sn.meshPerAttribute);!0!==He.isInstancedMesh&&void 0===Ze._maxInstanceCount&&(Ze._maxInstanceCount=sn.meshPerAttribute*sn.count)}else for(let xt=0;xt<Et.locationSize;xt++)ie(Et.location+xt);d.bindBuffer(34962,zi);for(let xt=0;xt<Et.locationSize;xt++)me(Et.location+xt,Tn/Et.locationSize,Mn,mn,ui*Zn,(zn+Tn/Et.locationSize*xt)*Zn)}else{if(qt.isInstancedBufferAttribute){for(let sn=0;sn<Et.locationSize;sn++)$(Et.location+sn,qt.meshPerAttribute);!0!==He.isInstancedMesh&&void 0===Ze._maxInstanceCount&&(Ze._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let sn=0;sn<Et.locationSize;sn++)ie(Et.location+sn);d.bindBuffer(34962,zi);for(let sn=0;sn<Et.locationSize;sn++)me(Et.location+sn,Tn/Et.locationSize,Mn,mn,Tn*Zn,Tn/Et.locationSize*sn*Zn)}}else if(void 0!==gn){const mn=gn[gt];if(void 0!==mn)switch(mn.length){case 2:d.vertexAttrib2fv(Et.location,mn);break;case 3:d.vertexAttrib3fv(Et.location,mn);break;case 4:d.vertexAttrib4fv(Et.location,mn);break;default:d.vertexAttrib1fv(Et.location,mn)}}}}ae()}(He,je,Je,Ze),null!==vt&&d.bindBuffer(34963,t.get(vt).buffer))},reset:te,resetDefaultState:De,dispose:function Le(){te();for(const He in f){const je=f[He];for(const Je in je){const Ze=je[Je];for(const vt in Ze)A(Ze[vt].object),delete Ze[vt];delete je[Je]}delete f[He]}},releaseStatesOfGeometry:function lt(He){if(void 0===f[He.id])return;const je=f[He.id];for(const Je in je){const Ze=je[Je];for(const vt in Ze)A(Ze[vt].object),delete Ze[vt];delete je[Je]}delete f[He.id]},releaseStatesOfProgram:function Ye(He){for(const je in f){const Je=f[je];if(void 0===Je[He.id])continue;const Ze=Je[He.id];for(const vt in Ze)A(Ze[vt].object),delete Ze[vt];delete Je[He.id]}},initAttributes:D,enableAttribute:ie,disableUnusedAttributes:ae}}function kv(d,e,t,r){const o=r.isWebGL2;let c;this.setMode=function h(v){c=v},this.render=function f(v,M){d.drawArrays(c,v,M),t.update(M,c,1)},this.renderInstances=function m(v,M,w){if(0===w)return;let S,A;if(o)S=d,A="drawArraysInstanced";else if(S=e.get("ANGLE_instanced_arrays"),A="drawArraysInstancedANGLE",null===S)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S[A](c,v,M,w),t.update(M,c,w)}}function Bv(d,e,t){let r;function c(be){if("highp"===be){if(d.getShaderPrecisionFormat(35633,36338).precision>0&&d.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";be="mediump"}return"mediump"===be&&d.getShaderPrecisionFormat(35633,36337).precision>0&&d.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const h="undefined"!=typeof WebGL2RenderingContext&&d instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&d instanceof WebGL2ComputeRenderingContext;let f=void 0!==t.precision?t.precision:"highp";const m=c(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const v=h||e.has("WEBGL_draw_buffers"),M=!0===t.logarithmicDepthBuffer,w=d.getParameter(34930),S=d.getParameter(35660),A=d.getParameter(3379),N=d.getParameter(34076),H=d.getParameter(34921),K=d.getParameter(36347),B=d.getParameter(36348),D=d.getParameter(36349),ie=S>0,$=h||e.has("OES_texture_float");return{isWebGL2:h,drawBuffers:v,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const be=e.get("EXT_texture_filter_anisotropic");r=d.getParameter(be.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,precision:f,logarithmicDepthBuffer:M,maxTextures:w,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:N,maxAttributes:H,maxVertexUniforms:K,maxVaryings:B,maxFragmentUniforms:D,vertexTextures:ie,floatFragmentTextures:$,floatVertexTextures:ie&&$,maxSamples:h?d.getParameter(36183):0}}function Vc(d){const e=this;let t=null,r=0,o=!1,c=!1;const h=new Al,f=new vr,m={value:null,needsUpdate:!1};function v(){m.value!==t&&(m.value=t,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function M(w,S,A,N){const H=null!==w?w.length:0;let K=null;if(0!==H){if(K=m.value,!0!==N||null===K){const B=A+4*H,D=S.matrixWorldInverse;f.getNormalMatrix(D),(null===K||K.length<B)&&(K=new Float32Array(B));for(let ie=0,$=A;ie!==H;++ie,$+=4)h.copy(w[ie]).applyMatrix4(D,f),h.normal.toArray(K,$),K[$+3]=h.constant}m.value=K,m.needsUpdate=!0}return e.numPlanes=H,e.numIntersection=0,K}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(w,S,A){const N=0!==w.length||S||0!==r||o;return o=S,t=M(w,A,0),r=w.length,N},this.beginShadows=function(){c=!0,M(null)},this.endShadows=function(){c=!1,v()},this.setState=function(w,S,A){const N=w.clippingPlanes,H=w.clipIntersection,K=w.clipShadows,B=d.get(w);if(!o||null===N||0===N.length||c&&!K)c?M(null):v();else{const D=c?0:r,ie=4*D;let $=B.clippingState||null;m.value=$,$=M(N,S,ie,A);for(let ae=0;ae!==ie;++ae)$[ae]=t[ae];B.clippingState=$,this.numIntersection=H?this.numPlanes:0,this.numPlanes+=D}}}function Pa(d){let e=new WeakMap;function t(h,f){return 303===f?h.mapping=301:304===f&&(h.mapping=302),h}function o(h){const f=h.target;f.removeEventListener("dispose",o);const m=e.get(f);void 0!==m&&(e.delete(f),m.dispose())}return{get:function r(h){if(h&&h.isTexture&&!1===h.isRenderTargetTexture){const f=h.mapping;if(303===f||304===f){if(e.has(h))return t(e.get(h).texture,h.mapping);{const m=h.image;if(m&&m.height>0){const v=new Fh(m.height/2);return v.fromEquirectangularTexture(d,h),e.set(h,v),h.addEventListener("dispose",o),t(v.texture,h.mapping)}return null}}}return h},dispose:function c(){e=new WeakMap}}}Ra.physical={uniforms:g([Ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new _t(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new _t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null}}]),vertexShader:mi.meshphysical_vert,fragmentShader:mi.meshphysical_frag};class Rd extends _n{constructor(e=-1,t=1,r=1,o=-1,c=.1,h=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=o,this.near=c,this.far=h,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,o,c,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=o,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let c=r-e,h=r+e,f=o+t,m=o-t;if(null!==this.view&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=v*this.view.offsetX,h=c+v*this.view.width,f-=M*this.view.offsetY,m=f-M*this.view.height}this.projectionMatrix.makeOrthographic(c,h,f,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Rd.prototype.isOrthographicCamera=!0;class Pd extends Ke{constructor(e){super(e),this.type="RawShaderMaterial"}}Pd.prototype.isRawShaderMaterial=!0;const ps=Math.pow(2,8),Id=[.125,.215,.35,.446,.526,.582],Ld=5+Id.length,Od=new Rd,{_lodPlanes:il,_sizeLods:qh,_sigmas:Tu}=Jp(),Nd=new Ht;let Au=null;const Dl=(1+Math.sqrt(5))/2,Du=1/Dl,fc=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,Dl,Du),new re(0,Dl,-Du),new re(Du,0,Dl),new re(-Du,0,Dl),new re(Dl,Du,0),new re(-Dl,Du,0)];class Fd{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function Uv(d){const e=new Float32Array(d),t=new re(0,1,0);return new Pd({name:"SphericalGaussianBlur",defines:{n:d},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,o=100){Au=this._renderer.getRenderTarget();const c=this._allocateTargets();return this._sceneToCubeUV(e,r,o,c),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Qp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Kp(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<il.length;e++)il[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Au),e.scissorTest=!1,zc(e,0,0,e.width,e.height)}_fromTexture(e,t){Au=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:wn,minFilter:wn,generateMipmaps:!1,type:ur,format:pn,encoding:gi,depthBuffer:!1},r=Xp(t);return r.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Xp(t)),r}_compileMaterial(e){const t=new br(il[0],e);this._renderer.compile(t,Od)}_sceneToCubeUV(e,t,r,o){const f=new dn(90,1,t,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],M=this._renderer,w=M.autoClear,S=M.toneMapping;M.getClearColor(Nd),M.toneMapping=0,M.autoClear=!1;const A=new rn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),N=new br(new b,A);let H=!1;const K=e.background;K?K.isColor&&(A.color.copy(K),e.background=null,H=!0):(A.color.copy(Nd),H=!0);for(let B=0;B<6;B++){const D=B%3;0===D?(f.up.set(0,m[B],0),f.lookAt(v[B],0,0)):1===D?(f.up.set(0,0,m[B]),f.lookAt(0,v[B],0)):(f.up.set(0,m[B],0),f.lookAt(0,0,v[B])),zc(o,D*ps,B>2?ps:0,ps,ps),M.setRenderTarget(o),H&&M.render(N,f),M.render(e,f)}N.geometry.dispose(),N.material.dispose(),M.toneMapping=S,M.autoClear=w,e.background=K}_textureToCubeUV(e,t){const r=this._renderer,o=301===e.mapping||302===e.mapping;o?(null===this._cubemapShader&&(this._cubemapShader=Qp()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=Kp());const c=o?this._cubemapShader:this._equirectShader,h=new br(il[0],c),f=c.uniforms;f.envMap.value=e,o||f.texelSize.value.set(1/e.image.width,1/e.image.height),zc(t,0,0,3*ps,2*ps),r.setRenderTarget(t),r.render(h,Od)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let o=1;o<Ld;o++){const c=Math.sqrt(Tu[o]*Tu[o]-Tu[o-1]*Tu[o-1]);this._blur(e,o-1,o,c,fc[(o-1)%fc.length])}t.autoClear=r}_blur(e,t,r,o,c){const h=this._pingPongRenderTarget;this._halfBlur(e,h,t,r,o,"latitudinal",c),this._halfBlur(h,e,r,r,o,"longitudinal",c)}_halfBlur(e,t,r,o,c,h,f){const m=this._renderer,v=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const w=new br(il[o],v),S=v.uniforms,A=qh[r]-1,N=isFinite(c)?Math.PI/(2*A):2*Math.PI/39,H=c/N,K=isFinite(c)?1+Math.floor(3*H):20;K>20&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${K} samples when the maximum is set to 20`);const B=[];let D=0;for(let me=0;me<20;++me){const be=me/H,Le=Math.exp(-be*be/2);B.push(Le),0===me?D+=Le:me<K&&(D+=2*Le)}for(let me=0;me<B.length;me++)B[me]=B[me]/D;S.envMap.value=e.texture,S.samples.value=K,S.weights.value=B,S.latitudinal.value="latitudinal"===h,f&&(S.poleAxis.value=f),S.dTheta.value=N,S.mipInt.value=8-r;const ie=qh[o];zc(t,3*Math.max(0,ps-2*ie),(0===o?0:2*ps)+2*ie*(o>4?o-8+4:0),3*ie,2*ie),m.setRenderTarget(t),m.render(w,Od)}}function Jp(){const d=[],e=[],t=[];let r=8;for(let o=0;o<Ld;o++){const c=Math.pow(2,r);e.push(c);let h=1/c;o>4?h=Id[o-8+4-1]:0===o&&(h=0),t.push(h);const f=1/(c-1),m=-f/2,v=1+f/2,M=[m,m,v,m,v,v,m,m,v,v,m,v],w=6,S=6,A=3,N=2,H=1,K=new Float32Array(A*S*w),B=new Float32Array(N*S*w),D=new Float32Array(H*S*w);for(let $=0;$<w;$++){const ae=$%3*2/3-1,me=$>2?0:-1;K.set([ae,me,0,ae+2/3,me,0,ae+2/3,me+1,0,ae,me,0,ae+2/3,me+1,0,ae,me+1,0],A*S*$),B.set(M,N*S*$),D.set([$,$,$,$,$,$],H*S*$)}const ie=new Pn;ie.setAttribute("position",new ci(K,A)),ie.setAttribute("uv",new ci(B,N)),ie.setAttribute("faceIndex",new ci(D,H)),d.push(ie),r>4&&r--}return{_lodPlanes:d,_sizeLods:e,_sigmas:t}}function Xp(d){const e=new Qr(3*ps,3*ps,d);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function zc(d,e,t,r,o){d.viewport.set(e,t,r,o),d.scissor.set(e,t,r,o)}function Kp(){const d=new _t(1,1);return new Pd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:d}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Qp(){return new Pd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Vv(d){let e=new WeakMap,t=null;function c(f){const m=f.target;m.removeEventListener("dispose",c);const v=e.get(m);void 0!==v&&(e.delete(m),v.dispose())}return{get:function r(f){if(f&&f.isTexture){const m=f.mapping,v=303===m||304===m,M=301===m||302===m;if(v||M){if(f.isRenderTargetTexture&&!0===f.needsPMREMUpdate){f.needsPMREMUpdate=!1;let w=e.get(f);return null===t&&(t=new Fd(d)),w=v?t.fromEquirectangular(f,w):t.fromCubemap(f,w),e.set(f,w),w.texture}if(e.has(f))return e.get(f).texture;{const w=f.image;if(v&&w&&w.height>0||M&&w&&function o(f){let m=0;for(let M=0;M<6;M++)void 0!==f[M]&&m++;return 6===m}(w)){null===t&&(t=new Fd(d));const S=v?t.fromEquirectangular(f):t.fromCubemap(f);return e.set(f,S),f.addEventListener("dispose",c),S.texture}return null}}}return f},dispose:function h(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Hv(d){const e={};function t(r){if(void 0!==e[r])return e[r];let o;switch(r){case"WEBGL_depth_texture":o=d.getExtension("WEBGL_depth_texture")||d.getExtension("MOZ_WEBGL_depth_texture")||d.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=d.getExtension("WEBGL_compressed_texture_s3tc")||d.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=d.getExtension("WEBGL_compressed_texture_pvrtc")||d.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=d.getExtension(r)}return e[r]=o,o}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const o=t(r);return null===o&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function eg(d,e,t,r){const o={},c=new WeakMap;function h(w){const S=w.target;null!==S.index&&e.remove(S.index);for(const N in S.attributes)e.remove(S.attributes[N]);S.removeEventListener("dispose",h),delete o[S.id];const A=c.get(S);A&&(e.remove(A),c.delete(S)),r.releaseStatesOfGeometry(S),!0===S.isInstancedBufferGeometry&&delete S._maxInstanceCount,t.memory.geometries--}function v(w){const S=[],A=w.index,N=w.attributes.position;let H=0;if(null!==A){const D=A.array;H=A.version;for(let ie=0,$=D.length;ie<$;ie+=3){const ae=D[ie+0],me=D[ie+1],be=D[ie+2];S.push(ae,me,me,be,be,ae)}}else{H=N.version;for(let ie=0,$=N.array.length/3-1;ie<$;ie+=3){const ae=ie+0,me=ie+1,be=ie+2;S.push(ae,me,me,be,be,ae)}}const K=new(Ac(S)?Qa:ns)(S,1);K.version=H;const B=c.get(w);B&&e.remove(B),c.set(w,K)}return{get:function f(w,S){return!0===o[S.id]||(S.addEventListener("dispose",h),o[S.id]=!0,t.memory.geometries++),S},update:function m(w){const S=w.attributes;for(const N in S)e.update(S[N],34962);const A=w.morphAttributes;for(const N in A){const H=A[N];for(let K=0,B=H.length;K<B;K++)e.update(H[K],34962)}},getWireframeAttribute:function M(w){const S=c.get(w);if(S){const A=w.index;null!==A&&S.version<A.version&&v(w)}else v(w);return c.get(w)}}}function Yh(d,e,t,r){const o=r.isWebGL2;let c,f,m;this.setMode=function h(S){c=S},this.setIndex=function v(S){f=S.type,m=S.bytesPerElement},this.render=function M(S,A){d.drawElements(c,A,f,S*m),t.update(A,c,1)},this.renderInstances=function w(S,A,N){if(0===N)return;let H,K;if(o)H=d,K="drawElementsInstanced";else if(H=e.get("ANGLE_instanced_arrays"),K="drawElementsInstancedANGLE",null===H)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");H[K](c,A,f,S*m,N),t.update(A,c,N)}}function tg(d){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function o(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(c,h,f){switch(t.calls++,h){case 4:t.triangles+=f*(c/3);break;case 1:t.lines+=f*(c/2);break;case 3:t.lines+=f*(c-1);break;case 2:t.lines+=f*c;break;case 0:t.points+=f*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h)}}}}class Ru extends Ar{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Lt,this.minFilter=Lt,this.wrapR=nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function zv(d,e){return d[0]-e[0]}function Gv(d,e){return Math.abs(e[1])-Math.abs(d[1])}function Jh(d,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),d.divideScalar(t)}function ng(d,e,t){const r={},o=new Float32Array(8),c=new WeakMap,h=new re,f=[];for(let v=0;v<8;v++)f[v]=[v,0];return{update:function m(v,M,w,S){const A=v.morphTargetInfluences;if(!0===e.isWebGL2){const N=M.morphAttributes.position.length;let H=c.get(M);if(void 0===H||H.count!==N){let De=function(){Ye.dispose(),c.delete(M),M.removeEventListener("dispose",De)};void 0!==H&&H.texture.dispose();const D=void 0!==M.morphAttributes.normal,ie=M.morphAttributes.position,$=M.morphAttributes.normal||[],me=!0===D?2:1;let be=M.attributes.position.count*me,Le=1;be>e.maxTextureSize&&(Le=Math.ceil(be/e.maxTextureSize),be=e.maxTextureSize);const lt=new Float32Array(be*Le*4*N),Ye=new Ru(lt,be,Le,N);Ye.format=pn,Ye.type=as,Ye.needsUpdate=!0;const te=4*me;for(let He=0;He<N;He++){const je=ie[He],Je=$[He],Ze=be*Le*4*He;for(let vt=0;vt<je.count;vt++){h.fromBufferAttribute(je,vt),!0===je.normalized&&Jh(h,je);const At=vt*te;lt[Ze+At+0]=h.x,lt[Ze+At+1]=h.y,lt[Ze+At+2]=h.z,lt[Ze+At+3]=0,!0===D&&(h.fromBufferAttribute(Je,vt),!0===Je.normalized&&Jh(h,Je),lt[Ze+At+4]=h.x,lt[Ze+At+5]=h.y,lt[Ze+At+6]=h.z,lt[Ze+At+7]=0)}}H={count:N,texture:Ye,size:new _t(be,Le)},c.set(M,H),M.addEventListener("dispose",De)}let K=0;for(let D=0;D<A.length;D++)K+=A[D];const B=M.morphTargetsRelative?1:1-K;S.getUniforms().setValue(d,"morphTargetBaseInfluence",B),S.getUniforms().setValue(d,"morphTargetInfluences",A),S.getUniforms().setValue(d,"morphTargetsTexture",H.texture,t),S.getUniforms().setValue(d,"morphTargetsTextureSize",H.size)}else{const N=void 0===A?0:A.length;let H=r[M.id];if(void 0===H||H.length!==N){H=[];for(let $=0;$<N;$++)H[$]=[$,0];r[M.id]=H}for(let $=0;$<N;$++){const ae=H[$];ae[0]=$,ae[1]=A[$]}H.sort(Gv);for(let $=0;$<8;$++)$<N&&H[$][1]?(f[$][0]=H[$][0],f[$][1]=H[$][1]):(f[$][0]=Number.MAX_SAFE_INTEGER,f[$][1]=0);f.sort(zv);const K=M.morphAttributes.position,B=M.morphAttributes.normal;let D=0;for(let $=0;$<8;$++){const ae=f[$],me=ae[0],be=ae[1];me!==Number.MAX_SAFE_INTEGER&&be?(K&&M.getAttribute("morphTarget"+$)!==K[me]&&M.setAttribute("morphTarget"+$,K[me]),B&&M.getAttribute("morphNormal"+$)!==B[me]&&M.setAttribute("morphNormal"+$,B[me]),o[$]=be,D+=be):(K&&!0===M.hasAttribute("morphTarget"+$)&&M.deleteAttribute("morphTarget"+$),B&&!0===M.hasAttribute("morphNormal"+$)&&M.deleteAttribute("morphNormal"+$),o[$]=0)}const ie=M.morphTargetsRelative?1:1-D;S.getUniforms().setValue(d,"morphTargetBaseInfluence",ie),S.getUniforms().setValue(d,"morphTargetInfluences",o)}}}}function pc(d,e,t,r){let o=new WeakMap;function f(m){const v=m.target;v.removeEventListener("dispose",f),t.remove(v.instanceMatrix),null!==v.instanceColor&&t.remove(v.instanceColor)}return{update:function c(m){const v=r.render.frame,w=e.get(m,m.geometry);return o.get(w)!==v&&(e.update(w),o.set(w,v)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",f)&&m.addEventListener("dispose",f),t.update(m.instanceMatrix,34962),null!==m.instanceColor&&t.update(m.instanceColor,34962)),w},dispose:function h(){o=new WeakMap}}}Ru.prototype.isDataTexture2DArray=!0;class Xh extends Ar{constructor(e=null,t=1,r=1,o=1){super(null),this.image={data:e,width:t,height:r,depth:o},this.magFilter=Lt,this.minFilter=Lt,this.wrapR=nt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Xh.prototype.isDataTexture3D=!0;const Kh=new Ar,ig=new Ru,Pu=new Xh,rg=new xu,Qh=[],ef=[],tf=new Float32Array(16),kd=new Float32Array(9),nf=new Float32Array(4);function rl(d,e,t){const r=d[0];if(r<=0||r>0)return d;const o=e*t;let c=Qh[o];if(void 0===c&&(c=new Float32Array(o),Qh[o]=c),0!==e){r.toArray(c,0);for(let h=1,f=0;h!==e;++h)f+=t,d[h].toArray(c,f)}return c}function As(d,e){if(d.length!==e.length)return!1;for(let t=0,r=d.length;t<r;t++)if(d[t]!==e[t])return!1;return!0}function Ns(d,e){for(let t=0,r=e.length;t<r;t++)d[t]=e[t]}function Gc(d,e){let t=ef[e];void 0===t&&(t=new Int32Array(e),ef[e]=t);for(let r=0;r!==e;++r)t[r]=d.allocateTextureUnit();return t}function sg(d,e){const t=this.cache;t[0]!==e&&(d.uniform1f(this.addr,e),t[0]=e)}function rf(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(d.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(As(t,e))return;d.uniform2fv(this.addr,e),Ns(t,e)}}function Iu(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(d.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(d.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(As(t,e))return;d.uniform3fv(this.addr,e),Ns(t,e)}}function Wv(d,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(d.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(As(t,e))return;d.uniform4fv(this.addr,e),Ns(t,e)}}function og(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix2fv(this.addr,!1,e),Ns(t,e)}else{if(As(t,r))return;nf.set(r),d.uniformMatrix2fv(this.addr,!1,nf),Ns(t,r)}}function Zv(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix3fv(this.addr,!1,e),Ns(t,e)}else{if(As(t,r))return;kd.set(r),d.uniformMatrix3fv(this.addr,!1,kd),Ns(t,r)}}function jv(d,e){const t=this.cache,r=e.elements;if(void 0===r){if(As(t,e))return;d.uniformMatrix4fv(this.addr,!1,e),Ns(t,e)}else{if(As(t,r))return;tf.set(r),d.uniformMatrix4fv(this.addr,!1,tf),Ns(t,r)}}function ag(d,e){const t=this.cache;t[0]!==e&&(d.uniform1i(this.addr,e),t[0]=e)}function sf(d,e){const t=this.cache;As(t,e)||(d.uniform2iv(this.addr,e),Ns(t,e))}function lg(d,e){const t=this.cache;As(t,e)||(d.uniform3iv(this.addr,e),Ns(t,e))}function N0(d,e){const t=this.cache;As(t,e)||(d.uniform4iv(this.addr,e),Ns(t,e))}function cg(d,e){const t=this.cache;t[0]!==e&&(d.uniform1ui(this.addr,e),t[0]=e)}function qv(d,e){const t=this.cache;As(t,e)||(d.uniform2uiv(this.addr,e),Ns(t,e))}function ug(d,e){const t=this.cache;As(t,e)||(d.uniform3uiv(this.addr,e),Ns(t,e))}function $v(d,e){const t=this.cache;As(t,e)||(d.uniform4uiv(this.addr,e),Ns(t,e))}function Yv(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.safeSetTexture2D(e||Kh,o)}function oa(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.setTexture3D(e||Pu,o)}function Jv(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.safeSetTextureCube(e||rg,o)}function dg(d,e,t){const r=this.cache,o=t.allocateTextureUnit();r[0]!==o&&(d.uniform1i(this.addr,o),r[0]=o),t.setTexture2DArray(e||ig,o)}function Kv(d,e){d.uniform1fv(this.addr,e)}function Qv(d,e){const t=rl(e,this.size,2);d.uniform2fv(this.addr,t)}function ey(d,e){const t=rl(e,this.size,3);d.uniform3fv(this.addr,t)}function hg(d,e){const t=rl(e,this.size,4);d.uniform4fv(this.addr,t)}function ty(d,e){const t=rl(e,this.size,4);d.uniformMatrix2fv(this.addr,!1,t)}function ny(d,e){const t=rl(e,this.size,9);d.uniformMatrix3fv(this.addr,!1,t)}function iy(d,e){const t=rl(e,this.size,16);d.uniformMatrix4fv(this.addr,!1,t)}function jn(d,e){d.uniform1iv(this.addr,e)}function fg(d,e){d.uniform2iv(this.addr,e)}function pg(d,e){d.uniform3iv(this.addr,e)}function gg(d,e){d.uniform4iv(this.addr,e)}function Bd(d,e){d.uniform1uiv(this.addr,e)}function aa(d,e){d.uniform2uiv(this.addr,e)}function mg(d,e){d.uniform3uiv(this.addr,e)}function ry(d,e){d.uniform4uiv(this.addr,e)}function af(d,e,t){const r=e.length,o=Gc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.safeSetTexture2D(e[c]||Kh,o[c])}function sl(d,e,t){const r=e.length,o=Gc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.setTexture3D(e[c]||Pu,o[c])}function lf(d,e,t){const r=e.length,o=Gc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.safeSetTextureCube(e[c]||rg,o[c])}function vg(d,e,t){const r=e.length,o=Gc(t,r);d.uniform1iv(this.addr,o);for(let c=0;c!==r;++c)t.setTexture2DArray(e[c]||ig,o[c])}function F0(d,e,t){this.id=d,this.addr=t,this.cache=[],this.setValue=function Xv(d){switch(d){case 5126:return sg;case 35664:return rf;case 35665:return Iu;case 35666:return Wv;case 35674:return og;case 35675:return Zv;case 35676:return jv;case 5124:case 35670:return ag;case 35667:case 35671:return sf;case 35668:case 35672:return lg;case 35669:case 35673:return N0;case 5125:return cg;case 36294:return qv;case 36295:return ug;case 36296:return $v;case 35678:case 36198:case 36298:case 36306:case 35682:return Yv;case 35679:case 36299:case 36307:return oa;case 35680:case 36300:case 36308:case 36293:return Jv;case 36289:case 36303:case 36311:case 36292:return dg}}(e.type)}function uf(d,e,t){this.id=d,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function cf(d){switch(d){case 5126:return Kv;case 35664:return Qv;case 35665:return ey;case 35666:return hg;case 35674:return ty;case 35675:return ny;case 35676:return iy;case 5124:case 35670:return jn;case 35667:case 35671:return fg;case 35668:case 35672:return pg;case 35669:case 35673:return gg;case 5125:return Bd;case 36294:return aa;case 36295:return mg;case 36296:return ry;case 35678:case 36198:case 36298:case 36306:case 35682:return af;case 35679:case 36299:case 36307:return sl;case 35680:case 36300:case 36308:case 36293:return lf;case 36289:case 36303:case 36311:case 36292:return vg}}(e.type)}function sy(d){this.id=d,this.seq=[],this.map={}}uf.prototype.updateCache=function(d){const e=this.cache;d instanceof Float32Array&&e.length!==d.length&&(this.cache=new Float32Array(d.length)),Ns(e,d)},sy.prototype.setValue=function(d,e,t){const r=this.seq;for(let o=0,c=r.length;o!==c;++o){const h=r[o];h.setValue(d,e[h.id],t)}};const Wc=/(\w+)(\])?(\[|\.)?/g;function Lu(d,e){d.seq.push(e),d.map[e.id]=e}function df(d,e,t){const r=d.name,o=r.length;for(Wc.lastIndex=0;;){const c=Wc.exec(r),h=Wc.lastIndex;let f=c[1];const v=c[3];if("]"===c[2]&&(f|=0),void 0===v||"["===v&&h+2===o){Lu(t,void 0===v?new F0(f,d,e):new uf(f,d,e));break}{let w=t.map[f];void 0===w&&(w=new sy(f),Lu(t,w)),t=w}}}function Ia(d,e){this.seq=[],this.map={};const t=d.getProgramParameter(e,35718);for(let r=0;r<t;++r){const o=d.getActiveUniform(e,r);df(o,d.getUniformLocation(e,o.name),this)}}function Ud(d,e,t){const r=d.createShader(e);return d.shaderSource(r,t),d.compileShader(r),r}Ia.prototype.setValue=function(d,e,t,r){const o=this.map[e];void 0!==o&&o.setValue(d,t,r)},Ia.prototype.setOptional=function(d,e,t){const r=e[t];void 0!==r&&this.setValue(d,t,r)},Ia.upload=function(d,e,t,r){for(let o=0,c=e.length;o!==c;++o){const h=e[o],f=t[h.id];!1!==f.needsUpdate&&h.setValue(d,f.value,r)}},Ia.seqWithValue=function(d,e){const t=[];for(let r=0,o=d.length;r!==o;++r){const c=d[r];c.id in e&&t.push(c)}return t};let k0=0;function yg(d,e,t){const r=d.getShaderParameter(e,35713),o=d.getShaderInfoLog(e).trim();return r&&""===o?"":t.toUpperCase()+"\n\n"+o+"\n\n"+function oy(d){const e=d.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(d.getShaderSource(e))}function ly(d,e){const t=function ay(d){switch(d){case gi:return["Linear","( value )"];case Ln:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",d),["Linear","( value )"]}}(e);return"vec4 "+d+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function _g(d,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+d+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Zc(d){return""!==d}function hf(d,e){return d.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xg(d,e){return d.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ff=/^[ \t]*#include +<([\w\d./]+)>/gm;function bg(d){return d.replace(ff,V0)}function V0(d,e){const t=mi[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return bg(t)}const H0=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,z0=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uy(d){return d.replace(z0,dy).replace(H0,G0)}function G0(d,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dy(0,e,t,r)}function dy(d,e,t,r){let o="";for(let c=parseInt(e);c<parseInt(t);c++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return o}function hy(d){let e="precision "+d.precision+" float;\nprecision "+d.precision+" int;";return"highp"===d.precision?e+="\n#define HIGH_PRECISION":"mediump"===d.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===d.precision&&(e+="\n#define LOW_PRECISION"),e}function fy(d,e,t,r){const o=d.getContext(),c=t.defines;let h=t.vertexShader,f=t.fragmentShader;const m=function W0(d){let e="SHADOWMAP_TYPE_BASIC";return 1===d.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===d.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===d.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),v=function Z0(d){let e="ENVMAP_TYPE_CUBE";if(d.envMap)switch(d.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),M=function Rl(d){let e="ENVMAP_MODE_REFLECTION";if(d.envMap)switch(d.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),w=function pf(d){let e="ENVMAP_BLENDING_NONE";if(d.envMap)switch(d.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),S=t.isWebGL2?"":function B0(d){return[d.extensionDerivatives||d.envMapCubeUV||d.bumpMap||d.tangentSpaceNormalMap||d.clearcoatNormalMap||d.flatShading||"physical"===d.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(d.extensionFragDepth||d.logarithmicDepthBuffer)&&d.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",d.extensionDrawBuffers&&d.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(d.extensionShaderTextureLOD||d.envMap||d.transmission)&&d.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Zc).join("\n")}(t),A=function cy(d){const e=[];for(const t in d){const r=d[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(c),N=o.createProgram();let H,K,B=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(H=[A].filter(Zc).join("\n"),H.length>0&&(H+="\n"),K=[S,A].filter(Zc).join("\n"),K.length>0&&(K+="\n")):(H=[hy(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+M:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Zc).join("\n"),K=[S,hy(t),"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.envMap?"#define "+M:"",t.envMap?"#define "+w:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?mi.tonemapping_pars_fragment:"",0!==t.toneMapping?_g("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",mi.encodings_pars_fragment,ly("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Zc).join("\n")),h=bg(h),h=hf(h,t),h=xg(h,t),f=bg(f),f=hf(f,t),f=xg(f,t),h=uy(h),f=uy(f),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(B="#version 300 es\n",H=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+H,K=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+K);const ie=B+K+f,$=Ud(o,35633,B+H+h),ae=Ud(o,35632,ie);if(o.attachShader(N,$),o.attachShader(N,ae),void 0!==t.index0AttributeName?o.bindAttribLocation(N,0,t.index0AttributeName):!0===t.morphTargets&&o.bindAttribLocation(N,0,"position"),o.linkProgram(N),d.debug.checkShaderErrors){const Le=o.getProgramInfoLog(N).trim(),lt=o.getShaderInfoLog($).trim(),Ye=o.getShaderInfoLog(ae).trim();let te=!0,De=!0;if(!1===o.getProgramParameter(N,35714)){te=!1;const He=yg(o,$,"vertex"),je=yg(o,ae,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(N,35715)+"\n\nProgram Info Log: "+Le+"\n"+He+"\n"+je)}else""!==Le?console.warn("THREE.WebGLProgram: Program Info Log:",Le):(""===lt||""===Ye)&&(De=!1);De&&(this.diagnostics={runnable:te,programLog:Le,vertexShader:{log:lt,prefix:H},fragmentShader:{log:Ye,prefix:K}})}let me,be;return o.deleteShader($),o.deleteShader(ae),this.getUniforms=function(){return void 0===me&&(me=new Ia(o,N)),me},this.getAttributes=function(){return void 0===be&&(be=function U0(d,e){const t={},r=d.getProgramParameter(e,35721);for(let o=0;o<r;o++){const c=d.getActiveAttrib(e,o),h=c.name;let f=1;35674===c.type&&(f=2),35675===c.type&&(f=3),35676===c.type&&(f=4),t[h]={type:c.type,location:d.getAttribLocation(e,h),locationSize:f}}return t}(o,N)),be},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(N),this.program=void 0},this.name=t.shaderName,this.id=k0++,this.cacheKey=e,this.usedTimes=1,this.program=N,this.vertexShader=$,this.fragmentShader=ae,this}let wg=0;class gf{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,o=this._getShaderStage(e.vertexShader),c=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return!1===h.has(o)&&(h.add(o),o.usedTimes++),!1===h.has(c)&&(h.add(c),c.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new Mg;t.set(e,r)}return t.get(e)}}class Mg{constructor(){this.id=wg++,this.usedTimes=0}}function mf(d,e,t,r,o,c,h){const f=new _l,m=new gf,v=[],M=o.isWebGL2,w=o.logarithmicDepthBuffer,S=o.floatVertexTextures,A=o.maxVertexUniforms,N=o.vertexTextures;let H=o.precision;const K={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function D(te,De,He,je,Je){const Ze=je.fog,At=(te.isMeshStandardMaterial?t:e).get(te.envMap||(te.isMeshStandardMaterial?je.environment:null)),gn=K[te.type],gt=Je.isSkinnedMesh?function B(te){const He=te.skeleton.bones;if(S)return 1024;{const Je=Math.floor((A-20)/4),Ze=Math.min(Je,He.length);return Ze<He.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+He.length+" bones. This GPU supports "+Ze+"."),0):Ze}}(Je):0;let Et,qt,mn,Tn;if(null!==te.precision&&(H=o.getMaxPrecision(te.precision),H!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",H,"instead.")),gn){const sn=Ra[gn];Et=sn.vertexShader,qt=sn.fragmentShader}else Et=te.vertexShader,qt=te.fragmentShader,m.update(te),mn=m.getVertexShaderID(te),Tn=m.getFragmentShaderID(te);const ct=d.getRenderTarget(),Mn=te.clearcoat>0;return{isWebGL2:M,shaderID:gn,shaderName:te.type,vertexShader:Et,fragmentShader:qt,defines:te.defines,customVertexShaderID:mn,customFragmentShaderID:Tn,isRawShaderMaterial:!0===te.isRawShaderMaterial,glslVersion:te.glslVersion,precision:H,instancing:!0===Je.isInstancedMesh,instancingColor:!0===Je.isInstancedMesh&&null!==Je.instanceColor,supportsVertexTextures:N,outputEncoding:null===ct?d.outputEncoding:!0===ct.isXRRenderTarget?ct.texture.encoding:gi,map:!!te.map,matcap:!!te.matcap,envMap:!!At,envMapMode:At&&At.mapping,envMapCubeUV:!!At&&(306===At.mapping||307===At.mapping),lightMap:!!te.lightMap,aoMap:!!te.aoMap,emissiveMap:!!te.emissiveMap,bumpMap:!!te.bumpMap,normalMap:!!te.normalMap,objectSpaceNormalMap:1===te.normalMapType,tangentSpaceNormalMap:te.normalMapType===ws,decodeVideoTexture:!!te.map&&!0===te.map.isVideoTexture&&te.map.encoding===Ln,clearcoat:Mn,clearcoatMap:Mn&&!!te.clearcoatMap,clearcoatRoughnessMap:Mn&&!!te.clearcoatRoughnessMap,clearcoatNormalMap:Mn&&!!te.clearcoatNormalMap,displacementMap:!!te.displacementMap,roughnessMap:!!te.roughnessMap,metalnessMap:!!te.metalnessMap,specularMap:!!te.specularMap,specularIntensityMap:!!te.specularIntensityMap,specularColorMap:!!te.specularColorMap,transparent:te.transparent,alphaMap:!!te.alphaMap,alphaTest:te.alphaTest>0,gradientMap:!!te.gradientMap,sheen:te.sheen>0,sheenColorMap:!!te.sheenColorMap,sheenRoughnessMap:!!te.sheenRoughnessMap,transmission:te.transmission>0,transmissionMap:!!te.transmissionMap,thicknessMap:!!te.thicknessMap,combine:te.combine,vertexTangents:!!te.normalMap&&!!Je.geometry&&!!Je.geometry.attributes.tangent,vertexColors:te.vertexColors,vertexAlphas:!0===te.vertexColors&&!!Je.geometry&&!!Je.geometry.attributes.color&&4===Je.geometry.attributes.color.itemSize,vertexUvs:!!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatMap||te.clearcoatRoughnessMap||te.clearcoatNormalMap||te.displacementMap||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheenColorMap||te.sheenRoughnessMap),uvsVertexOnly:!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatNormalMap||te.transmission>0||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheen>0||te.sheenColorMap||te.sheenRoughnessMap||!te.displacementMap),fog:!!Ze,useFog:te.fog,fogExp2:Ze&&Ze.isFogExp2,flatShading:!!te.flatShading,sizeAttenuation:te.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===Je.isSkinnedMesh&&gt>0,maxBones:gt,useVertexTexture:S,morphTargets:!!Je.geometry&&!!Je.geometry.morphAttributes.position,morphNormals:!!Je.geometry&&!!Je.geometry.morphAttributes.normal,morphTargetsCount:Je.geometry&&Je.geometry.morphAttributes.position?Je.geometry.morphAttributes.position.length:0,numDirLights:De.directional.length,numPointLights:De.point.length,numSpotLights:De.spot.length,numRectAreaLights:De.rectArea.length,numHemiLights:De.hemi.length,numDirLightShadows:De.directionalShadowMap.length,numPointLightShadows:De.pointShadowMap.length,numSpotLightShadows:De.spotShadowMap.length,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:te.dithering,shadowMapEnabled:d.shadowMap.enabled&&He.length>0,shadowMapType:d.shadowMap.type,toneMapping:te.toneMapped?d.toneMapping:0,physicallyCorrectLights:d.physicallyCorrectLights,premultipliedAlpha:te.premultipliedAlpha,doubleSided:te.side===Ge,flipSided:1===te.side,depthPacking:void 0!==te.depthPacking&&te.depthPacking,index0AttributeName:te.index0AttributeName,extensionDerivatives:te.extensions&&te.extensions.derivatives,extensionFragDepth:te.extensions&&te.extensions.fragDepth,extensionDrawBuffers:te.extensions&&te.extensions.drawBuffers,extensionShaderTextureLOD:te.extensions&&te.extensions.shaderTextureLOD,rendererExtensionFragDepth:M||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||r.has("EXT_shader_texture_lod"),customProgramCacheKey:te.customProgramCacheKey()}},getProgramCacheKey:function ie(te){const De=[];if(te.shaderID?De.push(te.shaderID):(De.push(te.customVertexShaderID),De.push(te.customFragmentShaderID)),void 0!==te.defines)for(const He in te.defines)De.push(He),De.push(te.defines[He]);return!1===te.isRawShaderMaterial&&(function $(te,De){te.push(De.precision),te.push(De.outputEncoding),te.push(De.envMapMode),te.push(De.combine),te.push(De.vertexUvs),te.push(De.fogExp2),te.push(De.sizeAttenuation),te.push(De.maxBones),te.push(De.morphTargetsCount),te.push(De.numDirLights),te.push(De.numPointLights),te.push(De.numSpotLights),te.push(De.numHemiLights),te.push(De.numRectAreaLights),te.push(De.numDirLightShadows),te.push(De.numPointLightShadows),te.push(De.numSpotLightShadows),te.push(De.shadowMapType),te.push(De.toneMapping),te.push(De.numClippingPlanes),te.push(De.numClipIntersection)}(De,te),function ae(te,De){f.disableAll(),De.isWebGL2&&f.enable(0),De.supportsVertexTextures&&f.enable(1),De.instancing&&f.enable(2),De.instancingColor&&f.enable(3),De.map&&f.enable(4),De.matcap&&f.enable(5),De.envMap&&f.enable(6),De.envMapCubeUV&&f.enable(7),De.lightMap&&f.enable(8),De.aoMap&&f.enable(9),De.emissiveMap&&f.enable(10),De.bumpMap&&f.enable(11),De.normalMap&&f.enable(12),De.objectSpaceNormalMap&&f.enable(13),De.tangentSpaceNormalMap&&f.enable(14),De.clearcoat&&f.enable(15),De.clearcoatMap&&f.enable(16),De.clearcoatRoughnessMap&&f.enable(17),De.clearcoatNormalMap&&f.enable(18),De.displacementMap&&f.enable(19),De.specularMap&&f.enable(20),De.roughnessMap&&f.enable(21),De.metalnessMap&&f.enable(22),De.gradientMap&&f.enable(23),De.alphaMap&&f.enable(24),De.alphaTest&&f.enable(25),De.vertexColors&&f.enable(26),De.vertexAlphas&&f.enable(27),De.vertexUvs&&f.enable(28),De.vertexTangents&&f.enable(29),De.uvsVertexOnly&&f.enable(30),De.fog&&f.enable(31),te.push(f.mask),f.disableAll(),De.useFog&&f.enable(0),De.flatShading&&f.enable(1),De.logarithmicDepthBuffer&&f.enable(2),De.skinning&&f.enable(3),De.useVertexTexture&&f.enable(4),De.morphTargets&&f.enable(5),De.morphNormals&&f.enable(6),De.premultipliedAlpha&&f.enable(7),De.shadowMapEnabled&&f.enable(8),De.physicallyCorrectLights&&f.enable(9),De.doubleSided&&f.enable(10),De.flipSided&&f.enable(11),De.depthPacking&&f.enable(12),De.dithering&&f.enable(13),De.specularIntensityMap&&f.enable(14),De.specularColorMap&&f.enable(15),De.transmission&&f.enable(16),De.transmissionMap&&f.enable(17),De.thicknessMap&&f.enable(18),De.sheen&&f.enable(19),De.sheenColorMap&&f.enable(20),De.sheenRoughnessMap&&f.enable(21),De.decodeVideoTexture&&f.enable(22),De.transparent&&f.enable(23),te.push(f.mask)}(De,te),De.push(d.outputEncoding)),De.push(te.customProgramCacheKey),De.join()},getUniforms:function me(te){const De=K[te.type];let He;return He=De?R.clone(Ra[De].uniforms):te.uniforms,He},acquireProgram:function be(te,De){let He;for(let je=0,Je=v.length;je<Je;je++){const Ze=v[je];if(Ze.cacheKey===De){He=Ze,++He.usedTimes;break}}return void 0===He&&(He=new fy(d,De,te,c),v.push(He)),He},releaseProgram:function Le(te){if(0==--te.usedTimes){const De=v.indexOf(te);v[De]=v[v.length-1],v.pop(),te.destroy()}},releaseShaderCache:function lt(te){m.remove(te)},programs:v,dispose:function Ye(){m.dispose()}}}function py(){let d=new WeakMap;return{get:function e(c){let h=d.get(c);return void 0===h&&(h={},d.set(c,h)),h},remove:function t(c){d.delete(c)},update:function r(c,h,f){d.get(c)[h]=f},dispose:function o(){d=new WeakMap}}}function Pl(d,e){return d.groupOrder!==e.groupOrder?d.groupOrder-e.groupOrder:d.renderOrder!==e.renderOrder?d.renderOrder-e.renderOrder:d.material.id!==e.material.id?d.material.id-e.material.id:d.z!==e.z?d.z-e.z:d.id-e.id}function vf(d,e){return d.groupOrder!==e.groupOrder?d.groupOrder-e.groupOrder:d.renderOrder!==e.renderOrder?d.renderOrder-e.renderOrder:d.z!==e.z?e.z-d.z:d.id-e.id}function Eg(){const d=[];let e=0;const t=[],r=[],o=[];function h(w,S,A,N,H,K){let B=d[e];return void 0===B?(B={id:w.id,object:w,geometry:S,material:A,groupOrder:N,renderOrder:w.renderOrder,z:H,group:K},d[e]=B):(B.id=w.id,B.object=w,B.geometry=S,B.material=A,B.groupOrder=N,B.renderOrder=w.renderOrder,B.z=H,B.group=K),e++,B}return{opaque:t,transmissive:r,transparent:o,init:function c(){e=0,t.length=0,r.length=0,o.length=0},push:function f(w,S,A,N,H,K){const B=h(w,S,A,N,H,K);A.transmission>0?r.push(B):!0===A.transparent?o.push(B):t.push(B)},unshift:function m(w,S,A,N,H,K){const B=h(w,S,A,N,H,K);A.transmission>0?r.unshift(B):!0===A.transparent?o.unshift(B):t.unshift(B)},finish:function M(){for(let w=e,S=d.length;w<S;w++){const A=d[w];if(null===A.id)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}},sort:function v(w,S){t.length>1&&t.sort(w||Pl),r.length>1&&r.sort(S||vf),o.length>1&&o.sort(S||vf)}}}function yf(){let d=new WeakMap;return{get:function e(r,o){let c;return!1===d.has(r)?(c=new Eg,d.set(r,[c])):o>=d.get(r).length?(c=new Eg,d.get(r).push(c)):c=d.get(r)[o],c},dispose:function t(){d=new WeakMap}}}function gy(){const d={};return{get:function(e){if(void 0!==d[e.id])return d[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new re,color:new Ht};break;case"SpotLight":t={position:new re,direction:new re,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new re,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new re,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":t={color:new Ht,position:new re,halfWidth:new re,halfHeight:new re}}return d[e.id]=t,t}}}let my=0;function vy(d,e){return(e.castShadow?1:0)-(d.castShadow?1:0)}function Ou(d,e){const t=new gy,r=function Sg(){const d={};return{get:function(e){if(void 0!==d[e.id])return d[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3}}return d[e.id]=t,t}}}(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let M=0;M<9;M++)o.probe.push(new re);const c=new re,h=new Qt,f=new Qt;return{setup:function m(M,w){let S=0,A=0,N=0;for(let lt=0;lt<9;lt++)o.probe[lt].set(0,0,0);let H=0,K=0,B=0,D=0,ie=0,$=0,ae=0,me=0;M.sort(vy);const be=!0!==w?Math.PI:1;for(let lt=0,Ye=M.length;lt<Ye;lt++){const te=M[lt],De=te.color,He=te.intensity,je=te.distance,Je=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)S+=De.r*He*be,A+=De.g*He*be,N+=De.b*He*be;else if(te.isLightProbe)for(let Ze=0;Ze<9;Ze++)o.probe[Ze].addScaledVector(te.sh.coefficients[Ze],He);else if(te.isDirectionalLight){const Ze=t.get(te);if(Ze.color.copy(te.color).multiplyScalar(te.intensity*be),te.castShadow){const vt=te.shadow,At=r.get(te);At.shadowBias=vt.bias,At.shadowNormalBias=vt.normalBias,At.shadowRadius=vt.radius,At.shadowMapSize=vt.mapSize,o.directionalShadow[H]=At,o.directionalShadowMap[H]=Je,o.directionalShadowMatrix[H]=te.shadow.matrix,$++}o.directional[H]=Ze,H++}else if(te.isSpotLight){const Ze=t.get(te);if(Ze.position.setFromMatrixPosition(te.matrixWorld),Ze.color.copy(De).multiplyScalar(He*be),Ze.distance=je,Ze.coneCos=Math.cos(te.angle),Ze.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),Ze.decay=te.decay,te.castShadow){const vt=te.shadow,At=r.get(te);At.shadowBias=vt.bias,At.shadowNormalBias=vt.normalBias,At.shadowRadius=vt.radius,At.shadowMapSize=vt.mapSize,o.spotShadow[B]=At,o.spotShadowMap[B]=Je,o.spotShadowMatrix[B]=te.shadow.matrix,me++}o.spot[B]=Ze,B++}else if(te.isRectAreaLight){const Ze=t.get(te);Ze.color.copy(De).multiplyScalar(He),Ze.halfWidth.set(.5*te.width,0,0),Ze.halfHeight.set(0,.5*te.height,0),o.rectArea[D]=Ze,D++}else if(te.isPointLight){const Ze=t.get(te);if(Ze.color.copy(te.color).multiplyScalar(te.intensity*be),Ze.distance=te.distance,Ze.decay=te.decay,te.castShadow){const vt=te.shadow,At=r.get(te);At.shadowBias=vt.bias,At.shadowNormalBias=vt.normalBias,At.shadowRadius=vt.radius,At.shadowMapSize=vt.mapSize,At.shadowCameraNear=vt.camera.near,At.shadowCameraFar=vt.camera.far,o.pointShadow[K]=At,o.pointShadowMap[K]=Je,o.pointShadowMatrix[K]=te.shadow.matrix,ae++}o.point[K]=Ze,K++}else if(te.isHemisphereLight){const Ze=t.get(te);Ze.skyColor.copy(te.color).multiplyScalar(He*be),Ze.groundColor.copy(te.groundColor).multiplyScalar(He*be),o.hemi[ie]=Ze,ie++}}D>0&&(e.isWebGL2||!0===d.has("OES_texture_float_linear")?(o.rectAreaLTC1=Zt.LTC_FLOAT_1,o.rectAreaLTC2=Zt.LTC_FLOAT_2):!0===d.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=Zt.LTC_HALF_1,o.rectAreaLTC2=Zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=S,o.ambient[1]=A,o.ambient[2]=N;const Le=o.hash;(Le.directionalLength!==H||Le.pointLength!==K||Le.spotLength!==B||Le.rectAreaLength!==D||Le.hemiLength!==ie||Le.numDirectionalShadows!==$||Le.numPointShadows!==ae||Le.numSpotShadows!==me)&&(o.directional.length=H,o.spot.length=B,o.rectArea.length=D,o.point.length=K,o.hemi.length=ie,o.directionalShadow.length=$,o.directionalShadowMap.length=$,o.pointShadow.length=ae,o.pointShadowMap.length=ae,o.spotShadow.length=me,o.spotShadowMap.length=me,o.directionalShadowMatrix.length=$,o.pointShadowMatrix.length=ae,o.spotShadowMatrix.length=me,Le.directionalLength=H,Le.pointLength=K,Le.spotLength=B,Le.rectAreaLength=D,Le.hemiLength=ie,Le.numDirectionalShadows=$,Le.numPointShadows=ae,Le.numSpotShadows=me,o.version=my++)},setupView:function v(M,w){let S=0,A=0,N=0,H=0,K=0;const B=w.matrixWorldInverse;for(let D=0,ie=M.length;D<ie;D++){const $=M[D];if($.isDirectionalLight){const ae=o.directional[S];ae.direction.setFromMatrixPosition($.matrixWorld),c.setFromMatrixPosition($.target.matrixWorld),ae.direction.sub(c),ae.direction.transformDirection(B),S++}else if($.isSpotLight){const ae=o.spot[N];ae.position.setFromMatrixPosition($.matrixWorld),ae.position.applyMatrix4(B),ae.direction.setFromMatrixPosition($.matrixWorld),c.setFromMatrixPosition($.target.matrixWorld),ae.direction.sub(c),ae.direction.transformDirection(B),N++}else if($.isRectAreaLight){const ae=o.rectArea[H];ae.position.setFromMatrixPosition($.matrixWorld),ae.position.applyMatrix4(B),f.identity(),h.copy($.matrixWorld),h.premultiply(B),f.extractRotation(h),ae.halfWidth.set(.5*$.width,0,0),ae.halfHeight.set(0,.5*$.height,0),ae.halfWidth.applyMatrix4(f),ae.halfHeight.applyMatrix4(f),H++}else if($.isPointLight){const ae=o.point[A];ae.position.setFromMatrixPosition($.matrixWorld),ae.position.applyMatrix4(B),A++}else if($.isHemisphereLight){const ae=o.hemi[K];ae.direction.setFromMatrixPosition($.matrixWorld),ae.direction.transformDirection(B),ae.direction.normalize(),K++}}},state:o}}function gc(d,e){const t=new Ou(d,e),r=[],o=[];return{init:function c(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:t},setupLights:function m(w){t.setup(r,w)},setupLightsView:function v(w){t.setupView(r,w)},pushLight:function h(w){r.push(w)},pushShadow:function f(w){o.push(w)}}}function _f(d,e){let t=new WeakMap;return{get:function r(c,h=0){let f;return!1===t.has(c)?(f=new gc(d,e),t.set(c,[f])):h>=t.get(c).length?(f=new gc(d,e),t.get(c).push(f)):f=t.get(c)[h],f},dispose:function o(){t=new WeakMap}}}class Il extends Sn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Il.prototype.isMeshDepthMaterial=!0;class mc extends Sn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function xf(d,e,t){let r=new lc;const o=new _t,c=new _t,h=new wi,f=new Il({depthPacking:3201}),m=new mc,v={},M=t.maxTextureSize,w={0:1,1:it,2:Ge},S=new Ke({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _t},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),A=S.clone();A.defines.HORIZONTAL_PASS=1;const N=new Pn;N.setAttribute("position",new ci(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const H=new br(N,S),K=this;function B($,ae){const me=e.update(H);S.defines.VSM_SAMPLES!==$.blurSamples&&(S.defines.VSM_SAMPLES=$.blurSamples,A.defines.VSM_SAMPLES=$.blurSamples,S.needsUpdate=!0,A.needsUpdate=!0),S.uniforms.shadow_pass.value=$.map.texture,S.uniforms.resolution.value=$.mapSize,S.uniforms.radius.value=$.radius,d.setRenderTarget($.mapPass),d.clear(),d.renderBufferDirect(ae,null,me,S,H,null),A.uniforms.shadow_pass.value=$.mapPass.texture,A.uniforms.resolution.value=$.mapSize,A.uniforms.radius.value=$.radius,d.setRenderTarget($.map),d.clear(),d.renderBufferDirect(ae,null,me,A,H,null)}function D($,ae,me,be,Le,lt,Ye){let te=null;const De=!0===be.isPointLight?$.customDistanceMaterial:$.customDepthMaterial;if(te=void 0!==De?De:!0===be.isPointLight?m:f,d.localClippingEnabled&&!0===me.clipShadows&&0!==me.clippingPlanes.length||me.displacementMap&&0!==me.displacementScale||me.alphaMap&&me.alphaTest>0){const He=te.uuid,je=me.uuid;let Je=v[He];void 0===Je&&(Je={},v[He]=Je);let Ze=Je[je];void 0===Ze&&(Ze=te.clone(),Je[je]=Ze),te=Ze}return te.visible=me.visible,te.wireframe=me.wireframe,te.side=3===Ye?null!==me.shadowSide?me.shadowSide:me.side:null!==me.shadowSide?me.shadowSide:w[me.side],te.alphaMap=me.alphaMap,te.alphaTest=me.alphaTest,te.clipShadows=me.clipShadows,te.clippingPlanes=me.clippingPlanes,te.clipIntersection=me.clipIntersection,te.displacementMap=me.displacementMap,te.displacementScale=me.displacementScale,te.displacementBias=me.displacementBias,te.wireframeLinewidth=me.wireframeLinewidth,te.linewidth=me.linewidth,!0===be.isPointLight&&!0===te.isMeshDistanceMaterial&&(te.referencePosition.setFromMatrixPosition(be.matrixWorld),te.nearDistance=Le,te.farDistance=lt),te}function ie($,ae,me,be,Le){if(!1===$.visible)return;if($.layers.test(ae.layers)&&($.isMesh||$.isLine||$.isPoints)&&($.castShadow||$.receiveShadow&&3===Le)&&(!$.frustumCulled||r.intersectsObject($))){$.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,$.matrixWorld);const te=e.update($),De=$.material;if(Array.isArray(De)){const He=te.groups;for(let je=0,Je=He.length;je<Je;je++){const Ze=He[je],vt=De[Ze.materialIndex];if(vt&&vt.visible){const At=D($,0,vt,be,me.near,me.far,Le);d.renderBufferDirect(me,null,te,At,$,Ze)}}}else if(De.visible){const He=D($,0,De,be,me.near,me.far,Le);d.renderBufferDirect(me,null,te,He,$,null)}}const Ye=$.children;for(let te=0,De=Ye.length;te<De;te++)ie(Ye[te],ae,me,be,Le)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function($,ae,me){if(!1===K.enabled||!1===K.autoUpdate&&!1===K.needsUpdate||0===$.length)return;const be=d.getRenderTarget(),Le=d.getActiveCubeFace(),lt=d.getActiveMipmapLevel(),Ye=d.state;Ye.setBlending(0),Ye.buffers.color.setClear(1,1,1,1),Ye.buffers.depth.setTest(!0),Ye.setScissorTest(!1);for(let te=0,De=$.length;te<De;te++){const He=$[te],je=He.shadow;if(void 0===je){console.warn("THREE.WebGLShadowMap:",He,"has no shadow.");continue}if(!1===je.autoUpdate&&!1===je.needsUpdate)continue;o.copy(je.mapSize);const Je=je.getFrameExtents();if(o.multiply(Je),c.copy(je.mapSize),(o.x>M||o.y>M)&&(o.x>M&&(c.x=Math.floor(M/Je.x),o.x=c.x*Je.x,je.mapSize.x=c.x),o.y>M&&(c.y=Math.floor(M/Je.y),o.y=c.y*Je.y,je.mapSize.y=c.y)),null===je.map&&!je.isPointLightShadow&&3===this.type){const vt={minFilter:wn,magFilter:wn,format:pn};je.map=new Qr(o.x,o.y,vt),je.map.texture.name=He.name+".shadowMap",je.mapPass=new Qr(o.x,o.y,vt),je.camera.updateProjectionMatrix()}null===je.map&&(je.map=new Qr(o.x,o.y,{minFilter:Lt,magFilter:Lt,format:pn}),je.map.texture.name=He.name+".shadowMap",je.camera.updateProjectionMatrix()),d.setRenderTarget(je.map),d.clear();const Ze=je.getViewportCount();for(let vt=0;vt<Ze;vt++){const At=je.getViewport(vt);h.set(c.x*At.x,c.y*At.y,c.x*At.z,c.y*At.w),Ye.viewport(h),je.updateMatrices(He,vt),r=je.getFrustum(),ie(ae,me,je.camera,He,this.type)}!je.isPointLightShadow&&3===this.type&&B(je,me),je.needsUpdate=!1}K.needsUpdate=!1,d.setRenderTarget(be,Le,lt)}}function Cg(d,e,t){const r=t.isWebGL2,f=new function o(){let Pe=!1;const xn=new wi;let nn=null;const Vn=new wi(0,0,0,0);return{setMask:function(bt){nn!==bt&&!Pe&&(d.colorMask(bt,bt,bt,bt),nn=bt)},setLocked:function(bt){Pe=bt},setClear:function(bt,In,Mi,Lr,ro){!0===ro&&(bt*=Lr,In*=Lr,Mi*=Lr),xn.set(bt,In,Mi,Lr),!1===Vn.equals(xn)&&(d.clearColor(bt,In,Mi,Lr),Vn.copy(xn))},reset:function(){Pe=!1,nn=null,Vn.set(-1,0,0,0)}}},m=new function c(){let Pe=!1,xn=null,nn=null,Vn=null;return{setTest:function(bt){bt?ct(2929):zi(2929)},setMask:function(bt){xn!==bt&&!Pe&&(d.depthMask(bt),xn=bt)},setFunc:function(bt){if(nn!==bt){if(bt)switch(bt){case 0:d.depthFunc(512);break;case 1:d.depthFunc(519);break;case 2:d.depthFunc(513);break;case 3:default:d.depthFunc(515);break;case 4:d.depthFunc(514);break;case 5:d.depthFunc(518);break;case 6:d.depthFunc(516);break;case 7:d.depthFunc(517)}else d.depthFunc(515);nn=bt}},setLocked:function(bt){Pe=bt},setClear:function(bt){Vn!==bt&&(d.clearDepth(bt),Vn=bt)},reset:function(){Pe=!1,xn=null,nn=null,Vn=null}}},v=new function h(){let Pe=!1,xn=null,nn=null,Vn=null,bt=null,In=null,Mi=null,Lr=null,ro=null;return{setTest:function(Vr){Pe||(Vr?ct(2960):zi(2960))},setMask:function(Vr){xn!==Vr&&!Pe&&(d.stencilMask(Vr),xn=Vr)},setFunc:function(Vr,fa,hl){(nn!==Vr||Vn!==fa||bt!==hl)&&(d.stencilFunc(Vr,fa,hl),nn=Vr,Vn=fa,bt=hl)},setOp:function(Vr,fa,hl){(In!==Vr||Mi!==fa||Lr!==hl)&&(d.stencilOp(Vr,fa,hl),In=Vr,Mi=fa,Lr=hl)},setLocked:function(Vr){Pe=Vr},setClear:function(Vr){ro!==Vr&&(d.clearStencil(Vr),ro=Vr)},reset:function(){Pe=!1,xn=null,nn=null,Vn=null,bt=null,In=null,Mi=null,Lr=null,ro=null}}};let M={},w={},S=new WeakMap,A=[],N=null,H=!1,K=null,B=null,D=null,ie=null,$=null,ae=null,me=null,be=!1,Le=null,lt=null,Ye=null,te=null,De=null;const He=d.getParameter(35661);let je=!1,Je=0;const Ze=d.getParameter(7938);-1!==Ze.indexOf("WebGL")?(Je=parseFloat(/^WebGL (\d)/.exec(Ze)[1]),je=Je>=1):-1!==Ze.indexOf("OpenGL ES")&&(Je=parseFloat(/^OpenGL ES (\d)/.exec(Ze)[1]),je=Je>=2);let vt=null,At={};const gn=d.getParameter(3088),gt=d.getParameter(2978),Et=(new wi).fromArray(gn),qt=(new wi).fromArray(gt);function mn(Pe,xn,nn){const Vn=new Uint8Array(4),bt=d.createTexture();d.bindTexture(Pe,bt),d.texParameteri(Pe,10241,9728),d.texParameteri(Pe,10240,9728);for(let In=0;In<nn;In++)d.texImage2D(xn+In,0,6408,1,1,0,6408,5121,Vn);return bt}const Tn={};function ct(Pe){!0!==M[Pe]&&(d.enable(Pe),M[Pe]=!0)}function zi(Pe){!1!==M[Pe]&&(d.disable(Pe),M[Pe]=!1)}Tn[3553]=mn(3553,3553,1),Tn[34067]=mn(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),v.setClear(0),ct(2929),m.setFunc(3),Vt(!1),ln(1),ct(2884),xt(0);const ui={100:32774,101:32778,102:32779};if(r)ui[103]=32775,ui[104]=32776;else{const Pe=e.get("EXT_blend_minmax");null!==Pe&&(ui[103]=Pe.MIN_EXT,ui[104]=Pe.MAX_EXT)}const zn={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function xt(Pe,xn,nn,Vn,bt,In,Mi,Lr){if(0!==Pe){if(!1===H&&(ct(3042),H=!0),5===Pe)bt=bt||xn,In=In||nn,Mi=Mi||Vn,(xn!==B||bt!==$)&&(d.blendEquationSeparate(ui[xn],ui[bt]),B=xn,$=bt),(nn!==D||Vn!==ie||In!==ae||Mi!==me)&&(d.blendFuncSeparate(zn[nn],zn[Vn],zn[In],zn[Mi]),D=nn,ie=Vn,ae=In,me=Mi),K=Pe,be=null;else if(Pe!==K||Lr!==be){if((100!==B||100!==$)&&(d.blendEquation(32774),B=100,$=100),Lr)switch(Pe){case 1:d.blendFuncSeparate(1,771,1,771);break;case Ui:d.blendFunc(1,1);break;case 3:d.blendFuncSeparate(0,769,0,1);break;case 4:d.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}else switch(Pe){case 1:d.blendFuncSeparate(770,771,1,771);break;case Ui:d.blendFunc(770,1);break;case 3:d.blendFuncSeparate(0,769,0,1);break;case 4:d.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}D=null,ie=null,ae=null,me=null,K=Pe,be=Lr}}else!0===H&&(zi(3042),H=!1)}function Vt(Pe){Le!==Pe&&(d.frontFace(Pe?2304:2305),Le=Pe)}function ln(Pe){0!==Pe?(ct(2884),Pe!==lt&&d.cullFace(1===Pe?1029:2===Pe?1028:1032)):zi(2884),lt=Pe}function Gn(Pe,xn,nn){Pe?(ct(32823),(te!==xn||De!==nn)&&(d.polygonOffset(xn,nn),te=xn,De=nn)):zi(32823)}function Di(Pe){void 0===Pe&&(Pe=33984+He-1),vt!==Pe&&(d.activeTexture(Pe),vt=Pe)}return{buffers:{color:f,depth:m,stencil:v},enable:ct,disable:zi,bindFramebuffer:function Mn(Pe,xn){return w[Pe]!==xn&&(d.bindFramebuffer(Pe,xn),w[Pe]=xn,r&&(36009===Pe&&(w[36160]=xn),36160===Pe&&(w[36009]=xn)),!0)},drawBuffers:function Zn(Pe,xn){let nn=A,Vn=!1;if(Pe)if(nn=S.get(xn),void 0===nn&&(nn=[],S.set(xn,nn)),Pe.isWebGLMultipleRenderTargets){const bt=Pe.texture;if(nn.length!==bt.length||36064!==nn[0]){for(let In=0,Mi=bt.length;In<Mi;In++)nn[In]=36064+In;nn.length=bt.length,Vn=!0}}else 36064!==nn[0]&&(nn[0]=36064,Vn=!0);else 1029!==nn[0]&&(nn[0]=1029,Vn=!0);Vn&&(t.isWebGL2?d.drawBuffers(nn):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(nn))},useProgram:function sn(Pe){return N!==Pe&&(d.useProgram(Pe),N=Pe,!0)},setBlending:xt,setMaterial:function Wt(Pe,xn){Pe.side===Ge?zi(2884):ct(2884);let nn=1===Pe.side;xn&&(nn=!nn),Vt(nn),1===Pe.blending&&!1===Pe.transparent?xt(0):xt(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.premultipliedAlpha),m.setFunc(Pe.depthFunc),m.setTest(Pe.depthTest),m.setMask(Pe.depthWrite),f.setMask(Pe.colorWrite);const Vn=Pe.stencilWrite;v.setTest(Vn),Vn&&(v.setMask(Pe.stencilWriteMask),v.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),v.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),Gn(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),!0===Pe.alphaToCoverage?ct(32926):zi(32926)},setFlipSided:Vt,setCullFace:ln,setLineWidth:function Xt(Pe){Pe!==Ye&&(je&&d.lineWidth(Pe),Ye=Pe)},setPolygonOffset:Gn,setScissorTest:function Wn(Pe){Pe?ct(3089):zi(3089)},activeTexture:Di,bindTexture:function fr(Pe,xn){null===vt&&Di();let nn=At[vt];void 0===nn&&(nn={type:void 0,texture:void 0},At[vt]=nn),(nn.type!==Pe||nn.texture!==xn)&&(d.bindTexture(Pe,xn||Tn[Pe]),nn.type=Pe,nn.texture=xn)},unbindTexture:function tr(){const Pe=At[vt];void 0!==Pe&&void 0!==Pe.type&&(d.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)},compressedTexImage2D:function _e(){try{d.compressedTexImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage2D:function Dn(){try{d.texImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage3D:function Cn(){try{d.texImage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texStorage2D:function En(){try{d.texStorage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texStorage3D:function pt(){try{d.texStorage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texSubImage2D:function le(){try{d.texSubImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texSubImage3D:function yt(){try{d.texSubImage3D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},compressedTexSubImage2D:function zt(){try{d.compressedTexSubImage2D.apply(d,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},scissor:function en(Pe){!1===Et.equals(Pe)&&(d.scissor(Pe.x,Pe.y,Pe.z,Pe.w),Et.copy(Pe))},viewport:function $t(Pe){!1===qt.equals(Pe)&&(d.viewport(Pe.x,Pe.y,Pe.z,Pe.w),qt.copy(Pe))},reset:function Yn(){d.disable(3042),d.disable(2884),d.disable(2929),d.disable(32823),d.disable(3089),d.disable(2960),d.disable(32926),d.blendEquation(32774),d.blendFunc(1,0),d.blendFuncSeparate(1,0,1,0),d.colorMask(!0,!0,!0,!0),d.clearColor(0,0,0,0),d.depthMask(!0),d.depthFunc(513),d.clearDepth(1),d.stencilMask(4294967295),d.stencilFunc(519,0,4294967295),d.stencilOp(7680,7680,7680),d.clearStencil(0),d.cullFace(1029),d.frontFace(2305),d.polygonOffset(0,0),d.activeTexture(33984),d.bindFramebuffer(36160,null),!0===r&&(d.bindFramebuffer(36009,null),d.bindFramebuffer(36008,null)),d.useProgram(null),d.lineWidth(1),d.scissor(0,0,d.canvas.width,d.canvas.height),d.viewport(0,0,d.canvas.width,d.canvas.height),M={},vt=null,At={},w={},S=new WeakMap,A=[],N=null,H=!1,K=null,B=null,D=null,ie=null,$=null,ae=null,me=null,be=!1,Le=null,lt=null,Ye=null,te=null,De=null,Et.set(0,0,d.canvas.width,d.canvas.height),qt.set(0,0,d.canvas.width,d.canvas.height),f.reset(),m.reset(),v.reset()}}}function bf(d,e,t,r,o,c,h){const f=o.isWebGL2,m=o.maxTextures,v=o.maxCubemapSize,M=o.maxTextureSize,w=o.maxSamples,A=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,N=new WeakMap;let H,K=!1;try{K="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(_e){}function B(_e,le){return K?new OffscreenCanvas(_e,le):vl("canvas")}function D(_e,le,yt,zt){let En=1;if((_e.width>zt||_e.height>zt)&&(En=zt/Math.max(_e.width,_e.height)),En<1||!0===le){if("undefined"!=typeof HTMLImageElement&&_e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&_e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&_e instanceof ImageBitmap){const pt=le?Tc:Math.floor,Dn=pt(En*_e.width),Cn=pt(En*_e.height);void 0===H&&(H=B(Dn,Cn));const en=yt?B(Dn,Cn):H;return en.width=Dn,en.height=Cn,en.getContext("2d").drawImage(_e,0,0,Dn,Cn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_e.width+"x"+_e.height+") to ("+Dn+"x"+Cn+")."),en}return"data"in _e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_e.width+"x"+_e.height+")."),_e}return _e}function ie(_e){return Xs(_e.width)&&Xs(_e.height)}function ae(_e,le){return _e.generateMipmaps&&le&&_e.minFilter!==Lt&&_e.minFilter!==wn}function me(_e){d.generateMipmap(_e)}function be(_e,le,yt,zt,En=!1){if(!1===f)return le;if(null!==_e){if(void 0!==d[_e])return d[_e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+_e+"'")}let pt=le;return 6403===le&&(5126===yt&&(pt=33326),5131===yt&&(pt=33325),5121===yt&&(pt=33321)),33319===le&&(5126===yt&&(pt=33328),5131===yt&&(pt=33327),5121===yt&&(pt=33323)),6408===le&&(5126===yt&&(pt=34836),5131===yt&&(pt=34842),5121===yt&&(pt=zt===Ln&&!1===En?35907:32856),32819===yt&&(pt=32854),32820===yt&&(pt=32855)),(33325===pt||33326===pt||33327===pt||33328===pt||34842===pt||34836===pt)&&e.get("EXT_color_buffer_float"),pt}function Le(_e,le,yt){return!0===ae(_e,yt)||_e.isFramebufferTexture&&_e.minFilter!==Lt&&_e.minFilter!==wn?Math.log2(Math.max(le.width,le.height))+1:void 0!==_e.mipmaps&&_e.mipmaps.length>0?_e.mipmaps.length:_e.isCompressedTexture&&Array.isArray(_e.image)?le.mipmaps.length:1}function lt(_e){return _e===Lt||_e===Kn||_e===on?9728:9729}function Ye(_e){const le=_e.target;le.removeEventListener("dispose",Ye),function De(_e){const le=r.get(_e);void 0!==le.__webglInit&&(d.deleteTexture(le.__webglTexture),r.remove(_e))}(le),le.isVideoTexture&&N.delete(le),h.memory.textures--}function te(_e){const le=_e.target;le.removeEventListener("dispose",te),function He(_e){const le=_e.texture,yt=r.get(_e),zt=r.get(le);if(_e){if(void 0!==zt.__webglTexture&&(d.deleteTexture(zt.__webglTexture),h.memory.textures--),_e.depthTexture&&_e.depthTexture.dispose(),_e.isWebGLCubeRenderTarget)for(let En=0;En<6;En++)d.deleteFramebuffer(yt.__webglFramebuffer[En]),yt.__webglDepthbuffer&&d.deleteRenderbuffer(yt.__webglDepthbuffer[En]);else d.deleteFramebuffer(yt.__webglFramebuffer),yt.__webglDepthbuffer&&d.deleteRenderbuffer(yt.__webglDepthbuffer),yt.__webglMultisampledFramebuffer&&d.deleteFramebuffer(yt.__webglMultisampledFramebuffer),yt.__webglColorRenderbuffer&&d.deleteRenderbuffer(yt.__webglColorRenderbuffer),yt.__webglDepthRenderbuffer&&d.deleteRenderbuffer(yt.__webglDepthRenderbuffer);if(_e.isWebGLMultipleRenderTargets)for(let En=0,pt=le.length;En<pt;En++){const Dn=r.get(le[En]);Dn.__webglTexture&&(d.deleteTexture(Dn.__webglTexture),h.memory.textures--),r.remove(le[En])}r.remove(le),r.remove(_e)}}(le)}let je=0;function vt(_e,le){const yt=r.get(_e);if(_e.isVideoTexture&&function Xt(_e){const le=h.render.frame;N.get(_e)!==le&&(N.set(_e,le),_e.update())}(_e),_e.version>0&&yt.__version!==_e.version){const zt=_e.image;if(void 0===zt)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==zt.complete)return void ct(yt,_e,le);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+le),t.bindTexture(3553,yt.__webglTexture)}function gt(_e,le){const yt=r.get(_e);_e.version>0&&yt.__version!==_e.version?function zi(_e,le,yt){if(6!==le.image.length)return;Tn(_e,le),t.activeTexture(33984+yt),t.bindTexture(34067,_e.__webglTexture),d.pixelStorei(37440,le.flipY),d.pixelStorei(37441,le.premultiplyAlpha),d.pixelStorei(3317,le.unpackAlignment),d.pixelStorei(37443,0);const zt=le&&(le.isCompressedTexture||le.image[0].isCompressedTexture),En=le.image[0]&&le.image[0].isDataTexture,pt=[];for(let bt=0;bt<6;bt++)pt[bt]=zt||En?En?le.image[bt].image:le.image[bt]:D(le.image[bt],!1,!0,v),pt[bt]=Gn(le,pt[bt]);const Dn=pt[0],Cn=ie(Dn)||f,en=c.convert(le.format,le.encoding),$t=c.convert(le.type),Yn=be(le.internalFormat,en,$t,le.encoding),Pe=f&&!0!==le.isVideoTexture,xn=void 0===_e.__version;let Vn,nn=Le(le,Dn,Cn);if(mn(34067,le,Cn),zt){Pe&&xn&&t.texStorage2D(34067,nn,Yn,Dn.width,Dn.height);for(let bt=0;bt<6;bt++){Vn=pt[bt].mipmaps;for(let In=0;In<Vn.length;In++){const Mi=Vn[In];le.format!==pn?null!==en?Pe?t.compressedTexSubImage2D(34069+bt,In,0,0,Mi.width,Mi.height,en,Mi.data):t.compressedTexImage2D(34069+bt,In,Yn,Mi.width,Mi.height,0,Mi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?t.texSubImage2D(34069+bt,In,0,0,Mi.width,Mi.height,en,$t,Mi.data):t.texImage2D(34069+bt,In,Yn,Mi.width,Mi.height,0,en,$t,Mi.data)}}}else{Vn=le.mipmaps,Pe&&xn&&(Vn.length>0&&nn++,t.texStorage2D(34067,nn,Yn,pt[0].width,pt[0].height));for(let bt=0;bt<6;bt++)if(En){Pe?t.texSubImage2D(34069+bt,0,0,0,pt[bt].width,pt[bt].height,en,$t,pt[bt].data):t.texImage2D(34069+bt,0,Yn,pt[bt].width,pt[bt].height,0,en,$t,pt[bt].data);for(let In=0;In<Vn.length;In++){const Lr=Vn[In].image[bt].image;Pe?t.texSubImage2D(34069+bt,In+1,0,0,Lr.width,Lr.height,en,$t,Lr.data):t.texImage2D(34069+bt,In+1,Yn,Lr.width,Lr.height,0,en,$t,Lr.data)}}else{Pe?t.texSubImage2D(34069+bt,0,0,0,en,$t,pt[bt]):t.texImage2D(34069+bt,0,Yn,en,$t,pt[bt]);for(let In=0;In<Vn.length;In++){const Mi=Vn[In];Pe?t.texSubImage2D(34069+bt,In+1,0,0,en,$t,Mi.image[bt]):t.texImage2D(34069+bt,In+1,Yn,en,$t,Mi.image[bt])}}}ae(le,Cn)&&me(34067),_e.__version=le.version,le.onUpdate&&le.onUpdate(le)}(yt,_e,le):(t.activeTexture(33984+le),t.bindTexture(34067,yt.__webglTexture))}const Et={[Ce]:10497,[nt]:33071,[ft]:33648},qt={[Lt]:9728,[Kn]:9984,[on]:9986,[wn]:9729,[Hn]:9985,[Nn]:9987};function mn(_e,le,yt){if(yt?(d.texParameteri(_e,10242,Et[le.wrapS]),d.texParameteri(_e,10243,Et[le.wrapT]),(32879===_e||35866===_e)&&d.texParameteri(_e,32882,Et[le.wrapR]),d.texParameteri(_e,10240,qt[le.magFilter]),d.texParameteri(_e,10241,qt[le.minFilter])):(d.texParameteri(_e,10242,33071),d.texParameteri(_e,10243,33071),(32879===_e||35866===_e)&&d.texParameteri(_e,32882,33071),(le.wrapS!==nt||le.wrapT!==nt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),d.texParameteri(_e,10240,lt(le.magFilter)),d.texParameteri(_e,10241,lt(le.minFilter)),le.minFilter!==Lt&&le.minFilter!==wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const zt=e.get("EXT_texture_filter_anisotropic");if(le.type===as&&!1===e.has("OES_texture_float_linear")||!1===f&&le.type===ur&&!1===e.has("OES_texture_half_float_linear"))return;(le.anisotropy>1||r.get(le).__currentAnisotropy)&&(d.texParameterf(_e,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(le.anisotropy,o.getMaxAnisotropy())),r.get(le).__currentAnisotropy=le.anisotropy)}}function Tn(_e,le){void 0===_e.__webglInit&&(_e.__webglInit=!0,le.addEventListener("dispose",Ye),_e.__webglTexture=d.createTexture(),h.memory.textures++)}function ct(_e,le,yt){let zt=3553;le.isDataTexture2DArray&&(zt=35866),le.isDataTexture3D&&(zt=32879),Tn(_e,le),t.activeTexture(33984+yt),t.bindTexture(zt,_e.__webglTexture),d.pixelStorei(37440,le.flipY),d.pixelStorei(37441,le.premultiplyAlpha),d.pixelStorei(3317,le.unpackAlignment),d.pixelStorei(37443,0);const En=function $(_e){return!f&&(_e.wrapS!==nt||_e.wrapT!==nt||_e.minFilter!==Lt&&_e.minFilter!==wn)}(le)&&!1===ie(le.image);let pt=D(le.image,En,!1,M);pt=Gn(le,pt);const Dn=ie(pt)||f,Cn=c.convert(le.format,le.encoding);let Yn,en=c.convert(le.type),$t=be(le.internalFormat,Cn,en,le.encoding,le.isVideoTexture);mn(zt,le,Dn);const Pe=le.mipmaps,xn=f&&!0!==le.isVideoTexture,nn=void 0===_e.__version,Vn=Le(le,pt,Dn);if(le.isDepthTexture)$t=6402,f?$t=le.type===as?36012:1014===le.type?33190:le.type===Nr?35056:33189:le.type===as&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),le.format===Ni&&6402===$t&&le.type!==Yr&&1014!==le.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),le.type=Yr,en=c.convert(le.type)),le.format===Fr&&6402===$t&&($t=34041,le.type!==Nr&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),le.type=Nr,en=c.convert(le.type))),xn&&nn?t.texStorage2D(3553,1,$t,pt.width,pt.height):t.texImage2D(3553,0,$t,pt.width,pt.height,0,Cn,en,null);else if(le.isDataTexture)if(Pe.length>0&&Dn){xn&&nn&&t.texStorage2D(3553,Vn,$t,Pe[0].width,Pe[0].height);for(let bt=0,In=Pe.length;bt<In;bt++)Yn=Pe[bt],xn?t.texSubImage2D(3553,0,0,0,Yn.width,Yn.height,Cn,en,Yn.data):t.texImage2D(3553,bt,$t,Yn.width,Yn.height,0,Cn,en,Yn.data);le.generateMipmaps=!1}else xn?(nn&&t.texStorage2D(3553,Vn,$t,pt.width,pt.height),t.texSubImage2D(3553,0,0,0,pt.width,pt.height,Cn,en,pt.data)):t.texImage2D(3553,0,$t,pt.width,pt.height,0,Cn,en,pt.data);else if(le.isCompressedTexture){xn&&nn&&t.texStorage2D(3553,Vn,$t,Pe[0].width,Pe[0].height);for(let bt=0,In=Pe.length;bt<In;bt++)Yn=Pe[bt],le.format!==pn?null!==Cn?xn?t.compressedTexSubImage2D(3553,bt,0,0,Yn.width,Yn.height,Cn,Yn.data):t.compressedTexImage2D(3553,bt,$t,Yn.width,Yn.height,0,Yn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xn?t.texSubImage2D(3553,bt,0,0,Yn.width,Yn.height,Cn,en,Yn.data):t.texImage2D(3553,bt,$t,Yn.width,Yn.height,0,Cn,en,Yn.data)}else if(le.isDataTexture2DArray)xn?(nn&&t.texStorage3D(35866,Vn,$t,pt.width,pt.height,pt.depth),t.texSubImage3D(35866,0,0,0,0,pt.width,pt.height,pt.depth,Cn,en,pt.data)):t.texImage3D(35866,0,$t,pt.width,pt.height,pt.depth,0,Cn,en,pt.data);else if(le.isDataTexture3D)xn?(nn&&t.texStorage3D(32879,Vn,$t,pt.width,pt.height,pt.depth),t.texSubImage3D(32879,0,0,0,0,pt.width,pt.height,pt.depth,Cn,en,pt.data)):t.texImage3D(32879,0,$t,pt.width,pt.height,pt.depth,0,Cn,en,pt.data);else if(le.isFramebufferTexture)xn&&nn?t.texStorage2D(3553,Vn,$t,pt.width,pt.height):t.texImage2D(3553,0,$t,pt.width,pt.height,0,Cn,en,null);else if(Pe.length>0&&Dn){xn&&nn&&t.texStorage2D(3553,Vn,$t,Pe[0].width,Pe[0].height);for(let bt=0,In=Pe.length;bt<In;bt++)Yn=Pe[bt],xn?t.texSubImage2D(3553,bt,0,0,Cn,en,Yn):t.texImage2D(3553,bt,$t,Cn,en,Yn);le.generateMipmaps=!1}else xn?(nn&&t.texStorage2D(3553,Vn,$t,pt.width,pt.height),t.texSubImage2D(3553,0,0,0,Cn,en,pt)):t.texImage2D(3553,0,$t,Cn,en,pt);ae(le,Dn)&&me(zt),_e.__version=le.version,le.onUpdate&&le.onUpdate(le)}function Mn(_e,le,yt,zt,En){const pt=c.convert(yt.format,yt.encoding),Dn=c.convert(yt.type),Cn=be(yt.internalFormat,pt,Dn,yt.encoding);r.get(le).__hasExternalTextures||(32879===En||35866===En?t.texImage3D(En,0,Cn,le.width,le.height,le.depth,0,pt,Dn,null):t.texImage2D(En,0,Cn,le.width,le.height,0,pt,Dn,null)),t.bindFramebuffer(36160,_e),le.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,zt,En,r.get(yt).__webglTexture,0,ln(le)):d.framebufferTexture2D(36160,zt,En,r.get(yt).__webglTexture,0),t.bindFramebuffer(36160,null)}function Zn(_e,le,yt){if(d.bindRenderbuffer(36161,_e),le.depthBuffer&&!le.stencilBuffer){let zt=33189;if(yt||le.useRenderToTexture){const En=le.depthTexture;En&&En.isDepthTexture&&(En.type===as?zt=36012:1014===En.type&&(zt=33190));const pt=ln(le);le.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,pt,zt,le.width,le.height):d.renderbufferStorageMultisample(36161,pt,zt,le.width,le.height)}else d.renderbufferStorage(36161,zt,le.width,le.height);d.framebufferRenderbuffer(36160,36096,36161,_e)}else if(le.depthBuffer&&le.stencilBuffer){const zt=ln(le);yt&&le.useRenderbuffer?d.renderbufferStorageMultisample(36161,zt,35056,le.width,le.height):le.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,zt,35056,le.width,le.height):d.renderbufferStorage(36161,34041,le.width,le.height),d.framebufferRenderbuffer(36160,33306,36161,_e)}else{const zt=!0===le.isWebGLMultipleRenderTargets?le.texture[0]:le.texture,En=c.convert(zt.format,zt.encoding),pt=c.convert(zt.type),Dn=be(zt.internalFormat,En,pt,zt.encoding),Cn=ln(le);yt&&le.useRenderbuffer?d.renderbufferStorageMultisample(36161,Cn,Dn,le.width,le.height):le.useRenderToTexture?A.renderbufferStorageMultisampleEXT(36161,Cn,Dn,le.width,le.height):d.renderbufferStorage(36161,Dn,le.width,le.height)}d.bindRenderbuffer(36161,null)}function ui(_e){const le=r.get(_e),yt=!0===_e.isWebGLCubeRenderTarget;if(_e.depthTexture&&!le.__autoAllocateDepthBuffer){if(yt)throw new Error("target.depthTexture not supported in Cube render targets");!function sn(_e,le){if(le&&le.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,_e),!le.depthTexture||!le.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(le.depthTexture).__webglTexture||le.depthTexture.image.width!==le.width||le.depthTexture.image.height!==le.height)&&(le.depthTexture.image.width=le.width,le.depthTexture.image.height=le.height,le.depthTexture.needsUpdate=!0),vt(le.depthTexture,0);const zt=r.get(le.depthTexture).__webglTexture,En=ln(le);if(le.depthTexture.format===Ni)le.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,36096,3553,zt,0,En):d.framebufferTexture2D(36160,36096,3553,zt,0);else{if(le.depthTexture.format!==Fr)throw new Error("Unknown depthTexture format");le.useRenderToTexture?A.framebufferTexture2DMultisampleEXT(36160,33306,3553,zt,0,En):d.framebufferTexture2D(36160,33306,3553,zt,0)}}(le.__webglFramebuffer,_e)}else if(yt){le.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)t.bindFramebuffer(36160,le.__webglFramebuffer[zt]),le.__webglDepthbuffer[zt]=d.createRenderbuffer(),Zn(le.__webglDepthbuffer[zt],_e,!1)}else t.bindFramebuffer(36160,le.__webglFramebuffer),le.__webglDepthbuffer=d.createRenderbuffer(),Zn(le.__webglDepthbuffer,_e,!1);t.bindFramebuffer(36160,null)}function ln(_e){return f&&(_e.useRenderbuffer||_e.useRenderToTexture)?Math.min(w,_e.samples):0}function Gn(_e,le){const yt=_e.encoding,zt=_e.format,En=_e.type;return!0===_e.isCompressedTexture||!0===_e.isVideoTexture||1035===_e.format||yt!==gi&&(yt===Ln?!1===f?!0===e.has("EXT_sRGB")&&zt===pn?(_e.format=1035,_e.minFilter=wn,_e.generateMipmaps=!1):le=ao.sRGBToLinear(le):(zt!==pn||En!==ai)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",yt)),le}let Wn=!1,Di=!1;this.allocateTextureUnit=function Ze(){const _e=je;return _e>=m&&console.warn("THREE.WebGLTextures: Trying to use "+_e+" texture units while this GPU supports only "+m),je+=1,_e},this.resetTextureUnits=function Je(){je=0},this.setTexture2D=vt,this.setTexture2DArray=function At(_e,le){const yt=r.get(_e);_e.version>0&&yt.__version!==_e.version?ct(yt,_e,le):(t.activeTexture(33984+le),t.bindTexture(35866,yt.__webglTexture))},this.setTexture3D=function gn(_e,le){const yt=r.get(_e);_e.version>0&&yt.__version!==_e.version?ct(yt,_e,le):(t.activeTexture(33984+le),t.bindTexture(32879,yt.__webglTexture))},this.setTextureCube=gt,this.rebindTextures=function zn(_e,le,yt){const zt=r.get(_e);void 0!==le&&Mn(zt.__webglFramebuffer,_e,_e.texture,36064,3553),void 0!==yt&&ui(_e)},this.setupRenderTarget=function xt(_e){const le=_e.texture,yt=r.get(_e),zt=r.get(le);_e.addEventListener("dispose",te),!0!==_e.isWebGLMultipleRenderTargets&&(void 0===zt.__webglTexture&&(zt.__webglTexture=d.createTexture()),zt.__version=le.version,h.memory.textures++);const En=!0===_e.isWebGLCubeRenderTarget,pt=!0===_e.isWebGLMultipleRenderTargets,Dn=le.isDataTexture3D||le.isDataTexture2DArray,Cn=ie(_e)||f;if(En){yt.__webglFramebuffer=[];for(let en=0;en<6;en++)yt.__webglFramebuffer[en]=d.createFramebuffer()}else if(yt.__webglFramebuffer=d.createFramebuffer(),pt)if(o.drawBuffers){const en=_e.texture;for(let $t=0,Yn=en.length;$t<Yn;$t++){const Pe=r.get(en[$t]);void 0===Pe.__webglTexture&&(Pe.__webglTexture=d.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(_e.useRenderbuffer)if(f){yt.__webglMultisampledFramebuffer=d.createFramebuffer(),yt.__webglColorRenderbuffer=d.createRenderbuffer(),d.bindRenderbuffer(36161,yt.__webglColorRenderbuffer);const en=c.convert(le.format,le.encoding),$t=c.convert(le.type),Yn=be(le.internalFormat,en,$t,le.encoding),Pe=ln(_e);d.renderbufferStorageMultisample(36161,Pe,Yn,_e.width,_e.height),t.bindFramebuffer(36160,yt.__webglMultisampledFramebuffer),d.framebufferRenderbuffer(36160,36064,36161,yt.__webglColorRenderbuffer),d.bindRenderbuffer(36161,null),_e.depthBuffer&&(yt.__webglDepthRenderbuffer=d.createRenderbuffer(),Zn(yt.__webglDepthRenderbuffer,_e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(En){t.bindTexture(34067,zt.__webglTexture),mn(34067,le,Cn);for(let en=0;en<6;en++)Mn(yt.__webglFramebuffer[en],_e,le,36064,34069+en);ae(le,Cn)&&me(34067),t.unbindTexture()}else if(pt){const en=_e.texture;for(let $t=0,Yn=en.length;$t<Yn;$t++){const Pe=en[$t],xn=r.get(Pe);t.bindTexture(3553,xn.__webglTexture),mn(3553,Pe,Cn),Mn(yt.__webglFramebuffer,_e,Pe,36064+$t,3553),ae(Pe,Cn)&&me(3553)}t.unbindTexture()}else{let en=3553;Dn&&(f?en=le.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(en,zt.__webglTexture),mn(en,le,Cn),Mn(yt.__webglFramebuffer,_e,le,36064,en),ae(le,Cn)&&me(en),t.unbindTexture()}_e.depthBuffer&&ui(_e)},this.updateRenderTargetMipmap=function Wt(_e){const le=ie(_e)||f,yt=!0===_e.isWebGLMultipleRenderTargets?_e.texture:[_e.texture];for(let zt=0,En=yt.length;zt<En;zt++){const pt=yt[zt];if(ae(pt,le)){const Dn=_e.isWebGLCubeRenderTarget?34067:3553,Cn=r.get(pt).__webglTexture;t.bindTexture(Dn,Cn),me(Dn),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Vt(_e){if(_e.useRenderbuffer)if(f){const le=_e.width,yt=_e.height;let zt=16384;const En=[36064],pt=_e.stencilBuffer?33306:36096;_e.depthBuffer&&En.push(pt),_e.ignoreDepthForMultisampleCopy||(_e.depthBuffer&&(zt|=256),_e.stencilBuffer&&(zt|=1024));const Dn=r.get(_e);t.bindFramebuffer(36008,Dn.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Dn.__webglFramebuffer),_e.ignoreDepthForMultisampleCopy&&(d.invalidateFramebuffer(36008,[pt]),d.invalidateFramebuffer(36009,[pt])),d.blitFramebuffer(0,0,le,yt,0,0,le,yt,zt,9728),d.invalidateFramebuffer(36008,En),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Dn.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=ui,this.setupFrameBufferTexture=Mn,this.safeSetTexture2D=function fr(_e,le){_e&&_e.isWebGLRenderTarget&&(!1===Wn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Wn=!0),_e=_e.texture),vt(_e,le)},this.safeSetTextureCube=function tr(_e,le){_e&&_e.isWebGLCubeRenderTarget&&(!1===Di&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Di=!0),_e=_e.texture),gt(_e,le)}}function wf(d,e,t){const r=t.isWebGL2;return{convert:function o(c,h=null){let f;if(c===ai)return 5121;if(1017===c)return 32819;if(1018===c)return 32820;if(1010===c)return 5120;if(1011===c)return 5122;if(c===Yr)return 5123;if(1013===c)return 5124;if(1014===c)return 5125;if(c===as)return 5126;if(c===ur)return r?5131:(f=e.get("OES_texture_half_float"),null!==f?f.HALF_FLOAT_OES:null);if(1021===c)return 6406;if(c===pn)return 6408;if(1024===c)return 6409;if(1025===c)return 6410;if(c===Ni)return 6402;if(c===Fr)return 34041;if(1028===c)return 6403;if(1022===c)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===c)return f=e.get("EXT_sRGB"),null!==f?f.SRGB_ALPHA_EXT:null;if(1029===c)return 36244;if(1030===c)return 33319;if(1031===c)return 33320;if(1033===c)return 36249;if(33776===c||33777===c||33778===c||33779===c)if(h===Ln){if(f=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===f)return null;if(33776===c)return f.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===c)return f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(f=e.get("WEBGL_compressed_texture_s3tc"),null===f)return null;if(33776===c)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(f=e.get("WEBGL_compressed_texture_pvrtc"),null===f)return null;if(35840===c)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return f=e.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===c||37496===c){if(f=e.get("WEBGL_compressed_texture_etc"),null===f)return null;if(37492===c)return h===Ln?f.COMPRESSED_SRGB8_ETC2:f.COMPRESSED_RGB8_ETC2;if(37496===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c){if(f=e.get("WEBGL_compressed_texture_astc"),null===f)return null;if(37808===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:f.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:f.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:f.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:f.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:f.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:f.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:f.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:f.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:f.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:f.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:f.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:f.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:f.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===c)return h===Ln?f.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:f.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===c){if(f=e.get("EXT_texture_compression_bptc"),null===f)return null;if(36492===c)return h===Ln?f.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:f.COMPRESSED_RGBA_BPTC_UNORM_EXT}return c===Nr?r?34042:(f=e.get("WEBGL_depth_texture"),null!==f?f.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}mc.prototype.isMeshDistanceMaterial=!0;class Mf extends dn{constructor(e=[]){super(),this.cameras=e}}Mf.prototype.isArrayCamera=!0;class La extends _i{constructor(){super(),this.type="Group"}}La.prototype.isGroup=!0;const _y={type:"move"};class Vd{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new La,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new La,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new La,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let o=null,c=null,h=null;const f=this._targetRay,m=this._grip,v=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==f&&(o=t.getPose(e.targetRaySpace,r),null!==o&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(_y))),v&&e.hand){h=!0;for(const H of e.hand.values()){const K=t.getJointPose(H,r);if(void 0===v.joints[H.jointName]){const D=new La;D.matrixAutoUpdate=!1,D.visible=!1,v.joints[H.jointName]=D,v.add(D)}const B=v.joints[H.jointName];null!==K&&(B.matrix.fromArray(K.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale),B.jointRadius=K.radius),B.visible=null!==K}const S=v.joints["index-finger-tip"].position.distanceTo(v.joints["thumb-tip"].position),A=.02,N=.005;v.inputState.pinching&&S>A+N?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&S<=A-N&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==m&&e.gripSpace&&(c=t.getPose(e.gripSpace,r),null!==c&&(m.matrix.fromArray(c.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),c.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(c.linearVelocity)):m.hasLinearVelocity=!1,c.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(c.angularVelocity)):m.hasAngularVelocity=!1));return null!==f&&(f.visible=null!==o),null!==m&&(m.visible=null!==c),null!==v&&(v.visible=null!==h),this}}class Tg extends Ar{constructor(e,t,r,o,c,h,f,m,v,M){if((M=void 0!==M?M:Ni)!==Ni&&M!==Fr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&M===Ni&&(r=Yr),void 0===r&&M===Fr&&(r=Nr),super(null,o,c,h,f,m,M,r,v),this.image={width:e,height:t},this.magFilter=void 0!==f?f:Lt,this.minFilter=void 0!==m?m:Lt,this.flipY=!1,this.generateMipmaps=!1}}Tg.prototype.isDepthTexture=!0;class Ag extends k{constructor(e,t){super();const r=this;let o=null,c=1,h=null,f="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let v=null,M=null,w=null,S=null,A=!1,N=null;const H=t.getContextAttributes();let K=null,B=null;const D=[],ie=new Map,$=new dn;$.layers.enable(1),$.viewport=new wi;const ae=new dn;ae.layers.enable(2),ae.viewport=new wi;const me=[$,ae],be=new Mf;be.layers.enable(1),be.layers.enable(2);let Le=null,lt=null;function Ye(gt){const Et=ie.get(gt.inputSource);Et&&Et.dispatchEvent({type:gt.type,data:gt.inputSource})}function te(){ie.forEach(function(gt,Et){gt.disconnect(Et)}),ie.clear(),Le=null,lt=null,e.setRenderTarget(K),S=null,w=null,M=null,o=null,B=null,gn.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function De(gt){const Et=o.inputSources;for(let qt=0;qt<D.length;qt++)ie.set(Et[qt],D[qt]);for(let qt=0;qt<gt.removed.length;qt++){const mn=gt.removed[qt],Tn=ie.get(mn);Tn&&(Tn.dispatchEvent({type:"disconnected",data:mn}),ie.delete(mn))}for(let qt=0;qt<gt.added.length;qt++){const mn=gt.added[qt],Tn=ie.get(mn);Tn&&Tn.dispatchEvent({type:"connected",data:mn})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(gt){let Et=D[gt];return void 0===Et&&(Et=new Vd,D[gt]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(gt){let Et=D[gt];return void 0===Et&&(Et=new Vd,D[gt]=Et),Et.getGripSpace()},this.getHand=function(gt){let Et=D[gt];return void 0===Et&&(Et=new Vd,D[gt]=Et),Et.getHandSpace()},this.setFramebufferScaleFactor=function(gt){c=gt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gt){f=gt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h},this.getBaseLayer=function(){return null!==w?w:S},this.getBinding=function(){return M},this.getFrame=function(){return N},this.getSession=function(){return o},this.setSession=function(){var gt=function l(d){return function(){var e=this,t=arguments;return new Promise(function(r,o){var c=d.apply(e,t);function h(m){C(c,r,o,h,f,"next",m)}function f(m){C(c,r,o,h,f,"throw",m)}h(void 0)})}}(function*(Et){if(o=Et,null!==o){if(K=e.getRenderTarget(),o.addEventListener("select",Ye),o.addEventListener("selectstart",Ye),o.addEventListener("selectend",Ye),o.addEventListener("squeeze",Ye),o.addEventListener("squeezestart",Ye),o.addEventListener("squeezeend",Ye),o.addEventListener("end",te),o.addEventListener("inputsourceschange",De),!0!==H.xrCompatible&&(yield t.makeXRCompatible()),void 0===o.renderState.layers||!1===e.capabilities.isWebGL2)S=new XRWebGLLayer(o,t,{antialias:void 0!==o.renderState.layers||H.antialias,alpha:H.alpha,depth:H.depth,stencil:H.stencil,framebufferScaleFactor:c}),o.updateRenderState({baseLayer:S}),B=new Qr(S.framebufferWidth,S.framebufferHeight,{format:pn,type:ai,encoding:e.outputEncoding});else{A=H.antialias;let qt=null,mn=null,Tn=null;H.depth&&(Tn=H.stencil?35056:33190,qt=H.stencil?Fr:Ni,mn=H.stencil?Nr:Yr);const ct={colorFormat:e.outputEncoding===Ln?35907:32856,depthFormat:Tn,scaleFactor:c};M=new XRWebGLBinding(o,t),w=M.createProjectionLayer(ct),o.updateRenderState({layers:[w]}),B=A?new lo(w.textureWidth,w.textureHeight,{format:pn,type:ai,depthTexture:new Tg(w.textureWidth,w.textureHeight,mn,void 0,void 0,void 0,void 0,void 0,void 0,qt),stencilBuffer:H.stencil,ignoreDepth:w.ignoreDepthValues,useRenderToTexture:m,encoding:e.outputEncoding}):new Qr(w.textureWidth,w.textureHeight,{format:pn,type:ai,depthTexture:new Tg(w.textureWidth,w.textureHeight,mn,void 0,void 0,void 0,void 0,void 0,void 0,qt),stencilBuffer:H.stencil,ignoreDepth:w.ignoreDepthValues,encoding:e.outputEncoding})}B.isXRRenderTarget=!0,this.setFoveation(1),h=yield o.requestReferenceSpace(f),gn.setContext(o),gn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Et){return gt.apply(this,arguments)}}();const He=new re,je=new re;function Ze(gt,Et){null===Et?gt.matrixWorld.copy(gt.matrix):gt.matrixWorld.multiplyMatrices(Et.matrixWorld,gt.matrix),gt.matrixWorldInverse.copy(gt.matrixWorld).invert()}this.updateCamera=function(gt){if(null===o)return;be.near=ae.near=$.near=gt.near,be.far=ae.far=$.far=gt.far,(Le!==be.near||lt!==be.far)&&(o.updateRenderState({depthNear:be.near,depthFar:be.far}),Le=be.near,lt=be.far);const Et=gt.parent,qt=be.cameras;Ze(be,Et);for(let Tn=0;Tn<qt.length;Tn++)Ze(qt[Tn],Et);be.matrixWorld.decompose(be.position,be.quaternion,be.scale),gt.position.copy(be.position),gt.quaternion.copy(be.quaternion),gt.scale.copy(be.scale),gt.matrix.copy(be.matrix),gt.matrixWorld.copy(be.matrixWorld);const mn=gt.children;for(let Tn=0,ct=mn.length;Tn<ct;Tn++)mn[Tn].updateMatrixWorld(!0);2===qt.length?function Je(gt,Et,qt){He.setFromMatrixPosition(Et.matrixWorld),je.setFromMatrixPosition(qt.matrixWorld);const mn=He.distanceTo(je),Tn=Et.projectionMatrix.elements,ct=qt.projectionMatrix.elements,zi=Tn[14]/(Tn[10]-1),Mn=Tn[14]/(Tn[10]+1),Zn=(Tn[9]+1)/Tn[5],sn=(Tn[9]-1)/Tn[5],ui=(Tn[8]-1)/Tn[0],zn=(ct[8]+1)/ct[0],xt=zi*ui,Wt=zi*zn,Vt=mn/(-ui+zn),ln=Vt*-ui;Et.matrixWorld.decompose(gt.position,gt.quaternion,gt.scale),gt.translateX(ln),gt.translateZ(Vt),gt.matrixWorld.compose(gt.position,gt.quaternion,gt.scale),gt.matrixWorldInverse.copy(gt.matrixWorld).invert();const Xt=zi+Vt,Gn=Mn+Vt;gt.projectionMatrix.makePerspective(xt-ln,Wt+(mn-ln),Zn*Mn/Gn*Xt,sn*Mn/Gn*Xt,Xt,Gn)}(be,$,ae):be.projectionMatrix.copy($.projectionMatrix)},this.getCamera=function(){return be},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==S?S.fixedFoveation:void 0},this.setFoveation=function(gt){null!==w&&(w.fixedFoveation=gt),null!==S&&void 0!==S.fixedFoveation&&(S.fixedFoveation=gt)};let vt=null;const gn=new Mp;gn.setAnimationLoop(function At(gt,Et){if(v=Et.getViewerPose(h),N=Et,null!==v){const mn=v.views;null!==S&&(e.setRenderTargetFramebuffer(B,S.framebuffer),e.setRenderTarget(B));let Tn=!1;mn.length!==be.cameras.length&&(be.cameras.length=0,Tn=!0);for(let ct=0;ct<mn.length;ct++){const zi=mn[ct];let Mn=null;if(null!==S)Mn=S.getViewport(zi);else{const sn=M.getViewSubImage(w,zi);Mn=sn.viewport,0===ct&&(e.setRenderTargetTextures(B,sn.colorTexture,w.ignoreDepthValues?void 0:sn.depthStencilTexture),e.setRenderTarget(B))}const Zn=me[ct];Zn.matrix.fromArray(zi.transform.matrix),Zn.projectionMatrix.fromArray(zi.projectionMatrix),Zn.viewport.set(Mn.x,Mn.y,Mn.width,Mn.height),0===ct&&be.matrix.copy(Zn.matrix),!0===Tn&&be.cameras.push(Zn)}}const qt=o.inputSources;for(let mn=0;mn<D.length;mn++)D[mn].update(qt[mn],Et,h);vt&&vt(gt,Et),N=null}),this.setAnimationLoop=function(gt){vt=gt},this.dispose=function(){}}}function Dg(d){function r(B,D){B.opacity.value=D.opacity,D.color&&B.diffuse.value.copy(D.color),D.emissive&&B.emissive.value.copy(D.emissive).multiplyScalar(D.emissiveIntensity),D.map&&(B.map.value=D.map),D.alphaMap&&(B.alphaMap.value=D.alphaMap),D.specularMap&&(B.specularMap.value=D.specularMap),D.alphaTest>0&&(B.alphaTest.value=D.alphaTest);const ie=d.get(D).envMap;let $,ae;ie&&(B.envMap.value=ie,B.flipEnvMap.value=ie.isCubeTexture&&!1===ie.isRenderTargetTexture?-1:1,B.reflectivity.value=D.reflectivity,B.ior.value=D.ior,B.refractionRatio.value=D.refractionRatio),D.lightMap&&(B.lightMap.value=D.lightMap,B.lightMapIntensity.value=D.lightMapIntensity),D.aoMap&&(B.aoMap.value=D.aoMap,B.aoMapIntensity.value=D.aoMapIntensity),D.map?$=D.map:D.specularMap?$=D.specularMap:D.displacementMap?$=D.displacementMap:D.normalMap?$=D.normalMap:D.bumpMap?$=D.bumpMap:D.roughnessMap?$=D.roughnessMap:D.metalnessMap?$=D.metalnessMap:D.alphaMap?$=D.alphaMap:D.emissiveMap?$=D.emissiveMap:D.clearcoatMap?$=D.clearcoatMap:D.clearcoatNormalMap?$=D.clearcoatNormalMap:D.clearcoatRoughnessMap?$=D.clearcoatRoughnessMap:D.specularIntensityMap?$=D.specularIntensityMap:D.specularColorMap?$=D.specularColorMap:D.transmissionMap?$=D.transmissionMap:D.thicknessMap?$=D.thicknessMap:D.sheenColorMap?$=D.sheenColorMap:D.sheenRoughnessMap&&($=D.sheenRoughnessMap),void 0!==$&&($.isWebGLRenderTarget&&($=$.texture),!0===$.matrixAutoUpdate&&$.updateMatrix(),B.uvTransform.value.copy($.matrix)),D.aoMap?ae=D.aoMap:D.lightMap&&(ae=D.lightMap),void 0!==ae&&(ae.isWebGLRenderTarget&&(ae=ae.texture),!0===ae.matrixAutoUpdate&&ae.updateMatrix(),B.uv2Transform.value.copy(ae.matrix))}function w(B,D){B.roughness.value=D.roughness,B.metalness.value=D.metalness,D.roughnessMap&&(B.roughnessMap.value=D.roughnessMap),D.metalnessMap&&(B.metalnessMap.value=D.metalnessMap),D.emissiveMap&&(B.emissiveMap.value=D.emissiveMap),D.bumpMap&&(B.bumpMap.value=D.bumpMap,B.bumpScale.value=D.bumpScale,1===D.side&&(B.bumpScale.value*=-1)),D.normalMap&&(B.normalMap.value=D.normalMap,B.normalScale.value.copy(D.normalScale),1===D.side&&B.normalScale.value.negate()),D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias),d.get(D).envMap&&(B.envMapIntensity.value=D.envMapIntensity)}return{refreshFogUniforms:function e(B,D){B.fogColor.value.copy(D.color),D.isFog?(B.fogNear.value=D.near,B.fogFar.value=D.far):D.isFogExp2&&(B.fogDensity.value=D.density)},refreshMaterialUniforms:function t(B,D,ie,$,ae){D.isMeshBasicMaterial?r(B,D):D.isMeshLambertMaterial?(r(B,D),function m(B,D){D.emissiveMap&&(B.emissiveMap.value=D.emissiveMap)}(B,D)):D.isMeshToonMaterial?(r(B,D),function M(B,D){D.gradientMap&&(B.gradientMap.value=D.gradientMap),D.emissiveMap&&(B.emissiveMap.value=D.emissiveMap),D.bumpMap&&(B.bumpMap.value=D.bumpMap,B.bumpScale.value=D.bumpScale,1===D.side&&(B.bumpScale.value*=-1)),D.normalMap&&(B.normalMap.value=D.normalMap,B.normalScale.value.copy(D.normalScale),1===D.side&&B.normalScale.value.negate()),D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias)}(B,D)):D.isMeshPhongMaterial?(r(B,D),function v(B,D){B.specular.value.copy(D.specular),B.shininess.value=Math.max(D.shininess,1e-4),D.emissiveMap&&(B.emissiveMap.value=D.emissiveMap),D.bumpMap&&(B.bumpMap.value=D.bumpMap,B.bumpScale.value=D.bumpScale,1===D.side&&(B.bumpScale.value*=-1)),D.normalMap&&(B.normalMap.value=D.normalMap,B.normalScale.value.copy(D.normalScale),1===D.side&&B.normalScale.value.negate()),D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias)}(B,D)):D.isMeshStandardMaterial?(r(B,D),D.isMeshPhysicalMaterial?function S(B,D,ie){w(B,D),B.ior.value=D.ior,D.sheen>0&&(B.sheenColor.value.copy(D.sheenColor).multiplyScalar(D.sheen),B.sheenRoughness.value=D.sheenRoughness,D.sheenColorMap&&(B.sheenColorMap.value=D.sheenColorMap),D.sheenRoughnessMap&&(B.sheenRoughnessMap.value=D.sheenRoughnessMap)),D.clearcoat>0&&(B.clearcoat.value=D.clearcoat,B.clearcoatRoughness.value=D.clearcoatRoughness,D.clearcoatMap&&(B.clearcoatMap.value=D.clearcoatMap),D.clearcoatRoughnessMap&&(B.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap),D.clearcoatNormalMap&&(B.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),B.clearcoatNormalMap.value=D.clearcoatNormalMap,1===D.side&&B.clearcoatNormalScale.value.negate())),D.transmission>0&&(B.transmission.value=D.transmission,B.transmissionSamplerMap.value=ie.texture,B.transmissionSamplerSize.value.set(ie.width,ie.height),D.transmissionMap&&(B.transmissionMap.value=D.transmissionMap),B.thickness.value=D.thickness,D.thicknessMap&&(B.thicknessMap.value=D.thicknessMap),B.attenuationDistance.value=D.attenuationDistance,B.attenuationColor.value.copy(D.attenuationColor)),B.specularIntensity.value=D.specularIntensity,B.specularColor.value.copy(D.specularColor),D.specularIntensityMap&&(B.specularIntensityMap.value=D.specularIntensityMap),D.specularColorMap&&(B.specularColorMap.value=D.specularColorMap)}(B,D,ae):w(B,D)):D.isMeshMatcapMaterial?(r(B,D),function A(B,D){D.matcap&&(B.matcap.value=D.matcap),D.bumpMap&&(B.bumpMap.value=D.bumpMap,B.bumpScale.value=D.bumpScale,1===D.side&&(B.bumpScale.value*=-1)),D.normalMap&&(B.normalMap.value=D.normalMap,B.normalScale.value.copy(D.normalScale),1===D.side&&B.normalScale.value.negate()),D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias)}(B,D)):D.isMeshDepthMaterial?(r(B,D),function N(B,D){D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias)}(B,D)):D.isMeshDistanceMaterial?(r(B,D),function H(B,D){D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias),B.referencePosition.value.copy(D.referencePosition),B.nearDistance.value=D.nearDistance,B.farDistance.value=D.farDistance}(B,D)):D.isMeshNormalMaterial?(r(B,D),function K(B,D){D.bumpMap&&(B.bumpMap.value=D.bumpMap,B.bumpScale.value=D.bumpScale,1===D.side&&(B.bumpScale.value*=-1)),D.normalMap&&(B.normalMap.value=D.normalMap,B.normalScale.value.copy(D.normalScale),1===D.side&&B.normalScale.value.negate()),D.displacementMap&&(B.displacementMap.value=D.displacementMap,B.displacementScale.value=D.displacementScale,B.displacementBias.value=D.displacementBias)}(B,D)):D.isLineBasicMaterial?(function o(B,D){B.diffuse.value.copy(D.color),B.opacity.value=D.opacity}(B,D),D.isLineDashedMaterial&&function c(B,D){B.dashSize.value=D.dashSize,B.totalSize.value=D.dashSize+D.gapSize,B.scale.value=D.scale}(B,D)):D.isPointsMaterial?function h(B,D,ie,$){let ae;B.diffuse.value.copy(D.color),B.opacity.value=D.opacity,B.size.value=D.size*ie,B.scale.value=.5*$,D.map&&(B.map.value=D.map),D.alphaMap&&(B.alphaMap.value=D.alphaMap),D.alphaTest>0&&(B.alphaTest.value=D.alphaTest),D.map?ae=D.map:D.alphaMap&&(ae=D.alphaMap),void 0!==ae&&(!0===ae.matrixAutoUpdate&&ae.updateMatrix(),B.uvTransform.value.copy(ae.matrix))}(B,D,ie,$):D.isSpriteMaterial?function f(B,D){let ie;B.diffuse.value.copy(D.color),B.opacity.value=D.opacity,B.rotation.value=D.rotation,D.map&&(B.map.value=D.map),D.alphaMap&&(B.alphaMap.value=D.alphaMap),D.alphaTest>0&&(B.alphaTest.value=D.alphaTest),D.map?ie=D.map:D.alphaMap&&(ie=D.alphaMap),void 0!==ie&&(!0===ie.matrixAutoUpdate&&ie.updateMatrix(),B.uvTransform.value.copy(ie.matrix))}(B,D):D.isShadowMaterial?(B.color.value.copy(D.color),B.opacity.value=D.opacity):D.isShaderMaterial&&(D.uniformsNeedUpdate=!1)}}}function ji(d={}){const e=void 0!==d.canvas?d.canvas:function xy(){const d=vl("canvas");return d.style.display="block",d}(),t=void 0!==d.context?d.context:null,r=void 0!==d.alpha&&d.alpha,o=void 0===d.depth||d.depth,c=void 0===d.stencil||d.stencil,h=void 0!==d.antialias&&d.antialias,f=void 0===d.premultipliedAlpha||d.premultipliedAlpha,m=void 0!==d.preserveDrawingBuffer&&d.preserveDrawingBuffer,v=void 0!==d.powerPreference?d.powerPreference:"default",M=void 0!==d.failIfMajorPerformanceCaveat&&d.failIfMajorPerformanceCaveat;let w=null,S=null;const A=[],N=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gi,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const H=this;let K=!1,B=0,D=0,ie=null,$=-1,ae=null;const me=new wi,be=new wi;let Le=null,lt=e.width,Ye=e.height,te=1,De=null,He=null;const je=new wi(0,0,lt,Ye),Je=new wi(0,0,lt,Ye);let Ze=!1;const vt=new lc;let At=!1,gn=!1,gt=null;const Et=new Qt,qt=new re,mn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Tn(){return null===ie?te:1}let Mn,Zn,sn,ui,zn,xt,Wt,Vt,ln,Xt,Gn,Wn,Di,fr,tr,_e,le,yt,zt,En,pt,Dn,Cn,ct=t;function zi(ce,Ue){for(let st=0;st<ce.length;st++){const Mt=e.getContext(ce[st],Ue);if(null!==Mt)return Mt}return null}try{const ce={alpha:!0,depth:o,stencil:c,antialias:h,premultipliedAlpha:f,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:M};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Yn,!1),e.addEventListener("webglcontextrestored",Pe,!1),null===ct){const Ue=["webgl2","webgl","experimental-webgl"];if(!0===H.isWebGL1Renderer&&Ue.shift(),ct=zi(Ue,ce),null===ct)throw zi(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}function en(){Mn=new Hv(ct),Zn=new Bv(ct,Mn,d),Mn.init(Zn),Dn=new wf(ct,Mn,Zn),sn=new Cg(ct,Mn,Zn),ui=new tg(ct),zn=new py,xt=new bf(ct,Mn,sn,zn,Zn,Dn,ui),Wt=new Pa(H),Vt=new Vv(H),ln=new Hm(ct,Zn),Cn=new Fv(ct,Mn,ln,Zn),Xt=new eg(ct,ln,ui,Cn),Gn=new pc(ct,Xt,ln,ui),zt=new ng(ct,Zn,xt),_e=new Vc(zn),Wn=new mf(H,Wt,Vt,Mn,Zn,Cn,_e),Di=new Dg(zn),fr=new yf,tr=new _f(Mn,Zn),yt=new Yp(H,Wt,sn,Gn,r,f),le=new xf(H,Gn,Zn),En=new kv(ct,Mn,ui,Zn),pt=new Yh(ct,Mn,ui,Zn),ui.programs=Wn.programs,H.capabilities=Zn,H.extensions=Mn,H.properties=zn,H.renderLists=fr,H.shadowMap=le,H.state=sn,H.info=ui}en();const $t=new Ag(H,ct);function Yn(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1;const ce=ui.autoReset,Ue=le.enabled,st=le.autoUpdate,Qe=le.needsUpdate,Mt=le.type;en(),ui.autoReset=ce,le.enabled=Ue,le.autoUpdate=st,le.needsUpdate=Qe,le.type=Mt}function xn(ce){const Ue=ce.target;Ue.removeEventListener("dispose",xn),function nn(ce){(function Vn(ce){const Ue=zn.get(ce).programs;void 0!==Ue&&(Ue.forEach(function(st){Wn.releaseProgram(st)}),ce.isShaderMaterial&&Wn.releaseShaderCache(ce))})(ce),zn.remove(ce)}(Ue)}this.xr=$t,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const ce=Mn.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=Mn.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(ce){void 0!==ce&&(te=ce,this.setSize(lt,Ye,!1))},this.getSize=function(ce){return ce.set(lt,Ye)},this.setSize=function(ce,Ue,st){$t.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(lt=ce,Ye=Ue,e.width=Math.floor(ce*te),e.height=Math.floor(Ue*te),!1!==st&&(e.style.width=ce+"px",e.style.height=Ue+"px"),this.setViewport(0,0,ce,Ue))},this.getDrawingBufferSize=function(ce){return ce.set(lt*te,Ye*te).floor()},this.setDrawingBufferSize=function(ce,Ue,st){lt=ce,Ye=Ue,te=st,e.width=Math.floor(ce*st),e.height=Math.floor(Ue*st),this.setViewport(0,0,ce,Ue)},this.getCurrentViewport=function(ce){return ce.copy(me)},this.getViewport=function(ce){return ce.copy(je)},this.setViewport=function(ce,Ue,st,Qe){ce.isVector4?je.set(ce.x,ce.y,ce.z,ce.w):je.set(ce,Ue,st,Qe),sn.viewport(me.copy(je).multiplyScalar(te).floor())},this.getScissor=function(ce){return ce.copy(Je)},this.setScissor=function(ce,Ue,st,Qe){ce.isVector4?Je.set(ce.x,ce.y,ce.z,ce.w):Je.set(ce,Ue,st,Qe),sn.scissor(be.copy(Je).multiplyScalar(te).floor())},this.getScissorTest=function(){return Ze},this.setScissorTest=function(ce){sn.setScissorTest(Ze=ce)},this.setOpaqueSort=function(ce){De=ce},this.setTransparentSort=function(ce){He=ce},this.getClearColor=function(ce){return ce.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(ce,Ue,st){let Qe=0;(void 0===ce||ce)&&(Qe|=16384),(void 0===Ue||Ue)&&(Qe|=256),(void 0===st||st)&&(Qe|=1024),ct.clear(Qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Yn,!1),e.removeEventListener("webglcontextrestored",Pe,!1),fr.dispose(),tr.dispose(),zn.dispose(),Wt.dispose(),Vt.dispose(),Gn.dispose(),Cn.dispose(),Wn.dispose(),$t.dispose(),$t.removeEventListener("sessionstart",Mi),$t.removeEventListener("sessionend",Lr),gt&&(gt.dispose(),gt=null),ro.stop()},this.renderBufferDirect=function(ce,Ue,st,Qe,Mt,qn){null===Ue&&(Ue=mn);const Jn=Mt.isMesh&&Mt.matrixWorld.determinant()<0,fi=function S_(ce,Ue,st,Qe,Mt){!0!==Ue.isScene&&(Ue=mn),xt.resetTextureUnits();const qn=Ue.fog,fi=null===ie?H.outputEncoding:!0===ie.isXRRenderTarget?ie.texture.encoding:gi,oi=(Qe.isMeshStandardMaterial?Vt:Wt).get(Qe.envMap||(Qe.isMeshStandardMaterial?Ue.environment:null)),qi=!0===Qe.vertexColors&&!!st.attributes.color&&4===st.attributes.color.itemSize,Li=!!Qe.normalMap&&!!st.attributes.tangent,Ri=!!st.morphAttributes.position,yr=!!st.morphAttributes.normal,pa=st.morphAttributes.position?st.morphAttributes.position.length:0,gu=Qe.toneMapped?H.toneMapping:0,Bi=zn.get(Qe),ga=S.state.lights;!0!==At||!0!==gn&&ce===ae||_e.setState(Qe,ce,ce===ae&&Qe.id===$);let vs=!1;Qe.version===Bi.__version?(Bi.needsLights&&Bi.lightsStateVersion!==ga.state.version||Bi.outputEncoding!==fi||Mt.isInstancedMesh&&!1===Bi.instancing||!Mt.isInstancedMesh&&!0===Bi.instancing||Mt.isSkinnedMesh&&!1===Bi.skinning||!Mt.isSkinnedMesh&&!0===Bi.skinning||Bi.envMap!==oi||Qe.fog&&Bi.fog!==qn||void 0!==Bi.numClippingPlanes&&(Bi.numClippingPlanes!==_e.numPlanes||Bi.numIntersection!==_e.numIntersection)||Bi.vertexAlphas!==qi||Bi.vertexTangents!==Li||Bi.morphTargets!==Ri||Bi.morphNormals!==yr||Bi.toneMapping!==gu||!0===Zn.isWebGL2&&Bi.morphTargetsCount!==pa)&&(vs=!0):(vs=!0,Bi.__version=Qe.version);let za=Bi.currentProgram;!0===vs&&(za=Th(Qe,Ue,Mt));let Ah=!1,Qo=!1,fl=!1;const so=za.getUniforms(),md=Bi.uniforms;if(sn.useProgram(za.program)&&(Ah=!0,Qo=!0,fl=!0),Qe.id!==$&&($=Qe.id,Qo=!0),Ah||ae!==ce){if(so.setValue(ct,"projectionMatrix",ce.projectionMatrix),Zn.logarithmicDepthBuffer&&so.setValue(ct,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),ae!==ce&&(ae=ce,Qo=!0,fl=!0),Qe.isShaderMaterial||Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshStandardMaterial||Qe.envMap){const ma=so.map.cameraPosition;void 0!==ma&&ma.setValue(ct,qt.setFromMatrixPosition(ce.matrixWorld))}(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&so.setValue(ct,"isOrthographic",!0===ce.isOrthographicCamera),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial||Qe.isShadowMaterial||Mt.isSkinnedMesh)&&so.setValue(ct,"viewMatrix",ce.matrixWorldInverse)}if(Mt.isSkinnedMesh){so.setOptional(ct,Mt,"bindMatrix"),so.setOptional(ct,Mt,"bindMatrixInverse");const ma=Mt.skeleton;ma&&(Zn.floatVertexTextures?(null===ma.boneTexture&&ma.computeBoneTexture(),so.setValue(ct,"boneTexture",ma.boneTexture,xt),so.setValue(ct,"boneTextureSize",ma.boneTextureSize)):so.setOptional(ct,ma,"boneMatrices"))}return!!st&&(void 0!==st.morphAttributes.position||void 0!==st.morphAttributes.normal)&&zt.update(Mt,st,Qe,za),(Qo||Bi.receiveShadow!==Mt.receiveShadow)&&(Bi.receiveShadow=Mt.receiveShadow,so.setValue(ct,"receiveShadow",Mt.receiveShadow)),Qo&&(so.setValue(ct,"toneMappingExposure",H.toneMappingExposure),Bi.needsLights&&function gd(ce,Ue){ce.ambientLightColor.needsUpdate=Ue,ce.lightProbe.needsUpdate=Ue,ce.directionalLights.needsUpdate=Ue,ce.directionalLightShadows.needsUpdate=Ue,ce.pointLights.needsUpdate=Ue,ce.pointLightShadows.needsUpdate=Ue,ce.spotLights.needsUpdate=Ue,ce.spotLightShadows.needsUpdate=Ue,ce.rectAreaLights.needsUpdate=Ue,ce.hemisphereLights.needsUpdate=Ue}(md,fl),qn&&Qe.fog&&Di.refreshFogUniforms(md,qn),Di.refreshMaterialUniforms(md,Qe,te,Ye,gt),Ia.upload(ct,Bi.uniformsList,md,xt)),Qe.isShaderMaterial&&!0===Qe.uniformsNeedUpdate&&(Ia.upload(ct,Bi.uniformsList,md,xt),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&so.setValue(ct,"center",Mt.center),so.setValue(ct,"modelViewMatrix",Mt.modelViewMatrix),so.setValue(ct,"normalMatrix",Mt.normalMatrix),so.setValue(ct,"modelMatrix",Mt.matrixWorld),za}(ce,Ue,st,Qe,Mt);sn.setMaterial(Qe,Jn);let oi=st.index;const qi=st.attributes.position;if(null===oi){if(void 0===qi||0===qi.count)return}else if(0===oi.count)return;let Li=1;!0===Qe.wireframe&&(oi=Xt.getWireframeAttribute(st),Li=2),Cn.setup(Mt,Qe,fi,st,oi);let Ri,yr=En;null!==oi&&(Ri=ln.get(oi),yr=pt,yr.setIndex(Ri));const pa=null!==oi?oi.count:qi.count,gu=st.drawRange.start*Li,Bi=st.drawRange.count*Li,ga=null!==qn?qn.start*Li:0,vs=null!==qn?qn.count*Li:1/0,za=Math.max(gu,ga),Ah=Math.min(pa,gu+Bi,ga+vs)-1,Qo=Math.max(0,Ah-za+1);if(0!==Qo){if(Mt.isMesh)!0===Qe.wireframe?(sn.setLineWidth(Qe.wireframeLinewidth*Tn()),yr.setMode(1)):yr.setMode(4);else if(Mt.isLine){let fl=Qe.linewidth;void 0===fl&&(fl=1),sn.setLineWidth(fl*Tn()),yr.setMode(Mt.isLineSegments?1:Mt.isLineLoop?2:3)}else Mt.isPoints?yr.setMode(0):Mt.isSprite&&yr.setMode(4);if(Mt.isInstancedMesh)yr.renderInstances(za,Qo,Mt.count);else if(st.isInstancedBufferGeometry){const fl=Math.min(st.instanceCount,st._maxInstanceCount);yr.renderInstances(za,Qo,fl)}else yr.render(za,Qo)}},this.compile=function(ce,Ue){S=tr.get(ce),S.init(),N.push(S),ce.traverseVisible(function(st){st.isLight&&st.layers.test(Ue.layers)&&(S.pushLight(st),st.castShadow&&S.pushShadow(st))}),S.setupLights(H.physicallyCorrectLights),ce.traverse(function(st){const Qe=st.material;if(Qe)if(Array.isArray(Qe))for(let Mt=0;Mt<Qe.length;Mt++)Th(Qe[Mt],ce,st);else Th(Qe,ce,st)}),N.pop(),S=null};let bt=null;function Mi(){ro.stop()}function Lr(){ro.start()}const ro=new Mp;function Vr(ce,Ue,st,Qe){if(!1===ce.visible)return;if(ce.layers.test(Ue.layers))if(ce.isGroup)st=ce.renderOrder;else if(ce.isLOD)!0===ce.autoUpdate&&ce.update(Ue);else if(ce.isLight)S.pushLight(ce),ce.castShadow&&S.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||vt.intersectsSprite(ce)){Qe&&qt.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(Et);const Jn=Gn.update(ce),fi=ce.material;fi.visible&&w.push(ce,Jn,fi,st,qt.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==ui.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=ui.render.frame),!ce.frustumCulled||vt.intersectsObject(ce))){Qe&&qt.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(Et);const Jn=Gn.update(ce),fi=ce.material;if(Array.isArray(fi)){const oi=Jn.groups;for(let qi=0,Li=oi.length;qi<Li;qi++){const Ri=oi[qi],yr=fi[Ri.materialIndex];yr&&yr.visible&&w.push(ce,Jn,yr,st,qt.z,Ri)}}else fi.visible&&w.push(ce,Jn,fi,st,qt.z,null)}const qn=ce.children;for(let Jn=0,fi=qn.length;Jn<fi;Jn++)Vr(qn[Jn],Ue,st,Qe)}function fa(ce,Ue,st,Qe){const Mt=ce.opaque,qn=ce.transmissive,Jn=ce.transparent;S.setupLightsView(st),qn.length>0&&function hl(ce,Ue,st){null===gt&&(gt=new(!0===h&&!0===Zn.isWebGL2?lo:Qr)(1024,1024,{generateMipmaps:!0,type:null!==Dn.convert(ur)?ur:ai,minFilter:Nn,magFilter:Lt,wrapS:nt,wrapT:nt,useRenderToTexture:Mn.has("WEBGL_multisampled_render_to_texture")}));const Qe=H.getRenderTarget();H.setRenderTarget(gt),H.clear();const Mt=H.toneMapping;H.toneMapping=0,pd(ce,Ue,st),H.toneMapping=Mt,xt.updateMultisampleRenderTarget(gt),xt.updateRenderTargetMipmap(gt),H.setRenderTarget(Qe)}(Mt,Ue,st),Qe&&sn.viewport(me.copy(Qe)),Mt.length>0&&pd(Mt,Ue,st),qn.length>0&&pd(qn,Ue,st),Jn.length>0&&pd(Jn,Ue,st)}function pd(ce,Ue,st){const Qe=!0===Ue.isScene?Ue.overrideMaterial:null;for(let Mt=0,qn=ce.length;Mt<qn;Mt++){const Jn=ce[Mt],fi=Jn.object,oi=Jn.geometry,qi=null===Qe?Jn.material:Qe,Li=Jn.group;fi.layers.test(st.layers)&&M_(fi,Ue,st,oi,qi,Li)}}function M_(ce,Ue,st,Qe,Mt,qn){ce.onBeforeRender(H,Ue,st,Qe,Mt,qn),ce.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),Mt.onBeforeRender(H,Ue,st,Qe,ce,qn),!0===Mt.transparent&&Mt.side===Ge?(Mt.side=1,Mt.needsUpdate=!0,H.renderBufferDirect(st,Ue,Qe,Mt,ce,qn),Mt.side=it,Mt.needsUpdate=!0,H.renderBufferDirect(st,Ue,Qe,Mt,ce,qn),Mt.side=Ge):H.renderBufferDirect(st,Ue,Qe,Mt,ce,qn),ce.onAfterRender(H,Ue,st,Qe,Mt,qn)}function Th(ce,Ue,st){!0!==Ue.isScene&&(Ue=mn);const Qe=zn.get(ce),Mt=S.state.lights,Jn=Mt.state.version,fi=Wn.getParameters(ce,Mt.state,S.state.shadowsArray,Ue,st),oi=Wn.getProgramCacheKey(fi);let qi=Qe.programs;Qe.environment=ce.isMeshStandardMaterial?Ue.environment:null,Qe.fog=Ue.fog,Qe.envMap=(ce.isMeshStandardMaterial?Vt:Wt).get(ce.envMap||Qe.environment),void 0===qi&&(ce.addEventListener("dispose",xn),qi=new Map,Qe.programs=qi);let Li=qi.get(oi);if(void 0!==Li){if(Qe.currentProgram===Li&&Qe.lightsStateVersion===Jn)return E_(ce,fi),Li}else fi.uniforms=Wn.getUniforms(ce),ce.onBuild(st,fi,H),ce.onBeforeCompile(fi,H),Li=Wn.acquireProgram(fi,oi),qi.set(oi,Li),Qe.uniforms=fi.uniforms;const Ri=Qe.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||!0===ce.clipping)&&(Ri.clippingPlanes=_e.uniform),E_(ce,fi),Qe.needsLights=function C_(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&!0===ce.lights}(ce),Qe.lightsStateVersion=Jn,Qe.needsLights&&(Ri.ambientLightColor.value=Mt.state.ambient,Ri.lightProbe.value=Mt.state.probe,Ri.directionalLights.value=Mt.state.directional,Ri.directionalLightShadows.value=Mt.state.directionalShadow,Ri.spotLights.value=Mt.state.spot,Ri.spotLightShadows.value=Mt.state.spotShadow,Ri.rectAreaLights.value=Mt.state.rectArea,Ri.ltc_1.value=Mt.state.rectAreaLTC1,Ri.ltc_2.value=Mt.state.rectAreaLTC2,Ri.pointLights.value=Mt.state.point,Ri.pointLightShadows.value=Mt.state.pointShadow,Ri.hemisphereLights.value=Mt.state.hemi,Ri.directionalShadowMap.value=Mt.state.directionalShadowMap,Ri.directionalShadowMatrix.value=Mt.state.directionalShadowMatrix,Ri.spotShadowMap.value=Mt.state.spotShadowMap,Ri.spotShadowMatrix.value=Mt.state.spotShadowMatrix,Ri.pointShadowMap.value=Mt.state.pointShadowMap,Ri.pointShadowMatrix.value=Mt.state.pointShadowMatrix);const yr=Li.getUniforms(),pa=Ia.seqWithValue(yr.seq,Ri);return Qe.currentProgram=Li,Qe.uniformsList=pa,Li}function E_(ce,Ue){const st=zn.get(ce);st.outputEncoding=Ue.outputEncoding,st.instancing=Ue.instancing,st.skinning=Ue.skinning,st.morphTargets=Ue.morphTargets,st.morphNormals=Ue.morphNormals,st.morphTargetsCount=Ue.morphTargetsCount,st.numClippingPlanes=Ue.numClippingPlanes,st.numIntersection=Ue.numClipIntersection,st.vertexAlphas=Ue.vertexAlphas,st.vertexTangents=Ue.vertexTangents,st.toneMapping=Ue.toneMapping}ro.setAnimationLoop(function In(ce){bt&&bt(ce)}),"undefined"!=typeof window&&ro.setContext(window),this.setAnimationLoop=function(ce){bt=ce,$t.setAnimationLoop(ce),null===ce?ro.stop():ro.start()},$t.addEventListener("sessionstart",Mi),$t.addEventListener("sessionend",Lr),this.render=function(ce,Ue){if(void 0===Ue||!0===Ue.isCamera){if(!0!==K){if(!0===ce.autoUpdate&&ce.updateMatrixWorld(),null===Ue.parent&&Ue.updateMatrixWorld(),!0===$t.enabled&&!0===$t.isPresenting&&(!0===$t.cameraAutoUpdate&&$t.updateCamera(Ue),Ue=$t.getCamera()),!0===ce.isScene&&ce.onBeforeRender(H,ce,Ue,ie),S=tr.get(ce,N.length),S.init(),N.push(S),Et.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),vt.setFromProjectionMatrix(Et),gn=this.localClippingEnabled,At=_e.init(this.clippingPlanes,gn,Ue),w=fr.get(ce,A.length),w.init(),A.push(w),Vr(ce,Ue,0,H.sortObjects),w.finish(),!0===H.sortObjects&&w.sort(De,He),!0===At&&_e.beginShadows(),le.render(S.state.shadowsArray,ce,Ue),!0===At&&_e.endShadows(),!0===this.info.autoReset&&this.info.reset(),yt.render(w,ce),S.setupLights(H.physicallyCorrectLights),Ue.isArrayCamera){const Qe=Ue.cameras;for(let Mt=0,qn=Qe.length;Mt<qn;Mt++){const Jn=Qe[Mt];fa(w,ce,Jn,Jn.viewport)}}else fa(w,ce,Ue);null!==ie&&(xt.updateMultisampleRenderTarget(ie),xt.updateRenderTargetMipmap(ie)),!0===ce.isScene&&ce.onAfterRender(H,ce,Ue),sn.buffers.depth.setTest(!0),sn.buffers.depth.setMask(!0),sn.buffers.color.setMask(!0),sn.setPolygonOffset(!1),Cn.resetDefaultState(),$=-1,ae=null,N.pop(),S=N.length>0?N[N.length-1]:null,A.pop(),w=A.length>0?A[A.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return ie},this.setRenderTargetTextures=function(ce,Ue,st){zn.get(ce.texture).__webglTexture=Ue,zn.get(ce.depthTexture).__webglTexture=st;const Qe=zn.get(ce);Qe.__hasExternalTextures=!0,Qe.__hasExternalTextures&&(Qe.__autoAllocateDepthBuffer=void 0===st,Qe.__autoAllocateDepthBuffer||ce.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),ce.useRenderToTexture=!1,ce.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(ce,Ue){const st=zn.get(ce);st.__webglFramebuffer=Ue,st.__useDefaultFramebuffer=void 0===Ue},this.setRenderTarget=function(ce,Ue=0,st=0){ie=ce,B=Ue,D=st;let Qe=!0;if(ce){const oi=zn.get(ce);void 0!==oi.__useDefaultFramebuffer?(sn.bindFramebuffer(36160,null),Qe=!1):void 0===oi.__webglFramebuffer?xt.setupRenderTarget(ce):oi.__hasExternalTextures&&xt.rebindTextures(ce,zn.get(ce.texture).__webglTexture,zn.get(ce.depthTexture).__webglTexture)}let Mt=null,qn=!1,Jn=!1;if(ce){const oi=ce.texture;(oi.isDataTexture3D||oi.isDataTexture2DArray)&&(Jn=!0);const qi=zn.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(Mt=qi[Ue],qn=!0):Mt=ce.useRenderbuffer?zn.get(ce).__webglMultisampledFramebuffer:qi,me.copy(ce.viewport),be.copy(ce.scissor),Le=ce.scissorTest}else me.copy(je).multiplyScalar(te).floor(),be.copy(Je).multiplyScalar(te).floor(),Le=Ze;if(sn.bindFramebuffer(36160,Mt)&&Zn.drawBuffers&&Qe&&sn.drawBuffers(ce,Mt),sn.viewport(me),sn.scissor(be),sn.setScissorTest(Le),qn){const oi=zn.get(ce.texture);ct.framebufferTexture2D(36160,36064,34069+Ue,oi.__webglTexture,st)}else if(Jn){const oi=zn.get(ce.texture);ct.framebufferTextureLayer(36160,36064,oi.__webglTexture,st||0,Ue||0)}$=-1},this.readRenderTargetPixels=function(ce,Ue,st,Qe,Mt,qn,Jn){if(!ce||!ce.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fi=zn.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&void 0!==Jn&&(fi=fi[Jn]),fi){sn.bindFramebuffer(36160,fi);try{const oi=ce.texture,qi=oi.format,Li=oi.type;if(qi!==pn&&Dn.convert(qi)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ri=Li===ur&&(Mn.has("EXT_color_buffer_half_float")||Zn.isWebGL2&&Mn.has("EXT_color_buffer_float"));if(!(Li===ai||Dn.convert(Li)===ct.getParameter(35738)||Li===as&&(Zn.isWebGL2||Mn.has("OES_texture_float")||Mn.has("WEBGL_color_buffer_float"))||Ri))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?Ue>=0&&Ue<=ce.width-Qe&&st>=0&&st<=ce.height-Mt&&ct.readPixels(Ue,st,Qe,Mt,Dn.convert(qi),Dn.convert(Li),qn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const oi=null!==ie?zn.get(ie).__webglFramebuffer:null;sn.bindFramebuffer(36160,oi)}}},this.copyFramebufferToTexture=function(ce,Ue,st=0){if(!0!==Ue.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Qe=Math.pow(2,-st),Mt=Math.floor(Ue.image.width*Qe),qn=Math.floor(Ue.image.height*Qe);xt.setTexture2D(Ue,0),ct.copyTexSubImage2D(3553,st,0,0,ce.x,ce.y,Mt,qn),sn.unbindTexture()},this.copyTextureToTexture=function(ce,Ue,st,Qe=0){const Mt=Ue.image.width,qn=Ue.image.height,Jn=Dn.convert(st.format),fi=Dn.convert(st.type);xt.setTexture2D(st,0),ct.pixelStorei(37440,st.flipY),ct.pixelStorei(37441,st.premultiplyAlpha),ct.pixelStorei(3317,st.unpackAlignment),Ue.isDataTexture?ct.texSubImage2D(3553,Qe,ce.x,ce.y,Mt,qn,Jn,fi,Ue.image.data):Ue.isCompressedTexture?ct.compressedTexSubImage2D(3553,Qe,ce.x,ce.y,Ue.mipmaps[0].width,Ue.mipmaps[0].height,Jn,Ue.mipmaps[0].data):ct.texSubImage2D(3553,Qe,ce.x,ce.y,Jn,fi,Ue.image),0===Qe&&st.generateMipmaps&&ct.generateMipmap(3553),sn.unbindTexture()},this.copyTextureToTexture3D=function(ce,Ue,st,Qe,Mt=0){if(H.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const qn=ce.max.x-ce.min.x+1,Jn=ce.max.y-ce.min.y+1,fi=ce.max.z-ce.min.z+1,oi=Dn.convert(Qe.format),qi=Dn.convert(Qe.type);let Li;if(Qe.isDataTexture3D)xt.setTexture3D(Qe,0),Li=32879;else{if(!Qe.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");xt.setTexture2DArray(Qe,0),Li=35866}ct.pixelStorei(37440,Qe.flipY),ct.pixelStorei(37441,Qe.premultiplyAlpha),ct.pixelStorei(3317,Qe.unpackAlignment);const Ri=ct.getParameter(3314),yr=ct.getParameter(32878),pa=ct.getParameter(3316),gu=ct.getParameter(3315),Bi=ct.getParameter(32877),ga=st.isCompressedTexture?st.mipmaps[0]:st.image;ct.pixelStorei(3314,ga.width),ct.pixelStorei(32878,ga.height),ct.pixelStorei(3316,ce.min.x),ct.pixelStorei(3315,ce.min.y),ct.pixelStorei(32877,ce.min.z),st.isDataTexture||st.isDataTexture3D?ct.texSubImage3D(Li,Mt,Ue.x,Ue.y,Ue.z,qn,Jn,fi,oi,qi,ga.data):st.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ct.compressedTexSubImage3D(Li,Mt,Ue.x,Ue.y,Ue.z,qn,Jn,fi,oi,ga.data)):ct.texSubImage3D(Li,Mt,Ue.x,Ue.y,Ue.z,qn,Jn,fi,oi,qi,ga),ct.pixelStorei(3314,Ri),ct.pixelStorei(32878,yr),ct.pixelStorei(3316,pa),ct.pixelStorei(3315,gu),ct.pixelStorei(32877,Bi),0===Mt&&Qe.generateMipmaps&&ct.generateMipmap(Li),sn.unbindTexture()},this.initTexture=function(ce){xt.setTexture2D(ce,0),sn.unbindTexture()},this.resetState=function(){B=0,D=0,ie=null,sn.reset(),Cn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ji.prototype.isWebGLRenderer=!0,class by extends ji{}.prototype.isWebGL1Renderer=!0;class Hd{constructor(e,t=25e-5){this.name="",this.color=new Ht(e),this.density=t}clone(){return new Hd(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Hd.prototype.isFogExp2=!0;class js{constructor(e,t=1,r=1e3){this.name="",this.color=new Ht(e),this.near=t,this.far=r}clone(){return new js(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}js.prototype.isFog=!0;class zd extends _i{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}zd.prototype.isScene=!0;class vc{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=$s,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ze()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let o=0,c=this.stride;o<c;o++)this.array[e+o]=t.array[r+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ze()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ze()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}vc.prototype.isInterleavedBuffer=!0;const is=new re;class yc{constructor(e,t,r,o=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)is.x=this.getX(t),is.y=this.getY(t),is.z=this.getZ(t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this}setXYZW(e,t,r,o,c){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=o,this.data.array[e+3]=c,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[o+c])}return new ci(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const o=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[o+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}yc.prototype.isInterleavedBufferAttribute=!0;class Gd extends Sn{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Nu;Gd.prototype.isSpriteMaterial=!0;const Fu=new re,Ll=new re,_c=new re,qc=new _t,ku=new _t,Rg=new Qt,Bu=new re,Uu=new re,Vu=new re,Pg=new _t,Ef=new _t,Sf=new _t;function Zd(d,e,t,r,o,c){qc.subVectors(d,t).addScalar(.5).multiply(r),void 0!==o?(ku.x=c*qc.x-o*qc.y,ku.y=o*qc.x+c*qc.y):ku.copy(qc),d.copy(e),d.x+=ku.x,d.y+=ku.y,d.applyMatrix4(Rg)}(class Wd extends _i{constructor(e){if(super(),this.type="Sprite",void 0===Nu){Nu=new Pn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new vc(t,5);Nu.setIndex([0,1,2,0,2,3]),Nu.setAttribute("position",new yc(r,3,0,!1)),Nu.setAttribute("uv",new yc(r,2,3,!1))}this.geometry=Nu,this.material=void 0!==e?e:new Gd,this.center=new _t(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ll.setFromMatrixScale(this.matrixWorld),Rg.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ll.multiplyScalar(-_c.z);const r=this.material.rotation;let o,c;0!==r&&(c=Math.cos(r),o=Math.sin(r));const h=this.center;Zd(Bu.set(-.5,-.5,0),_c,h,Ll,o,c),Zd(Uu.set(.5,-.5,0),_c,h,Ll,o,c),Zd(Vu.set(.5,.5,0),_c,h,Ll,o,c),Pg.set(0,0),Ef.set(1,0),Sf.set(1,1);let f=e.ray.intersectTriangle(Bu,Uu,Vu,!1,Fu);if(null===f&&(Zd(Uu.set(-.5,.5,0),_c,h,Ll,o,c),Ef.set(0,1),f=e.ray.intersectTriangle(Bu,Vu,Uu,!1,Fu),null===f))return;const m=e.ray.origin.distanceTo(Fu);m<e.near||m>e.far||t.push({distance:m,point:Fu.clone(),uv:Ve.getUV(Fu,Bu,Uu,Vu,Pg,Ef,Sf,new _t),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const Ig=new re,My=new wi,Cf=new wi,Ey=new re,Lg=new Qt;class qd extends br{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Qt,this.bindMatrixInverse=new Qt}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wi,t=this.geometry.attributes.skinWeight;for(let r=0,o=t.count;r<o;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,o=this.geometry;My.fromBufferAttribute(o.attributes.skinIndex,e),Cf.fromBufferAttribute(o.attributes.skinWeight,e),Ig.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let c=0;c<4;c++){const h=Cf.getComponent(c);if(0!==h){const f=My.getComponent(c);Lg.multiplyMatrices(r.bones[f].matrixWorld,r.boneInverses[f]),t.addScaledVector(Ey.copy(Ig).applyMatrix4(Lg),h)}}return t.applyMatrix4(this.bindMatrixInverse)}}qd.prototype.isSkinnedMesh=!0;class $c extends _i{constructor(){super(),this.type="Bone"}}$c.prototype.isBone=!0;class Yc extends Ar{constructor(e=null,t=1,r=1,o,c,h,f,m,v=Lt,M=Lt,w,S){super(null,h,f,m,v,M,o,c,w,S),this.image={data:e,width:t,height:r},this.magFilter=v,this.minFilter=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Yc.prototype.isDataTexture=!0;const Og=new Qt,$d=new Qt;class Jc{constructor(e=[],t=[]){this.uuid=ze(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,o=this.bones.length;r<o;r++)this.boneInverses.push(new Qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Qt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,o=this.boneTexture;for(let c=0,h=e.length;c<h;c++)Og.multiplyMatrices(e[c]?e[c].matrixWorld:$d,t[c]),Og.toArray(r,16*c);null!==o&&(o.needsUpdate=!0)}clone(){return new Jc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Us(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Yc(t,e,e,pn,as);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,o=e.bones.length;r<o;r++){const c=e.bones[r];let h=t[c];void 0===h&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),h=new $c),this.bones.push(h),this.boneInverses.push((new Qt).fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let o=0,c=t.length;o<c;o++)e.bones.push(t[o].uuid),e.boneInverses.push(r[o].toArray());return e}}class Xc extends ci{constructor(e,t,r,o=1){"number"==typeof r&&(o=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Xc.prototype.isInstancedBufferAttribute=!0;const Yd=new Qt,Jd=new Qt,Hu=[],zu=new br;(class Ng extends br{constructor(e,t,r){super(e,t),this.instanceMatrix=new Xc(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,o=this.count;if(zu.geometry=this.geometry,zu.material=this.material,void 0!==zu.material)for(let c=0;c<o;c++){this.getMatrixAt(c,Yd),Jd.multiplyMatrices(r,Yd),zu.matrixWorld=Jd,zu.raycast(e,Hu);for(let h=0,f=Hu.length;h<f;h++){const m=Hu[h];m.instanceId=c,m.object=this,t.push(m)}Hu.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Xc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class rs extends Sn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}rs.prototype.isLineBasicMaterial=!0;const Sy=new re,Fg=new re,Tf=new Qt,Xd=new Ls,Gu=new Ii;class ol extends _i{constructor(e=new Pn,t=new rs){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let o=1,c=t.count;o<c;o++)Sy.fromBufferAttribute(t,o-1),Fg.fromBufferAttribute(t,o),r[o]=r[o-1],r[o]+=Sy.distanceTo(Fg);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,c=e.params.Line.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Gu.copy(r.boundingSphere),Gu.applyMatrix4(o),Gu.radius+=c,!1===e.ray.intersectsSphere(Gu))return;Tf.copy(o).invert(),Xd.copy(e.ray).applyMatrix4(Tf);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f,v=new re,M=new re,w=new re,S=new re,A=this.isLineSegments?2:1;if(r.isBufferGeometry){const N=r.index,K=r.attributes.position;if(null!==N)for(let ie=Math.max(0,h.start),$=Math.min(N.count,h.start+h.count)-1;ie<$;ie+=A){const ae=N.getX(ie),me=N.getX(ie+1);if(v.fromBufferAttribute(K,ae),M.fromBufferAttribute(K,me),Xd.distanceSqToSegment(v,M,S,w)>m)continue;S.applyMatrix4(this.matrixWorld);const Le=e.ray.origin.distanceTo(S);Le<e.near||Le>e.far||t.push({distance:Le,point:w.clone().applyMatrix4(this.matrixWorld),index:ie,face:null,faceIndex:null,object:this})}else for(let ie=Math.max(0,h.start),$=Math.min(K.count,h.start+h.count)-1;ie<$;ie+=A){if(v.fromBufferAttribute(K,ie),M.fromBufferAttribute(K,ie+1),Xd.distanceSqToSegment(v,M,S,w)>m)continue;S.applyMatrix4(this.matrixWorld);const me=e.ray.origin.distanceTo(S);me<e.near||me>e.far||t.push({distance:me,point:w.clone().applyMatrix4(this.matrixWorld),index:ie,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ol.prototype.isLine=!0;const Af=new re,Oa=new re;class Jo extends ol{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let o=0,c=t.count;o<c;o+=2)Af.fromBufferAttribute(t,o),Oa.fromBufferAttribute(t,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+Af.distanceTo(Oa);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Jo.prototype.isLineSegments=!0;class Df extends ol{constructor(e,t){super(e,t),this.type="LineLoop"}}Df.prototype.isLineLoop=!0;class xc extends Sn{constructor(e){super(),this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}xc.prototype.isPointsMaterial=!0;const Cy=new Qt,Kc=new Ls,Wu=new Ii,Qc=new re;class al extends _i{constructor(e=new Pn,t=new xc){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,o=this.matrixWorld,c=e.params.Points.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Wu.copy(r.boundingSphere),Wu.applyMatrix4(o),Wu.radius+=c,!1===e.ray.intersectsSphere(Wu))return;Cy.copy(o).invert(),Kc.copy(e.ray).applyMatrix4(Cy);const f=c/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f;if(r.isBufferGeometry){const v=r.index,w=r.attributes.position;if(null!==v)for(let N=Math.max(0,h.start),H=Math.min(v.count,h.start+h.count);N<H;N++){const K=v.getX(N);Qc.fromBufferAttribute(w,K),kg(Qc,K,m,o,e,t,this)}else for(let N=Math.max(0,h.start),H=Math.min(w.count,h.start+h.count);N<H;N++)Qc.fromBufferAttribute(w,N),kg(Qc,N,m,o,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const o=t[r[0]];if(void 0!==o){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=o.length;c<h;c++){const f=o[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function kg(d,e,t,r,o,c,h){const f=Kc.distanceSqToPoint(d);if(f<t){const m=new re;Kc.closestPointToPoint(d,m),m.applyMatrix4(r);const v=o.ray.origin.distanceTo(m);if(v<o.near||v>o.far)return;c.push({distance:v,distanceToRay:Math.sqrt(f),point:m,index:e,face:null,object:h})}}al.prototype.isPoints=!0,class Rf extends Ar{constructor(e,t,r,o,c,h,f,m,v){super(e,t,r,o,c,h,f,m,v),this.minFilter=void 0!==h?h:wn,this.magFilter=void 0!==c?c:wn,this.generateMipmaps=!1;const M=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function w(){M.needsUpdate=!0,e.requestVideoFrameCallback(w)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class Bg extends Ar{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Lt,this.minFilter=Lt,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class Pf extends Ar{constructor(e,t,r,o,c,h,f,m,v,M,w,S){super(null,h,f,m,v,M,o,c,w,S),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class Ug extends Ar{constructor(e,t,r,o,c,h,f,m,v){super(e,t,r,o,c,h,f,m,v),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new re,new re,new re,new Ve;class Xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,o=this.getPoint(0),c=0;t.push(0);for(let h=1;h<=e;h++)r=this.getPoint(h/e),c+=r.distanceTo(o),t.push(c),o=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let o=0;const c=r.length;let h;h=t||e*r[c-1];let v,f=0,m=c-1;for(;f<=m;)if(o=Math.floor(f+(m-f)/2),v=r[o]-h,v<0)f=o+1;else{if(!(v>0)){m=o;break}m=o-1}if(o=m,r[o]===h)return o/(c-1);const M=r[o];return(o+(h-M)/(r[o+1]-M))/(c-1)}getTangent(e,t){const r=1e-4;let o=e-r,c=e+r;o<0&&(o=0),c>1&&(c=1);const h=this.getPoint(o),f=this.getPoint(c),m=t||(h.isVector2?new _t:new re);return m.copy(f).sub(h).normalize(),m}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new re,o=[],c=[],h=[],f=new re,m=new Qt;for(let A=0;A<=e;A++)o[A]=this.getTangentAt(A/e,new re);c[0]=new re,h[0]=new re;let v=Number.MAX_VALUE;const M=Math.abs(o[0].x),w=Math.abs(o[0].y),S=Math.abs(o[0].z);M<=v&&(v=M,r.set(1,0,0)),w<=v&&(v=w,r.set(0,1,0)),S<=v&&r.set(0,0,1),f.crossVectors(o[0],r).normalize(),c[0].crossVectors(o[0],f),h[0].crossVectors(o[0],c[0]);for(let A=1;A<=e;A++){if(c[A]=c[A-1].clone(),h[A]=h[A-1].clone(),f.crossVectors(o[A-1],o[A]),f.length()>Number.EPSILON){f.normalize();const N=Math.acos(at(o[A-1].dot(o[A]),-1,1));c[A].applyMatrix4(m.makeRotationAxis(f,N))}h[A].crossVectors(o[A],c[A])}if(!0===t){let A=Math.acos(at(c[0].dot(c[e]),-1,1));A/=e,o[0].dot(f.crossVectors(c[0],c[e]))>0&&(A=-A);for(let N=1;N<=e;N++)c[N].applyMatrix4(m.makeRotationAxis(o[N],A*N)),h[N].crossVectors(o[N],c[N])}return{tangents:o,normals:c,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class th extends Xo{constructor(e=0,t=0,r=1,o=1,c=0,h=2*Math.PI,f=!1,m=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=o,this.aStartAngle=c,this.aEndAngle=h,this.aClockwise=f,this.aRotation=m}getPoint(e,t){const r=t||new _t,o=2*Math.PI;let c=this.aEndAngle-this.aStartAngle;const h=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=o;for(;c>o;)c-=o;c<Number.EPSILON&&(c=h?0:o),!0===this.aClockwise&&!h&&(c===o?c=-o:c-=o);const f=this.aStartAngle+e*c;let m=this.aX+this.xRadius*Math.cos(f),v=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){const M=Math.cos(this.aRotation),w=Math.sin(this.aRotation),S=m-this.aX,A=v-this.aY;m=S*M-A*w+this.aX,v=S*w+A*M+this.aY}return r.set(m,v)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}th.prototype.isEllipseCurve=!0;class Vg extends th{constructor(e,t,r,o,c,h){super(e,t,r,r,o,c,h),this.type="ArcCurve"}}function Lf(){let d=0,e=0,t=0,r=0;function o(c,h,f,m){d=c,e=f,t=-3*c+3*h-2*f-m,r=2*c-2*h+f+m}return{initCatmullRom:function(c,h,f,m,v){o(h,f,v*(f-c),v*(m-h))},initNonuniformCatmullRom:function(c,h,f,m,v,M,w){let S=(h-c)/v-(f-c)/(v+M)+(f-h)/M,A=(f-h)/M-(m-h)/(M+w)+(m-f)/w;S*=M,A*=M,o(h,f,S,A)},calc:function(c){const h=c*c;return d+e*c+t*h+r*(h*c)}}}Vg.prototype.isArcCurve=!0;const io=new re,qu=new Lf,nh=new Lf,ih=new Lf;class Of extends Xo{constructor(e=[],t=!1,r="centripetal",o=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=o}getPoint(e,t=new re){const r=t,o=this.points,c=o.length,h=(c-(this.closed?0:1))*e;let v,M,f=Math.floor(h),m=h-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/c)+1)*c:0===m&&f===c-1&&(f=c-2,m=1),this.closed||f>0?v=o[(f-1)%c]:(io.subVectors(o[0],o[1]).add(o[0]),v=io);const w=o[f%c],S=o[(f+1)%c];if(this.closed||f+2<c?M=o[(f+2)%c]:(io.subVectors(o[c-1],o[c-2]).add(o[c-1]),M=io),"centripetal"===this.curveType||"chordal"===this.curveType){const A="chordal"===this.curveType?.5:.25;let N=Math.pow(v.distanceToSquared(w),A),H=Math.pow(w.distanceToSquared(S),A),K=Math.pow(S.distanceToSquared(M),A);H<1e-4&&(H=1),N<1e-4&&(N=H),K<1e-4&&(K=H),qu.initNonuniformCatmullRom(v.x,w.x,S.x,M.x,N,H,K),nh.initNonuniformCatmullRom(v.y,w.y,S.y,M.y,N,H,K),ih.initNonuniformCatmullRom(v.z,w.z,S.z,M.z,N,H,K)}else"catmullrom"===this.curveType&&(qu.initCatmullRom(v.x,w.x,S.x,M.x,this.tension),nh.initCatmullRom(v.y,w.y,S.y,M.y,this.tension),ih.initCatmullRom(v.z,w.z,S.z,M.z,this.tension));return r.set(qu.calc(m),nh.calc(m),ih.calc(m)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new re).fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Nf(d,e,t,r,o){const c=.5*(r-e),h=.5*(o-t),f=d*d;return(2*t-2*r+c+h)*(d*f)+(-3*t+3*r-2*c-h)*f+c*d+t}function $u(d,e,t,r){return function Ty(d,e){const t=1-d;return t*t*e}(d,e)+function Ay(d,e){return 2*(1-d)*d*e}(d,t)+function Dy(d,e){return d*d*e}(d,r)}function Yu(d,e,t,r,o){return function Hg(d,e){const t=1-d;return t*t*t*e}(d,e)+function j0(d,e){const t=1-d;return 3*t*t*d*e}(d,t)+function zg(d,e){return 3*(1-d)*d*d*e}(d,r)+function Ry(d,e){return d*d*d*e}(d,o)}Of.prototype.isCatmullRomCurve3=!0;class Gg extends Xo{constructor(e=new _t,t=new _t,r=new _t,o=new _t){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new _t){const r=t,o=this.v0,c=this.v1,h=this.v2,f=this.v3;return r.set(Yu(e,o.x,c.x,h.x,f.x),Yu(e,o.y,c.y,h.y,f.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Gg.prototype.isCubicBezierCurve=!0;class Py extends Xo{constructor(e=new re,t=new re,r=new re,o=new re){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=o}getPoint(e,t=new re){const r=t,o=this.v0,c=this.v1,h=this.v2,f=this.v3;return r.set(Yu(e,o.x,c.x,h.x,f.x),Yu(e,o.y,c.y,h.y,f.y),Yu(e,o.z,c.z,h.z,f.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Py.prototype.isCubicBezierCurve3=!0;class eu extends Xo{constructor(e=new _t,t=new _t){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _t){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new _t;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}eu.prototype.isLineCurve=!0;class rh extends Xo{constructor(e=new _t,t=new _t,r=new _t){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new _t){const r=t,o=this.v0,c=this.v1,h=this.v2;return r.set($u(e,o.x,c.x,h.x),$u(e,o.y,c.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}rh.prototype.isQuadraticBezierCurve=!0;class sh extends Xo{constructor(e=new re,t=new re,r=new re){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new re){const r=t,o=this.v0,c=this.v1,h=this.v2;return r.set($u(e,o.x,c.x,h.x),$u(e,o.y,c.y,h.y),$u(e,o.z,c.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}sh.prototype.isQuadraticBezierCurve3=!0;class Wg extends Xo{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new _t){const r=t,o=this.points,c=(o.length-1)*e,h=Math.floor(c),f=c-h,m=o[0===h?h:h-1],v=o[h],M=o[h>o.length-2?o.length-1:h+1],w=o[h>o.length-3?o.length-1:h+2];return r.set(Nf(f,m.x,v.x,M.x,w.x),Nf(f,m.y,v.y,M.y,w.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const o=e.points[t];this.points.push((new _t).fromArray(o))}return this}}Wg.prototype.isSplineCurve=!0;var Fo=Object.freeze({__proto__:null,ArcCurve:Vg,CatmullRomCurve3:Of,CubicBezierCurve:Gg,CubicBezierCurve3:Py,EllipseCurve:th,LineCurve:eu,LineCurve3:class Iy extends Xo{constructor(e=new re,t=new re){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new re){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:rh,QuadraticBezierCurve3:sh,SplineCurve:Wg});class q0 extends Xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new eu(t,e))}getPoint(e,t){const r=e*this.getLength(),o=this.getCurveLengths();let c=0;for(;c<o.length;){if(o[c]>=r){const h=o[c]-r,f=this.curves[c],m=f.getLength();return f.getPointAt(0===m?0:1-h/m,t)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,o=this.curves.length;r<o;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let o=0,c=this.curves;o<c.length;o++){const h=c[o],m=h.getPoints(h&&h.isEllipseCurve?2*e:h&&(h.isLineCurve||h.isLineCurve3)?1:h&&h.isSplineCurve?e*h.points.length:e);for(let v=0;v<m.length;v++){const M=m[v];r&&r.equals(M)||(t.push(M),r=M)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const o=e.curves[t];this.curves.push((new Fo[o.type]).fromJSON(o))}return this}}class Ff extends q0{constructor(e){super(),this.type="Path",this.currentPoint=new _t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new eu(this.currentPoint.clone(),new _t(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,o){const c=new rh(this.currentPoint.clone(),new _t(e,t),new _t(r,o));return this.curves.push(c),this.currentPoint.set(r,o),this}bezierCurveTo(e,t,r,o,c,h){const f=new Gg(this.currentPoint.clone(),new _t(e,t),new _t(r,o),new _t(c,h));return this.curves.push(f),this.currentPoint.set(c,h),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Wg(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,o,c,h){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,o,c,h),this}absarc(e,t,r,o,c,h){return this.absellipse(e,t,r,r,o,c,h),this}ellipse(e,t,r,o,c,h,f,m){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,o,c,h,f,m),this}absellipse(e,t,r,o,c,h,f,m){const v=new th(e,t,r,o,c,h,f,m);if(this.curves.length>0){const w=v.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(v);const M=v.getPoint(1);return this.currentPoint.copy(M),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Na extends Ff{constructor(e){super(e),this.uuid=ze(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,o=this.holes.length;r<o;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const o=e.holes[t];this.holes.push((new Ff).fromJSON(o))}return this}}function kf(d,e,t,r,o){let c,h;if(o===function nu(d,e,t,r){let o=0;for(let c=e,h=t-r;c<t;c+=r)o+=(d[h]-d[c])*(d[c+1]+d[h+1]),h=c;return o}(d,e,t,r)>0)for(c=e;c<t;c+=r)h=Mc(c,d[c],d[c+1],h);else for(c=t-r;c>=e;c-=r)h=Mc(c,d[c],d[c+1],h);return h&&tu(h,h.next)&&(ka(h),h=h.next),h}function Fl(d,e){if(!d)return d;e||(e=d);let r,t=d;do{if(r=!1,t.steiner||!tu(t,t.next)&&0!==Ir(t.prev,t,t.next))t=t.next;else{if(ka(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function oh(d,e,t,r,o,c,h){if(!d)return;!h&&c&&function Uy(d,e,t,r){let o=d;do{null===o.z&&(o.z=kl(o.x,o.y,e,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==d);o.prevZ.nextZ=null,o.prevZ=null,function ah(d){let e,t,r,o,c,h,f,m,v=1;do{for(t=d,d=null,c=null,h=0;t;){for(h++,r=t,f=0,e=0;e<v&&(f++,r=r.nextZ,r);e++);for(m=v;f>0||m>0&&r;)0!==f&&(0===m||!r||t.z<=r.z)?(o=t,t=t.nextZ,f--):(o=r,r=r.nextZ,m--),c?c.nextZ=o:d=o,o.prevZ=c,c=o;t=r}c.nextZ=null,v*=2}while(h>1)}(o)}(d,r,o,c);let m,v,f=d;for(;d.prev!==d.next;)if(m=d.prev,v=d.next,c?Bf(d,r,o,c):jg(d))e.push(m.i/t),e.push(d.i/t),e.push(v.i/t),ka(d),d=v.next,f=v.next;else if((d=v)===f){h?1===h?oh(d=Ly(Fl(d),e,t),e,t,r,o,c,2):2===h&&Uf(d,e,t,r,o,c):oh(Fl(d),e,t,r,o,c,1);break}}function jg(d){const e=d.prev,t=d,r=d.next;if(Ir(e,t,r)>=0)return!1;let o=d.next.next;for(;o!==d.prev;){if(Fa(e.x,e.y,t.x,t.y,r.x,r.y,o.x,o.y)&&Ir(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function Bf(d,e,t,r){const o=d.prev,c=d,h=d.next;if(Ir(o,c,h)>=0)return!1;const v=o.x>c.x?o.x>h.x?o.x:h.x:c.x>h.x?c.x:h.x,M=o.y>c.y?o.y>h.y?o.y:h.y:c.y>h.y?c.y:h.y,w=kl(o.x<c.x?o.x<h.x?o.x:h.x:c.x<h.x?c.x:h.x,o.y<c.y?o.y<h.y?o.y:h.y:c.y<h.y?c.y:h.y,e,t,r),S=kl(v,M,e,t,r);let A=d.prevZ,N=d.nextZ;for(;A&&A.z>=w&&N&&N.z<=S;){if(A!==d.prev&&A!==d.next&&Fa(o.x,o.y,c.x,c.y,h.x,h.y,A.x,A.y)&&Ir(A.prev,A,A.next)>=0||(A=A.prevZ,N!==d.prev&&N!==d.next&&Fa(o.x,o.y,c.x,c.y,h.x,h.y,N.x,N.y)&&Ir(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;A&&A.z>=w;){if(A!==d.prev&&A!==d.next&&Fa(o.x,o.y,c.x,c.y,h.x,h.y,A.x,A.y)&&Ir(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;N&&N.z<=S;){if(N!==d.prev&&N!==d.next&&Fa(o.x,o.y,c.x,c.y,h.x,h.y,N.x,N.y)&&Ir(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function Ly(d,e,t){let r=d;do{const o=r.prev,c=r.next.next;!tu(o,c)&&la(o,r,r.next,c)&&Ul(o,c)&&Ul(c,o)&&(e.push(o.i/t),e.push(r.i/t),e.push(c.i/t),ka(r),ka(r.next),r=d=c),r=r.next}while(r!==d);return Fl(r)}function Uf(d,e,t,r,o,c){let h=d;do{let f=h.next.next;for(;f!==h.prev;){if(h.i!==f.i&&Hy(h,f)){let m=lh(h,f);return h=Fl(h,h.next),m=Fl(m,m.next),oh(h,e,t,r,o,c),void oh(m,e,t,r,o,c)}f=f.next}h=h.next}while(h!==d)}function Ny(d,e){return d.x-e.x}function Fy(d,e){if(e=function ky(d,e){let t=e;const r=d.x,o=d.y;let h,c=-1/0;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const S=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(S<=r&&S>c){if(c=S,S===r){if(o===t.y)return t;if(o===t.next.y)return t.next}h=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!h)return null;if(r===c)return h;const f=h,m=h.x,v=h.y;let w,M=1/0;t=h;do{r>=t.x&&t.x>=m&&r!==t.x&&Fa(o<v?r:c,o,m,v,o<v?c:r,o,t.x,t.y)&&(w=Math.abs(o-t.y)/(r-t.x),Ul(t,d)&&(w<M||w===M&&(t.x>h.x||t.x===h.x&&By(h,t)))&&(h=t,M=w)),t=t.next}while(t!==f);return h}(d,e),e){const t=lh(e,d);Fl(e,e.next),Fl(t,t.next)}}function By(d,e){return Ir(d.prev,d,e.prev)<0&&Ir(e.next,d,d.next)<0}function kl(d,e,t,r,o){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-t)*o)|d<<8))|d<<4))|d<<2))|d<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Vy(d){let e=d,t=d;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==d);return t}function Fa(d,e,t,r,o,c,h,f){return(o-h)*(e-f)-(d-h)*(c-f)>=0&&(d-h)*(r-f)-(t-h)*(e-f)>=0&&(t-h)*(c-f)-(o-h)*(r-f)>=0}function Hy(d,e){return d.next.i!==e.i&&d.prev.i!==e.i&&!function wc(d,e){let t=d;do{if(t.i!==d.i&&t.next.i!==d.i&&t.i!==e.i&&t.next.i!==e.i&&la(t,t.next,d,e))return!0;t=t.next}while(t!==d);return!1}(d,e)&&(Ul(d,e)&&Ul(e,d)&&function Ko(d,e){let t=d,r=!1;const o=(d.x+e.x)/2,c=(d.y+e.y)/2;do{t.y>c!=t.next.y>c&&t.next.y!==t.y&&o<(t.next.x-t.x)*(c-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==d);return r}(d,e)&&(Ir(d.prev,d,e.prev)||Ir(d,e.prev,e))||tu(d,e)&&Ir(d.prev,d,d.next)>0&&Ir(e.prev,e,e.next)>0)}function Ir(d,e,t){return(e.y-d.y)*(t.x-e.x)-(e.x-d.x)*(t.y-e.y)}function tu(d,e){return d.x===e.x&&d.y===e.y}function la(d,e,t,r){const o=gs(Ir(d,e,t)),c=gs(Ir(d,e,r)),h=gs(Ir(t,r,d)),f=gs(Ir(t,r,e));return!!(o!==c&&h!==f||0===o&&Bl(d,t,e)||0===c&&Bl(d,r,e)||0===h&&Bl(t,d,r)||0===f&&Bl(t,e,r))}function Bl(d,e,t){return e.x<=Math.max(d.x,t.x)&&e.x>=Math.min(d.x,t.x)&&e.y<=Math.max(d.y,t.y)&&e.y>=Math.min(d.y,t.y)}function gs(d){return d>0?1:d<0?-1:0}function Ul(d,e){return Ir(d.prev,d,d.next)<0?Ir(d,e,d.next)>=0&&Ir(d,d.prev,e)>=0:Ir(d,e,d.prev)<0||Ir(d,d.next,e)<0}function lh(d,e){const t=new Vl(d.i,d.x,d.y),r=new Vl(e.i,e.x,e.y),o=d.next,c=e.prev;return d.next=e,e.prev=d,t.next=o,o.prev=t,r.next=t,t.prev=r,c.next=r,r.prev=c,r}function Mc(d,e,t,r){const o=new Vl(d,e,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function ka(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Vl(d,e,t){this.i=d,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class mo{static area(e){const t=e.length;let r=0;for(let o=t-1,c=0;c<t;o=c++)r+=e[o].x*e[c].y-e[c].x*e[o].y;return.5*r}static isClockWise(e){return mo.area(e)<0}static triangulateShape(e,t){const r=[],o=[],c=[];Ec(e),Sc(r,e);let h=e.length;t.forEach(Ec);for(let m=0;m<t.length;m++)o.push(h),h+=t[m].length,Sc(r,t[m]);const f=function(d,e,t=2){const r=e&&e.length,o=r?e[0]*t:d.length;let c=kf(d,0,o,t,!0);const h=[];if(!c||c.next===c.prev)return h;let f,m,v,M,w,S,A;if(r&&(c=function Oy(d,e,t,r){const o=[];let c,h,f,m,v;for(c=0,h=e.length;c<h;c++)f=e[c]*r,m=c<h-1?e[c+1]*r:d.length,v=kf(d,f,m,r,!1),v===v.next&&(v.steiner=!0),o.push(Vy(v));for(o.sort(Ny),c=0;c<o.length;c++)Fy(o[c],t),t=Fl(t,t.next);return t}(d,e,c,t)),d.length>80*t){f=v=d[0],m=M=d[1];for(let N=t;N<o;N+=t)w=d[N],S=d[N+1],w<f&&(f=w),S<m&&(m=S),w>v&&(v=w),S>M&&(M=S);A=Math.max(v-f,M-m),A=0!==A?1/A:0}return oh(c,h,t,f,m,A),h}(r,o);for(let m=0;m<f.length;m+=3)c.push(f.slice(m,m+3));return c}}function Ec(d){const e=d.length;e>2&&d[e-1].equals(d[0])&&d.pop()}function Sc(d,e){for(let t=0;t<e.length;t++)d.push(e[t].x),d.push(e[t].y)}class ko extends Pn{constructor(e=new Na([new _t(.5,.5),new _t(-.5,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,o=[],c=[];for(let f=0,m=e.length;f<m;f++)h(e[f]);function h(f){const m=[],v=void 0!==t.curveSegments?t.curveSegments:12,M=void 0!==t.steps?t.steps:1;let w=void 0!==t.depth?t.depth:1,S=void 0===t.bevelEnabled||t.bevelEnabled,A=void 0!==t.bevelThickness?t.bevelThickness:.2,N=void 0!==t.bevelSize?t.bevelSize:A-.1,H=void 0!==t.bevelOffset?t.bevelOffset:0,K=void 0!==t.bevelSegments?t.bevelSegments:3;const B=t.extrudePath,D=void 0!==t.UVGenerator?t.UVGenerator:iu;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),w=t.amount);let ie,ae,me,be,Le,$=!1;B&&(ie=B.getSpacedPoints(M),$=!0,S=!1,ae=B.computeFrenetFrames(M,!1),me=new re,be=new re,Le=new re),S||(K=0,A=0,N=0,H=0);const lt=f.extractPoints(v);let Ye=lt.shape;const te=lt.holes;if(!mo.isClockWise(Ye)){Ye=Ye.reverse();for(let xt=0,Wt=te.length;xt<Wt;xt++){const Vt=te[xt];mo.isClockWise(Vt)&&(te[xt]=Vt.reverse())}}const He=mo.triangulateShape(Ye,te),je=Ye;for(let xt=0,Wt=te.length;xt<Wt;xt++)Ye=Ye.concat(te[xt]);function Je(xt,Wt,Vt){return Wt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Wt.clone().multiplyScalar(Vt).add(xt)}const Ze=Ye.length,vt=He.length;function At(xt,Wt,Vt){let ln,Xt,Gn;const Wn=xt.x-Wt.x,Di=xt.y-Wt.y,fr=Vt.x-xt.x,tr=Vt.y-xt.y,_e=Wn*Wn+Di*Di;if(Math.abs(Wn*tr-Di*fr)>Number.EPSILON){const yt=Math.sqrt(_e),zt=Math.sqrt(fr*fr+tr*tr),En=Wt.x-Di/yt,pt=Wt.y+Wn/yt,en=((Vt.x-tr/zt-En)*tr-(Vt.y+fr/zt-pt)*fr)/(Wn*tr-Di*fr);ln=En+Wn*en-xt.x,Xt=pt+Di*en-xt.y;const $t=ln*ln+Xt*Xt;if($t<=2)return new _t(ln,Xt);Gn=Math.sqrt($t/2)}else{let yt=!1;Wn>Number.EPSILON?fr>Number.EPSILON&&(yt=!0):Wn<-Number.EPSILON?fr<-Number.EPSILON&&(yt=!0):Math.sign(Di)===Math.sign(tr)&&(yt=!0),yt?(ln=-Di,Xt=Wn,Gn=Math.sqrt(_e)):(ln=Wn,Xt=Di,Gn=Math.sqrt(_e/2))}return new _t(ln/Gn,Xt/Gn)}const gn=[];for(let xt=0,Wt=je.length,Vt=Wt-1,ln=xt+1;xt<Wt;xt++,Vt++,ln++)Vt===Wt&&(Vt=0),ln===Wt&&(ln=0),gn[xt]=At(je[xt],je[Vt],je[ln]);const gt=[];let Et,qt=gn.concat();for(let xt=0,Wt=te.length;xt<Wt;xt++){const Vt=te[xt];Et=[];for(let ln=0,Xt=Vt.length,Gn=Xt-1,Wn=ln+1;ln<Xt;ln++,Gn++,Wn++)Gn===Xt&&(Gn=0),Wn===Xt&&(Wn=0),Et[ln]=At(Vt[ln],Vt[Gn],Vt[Wn]);gt.push(Et),qt=qt.concat(Et)}for(let xt=0;xt<K;xt++){const Wt=xt/K,Vt=A*Math.cos(Wt*Math.PI/2),ln=N*Math.sin(Wt*Math.PI/2)+H;for(let Xt=0,Gn=je.length;Xt<Gn;Xt++){const Wn=Je(je[Xt],gn[Xt],ln);Mn(Wn.x,Wn.y,-Vt)}for(let Xt=0,Gn=te.length;Xt<Gn;Xt++){const Wn=te[Xt];Et=gt[Xt];for(let Di=0,fr=Wn.length;Di<fr;Di++){const tr=Je(Wn[Di],Et[Di],ln);Mn(tr.x,tr.y,-Vt)}}}const mn=N+H;for(let xt=0;xt<Ze;xt++){const Wt=S?Je(Ye[xt],qt[xt],mn):Ye[xt];$?(be.copy(ae.normals[0]).multiplyScalar(Wt.x),me.copy(ae.binormals[0]).multiplyScalar(Wt.y),Le.copy(ie[0]).add(be).add(me),Mn(Le.x,Le.y,Le.z)):Mn(Wt.x,Wt.y,0)}for(let xt=1;xt<=M;xt++)for(let Wt=0;Wt<Ze;Wt++){const Vt=S?Je(Ye[Wt],qt[Wt],mn):Ye[Wt];$?(be.copy(ae.normals[xt]).multiplyScalar(Vt.x),me.copy(ae.binormals[xt]).multiplyScalar(Vt.y),Le.copy(ie[xt]).add(be).add(me),Mn(Le.x,Le.y,Le.z)):Mn(Vt.x,Vt.y,w/M*xt)}for(let xt=K-1;xt>=0;xt--){const Wt=xt/K,Vt=A*Math.cos(Wt*Math.PI/2),ln=N*Math.sin(Wt*Math.PI/2)+H;for(let Xt=0,Gn=je.length;Xt<Gn;Xt++){const Wn=Je(je[Xt],gn[Xt],ln);Mn(Wn.x,Wn.y,w+Vt)}for(let Xt=0,Gn=te.length;Xt<Gn;Xt++){const Wn=te[Xt];Et=gt[Xt];for(let Di=0,fr=Wn.length;Di<fr;Di++){const tr=Je(Wn[Di],Et[Di],ln);$?Mn(tr.x,tr.y+ie[M-1].y,ie[M-1].x+Vt):Mn(tr.x,tr.y,w+Vt)}}}function zi(xt,Wt){let Vt=xt.length;for(;--Vt>=0;){const ln=Vt;let Xt=Vt-1;Xt<0&&(Xt=xt.length-1);for(let Gn=0,Wn=M+2*K;Gn<Wn;Gn++){const Di=Ze*Gn,fr=Ze*(Gn+1);sn(Wt+ln+Di,Wt+Xt+Di,Wt+Xt+fr,Wt+ln+fr)}}}function Mn(xt,Wt,Vt){m.push(xt),m.push(Wt),m.push(Vt)}function Zn(xt,Wt,Vt){ui(xt),ui(Wt),ui(Vt);const ln=o.length/3,Xt=D.generateTopUV(r,o,ln-3,ln-2,ln-1);zn(Xt[0]),zn(Xt[1]),zn(Xt[2])}function sn(xt,Wt,Vt,ln){ui(xt),ui(Wt),ui(ln),ui(Wt),ui(Vt),ui(ln);const Xt=o.length/3,Gn=D.generateSideWallUV(r,o,Xt-6,Xt-3,Xt-2,Xt-1);zn(Gn[0]),zn(Gn[1]),zn(Gn[3]),zn(Gn[1]),zn(Gn[2]),zn(Gn[3])}function ui(xt){o.push(m[3*xt+0]),o.push(m[3*xt+1]),o.push(m[3*xt+2])}function zn(xt){c.push(xt.x),c.push(xt.y)}(function Tn(){const xt=o.length/3;if(S){let Wt=0,Vt=Ze*Wt;for(let ln=0;ln<vt;ln++){const Xt=He[ln];Zn(Xt[2]+Vt,Xt[1]+Vt,Xt[0]+Vt)}Wt=M+2*K,Vt=Ze*Wt;for(let ln=0;ln<vt;ln++){const Xt=He[ln];Zn(Xt[0]+Vt,Xt[1]+Vt,Xt[2]+Vt)}}else{for(let Wt=0;Wt<vt;Wt++){const Vt=He[Wt];Zn(Vt[2],Vt[1],Vt[0])}for(let Wt=0;Wt<vt;Wt++){const Vt=He[Wt];Zn(Vt[0]+Ze*M,Vt[1]+Ze*M,Vt[2]+Ze*M)}}r.addGroup(xt,o.length/3-xt,0)})(),function ct(){const xt=o.length/3;let Wt=0;zi(je,Wt),Wt+=je.length;for(let Vt=0,ln=te.length;Vt<ln;Vt++){const Xt=te[Vt];zi(Xt,Wt),Wt+=Xt.length}r.addGroup(xt,o.length/3-xt,1)}()}this.setAttribute("position",new tn(o,3)),this.setAttribute("uv",new tn(c,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function qg(d,e,t){if(t.shapes=[],Array.isArray(d))for(let r=0,o=d.length;r<o;r++)t.shapes.push(d[r].uuid);else t.shapes.push(d.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let c=0,h=e.shapes.length;c<h;c++)r.push(t[e.shapes[c]]);const o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new Fo[o.type]).fromJSON(o)),new ko(r,e.options)}}const iu={generateTopUV:function(d,e,t,r,o){const f=e[3*r],m=e[3*r+1],v=e[3*o],M=e[3*o+1];return[new _t(e[3*t],e[3*t+1]),new _t(f,m),new _t(v,M)]},generateSideWallUV:function(d,e,t,r,o,c){const h=e[3*t],f=e[3*t+1],m=e[3*t+2],v=e[3*r],M=e[3*r+1],w=e[3*r+2],S=e[3*o],A=e[3*o+1],N=e[3*o+2],H=e[3*c],K=e[3*c+1],B=e[3*c+2];return Math.abs(f-M)<Math.abs(h-v)?[new _t(h,1-m),new _t(v,1-w),new _t(S,1-N),new _t(H,1-B)]:[new _t(f,1-m),new _t(M,1-w),new _t(A,1-N),new _t(K,1-B)]}};class su extends Pn{constructor(e=new Na([new _t(0,.5),new _t(-.5,-.5),new _t(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],o=[],c=[],h=[];let f=0,m=0;if(!1===Array.isArray(e))v(e);else for(let M=0;M<e.length;M++)v(e[M]),this.addGroup(f,m,M),f+=m,m=0;function v(M){const w=o.length/3,S=M.extractPoints(t);let A=S.shape;const N=S.holes;!1===mo.isClockWise(A)&&(A=A.reverse());for(let K=0,B=N.length;K<B;K++){const D=N[K];!0===mo.isClockWise(D)&&(N[K]=D.reverse())}const H=mo.triangulateShape(A,N);for(let K=0,B=N.length;K<B;K++)A=A.concat(N[K]);for(let K=0,B=A.length;K<B;K++){const D=A[K];o.push(D.x,D.y,0),c.push(0,0,1),h.push(D.x,D.y)}for(let K=0,B=H.length;K<B;K++){const D=H[K];r.push(D[0]+w,D[1]+w,D[2]+w),m+=3}}this.setIndex(r),this.setAttribute("position",new tn(o,3)),this.setAttribute("normal",new tn(c,3)),this.setAttribute("uv",new tn(h,2))}toJSON(){const e=super.toJSON();return function $g(d,e){if(e.shapes=[],Array.isArray(d))for(let t=0,r=d.length;t<r;t++)e.shapes.push(d[t].uuid);else e.shapes.push(d.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let o=0,c=e.shapes.length;o<c;o++)r.push(t[e.shapes[o]]);return new su(r,e.curveSegments)}}(class Xg extends Sn{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class td extends Sn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ws,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}td.prototype.isMeshStandardMaterial=!0;class Hf extends td{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return at(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ht(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Hf.prototype.isMeshPhysicalMaterial=!0;(class zf extends Sn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ws,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class Kg extends Sn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ws,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;class Gf extends Sn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ws,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Gf.prototype.isMeshNormalMaterial=!0;(class zy extends Sn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class Qg extends Sn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ws,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class dh extends rs{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const wr={arraySlice:function(d,e,t){return wr.isTypedArray(d)?new d.constructor(d.subarray(e,void 0!==t?t:d.length)):d.slice(e,t)},convertArray:function(d,e,t){return!d||!t&&d.constructor===e?d:"number"==typeof e.BYTES_PER_ELEMENT?new e(d):Array.prototype.slice.call(d)},isTypedArray:function(d){return ArrayBuffer.isView(d)&&!(d instanceof DataView)},getKeyframeOrder:function(d){const t=d.length,r=new Array(t);for(let o=0;o!==t;++o)r[o]=o;return r.sort(function e(o,c){return d[o]-d[c]}),r},sortedArray:function(d,e,t){const r=d.length,o=new d.constructor(r);for(let c=0,h=0;h!==r;++c){const f=t[c]*e;for(let m=0;m!==e;++m)o[h++]=d[f+m]}return o},flattenJSON:function(d,e,t,r){let o=1,c=d[0];for(;void 0!==c&&void 0===c[r];)c=d[o++];if(void 0===c)return;let h=c[r];if(void 0!==h)if(Array.isArray(h))do{h=c[r],void 0!==h&&(e.push(c.time),t.push.apply(t,h)),c=d[o++]}while(void 0!==c);else if(void 0!==h.toArray)do{h=c[r],void 0!==h&&(e.push(c.time),h.toArray(t,t.length)),c=d[o++]}while(void 0!==c);else do{h=c[r],void 0!==h&&(e.push(c.time),t.push(h)),c=d[o++]}while(void 0!==c)},subclip:function(d,e,t,r,o=30){const c=d.clone();c.name=e;const h=[];for(let m=0;m<c.tracks.length;++m){const v=c.tracks[m],M=v.getValueSize(),w=[],S=[];for(let A=0;A<v.times.length;++A){const N=v.times[A]*o;if(!(N<t||N>=r)){w.push(v.times[A]);for(let H=0;H<M;++H)S.push(v.values[A*M+H])}}0!==w.length&&(v.times=wr.convertArray(w,v.times.constructor),v.values=wr.convertArray(S,v.values.constructor),h.push(v))}c.tracks=h;let f=1/0;for(let m=0;m<c.tracks.length;++m)f>c.tracks[m].times[0]&&(f=c.tracks[m].times[0]);for(let m=0;m<c.tracks.length;++m)c.tracks[m].shift(-1*f);return c.resetDuration(),c},makeClipAdditive:function(d,e=0,t=d,r=30){r<=0&&(r=30);const o=t.tracks.length,c=e/r;for(let h=0;h<o;++h){const f=t.tracks[h],m=f.ValueTypeName;if("bool"===m||"string"===m)continue;const v=d.tracks.find(function(B){return B.name===f.name&&B.ValueTypeName===m});if(void 0===v)continue;let M=0;const w=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(M=w/3);let S=0;const A=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=A/3);const N=f.times.length-1;let H;if(c<=f.times[0])H=wr.arraySlice(f.values,M,w-M);else if(c>=f.times[N]){const B=N*w+M;H=wr.arraySlice(f.values,B,B+w-M)}else{const B=f.createInterpolant(),D=M,ie=w-M;B.evaluate(c),H=wr.arraySlice(B.resultBuffer,D,ie)}"quaternion"===m&&(new Zr).fromArray(H).normalize().conjugate().toArray(H);const K=v.times.length;for(let B=0;B<K;++B){const D=B*A+S;if("quaternion"===m)Zr.multiplyQuaternionsFlat(v.values,D,H,0,v.values,D);else{const ie=A-2*S;for(let $=0;$<ie;++$)v.values[D+$]-=H[$]}}}return d.blendMode=2501,d}};class Hl{constructor(e,t,r,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,o=t[r],c=t[r-1];e:{t:{let h;n:{i:if(!(e<o)){for(let f=r+2;;){if(void 0===o){if(e<c)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,c)}if(r===f)break;if(c=o,o=t[++r],e<o)break t}h=t.length;break n}if(e>=c)break e;{const f=t[1];e<f&&(r=2,c=f);for(let m=r-2;;){if(void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(r===m)break;if(o=c,c=t[--r-1],e>=c)break t}h=r,r=0}}for(;r<h;){const f=r+h>>>1;e<t[f]?h=f:r=f+1}if(o=t[r],c=t[r-1],void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,o);if(void 0===o)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,c,e)}this._cachedIndex=r,this.intervalChanged_(r,c,o)}return this.interpolate_(r,c,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,o=this.valueSize,c=e*o;for(let h=0;h!==o;++h)t[h]=r[c+h];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Hl.prototype.beforeStart_=Hl.prototype.copySampleValue_,Hl.prototype.afterEnd_=Hl.prototype.copySampleValue_;class $0 extends Hl{constructor(e,t,r,o){super(e,t,r,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:j,endingEnd:j}}intervalChanged_(e,t,r){const o=this.parameterPositions;let c=e-2,h=e+1,f=o[c],m=o[h];if(void 0===f)switch(this.getSettings_().endingStart){case ne:c=e,f=2*t-r;break;case 2402:c=o.length-2,f=t+o[c]-o[c+1];break;default:c=e,f=r}if(void 0===m)switch(this.getSettings_().endingEnd){case ne:h=e,m=2*r-t;break;case 2402:h=1,m=r+o[1]-o[0];break;default:h=e-1,m=t}const v=.5*(r-t),M=this.valueSize;this._weightPrev=v/(t-f),this._weightNext=v/(m-r),this._offsetPrev=c*M,this._offsetNext=h*M}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=e*f,v=m-f,M=this._offsetPrev,w=this._offsetNext,S=this._weightPrev,A=this._weightNext,N=(r-t)/(o-t),H=N*N,K=H*N,B=-S*K+2*S*H-S*N,D=(1+S)*K+(-1.5-2*S)*H+(-.5+S)*N+1,ie=(-1-A)*K+(1.5+A)*H+.5*N,$=A*K-A*H;for(let ae=0;ae!==f;++ae)c[ae]=B*h[M+ae]+D*h[v+ae]+ie*h[m+ae]+$*h[w+ae];return c}}class Gy extends Hl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=e*f,v=m-f,M=(r-t)/(o-t),w=1-M;for(let S=0;S!==f;++S)c[S]=h[v+S]*w+h[m+S]*M;return c}}class Wy extends Hl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class ca{constructor(e,t,r,o){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wr.convertArray(t,this.TimeBufferType),this.values=wr.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:wr.convertArray(e.times,Array),values:wr.convertArray(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(r.interpolation=o)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Wy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Gy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $0(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bs:t=this.InterpolantFactoryMethodDiscrete;break;case us:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bs;case this.InterpolantFactoryMethodLinear:return us;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,o=t.length;r!==o;++r)t[r]*=e}return this}trim(e,t){const r=this.times,o=r.length;let c=0,h=o-1;for(;c!==o&&r[c]<e;)++c;for(;-1!==h&&r[h]>t;)--h;if(++h,0!==c||h!==o){c>=h&&(h=Math.max(h,1),c=h-1);const f=this.getValueSize();this.times=wr.arraySlice(r,c,h),this.values=wr.arraySlice(this.values,c*f,h*f)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,o=this.values,c=r.length;0===c&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let h=null;for(let f=0;f!==c;f++){const m=r[f];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,m),e=!1;break}if(null!==h&&h>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,m,h),e=!1;break}h=m}if(void 0!==o&&wr.isTypedArray(o))for(let f=0,m=o.length;f!==m;++f){const v=o[f];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,v),e=!1;break}}return e}optimize(){const e=wr.arraySlice(this.times),t=wr.arraySlice(this.values),r=this.getValueSize(),o=2302===this.getInterpolation(),c=e.length-1;let h=1;for(let f=1;f<c;++f){let m=!1;const v=e[f];if(v!==e[f+1]&&(1!==f||v!==e[0]))if(o)m=!0;else{const w=f*r,S=w-r,A=w+r;for(let N=0;N!==r;++N){const H=t[w+N];if(H!==t[S+N]||H!==t[A+N]){m=!0;break}}}if(m){if(f!==h){e[h]=e[f];const w=f*r,S=h*r;for(let A=0;A!==r;++A)t[S+A]=t[w+A]}++h}}if(c>0){e[h]=e[c];for(let f=c*r,m=h*r,v=0;v!==r;++v)t[m+v]=t[f+v];++h}return h!==e.length?(this.times=wr.arraySlice(e,0,h),this.values=wr.arraySlice(t,0,h*r)):(this.times=e,this.values=t),this}clone(){const e=wr.arraySlice(this.times,0),t=wr.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}ca.prototype.TimeBufferType=Float32Array,ca.prototype.ValueBufferType=Float32Array,ca.prototype.DefaultInterpolation=us;class nd extends ca{}nd.prototype.ValueTypeName="bool",nd.prototype.ValueBufferType=Array,nd.prototype.DefaultInterpolation=bs,nd.prototype.InterpolantFactoryMethodLinear=void 0,nd.prototype.InterpolantFactoryMethodSmooth=void 0;class em extends ca{}em.prototype.ValueTypeName="color";class Ba extends ca{}Ba.prototype.ValueTypeName="number";class Zy extends Hl{constructor(e,t,r,o){super(e,t,r,o)}interpolate_(e,t,r,o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,m=(r-t)/(o-t);let v=e*f;for(let M=v+f;v!==M;v+=4)Zr.slerpFlat(c,0,h,v-f,h,v,m);return c}}class Cc extends ca{InterpolantFactoryMethodLinear(e){return new Zy(this.times,this.values,this.getValueSize(),e)}}Cc.prototype.ValueTypeName="quaternion",Cc.prototype.DefaultInterpolation=us,Cc.prototype.InterpolantFactoryMethodSmooth=void 0;class au extends ca{}au.prototype.ValueTypeName="string",au.prototype.ValueBufferType=Array,au.prototype.DefaultInterpolation=bs,au.prototype.InterpolantFactoryMethodLinear=void 0,au.prototype.InterpolantFactoryMethodSmooth=void 0;class lu extends ca{}lu.prototype.ValueTypeName="vector";class zl{constructor(e,t=-1,r,o=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=o,this.uuid=ze(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,o=1/(e.fps||1);for(let h=0,f=r.length;h!==f;++h)t.push(tm(r[h]).scale(o));const c=new this(e.name,e.duration,t,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const t=[],r=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,h=r.length;c!==h;++c)t.push(ca.toJSON(r[c]));return o}static CreateFromMorphTargetSequence(e,t,r,o){const c=t.length,h=[];for(let f=0;f<c;f++){let m=[],v=[];m.push((f+c-1)%c,f,(f+1)%c),v.push(0,1,0);const M=wr.getKeyframeOrder(m);m=wr.sortedArray(m,1,M),v=wr.sortedArray(v,1,M),!o&&0===m[0]&&(m.push(c),v.push(v[0])),h.push(new Ba(".morphTargetInfluences["+t[f].name+"]",m,v).scale(1/r))}return new this(e,-1,h)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const o=e;r=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const o={},c=/^([\w-]*?)([\d]+)$/;for(let f=0,m=e.length;f<m;f++){const v=e[f],M=v.name.match(c);if(M&&M.length>1){const w=M[1];let S=o[w];S||(o[w]=S=[]),S.push(v)}}const h=[];for(const f in o)h.push(this.CreateFromMorphTargetSequence(f,o[f],t,r));return h}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(w,S,A,N,H){if(0!==A.length){const K=[],B=[];wr.flattenJSON(A,K,B,N),0!==K.length&&H.push(new w(S,K,B))}},o=[],c=e.name||"default",h=e.fps||30,f=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let w=0;w<v.length;w++){const S=v[w].keys;if(S&&0!==S.length)if(S[0].morphTargets){const A={};let N;for(N=0;N<S.length;N++)if(S[N].morphTargets)for(let H=0;H<S[N].morphTargets.length;H++)A[S[N].morphTargets[H]]=-1;for(const H in A){const K=[],B=[];for(let D=0;D!==S[N].morphTargets.length;++D){const ie=S[N];K.push(ie.time),B.push(ie.morphTarget===H?1:0)}o.push(new Ba(".morphTargetInfluence["+H+"]",K,B))}m=A.length*(h||1)}else{const A=".bones["+t[w].name+"]";r(lu,A+".position",S,"pos",o),r(Cc,A+".quaternion",S,"rot",o),r(lu,A+".scale",S,"scl",o)}}return 0===o.length?null:new this(c,m,o,f)}resetDuration(){let t=0;for(let r=0,o=this.tracks.length;r!==o;++r){const c=this.tracks[r];t=Math.max(t,c.times[c.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tm(d){if(void 0===d.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function jy(d){switch(d.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ba;case"vector":case"vector2":case"vector3":case"vector4":return lu;case"color":return em;case"quaternion":return Cc;case"bool":case"boolean":return nd;case"string":return au}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+d)}(d.type);if(void 0===d.times){const t=[],r=[];wr.flattenJSON(d.keys,t,r,"value"),d.times=t,d.values=r}return void 0!==e.parse?e.parse(d):new e(d.name,d.times,d.values,d.interpolation)}const cu={enabled:!1,files:{},add:function(d,e){!1!==this.enabled&&(this.files[d]=e)},get:function(d){if(!1!==this.enabled)return this.files[d]},remove:function(d){delete this.files[d]},clear:function(){this.files={}}};const im=new class nm{constructor(e,t,r){const o=this;let m,c=!1,h=0,f=0;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(M){f++,!1===c&&void 0!==o.onStart&&o.onStart(M,h,f),c=!0},this.itemEnd=function(M){h++,void 0!==o.onProgress&&o.onProgress(M,h,f),h===f&&(c=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(M){void 0!==o.onError&&o.onError(M)},this.resolveURL=function(M){return m?m(M):M},this.setURLModifier=function(M){return m=M,this},this.addHandler=function(M,w){return v.push(M,w),this},this.removeHandler=function(M){const w=v.indexOf(M);return-1!==w&&v.splice(w,2),this},this.getHandler=function(M){for(let w=0,S=v.length;w<S;w+=2){const A=v[w],N=v[w+1];if(A.global&&(A.lastIndex=0),A.test(M))return N}return null}}};class cl{constructor(e){this.manager=void 0!==e?e:im,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(o,c){r.load(e,o,t,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ul={};class ua extends cl{constructor(e){super(e)}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=cu.get(e);if(void 0!==c)return this.manager.itemStart(e),setTimeout(()=>{t&&t(c),this.manager.itemEnd(e)},0),c;if(void 0!==ul[e])return void ul[e].push({onLoad:t,onProgress:r,onError:o});ul[e]=[],ul[e].push({onLoad:t,onProgress:r,onError:o});const h=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,m=this.responseType;fetch(h).then(v=>{if(200===v.status||0===v.status){if(0===v.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===v.body.getReader)return v;const M=ul[e],w=v.body.getReader(),S=v.headers.get("Content-Length"),A=S?parseInt(S):0,N=0!==A;let H=0;const K=new ReadableStream({start(B){!function D(){w.read().then(({done:ie,value:$})=>{if(ie)B.close();else{H+=$.byteLength;const ae=new ProgressEvent("progress",{lengthComputable:N,loaded:H,total:A});for(let me=0,be=M.length;me<be;me++){const Le=M[me];Le.onProgress&&Le.onProgress(ae)}B.enqueue($),D()}})}()}});return new Response(K)}throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(M=>(new DOMParser).parseFromString(M,f));case"json":return v.json();default:if(void 0===f)return v.text();{const w=/charset="?([^;"\s]*)"?/i.exec(f),S=w&&w[1]?w[1].toLowerCase():void 0,A=new TextDecoder(S);return v.arrayBuffer().then(N=>A.decode(N))}}}).then(v=>{cu.add(e,v);const M=ul[e];delete ul[e];for(let w=0,S=M.length;w<S;w++){const A=M[w];A.onLoad&&A.onLoad(v)}}).catch(v=>{const M=ul[e];if(void 0===M)throw this.manager.itemError(e),v;delete ul[e];for(let w=0,S=M.length;w<S;w++){const A=M[w];A.onError&&A.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class id extends cl{constructor(e){super(e)}load(e,t,r,o){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=cu.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const f=vl("img");function m(){M(),cu.add(e,this),t&&t(this),c.manager.itemEnd(e)}function v(w){M(),o&&o(w),c.manager.itemError(e),c.manager.itemEnd(e)}function M(){f.removeEventListener("load",m,!1),f.removeEventListener("error",v,!1)}return f.addEventListener("load",m,!1),f.addEventListener("error",v,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),c.manager.itemStart(e),f.src=e,f}}class Zf extends cl{constructor(e){super(e)}load(e,t,r,o){const c=new xu,h=new id(this.manager);h.setCrossOrigin(this.crossOrigin),h.setPath(this.path);let f=0;function m(v){h.load(e[v],function(M){c.images[v]=M,f++,6===f&&(c.needsUpdate=!0,t&&t(c))},void 0,o)}for(let v=0;v<e.length;++v)m(v);return c}}class hh extends cl{constructor(e){super(e)}load(e,t,r,o){const c=new Ar,h=new id(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(e,function(f){c.image=f,c.needsUpdate=!0,void 0!==t&&t(c)},r,o),c}}class Ua extends _i{constructor(e,t=1){super(),this.type="Light",this.color=new Ht(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ua.prototype.isLight=!0;class rm extends Ua{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.groundColor=new Ht(t)}copy(e){return Ua.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}rm.prototype.isHemisphereLight=!0;const uu=new Qt,jf=new re,fh=new re;class rd{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _t(512,512),this.map=null,this.mapPass=null,this.matrix=new Qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new lc,this._frameExtents=new _t(1,1),this._viewportCount=1,this._viewports=[new wi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;jf.setFromMatrixPosition(e.matrixWorld),t.position.copy(jf),fh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fh),t.updateMatrixWorld(),uu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uu),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sm extends rd{constructor(){super(new dn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*xe*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,c=e.distance||t.far;(r!==t.fov||o!==t.aspect||c!==t.far)&&(t.fov=r,t.aspect=o,t.far=c,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}sm.prototype.isSpotLightShadow=!0;class sd extends Ua{constructor(e,t,r=0,o=Math.PI/3,c=0,h=1){super(e,t),this.type="SpotLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.target=new _i,this.distance=r,this.angle=o,this.penumbra=c,this.decay=h,this.shadow=new sm}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}sd.prototype.isSpotLight=!0;const ph=new Qt,du=new re,om=new re;class am extends rd{constructor(){super(new dn(90,1,.5,500)),this._frameExtents=new _t(4,2),this._viewportCount=6,this._viewports=[new wi(2,1,1,1),new wi(0,1,1,1),new wi(3,1,1,1),new wi(1,1,1,1),new wi(3,0,1,1),new wi(1,0,1,1)],this._cubeDirections=[new re(1,0,0),new re(-1,0,0),new re(0,0,1),new re(0,0,-1),new re(0,1,0),new re(0,-1,0)],this._cubeUps=[new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,1,0),new re(0,0,1),new re(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,o=this.matrix,c=e.distance||r.far;c!==r.far&&(r.far=c,r.updateProjectionMatrix()),du.setFromMatrixPosition(e.matrixWorld),r.position.copy(du),om.copy(r.position),om.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(om),r.updateMatrixWorld(),o.makeTranslation(-du.x,-du.y,-du.z),ph.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ph)}}am.prototype.isPointLightShadow=!0;class gh extends Ua{constructor(e,t,r=0,o=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=o,this.shadow=new am}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}gh.prototype.isPointLight=!0;class qf extends rd{constructor(){super(new Rd(-5,5,5,-5,.5,500))}}qf.prototype.isDirectionalLightShadow=!0;class $f extends Ua{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(_i.DefaultUp),this.updateMatrix(),this.target=new _i,this.shadow=new qf}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}$f.prototype.isDirectionalLight=!0;(class Yf extends Ua{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class mh extends Ua{constructor(e,t,r=10,o=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class Jf{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new re)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,o=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.282095),t.addScaledVector(h[1],.488603*o),t.addScaledVector(h[2],.488603*c),t.addScaledVector(h[3],.488603*r),t.addScaledVector(h[4],r*o*1.092548),t.addScaledVector(h[5],o*c*1.092548),t.addScaledVector(h[6],.315392*(3*c*c-1)),t.addScaledVector(h[7],r*c*1.092548),t.addScaledVector(h[8],.546274*(r*r-o*o)),t}getIrradianceAt(e,t){const r=e.x,o=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.886227),t.addScaledVector(h[1],1.023328*o),t.addScaledVector(h[2],1.023328*c),t.addScaledVector(h[3],1.023328*r),t.addScaledVector(h[4],.858086*r*o),t.addScaledVector(h[5],.858086*o*c),t.addScaledVector(h[6],.743125*c*c-.247708),t.addScaledVector(h[7],.858086*r*c),t.addScaledVector(h[8],.429043*(r*r-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].fromArray(e,t+3*o);return this}toArray(e=[],t=0){const r=this.coefficients;for(let o=0;o<9;o++)r[o].toArray(e,t+3*o);return e}static getBasisAt(e,t){const r=e.x,o=e.y,c=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*c,t[3]=.488603*r,t[4]=1.092548*r*o,t[5]=1.092548*o*c,t[6]=.315392*(3*c*c-1),t[7]=1.092548*r*c,t[8]=.546274*(r*r-o*o)}}Jf.prototype.isSphericalHarmonics3=!0;class od extends Ua{constructor(e=new Jf,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}od.prototype.isLightProbe=!0;class ad{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,o=e.length;r<o;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}(class lm extends Pn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0;class ep extends cl{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,o){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=cu.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const f={};f.credentials="anonymous"===this.crossOrigin?"same-origin":"include",f.headers=this.requestHeader,fetch(e,f).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(m){cu.add(e,m),t&&t(m),c.manager.itemEnd(e)}).catch(function(m){o&&o(m),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}let ld;ep.prototype.isImageBitmapLoader=!0;class tp extends cl{constructor(e){super(e)}load(e,t,r,o){const c=this,h=new ua(this.manager);h.setResponseType("arraybuffer"),h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(f){try{const m=f.slice(0);(void 0===ld&&(ld=new(window.AudioContext||window.webkitAudioContext)),ld).decodeAudioData(m,function(M){t(M)})}catch(m){o?o(m):console.error(m),c.manager.itemError(e)}},r,o)}}(class dm extends od{constructor(e,t,r=1){super(void 0,r);const o=(new Ht).set(e),c=(new Ht).set(t),h=new re(o.r,o.g,o.b),f=new re(c.r,c.g,c.b),m=Math.sqrt(Math.PI),v=m*Math.sqrt(.75);this.sh.coefficients[0].copy(h).add(f).multiplyScalar(m),this.sh.coefficients[1].copy(h).sub(f).multiplyScalar(v)}}).prototype.isHemisphereLightProbe=!0,class hm extends od{constructor(e,t=1){super(void 0,t);const r=(new Ht).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class vm{constructor(e,t,r){let o,c,h;switch(this.binding=e,this.valueSize=r,t){case"quaternion":o=this._slerp,c=this._slerpAdditive,h=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,c=this._select,h=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,c=this._lerpAdditive,h=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=c,this._setIdentity=h,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,o=this.valueSize,c=e*o+o;let h=this.cumulativeWeight;if(0===h){for(let f=0;f!==o;++f)r[c+f]=r[f];h=t}else h+=t,this._mixBufferRegion(r,c,0,t/h,o);this.cumulativeWeight=h}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,o=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,o=e*t+t,c=this.cumulativeWeight,h=this.cumulativeWeightAdditive,f=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1&&this._mixBufferRegion(r,o,t*this._origIndex,1-c,t),h>0&&this._mixBufferRegionAdditive(r,o,this._addIndex*t,1,t);for(let m=t,v=t+t;m!==v;++m)if(r[m]!==r[m+t]){f.setValue(r,o);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,o=r*this._origIndex;this.binding.getValue(t,o);for(let c=r,h=o;c!==h;++c)t[c]=t[o+c%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,o,c){if(o>=.5)for(let h=0;h!==c;++h)e[t+h]=e[r+h]}_slerp(e,t,r,o){Zr.slerpFlat(e,t,e,t,e,r,o)}_slerpAdditive(e,t,r,o,c){const h=this._workIndex*c;Zr.multiplyQuaternionsFlat(e,h,e,t,e,r),Zr.slerpFlat(e,t,e,t,e,h,o)}_lerp(e,t,r,o,c){const h=1-o;for(let f=0;f!==c;++f){const m=t+f;e[m]=e[m]*h+e[r+f]*o}}_lerpAdditive(e,t,r,o,c){for(let h=0;h!==c;++h){const f=t+h;e[f]=e[f]+e[r+h]*o}}}const ql="\\[\\]\\.:\\/",Ky=new RegExp("["+ql+"]","g"),sp="[^"+ql+"]",ym="[^"+ql.replace("\\.","")+"]",Qy=/((?:WC+[\/:])*)/.source.replace("WC",sp),_m=/(WCOD+)?/.source.replace("WCOD",ym),Q0=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sp),op=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sp),ap=new RegExp("^"+Qy+_m+Q0+op+"$"),Va=["material","materials","bones"];class e_{constructor(e,t,r){const o=r||ar.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=r.length;o!==c;++o)r[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let ar=(()=>{class d{constructor(t,r,o){this.path=r,this.parsedPath=o||d.parseTrackName(r),this.node=d.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,o){return t&&t.isAnimationObjectGroup?new d.Composite(t,r,o):new d(t,r,o)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ky,"")}static parseTrackName(t){const r=ap.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const o={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},c=o.nodeName&&o.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const h=o.nodeName.substring(c+1);-1!==Va.indexOf(h)&&(o.nodeName=o.nodeName.substring(0,c),o.objectName=h)}if(null===o.propertyName||0===o.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return o}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const o=t.skeleton.getBoneByName(r);if(void 0!==o)return o}if(t.children){const o=function(h){for(let f=0;f<h.length;f++){const m=h[f];if(m.name===r||m.uuid===r)return m;const v=o(m.children);if(v)return v}return null},c=o(t.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)t[r++]=o[c]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const o=this.resolvedProperty;for(let c=0,h=o.length;c!==h;++c)o[c]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,o=r.objectName,c=r.propertyName;let h=r.propertyIndex;if(t||(t=d.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(o){let M=r.objectIndex;switch(o){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let w=0;w<t.length;w++)if(t[w].name===M){M=w;break}break;default:if(void 0===t[o])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[o]}if(void 0!==M){if(void 0===t[M])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[M]}}const f=t[c];if(void 0===f)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+c+" but it wasn't found.",t);let m=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===c){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[h]&&(h=t.morphTargetDictionary[h])}v=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=h}else void 0!==f.fromArray&&void 0!==f.toArray?(v=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(v=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=c;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return d.Composite=e_,d})();ar.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ar.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ar.prototype.GetterByBindingType=[ar.prototype._getValue_direct,ar.prototype._getValue_array,ar.prototype._getValue_arrayElement,ar.prototype._getValue_toArray],ar.prototype.SetterByBindingTypeAndVersioning=[[ar.prototype._setValue_direct,ar.prototype._setValue_direct_setNeedsUpdate,ar.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_array,ar.prototype._setValue_array_setNeedsUpdate,ar.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_arrayElement,ar.prototype._setValue_arrayElement_setNeedsUpdate,ar.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ar.prototype._setValue_fromArray,ar.prototype._setValue_fromArray_setNeedsUpdate,ar.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class da{constructor(e,t,r=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=o;const c=t.tracks,h=c.length,f=new Array(h),m={endingStart:j,endingEnd:j};for(let v=0;v!==h;++v){const M=c[v].createInterpolant(null);f[v]=M,M.settings=m}this._interpolantSettings=m,this._interpolants=f,this._propertyBindings=new Array(h),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const o=this._clip.duration,c=e._clip.duration,f=o/c;e.warp(1,c/o,t),this.warp(f,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const o=this._mixer,c=o.time,h=this.timeScale;let f=this._timeScaleInterpolant;null===f&&(f=o._lendControlInterpolant(),this._timeScaleInterpolant=f);const m=f.parameterPositions,v=f.sampleValues;return m[0]=c,m[1]=c+r,v[0]=e/h,v[1]=t/h,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,o){if(!this.enabled)return void this._updateWeight(e);const c=this._startTime;if(null!==c){const m=(e-c)*r;if(m<0||0===r)return;this._startTime=null,t=r*m}t*=this._updateTimeScale(e);const h=this._updateTime(t),f=this._updateWeight(e);if(f>0){const m=this._interpolants,v=this._propertyBindings;if(2501===this.blendMode)for(let M=0,w=m.length;M!==w;++M)m[M].evaluate(h),v[M].accumulateAdditive(f);else for(let M=0,w=m.length;M!==w;++M)m[M].evaluate(h),v[M].accumulate(o,f)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const o=r.evaluate(e)[0];t*=o,e>r.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let o=this.time+e,c=this._loopCount;const h=2202===r;if(0===e)return-1===c?o:h&&1==(1&c)?t-o:o;if(2200===r){-1===c&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===c&&(e>=0?(c=0,this._setEndings(!0,0===this.repetitions,h)):this._setEndings(0===this.repetitions,!0,h)),o>=t||o<0){const f=Math.floor(o/t);o-=t*f,c+=Math.abs(f);const m=this.repetitions-c;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===m){const v=e<0;this._setEndings(v,!v,h)}else this._setEndings(!1,!1,h);this._loopCount=c,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=o;if(h&&1==(1&c))return t-o}return o}_setEndings(e,t,r){const o=this._interpolantSettings;r?(o.endingStart=ne,o.endingEnd=ne):(o.endingStart=e?this.zeroSlopeAtStart?ne:j:2402,o.endingEnd=t?this.zeroSlopeAtEnd?ne:j:2402)}_scheduleFading(e,t,r){const o=this._mixer,c=o.time;let h=this._weightInterpolant;null===h&&(h=o._lendControlInterpolant(),this._weightInterpolant=h);const f=h.parameterPositions,m=h.sampleValues;return f[0]=c,m[0]=t,f[1]=c+e,m[1]=r,this}}(class ha extends k{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,o=e._clip.tracks,c=o.length,h=e._propertyBindings,f=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let M=v[m];void 0===M&&(M={},v[m]=M);for(let w=0;w!==c;++w){const S=o[w],A=S.name;let N=M[A];if(void 0!==N)++N.referenceCount,h[w]=N;else{if(N=h[w],void 0!==N){null===N._cacheIndex&&(++N.referenceCount,this._addInactiveBinding(N,m,A));continue}N=new vm(ar.create(r,A,t&&t._propertyBindings[w].binding.parsedPath),S.ValueTypeName,S.getValueSize()),++N.referenceCount,this._addInactiveBinding(N,m,A),h[w]=N}f[w].resultBuffer=N.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,o=e._clip.uuid,c=this._actionsByClip[o];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,o,r)}const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==c.useCount++&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==--c.useCount&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const o=this._actions,c=this._actionsByClip;let h=c[t];if(void 0===h)h={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[t]=h;else{const f=h.knownActions;e._byClipCacheIndex=f.length,f.push(e)}e._cacheIndex=o.length,o.push(e),h.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],o=e._cacheIndex;r._cacheIndex=o,t[o]=r,t.pop(),e._cacheIndex=null;const c=e._clip.uuid,h=this._actionsByClip,f=h[c],m=f.knownActions,v=m[m.length-1],M=e._byClipCacheIndex;v._byClipCacheIndex=M,m[M]=v,m.pop(),e._byClipCacheIndex=null,delete f.actionByRoot[(e._localRoot||this._root).uuid],0===m.length&&delete h[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,o=t.length;r!==o;++r){const c=t[r];0==--c.referenceCount&&this._removeInactiveBinding(c)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,o=this._nActiveActions++,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,o=--this._nActiveActions,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_addInactiveBinding(e,t,r){const o=this._bindingsByRootAndName,c=this._bindings;let h=o[t];void 0===h&&(h={},o[t]=h),h[r]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,o=r.rootNode.uuid,c=r.path,h=this._bindingsByRootAndName,f=h[o],m=t[t.length-1],v=e._cacheIndex;m._cacheIndex=v,t[v]=m,t.pop(),delete f[c],0===Object.keys(f).length&&delete h[o]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,o=this._nActiveBindings++,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,o=--this._nActiveBindings,c=t[o];e._cacheIndex=o,t[o]=e,c._cacheIndex=r,t[r]=c}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new Gy(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,o=--this._nActiveControlInterpolants,c=t[o];e.__cacheIndex=o,t[o]=e,c.__cacheIndex=r,t[r]=c}clipAction(e,t,r){const o=t||this._root,c=o.uuid;let h="string"==typeof e?zl.findByName(o,e):e;const f=null!==h?h.uuid:e,m=this._actionsByClip[f];let v=null;if(void 0===r&&(r=null!==h?h.blendMode:2500),void 0!==m){const w=m.actionByRoot[c];if(void 0!==w&&w.blendMode===r)return w;v=m.knownActions[0],null===h&&(h=v._clip)}if(null===h)return null;const M=new da(this,h,t,r);return this._bindAction(M,v),this._addInactiveAction(M,f,c),M}existingAction(e,t){const r=t||this._root,o=r.uuid,c="string"==typeof e?zl.findByName(r,e):e,f=this._actionsByClip[c?c.uuid:e];return void 0!==f&&f.actionByRoot[o]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,o=this.time+=e*=this.timeScale,c=Math.sign(e),h=this._accuIndex^=1;for(let v=0;v!==r;++v)t[v]._update(o,e,c,h);const f=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)f[v].apply(h);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,o=this._actionsByClip,c=o[r];if(void 0!==c){const h=c.knownActions;for(let f=0,m=h.length;f!==m;++f){const v=h[f];this._deactivateAction(v);const M=v._cacheIndex,w=t[t.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,w._cacheIndex=M,t[M]=w,t.pop(),this._removeInactiveBindingsForAction(v)}delete o[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const h in r){const m=r[h].actionByRoot[t];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}const c=this._bindingsByRootAndName[t];if(void 0!==c)for(const h in c){const f=c[h];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class yh{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new yh(void 0===this.value.clone?this.value:this.value.clone())}}(class xm extends vc{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class cp{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(at(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const wm=new _t;class fu{constructor(e=new _t(1/0,1/0),t=new _t(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=wm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wm.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}fu.prototype.isBox2=!0;const dl=new re,dd=new Qt,hd=new Qt;function bh(d){const e=[];d&&d.isBone&&e.push(d);for(let t=0;t<d.children.length;t++)e.push.apply(e,bh(d.children[t]));return e}const pp=new Float32Array(1);new Int32Array(pp.buffer),Xo.create=function(d,e){return console.log("THREE.Curve.create() has been deprecated"),d.prototype=Object.create(Xo.prototype),d.prototype.constructor=d,d.prototype.getPoint=e,d},Ff.prototype.fromPoints=function(d){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(d)},class Cm extends Jo{constructor(e=10,t=10,r=4473924,o=8947848){r=new Ht(r),o=new Ht(o);const c=t/2,h=e/t,f=e/2,m=[],v=[];for(let S=0,A=0,N=-f;S<=t;S++,N+=h){m.push(-f,0,N,f,0,N),m.push(N,0,-f,N,0,f);const H=S===c?r:o;H.toArray(v,A),A+=3,H.toArray(v,A),A+=3,H.toArray(v,A),A+=3,H.toArray(v,A),A+=3}const M=new Pn;M.setAttribute("position",new tn(m,3)),M.setAttribute("color",new tn(v,3)),super(M,new rs({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class xh extends Jo{constructor(e){const t=bh(e),r=new Pn,o=[],c=[],h=new Ht(0,0,1),f=new Ht(0,1,0);for(let v=0;v<t.length;v++){const M=t[v];M.parent&&M.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),c.push(h.r,h.g,h.b),c.push(f.r,f.g,f.b))}r.setAttribute("position",new tn(o,3)),r.setAttribute("color",new tn(c,3)),super(r,new rs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,o=r.getAttribute("position");hd.copy(this.root.matrixWorld).invert();for(let c=0,h=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(dd.multiplyMatrices(hd,f.matrixWorld),dl.setFromMatrixPosition(dd),o.setXYZ(h,dl.x,dl.y,dl.z),dd.multiplyMatrices(hd,f.parent.matrixWorld),dl.setFromMatrixPosition(dd),o.setXYZ(h+1,dl.x,dl.y,dl.z),h+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},cl.prototype.extractUrlBase=function(d){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ad.extractUrlBase(d)},cl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},fu.prototype.center=function(d){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(d)},fu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},fu.prototype.isIntersectionBox=function(d){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},fu.prototype.size=function(d){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(d)},Is.prototype.center=function(d){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(d)},Is.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Is.prototype.isIntersectionBox=function(d){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},Is.prototype.isIntersectionSphere=function(d){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(d)},Is.prototype.size=function(d){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(d)},Ii.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},lc.prototype.setFromMatrix=function(d){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(d)},vr.prototype.flattenToArrayOffset=function(d,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(d,e)},vr.prototype.multiplyVector3=function(d){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),d.applyMatrix3(this)},vr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},vr.prototype.applyToBufferAttribute=function(d){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),d.applyMatrix3(this)},vr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},vr.prototype.getInverse=function(d){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(d).invert()},Qt.prototype.extractPosition=function(d){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(d)},Qt.prototype.flattenToArrayOffset=function(d,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(d,e)},Qt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new re).setFromMatrixColumn(this,3)},Qt.prototype.setRotationFromQuaternion=function(d){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(d)},Qt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Qt.prototype.multiplyVector3=function(d){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.multiplyVector4=function(d){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Qt.prototype.rotateAxis=function(d){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),d.transformDirection(this)},Qt.prototype.crossVector=function(d){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Qt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Qt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Qt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Qt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Qt.prototype.applyToBufferAttribute=function(d){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),d.applyMatrix4(this)},Qt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Qt.prototype.makeFrustum=function(d,e,t,r,o,c){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(d,e,r,t,o,c)},Qt.prototype.getInverse=function(d){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(d).invert()},Al.prototype.isIntersectionLine=function(d){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(d)},Zr.prototype.multiplyVector3=function(d){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),d.applyQuaternion(this)},Zr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ls.prototype.isIntersectionBox=function(d){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(d)},Ls.prototype.isIntersectionPlane=function(d){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(d)},Ls.prototype.isIntersectionSphere=function(d){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(d)},Ve.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ve.prototype.barycoordFromPoint=function(d,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(d,e)},Ve.prototype.midpoint=function(d){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(d)},Ve.prototypenormal=function(d){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(d)},Ve.prototype.plane=function(d){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(d)},Ve.barycoordFromPoint=function(d,e,t,r,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ve.getBarycoord(d,e,t,r,o)},Ve.normal=function(d,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ve.getNormal(d,e,t,r)},Na.prototype.extractAllPoints=function(d){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(d)},Na.prototype.extrude=function(d){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ko(this,d)},Na.prototype.makeGeometry=function(d){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new su(this,d)},_t.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},_t.prototype.distanceToManhattan=function(d){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(d)},_t.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},re.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},re.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},re.prototype.getPositionFromMatrix=function(d){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(d)},re.prototype.getScaleFromMatrix=function(d){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(d)},re.prototype.getColumnFromMatrix=function(d,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,d)},re.prototype.applyProjection=function(d){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(d)},re.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},re.prototype.distanceToManhattan=function(d){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(d)},re.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},wi.prototype.fromAttribute=function(d,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(d,e,t)},wi.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_i.prototype.getChildByName=function(d){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(d)},_i.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_i.prototype.translate=function(d,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,d)},_i.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_i.prototype.applyMatrix=function(d){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(d)},Object.defineProperties(_i.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(d){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=d}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),br.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(br.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),qd.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},dn.prototype.setLens=function(d,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(d)},Object.defineProperties(Ua.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(d){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=d}},shadowCameraLeft:{set:function(d){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=d}},shadowCameraRight:{set:function(d){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=d}},shadowCameraTop:{set:function(d){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=d}},shadowCameraBottom:{set:function(d){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=d}},shadowCameraNear:{set:function(d){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=d}},shadowCameraFar:{set:function(d){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=d}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(d){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=d}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(d){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=d}},shadowMapHeight:{set:function(d){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=d}}}),Object.defineProperties(ci.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ys},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ys)}}}),ci.prototype.setDynamic=function(d){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===d?Ys:$s),this},ci.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ci.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Pn.prototype.addIndex=function(d){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(d)},Pn.prototype.addAttribute=function(d,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===d?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(d,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(d,new ci(arguments[1],arguments[2])))},Pn.prototype.addDrawCall=function(d,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(d,e)},Pn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Pn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Pn.prototype.removeAttribute=function(d){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(d)},Pn.prototype.applyMatrix=function(d){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(d)},Object.defineProperties(Pn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),vc.prototype.setDynamic=function(d){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===d?Ys:$s),this},vc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ko.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ko.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ko.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},zd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},yh.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Sn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(d){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===d}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(d){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=d}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Ke.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(d){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=d}}}),ji.prototype.clearTarget=function(d,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(d),this.clear(e,t,r)},ji.prototype.animate=function(d){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(d)},ji.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ji.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ji.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ji.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ji.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ji.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ji.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ji.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ji.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ji.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ji.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ji.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ji.prototype.enableScissorTest=function(d){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(d)},ji.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ji.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ji.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ji.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ji.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ji.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ji.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ji.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ji.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ji.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ji.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=d}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(d){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=d}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(d){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===d?Ln:gi}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(xf.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Qr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=d}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(d){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=d}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(d){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=d}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(d){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=d}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(d){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=d}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(d){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=d}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(d){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=d}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(d){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=d}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(d){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=d}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(d){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=d}}}),class ms extends _i{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(d){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new tp).load(d,function(r){e.setBuffer(r)}),this},Nh.prototype.updateCubeMap=function(d,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(d,e)},Nh.prototype.clear=function(d,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(d,e,t,r)},ao.crossOrigin=void 0,ao.loadTexture=function(d,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const o=new hh;o.setCrossOrigin(this.crossOrigin);const c=o.load(d,t,void 0,r);return e&&(c.mapping=e),c},ao.loadTextureCube=function(d,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const o=new Zf;o.setCrossOrigin(this.crossOrigin);const c=o.load(d,t,void 0,r);return e&&(c.mapping=e),c},ao.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ao.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137")}},Yt=>{Yt(Yt.s=7304)}]);